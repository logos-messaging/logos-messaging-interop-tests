2026-02-04 11:59:58.568 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 11:59:58.568 DEBUG [tests.conftest] Running test: test_store_with_multiple_content_topics with id: 2026-02-04_11-59-58__db459c3d-52d7-4441-beb9-98252e521871
2026-02-04 11:59:58.568 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 11:59:58.568 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-04 11:59:58.569 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-04 11:59:58.575 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:59:58.576 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-04_11-59-58__db459c3d-52d7-4441-beb9-98252e521871__wakuorg_nwaku:latest.log
2026-02-04 11:59:58.576 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:59:58.576 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:59:58.577 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:59:58.578 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.11.91
2026-02-04 11:59:58.578 DEBUG [src.node.docker_mananger] Generated ports ['5977', '5978', '5979', '5980', '5981']
2026-02-04 11:59:58.578 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:59:58.578 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:59:58.578 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:59:58.578 DEBUG [src.node.docker_mananger] docker run -i -t -p 5977:5977 -p 5978:5978 -p 5979:5979 -p 5980:5980 -p 5981:5981 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5979 --rest-port=5977 --tcp-port=5978 --discv5-udp-port=5980 --rest-address=0.0.0.0 --nat=extip:172.18.11.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcb1362a6a98bedd85699b8b01bc6d8be67debec2ab34ac27fa5f297ca9febf6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5981 --metrics-logging=true --store=true --relay=true
2026-02-04 11:59:58.786 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.11.91 waku d4a670b8adbbfe22a71f0a1b4d10405d472de071698c264548158ac70aa10fb3
2026-02-04 11:59:58.817 DEBUG [src.node.docker_mananger] Container started with ID d4a670b8adbb. Setting up logs at ./log/docker/publishing_node1_2026-02-04_11-59-58__db459c3d-52d7-4441-beb9-98252e521871__wakuorg_nwaku:latest.log
2026-02-04 11:59:58.819 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5977
2026-02-04 11:59:58.819 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:59:58.825 ERROR [src.node.docker_mananger] Max retries reached for container 46e44c05de9f. Exiting log stream.
2026-02-04 11:59:59.370 ERROR [src.node.docker_mananger] Max retries reached for container 527bd1ae87c8. Exiting log stream.
2026-02-04 11:59:59.820 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5977/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:59:59.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:59:59.823 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:59:59.824 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5977/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:59:59.826 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.91/tcp/5978/p2p/16Uiu2HAm6S8HYUPYZoHACVEk4UeyzYK2umSnVsgtNBXYdkZmwGbT","/ip4/172.18.11.91/tcp/5979/ws/p2p/16Uiu2HAm6S8HYUPYZoHACVEk4UeyzYK2umSnVsgtNBXYdkZmwGbT"],"enrUri":"enr:-L24QE8Y3tgjbjFOKHkGx3JgxVRVFAmDj9hjEhJxFsBX4FoOMcYtnUzO5NDxRtnM_DTUSPmONVp7VNwLwWlyvt04ongCgmlkgnY0gmlwhKwSC1uKbXVsdGlhZGRyc5YACASsEgtbBhdaAAoErBILWwYXW90DgnJzhQADAQAAiXNlY3AyNTZrMaECo45M7qSt3G6jyD0YdDFXVdnwpHlphKjAC2hMLfMJ9dqDdGNwghdag3VkcIIXXIV3YWt1MgM"}'
2026-02-04 11:59:59.826 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:59:59.833 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:59:59.834 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-04_11-59-58__db459c3d-52d7-4441-beb9-98252e521871__wakuorg_nwaku:latest.log
2026-02-04 11:59:59.834 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:59:59.834 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:59:59.835 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:59:59.836 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.67
2026-02-04 11:59:59.836 DEBUG [src.node.docker_mananger] Generated ports ['34406', '34407', '34408', '34409', '34410']
2026-02-04 11:59:59.836 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:59:59.836 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:59:59.836 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:59:59.836 DEBUG [src.node.docker_mananger] docker run -i -t -p 34406:34406 -p 34407:34407 -p 34408:34408 -p 34409:34409 -p 34410:34410 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34408 --rest-port=34406 --tcp-port=34407 --discv5-udp-port=34409 --rest-address=0.0.0.0 --nat=extip:172.18.234.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da4e77ebfcbd283b1efff4d6441b55d8ba9ce2992ebcde0af07e053b19aa9eb3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34410 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QE8Y3tgjbjFOKHkGx3JgxVRVFAmDj9hjEhJxFsBX4FoOMcYtnUzO5NDxRtnM_DTUSPmONVp7VNwLwWlyvt04ongCgmlkgnY0gmlwhKwSC1uKbXVsdGlhZGRyc5YACASsEgtbBhdaAAoErBILWwYXW90DgnJzhQADAQAAiXNlY3AyNTZrMaECo45M7qSt3G6jyD0YdDFXVdnwpHlphKjAC2hMLfMJ9dqDdGNwghdag3VkcIIXXIV3YWt1MgM --storenode=/ip4/172.18.11.91/tcp/5978/p2p/16Uiu2HAm6S8HYUPYZoHACVEk4UeyzYK2umSnVsgtNBXYdkZmwGbT --store=true --relay=true
2026-02-04 12:00:00.032 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.67 waku 343bd7fbf485f959ae533d95ae1e970482cb2711479b1be6124e15bd4e4506c5
2026-02-04 12:00:00.067 DEBUG [src.node.docker_mananger] Container started with ID 343bd7fbf485. Setting up logs at ./log/docker/store_node1_2026-02-04_11-59-58__db459c3d-52d7-4441-beb9-98252e521871__wakuorg_nwaku:latest.log
2026-02-04 12:00:00.067 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34406
2026-02-04 12:00:00.068 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 12:00:01.069 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34406/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 12:00:01.074 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 12:00:01.074 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 12:00:01.074 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34406/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 12:00:01.077 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.67/tcp/34407/p2p/16Uiu2HAky4dv1Y5rMurnxCDfDhP55pCD71edd5RXmXaMt37ZMVPx","/ip4/172.18.234.67/tcp/34408/ws/p2p/16Uiu2HAky4dv1Y5rMurnxCDfDhP55pCD71edd5RXmXaMt37ZMVPx"],"enrUri":"enr:-L24QCycz70n0xNK1UYhfaep9MkioGmfZ443KWlfPBPnlrknFCVYdbIXjkwUCrBNYj2E4nj5IcMEdOxFKmiG82zfDPgCgmlkgnY0gmlwhKwS6kOKbXVsdGlhZGRyc5YACASsEupDBoZnAAoErBLqQwaGaN0DgnJzhQADAQAAiXNlY3AyNTZrMaECNgs3LkAmvR7TpCRy6qTcHlYrmJ90X03lkzw_ZT24bgODdGNwgoZng3VkcIKGaYV3YWt1MgM"}'
2026-02-04 12:00:01.078 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 12:00:01.078 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34406/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.11.91/tcp/5978/p2p/16Uiu2HAm6S8HYUPYZoHACVEk4UeyzYK2umSnVsgtNBXYdkZmwGbT"]'
2026-02-04 12:00:01.081 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:01.081 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5977/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 12:00:01.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:01.084 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34406/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 12:00:01.086 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:01.087 DEBUG [src.steps.store] Relaying message
2026-02-04 12:00:01.087 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 12:00:01.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:01.092 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 12:00:01.294 DEBUG [src.steps.store] Relaying message
2026-02-04 12:00:01.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-04 12:00:01.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:01.300 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 12:00:01.501 DEBUG [src.steps.store] Relaying message
2026-02-04 12:00:01.502 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-04 12:00:01.508 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:01.508 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 12:00:01.710 DEBUG [src.steps.store] Relaying message
2026-02-04 12:00:01.710 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 12:00:01.716 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:01.717 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 12:00:01.918 DEBUG [src.steps.store] Relaying message
2026-02-04 12:00:01.918 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-04 12:00:01.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:01.925 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 12:00:02.126 DEBUG [src.steps.store] Relaying message
2026-02-04 12:00:02.127 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-04 12:00:02.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:02.135 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 12:00:02.336 DEBUG [src.steps.store] Relaying message
2026-02-04 12:00:02.336 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-04 12:00:02.343 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:02.343 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 12:00:02.545 DEBUG [src.steps.store] Relaying message
2026-02-04 12:00:02.545 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-04 12:00:02.551 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:00:02.551 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 12:00:02.753 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5977/store/v3/messages?contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto%2C%2Fstatusim%2F1%2Fcommunity%2Fcbor&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 12:00:02.757 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x943926299519379a6c2e616df5fbca7541f28a6e93f58b9a4feec18cba4ef3c8"},{"messageHash":"0xde941a13041f1505f557f99bc764c5d2334642248acd9e4c06ef969df6e5d2e0"}]}'
2026-02-04 12:00:02.757 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34406/store/v3/messages?contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto%2C%2Fstatusim%2F1%2Fcommunity%2Fcbor&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 12:00:02.761 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x943926299519379a6c2e616df5fbca7541f28a6e93f58b9a4feec18cba4ef3c8"},{"messageHash":"0xde941a13041f1505f557f99bc764c5d2334642248acd9e4c06ef969df6e5d2e0"}]}'
2026-02-04 12:00:02.764 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 12:00:02.765 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 12:00:02.765 DEBUG [src.node.waku_node] Stopping container with id d4a670b8adbb
2026-02-04 12:00:03.372 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 12:00:03.372 DEBUG [src.node.waku_node] Stopping container with id 343bd7fbf485
2026-02-04 12:00:03.951 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 12:00:03.954 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 12:00:03.961 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 12:00:03.968 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
