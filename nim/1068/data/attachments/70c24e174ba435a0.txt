2026-02-04 11:56:27.051 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 11:56:27.052 DEBUG [tests.conftest] Running test: test_single_pubsub_topic[/waku/2/rs/5/0] with id: 2026-02-04_11-56-27__f9aba3de-440d-4602-ab9e-5e1213bbd05b
2026-02-04 11:56:27.052 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 11:56:27.052 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 11:56:27.052 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-04 11:56:27.060 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:56:27.061 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_11-56-27__f9aba3de-440d-4602-ab9e-5e1213bbd05b__wakuorg_nwaku:latest.log
2026-02-04 11:56:27.062 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:56:27.062 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:56:27.064 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:56:27.064 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.155.72
2026-02-04 11:56:27.064 DEBUG [src.node.docker_mananger] Generated ports ['19701', '19702', '19703', '19704', '19705']
2026-02-04 11:56:27.065 DEBUG [src.node.waku_node] Cluster id was resolved to: 5
2026-02-04 11:56:27.065 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-04 11:56:27.065 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:56:27.065 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:56:27.065 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:56:27.065 DEBUG [src.node.docker_mananger] docker run -i -t -p 19701:19701 -p 19702:19702 -p 19703:19703 -p 19704:19704 -p 19705:19705 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19703 --rest-port=19701 --tcp-port=19702 --discv5-udp-port=19704 --rest-address=0.0.0.0 --nat=extip:172.18.155.72 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=ab3cd911aed8c85f3bcf3b8d8bd1ab48b4e467b8ff444020acffaffc6fa67ca3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19705 --metrics-logging=true --relay=true --filter=true
2026-02-04 11:56:27.252 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.155.72 waku cea3c7112f597815842714013386a7737a8f6ff518084a7d4df1338c73763d2f
2026-02-04 11:56:27.270 ERROR [src.node.docker_mananger] Max retries reached for container d84d781ea3a6. Exiting log stream.
2026-02-04 11:56:27.285 DEBUG [src.node.docker_mananger] Container started with ID cea3c7112f59. Setting up logs at ./log/docker/node1_2026-02-04_11-56-27__f9aba3de-440d-4602-ab9e-5e1213bbd05b__wakuorg_nwaku:latest.log
2026-02-04 11:56:27.286 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19701
2026-02-04 11:56:27.287 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:56:27.822 ERROR [src.node.docker_mananger] Max retries reached for container 81ccb43c01a2. Exiting log stream.
2026-02-04 11:56:28.287 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19701/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:56:28.290 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:56:28.291 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:56:28.291 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19701/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:56:28.293 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.72/tcp/19702/p2p/16Uiu2HAm5opacghSNj9rsqV5toVLB97vUoKo27D22gHie88cR267","/ip4/172.18.155.72/tcp/19703/ws/p2p/16Uiu2HAm5opacghSNj9rsqV5toVLB97vUoKo27D22gHie88cR267"],"enrUri":"enr:-L24QGEm9zrbBdSgffGIxPBfpcazyhtzv1tcctZKEvYdZD1ASzrrJ84eImZ55kyW0n68K7JzwNEcLH4qK6mLgDqB07MCgmlkgnY0gmlwhKwSm0iKbXVsdGlhZGRyc5YACASsEptIBkz2AAoErBKbSAZM990DgnJzhQAFAQAAiXNlY3AyNTZrMaECmkFfHiWI-1PdFenEvsOonE4-Q-6g9PwJ4WmbWtyGb9yDdGNwgkz2g3VkcIJM-IV3YWt1MgU"}'
2026-02-04 11:56:28.293 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:56:28.301 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:56:28.301 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_11-56-27__f9aba3de-440d-4602-ab9e-5e1213bbd05b__wakuorg_nwaku:latest.log
2026-02-04 11:56:28.301 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:56:28.301 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:56:28.303 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:56:28.303 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.231.247
2026-02-04 11:56:28.303 DEBUG [src.node.docker_mananger] Generated ports ['35515', '35516', '35517', '35518', '35519']
2026-02-04 11:56:28.303 DEBUG [src.node.waku_node] Cluster id was resolved to: 5
2026-02-04 11:56:28.303 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-04 11:56:28.303 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:56:28.303 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:56:28.304 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:56:28.304 DEBUG [src.node.docker_mananger] docker run -i -t -p 35515:35515 -p 35516:35516 -p 35517:35517 -p 35518:35518 -p 35519:35519 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35517 --rest-port=35515 --tcp-port=35516 --discv5-udp-port=35518 --rest-address=0.0.0.0 --nat=extip:172.18.231.247 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=af8032cd4b7b9cd1ee69b9c80598e7ff2bd6b9efacdcfaffdaf0e69ca7c885de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35519 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGEm9zrbBdSgffGIxPBfpcazyhtzv1tcctZKEvYdZD1ASzrrJ84eImZ55kyW0n68K7JzwNEcLH4qK6mLgDqB07MCgmlkgnY0gmlwhKwSm0iKbXVsdGlhZGRyc5YACASsEptIBkz2AAoErBKbSAZM990DgnJzhQAFAQAAiXNlY3AyNTZrMaECmkFfHiWI-1PdFenEvsOonE4-Q-6g9PwJ4WmbWtyGb9yDdGNwgkz2g3VkcIJM-IV3YWt1MgU
2026-02-04 11:56:28.514 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.231.247 waku 107198feef063bef35a1d275342c62c0b85b199b66477d5b6fb6398ee244c19d
2026-02-04 11:56:28.545 DEBUG [src.node.docker_mananger] Container started with ID 107198feef06. Setting up logs at ./log/docker/node2_2026-02-04_11-56-27__f9aba3de-440d-4602-ab9e-5e1213bbd05b__wakuorg_nwaku:latest.log
2026-02-04 11:56:28.545 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35515
2026-02-04 11:56:28.545 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:56:29.546 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35515/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:56:29.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 11:56:29.560 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:56:29.560 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35515/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:56:29.564 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.247/tcp/35516/p2p/16Uiu2HAkvM5n5i3nekDLPMemuk1VMCtEuXWHvuwC9T1TgQBdnK8c","/ip4/172.18.231.247/tcp/35517/ws/p2p/16Uiu2HAkvM5n5i3nekDLPMemuk1VMCtEuXWHvuwC9T1TgQBdnK8c"],"enrUri":"enr:-L24QJPS4TaokbIGVFYUxBbSMu7yzeYPawPcqqYGTGlCMwkTNRIf-rnQ55VYHe8y-mTcsbLOotb_YugwYOtTnYRaFwgCgmlkgnY0gmlwhKwS5_eKbXVsdGlhZGRyc5YACASsEuf3Boq8AAoErBLn9waKvd0DgnJzhQAFAQAAiXNlY3AyNTZrMaECDa6xAwcQQxx9HoHMIBe5kUktopKg0Lyif6D1X1j78QmDdGNwgoq8g3VkcIKKvoV3YWt1MgE"}'
2026-02-04 11:56:29.564 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:56:29.564 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35515/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.155.72/tcp/19702/p2p/16Uiu2HAm5opacghSNj9rsqV5toVLB97vUoKo27D22gHie88cR267"]'
2026-02-04 11:56:29.568 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:56:29.569 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19701/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
2026-02-04 11:56:29.571 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:56:29.572 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35515/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
2026-02-04 11:56:29.574 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:56:29.575 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19701/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:56:29.579 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:56:29.580 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 11:56:29.680 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-04 11:56:29.681 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19701/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:56:29.683 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770206189575046143,"ephemeral":false,"proof":""}]'
2026-02-04 11:56:29.685 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 11:56:29.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35515/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:56:29.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770206189575046143,"ephemeral":false,"proof":""}]'
2026-02-04 11:56:29.690 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 11:56:29.691 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 11:56:29.692 DEBUG [src.node.waku_node] Stopping container with id cea3c7112f59
2026-02-04 11:56:30.243 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:56:30.243 DEBUG [src.node.waku_node] Stopping container with id 107198feef06
2026-02-04 11:56:30.802 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:56:30.803 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 11:56:30.809 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 11:56:30.815 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
