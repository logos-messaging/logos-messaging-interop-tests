2026-02-04 11:55:37.117 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 11:55:37.118 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_content_topic_string_instead_of_list with id: 2026-02-04_11-55-37__f735f1c0-a5b4-4369-b050-1af67c4829de
2026-02-04 11:55:37.118 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 11:55:37.118 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-04 11:55:37.118 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-04 11:55:37.125 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:37.125 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_11-55-37__f735f1c0-a5b4-4369-b050-1af67c4829de__wakuorg_nwaku:latest.log
2026-02-04 11:55:37.125 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:37.125 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:37.127 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:37.127 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.204.115
2026-02-04 11:55:37.127 DEBUG [src.node.docker_mananger] Generated ports ['47417', '47418', '47419', '47420', '47421']
2026-02-04 11:55:37.127 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:37.127 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:37.127 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:37.127 DEBUG [src.node.docker_mananger] docker run -i -t -p 47417:47417 -p 47418:47418 -p 47419:47419 -p 47420:47420 -p 47421:47421 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47419 --rest-port=47417 --tcp-port=47418 --discv5-udp-port=47420 --rest-address=0.0.0.0 --nat=extip:172.18.204.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c41b849dd86bf37fbc1ee5ef6bd76f6eb8bcdaadcec4cbaa50e363a2fd66a4ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47421 --metrics-logging=true --relay=true --filter=true
2026-02-04 11:55:37.302 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.204.115 waku 7f05323f125c4aadcbd065be18dbf2ae07ca2927fc207b42c9f8aaf06e284892
2026-02-04 11:55:37.336 DEBUG [src.node.docker_mananger] Container started with ID 7f05323f125c. Setting up logs at ./log/docker/node1_2026-02-04_11-55-37__f735f1c0-a5b4-4369-b050-1af67c4829de__wakuorg_nwaku:latest.log
2026-02-04 11:55:37.336 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47417
2026-02-04 11:55:37.337 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:37.411 ERROR [src.node.docker_mananger] Max retries reached for container 7de310eaff4c. Exiting log stream.
2026-02-04 11:55:37.927 ERROR [src.node.docker_mananger] Max retries reached for container 9010df1dddcb. Exiting log stream.
2026-02-04 11:55:38.337 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47417/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:38.340 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:55:38.340 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:38.341 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47417/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:38.343 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.115/tcp/47418/p2p/16Uiu2HAm8Dgvurto34N8TW4f1C1UQafuKpnHXmSberK64yWQBDsn","/ip4/172.18.204.115/tcp/47419/ws/p2p/16Uiu2HAm8Dgvurto34N8TW4f1C1UQafuKpnHXmSberK64yWQBDsn"],"enrUri":"enr:-L24QFLV5o8v0aUbLPIQAPDM8hngHHFP_8TIJvgNLSql65OyL4BHU558_Y8RiNtOajvjXxyy8n4MWZwge1am4n3aDCICgmlkgnY0gmlwhKwSzHOKbXVsdGlhZGRyc5YACASsEsxzBrk6AAoErBLMcwa5O90DgnJzhQADAQAAiXNlY3AyNTZrMaECvhYI7P_EIRs5rvLffl1iNFB9h3NkJvDfu-0EsKRnENGDdGNwgrk6g3VkcIK5PIV3YWt1MgU"}'
2026-02-04 11:55:38.343 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:38.343 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-04 11:55:38.349 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:38.349 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_11-55-37__f735f1c0-a5b4-4369-b050-1af67c4829de__wakuorg_nwaku:latest.log
2026-02-04 11:55:38.350 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:38.350 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:38.351 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:38.351 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.224.105
2026-02-04 11:55:38.351 DEBUG [src.node.docker_mananger] Generated ports ['20669', '20670', '20671', '20672', '20673']
2026-02-04 11:55:38.352 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:38.352 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:38.352 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:38.352 DEBUG [src.node.docker_mananger] docker run -i -t -p 20669:20669 -p 20670:20670 -p 20671:20671 -p 20672:20672 -p 20673:20673 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20671 --rest-port=20669 --tcp-port=20670 --discv5-udp-port=20672 --rest-address=0.0.0.0 --nat=extip:172.18.224.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1e7df8d7b2beeded7311e2fdeeb7cbd45a55c488a2e1dc6932ec952ff5da6cfb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20673 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFLV5o8v0aUbLPIQAPDM8hngHHFP_8TIJvgNLSql65OyL4BHU558_Y8RiNtOajvjXxyy8n4MWZwge1am4n3aDCICgmlkgnY0gmlwhKwSzHOKbXVsdGlhZGRyc5YACASsEsxzBrk6AAoErBLMcwa5O90DgnJzhQADAQAAiXNlY3AyNTZrMaECvhYI7P_EIRs5rvLffl1iNFB9h3NkJvDfu-0EsKRnENGDdGNwgrk6g3VkcIK5PIV3YWt1MgU --filternode=/ip4/172.18.204.115/tcp/47418/p2p/16Uiu2HAm8Dgvurto34N8TW4f1C1UQafuKpnHXmSberK64yWQBDsn
2026-02-04 11:55:38.529 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.224.105 waku fb76da2893b250b2ffe5d396ee9cc85f8641df433243ec54d9f93aefd1f9d83b
2026-02-04 11:55:38.560 DEBUG [src.node.docker_mananger] Container started with ID fb76da2893b2. Setting up logs at ./log/docker/node2_2026-02-04_11-55-37__f735f1c0-a5b4-4369-b050-1af67c4829de__wakuorg_nwaku:latest.log
2026-02-04 11:55:38.560 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20669
2026-02-04 11:55:38.560 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:39.561 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20669/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:39.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 11:55:39.565 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:39.565 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20669/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:39.567 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.105/tcp/20670/p2p/16Uiu2HAm6c6MV2gg453gQzwpjoPHP83xc9MdXuWV61pmho9LhRBa","/ip4/172.18.224.105/tcp/20671/ws/p2p/16Uiu2HAm6c6MV2gg453gQzwpjoPHP83xc9MdXuWV61pmho9LhRBa"],"enrUri":"enr:-L24QMwW1xaa7higypN-OxWf5brztCOg8cWCNHH52Re7gNE3CQhV_VW73SKN6hZnPW2LSjr3dk3UIeEFb6kT50MAwOwCgmlkgnY0gmlwhKwS4GmKbXVsdGlhZGRyc5YACASsEuBpBlC-AAoErBLgaQZQv90DgnJzhQADAQAAiXNlY3AyNTZrMaECphvsjLfYUUklSsWnubnZH-fTTLZ18FM_n123oI57FrWDdGNwglC-g3VkcIJQwIV3YWt1MgA"}'
2026-02-04 11:55:39.567 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:39.568 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20669/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.204.115/tcp/47418/p2p/16Uiu2HAm8Dgvurto34N8TW4f1C1UQafuKpnHXmSberK64yWQBDsn"]'
2026-02-04 11:55:39.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:39.597 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-04 11:55:39.598 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47417/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 11:55:39.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:39.613 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20669/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "120caf01-384e-4ac5-a4bf-ddd1630ec495", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 11:55:39.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"120caf01-384e-4ac5-a4bf-ddd1630ec495","statusDesc":"OK"}'
2026-02-04 11:55:39.626 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:20669/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto", "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 11:55:39.628 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20669/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-04 11:55:39.631 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 11:55:39.632 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 11:55:39.632 DEBUG [src.node.waku_node] Stopping container with id 7f05323f125c
2026-02-04 11:55:40.147 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:40.147 DEBUG [src.node.waku_node] Stopping container with id fb76da2893b2
2026-02-04 11:55:40.667 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:40.670 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 11:55:40.675 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 11:55:40.679 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
