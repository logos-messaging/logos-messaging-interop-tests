2026-02-04 11:54:48.990 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 11:54:48.991 DEBUG [tests.conftest] Running test: test_main_node_relay_lightpush__peer_only_relay with id: 2026-02-04_11-54-48__6c592817-9867-441a-b776-11af224628c6
2026-02-04 11:54:48.991 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 11:54:48.991 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-04 11:54:48.998 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:54:48.998 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-04_11-54-48__6c592817-9867-441a-b776-11af224628c6__wakuorg_nwaku:latest.log
2026-02-04 11:54:48.998 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:54:48.998 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:54:49.000 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:54:49.000 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.15.8
2026-02-04 11:54:49.000 DEBUG [src.node.docker_mananger] Generated ports ['27859', '27860', '27861', '27862', '27863']
2026-02-04 11:54:49.000 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:54:49.000 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:54:49.000 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:54:49.000 DEBUG [src.node.docker_mananger] docker run -i -t -p 27859:27859 -p 27860:27860 -p 27861:27861 -p 27862:27862 -p 27863:27863 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27861 --rest-port=27859 --tcp-port=27860 --discv5-udp-port=27862 --rest-address=0.0.0.0 --nat=extip:172.18.15.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc19adebad9a0babbaf6d4d49655adca1afcfa00eddb58b2cf34faba0bd00fbb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27863 --metrics-logging=true --lightpush=false --relay=true
2026-02-04 11:54:49.180 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.15.8 waku 5ae2c124535f9f4363d24e5ea3d012d1dbfe4b7e2363da4119bb1e367aa9a7e6
2026-02-04 11:54:49.213 DEBUG [src.node.docker_mananger] Container started with ID 5ae2c124535f. Setting up logs at ./log/docker/receiving_node1_2026-02-04_11-54-48__6c592817-9867-441a-b776-11af224628c6__wakuorg_nwaku:latest.log
2026-02-04 11:54:49.213 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27859
2026-02-04 11:54:49.213 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:54:49.266 ERROR [src.node.docker_mananger] Max retries reached for container 9eb80b9e2ee7. Exiting log stream.
2026-02-04 11:54:49.752 ERROR [src.node.docker_mananger] Max retries reached for container 19275174b1df. Exiting log stream.
2026-02-04 11:54:50.214 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27859/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:54:50.217 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:54:50.217 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:54:50.217 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27859/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:54:50.220 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.8/tcp/27860/p2p/16Uiu2HAm1MUBAehzoG3S2DJTxfs23SCQLa3o9gbW4jNqYLodgHZb","/ip4/172.18.15.8/tcp/27861/ws/p2p/16Uiu2HAm1MUBAehzoG3S2DJTxfs23SCQLa3o9gbW4jNqYLodgHZb"],"enrUri":"enr:-L24QN3eDl0KNKknDzfeUsGuX5aZ4xi_iCQAff7986KSjKPYCiOgWWwDPIQWT3pGepnc8ldU0gPFzVi7R2rllCP0pMMCgmlkgnY0gmlwhKwSDwiKbXVsdGlhZGRyc5YACASsEg8IBmzUAAoErBIPCAZs1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECWBJznIevsDoSqObK-V8BF1y-P-ENiK6EXGrGbG1mzPqDdGNwgmzUg3VkcIJs1oV3YWt1MgE"}'
2026-02-04 11:54:50.220 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:54:50.220 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27859/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 11:54:50.233 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:54:50.239 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:54:50.239 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-04_11-54-48__6c592817-9867-441a-b776-11af224628c6__wakuorg_nwaku:latest.log
2026-02-04 11:54:50.239 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:54:50.240 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:54:50.241 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:54:50.241 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.6.63
2026-02-04 11:54:50.241 DEBUG [src.node.docker_mananger] Generated ports ['42173', '42174', '42175', '42176', '42177']
2026-02-04 11:54:50.241 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:54:50.242 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:54:50.242 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:54:50.242 DEBUG [src.node.docker_mananger] docker run -i -t -p 42173:42173 -p 42174:42174 -p 42175:42175 -p 42176:42176 -p 42177:42177 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42175 --rest-port=42173 --tcp-port=42174 --discv5-udp-port=42176 --rest-address=0.0.0.0 --nat=extip:172.18.6.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaac0eccfc3f5bfaee4eaa99fa3c8ffd8a4fdcac3bfdb1fbea6fb5f4b92ba3e2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42177 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QN3eDl0KNKknDzfeUsGuX5aZ4xi_iCQAff7986KSjKPYCiOgWWwDPIQWT3pGepnc8ldU0gPFzVi7R2rllCP0pMMCgmlkgnY0gmlwhKwSDwiKbXVsdGlhZGRyc5YACASsEg8IBmzUAAoErBIPCAZs1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECWBJznIevsDoSqObK-V8BF1y-P-ENiK6EXGrGbG1mzPqDdGNwgmzUg3VkcIJs1oV3YWt1MgE --lightpushnode=/ip4/172.18.15.8/tcp/27860/p2p/16Uiu2HAm1MUBAehzoG3S2DJTxfs23SCQLa3o9gbW4jNqYLodgHZb --lightpush=true --relay=true
2026-02-04 11:54:50.431 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.6.63 waku 736f088504c7cf2f41c1d6857a1242a277bd7dc29427d5a23bb678c7e622d566
2026-02-04 11:54:50.462 DEBUG [src.node.docker_mananger] Container started with ID 736f088504c7. Setting up logs at ./log/docker/lightpush_node1_2026-02-04_11-54-48__6c592817-9867-441a-b776-11af224628c6__wakuorg_nwaku:latest.log
2026-02-04 11:54:50.462 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42173
2026-02-04 11:54:50.463 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:54:51.463 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42173/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:54:51.467 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:54:51.467 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:54:51.467 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42173/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:54:51.469 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.63/tcp/42174/p2p/16Uiu2HAm7wXa7p387JGN2gs3UxK9sojUsa8KJW45dmCNdfgKA3WB","/ip4/172.18.6.63/tcp/42175/ws/p2p/16Uiu2HAm7wXa7p387JGN2gs3UxK9sojUsa8KJW45dmCNdfgKA3WB"],"enrUri":"enr:-L24QADxmigh0SJ4brTTTAGqxst6sFdUKWV2DqeeCHc-9u-eRvZx4AzIZIgL1uy8ctNHYrrF3guNqrtR-58iystd1m8CgmlkgnY0gmlwhKwSBj-KbXVsdGlhZGRyc5YACASsEgY_BqS-AAoErBIGPwakv90DgnJzhQADAQAAiXNlY3AyNTZrMaECufIpA7XQ7_6JjsqFPHJwR6tH4TbT4RWmIW94WHg5DUyDdGNwgqS-g3VkcIKkwIV3YWt1Mgk"}'
2026-02-04 11:54:51.469 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:54:51.470 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42173/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.8/tcp/27860/p2p/16Uiu2HAm1MUBAehzoG3S2DJTxfs23SCQLa3o9gbW4jNqYLodgHZb"]'
2026-02-04 11:54:51.500 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:54:51.501 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42173/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770206091501108374}}'
2026-02-04 11:54:51.514 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:42173/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2026-02-04 11:54:51.521 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 11:54:51.527 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 11:54:51.527 DEBUG [src.node.waku_node] Stopping container with id 5ae2c124535f
2026-02-04 11:54:52.041 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:54:52.041 DEBUG [src.node.waku_node] Stopping container with id 736f088504c7
2026-02-04 11:54:52.538 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:54:52.539 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 11:54:52.544 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 11:54:52.550 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
