2026-02-04 11:55:47.154 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 11:55:47.155 DEBUG [tests.conftest] Running test: test_time_filter_invalid_start_time with id: 2026-02-04_11-55-47__7dbe9ebd-aded-409b-aee0-0af142707c4e
2026-02-04 11:55:47.155 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 11:55:47.155 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-04 11:55:47.156 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-04 11:55:47.162 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:47.162 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-04_11-55-47__7dbe9ebd-aded-409b-aee0-0af142707c4e__wakuorg_nwaku:latest.log
2026-02-04 11:55:47.162 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:47.162 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:47.164 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:47.164 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.34.108
2026-02-04 11:55:47.164 DEBUG [src.node.docker_mananger] Generated ports ['29813', '29814', '29815', '29816', '29817']
2026-02-04 11:55:47.164 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:47.164 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:47.164 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:47.165 DEBUG [src.node.docker_mananger] docker run -i -t -p 29813:29813 -p 29814:29814 -p 29815:29815 -p 29816:29816 -p 29817:29817 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29815 --rest-port=29813 --tcp-port=29814 --discv5-udp-port=29816 --rest-address=0.0.0.0 --nat=extip:172.18.34.108 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=86ec2a76c32c5def0db9b9d3f62cbd02d2a870badb7ea1c4ada2181aafb116f0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29817 --metrics-logging=true --store=true --relay=true
2026-02-04 11:55:47.356 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.34.108 waku c544602c4a9bfdfef6179f2077989074fa22dc536adbf753454b5000314f1b59
2026-02-04 11:55:47.387 DEBUG [src.node.docker_mananger] Container started with ID c544602c4a9b. Setting up logs at ./log/docker/publishing_node1_2026-02-04_11-55-47__7dbe9ebd-aded-409b-aee0-0af142707c4e__wakuorg_nwaku:latest.log
2026-02-04 11:55:47.387 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29813
2026-02-04 11:55:47.389 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:47.410 ERROR [src.node.docker_mananger] Max retries reached for container 6f617cbf007a. Exiting log stream.
2026-02-04 11:55:47.955 ERROR [src.node.docker_mananger] Max retries reached for container 577ddf40824f. Exiting log stream.
2026-02-04 11:55:48.391 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29813/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:48.394 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:55:48.394 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:48.395 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29813/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:48.397 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.108/tcp/29814/p2p/16Uiu2HAm6WCkbiCGNQyy82ZBfyRrmShSDDLpBuit3YFYvWSqYHvX","/ip4/172.18.34.108/tcp/29815/ws/p2p/16Uiu2HAm6WCkbiCGNQyy82ZBfyRrmShSDDLpBuit3YFYvWSqYHvX"],"enrUri":"enr:-L24QMd_a3-e9NyLfktSYSrmweyP7Mi7VbZ_hto3jdeGVJvvO0NRk9QTKlaO6YGLABTFwGAHZ2LVJ8kR343bZc2PjXMCgmlkgnY0gmlwhKwSImyKbXVsdGlhZGRyc5YACASsEiJsBnR2AAoErBIibAZ0d90DgnJzhQADAQAAiXNlY3AyNTZrMaECpJmsjGlekATb-W9r5pg8KjRdHGYLhsKJk2Xf8r-AoZiDdGNwgnR2g3VkcIJ0eIV3YWt1MgM"}'
2026-02-04 11:55:48.397 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:48.404 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:48.404 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-04_11-55-47__7dbe9ebd-aded-409b-aee0-0af142707c4e__wakuorg_nwaku:latest.log
2026-02-04 11:55:48.404 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:48.404 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:48.405 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:48.406 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.76.67
2026-02-04 11:55:48.406 DEBUG [src.node.docker_mananger] Generated ports ['39308', '39309', '39310', '39311', '39312']
2026-02-04 11:55:48.406 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:48.406 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:48.406 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:48.406 DEBUG [src.node.docker_mananger] docker run -i -t -p 39308:39308 -p 39309:39309 -p 39310:39310 -p 39311:39311 -p 39312:39312 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39310 --rest-port=39308 --tcp-port=39309 --discv5-udp-port=39311 --rest-address=0.0.0.0 --nat=extip:172.18.76.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d2c4505fa6c24ae690e1d8e8cc24d1ffee7d01565d581c9febd8b3a7f3f7ff8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39312 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMd_a3-e9NyLfktSYSrmweyP7Mi7VbZ_hto3jdeGVJvvO0NRk9QTKlaO6YGLABTFwGAHZ2LVJ8kR343bZc2PjXMCgmlkgnY0gmlwhKwSImyKbXVsdGlhZGRyc5YACASsEiJsBnR2AAoErBIibAZ0d90DgnJzhQADAQAAiXNlY3AyNTZrMaECpJmsjGlekATb-W9r5pg8KjRdHGYLhsKJk2Xf8r-AoZiDdGNwgnR2g3VkcIJ0eIV3YWt1MgM --storenode=/ip4/172.18.34.108/tcp/29814/p2p/16Uiu2HAm6WCkbiCGNQyy82ZBfyRrmShSDDLpBuit3YFYvWSqYHvX --store=true --relay=true
2026-02-04 11:55:48.596 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.76.67 waku c4775a9a3a1e12f2d7a82436981de0224bf994d7a81394ebe3565e1890e62771
2026-02-04 11:55:48.631 DEBUG [src.node.docker_mananger] Container started with ID c4775a9a3a1e. Setting up logs at ./log/docker/store_node1_2026-02-04_11-55-47__7dbe9ebd-aded-409b-aee0-0af142707c4e__wakuorg_nwaku:latest.log
2026-02-04 11:55:48.632 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39308
2026-02-04 11:55:48.632 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:49.633 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39308/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:49.637 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:55:49.637 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:49.637 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39308/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:49.640 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.67/tcp/39309/p2p/16Uiu2HAmMZiWMJPHExZ1YYzZtWTkuyxHGdw3husNqmgGCL6LhkZF","/ip4/172.18.76.67/tcp/39310/ws/p2p/16Uiu2HAmMZiWMJPHExZ1YYzZtWTkuyxHGdw3husNqmgGCL6LhkZF"],"enrUri":"enr:-L24QNOMBlxCfSwNslSc7856xri0KRom-FtPX4HPiQdCYNBpQCOFI4GNdjO8pMdNZfzCQ-4tApwIyM6zZYE8Ih6exikCgmlkgnY0gmlwhKwSTEOKbXVsdGlhZGRyc5YACASsEkxDBpmNAAoErBJMQwaZjt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhF9dGd_W2a1LGP1r9uv9IbVYlo4nCAVNPHD07yv0piqDdGNwgpmNg3VkcIKZj4V3YWt1MgM"}'
2026-02-04 11:55:49.640 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:49.640 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.108/tcp/29814/p2p/16Uiu2HAm6WCkbiCGNQyy82ZBfyRrmShSDDLpBuit3YFYvWSqYHvX"]'
2026-02-04 11:55:49.643 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:49.643 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29813/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 11:55:49.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:49.646 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 11:55:49.648 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:49.649 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:49.649 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29813/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:49.654 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:49.655 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:49.856 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:49.856 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29813/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:49.862 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:49.862 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:50.063 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:50.063 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29813/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:50.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:50.069 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:50.270 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:50.270 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29813/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:50.276 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:50.277 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:50.477 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:50.477 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29813/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:50.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:50.483 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:50.684 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:50.685 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29813/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:50.690 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:50.690 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:50.891 DEBUG [tests.store.test_time_filter] inquering stored messages with start time abc
2026-02-04 11:55:50.891 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29813/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:50.894 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29813/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true. Response content: b'time parsing error: invalid integer: abc'
2026-02-04 11:55:50.895 DEBUG [tests.store.test_time_filter] invalid start_time cause error Error: 400 Client Error: Bad Request for url: http://127.0.0.1:29813/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true with response: b'time parsing error: invalid integer: abc'
2026-02-04 11:55:50.896 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 11:55:50.898 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 11:55:50.898 DEBUG [src.node.waku_node] Stopping container with id c544602c4a9b
2026-02-04 11:55:51.424 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:51.424 DEBUG [src.node.waku_node] Stopping container with id c4775a9a3a1e
2026-02-04 11:55:51.951 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:51.960 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 11:55:51.966 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 11:55:51.972 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
