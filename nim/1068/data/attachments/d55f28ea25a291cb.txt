2026-02-04 11:55:13.140 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 11:55:13.142 DEBUG [tests.conftest] Running test: test_2_nodes_different_content_topic_different_shard with id: 2026-02-04_11-55-13__14f862e6-2d99-41af-abc3-07ce331d8359
2026-02-04 11:55:13.143 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 11:55:13.143 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 11:55:13.143 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-04 11:55:13.153 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:13.153 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_11-55-13__14f862e6-2d99-41af-abc3-07ce331d8359__wakuorg_nwaku:latest.log
2026-02-04 11:55:13.154 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:13.154 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:13.155 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:13.155 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.119.245
2026-02-04 11:55:13.155 DEBUG [src.node.docker_mananger] Generated ports ['56068', '56069', '56070', '56071', '56072']
2026-02-04 11:55:13.156 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:13.156 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:13.156 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:13.156 DEBUG [src.node.docker_mananger] docker run -i -t -p 56068:56068 -p 56069:56069 -p 56070:56070 -p 56071:56071 -p 56072:56072 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56070 --rest-port=56068 --tcp-port=56069 --discv5-udp-port=56071 --rest-address=0.0.0.0 --nat=extip:172.18.119.245 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=7edf1aeaf4dab8aaa738ff2c3d95eb96b6eece417deb4b8b634e33d4df4b657d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56072 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2026-02-04 11:55:13.334 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.119.245 waku b990ba8df6829e622bfaf7952c5c0607c12e75874f0ad6863ea0b2d60f9ee336
2026-02-04 11:55:13.361 DEBUG [src.node.docker_mananger] Container started with ID b990ba8df682. Setting up logs at ./log/docker/node1_2026-02-04_11-55-13__14f862e6-2d99-41af-abc3-07ce331d8359__wakuorg_nwaku:latest.log
2026-02-04 11:55:13.362 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56068
2026-02-04 11:55:13.362 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:13.411 ERROR [src.node.docker_mananger] Max retries reached for container 4fccf084c627. Exiting log stream.
2026-02-04 11:55:13.963 ERROR [src.node.docker_mananger] Max retries reached for container da8f559ed8c2. Exiting log stream.
2026-02-04 11:55:14.363 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56068/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:14.366 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:55:14.366 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:14.366 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56068/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:14.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.119.245/tcp/56069/p2p/16Uiu2HAkun5tR6wfMBks41poQiRQF3XbL8zBqnd5kLQLigbV7Q8g","/ip4/172.18.119.245/tcp/56070/ws/p2p/16Uiu2HAkun5tR6wfMBks41poQiRQF3XbL8zBqnd5kLQLigbV7Q8g"],"enrUri":"enr:-L24QFpGfkVJXInl-DH7I3qAXwON15d5ufOnhafeZ4k1Xy2ZAdfBkxfU1rJfO6ZdpKsZMVS8PFAb4Gn8bQ57YYv-MCICgmlkgnY0gmlwhKwSd_WKbXVsdGlhZGRyc5YACASsEnf1BtsFAAoErBJ39QbbBt0DgnJzhQACAQAAiXNlY3AyNTZrMaECBTql8yNZ7-BZ3Q7RUIzkymXVsttxL8LSbEuW2eIkCSmDdGNwgtsFg3VkcILbB4V3YWt1MgU"}'
2026-02-04 11:55:14.368 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:14.375 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:14.375 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_11-55-13__14f862e6-2d99-41af-abc3-07ce331d8359__wakuorg_nwaku:latest.log
2026-02-04 11:55:14.375 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:14.375 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:14.377 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:14.377 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.79.122
2026-02-04 11:55:14.377 DEBUG [src.node.docker_mananger] Generated ports ['49113', '49114', '49115', '49116', '49117']
2026-02-04 11:55:14.377 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:14.377 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:14.377 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:14.378 DEBUG [src.node.docker_mananger] docker run -i -t -p 49113:49113 -p 49114:49114 -p 49115:49115 -p 49116:49116 -p 49117:49117 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49115 --rest-port=49113 --tcp-port=49114 --discv5-udp-port=49116 --rest-address=0.0.0.0 --nat=extip:172.18.79.122 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e5f6ca67ef3228aa5d30dfbfaebebb1f21ebefaf3ceb187f27a1c1cf77cfffe1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49117 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QFpGfkVJXInl-DH7I3qAXwON15d5ufOnhafeZ4k1Xy2ZAdfBkxfU1rJfO6ZdpKsZMVS8PFAb4Gn8bQ57YYv-MCICgmlkgnY0gmlwhKwSd_WKbXVsdGlhZGRyc5YACASsEnf1BtsFAAoErBJ39QbbBt0DgnJzhQACAQAAiXNlY3AyNTZrMaECBTql8yNZ7-BZ3Q7RUIzkymXVsttxL8LSbEuW2eIkCSmDdGNwgtsFg3VkcILbB4V3YWt1MgU --content-topic=/waku/2/content/test.js
2026-02-04 11:55:14.569 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.79.122 waku a8c510d4304918d4b22f6d83ec0d82ee7acfb702754d3a431c3858b0c50d0d4c
2026-02-04 11:55:14.599 DEBUG [src.node.docker_mananger] Container started with ID a8c510d43049. Setting up logs at ./log/docker/node2_2026-02-04_11-55-13__14f862e6-2d99-41af-abc3-07ce331d8359__wakuorg_nwaku:latest.log
2026-02-04 11:55:14.599 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49113
2026-02-04 11:55:14.599 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:15.600 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49113/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:15.621 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 11:55:15.622 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:15.622 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49113/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:15.627 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.122/tcp/49114/p2p/16Uiu2HAmDwrL2dosHpYYv4aPQie5bt4yippCdoS9bFuE38xHPWmg","/ip4/172.18.79.122/tcp/49115/ws/p2p/16Uiu2HAmDwrL2dosHpYYv4aPQie5bt4yippCdoS9bFuE38xHPWmg"],"enrUri":"enr:-L24QDlMpTqNNRF8_qLDcCEFERVyCLtC1BdWDd_ocC_QZOLrdvBoZPUUpNiRJ9LzrzMTB4_9QMGmXEWPaJLLUkP16PMCgmlkgnY0gmlwhKwST3qKbXVsdGlhZGRyc5YACASsEk96Br_aAAoErBJPega_290DgnJzhQACAQAAiXNlY3AyNTZrMaEDEy19j4RIxvjnrkHzS8BmIp4t0Ch9GzZ1cRd9oyxnmsODdGNwgr_ag3VkcIK_3IV3YWt1MgE"}'
2026-02-04 11:55:15.628 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:15.628 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49113/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.119.245/tcp/56069/p2p/16Uiu2HAkun5tR6wfMBks41poQiRQF3XbL8zBqnd5kLQLigbV7Q8g"]'
2026-02-04 11:55:15.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:15.633 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56068/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-04 11:55:15.635 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:15.636 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49113/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
2026-02-04 11:55:15.638 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:15.639 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56068/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:15.643 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:15.643 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 11:55:15.743 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-04 11:55:15.744 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56068/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:15.746 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770206115638890126,"ephemeral":false,"proof":""}]'
2026-02-04 11:55:15.748 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 11:55:15.748 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49113/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:15.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770206115638890126,"ephemeral":false,"proof":""}]'
2026-02-04 11:55:15.752 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 11:55:15.753 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 11:55:15.753 DEBUG [src.node.waku_node] Stopping container with id b990ba8df682
2026-02-04 11:55:16.296 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:16.297 DEBUG [src.node.waku_node] Stopping container with id a8c510d43049
2026-02-04 11:55:16.834 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:16.835 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 11:55:16.841 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 11:55:16.847 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
