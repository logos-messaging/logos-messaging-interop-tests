2026-02-04 11:53:04.601 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 11:53:04.602 DEBUG [tests.conftest] Running test: test_lightpush with id: 2026-02-04_11-53-04__176ee4cd-6077-45ed-8c21-de48c07e4823
2026-02-04 11:53:04.602 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 11:53:04.602 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-04 11:53:04.603 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-04 11:53:04.603 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 11:53:04.603 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-04 11:53:04.610 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:53:04.610 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_11-53-04__176ee4cd-6077-45ed-8c21-de48c07e4823__wakuorg_nwaku:latest.log
2026-02-04 11:53:04.610 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:53:04.610 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:53:04.612 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:53:04.612 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.127.228
2026-02-04 11:53:04.612 DEBUG [src.node.docker_mananger] Generated ports ['54337', '54338', '54339', '54340', '54341']
2026-02-04 11:53:04.613 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:53:04.613 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:53:04.613 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:53:04.613 DEBUG [src.node.docker_mananger] docker run -i -t -p 54337:54337 -p 54338:54338 -p 54339:54339 -p 54340:54340 -p 54341:54341 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54339 --rest-port=54337 --tcp-port=54338 --discv5-udp-port=54340 --rest-address=0.0.0.0 --nat=extip:172.18.127.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcd9b4a9c6b4aaa8cfb1cc11c51a08efd3cefb50aea8e705bedccdf6b9faaf0a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54341 --metrics-logging=true --lightpush=true --relay=true
2026-02-04 11:53:04.800 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.127.228 waku 38c746d7491f92ab041bc10f74bbf894e849efaa6a6069c54818881260d3bcd3
2026-02-04 11:53:04.831 DEBUG [src.node.docker_mananger] Container started with ID 38c746d7491f. Setting up logs at ./log/docker/node1_2026-02-04_11-53-04__176ee4cd-6077-45ed-8c21-de48c07e4823__wakuorg_nwaku:latest.log
2026-02-04 11:53:04.831 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54337
2026-02-04 11:53:04.832 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:53:04.853 ERROR [src.node.docker_mananger] Max retries reached for container ef55a91dc9ed. Exiting log stream.
2026-02-04 11:53:05.409 ERROR [src.node.docker_mananger] Max retries reached for container 2e885b70c311. Exiting log stream.
2026-02-04 11:53:05.833 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54337/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:53:05.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:53:05.837 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:53:05.837 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54337/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:53:05.839 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.228/tcp/54338/p2p/16Uiu2HAmLD8AYjWohFoYdKvL5TW45HbezMj8H1ACpXnSspug16xy","/ip4/172.18.127.228/tcp/54339/ws/p2p/16Uiu2HAmLD8AYjWohFoYdKvL5TW45HbezMj8H1ACpXnSspug16xy"],"enrUri":"enr:-L24QN19l3ptWV-C6OEeQ0AlEs_P3QoG9pxwaKPaHk0YHpdpPy6SVhne3VKg1n4SJ_5hCDCxDgwsXTU65clyBULXdtMCgmlkgnY0gmlwhKwSf-SKbXVsdGlhZGRyc5YACASsEn_kBtRCAAoErBJ_5AbUQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDcD07B_98x8IRVSqb1hziDuc-GM8Zqp1BK4KKwXpn7hKDdGNwgtRCg3VkcILURIV3YWt1Mgk"}'
2026-02-04 11:53:05.839 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:53:05.846 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:53:05.846 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_11-53-04__176ee4cd-6077-45ed-8c21-de48c07e4823__wakuorg_nwaku:latest.log
2026-02-04 11:53:05.846 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:53:05.846 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:53:05.847 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:53:05.847 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.31.132
2026-02-04 11:53:05.848 DEBUG [src.node.docker_mananger] Generated ports ['53247', '53248', '53249', '53250', '53251']
2026-02-04 11:53:05.848 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:53:05.848 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:53:05.848 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:53:05.848 DEBUG [src.node.docker_mananger] docker run -i -t -p 53247:53247 -p 53248:53248 -p 53249:53249 -p 53250:53250 -p 53251:53251 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53249 --rest-port=53247 --tcp-port=53248 --discv5-udp-port=53250 --rest-address=0.0.0.0 --nat=extip:172.18.31.132 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2bf3d9b19cee71f89ccf0438cdac7bbfdf535d7e17caac284c224cd8444490ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53251 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QN19l3ptWV-C6OEeQ0AlEs_P3QoG9pxwaKPaHk0YHpdpPy6SVhne3VKg1n4SJ_5hCDCxDgwsXTU65clyBULXdtMCgmlkgnY0gmlwhKwSf-SKbXVsdGlhZGRyc5YACASsEn_kBtRCAAoErBJ_5AbUQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDcD07B_98x8IRVSqb1hziDuc-GM8Zqp1BK4KKwXpn7hKDdGNwgtRCg3VkcILURIV3YWt1Mgk
2026-02-04 11:53:06.044 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.31.132 waku 8dfbd1ef331ada44730e42979b26a313fc810e04b4b5c0b330137d7ccdd72563
2026-02-04 11:53:06.074 DEBUG [src.node.docker_mananger] Container started with ID 8dfbd1ef331a. Setting up logs at ./log/docker/node1_2026-02-04_11-53-04__176ee4cd-6077-45ed-8c21-de48c07e4823__wakuorg_nwaku:latest.log
2026-02-04 11:53:06.074 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53247
2026-02-04 11:53:06.075 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:53:07.076 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53247/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:53:07.087 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:53:07.088 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:53:07.088 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53247/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:53:07.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.132/tcp/53248/p2p/16Uiu2HAmBmpcuoS94KsMbhgfhThCZ8D6oJqofAfuGxF3csvhqyoK","/ip4/172.18.31.132/tcp/53249/ws/p2p/16Uiu2HAmBmpcuoS94KsMbhgfhThCZ8D6oJqofAfuGxF3csvhqyoK"],"enrUri":"enr:-L24QOUI3eZ62RBelOOqj79J0_oHp1uyv0iRNUeicAi1YPhHPJqb29D4PQ8pt51VQomYYgOp2fSTo7jyfl13w4kOcOUCgmlkgnY0gmlwhKwSH4SKbXVsdGlhZGRyc5YACASsEh-EBtAAAAoErBIfhAbQAd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8uRgUQnkIpJCyRqWdgf84i4hgUw0sHpwcZ5OWLr7gH6DdGNwgtAAg3VkcILQAoV3YWt1MgE"}'
2026-02-04 11:53:07.092 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:53:07.101 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:53:07.101 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_11-53-04__176ee4cd-6077-45ed-8c21-de48c07e4823__wakuorg_nwaku:latest.log
2026-02-04 11:53:07.102 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:53:07.102 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:53:07.103 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:53:07.103 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.60.154
2026-02-04 11:53:07.103 DEBUG [src.node.docker_mananger] Generated ports ['36014', '36015', '36016', '36017', '36018']
2026-02-04 11:53:07.103 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:53:07.103 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:53:07.104 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:53:07.104 DEBUG [src.node.docker_mananger] docker run -i -t -p 36014:36014 -p 36015:36015 -p 36016:36016 -p 36017:36017 -p 36018:36018 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36016 --rest-port=36014 --tcp-port=36015 --discv5-udp-port=36017 --rest-address=0.0.0.0 --nat=extip:172.18.60.154 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=523eef13eabdca13bace62d63dfaffa5d6ce3977ad715777fba64eb6e77a50a4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36018 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-L24QN19l3ptWV-C6OEeQ0AlEs_P3QoG9pxwaKPaHk0YHpdpPy6SVhne3VKg1n4SJ_5hCDCxDgwsXTU65clyBULXdtMCgmlkgnY0gmlwhKwSf-SKbXVsdGlhZGRyc5YACASsEn_kBtRCAAoErBJ_5AbUQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDcD07B_98x8IRVSqb1hziDuc-GM8Zqp1BK4KKwXpn7hKDdGNwgtRCg3VkcILURIV3YWt1Mgk --lightpushnode=/ip4/172.18.127.228/tcp/54338/p2p/16Uiu2HAmLD8AYjWohFoYdKvL5TW45HbezMj8H1ACpXnSspug16xy
2026-02-04 11:53:07.288 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.60.154 waku 9deff2b3d5dedd4fdc78658325baa78cc1c06b4e49bd3e1213acd90ae0cdea95
2026-02-04 11:53:07.319 DEBUG [src.node.docker_mananger] Container started with ID 9deff2b3d5de. Setting up logs at ./log/docker/node1_2026-02-04_11-53-04__176ee4cd-6077-45ed-8c21-de48c07e4823__wakuorg_nwaku:latest.log
2026-02-04 11:53:07.319 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36014
2026-02-04 11:53:07.320 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:53:08.320 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36014/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:53:08.324 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:53:08.325 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:53:08.325 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36014/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:53:08.327 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.154/tcp/36015/p2p/16Uiu2HAm4dA78cp9TPspqHqgZcGd1Yfqugocnz9M4Ax4utCVNDS1","/ip4/172.18.60.154/tcp/36016/ws/p2p/16Uiu2HAm4dA78cp9TPspqHqgZcGd1Yfqugocnz9M4Ax4utCVNDS1"],"enrUri":"enr:-L24QJf9VlcZWzJxlr6juLQ83vQavq_smPjT_EI5wnY1FzZKSl47TSazRTrAdP0nQe0N-4w-R4N97o04m9YuCoLt59oCgmlkgnY0gmlwhKwSPJqKbXVsdGlhZGRyc5YACASsEjyaBoyvAAoErBI8mgaMsN0DgnJzhQADAQAAiXNlY3AyNTZrMaECiKpfvraurMcE8Ck4-TSCRhG869RIG5CH9GlwCBir-gKDdGNwgoyvg3VkcIKMsYV3YWt1Mgk"}'
2026-02-04 11:53:08.327 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:53:08.328 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54337/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 11:53:08.331 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:53:08.331 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53247/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 11:53:08.336 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:53:08.338 DEBUG [src.steps.light_push] Lightpushing message
2026-02-04 11:53:08.339 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36014/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1770205988338735419}}'
2026-02-04 11:53:08.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:53:08.374 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 11:53:08.475 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2026-02-04 11:53:08.475 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:53:08.477 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770205988338735419,"ephemeral":false,"proof":""}]'
2026-02-04 11:53:08.479 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2026-02-04 11:53:08.479 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53247/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:53:08.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770205988338735419,"ephemeral":false,"proof":""}]'
2026-02-04 11:53:08.484 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 11:53:08.485 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 11:53:08.485 DEBUG [src.node.waku_node] Stopping container with id 38c746d7491f
2026-02-04 11:53:09.077 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:53:09.078 DEBUG [src.node.waku_node] Stopping container with id 8dfbd1ef331a
2026-02-04 11:53:09.612 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:53:09.612 DEBUG [src.node.waku_node] Stopping container with id 9deff2b3d5de
2026-02-04 11:53:09.900 ERROR [src.node.docker_mananger] Max retries reached for container 38c746d7491f. Exiting log stream.
2026-02-04 11:53:10.118 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:53:10.119 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 11:53:10.128 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 11:53:10.136 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 11:53:10.144 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
