2026-02-04 11:55:51.975 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 11:55:51.975 DEBUG [tests.conftest] Running test: test_store_without_pubsub_topic_and_content_topic with id: 2026-02-04_11-55-51__c6297cc1-8d9d-43c5-bc5d-cd89ddbcc451
2026-02-04 11:55:51.976 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 11:55:51.976 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-04 11:55:51.976 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-04 11:55:51.983 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:51.983 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-04_11-55-51__c6297cc1-8d9d-43c5-bc5d-cd89ddbcc451__wakuorg_nwaku:latest.log
2026-02-04 11:55:51.983 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:51.983 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:51.985 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:51.985 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.158
2026-02-04 11:55:51.985 DEBUG [src.node.docker_mananger] Generated ports ['54143', '54144', '54145', '54146', '54147']
2026-02-04 11:55:51.985 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:51.985 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:51.985 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:51.986 DEBUG [src.node.docker_mananger] docker run -i -t -p 54143:54143 -p 54144:54144 -p 54145:54145 -p 54146:54146 -p 54147:54147 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54145 --rest-port=54143 --tcp-port=54144 --discv5-udp-port=54146 --rest-address=0.0.0.0 --nat=extip:172.18.109.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ade3feb28f66ba0cd00ce9f0e95e6539dfc1b11bd6fdfa98d4ef10dff5dcfa8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54147 --metrics-logging=true --store=true --relay=true
2026-02-04 11:55:52.174 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.158 waku 09e393fd8921d36149b0e8510c76c556c529a48dcc164ace7df68e10c88ce670
2026-02-04 11:55:52.208 DEBUG [src.node.docker_mananger] Container started with ID 09e393fd8921. Setting up logs at ./log/docker/publishing_node1_2026-02-04_11-55-51__c6297cc1-8d9d-43c5-bc5d-cd89ddbcc451__wakuorg_nwaku:latest.log
2026-02-04 11:55:52.209 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54143
2026-02-04 11:55:52.210 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:52.236 ERROR [src.node.docker_mananger] Max retries reached for container c544602c4a9b. Exiting log stream.
2026-02-04 11:55:52.763 ERROR [src.node.docker_mananger] Max retries reached for container c4775a9a3a1e. Exiting log stream.
2026-02-04 11:55:53.210 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54143/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:53.213 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:55:53.214 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:53.214 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54143/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:53.216 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.158/tcp/54144/p2p/16Uiu2HAmThTFbhS93h5nNmCdQ2ttMcCBhD5tNjxLSvB8TmzAZ9iK","/ip4/172.18.109.158/tcp/54145/ws/p2p/16Uiu2HAmThTFbhS93h5nNmCdQ2ttMcCBhD5tNjxLSvB8TmzAZ9iK"],"enrUri":"enr:-L24QN4WQiFdiR57N_blf6Koh0rxAaAiFE3bNJrcBd2uEgkDH1nfDs84legUkUL8ufCO2Bbc0H8JD-jvhsPwl-c35sYCgmlkgnY0gmlwhKwSbZ6KbXVsdGlhZGRyc5YACASsEm2eBtOAAAoErBJtngbTgd0DgnJzhQADAQAAiXNlY3AyNTZrMaED34DiMY0wNBWi5pY9gAeCLHPWvXZJxpUqfsgFUCMVOKyDdGNwgtOAg3VkcILTgoV3YWt1MgM"}'
2026-02-04 11:55:53.216 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:53.223 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:53.223 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-04_11-55-51__c6297cc1-8d9d-43c5-bc5d-cd89ddbcc451__wakuorg_nwaku:latest.log
2026-02-04 11:55:53.224 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:53.224 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:53.225 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:53.225 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.81.242
2026-02-04 11:55:53.226 DEBUG [src.node.docker_mananger] Generated ports ['54132', '54133', '54134', '54135', '54136']
2026-02-04 11:55:53.226 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:53.226 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:53.226 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:53.226 DEBUG [src.node.docker_mananger] docker run -i -t -p 54132:54132 -p 54133:54133 -p 54134:54134 -p 54135:54135 -p 54136:54136 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54134 --rest-port=54132 --tcp-port=54133 --discv5-udp-port=54135 --rest-address=0.0.0.0 --nat=extip:172.18.81.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=37ca8d8fd380cba75fe5a0c0f1cc1be13266dbbeb74a50dc6bd37e6f4bb5f19e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54136 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QN4WQiFdiR57N_blf6Koh0rxAaAiFE3bNJrcBd2uEgkDH1nfDs84legUkUL8ufCO2Bbc0H8JD-jvhsPwl-c35sYCgmlkgnY0gmlwhKwSbZ6KbXVsdGlhZGRyc5YACASsEm2eBtOAAAoErBJtngbTgd0DgnJzhQADAQAAiXNlY3AyNTZrMaED34DiMY0wNBWi5pY9gAeCLHPWvXZJxpUqfsgFUCMVOKyDdGNwgtOAg3VkcILTgoV3YWt1MgM --storenode=/ip4/172.18.109.158/tcp/54144/p2p/16Uiu2HAmThTFbhS93h5nNmCdQ2ttMcCBhD5tNjxLSvB8TmzAZ9iK --store=true --relay=true
2026-02-04 11:55:53.415 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.81.242 waku ba204793dcbf361b018146c401e7a4917e05d7bfcc6e07a5d49f762f37a3fb7a
2026-02-04 11:55:53.447 DEBUG [src.node.docker_mananger] Container started with ID ba204793dcbf. Setting up logs at ./log/docker/store_node1_2026-02-04_11-55-51__c6297cc1-8d9d-43c5-bc5d-cd89ddbcc451__wakuorg_nwaku:latest.log
2026-02-04 11:55:53.447 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54132
2026-02-04 11:55:53.447 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:54.448 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54132/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:54.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:55:54.452 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:54.452 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54132/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:54.455 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.242/tcp/54133/p2p/16Uiu2HAmURL7Jix44pyP4gr41GZUduyYcE27WNVaH1HCqH9XVSo9","/ip4/172.18.81.242/tcp/54134/ws/p2p/16Uiu2HAmURL7Jix44pyP4gr41GZUduyYcE27WNVaH1HCqH9XVSo9"],"enrUri":"enr:-L24QGJDso7hXrvwUb87ch-toVCJ3V0S94RaGS_97oZasKxmXzMpfBS9Fw1mzMESNAbEuGqX3s-w_J0pCdaK9dKg9p0CgmlkgnY0gmlwhKwSUfKKbXVsdGlhZGRyc5YACASsElHyBtN1AAoErBJR8gbTdt0DgnJzhQADAQAAiXNlY3AyNTZrMaED6jszciAJJRbNZFx9H_PmjmnhtmwaxK_dFRX6pP5mWziDdGNwgtN1g3VkcILTd4V3YWt1MgM"}'
2026-02-04 11:55:54.455 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:54.455 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54132/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.158/tcp/54144/p2p/16Uiu2HAmThTFbhS93h5nNmCdQ2ttMcCBhD5tNjxLSvB8TmzAZ9iK"]'
2026-02-04 11:55:54.458 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:54.459 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54143/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 11:55:54.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:54.461 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54132/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 11:55:54.463 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:54.464 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:54.464 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54143/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:54.469 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:54.469 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:54.670 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:54.671 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54143/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:54.676 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:54.677 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:54.878 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:54.878 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54143/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:54.884 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:54.885 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:55.086 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:55.086 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54143/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:55.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:55.093 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:55.294 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:55.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54143/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:55.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:55.300 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:55.501 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:55.501 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54143/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:55.506 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:55.507 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:55.708 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:55.708 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54143/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:55.714 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:55.714 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:55.915 DEBUG [src.steps.store] Relaying message
2026-02-04 11:55:55.915 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54143/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:55.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:55.921 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 11:55:56.123 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54143/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:56.126 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x3eebfb48e5f54173ec9d8204daac287482f859b558340e114a0aa2753dd74291"},{"messageHash":"0xc7620b43dffab13e0c8b639f54fe974e9c61eb02d4f140ddaed7e6a675e0833f"},{"messageHash":"0xb9f03ac518d27df41d4df87523fc6ee2ef72c1154bcf590a45387a75799bca93"},{"messageHash":"0x23fde01796e965c2fbb2203341d52d2203f6ecf46073855f6bd3dd73b38caca5"},{"messageHash":"0x98cef08a7ce941464fb812aed88e7fc03eddbaea105c6c809b6d6839d5d21756"},{"messageHash":"0xf17b18e14d5606f75c1c99b8ad5143f057a2c10fe521b70eb17082e71aaa7e4d"},{"messageHash":"0x3cde855f64a022ec2bc66e1b7a4ba016830bba28e0212a8e5988cce9d139e792"},{"messageHash":"0xd24efdfcbc7993ce592a624c5ed2062209693551332f601b8bc9600c15a4c27b"}]}'
2026-02-04 11:55:56.126 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54132/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:56.129 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x3eebfb48e5f54173ec9d8204daac287482f859b558340e114a0aa2753dd74291"},{"messageHash":"0xc7620b43dffab13e0c8b639f54fe974e9c61eb02d4f140ddaed7e6a675e0833f"},{"messageHash":"0xb9f03ac518d27df41d4df87523fc6ee2ef72c1154bcf590a45387a75799bca93"},{"messageHash":"0x23fde01796e965c2fbb2203341d52d2203f6ecf46073855f6bd3dd73b38caca5"},{"messageHash":"0x98cef08a7ce941464fb812aed88e7fc03eddbaea105c6c809b6d6839d5d21756"},{"messageHash":"0xf17b18e14d5606f75c1c99b8ad5143f057a2c10fe521b70eb17082e71aaa7e4d"},{"messageHash":"0x3cde855f64a022ec2bc66e1b7a4ba016830bba28e0212a8e5988cce9d139e792"},{"messageHash":"0xd24efdfcbc7993ce592a624c5ed2062209693551332f601b8bc9600c15a4c27b"}]}'
2026-02-04 11:55:56.131 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 11:55:56.133 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 11:55:56.133 DEBUG [src.node.waku_node] Stopping container with id 09e393fd8921
2026-02-04 11:55:56.680 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:56.681 DEBUG [src.node.waku_node] Stopping container with id ba204793dcbf
2026-02-04 11:55:57.242 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:57.243 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 11:55:57.252 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 11:55:57.259 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
