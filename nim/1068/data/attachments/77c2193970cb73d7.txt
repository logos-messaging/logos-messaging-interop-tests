2026-02-04 11:55:05.331 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 11:55:05.331 DEBUG [tests.conftest] Running test: test_2_nodes_different_content_topic_same_shard with id: 2026-02-04_11-55-05__4f5bf16d-a286-434c-9d07-badca8d684ed
2026-02-04 11:55:05.332 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 11:55:05.332 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 11:55:05.332 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-04 11:55:05.339 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:05.339 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_11-55-05__4f5bf16d-a286-434c-9d07-badca8d684ed__wakuorg_nwaku:latest.log
2026-02-04 11:55:05.340 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:05.340 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:05.341 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:05.341 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.193.56
2026-02-04 11:55:05.341 DEBUG [src.node.docker_mananger] Generated ports ['56616', '56617', '56618', '56619', '56620']
2026-02-04 11:55:05.341 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:05.341 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:05.342 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:05.342 DEBUG [src.node.docker_mananger] docker run -i -t -p 56616:56616 -p 56617:56617 -p 56618:56618 -p 56619:56619 -p 56620:56620 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56618 --rest-port=56616 --tcp-port=56617 --discv5-udp-port=56619 --rest-address=0.0.0.0 --nat=extip:172.18.193.56 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e9fd6def0deba575faffcaf16ae84fdd0baef2d99daa0ba26ec9c60c06ac5415 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56620 --metrics-logging=true --relay=true --filter=true --content-topic=/newsService/1.0/weekly/protobuf
2026-02-04 11:55:05.523 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.193.56 waku 4b7edb7e12f35d5bc3d90372942529176faea3f7fe49fec674cb96f7e69c0f9c
2026-02-04 11:55:05.554 ERROR [src.node.docker_mananger] Max retries reached for container 4c163bf45152. Exiting log stream.
2026-02-04 11:55:05.555 DEBUG [src.node.docker_mananger] Container started with ID 4b7edb7e12f3. Setting up logs at ./log/docker/node1_2026-02-04_11-55-05__4f5bf16d-a286-434c-9d07-badca8d684ed__wakuorg_nwaku:latest.log
2026-02-04 11:55:05.555 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56616
2026-02-04 11:55:05.555 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:06.138 ERROR [src.node.docker_mananger] Max retries reached for container 68e52f216069. Exiting log stream.
2026-02-04 11:55:06.556 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56616/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:06.559 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:55:06.559 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:06.559 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56616/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:06.561 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.56/tcp/56617/p2p/16Uiu2HAm4ciAfmbK3BP9PTXWGUZmCRrQf2qa9Up4RjdtMK2Aotc5","/ip4/172.18.193.56/tcp/56618/ws/p2p/16Uiu2HAm4ciAfmbK3BP9PTXWGUZmCRrQf2qa9Up4RjdtMK2Aotc5"],"enrUri":"enr:-L24QFBKyEeX6DpsMQifZ0d32rfRdQpfJkVyi0y1UXNCt0M3dWXQjEDilq932ufVjgubpZCeyFcbOVMQgPF-hLkYEy4CgmlkgnY0gmlwhKwSwTiKbXVsdGlhZGRyc5YACASsEsE4Bt0pAAoErBLBOAbdKt0DgnJzhQACAQAAiXNlY3AyNTZrMaECiI0Lby-R079N26r_qJlsghgYOQt30nPs-wR-YAoUGf6DdGNwgt0pg3VkcILdK4V3YWt1MgU"}'
2026-02-04 11:55:06.562 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:06.568 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:06.569 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_11-55-05__4f5bf16d-a286-434c-9d07-badca8d684ed__wakuorg_nwaku:latest.log
2026-02-04 11:55:06.569 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:06.569 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:06.570 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:06.570 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.41.238
2026-02-04 11:55:06.570 DEBUG [src.node.docker_mananger] Generated ports ['31433', '31434', '31435', '31436', '31437']
2026-02-04 11:55:06.570 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:06.570 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:06.571 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:06.571 DEBUG [src.node.docker_mananger] docker run -i -t -p 31433:31433 -p 31434:31434 -p 31435:31435 -p 31436:31436 -p 31437:31437 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31435 --rest-port=31433 --tcp-port=31434 --discv5-udp-port=31436 --rest-address=0.0.0.0 --nat=extip:172.18.41.238 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=128a56756b6d25dc56ace4be56f914b6f5e02cd9b8861035fed6d104e6c36e5c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31437 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QFBKyEeX6DpsMQifZ0d32rfRdQpfJkVyi0y1UXNCt0M3dWXQjEDilq932ufVjgubpZCeyFcbOVMQgPF-hLkYEy4CgmlkgnY0gmlwhKwSwTiKbXVsdGlhZGRyc5YACASsEsE4Bt0pAAoErBLBOAbdKt0DgnJzhQACAQAAiXNlY3AyNTZrMaECiI0Lby-R079N26r_qJlsghgYOQt30nPs-wR-YAoUGf6DdGNwgt0pg3VkcILdK4V3YWt1MgU --content-topic=/newsService/1.0/alerts/xml
2026-02-04 11:55:06.758 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.41.238 waku e38ca6883e552d8554eb3ab44a76825f4733c40daad86464ff6939f90706416a
2026-02-04 11:55:06.788 DEBUG [src.node.docker_mananger] Container started with ID e38ca6883e55. Setting up logs at ./log/docker/node2_2026-02-04_11-55-05__4f5bf16d-a286-434c-9d07-badca8d684ed__wakuorg_nwaku:latest.log
2026-02-04 11:55:06.789 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31433
2026-02-04 11:55:06.790 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:07.790 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31433/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:07.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 11:55:07.798 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:07.800 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31433/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:07.803 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.238/tcp/31434/p2p/16Uiu2HAmKncxX5doGfhEUVXfB188TpuLj18wcG4wDdwyiN6r3Dj2","/ip4/172.18.41.238/tcp/31435/ws/p2p/16Uiu2HAmKncxX5doGfhEUVXfB188TpuLj18wcG4wDdwyiN6r3Dj2"],"enrUri":"enr:-L24QOeQ3_7roap6mqG10G4PXutHIq86WIHdUTRps6SSFBKFZL5u_JeDeDeSxtzrXsIGP1cZ4R0JIa4-2-OvOy2e3iYCgmlkgnY0gmlwhKwSKe6KbXVsdGlhZGRyc5YACASsEinuBnrKAAoErBIp7gZ6y90DgnJzhQACAQAAiXNlY3AyNTZrMaEDafZEKoq82ZSDvCdgY9359Q7XV-frUgIPtFwE9bZlnXWDdGNwgnrKg3VkcIJ6zIV3YWt1MgE"}'
2026-02-04 11:55:07.804 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:07.804 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31433/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.193.56/tcp/56617/p2p/16Uiu2HAm4ciAfmbK3BP9PTXWGUZmCRrQf2qa9Up4RjdtMK2Aotc5"]'
2026-02-04 11:55:07.808 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:07.808 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56616/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf"]'
2026-02-04 11:55:07.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:07.811 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31433/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/alerts/xml"]'
2026-02-04 11:55:07.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:07.813 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56616/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:07.818 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:07.818 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 11:55:07.918 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-04 11:55:07.919 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56616/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:07.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1770206107813698010,"ephemeral":false,"proof":""}]'
2026-02-04 11:55:07.923 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 11:55:07.923 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31433/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:07.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1770206107813698010,"ephemeral":false,"proof":""}]'
2026-02-04 11:55:07.928 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 11:55:07.929 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 11:55:07.929 DEBUG [src.node.waku_node] Stopping container with id 4b7edb7e12f3
2026-02-04 11:55:08.491 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:08.491 DEBUG [src.node.waku_node] Stopping container with id e38ca6883e55
2026-02-04 11:55:09.059 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:09.061 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 11:55:09.072 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 11:55:09.078 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
