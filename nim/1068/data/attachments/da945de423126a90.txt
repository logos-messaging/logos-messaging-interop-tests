2026-02-04 12:01:07.479 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 12:01:07.480 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2026-02-04_12-01-07__ccfc8182-ffc4-40b9-8be0-4ea0d64f8892
2026-02-04 12:01:07.481 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 12:01:07.481 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-04 12:01:07.488 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 12:01:07.488 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-04_12-01-07__ccfc8182-ffc4-40b9-8be0-4ea0d64f8892__wakuorg_nwaku:latest.log
2026-02-04 12:01:07.488 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 12:01:07.488 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 12:01:07.490 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 12:01:07.490 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.15.71
2026-02-04 12:01:07.490 DEBUG [src.node.docker_mananger] Generated ports ['61824', '61825', '61826', '61827', '61828']
2026-02-04 12:01:07.490 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 12:01:07.490 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 12:01:07.491 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 12:01:07.491 DEBUG [src.node.docker_mananger] docker run -i -t -p 61824:61824 -p 61825:61825 -p 61826:61826 -p 61827:61827 -p 61828:61828 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61826 --rest-port=61824 --tcp-port=61825 --discv5-udp-port=61827 --rest-address=0.0.0.0 --nat=extip:172.18.15.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a4243ccb02cda857db11ca5552a3edafeb53aff99d41bbcf88e4bc5d485afdd6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61828 --metrics-logging=true --lightpush=true --relay=true
2026-02-04 12:01:07.683 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.15.71 waku c8b540e544f3db8cd6b7553a73234d501928acf661809914fadbaf3ebd7cda5d
2026-02-04 12:01:07.685 ERROR [src.node.docker_mananger] Max retries reached for container 23ac708f9091. Exiting log stream.
2026-02-04 12:01:07.713 DEBUG [src.node.docker_mananger] Container started with ID c8b540e544f3. Setting up logs at ./log/docker/receiving_node1_2026-02-04_12-01-07__ccfc8182-ffc4-40b9-8be0-4ea0d64f8892__wakuorg_nwaku:latest.log
2026-02-04 12:01:07.715 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61824
2026-02-04 12:01:07.715 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 12:01:08.219 ERROR [src.node.docker_mananger] Max retries reached for container 902fbfbdd26d. Exiting log stream.
2026-02-04 12:01:08.715 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61824/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 12:01:08.718 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 12:01:08.719 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 12:01:08.719 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61824/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 12:01:08.721 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.71/tcp/61825/p2p/16Uiu2HAmRqHLzJBic7KjHRNPwYcBsjSR3sdMJid6YGeM1PzK7Nmu","/ip4/172.18.15.71/tcp/61826/ws/p2p/16Uiu2HAmRqHLzJBic7KjHRNPwYcBsjSR3sdMJid6YGeM1PzK7Nmu"],"enrUri":"enr:-L24QMnkQB26XBmlA9cRxBH3U_4tVB4fYRGKyHWHhA1p5EIbOG_ujds-944kOj8t1a_nmFj_GhIrO6rQKyjfz8aCk2ACgmlkgnY0gmlwhKwSD0eKbXVsdGlhZGRyc5YACASsEg9HBvGBAAoErBIPRwbxgt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDw8r0R_OiH8Tk6ks0v6LKSOMbIuf2_Vrxu7IP8brMmlCDdGNwgvGBg3VkcILxg4V3YWt1Mgk"}'
2026-02-04 12:01:08.721 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 12:01:08.728 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 12:01:08.728 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-04_12-01-07__ccfc8182-ffc4-40b9-8be0-4ea0d64f8892__wakuorg_nwaku:latest.log
2026-02-04 12:01:08.729 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 12:01:08.729 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 12:01:08.730 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 12:01:08.730 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.90.111
2026-02-04 12:01:08.730 DEBUG [src.node.docker_mananger] Generated ports ['45245', '45246', '45247', '45248', '45249']
2026-02-04 12:01:08.730 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 12:01:08.730 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 12:01:08.731 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 12:01:08.731 DEBUG [src.node.docker_mananger] docker run -i -t -p 45245:45245 -p 45246:45246 -p 45247:45247 -p 45248:45248 -p 45249:45249 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45247 --rest-port=45245 --tcp-port=45246 --discv5-udp-port=45248 --rest-address=0.0.0.0 --nat=extip:172.18.90.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e4ff6eeebd2b64a56baaf89edd22bc7d0bf2b13d934a5ca4edb6f0bb7a7dbc6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45249 --metrics-logging=true --lightpush=false --relay=true
2026-02-04 12:01:08.925 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.90.111 waku ea95c8ec9564fbded65bfa75f02dd009322bb97cf280992731b6dd2d80eaa81c
2026-02-04 12:01:08.956 DEBUG [src.node.docker_mananger] Container started with ID ea95c8ec9564. Setting up logs at ./log/docker/receiving_node2_2026-02-04_12-01-07__ccfc8182-ffc4-40b9-8be0-4ea0d64f8892__wakuorg_nwaku:latest.log
2026-02-04 12:01:08.957 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45245
2026-02-04 12:01:08.957 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 12:01:09.957 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45245/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 12:01:09.961 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 12:01:09.961 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 12:01:09.961 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45245/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 12:01:09.963 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.90.111/tcp/45246/p2p/16Uiu2HAm5czVsNpS6JaeaCq3f5xR2odjtrGJxocmvR1vXe7HWVGh","/ip4/172.18.90.111/tcp/45247/ws/p2p/16Uiu2HAm5czVsNpS6JaeaCq3f5xR2odjtrGJxocmvR1vXe7HWVGh"],"enrUri":"enr:-L24QAJ1cxG2RKY2jj6XNqhf9dsLoV3KU1r8v-stDDZrNs51TzkyJ0tkHiKA2yt-0CBnJfG_Ba8n3v-ZpTQkUpc2NtwCgmlkgnY0gmlwhKwSWm-KbXVsdGlhZGRyc5YACASsElpvBrC-AAoErBJabwawv90DgnJzhQADAQAAiXNlY3AyNTZrMaECl3syeKoUgNzmWzhtofmA3mQBBAHU9IUUOnixMJW6_AaDdGNwgrC-g3VkcIKwwIV3YWt1MgE"}'
2026-02-04 12:01:09.964 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 12:01:09.964 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45245/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.71/tcp/61825/p2p/16Uiu2HAmRqHLzJBic7KjHRNPwYcBsjSR3sdMJid6YGeM1PzK7Nmu"]'
2026-02-04 12:01:09.993 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:01:10.004 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 12:01:10.004 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-04_12-01-07__ccfc8182-ffc4-40b9-8be0-4ea0d64f8892__wakuorg_nwaku:latest.log
2026-02-04 12:01:10.004 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 12:01:10.004 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 12:01:10.006 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 12:01:10.007 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.23.248
2026-02-04 12:01:10.007 DEBUG [src.node.docker_mananger] Generated ports ['35820', '35821', '35822', '35823', '35824']
2026-02-04 12:01:10.007 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 12:01:10.007 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 12:01:10.007 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 12:01:10.008 DEBUG [src.node.docker_mananger] docker run -i -t -p 35820:35820 -p 35821:35821 -p 35822:35822 -p 35823:35823 -p 35824:35824 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35822 --rest-port=35820 --tcp-port=35821 --discv5-udp-port=35823 --rest-address=0.0.0.0 --nat=extip:172.18.23.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9c2b97c709fd6f9c5ad6ec0b4afdc89ed89daadeebfd2fdc71adbdcbf0f731a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35824 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMnkQB26XBmlA9cRxBH3U_4tVB4fYRGKyHWHhA1p5EIbOG_ujds-944kOj8t1a_nmFj_GhIrO6rQKyjfz8aCk2ACgmlkgnY0gmlwhKwSD0eKbXVsdGlhZGRyc5YACASsEg9HBvGBAAoErBIPRwbxgt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDw8r0R_OiH8Tk6ks0v6LKSOMbIuf2_Vrxu7IP8brMmlCDdGNwgvGBg3VkcILxg4V3YWt1Mgk --lightpushnode=/ip4/172.18.15.71/tcp/61825/p2p/16Uiu2HAmRqHLzJBic7KjHRNPwYcBsjSR3sdMJid6YGeM1PzK7Nmu --lightpush=true --relay=true
2026-02-04 12:01:10.197 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.23.248 waku a01642432ff9cbe7d215e9ba0d58e09633f92c125bdc53390cf175798280ff38
2026-02-04 12:01:10.230 DEBUG [src.node.docker_mananger] Container started with ID a01642432ff9. Setting up logs at ./log/docker/lightpush_node1_2026-02-04_12-01-07__ccfc8182-ffc4-40b9-8be0-4ea0d64f8892__wakuorg_nwaku:latest.log
2026-02-04 12:01:10.230 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35820
2026-02-04 12:01:10.230 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 12:01:11.233 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35820/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 12:01:11.252 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 12:01:11.253 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 12:01:11.255 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35820/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 12:01:11.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.248/tcp/35821/p2p/16Uiu2HAmU9YaVb13pKVbSXYyP9UhdZyExjZ1twUZESargzBmKNQo","/ip4/172.18.23.248/tcp/35822/ws/p2p/16Uiu2HAmU9YaVb13pKVbSXYyP9UhdZyExjZ1twUZESargzBmKNQo"],"enrUri":"enr:-L24QNZeBrtezbizRQhWVCzRYUmkQnJWilk1dAnb_4xjfxIqR0X9MqMOB6NmH5YwhfGgab1FpohEy50Nydj9YZM2Jy4CgmlkgnY0gmlwhKwSF_iKbXVsdGlhZGRyc5YACASsEhf4BovtAAoErBIX-AaL7t0DgnJzhQADAQAAiXNlY3AyNTZrMaED5jABqB2B-C1Jyi1Ctkk9VOg2MVjCFusiF-w3RC8se-iDdGNwgovtg3VkcIKL74V3YWt1Mgk"}'
2026-02-04 12:01:11.260 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 12:01:11.260 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35820/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.71/tcp/61825/p2p/16Uiu2HAmRqHLzJBic7KjHRNPwYcBsjSR3sdMJid6YGeM1PzK7Nmu"]'
2026-02-04 12:01:11.263 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:01:11.263 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35820/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.90.111/tcp/45246/p2p/16Uiu2HAm5czVsNpS6JaeaCq3f5xR2odjtrGJxocmvR1vXe7HWVGh"]'
2026-02-04 12:01:11.283 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:01:11.286 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61824/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 12:01:11.295 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:01:11.295 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45245/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 12:01:11.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:01:11.298 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35820/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 12:01:11.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 12:01:11.304 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35820/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1770206471304004608}}'
2026-02-04 12:01:11.306 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35820/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-04 12:01:11.308 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 12:01:11.309 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 12:01:11.309 DEBUG [src.node.waku_node] Stopping container with id c8b540e544f3
2026-02-04 12:01:11.880 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 12:01:11.880 DEBUG [src.node.waku_node] Stopping container with id ea95c8ec9564
2026-02-04 12:01:12.428 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 12:01:12.428 DEBUG [src.node.waku_node] Stopping container with id a01642432ff9
2026-02-04 12:01:12.733 ERROR [src.node.docker_mananger] Max retries reached for container c8b540e544f3. Exiting log stream.
2026-02-04 12:01:12.973 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 12:01:12.974 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 12:01:12.990 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 12:01:12.997 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 12:01:13.005 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
