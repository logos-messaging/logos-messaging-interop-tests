2026-02-04 11:55:31.966 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 11:55:31.966 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_single_content_topic with id: 2026-02-04_11-55-31__417ebd60-4a64-428c-a7a3-3fb4b907642c
2026-02-04 11:55:31.967 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 11:55:31.967 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-04 11:55:31.967 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-04 11:55:31.973 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:31.973 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_11-55-31__417ebd60-4a64-428c-a7a3-3fb4b907642c__wakuorg_nwaku:latest.log
2026-02-04 11:55:31.974 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:31.974 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:31.975 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:31.975 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.4.42
2026-02-04 11:55:31.975 DEBUG [src.node.docker_mananger] Generated ports ['62390', '62391', '62392', '62393', '62394']
2026-02-04 11:55:31.975 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:31.975 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:31.976 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:31.976 DEBUG [src.node.docker_mananger] docker run -i -t -p 62390:62390 -p 62391:62391 -p 62392:62392 -p 62393:62393 -p 62394:62394 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62392 --rest-port=62390 --tcp-port=62391 --discv5-udp-port=62393 --rest-address=0.0.0.0 --nat=extip:172.18.4.42 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a5cdfb22c857182bccc2dcfff0dcff520ab5d4af741ccc6f6ac4466ebfbfe912 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62394 --metrics-logging=true --relay=true --filter=true
2026-02-04 11:55:32.139 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.4.42 waku 3efc4b48c0aa2793bd8f1c6a5c331734b21d0784b0e5a2e150f3c9d596feaf86
2026-02-04 11:55:32.163 DEBUG [src.node.docker_mananger] Container started with ID 3efc4b48c0aa. Setting up logs at ./log/docker/node1_2026-02-04_11-55-31__417ebd60-4a64-428c-a7a3-3fb4b907642c__wakuorg_nwaku:latest.log
2026-02-04 11:55:32.164 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62390
2026-02-04 11:55:32.165 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:32.277 ERROR [src.node.docker_mananger] Max retries reached for container 4eeaea4995a4. Exiting log stream.
2026-02-04 11:55:32.766 ERROR [src.node.docker_mananger] Max retries reached for container 25d60170146b. Exiting log stream.
2026-02-04 11:55:33.165 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62390/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:33.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 11:55:33.168 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:33.169 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62390/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:33.171 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.4.42/tcp/62391/p2p/16Uiu2HAkutHg5BhzQkBA2FH8kbZQR5LtyKtFRMpPKc1yD42PGamJ","/ip4/172.18.4.42/tcp/62392/ws/p2p/16Uiu2HAkutHg5BhzQkBA2FH8kbZQR5LtyKtFRMpPKc1yD42PGamJ"],"enrUri":"enr:-L24QDb6avUAOao-jqHXO3yOjziR5-sJEbKX8MPfW3Ol3sdHAfzfp5HuOOfiSYE2HmwtTVUCFoS51HJ9FjGrOITMDQYCgmlkgnY0gmlwhKwSBCqKbXVsdGlhZGRyc5YACASsEgQqBvO3AAoErBIEKgbzuN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBtF1_ec_vQmfDwVUQflJkXcczBGqZ9HPAfjeNrSjHcWDdGNwgvO3g3VkcILzuYV3YWt1MgU"}'
2026-02-04 11:55:33.171 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:33.171 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-04 11:55:33.177 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 11:55:33.177 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_11-55-31__417ebd60-4a64-428c-a7a3-3fb4b907642c__wakuorg_nwaku:latest.log
2026-02-04 11:55:33.177 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 11:55:33.177 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 11:55:33.178 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 11:55:33.178 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.169.168
2026-02-04 11:55:33.179 DEBUG [src.node.docker_mananger] Generated ports ['62665', '62666', '62667', '62668', '62669']
2026-02-04 11:55:33.179 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 11:55:33.179 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 11:55:33.179 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 11:55:33.179 DEBUG [src.node.docker_mananger] docker run -i -t -p 62665:62665 -p 62666:62666 -p 62667:62667 -p 62668:62668 -p 62669:62669 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62667 --rest-port=62665 --tcp-port=62666 --discv5-udp-port=62668 --rest-address=0.0.0.0 --nat=extip:172.18.169.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfa16026ecec5f0e84b6fcb70a7e7f4abdaee8fe7fa4d0deb5b8e2a8be2dacb9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62669 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QDb6avUAOao-jqHXO3yOjziR5-sJEbKX8MPfW3Ol3sdHAfzfp5HuOOfiSYE2HmwtTVUCFoS51HJ9FjGrOITMDQYCgmlkgnY0gmlwhKwSBCqKbXVsdGlhZGRyc5YACASsEgQqBvO3AAoErBIEKgbzuN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBtF1_ec_vQmfDwVUQflJkXcczBGqZ9HPAfjeNrSjHcWDdGNwgvO3g3VkcILzuYV3YWt1MgU --filternode=/ip4/172.18.4.42/tcp/62391/p2p/16Uiu2HAkutHg5BhzQkBA2FH8kbZQR5LtyKtFRMpPKc1yD42PGamJ
2026-02-04 11:55:33.338 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.169.168 waku 8dd6317dead1290339d2facf5e5b2f3eb55bf047788af3548ef114a17064f620
2026-02-04 11:55:33.363 DEBUG [src.node.docker_mananger] Container started with ID 8dd6317dead1. Setting up logs at ./log/docker/node2_2026-02-04_11-55-31__417ebd60-4a64-428c-a7a3-3fb4b907642c__wakuorg_nwaku:latest.log
2026-02-04 11:55:33.363 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62665
2026-02-04 11:55:33.363 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 11:55:34.364 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62665/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:34.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 11:55:34.368 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 11:55:34.368 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62665/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:34.370 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.168/tcp/62666/p2p/16Uiu2HAkz1sdpanZUb666w6V6cgkJWUGT5P56JmqbYEhR7aSRBUf","/ip4/172.18.169.168/tcp/62667/ws/p2p/16Uiu2HAkz1sdpanZUb666w6V6cgkJWUGT5P56JmqbYEhR7aSRBUf"],"enrUri":"enr:-L24QLQOQ9KeF4Lvykw8zpicfkvzSNNsEOZbLiBYkfNZEiWUMmbhZ1gDsIgxLVT_LNEj9rH-a37E_DeS6m5HB7JkwkoCgmlkgnY0gmlwhKwSqaiKbXVsdGlhZGRyc5YACASsEqmoBvTKAAoErBKpqAb0y90DgnJzhQADAQAAiXNlY3AyNTZrMaECRDGsnt8byztwhnbPnLNC7rTih5TU53XKQd6dhtrsdRyDdGNwgvTKg3VkcIL0zIV3YWt1MgA"}'
2026-02-04 11:55:34.371 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 11:55:34.371 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62665/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.4.42/tcp/62391/p2p/16Uiu2HAkutHg5BhzQkBA2FH8kbZQR5LtyKtFRMpPKc1yD42PGamJ"]'
2026-02-04 11:55:34.396 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:34.397 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-04 11:55:34.397 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62390/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 11:55:34.410 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:34.412 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62665/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fdce4234-e230-4d5d-bdf4-9977d7b4ae44", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 11:55:34.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"fdce4234-e230-4d5d-bdf4-9977d7b4ae44","statusDesc":"OK"}'
2026-02-04 11:55:34.424 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:34.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:34.431 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 11:55:34.531 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 11:55:34.531 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62665/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:34.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770206134424536663,"ephemeral":false}]'
2026-02-04 11:55:34.536 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:62665/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 11:55:34.544 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2026-02-04 11:55:34.545 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 11:55:34.548 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 11:55:34.548 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 11:55:34.648 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 11:55:34.649 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62665/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-04 11:55:34.652 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:62665/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
2026-02-04 11:55:34.654 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 11:55:34.655 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 11:55:34.655 DEBUG [src.node.waku_node] Stopping container with id 3efc4b48c0aa
2026-02-04 11:55:35.127 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:35.127 DEBUG [src.node.waku_node] Stopping container with id 8dd6317dead1
2026-02-04 11:55:35.628 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 11:55:35.630 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 11:55:35.635 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 11:55:35.640 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
