2026-02-04 17:15:31.422 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:15:31.423 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2026-02-04_17-15-31__026d6fc7-dc3d-4709-9073-fe8ebacadd7f
2026-02-04 17:15:31.423 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:15:31.423 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-04 17:15:31.429 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:15:31.430 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-04_17-15-31__026d6fc7-dc3d-4709-9073-fe8ebacadd7f__wakuorg_nwaku:latest.log
2026-02-04 17:15:31.430 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:15:31.430 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:15:31.431 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:15:31.431 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.205
2026-02-04 17:15:31.431 DEBUG [src.node.docker_mananger] Generated ports ['39469', '39470', '39471', '39472', '39473']
2026-02-04 17:15:31.432 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:15:31.432 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:15:31.432 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:15:31.432 DEBUG [src.node.docker_mananger] docker run -i -t -p 39469:39469 -p 39470:39470 -p 39471:39471 -p 39472:39472 -p 39473:39473 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39471 --rest-port=39469 --tcp-port=39470 --discv5-udp-port=39472 --rest-address=0.0.0.0 --nat=extip:172.18.255.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3059b261d7017fbad6a6aa8b74bb91e0d4773dd7dcfee9aeccf4fc461c2fe9f5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39473 --metrics-logging=true --lightpush=true --relay=true
2026-02-04 17:15:31.591 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.205 waku 4c3f151054059a401903f8a1103d78a8349052b1d26ccf7173c5e18419cf821e
2026-02-04 17:15:31.615 DEBUG [src.node.docker_mananger] Container started with ID 4c3f15105405. Setting up logs at ./log/docker/receiving_node1_2026-02-04_17-15-31__026d6fc7-dc3d-4709-9073-fe8ebacadd7f__wakuorg_nwaku:latest.log
2026-02-04 17:15:31.615 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39469
2026-02-04 17:15:31.616 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:15:31.688 ERROR [src.node.docker_mananger] Max retries reached for container 8fb3d8a2f746. Exiting log stream.
2026-02-04 17:15:32.179 ERROR [src.node.docker_mananger] Max retries reached for container 7a22c1ef4a28. Exiting log stream.
2026-02-04 17:15:32.617 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39469/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:15:32.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:15:32.620 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:15:32.620 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39469/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:15:32.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.205/tcp/39470/p2p/16Uiu2HAmGm143f8QQyrTKjwP2xfq4PAAhvMFp2Cq3kyDxXVJmLGV","/ip4/172.18.255.205/tcp/39471/ws/p2p/16Uiu2HAmGm143f8QQyrTKjwP2xfq4PAAhvMFp2Cq3kyDxXVJmLGV"],"enrUri":"enr:-L24QHnf5b2596HNkjCsaseksiu02K-_-tTUK0NdDAFGctOvGpsiMgBz0NFnJ6XG4hylHUEKNXH289d0YhaWhtztQ4ICgmlkgnY0gmlwhKwS_82KbXVsdGlhZGRyc5YACASsEv_NBpouAAoErBL_zQaaL90DgnJzhQADAQAAiXNlY3AyNTZrMaEDPPkG8JKUbEQliWtQLHpiJ7u_QqPDOY-jsjFIZidWLJ6DdGNwgpoug3VkcIKaMIV3YWt1Mgk"}'
2026-02-04 17:15:32.624 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:15:32.631 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:15:32.631 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-04_17-15-31__026d6fc7-dc3d-4709-9073-fe8ebacadd7f__wakuorg_nwaku:latest.log
2026-02-04 17:15:32.631 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:15:32.631 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:15:32.633 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:15:32.633 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.219.70
2026-02-04 17:15:32.633 DEBUG [src.node.docker_mananger] Generated ports ['38067', '38068', '38069', '38070', '38071']
2026-02-04 17:15:32.633 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:15:32.633 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:15:32.633 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:15:32.633 DEBUG [src.node.docker_mananger] docker run -i -t -p 38067:38067 -p 38068:38068 -p 38069:38069 -p 38070:38070 -p 38071:38071 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38069 --rest-port=38067 --tcp-port=38068 --discv5-udp-port=38070 --rest-address=0.0.0.0 --nat=extip:172.18.219.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e5a3d8ffa297f7bac362bfcbadad6caeab7cc0dfd264f7bff7fac0fcc607ed35 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38071 --metrics-logging=true --lightpush=false --relay=true
2026-02-04 17:15:32.799 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.219.70 waku 634f2781014158eb90914e70ebb8d07d2d0dd54cc0fa13daa76bef2033d20f63
2026-02-04 17:15:32.830 DEBUG [src.node.docker_mananger] Container started with ID 634f27810141. Setting up logs at ./log/docker/receiving_node2_2026-02-04_17-15-31__026d6fc7-dc3d-4709-9073-fe8ebacadd7f__wakuorg_nwaku:latest.log
2026-02-04 17:15:32.830 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38067
2026-02-04 17:15:32.831 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:15:33.831 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38067/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:15:33.834 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:15:33.835 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:15:33.835 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38067/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:15:33.838 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.70/tcp/38068/p2p/16Uiu2HAm9jURTK2Sb5RHtMFVAu6i58WDY6wEpbLV3HoLnwvydx7i","/ip4/172.18.219.70/tcp/38069/ws/p2p/16Uiu2HAm9jURTK2Sb5RHtMFVAu6i58WDY6wEpbLV3HoLnwvydx7i"],"enrUri":"enr:-L24QEXZ65Ci876jGnrZbgRoCspF6ePoOvJ3MNeipxwcOGZDbxXSv7nfEmVqpiYeP-xU9w1gcx1Q5sa4hU0zQsbmXTcCgmlkgnY0gmlwhKwS20aKbXVsdGlhZGRyc5YACASsEttGBpS0AAoErBLbRgaUtd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC1JMA20ok8oISwh-V4BSW4MsTMmYTQkr7Vj4ui67IEIGDdGNwgpS0g3VkcIKUtoV3YWt1MgE"}'
2026-02-04 17:15:33.838 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:15:33.838 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38067/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.255.205/tcp/39470/p2p/16Uiu2HAmGm143f8QQyrTKjwP2xfq4PAAhvMFp2Cq3kyDxXVJmLGV"]'
2026-02-04 17:15:33.868 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:15:33.880 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:15:33.881 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-04_17-15-31__026d6fc7-dc3d-4709-9073-fe8ebacadd7f__wakuorg_nwaku:latest.log
2026-02-04 17:15:33.881 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:15:33.882 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:15:33.884 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:15:33.885 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.167.97
2026-02-04 17:15:33.885 DEBUG [src.node.docker_mananger] Generated ports ['65061', '65062', '65063', '65064', '65065']
2026-02-04 17:15:33.885 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:15:33.885 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:15:33.885 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:15:33.886 DEBUG [src.node.docker_mananger] docker run -i -t -p 65061:65061 -p 65062:65062 -p 65063:65063 -p 65064:65064 -p 65065:65065 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65063 --rest-port=65061 --tcp-port=65062 --discv5-udp-port=65064 --rest-address=0.0.0.0 --nat=extip:172.18.167.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b0baabd556b94e8d91ddfef19e89535fdfe6153359d9465fc576c3bc5c6b169 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65065 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHnf5b2596HNkjCsaseksiu02K-_-tTUK0NdDAFGctOvGpsiMgBz0NFnJ6XG4hylHUEKNXH289d0YhaWhtztQ4ICgmlkgnY0gmlwhKwS_82KbXVsdGlhZGRyc5YACASsEv_NBpouAAoErBL_zQaaL90DgnJzhQADAQAAiXNlY3AyNTZrMaEDPPkG8JKUbEQliWtQLHpiJ7u_QqPDOY-jsjFIZidWLJ6DdGNwgpoug3VkcIKaMIV3YWt1Mgk --lightpushnode=/ip4/172.18.255.205/tcp/39470/p2p/16Uiu2HAmGm143f8QQyrTKjwP2xfq4PAAhvMFp2Cq3kyDxXVJmLGV --lightpush=true --relay=true
2026-02-04 17:15:34.047 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.167.97 waku 0a158f8b9c01a0b1a4605072cb80fff7dd8cf7cceb07de7126570016612fe5ac
2026-02-04 17:15:34.079 DEBUG [src.node.docker_mananger] Container started with ID 0a158f8b9c01. Setting up logs at ./log/docker/lightpush_node1_2026-02-04_17-15-31__026d6fc7-dc3d-4709-9073-fe8ebacadd7f__wakuorg_nwaku:latest.log
2026-02-04 17:15:34.079 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65061
2026-02-04 17:15:34.080 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:15:35.080 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65061/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:15:35.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:15:35.092 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:15:35.094 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65061/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:15:35.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.97/tcp/65062/p2p/16Uiu2HAmPc5oPG42FzUBXx4sAioRVUS18PFbd3rgBKHzYgELex9M","/ip4/172.18.167.97/tcp/65063/ws/p2p/16Uiu2HAmPc5oPG42FzUBXx4sAioRVUS18PFbd3rgBKHzYgELex9M"],"enrUri":"enr:-L24QANtpiJSmPfsYRBteMbkT4bu7P84Dc4jG9RS7NYF6caTRLgavk_3swG-q-QPlMDmmRjhYD0uO7cNXT0cPbg-wZ8CgmlkgnY0gmlwhKwSp2GKbXVsdGlhZGRyc5YACASsEqdhBv4mAAoErBKnYQb-J90DgnJzhQADAQAAiXNlY3AyNTZrMaEDorH52sXyd0YrgP9tNyB6YFJjNxzdOWiMT8RtmE3-J_iDdGNwgv4mg3VkcIL-KIV3YWt1Mgk"}'
2026-02-04 17:15:35.097 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:15:35.099 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65061/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.255.205/tcp/39470/p2p/16Uiu2HAmGm143f8QQyrTKjwP2xfq4PAAhvMFp2Cq3kyDxXVJmLGV"]'
2026-02-04 17:15:35.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:15:35.103 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65061/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.219.70/tcp/38068/p2p/16Uiu2HAm9jURTK2Sb5RHtMFVAu6i58WDY6wEpbLV3HoLnwvydx7i"]'
2026-02-04 17:15:35.122 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:15:35.123 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39469/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 17:15:35.131 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:15:35.132 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38067/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 17:15:35.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:15:35.136 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65061/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 17:15:35.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:15:35.140 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65061/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1770225335140024832}}'
2026-02-04 17:15:35.142 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:65061/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-04 17:15:35.144 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:15:35.145 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:15:35.145 DEBUG [src.node.waku_node] Stopping container with id 4c3f15105405
2026-02-04 17:15:35.674 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:15:35.674 DEBUG [src.node.waku_node] Stopping container with id 634f27810141
2026-02-04 17:15:36.191 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:15:36.191 DEBUG [src.node.waku_node] Stopping container with id 0a158f8b9c01
2026-02-04 17:15:36.486 ERROR [src.node.docker_mananger] Max retries reached for container 4c3f15105405. Exiting log stream.
2026-02-04 17:15:36.713 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:15:36.714 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:15:36.722 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:15:36.730 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:15:36.736 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
