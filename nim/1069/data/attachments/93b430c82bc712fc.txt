2026-02-04 17:12:28.127 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:12:28.127 DEBUG [tests.conftest] Running test: test_publish_with_valid_version with id: 2026-02-04_17-12-28__cba72f31-9406-42d1-840c-9a0d617ccbb0
2026-02-04 17:12:28.127 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:12:28.128 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 17:12:28.128 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-04 17:12:28.134 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:12:28.134 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_17-12-28__cba72f31-9406-42d1-840c-9a0d617ccbb0__wakuorg_nwaku:latest.log
2026-02-04 17:12:28.134 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:12:28.134 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:12:28.136 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:12:28.136 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.255
2026-02-04 17:12:28.136 DEBUG [src.node.docker_mananger] Generated ports ['43636', '43637', '43638', '43639', '43640']
2026-02-04 17:12:28.136 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:12:28.136 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:12:28.136 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:12:28.136 DEBUG [src.node.docker_mananger] docker run -i -t -p 43636:43636 -p 43637:43637 -p 43638:43638 -p 43639:43639 -p 43640:43640 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43638 --rest-port=43636 --tcp-port=43637 --discv5-udp-port=43639 --rest-address=0.0.0.0 --nat=extip:172.18.53.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdf3abd0d0b4f0cea0cd1fbffc0d34d2965b931facc3abb51c9978df9cbfc86c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43640 --metrics-logging=true --relay=true
2026-02-04 17:12:28.323 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.255 waku 5c3b30053d3bf31ad7e45855e8e692ed060f9d82898745da44f9f26bbbc0adf6
2026-02-04 17:12:28.352 DEBUG [src.node.docker_mananger] Container started with ID 5c3b30053d3b. Setting up logs at ./log/docker/node1_2026-02-04_17-12-28__cba72f31-9406-42d1-840c-9a0d617ccbb0__wakuorg_nwaku:latest.log
2026-02-04 17:12:28.353 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43636
2026-02-04 17:12:28.353 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:12:28.382 ERROR [src.node.docker_mananger] Max retries reached for container 4cc1700370ec. Exiting log stream.
2026-02-04 17:12:28.915 ERROR [src.node.docker_mananger] Max retries reached for container 031b585cd958. Exiting log stream.
2026-02-04 17:12:29.353 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43636/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:29.357 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:12:29.357 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:12:29.357 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43636/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:29.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.255/tcp/43637/p2p/16Uiu2HAmVnkmfFBfguBenW2De1hAQ3d1bzbeM6KwNVj9xhU21sLo","/ip4/172.18.53.255/tcp/43638/ws/p2p/16Uiu2HAmVnkmfFBfguBenW2De1hAQ3d1bzbeM6KwNVj9xhU21sLo"],"enrUri":"enr:-L24QMwBK2NOAt4ZmMsPqH3d6xR2jxWbjldY-iCwGCwkox8xHpzyPvNuQcZLfURDyf0fy3KcJyh0lw2i817N5lb3KX8CgmlkgnY0gmlwhKwSNf-KbXVsdGlhZGRyc5YACASsEjX_Bqp1AAoErBI1_waqdt0DgnJzhQADAQAAiXNlY3AyNTZrMaED_pP4Lv1VD7J5fFflRZ_vIbSQ-wI0I_-xu8V-grUaqfSDdGNwgqp1g3VkcIKqd4V3YWt1MgE"}'
2026-02-04 17:12:29.359 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:12:29.366 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:12:29.366 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_17-12-28__cba72f31-9406-42d1-840c-9a0d617ccbb0__wakuorg_nwaku:latest.log
2026-02-04 17:12:29.366 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:12:29.366 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:12:29.367 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:12:29.368 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.230.249
2026-02-04 17:12:29.368 DEBUG [src.node.docker_mananger] Generated ports ['52600', '52601', '52602', '52603', '52604']
2026-02-04 17:12:29.368 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:12:29.368 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:12:29.368 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:12:29.368 DEBUG [src.node.docker_mananger] docker run -i -t -p 52600:52600 -p 52601:52601 -p 52602:52602 -p 52603:52603 -p 52604:52604 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52602 --rest-port=52600 --tcp-port=52601 --discv5-udp-port=52603 --rest-address=0.0.0.0 --nat=extip:172.18.230.249 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2adcf5aaa3f296e27cb4e09564bae3a7fd28f273b158d4f5759e84dfb6bb80c5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52604 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMwBK2NOAt4ZmMsPqH3d6xR2jxWbjldY-iCwGCwkox8xHpzyPvNuQcZLfURDyf0fy3KcJyh0lw2i817N5lb3KX8CgmlkgnY0gmlwhKwSNf-KbXVsdGlhZGRyc5YACASsEjX_Bqp1AAoErBI1_waqdt0DgnJzhQADAQAAiXNlY3AyNTZrMaED_pP4Lv1VD7J5fFflRZ_vIbSQ-wI0I_-xu8V-grUaqfSDdGNwgqp1g3VkcIKqd4V3YWt1MgE
2026-02-04 17:12:29.548 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.230.249 waku e538ad192a67411d0c186b5b40233ec4a669095a16af666f83394de79f8fbc44
2026-02-04 17:12:29.584 DEBUG [src.node.docker_mananger] Container started with ID e538ad192a67. Setting up logs at ./log/docker/node2_2026-02-04_17-12-28__cba72f31-9406-42d1-840c-9a0d617ccbb0__wakuorg_nwaku:latest.log
2026-02-04 17:12:29.585 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52600
2026-02-04 17:12:29.585 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:12:30.586 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52600/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:30.593 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:12:30.593 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:12:30.593 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52600/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:30.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.249/tcp/52601/p2p/16Uiu2HAmHTyUC1hRZocN5G8RnPtgpvNm6s7nTVovaMVPNZMn4obR","/ip4/172.18.230.249/tcp/52602/ws/p2p/16Uiu2HAmHTyUC1hRZocN5G8RnPtgpvNm6s7nTVovaMVPNZMn4obR"],"enrUri":"enr:-L24QHs3bfAJG45_6Iw-vx72BtrdPZXdMDLKXTf8Zt4nDvjEAZ1l9LJu50tZ_HViEdtIZUOQd88NuoghQJJSHVfdp3UCgmlkgnY0gmlwhKwS5vmKbXVsdGlhZGRyc5YACASsEub5Bs15AAoErBLm-QbNet0DgnJzhQADAQAAiXNlY3AyNTZrMaEDR3gMr-FYKSPzmbg7RBCIwe-xWBAgAxCignaHzk0u6YyDdGNwgs15g3VkcILNe4V3YWt1MgE"}'
2026-02-04 17:12:30.597 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:12:30.598 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52600/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.255/tcp/43637/p2p/16Uiu2HAmVnkmfFBfguBenW2De1hAQ3d1bzbeM6KwNVj9xhU21sLo"]'
2026-02-04 17:12:30.601 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:30.601 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-04 17:12:30.601 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43636/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 17:12:30.605 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:30.605 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52600/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 17:12:30.609 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:30.610 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43636/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:12:30.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:30.616 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 17:12:30.716 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-04 17:12:30.716 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43636/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:30.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770225150610084864,"ephemeral":false,"proof":""}]'
2026-02-04 17:12:30.721 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 17:12:30.721 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52600/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:30.723 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770225150610084864,"ephemeral":false,"proof":""}]'
2026-02-04 17:12:30.724 INFO [src.steps.relay] WARM UP successful!!
2026-02-04 17:12:30.725 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43636/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)', "version": 10}'
2026-02-04 17:12:30.729 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:30.730 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 17:12:30.830 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-04 17:12:30.831 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43636/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:30.833 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":10,"timestamp":1770225150725599025,"ephemeral":false,"proof":""}]'
2026-02-04 17:12:30.834 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 17:12:30.834 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52600/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:30.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":10,"timestamp":1770225150725599025,"ephemeral":false,"proof":""}]'
2026-02-04 17:12:30.840 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:12:30.841 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:12:30.841 DEBUG [src.node.waku_node] Stopping container with id 5c3b30053d3b
2026-02-04 17:12:31.371 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:12:31.371 DEBUG [src.node.waku_node] Stopping container with id e538ad192a67
2026-02-04 17:12:31.899 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:12:31.900 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:12:31.907 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:12:31.912 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
