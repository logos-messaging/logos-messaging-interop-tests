2026-02-04 17:09:53.255 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:09:53.255 DEBUG [tests.conftest] Running test: test_lightpush with id: 2026-02-04_17-09-53__827c40f2-8ba7-4b0a-aa23-d410eed59cdc
2026-02-04 17:09:53.255 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:09:53.255 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-04 17:09:53.256 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-04 17:09:53.256 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 17:09:53.256 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-04 17:09:53.263 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:09:53.263 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_17-09-53__827c40f2-8ba7-4b0a-aa23-d410eed59cdc__wakuorg_nwaku:latest.log
2026-02-04 17:09:53.263 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:09:53.263 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:09:53.265 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:09:53.265 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.238.59
2026-02-04 17:09:53.265 DEBUG [src.node.docker_mananger] Generated ports ['9419', '9420', '9421', '9422', '9423']
2026-02-04 17:09:53.265 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:09:53.265 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:09:53.265 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:09:53.266 DEBUG [src.node.docker_mananger] docker run -i -t -p 9419:9419 -p 9420:9420 -p 9421:9421 -p 9422:9422 -p 9423:9423 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9421 --rest-port=9419 --tcp-port=9420 --discv5-udp-port=9422 --rest-address=0.0.0.0 --nat=extip:172.18.238.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f393db9ddfc43c3f5ddaedf9adbbd7aa5ccbfe12ac4f0ff1e394df01f5f6117 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9423 --metrics-logging=true --lightpush=true --relay=true
2026-02-04 17:09:53.442 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.238.59 waku bd08219ff8eba6462d067f265df98574c56172c5abbd1f4e44c5afdb86db50f0
2026-02-04 17:09:53.472 DEBUG [src.node.docker_mananger] Container started with ID bd08219ff8eb. Setting up logs at ./log/docker/node1_2026-02-04_17-09-53__827c40f2-8ba7-4b0a-aa23-d410eed59cdc__wakuorg_nwaku:latest.log
2026-02-04 17:09:53.474 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9419
2026-02-04 17:09:53.474 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:09:53.533 ERROR [src.node.docker_mananger] Max retries reached for container 09ea2fe1be05. Exiting log stream.
2026-02-04 17:09:54.054 ERROR [src.node.docker_mananger] Max retries reached for container a09824c9e432. Exiting log stream.
2026-02-04 17:09:54.474 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9419/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:09:54.477 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:09:54.478 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:09:54.478 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9419/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:09:54.480 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.59/tcp/9420/p2p/16Uiu2HAm1WaEtxBFNnPKrgUQhiwDCfJ5DRPEQiiuLY8eduCPo7r8","/ip4/172.18.238.59/tcp/9421/ws/p2p/16Uiu2HAm1WaEtxBFNnPKrgUQhiwDCfJ5DRPEQiiuLY8eduCPo7r8"],"enrUri":"enr:-L24QDw_Vyqtqq__wtAvWZlIOPYuusWupxjzwlRi2oVpNWOLJBLx92lJxnfiQHAvqW7D21M9m4ceQVsKL7q0wTg9jwsCgmlkgnY0gmlwhKwS7juKbXVsdGlhZGRyc5YACASsEu47BiTMAAoErBLuOwYkzd0DgnJzhQADAQAAiXNlY3AyNTZrMaECWmeJKxFV6GmxvMjLiFbChISmI-N6kpU9j4pS37JhSGmDdGNwgiTMg3VkcIIkzoV3YWt1Mgk"}'
2026-02-04 17:09:54.480 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:09:54.487 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:09:54.487 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_17-09-53__827c40f2-8ba7-4b0a-aa23-d410eed59cdc__wakuorg_nwaku:latest.log
2026-02-04 17:09:54.487 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:09:54.487 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:09:54.489 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:09:54.489 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.12.129
2026-02-04 17:09:54.489 DEBUG [src.node.docker_mananger] Generated ports ['38478', '38479', '38480', '38481', '38482']
2026-02-04 17:09:54.489 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:09:54.489 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:09:54.489 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:09:54.489 DEBUG [src.node.docker_mananger] docker run -i -t -p 38478:38478 -p 38479:38479 -p 38480:38480 -p 38481:38481 -p 38482:38482 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38480 --rest-port=38478 --tcp-port=38479 --discv5-udp-port=38481 --rest-address=0.0.0.0 --nat=extip:172.18.12.129 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff8269eff63ed41ba2fbb25a79b8843232befb6c20aeab2e454cc3e8b51cffe7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38482 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QDw_Vyqtqq__wtAvWZlIOPYuusWupxjzwlRi2oVpNWOLJBLx92lJxnfiQHAvqW7D21M9m4ceQVsKL7q0wTg9jwsCgmlkgnY0gmlwhKwS7juKbXVsdGlhZGRyc5YACASsEu47BiTMAAoErBLuOwYkzd0DgnJzhQADAQAAiXNlY3AyNTZrMaECWmeJKxFV6GmxvMjLiFbChISmI-N6kpU9j4pS37JhSGmDdGNwgiTMg3VkcIIkzoV3YWt1Mgk
2026-02-04 17:09:54.665 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.12.129 waku 5274166dc299fa8973af433692dc3aeb76f7b74e734fc6e8d6cac438366af894
2026-02-04 17:09:54.693 DEBUG [src.node.docker_mananger] Container started with ID 5274166dc299. Setting up logs at ./log/docker/node1_2026-02-04_17-09-53__827c40f2-8ba7-4b0a-aa23-d410eed59cdc__wakuorg_nwaku:latest.log
2026-02-04 17:09:54.693 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38478
2026-02-04 17:09:54.694 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:09:55.695 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38478/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:09:55.713 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:09:55.715 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:09:55.715 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38478/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:09:55.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.129/tcp/38479/p2p/16Uiu2HAmSR1B9e1hP23LMh7m8NUYcqCFC5SHLwYm5PsLtQQEg52P","/ip4/172.18.12.129/tcp/38480/ws/p2p/16Uiu2HAmSR1B9e1hP23LMh7m8NUYcqCFC5SHLwYm5PsLtQQEg52P"],"enrUri":"enr:-L24QAx1NbKUZbUatiSGMvwKF2YjUSJLkjULD8zo7rL7ut33R-wtU2-pySMjInC6YkFvHE94YMP3JfOVAA9pLboo9UUCgmlkgnY0gmlwhKwSDIGKbXVsdGlhZGRyc5YACASsEgyBBpZPAAoErBIMgQaWUN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzG5rLZ6H-pln2bFKF9nkDoxl27Ty5NI92dLRLCw08miDdGNwgpZPg3VkcIKWUYV3YWt1MgE"}'
2026-02-04 17:09:55.719 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:09:55.728 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:09:55.728 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_17-09-53__827c40f2-8ba7-4b0a-aa23-d410eed59cdc__wakuorg_nwaku:latest.log
2026-02-04 17:09:55.728 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:09:55.728 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:09:55.729 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:09:55.730 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.188.205
2026-02-04 17:09:55.730 DEBUG [src.node.docker_mananger] Generated ports ['36139', '36140', '36141', '36142', '36143']
2026-02-04 17:09:55.730 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:09:55.730 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:09:55.730 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:09:55.730 DEBUG [src.node.docker_mananger] docker run -i -t -p 36139:36139 -p 36140:36140 -p 36141:36141 -p 36142:36142 -p 36143:36143 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36141 --rest-port=36139 --tcp-port=36140 --discv5-udp-port=36142 --rest-address=0.0.0.0 --nat=extip:172.18.188.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8faba052dc108ddfe58eef5295cbbdbaff78f63c183f47c28eabc4ebcb9cc9fe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36143 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-L24QDw_Vyqtqq__wtAvWZlIOPYuusWupxjzwlRi2oVpNWOLJBLx92lJxnfiQHAvqW7D21M9m4ceQVsKL7q0wTg9jwsCgmlkgnY0gmlwhKwS7juKbXVsdGlhZGRyc5YACASsEu47BiTMAAoErBLuOwYkzd0DgnJzhQADAQAAiXNlY3AyNTZrMaECWmeJKxFV6GmxvMjLiFbChISmI-N6kpU9j4pS37JhSGmDdGNwgiTMg3VkcIIkzoV3YWt1Mgk --lightpushnode=/ip4/172.18.238.59/tcp/9420/p2p/16Uiu2HAm1WaEtxBFNnPKrgUQhiwDCfJ5DRPEQiiuLY8eduCPo7r8
2026-02-04 17:09:55.914 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.188.205 waku 920e8f31da22679abfa32b2fe1da27e4164e1f28478e5db4e2282f4f950c539d
2026-02-04 17:09:55.943 DEBUG [src.node.docker_mananger] Container started with ID 920e8f31da22. Setting up logs at ./log/docker/node1_2026-02-04_17-09-53__827c40f2-8ba7-4b0a-aa23-d410eed59cdc__wakuorg_nwaku:latest.log
2026-02-04 17:09:55.944 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36139
2026-02-04 17:09:55.944 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:09:56.944 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36139/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:09:56.948 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:09:56.949 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:09:56.949 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36139/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:09:56.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.205/tcp/36140/p2p/16Uiu2HAmP5VAFuXoXK2SU6656kj9L3aqt4nXB8tqzwVG9hFYNTci","/ip4/172.18.188.205/tcp/36141/ws/p2p/16Uiu2HAmP5VAFuXoXK2SU6656kj9L3aqt4nXB8tqzwVG9hFYNTci"],"enrUri":"enr:-L24QG-mT5shFWyWtGumP1mepRTovXl_sS7uUBrpmoZTqynTQR6PUj69wZUDBvoNUnMjs2Iq2K1son17sm4tCZhQO1sCgmlkgnY0gmlwhKwSvM2KbXVsdGlhZGRyc5YACASsErzNBo0sAAoErBK8zQaNLd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmttiTu_JFQ0lgsDAoVLfV-pdcT7POIGRsqUvIrQo-7eDdGNwgo0sg3VkcIKNLoV3YWt1Mgk"}'
2026-02-04 17:09:56.951 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:09:56.952 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9419/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 17:09:56.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:09:56.956 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38478/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 17:09:56.961 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:09:56.962 DEBUG [src.steps.light_push] Lightpushing message
2026-02-04 17:09:56.962 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36139/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1770224996962321594}}'
2026-02-04 17:09:57.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:09:57.012 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 17:09:57.112 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2026-02-04 17:09:57.112 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9419/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:09:57.115 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770224996962321594,"ephemeral":false,"proof":""}]'
2026-02-04 17:09:57.116 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2026-02-04 17:09:57.117 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38478/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:09:57.119 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770224996962321594,"ephemeral":false,"proof":""}]'
2026-02-04 17:09:57.122 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:09:57.123 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:09:57.123 DEBUG [src.node.waku_node] Stopping container with id bd08219ff8eb
2026-02-04 17:09:57.617 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:09:57.617 DEBUG [src.node.waku_node] Stopping container with id 5274166dc299
2026-02-04 17:09:58.155 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:09:58.157 DEBUG [src.node.waku_node] Stopping container with id 920e8f31da22
2026-02-04 17:09:58.431 ERROR [src.node.docker_mananger] Max retries reached for container bd08219ff8eb. Exiting log stream.
2026-02-04 17:09:58.654 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:09:58.657 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:09:58.665 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:09:58.673 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:09:58.681 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
