2026-02-04 17:12:26.669 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:12:26.669 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_with_invalid_pubsub_topic_format with id: 2026-02-04_17-12-26__ce1e7149-ca1d-4069-8f67-b5b63f687872
2026-02-04 17:12:26.669 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:12:26.670 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 17:12:26.670 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-04 17:12:26.677 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:12:26.677 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_17-12-26__ce1e7149-ca1d-4069-8f67-b5b63f687872__wakuorg_nwaku:latest.log
2026-02-04 17:12:26.677 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:12:26.678 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:12:26.679 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:12:26.679 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.211.70
2026-02-04 17:12:26.680 DEBUG [src.node.docker_mananger] Generated ports ['3542', '3543', '3544', '3545', '3546']
2026-02-04 17:12:26.680 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:12:26.680 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:12:26.680 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:12:26.680 DEBUG [src.node.docker_mananger] docker run -i -t -p 3542:3542 -p 3543:3543 -p 3544:3544 -p 3545:3545 -p 3546:3546 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3544 --rest-port=3542 --tcp-port=3543 --discv5-udp-port=3545 --rest-address=0.0.0.0 --nat=extip:172.18.211.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebdbf7fb99ba2af6acc7a9deee2fb12861da1bffe646eaaffc6eafa78ea7433f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3546 --metrics-logging=true --relay=true
2026-02-04 17:12:26.867 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.211.70 waku c884f31aa7b34f61c76bd62e51deb9d48a44a66d81cd870cbaa1c302a1cdb34e
2026-02-04 17:12:26.902 DEBUG [src.node.docker_mananger] Container started with ID c884f31aa7b3. Setting up logs at ./log/docker/node1_2026-02-04_17-12-26__ce1e7149-ca1d-4069-8f67-b5b63f687872__wakuorg_nwaku:latest.log
2026-02-04 17:12:26.903 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3542
2026-02-04 17:12:26.903 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:12:26.947 ERROR [src.node.docker_mananger] Max retries reached for container b417c946129e. Exiting log stream.
2026-02-04 17:12:27.474 ERROR [src.node.docker_mananger] Max retries reached for container f27c3491b86f. Exiting log stream.
2026-02-04 17:12:27.903 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3542/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:27.907 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:12:27.907 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:12:27.907 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3542/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:27.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.70/tcp/3543/p2p/16Uiu2HAmCAV7164EYnJdDow22LAPsyGhqASQcZfDb1Ckys1s43GA","/ip4/172.18.211.70/tcp/3544/ws/p2p/16Uiu2HAmCAV7164EYnJdDow22LAPsyGhqASQcZfDb1Ckys1s43GA"],"enrUri":"enr:-L24QBG_xvybmZu8QgITeSMvsLFEw4lNammA78f1t0mGaYEnf_ZbewYKSIXzWBhb7OBiiCVewjCS0nOS_kGGsiHU7nkCgmlkgnY0gmlwhKwS00aKbXVsdGlhZGRyc5YACASsEtNGBg3XAAoErBLTRgYN2N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-LKrHLjq1ETaUNXGq4poR-xFvqC219I0cqxnR1boNs-DdGNwgg3Xg3VkcIIN2YV3YWt1MgE"}'
2026-02-04 17:12:27.910 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:12:27.916 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:12:27.916 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_17-12-26__ce1e7149-ca1d-4069-8f67-b5b63f687872__wakuorg_nwaku:latest.log
2026-02-04 17:12:27.916 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:12:27.916 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:12:27.918 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:12:27.918 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.125.217
2026-02-04 17:12:27.918 DEBUG [src.node.docker_mananger] Generated ports ['41611', '41612', '41613', '41614', '41615']
2026-02-04 17:12:27.918 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:12:27.918 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:12:27.918 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:12:27.918 DEBUG [src.node.docker_mananger] docker run -i -t -p 41611:41611 -p 41612:41612 -p 41613:41613 -p 41614:41614 -p 41615:41615 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41613 --rest-port=41611 --tcp-port=41612 --discv5-udp-port=41614 --rest-address=0.0.0.0 --nat=extip:172.18.125.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c5aeac2fdcaa6ccd6edd4f691a58ab69eca1dfbee202aafc453197c9993cb42 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41615 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBG_xvybmZu8QgITeSMvsLFEw4lNammA78f1t0mGaYEnf_ZbewYKSIXzWBhb7OBiiCVewjCS0nOS_kGGsiHU7nkCgmlkgnY0gmlwhKwS00aKbXVsdGlhZGRyc5YACASsEtNGBg3XAAoErBLTRgYN2N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-LKrHLjq1ETaUNXGq4poR-xFvqC219I0cqxnR1boNs-DdGNwgg3Xg3VkcIIN2YV3YWt1MgE
2026-02-04 17:12:28.102 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.125.217 waku 303e1b886eb19ca135830d16e9dac595cf8adb06b233b5d94b06b175b518b7b3
2026-02-04 17:12:28.133 DEBUG [src.node.docker_mananger] Container started with ID 303e1b886eb1. Setting up logs at ./log/docker/node2_2026-02-04_17-12-26__ce1e7149-ca1d-4069-8f67-b5b63f687872__wakuorg_nwaku:latest.log
2026-02-04 17:12:28.134 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41611
2026-02-04 17:12:28.134 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:12:29.134 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41611/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:29.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:12:29.151 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:12:29.152 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41611/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:29.155 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.217/tcp/41612/p2p/16Uiu2HAm9XurjW4Bd48drX4mskcFtkh4TZauBJXhi6aANXFSRPju","/ip4/172.18.125.217/tcp/41613/ws/p2p/16Uiu2HAm9XurjW4Bd48drX4mskcFtkh4TZauBJXhi6aANXFSRPju"],"enrUri":"enr:-L24QC7IK-9MC5MgawKzYq9uc_-1oq4__c2ZJqamsYRM1tNvQicE55ri9Ve5je_zI6SpJAsxJ9_5_ouvBCOYyHIJeEkCgmlkgnY0gmlwhKwSfdmKbXVsdGlhZGRyc5YACASsEn3ZBqKMAAoErBJ92Qaijd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC0ZzLRkuxwXxZWSNd9ZhDI3cKAwfK7_y0gZoQeum4auCDdGNwgqKMg3VkcIKijoV3YWt1MgE"}'
2026-02-04 17:12:29.156 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:12:29.157 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41611/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.211.70/tcp/3543/p2p/16Uiu2HAmCAV7164EYnJdDow22LAPsyGhqASQcZfDb1Ckys1s43GA"]'
2026-02-04 17:12:29.159 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:29.160 DEBUG [tests.relay.test_subscribe] Running test with payload /test/2/rs/0/1
2026-02-04 17:12:29.161 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:3542/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/test/2/rs/0/1"'
2026-02-04 17:12:29.163 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3542/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-04 17:12:29.164 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/3/rs/0/1
2026-02-04 17:12:29.164 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:3542/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/3/rs/0/1"'
2026-02-04 17:12:29.166 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3542/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-04 17:12:29.167 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/test/0/1
2026-02-04 17:12:29.167 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:3542/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/test/0/1"'
2026-02-04 17:12:29.169 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3542/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-04 17:12:29.170 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/3/b
2026-02-04 17:12:29.170 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:3542/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/3/b"'
2026-02-04 17:12:29.172 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3542/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-04 17:12:29.173 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/0
2026-02-04 17:12:29.173 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:3542/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/0"'
2026-02-04 17:12:29.175 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3542/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-04 17:12:29.177 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:12:29.178 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:12:29.178 DEBUG [src.node.waku_node] Stopping container with id c884f31aa7b3
2026-02-04 17:12:29.732 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:12:29.732 DEBUG [src.node.waku_node] Stopping container with id 303e1b886eb1
2026-02-04 17:12:30.255 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:12:30.257 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:12:30.261 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:12:30.266 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
