2026-02-04 17:12:07.075 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:12:07.076 DEBUG [tests.conftest] Running test: test_single_content_topic[/app/22/sometopic/someencoding] with id: 2026-02-04_17-12-07__2036933b-6fae-4309-8c07-23f867036cb3
2026-02-04 17:12:07.076 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:12:07.076 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 17:12:07.077 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-04 17:12:07.084 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:12:07.084 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_17-12-07__2036933b-6fae-4309-8c07-23f867036cb3__wakuorg_nwaku:latest.log
2026-02-04 17:12:07.084 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:12:07.084 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:12:07.086 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:12:07.086 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.160.238
2026-02-04 17:12:07.086 DEBUG [src.node.docker_mananger] Generated ports ['34433', '34434', '34435', '34436', '34437']
2026-02-04 17:12:07.086 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:12:07.086 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:12:07.086 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:12:07.087 DEBUG [src.node.docker_mananger] docker run -i -t -p 34433:34433 -p 34434:34434 -p 34435:34435 -p 34436:34436 -p 34437:34437 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34435 --rest-port=34433 --tcp-port=34434 --discv5-udp-port=34436 --rest-address=0.0.0.0 --nat=extip:172.18.160.238 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=1e2cc8f2719bfd9c02d31d5b06d2f5d04ee96ae94df07f71ec7ee695c4283685 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34437 --metrics-logging=true --relay=true --filter=true --content-topic=/app/22/sometopic/someencoding
2026-02-04 17:12:07.271 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.160.238 waku 74769193fdd188af144766e4b945dc2cd738da6f62e45fd3fb1a06297e72b890
2026-02-04 17:12:07.304 DEBUG [src.node.docker_mananger] Container started with ID 74769193fdd1. Setting up logs at ./log/docker/node1_2026-02-04_17-12-07__2036933b-6fae-4309-8c07-23f867036cb3__wakuorg_nwaku:latest.log
2026-02-04 17:12:07.305 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34433
2026-02-04 17:12:07.305 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:12:07.339 ERROR [src.node.docker_mananger] Max retries reached for container 2ae758c7308c. Exiting log stream.
2026-02-04 17:12:07.877 ERROR [src.node.docker_mananger] Max retries reached for container cf04f683f736. Exiting log stream.
2026-02-04 17:12:08.307 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34433/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:08.310 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:12:08.310 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:12:08.310 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34433/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:08.313 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.238/tcp/34434/p2p/16Uiu2HAmR4H1ancP5r5GUjYwsY9HCNsV3ZkccspnGsncozRjd6wg","/ip4/172.18.160.238/tcp/34435/ws/p2p/16Uiu2HAmR4H1ancP5r5GUjYwsY9HCNsV3ZkccspnGsncozRjd6wg"],"enrUri":"enr:-L24QE8_6HHtTpS-XY14cKYlfNS9NcwbXcUgHAb-4HHlRwDlVCzGm_3imbkhkZJuZjxMmosapP5GwcRmNPH4kJsI_-wCgmlkgnY0gmlwhKwSoO6KbXVsdGlhZGRyc5YACASsEqDuBoaCAAoErBKg7gaGg90DgnJzhQACAQAAiXNlY3AyNTZrMaEDuENwg7GsEP0bogIpXQsMUO2N24ht0XIJDro6Xh2EE5eDdGNwgoaCg3VkcIKGhIV3YWt1MgU"}'
2026-02-04 17:12:08.313 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:12:08.320 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:12:08.320 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_17-12-07__2036933b-6fae-4309-8c07-23f867036cb3__wakuorg_nwaku:latest.log
2026-02-04 17:12:08.320 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:12:08.320 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:12:08.321 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:12:08.321 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.41.225
2026-02-04 17:12:08.322 DEBUG [src.node.docker_mananger] Generated ports ['45740', '45741', '45742', '45743', '45744']
2026-02-04 17:12:08.322 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:12:08.322 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:12:08.322 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:12:08.322 DEBUG [src.node.docker_mananger] docker run -i -t -p 45740:45740 -p 45741:45741 -p 45742:45742 -p 45743:45743 -p 45744:45744 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45742 --rest-port=45740 --tcp-port=45741 --discv5-udp-port=45743 --rest-address=0.0.0.0 --nat=extip:172.18.41.225 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ee1e19f49c2ae1fa3bc01eeb5bc6c9b103c0ae60d13a86dabd47e8d84ffd64bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45744 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QE8_6HHtTpS-XY14cKYlfNS9NcwbXcUgHAb-4HHlRwDlVCzGm_3imbkhkZJuZjxMmosapP5GwcRmNPH4kJsI_-wCgmlkgnY0gmlwhKwSoO6KbXVsdGlhZGRyc5YACASsEqDuBoaCAAoErBKg7gaGg90DgnJzhQACAQAAiXNlY3AyNTZrMaEDuENwg7GsEP0bogIpXQsMUO2N24ht0XIJDro6Xh2EE5eDdGNwgoaCg3VkcIKGhIV3YWt1MgU --content-topic=/app/22/sometopic/someencoding
2026-02-04 17:12:08.513 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.41.225 waku d8ce4597a700ce6a0414b6650463494592ae06165b292e9a0c4ed673069b534a
2026-02-04 17:12:08.546 DEBUG [src.node.docker_mananger] Container started with ID d8ce4597a700. Setting up logs at ./log/docker/node2_2026-02-04_17-12-07__2036933b-6fae-4309-8c07-23f867036cb3__wakuorg_nwaku:latest.log
2026-02-04 17:12:08.547 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45740
2026-02-04 17:12:08.547 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:12:09.547 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45740/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:09.561 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 17:12:09.565 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:12:09.566 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45740/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:09.569 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.225/tcp/45741/p2p/16Uiu2HAmVFYn2A2PmGRg1CHzY1cKBky9sY3Wkpjrny1Ca2qt1sXh","/ip4/172.18.41.225/tcp/45742/ws/p2p/16Uiu2HAmVFYn2A2PmGRg1CHzY1cKBky9sY3Wkpjrny1Ca2qt1sXh"],"enrUri":"enr:-L24QOzazBdxClNhIkwo-V-84IWZOw1aJh87W1I5yJZft1UyY4ibKvgiyH6Kv1tZ26JIqzhh2OFTNkc4kMgz2vdank4CgmlkgnY0gmlwhKwSKeGKbXVsdGlhZGRyc5YACASsEinhBrKtAAoErBIp4Qayrt0DgnJzhQACAQAAiXNlY3AyNTZrMaED9pVnKRu6K5zAvlpBWZ6oEsHihFlUjq9nEwT_iGo-o-yDdGNwgrKtg3VkcIKyr4V3YWt1MgE"}'
2026-02-04 17:12:09.569 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:12:09.570 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45740/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.160.238/tcp/34434/p2p/16Uiu2HAmR4H1ancP5r5GUjYwsY9HCNsV3ZkccspnGsncozRjd6wg"]'
2026-02-04 17:12:09.572 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:09.573 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34433/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/22/sometopic/someencoding"]'
2026-02-04 17:12:09.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:09.576 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45740/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/22/sometopic/someencoding"]'
2026-02-04 17:12:09.578 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:09.579 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34433/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:12:09.583 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:09.583 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 17:12:09.684 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-04 17:12:09.684 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34433/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:09.687 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1770225129578988667,"ephemeral":false,"proof":""}]'
2026-02-04 17:12:09.689 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 17:12:09.689 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45740/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:09.692 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1770225129578988667,"ephemeral":false,"proof":""}]'
2026-02-04 17:12:09.694 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:12:09.695 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:12:09.695 DEBUG [src.node.waku_node] Stopping container with id 74769193fdd1
2026-02-04 17:12:10.238 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:12:10.239 DEBUG [src.node.waku_node] Stopping container with id d8ce4597a700
2026-02-04 17:12:10.762 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:12:10.765 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:12:10.769 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:12:10.775 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
