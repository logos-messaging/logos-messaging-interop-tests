2026-02-04 17:15:38.395 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:15:38.395 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_no_pubsub_topic with id: 2026-02-04_17-15-38__90a73e95-269d-446f-8673-d95a2b1931fc
2026-02-04 17:15:38.396 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:15:38.396 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-04 17:15:38.396 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-04 17:15:38.403 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:15:38.403 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_17-15-38__90a73e95-269d-446f-8673-d95a2b1931fc__wakuorg_nwaku:latest.log
2026-02-04 17:15:38.404 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:15:38.404 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:15:38.405 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:15:38.405 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.187.27
2026-02-04 17:15:38.405 DEBUG [src.node.docker_mananger] Generated ports ['49743', '49744', '49745', '49746', '49747']
2026-02-04 17:15:38.406 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:15:38.406 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:15:38.406 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:15:38.406 DEBUG [src.node.docker_mananger] docker run -i -t -p 49743:49743 -p 49744:49744 -p 49745:49745 -p 49746:49746 -p 49747:49747 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49745 --rest-port=49743 --tcp-port=49744 --discv5-udp-port=49746 --rest-address=0.0.0.0 --nat=extip:172.18.187.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2cfd8fac8becd890e03f4dcbd4a6f00aebd19d6cc8e8773c587f9ea28c2a1ed1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49747 --metrics-logging=true --relay=true --filter=true
2026-02-04 17:15:38.592 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.187.27 waku 6afa9086933f9c82d0f6ba97484197094963570e0e8e5ce6a29b991162182c87
2026-02-04 17:15:38.623 DEBUG [src.node.docker_mananger] Container started with ID 6afa9086933f. Setting up logs at ./log/docker/node1_2026-02-04_17-15-38__90a73e95-269d-446f-8673-d95a2b1931fc__wakuorg_nwaku:latest.log
2026-02-04 17:15:38.624 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49743
2026-02-04 17:15:38.625 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:15:38.680 ERROR [src.node.docker_mananger] Max retries reached for container 55b7eed2f6a2. Exiting log stream.
2026-02-04 17:15:39.193 ERROR [src.node.docker_mananger] Max retries reached for container 3e446a8b00fe. Exiting log stream.
2026-02-04 17:15:39.625 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49743/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:15:39.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:15:39.628 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:15:39.628 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49743/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:15:39.631 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.27/tcp/49744/p2p/16Uiu2HAmRwyfkBjyjBa5f512kMPGQFiwRnYACWjA1FP8VCsuh69d","/ip4/172.18.187.27/tcp/49745/ws/p2p/16Uiu2HAmRwyfkBjyjBa5f512kMPGQFiwRnYACWjA1FP8VCsuh69d"],"enrUri":"enr:-L24QIyq5zplDqeSuEA0v8hiUW-3gRO3tlnItV23s8yflp5zTgdVxN-LOyWfPrpJS9CmJKMEJa2frjcW6o0BQIRI4OkCgmlkgnY0gmlwhKwSuxuKbXVsdGlhZGRyc5YACASsErsbBsJQAAoErBK7GwbCUd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxYIIaurvkG17chAe345IcOOBh4a8ZpprwW_hJKDYsCiDdGNwgsJQg3VkcILCUoV3YWt1MgU"}'
2026-02-04 17:15:39.631 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:15:39.631 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-04 17:15:39.637 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:15:39.638 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_17-15-38__90a73e95-269d-446f-8673-d95a2b1931fc__wakuorg_nwaku:latest.log
2026-02-04 17:15:39.638 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:15:39.638 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:15:39.639 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:15:39.639 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.12.95
2026-02-04 17:15:39.640 DEBUG [src.node.docker_mananger] Generated ports ['34022', '34023', '34024', '34025', '34026']
2026-02-04 17:15:39.640 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:15:39.640 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:15:39.640 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:15:39.640 DEBUG [src.node.docker_mananger] docker run -i -t -p 34022:34022 -p 34023:34023 -p 34024:34024 -p 34025:34025 -p 34026:34026 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34024 --rest-port=34022 --tcp-port=34023 --discv5-udp-port=34025 --rest-address=0.0.0.0 --nat=extip:172.18.12.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b80ca7d22dac74395e5cbd4afcfddaa849df66b1ebdc64fdcdfff527b79998ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34026 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QIyq5zplDqeSuEA0v8hiUW-3gRO3tlnItV23s8yflp5zTgdVxN-LOyWfPrpJS9CmJKMEJa2frjcW6o0BQIRI4OkCgmlkgnY0gmlwhKwSuxuKbXVsdGlhZGRyc5YACASsErsbBsJQAAoErBK7GwbCUd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxYIIaurvkG17chAe345IcOOBh4a8ZpprwW_hJKDYsCiDdGNwgsJQg3VkcILCUoV3YWt1MgU --filternode=/ip4/172.18.187.27/tcp/49744/p2p/16Uiu2HAmRwyfkBjyjBa5f512kMPGQFiwRnYACWjA1FP8VCsuh69d
2026-02-04 17:15:39.822 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.12.95 waku 43839edb5f0dd9f5423cadc6b3f0b82e6f47ca742db826fa4d2ec5bcdc4daa1f
2026-02-04 17:15:39.849 DEBUG [src.node.docker_mananger] Container started with ID 43839edb5f0d. Setting up logs at ./log/docker/node2_2026-02-04_17-15-38__90a73e95-269d-446f-8673-d95a2b1931fc__wakuorg_nwaku:latest.log
2026-02-04 17:15:39.850 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34022
2026-02-04 17:15:39.851 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:15:40.851 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34022/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:15:40.855 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 17:15:40.855 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:15:40.856 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34022/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:15:40.858 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.95/tcp/34023/p2p/16Uiu2HAkwtJrF9zaMT2dGJR22EfHAeqErEjUXPk5oLsUnVSyNgWf","/ip4/172.18.12.95/tcp/34024/ws/p2p/16Uiu2HAkwtJrF9zaMT2dGJR22EfHAeqErEjUXPk5oLsUnVSyNgWf"],"enrUri":"enr:-L24QBv8E-Dm5MHKi0qSi4KO60VbS9XfjdweUdognVmzPabKVzEaKhuudRSABWCIDE6GtvIHXLZH5cH-GYt3a0ykcr4CgmlkgnY0gmlwhKwSDF-KbXVsdGlhZGRyc5YACASsEgxfBoTnAAoErBIMXwaE6N0DgnJzhQADAQAAiXNlY3AyNTZrMaECJIop7E3sBCjE7zNiy_-MHYl29DuSh5PDaTsi2C3zlxyDdGNwgoTng3VkcIKE6YV3YWt1MgA"}'
2026-02-04 17:15:40.858 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:15:40.858 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34022/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.27/tcp/49744/p2p/16Uiu2HAmRwyfkBjyjBa5f512kMPGQFiwRnYACWjA1FP8VCsuh69d"]'
2026-02-04 17:15:40.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:15:40.889 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-04 17:15:40.890 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49743/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 17:15:40.904 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:15:40.906 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34022/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "36001a66-b565-42b6-bf15-727485132ff9", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 17:15:40.917 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"36001a66-b565-42b6-bf15-727485132ff9","statusDesc":"OK"}'
2026-02-04 17:15:40.919 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:34022/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto"}'
2026-02-04 17:15:40.921 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:34022/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-04 17:15:40.924 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:15:40.925 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:15:40.925 DEBUG [src.node.waku_node] Stopping container with id 6afa9086933f
2026-02-04 17:15:41.420 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:15:41.420 DEBUG [src.node.waku_node] Stopping container with id 43839edb5f0d
2026-02-04 17:15:41.911 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:15:41.913 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:15:41.920 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:15:41.923 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
