2026-02-04 17:16:36.701 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:16:36.701 DEBUG [tests.conftest] Running test: test_store_with_empty_and_valid_hash with id: 2026-02-04_17-16-36__5216c95e-4f6a-4342-8b6e-2ecb8ab7069f
2026-02-04 17:16:36.702 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:16:36.702 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-04 17:16:36.702 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-04 17:16:36.709 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:16:36.709 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-04_17-16-36__5216c95e-4f6a-4342-8b6e-2ecb8ab7069f__wakuorg_nwaku:latest.log
2026-02-04 17:16:36.709 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:16:36.709 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:16:36.710 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:16:36.711 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.1.172
2026-02-04 17:16:36.711 DEBUG [src.node.docker_mananger] Generated ports ['29107', '29108', '29109', '29110', '29111']
2026-02-04 17:16:36.711 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:16:36.711 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:16:36.711 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:16:36.711 DEBUG [src.node.docker_mananger] docker run -i -t -p 29107:29107 -p 29108:29108 -p 29109:29109 -p 29110:29110 -p 29111:29111 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29109 --rest-port=29107 --tcp-port=29108 --discv5-udp-port=29110 --rest-address=0.0.0.0 --nat=extip:172.18.1.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=275abf08a24ecdad2270ed1cebc5c3f578d3f06a320dcf8e7dbffc8ca1c0b95f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29111 --metrics-logging=true --store=true --relay=true
2026-02-04 17:16:36.889 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.1.172 waku 69ec7007af3f3994259deadab3aedabca8360e2a4a6a0cba4e477a315a3ed016
2026-02-04 17:16:36.920 DEBUG [src.node.docker_mananger] Container started with ID 69ec7007af3f. Setting up logs at ./log/docker/publishing_node1_2026-02-04_17-16-36__5216c95e-4f6a-4342-8b6e-2ecb8ab7069f__wakuorg_nwaku:latest.log
2026-02-04 17:16:36.922 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29107
2026-02-04 17:16:36.923 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:16:36.951 ERROR [src.node.docker_mananger] Max retries reached for container 46f22e671399. Exiting log stream.
2026-02-04 17:16:37.505 ERROR [src.node.docker_mananger] Max retries reached for container 92296052ce8a. Exiting log stream.
2026-02-04 17:16:37.923 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29107/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:16:37.926 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:16:37.926 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:16:37.927 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29107/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:16:37.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.172/tcp/29108/p2p/16Uiu2HAkywAhizWocELzbSmWPTaUfK4WodQUmpwwsKNEanFC6KA5","/ip4/172.18.1.172/tcp/29109/ws/p2p/16Uiu2HAkywAhizWocELzbSmWPTaUfK4WodQUmpwwsKNEanFC6KA5"],"enrUri":"enr:-L24QKA6rD8erC4IKpZzfv9SPvAWZ4Gmk98E-yIGpedztpLvYk4s8A3RpOAk5-u3rmnjLZkDz99gPrgOJtw6030XgZECgmlkgnY0gmlwhKwSAayKbXVsdGlhZGRyc5YACASsEgGsBnG0AAoErBIBrAZxtd0DgnJzhQADAQAAiXNlY3AyNTZrMaECQv0RfR8GpgbHd5jAkOtRgbJOezpsbIeiKy4qoZq8So6DdGNwgnG0g3VkcIJxtoV3YWt1MgM"}'
2026-02-04 17:16:37.929 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:16:37.935 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:16:37.936 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-04_17-16-36__5216c95e-4f6a-4342-8b6e-2ecb8ab7069f__wakuorg_nwaku:latest.log
2026-02-04 17:16:37.936 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:16:37.936 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:16:37.937 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:16:37.937 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.124.148
2026-02-04 17:16:37.937 DEBUG [src.node.docker_mananger] Generated ports ['15481', '15482', '15483', '15484', '15485']
2026-02-04 17:16:37.938 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:16:37.938 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:16:37.938 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:16:37.938 DEBUG [src.node.docker_mananger] docker run -i -t -p 15481:15481 -p 15482:15482 -p 15483:15483 -p 15484:15484 -p 15485:15485 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15483 --rest-port=15481 --tcp-port=15482 --discv5-udp-port=15484 --rest-address=0.0.0.0 --nat=extip:172.18.124.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4c7f8bf9b4afd42661e3cccc8aecf3e4f4bbf8fabf946f075f0bcb34baed4bf1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15485 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKA6rD8erC4IKpZzfv9SPvAWZ4Gmk98E-yIGpedztpLvYk4s8A3RpOAk5-u3rmnjLZkDz99gPrgOJtw6030XgZECgmlkgnY0gmlwhKwSAayKbXVsdGlhZGRyc5YACASsEgGsBnG0AAoErBIBrAZxtd0DgnJzhQADAQAAiXNlY3AyNTZrMaECQv0RfR8GpgbHd5jAkOtRgbJOezpsbIeiKy4qoZq8So6DdGNwgnG0g3VkcIJxtoV3YWt1MgM --storenode=/ip4/172.18.1.172/tcp/29108/p2p/16Uiu2HAkywAhizWocELzbSmWPTaUfK4WodQUmpwwsKNEanFC6KA5 --store=true --relay=true
2026-02-04 17:16:38.123 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.124.148 waku ff55e075c7868418c7ebc865c42613b7619f8d6c408ecb9006cabbf63f80cf2a
2026-02-04 17:16:38.157 DEBUG [src.node.docker_mananger] Container started with ID ff55e075c786. Setting up logs at ./log/docker/store_node1_2026-02-04_17-16-36__5216c95e-4f6a-4342-8b6e-2ecb8ab7069f__wakuorg_nwaku:latest.log
2026-02-04 17:16:38.157 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15481
2026-02-04 17:16:38.158 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:16:39.159 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15481/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:16:39.163 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:16:39.164 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:16:39.164 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15481/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:16:39.166 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.148/tcp/15482/p2p/16Uiu2HAmGMxodpSNstFeEZ2AFRsvwgXqHHgpfbU7vGiKRs7MhwTE","/ip4/172.18.124.148/tcp/15483/ws/p2p/16Uiu2HAmGMxodpSNstFeEZ2AFRsvwgXqHHgpfbU7vGiKRs7MhwTE"],"enrUri":"enr:-L24QKbQM1uuH5vI1gXhLryRs99yVz5urgPVRjp1uFyd39sGfUaXsVEDg6kGKuG-ZORRus7DJJw0YTIIHW56ObTk8goCgmlkgnY0gmlwhKwSfJSKbXVsdGlhZGRyc5YACASsEnyUBjx6AAoErBJ8lAY8e90DgnJzhQADAQAAiXNlY3AyNTZrMaEDNxIgS2-C0f-DIDzBdtQR9QHPcjVb1_HaMuUwf-a1nUmDdGNwgjx6g3VkcII8fIV3YWt1MgM"}'
2026-02-04 17:16:39.166 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:16:39.167 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15481/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.1.172/tcp/29108/p2p/16Uiu2HAkywAhizWocELzbSmWPTaUfK4WodQUmpwwsKNEanFC6KA5"]'
2026-02-04 17:16:39.169 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:16:39.170 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29107/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 17:16:39.172 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:16:39.172 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15481/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 17:16:39.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:16:39.176 DEBUG [src.steps.store] Relaying message
2026-02-04 17:16:39.176 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29107/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:16:39.181 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:16:39.182 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 17:16:39.382 DEBUG [src.steps.store] Relaying message
2026-02-04 17:16:39.383 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29107/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:16:39.388 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:16:39.388 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 17:16:39.589 DEBUG [src.steps.store] Relaying message
2026-02-04 17:16:39.589 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29107/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:16:39.594 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:16:39.595 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 17:16:39.796 DEBUG [src.steps.store] Relaying message
2026-02-04 17:16:39.796 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29107/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:16:39.801 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:16:39.801 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 17:16:40.002 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29107/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x33b869a91b68b6ed68e678ea30b5851a774ded4686ddcc62fe8c009b6b1c7442%2C&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:16:40.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x33b869a91b68b6ed68e678ea30b5851a774ded4686ddcc62fe8c009b6b1c7442"}]}'
2026-02-04 17:16:40.006 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15481/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x33b869a91b68b6ed68e678ea30b5851a774ded4686ddcc62fe8c009b6b1c7442%2C&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:16:40.008 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x33b869a91b68b6ed68e678ea30b5851a774ded4686ddcc62fe8c009b6b1c7442"}]}'
2026-02-04 17:16:40.010 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:16:40.011 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:16:40.011 DEBUG [src.node.waku_node] Stopping container with id 69ec7007af3f
2026-02-04 17:16:40.566 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:16:40.566 DEBUG [src.node.waku_node] Stopping container with id ff55e075c786
2026-02-04 17:16:41.087 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:16:41.090 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:16:41.097 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:16:41.103 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
