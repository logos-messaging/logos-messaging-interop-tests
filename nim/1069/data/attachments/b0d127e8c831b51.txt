2026-02-04 17:12:05.862 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:12:05.863 DEBUG [tests.conftest] Running test: test_light_push_with_extra_field with id: 2026-02-04_17-12-05__149aae71-eb58-4975-bbbc-7d3cf16a80d6
2026-02-04 17:12:05.863 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:12:05.863 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-04 17:12:05.870 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:12:05.870 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-04_17-12-05__149aae71-eb58-4975-bbbc-7d3cf16a80d6__wakuorg_nwaku:latest.log
2026-02-04 17:12:05.870 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:12:05.871 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:12:05.872 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:12:05.872 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.183.134
2026-02-04 17:12:05.872 DEBUG [src.node.docker_mananger] Generated ports ['44664', '44665', '44666', '44667', '44668']
2026-02-04 17:12:05.872 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:12:05.872 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:12:05.872 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:12:05.873 DEBUG [src.node.docker_mananger] docker run -i -t -p 44664:44664 -p 44665:44665 -p 44666:44666 -p 44667:44667 -p 44668:44668 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44666 --rest-port=44664 --tcp-port=44665 --discv5-udp-port=44667 --rest-address=0.0.0.0 --nat=extip:172.18.183.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eeffb1dfa5e68ec22ef3bea2daf558198f1b53c4e806c09fd5cfdfbedbfed8a0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44668 --metrics-logging=true --lightpush=true --relay=true
2026-02-04 17:12:06.050 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.183.134 waku 80d4f6469f4d4d3de9f3a6242a1d5856fb2d39d702ad2c7551e99db1f4c63539
2026-02-04 17:12:06.081 DEBUG [src.node.docker_mananger] Container started with ID 80d4f6469f4d. Setting up logs at ./log/docker/receiving_node1_2026-02-04_17-12-05__149aae71-eb58-4975-bbbc-7d3cf16a80d6__wakuorg_nwaku:latest.log
2026-02-04 17:12:06.082 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44664
2026-02-04 17:12:06.083 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:12:06.103 ERROR [src.node.docker_mananger] Max retries reached for container 1d0bc2994562. Exiting log stream.
2026-02-04 17:12:06.657 ERROR [src.node.docker_mananger] Max retries reached for container 46cb273ba692. Exiting log stream.
2026-02-04 17:12:07.084 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44664/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:07.088 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:12:07.088 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:12:07.088 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44664/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:07.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.134/tcp/44665/p2p/16Uiu2HAkxbzgzrnKr7W1ALvzENRbBQHfyKqaggHCPecdk86yhii4","/ip4/172.18.183.134/tcp/44666/ws/p2p/16Uiu2HAkxbzgzrnKr7W1ALvzENRbBQHfyKqaggHCPecdk86yhii4"],"enrUri":"enr:-L24QHJC0R4wP1xUbX5QM_3H8UKR5iYJc-zV3VlowUbeNI8cc9f8vgspD2pYh4QWqYk0tSUjYX4CulQ655FkgT-37ksCgmlkgnY0gmlwhKwSt4aKbXVsdGlhZGRyc5YACASsEreGBq55AAoErBK3hgauet0DgnJzhQADAQAAiXNlY3AyNTZrMaECLzgGWobAfuG2E3Xxai7lIZIai71L50huS7I9oT10NzGDdGNwgq55g3VkcIKue4V3YWt1Mgk"}'
2026-02-04 17:12:07.090 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:12:07.097 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:12:07.097 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-04_17-12-05__149aae71-eb58-4975-bbbc-7d3cf16a80d6__wakuorg_nwaku:latest.log
2026-02-04 17:12:07.098 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:12:07.098 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:12:07.099 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:12:07.099 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.188.65
2026-02-04 17:12:07.099 DEBUG [src.node.docker_mananger] Generated ports ['13231', '13232', '13233', '13234', '13235']
2026-02-04 17:12:07.100 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:12:07.100 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:12:07.100 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:12:07.100 DEBUG [src.node.docker_mananger] docker run -i -t -p 13231:13231 -p 13232:13232 -p 13233:13233 -p 13234:13234 -p 13235:13235 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13233 --rest-port=13231 --tcp-port=13232 --discv5-udp-port=13234 --rest-address=0.0.0.0 --nat=extip:172.18.188.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aebc499f0fd3e9aac9c7fa4ceba059af805c5552db40e3a50438bcf2cccdcba8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13235 --metrics-logging=true --lightpush=false --relay=true
2026-02-04 17:12:07.292 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.188.65 waku 613b187b281d2a9c8ff174dd7c40354b38e3adf67d0ad49c18a200c7d15b8e0f
2026-02-04 17:12:07.323 DEBUG [src.node.docker_mananger] Container started with ID 613b187b281d. Setting up logs at ./log/docker/receiving_node2_2026-02-04_17-12-05__149aae71-eb58-4975-bbbc-7d3cf16a80d6__wakuorg_nwaku:latest.log
2026-02-04 17:12:07.324 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13231
2026-02-04 17:12:07.324 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:12:08.324 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13231/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:08.328 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:12:08.328 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:12:08.328 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13231/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:08.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.65/tcp/13232/p2p/16Uiu2HAm4ZwxLcfrkQneGMHoP6vp2ZLVQ9ioZuibJwVvkaF8xkEW","/ip4/172.18.188.65/tcp/13233/ws/p2p/16Uiu2HAm4ZwxLcfrkQneGMHoP6vp2ZLVQ9ioZuibJwVvkaF8xkEW"],"enrUri":"enr:-L24QOeXs-hWv3oZyurxH25nOY6rDVN1viFTuJ556Avb89mMFjdHAXcahmVVrm0lNVZkAsJeUk9AWFrl7k59DCrfT8cCgmlkgnY0gmlwhKwSvEGKbXVsdGlhZGRyc5YACASsErxBBjOwAAoErBK8QQYzsd0DgnJzhQADAQAAiXNlY3AyNTZrMaECh9fkRztuFLrCb7Vgho2UwrBEBLBmWw0XNChBhTJZ36ODdGNwgjOwg3VkcIIzsoV3YWt1MgE"}'
2026-02-04 17:12:08.331 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:12:08.331 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13231/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.183.134/tcp/44665/p2p/16Uiu2HAkxbzgzrnKr7W1ALvzENRbBQHfyKqaggHCPecdk86yhii4"]'
2026-02-04 17:12:08.361 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:08.378 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:12:08.379 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-04_17-12-05__149aae71-eb58-4975-bbbc-7d3cf16a80d6__wakuorg_nwaku:latest.log
2026-02-04 17:12:08.380 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:12:08.381 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:12:08.382 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:12:08.382 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.205.99
2026-02-04 17:12:08.382 DEBUG [src.node.docker_mananger] Generated ports ['20338', '20339', '20340', '20341', '20342']
2026-02-04 17:12:08.382 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:12:08.383 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:12:08.383 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:12:08.383 DEBUG [src.node.docker_mananger] docker run -i -t -p 20338:20338 -p 20339:20339 -p 20340:20340 -p 20341:20341 -p 20342:20342 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20340 --rest-port=20338 --tcp-port=20339 --discv5-udp-port=20341 --rest-address=0.0.0.0 --nat=extip:172.18.205.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fdaa80ce813db055c09e9340b6300fee6e7d0d28ffdbf8b3d715069ff1f5d9dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20342 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHJC0R4wP1xUbX5QM_3H8UKR5iYJc-zV3VlowUbeNI8cc9f8vgspD2pYh4QWqYk0tSUjYX4CulQ655FkgT-37ksCgmlkgnY0gmlwhKwSt4aKbXVsdGlhZGRyc5YACASsEreGBq55AAoErBK3hgauet0DgnJzhQADAQAAiXNlY3AyNTZrMaECLzgGWobAfuG2E3Xxai7lIZIai71L50huS7I9oT10NzGDdGNwgq55g3VkcIKue4V3YWt1Mgk --lightpushnode=/ip4/172.18.183.134/tcp/44665/p2p/16Uiu2HAkxbzgzrnKr7W1ALvzENRbBQHfyKqaggHCPecdk86yhii4 --lightpush=true --relay=true
2026-02-04 17:12:08.591 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.205.99 waku d9ebca5fd8ae4e69fb601b70fbfa2db8ce32a57a1963c59484b3282b17f79fe9
2026-02-04 17:12:08.622 DEBUG [src.node.docker_mananger] Container started with ID d9ebca5fd8ae. Setting up logs at ./log/docker/lightpush_node1_2026-02-04_17-12-05__149aae71-eb58-4975-bbbc-7d3cf16a80d6__wakuorg_nwaku:latest.log
2026-02-04 17:12:08.623 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20338
2026-02-04 17:12:08.623 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:12:09.624 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20338/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:09.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:12:09.628 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:12:09.629 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20338/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:12:09.631 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.99/tcp/20339/p2p/16Uiu2HAmGGvdCjH8vEPGoq21eW28TSEQeCGpnWt613mUbXCXrNmE","/ip4/172.18.205.99/tcp/20340/ws/p2p/16Uiu2HAmGGvdCjH8vEPGoq21eW28TSEQeCGpnWt613mUbXCXrNmE"],"enrUri":"enr:-L24QC5MJ06gBGg5biK6NjdtCOMEpc5BAzXLNbDm4_BH48JhIGQ3OOLmF3aPVD14DvpxQxAmack4hFlhdtZbe1q6hUECgmlkgnY0gmlwhKwSzWOKbXVsdGlhZGRyc5YACASsEs1jBk9zAAoErBLNYwZPdN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNcfB34HwYcZXUlCLYivFmAOY0VYsjAjyGsPGySXp4OGDdGNwgk9zg3VkcIJPdYV3YWt1Mgk"}'
2026-02-04 17:12:09.631 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:12:09.631 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20338/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.183.134/tcp/44665/p2p/16Uiu2HAkxbzgzrnKr7W1ALvzENRbBQHfyKqaggHCPecdk86yhii4"]'
2026-02-04 17:12:09.673 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:09.675 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20338/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.188.65/tcp/13232/p2p/16Uiu2HAm4ZwxLcfrkQneGMHoP6vp2ZLVQ9ioZuibJwVvkaF8xkEW"]'
2026-02-04 17:12:09.704 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:09.704 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44664/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 17:12:09.715 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:09.716 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13231/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 17:12:09.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:09.719 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20338/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 17:12:09.725 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:12:09.727 DEBUG [src.steps.light_push] Lightpushing message
2026-02-04 17:12:09.728 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20338/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770225129727248523, "extraField": "extraValue"}}'
2026-02-04 17:12:09.731 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20338/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-04 17:12:09.734 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:12:09.735 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:12:09.735 DEBUG [src.node.waku_node] Stopping container with id 80d4f6469f4d
2026-02-04 17:12:10.291 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:12:10.291 DEBUG [src.node.waku_node] Stopping container with id 613b187b281d
2026-02-04 17:12:10.829 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:12:10.830 DEBUG [src.node.waku_node] Stopping container with id d9ebca5fd8ae
2026-02-04 17:12:11.103 ERROR [src.node.docker_mananger] Max retries reached for container 80d4f6469f4d. Exiting log stream.
2026-02-04 17:12:11.380 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:12:11.381 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:12:11.390 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:12:11.404 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:12:11.411 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
