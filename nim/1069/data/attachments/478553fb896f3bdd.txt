2026-02-04 17:11:46.265 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:11:46.266 DEBUG [tests.conftest] Running test: test_store_with_duplicate_hashes with id: 2026-02-04_17-11-46__8cf4b618-12e0-4449-a29c-defedff93ac5
2026-02-04 17:11:46.266 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:11:46.267 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-04 17:11:46.267 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-04 17:11:46.275 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:11:46.276 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-04_17-11-46__8cf4b618-12e0-4449-a29c-defedff93ac5__wakuorg_nwaku:latest.log
2026-02-04 17:11:46.276 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:11:46.276 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:11:46.279 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:11:46.279 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.170.249
2026-02-04 17:11:46.280 DEBUG [src.node.docker_mananger] Generated ports ['46163', '46164', '46165', '46166', '46167']
2026-02-04 17:11:46.281 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:11:46.281 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:11:46.281 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:11:46.281 DEBUG [src.node.docker_mananger] docker run -i -t -p 46163:46163 -p 46164:46164 -p 46165:46165 -p 46166:46166 -p 46167:46167 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46165 --rest-port=46163 --tcp-port=46164 --discv5-udp-port=46166 --rest-address=0.0.0.0 --nat=extip:172.18.170.249 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ec1aafccba5b75a89188dd7dccebb41bbb2dde6cc91a8eb79ec9bdacec5395e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46167 --metrics-logging=true --store=true --relay=true
2026-02-04 17:11:46.475 ERROR [src.node.docker_mananger] Max retries reached for container 4c823758ef3c. Exiting log stream.
2026-02-04 17:11:46.476 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.170.249 waku 6530ba4827fe914d6cbf614f63a86afcdcc511f0abe664d3e493615dffd77afa
2026-02-04 17:11:46.507 DEBUG [src.node.docker_mananger] Container started with ID 6530ba4827fe. Setting up logs at ./log/docker/publishing_node1_2026-02-04_17-11-46__8cf4b618-12e0-4449-a29c-defedff93ac5__wakuorg_nwaku:latest.log
2026-02-04 17:11:46.507 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46163
2026-02-04 17:11:46.508 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:11:47.133 ERROR [src.node.docker_mananger] Max retries reached for container 2a75ace348e3. Exiting log stream.
2026-02-04 17:11:47.509 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46163/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:47.512 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:11:47.513 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:11:47.513 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46163/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:47.515 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.249/tcp/46164/p2p/16Uiu2HAm8T4oi3LrY64tZmmyJf2bBFVAATc15ZnBuziqt1J6YQHz","/ip4/172.18.170.249/tcp/46165/ws/p2p/16Uiu2HAm8T4oi3LrY64tZmmyJf2bBFVAATc15ZnBuziqt1J6YQHz"],"enrUri":"enr:-L24QMNcwstZ8lS6cVFnd_TKCdG5sCs1fRQlwWFOHTcxtW5cfjBoLsCn0bhBUym0u4JkYt3C5j3FwRW2j0f6kiGSzDgCgmlkgnY0gmlwhKwSqvmKbXVsdGlhZGRyc5YACASsEqr5BrRUAAoErBKq-Qa0Vd0DgnJzhQADAQAAiXNlY3AyNTZrMaECwYNSB3idLkFQ3g0u3_ewEMBAupzmmEnn0S7-DJp6g12DdGNwgrRUg3VkcIK0VoV3YWt1MgM"}'
2026-02-04 17:11:47.515 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:11:47.522 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:11:47.522 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-04_17-11-46__8cf4b618-12e0-4449-a29c-defedff93ac5__wakuorg_nwaku:latest.log
2026-02-04 17:11:47.522 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:11:47.522 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:11:47.524 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:11:47.524 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.172.47
2026-02-04 17:11:47.524 DEBUG [src.node.docker_mananger] Generated ports ['46598', '46599', '46600', '46601', '46602']
2026-02-04 17:11:47.524 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:11:47.524 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:11:47.525 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:11:47.525 DEBUG [src.node.docker_mananger] docker run -i -t -p 46598:46598 -p 46599:46599 -p 46600:46600 -p 46601:46601 -p 46602:46602 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46600 --rest-port=46598 --tcp-port=46599 --discv5-udp-port=46601 --rest-address=0.0.0.0 --nat=extip:172.18.172.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4321fba25dc33bc7fa04df8c81c53ba81e1f4fb114bffea2edbdbf808c4f1ed5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46602 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMNcwstZ8lS6cVFnd_TKCdG5sCs1fRQlwWFOHTcxtW5cfjBoLsCn0bhBUym0u4JkYt3C5j3FwRW2j0f6kiGSzDgCgmlkgnY0gmlwhKwSqvmKbXVsdGlhZGRyc5YACASsEqr5BrRUAAoErBKq-Qa0Vd0DgnJzhQADAQAAiXNlY3AyNTZrMaECwYNSB3idLkFQ3g0u3_ewEMBAupzmmEnn0S7-DJp6g12DdGNwgrRUg3VkcIK0VoV3YWt1MgM --storenode=/ip4/172.18.170.249/tcp/46164/p2p/16Uiu2HAm8T4oi3LrY64tZmmyJf2bBFVAATc15ZnBuziqt1J6YQHz --store=true --relay=true
2026-02-04 17:11:47.722 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.172.47 waku 31dee6a984114d239a0db2b734f306ec8efb5a4283b488e8c095e2ccead2b5b9
2026-02-04 17:11:47.752 DEBUG [src.node.docker_mananger] Container started with ID 31dee6a98411. Setting up logs at ./log/docker/store_node1_2026-02-04_17-11-46__8cf4b618-12e0-4449-a29c-defedff93ac5__wakuorg_nwaku:latest.log
2026-02-04 17:11:47.752 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46598
2026-02-04 17:11:47.752 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:11:48.754 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46598/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:48.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:11:48.758 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:11:48.758 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46598/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:48.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.47/tcp/46599/p2p/16Uiu2HAmJACV9ZGzGGwdG5cTCYHQrohCx1ud3ui41HQeLbA5z3QN","/ip4/172.18.172.47/tcp/46600/ws/p2p/16Uiu2HAmJACV9ZGzGGwdG5cTCYHQrohCx1ud3ui41HQeLbA5z3QN"],"enrUri":"enr:-L24QJhI-ZkQFhl5Upz2vQFN0lAYcAG-qGpwUH5ovEIurWLScPGs-OjX_aXz83hRW0YSu01p9WfmAEIZ8GGyTfnkl-ACgmlkgnY0gmlwhKwSrC-KbXVsdGlhZGRyc5YACASsEqwvBrYHAAoErBKsLwa2CN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUcX_7tZgKsyXiF9zJu_jNyl_4F52vIq0fvFb9gMPcFuDdGNwgrYHg3VkcIK2CYV3YWt1MgM"}'
2026-02-04 17:11:48.760 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:11:48.761 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46598/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.170.249/tcp/46164/p2p/16Uiu2HAm8T4oi3LrY64tZmmyJf2bBFVAATc15ZnBuziqt1J6YQHz"]'
2026-02-04 17:11:48.763 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:48.764 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46163/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 17:11:48.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:48.766 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46598/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 17:11:48.768 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:48.770 DEBUG [src.steps.store] Relaying message
2026-02-04 17:11:48.770 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46163/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:11:48.775 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:48.775 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 17:11:48.976 DEBUG [src.steps.store] Relaying message
2026-02-04 17:11:48.976 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46163/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:11:48.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:48.982 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 17:11:49.183 DEBUG [src.steps.store] Relaying message
2026-02-04 17:11:49.184 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46163/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:11:49.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:49.190 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 17:11:49.391 DEBUG [src.steps.store] Relaying message
2026-02-04 17:11:49.391 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46163/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:11:49.397 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:49.397 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 17:11:49.598 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46163/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x1c72dc46c402d5f26e446ac98ba41c0f11e958548a7cecab9de046085a98591e%2C0x1c72dc46c402d5f26e446ac98ba41c0f11e958548a7cecab9de046085a98591e&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:49.602 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1c72dc46c402d5f26e446ac98ba41c0f11e958548a7cecab9de046085a98591e"}]}'
2026-02-04 17:11:49.602 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46598/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x1c72dc46c402d5f26e446ac98ba41c0f11e958548a7cecab9de046085a98591e%2C0x1c72dc46c402d5f26e446ac98ba41c0f11e958548a7cecab9de046085a98591e&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:49.605 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1c72dc46c402d5f26e446ac98ba41c0f11e958548a7cecab9de046085a98591e"}]}'
2026-02-04 17:11:49.607 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:11:49.608 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:11:49.608 DEBUG [src.node.waku_node] Stopping container with id 6530ba4827fe
2026-02-04 17:11:50.142 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:11:50.142 DEBUG [src.node.waku_node] Stopping container with id 31dee6a98411
2026-02-04 17:11:50.676 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:11:50.677 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:11:50.685 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:11:50.691 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
