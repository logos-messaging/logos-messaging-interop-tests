2026-02-04 17:13:26.819 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:13:26.819 DEBUG [tests.conftest] Running test: test_publish_while_peer_is_paused with id: 2026-02-04_17-13-26__a083f681-055b-483d-9ec9-d4408563b048
2026-02-04 17:13:26.819 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:13:26.820 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 17:13:26.820 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-04 17:13:26.826 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:13:26.826 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_17-13-26__a083f681-055b-483d-9ec9-d4408563b048__wakuorg_nwaku:latest.log
2026-02-04 17:13:26.826 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:13:26.826 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:13:26.828 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:13:26.828 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.202
2026-02-04 17:13:26.828 DEBUG [src.node.docker_mananger] Generated ports ['45519', '45520', '45521', '45522', '45523']
2026-02-04 17:13:26.828 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:13:26.828 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:13:26.829 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:13:26.829 DEBUG [src.node.docker_mananger] docker run -i -t -p 45519:45519 -p 45520:45520 -p 45521:45521 -p 45522:45522 -p 45523:45523 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45521 --rest-port=45519 --tcp-port=45520 --discv5-udp-port=45522 --rest-address=0.0.0.0 --nat=extip:172.18.108.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c017fccb758bad948a129f4130a42cced53b8b806f2edf2c318ee0f1ebc59a99 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45523 --metrics-logging=true --relay=true
2026-02-04 17:13:27.017 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.202 waku 621788dcab5abb671805005e2b9f4a0b4987ee2a5482c26c00c0d89eb44d6d18
2026-02-04 17:13:27.047 DEBUG [src.node.docker_mananger] Container started with ID 621788dcab5a. Setting up logs at ./log/docker/node1_2026-02-04_17-13-26__a083f681-055b-483d-9ec9-d4408563b048__wakuorg_nwaku:latest.log
2026-02-04 17:13:27.049 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45519
2026-02-04 17:13:27.049 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:13:27.104 ERROR [src.node.docker_mananger] Max retries reached for container 4efd67ee05c8. Exiting log stream.
2026-02-04 17:13:27.617 ERROR [src.node.docker_mananger] Max retries reached for container a42b926f80d3. Exiting log stream.
2026-02-04 17:13:28.050 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45519/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:13:28.053 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:13:28.054 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:13:28.054 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45519/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:13:28.056 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.202/tcp/45520/p2p/16Uiu2HAkx3FgqdSp48YE93eMD3nR6iVKBVLuqpXXNpaNHo8mFunc","/ip4/172.18.108.202/tcp/45521/ws/p2p/16Uiu2HAkx3FgqdSp48YE93eMD3nR6iVKBVLuqpXXNpaNHo8mFunc"],"enrUri":"enr:-L24QJkBW-r_F4IfO9r7i1BNYpJTSipBxYd7VVsiAdRjL_EOAAjceCsbk4b126LVi_6el8Rs1Yuw3kT6Si5Rz7LuJlsCgmlkgnY0gmlwhKwSbMqKbXVsdGlhZGRyc5YACASsEmzKBrHQAAoErBJsygax0d0DgnJzhQADAQAAiXNlY3AyNTZrMaECJtTQyUPeI9NIGOh5RT6HfKr5MClGuLu6DVlGx4IG1HWDdGNwgrHQg3VkcIKx0oV3YWt1MgE"}'
2026-02-04 17:13:28.056 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:13:28.063 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:13:28.063 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_17-13-26__a083f681-055b-483d-9ec9-d4408563b048__wakuorg_nwaku:latest.log
2026-02-04 17:13:28.063 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:13:28.063 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:13:28.065 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:13:28.065 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.93
2026-02-04 17:13:28.065 DEBUG [src.node.docker_mananger] Generated ports ['64218', '64219', '64220', '64221', '64222']
2026-02-04 17:13:28.065 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:13:28.065 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:13:28.065 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:13:28.065 DEBUG [src.node.docker_mananger] docker run -i -t -p 64218:64218 -p 64219:64219 -p 64220:64220 -p 64221:64221 -p 64222:64222 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64220 --rest-port=64218 --tcp-port=64219 --discv5-udp-port=64221 --rest-address=0.0.0.0 --nat=extip:172.18.108.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cecb4756c46234e8ebfc7cd4d9d04edeca1dfc3edf6db2bee0344a7b8ebbbccd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64222 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJkBW-r_F4IfO9r7i1BNYpJTSipBxYd7VVsiAdRjL_EOAAjceCsbk4b126LVi_6el8Rs1Yuw3kT6Si5Rz7LuJlsCgmlkgnY0gmlwhKwSbMqKbXVsdGlhZGRyc5YACASsEmzKBrHQAAoErBJsygax0d0DgnJzhQADAQAAiXNlY3AyNTZrMaECJtTQyUPeI9NIGOh5RT6HfKr5MClGuLu6DVlGx4IG1HWDdGNwgrHQg3VkcIKx0oV3YWt1MgE
2026-02-04 17:13:28.271 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.93 waku 608b4421a748270dfd27ace9994a79d0b33b8cd03b8d4ec642bc4e26aab122c4
2026-02-04 17:13:28.305 DEBUG [src.node.docker_mananger] Container started with ID 608b4421a748. Setting up logs at ./log/docker/node2_2026-02-04_17-13-26__a083f681-055b-483d-9ec9-d4408563b048__wakuorg_nwaku:latest.log
2026-02-04 17:13:28.305 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64218
2026-02-04 17:13:28.306 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:13:29.306 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64218/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:13:29.320 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:13:29.323 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:13:29.323 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64218/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:13:29.329 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.93/tcp/64219/p2p/16Uiu2HAm2uVMqWqunm1xkBf3s5QqPm2mQktZSzEXMynThBZnRcn6","/ip4/172.18.108.93/tcp/64220/ws/p2p/16Uiu2HAm2uVMqWqunm1xkBf3s5QqPm2mQktZSzEXMynThBZnRcn6"],"enrUri":"enr:-L24QITZAh0NoQFPmJphXbswEU1y-VHdiCt7IAtyI-68mRg9KRTBy9YmPQq3rLcMaZUTzSNYpOjkmDhNQ3b9tGgupR4CgmlkgnY0gmlwhKwSbF2KbXVsdGlhZGRyc5YACASsEmxdBvrbAAoErBJsXQb63N0DgnJzhQADAQAAiXNlY3AyNTZrMaECbyIQKel6IVqvlWQFM8Y_VSJfsDGOms9f37XxqY8dGDODdGNwgvrbg3VkcIL63YV3YWt1MgE"}'
2026-02-04 17:13:29.329 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:13:29.329 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64218/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.108.202/tcp/45520/p2p/16Uiu2HAkx3FgqdSp48YE93eMD3nR6iVKBVLuqpXXNpaNHo8mFunc"]'
2026-02-04 17:13:29.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:13:29.333 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-04 17:13:29.333 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45519/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 17:13:29.336 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:13:29.336 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64218/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 17:13:29.342 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:13:29.343 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:13:29.348 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:13:29.348 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 17:13:29.449 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-04 17:13:29.449 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:13:29.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770225209343110656,"ephemeral":false,"proof":""}]'
2026-02-04 17:13:29.453 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 17:13:29.453 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64218/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:13:29.456 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770225209343110656,"ephemeral":false,"proof":""}]'
2026-02-04 17:13:29.457 INFO [src.steps.relay] WARM UP successful!!
2026-02-04 17:13:29.458 DEBUG [src.node.waku_node] Pausing container with id 608b4421a748
2026-02-04 17:13:29.468 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:13:29.472 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:13:29.473 DEBUG [src.node.waku_node] Unpause container with id 608b4421a748
2026-02-04 17:13:29.481 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64218/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:13:29.484 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770225209458276006,"ephemeral":false,"proof":""}]'
2026-02-04 17:13:29.487 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:13:29.488 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:13:29.488 DEBUG [src.node.waku_node] Stopping container with id 621788dcab5a
2026-02-04 17:13:30.041 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:13:30.042 DEBUG [src.node.waku_node] Stopping container with id 608b4421a748
2026-02-04 17:13:30.557 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:13:30.559 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:13:30.564 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:13:30.569 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
