2026-02-04 17:11:14.529 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 17:11:14.529 DEBUG [tests.conftest] Running test: test_relay_subscribe_to_single_pubsub_topic with id: 2026-02-04_17-11-14__8a4aeb4f-b9e3-4681-a90d-418675c3850f
2026-02-04 17:11:14.530 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 17:11:14.530 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 17:11:14.530 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-04 17:11:14.536 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:11:14.536 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_17-11-14__8a4aeb4f-b9e3-4681-a90d-418675c3850f__wakuorg_nwaku:latest.log
2026-02-04 17:11:14.536 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:11:14.536 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:11:14.538 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:11:14.538 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.211.246
2026-02-04 17:11:14.538 DEBUG [src.node.docker_mananger] Generated ports ['33448', '33449', '33450', '33451', '33452']
2026-02-04 17:11:14.538 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:11:14.538 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:11:14.538 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:11:14.539 DEBUG [src.node.docker_mananger] docker run -i -t -p 33448:33448 -p 33449:33449 -p 33450:33450 -p 33451:33451 -p 33452:33452 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33450 --rest-port=33448 --tcp-port=33449 --discv5-udp-port=33451 --rest-address=0.0.0.0 --nat=extip:172.18.211.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=969e206aa9d6ea2ce6f0efaa5e4a81e3afbe9621eaa9cd2feb7e7abbb8f5ec99 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33452 --metrics-logging=true --relay=true
2026-02-04 17:11:14.721 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.211.246 waku 5420b583fbd3482f2b9bbc62824e6654108e37c91beb2aaaeaf7e1f75c999fc0
2026-02-04 17:11:14.751 DEBUG [src.node.docker_mananger] Container started with ID 5420b583fbd3. Setting up logs at ./log/docker/node1_2026-02-04_17-11-14__8a4aeb4f-b9e3-4681-a90d-418675c3850f__wakuorg_nwaku:latest.log
2026-02-04 17:11:14.752 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33448
2026-02-04 17:11:14.753 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:11:14.794 ERROR [src.node.docker_mananger] Max retries reached for container 6f2fbdf5e56b. Exiting log stream.
2026-02-04 17:11:15.337 ERROR [src.node.docker_mananger] Max retries reached for container 72c1c7a64dbf. Exiting log stream.
2026-02-04 17:11:15.754 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33448/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:15.757 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:11:15.757 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:11:15.758 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33448/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:15.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.246/tcp/33449/p2p/16Uiu2HAm2dnorem4aE3NYdkHXkTuBEiH1ExpkH1ejN9QwCqgrYtH","/ip4/172.18.211.246/tcp/33450/ws/p2p/16Uiu2HAm2dnorem4aE3NYdkHXkTuBEiH1ExpkH1ejN9QwCqgrYtH"],"enrUri":"enr:-L24QMPdxZDktBeaiUaS1B-3DpGqhMIAGLzsqXfV4VrCywCZS2JZ2Qg9ESyeHsB_df7ZODNgCAOVkJhDVACa7YlwwkgCgmlkgnY0gmlwhKwS0_aKbXVsdGlhZGRyc5YACASsEtP2BoKpAAoErBLT9gaCqt0DgnJzhQADAQAAiXNlY3AyNTZrMaECaxx_2P0dwUF8frxu7E5IYGF2n6Z8njtKIw4NkpViptKDdGNwgoKpg3VkcIKCq4V3YWt1MgE"}'
2026-02-04 17:11:15.760 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:11:15.766 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 17:11:15.766 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_17-11-14__8a4aeb4f-b9e3-4681-a90d-418675c3850f__wakuorg_nwaku:latest.log
2026-02-04 17:11:15.766 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 17:11:15.766 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 17:11:15.768 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 17:11:15.768 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.232
2026-02-04 17:11:15.768 DEBUG [src.node.docker_mananger] Generated ports ['53223', '53224', '53225', '53226', '53227']
2026-02-04 17:11:15.768 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 17:11:15.768 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 17:11:15.768 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 17:11:15.768 DEBUG [src.node.docker_mananger] docker run -i -t -p 53223:53223 -p 53224:53224 -p 53225:53225 -p 53226:53226 -p 53227:53227 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53225 --rest-port=53223 --tcp-port=53224 --discv5-udp-port=53226 --rest-address=0.0.0.0 --nat=extip:172.18.234.232 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d4d56afdcfc7f6db51d23bd5f91ba9f5cb2bda82edd0be0a9dbef72c9baedf67 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53227 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMPdxZDktBeaiUaS1B-3DpGqhMIAGLzsqXfV4VrCywCZS2JZ2Qg9ESyeHsB_df7ZODNgCAOVkJhDVACa7YlwwkgCgmlkgnY0gmlwhKwS0_aKbXVsdGlhZGRyc5YACASsEtP2BoKpAAoErBLT9gaCqt0DgnJzhQADAQAAiXNlY3AyNTZrMaECaxx_2P0dwUF8frxu7E5IYGF2n6Z8njtKIw4NkpViptKDdGNwgoKpg3VkcIKCq4V3YWt1MgE
2026-02-04 17:11:15.950 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.232 waku d42380633317f0dd0c7d2e802d43e1ccd5af64f72f15b9e1ba41cc41f7577a1c
2026-02-04 17:11:15.985 DEBUG [src.node.docker_mananger] Container started with ID d42380633317. Setting up logs at ./log/docker/node2_2026-02-04_17-11-14__8a4aeb4f-b9e3-4681-a90d-418675c3850f__wakuorg_nwaku:latest.log
2026-02-04 17:11:15.985 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53223
2026-02-04 17:11:15.985 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 17:11:16.986 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53223/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:16.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 17:11:16.996 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 17:11:16.996 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53223/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:17.002 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.232/tcp/53224/p2p/16Uiu2HAkwNsWGXMPZh1CPgmxSgFsRNhi5DPBkmqhBr4R4MiHjSWu","/ip4/172.18.234.232/tcp/53225/ws/p2p/16Uiu2HAkwNsWGXMPZh1CPgmxSgFsRNhi5DPBkmqhBr4R4MiHjSWu"],"enrUri":"enr:-L24QEtuT0k0v1hLbAzroMrWx7P_uYtYjDHVYZXsGZ08FhEmbwtXo2QwsV2SznswTxwDRNq7lgBE-sEbPhwtPZaR6HwCgmlkgnY0gmlwhKwS6uiKbXVsdGlhZGRyc5YACASsEuroBs_oAAoErBLq6AbP6d0DgnJzhQADAQAAiXNlY3AyNTZrMaECHP-pzB0SynGhu1NOvmOZcZsOAocgcWVfkPDcjZ6ZN_qDdGNwgs_og3VkcILP6oV3YWt1MgE"}'
2026-02-04 17:11:17.002 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 17:11:17.003 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53223/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.211.246/tcp/33449/p2p/16Uiu2HAm2dnorem4aE3NYdkHXkTuBEiH1ExpkH1ejN9QwCqgrYtH"]'
2026-02-04 17:11:17.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:17.007 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33448/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 17:11:17.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:17.011 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53223/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 17:11:17.014 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:17.016 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33448/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 17:11:17.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 17:11:17.020 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 17:11:17.121 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-04 17:11:17.121 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33448/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:17.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770225077015867904,"ephemeral":false,"proof":""}]'
2026-02-04 17:11:17.126 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 17:11:17.126 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53223/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 17:11:17.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770225077015867904,"ephemeral":false,"proof":""}]'
2026-02-04 17:11:17.130 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 17:11:17.131 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 17:11:17.131 DEBUG [src.node.waku_node] Stopping container with id 5420b583fbd3
2026-02-04 17:11:17.660 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:11:17.660 DEBUG [src.node.waku_node] Stopping container with id d42380633317
2026-02-04 17:11:18.199 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 17:11:18.201 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 17:11:18.207 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 17:11:18.212 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
