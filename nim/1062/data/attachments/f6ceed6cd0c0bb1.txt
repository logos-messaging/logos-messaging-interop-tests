2026-01-30 04:36:29.827 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:36:29.827 DEBUG [tests.conftest] Running test: test_store_with_wrong_url_pubsub_topic with id: 2026-01-30_04-36-29__f17edb58-9250-4356-9952-5ab4552df488
2026-01-30 04:36:29.827 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:36:29.828 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-30 04:36:29.828 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-01-30 04:36:29.835 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:36:29.836 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-01-30_04-36-29__f17edb58-9250-4356-9952-5ab4552df488__wakuorg_nwaku:latest.log
2026-01-30 04:36:29.836 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:36:29.836 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:36:29.837 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:36:29.838 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.106
2026-01-30 04:36:29.838 DEBUG [src.node.docker_mananger] Generated ports ['26733', '26734', '26735', '26736', '26737']
2026-01-30 04:36:29.838 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:36:29.838 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:36:29.838 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:36:29.838 DEBUG [src.node.docker_mananger] docker run -i -t -p 26733:26733 -p 26734:26734 -p 26735:26735 -p 26736:26736 -p 26737:26737 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26735 --rest-port=26733 --tcp-port=26734 --discv5-udp-port=26736 --rest-address=0.0.0.0 --nat=extip:172.18.107.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f9d050a8957eeaeeb3ff605e3bba6b3339dabe3db63264b2c596469b0bfca7ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26737 --metrics-logging=true --store=true --relay=true
2026-01-30 04:36:30.014 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.106 waku b70d8cdabf05959e8654644015a1f73b284467ea9fd5049c0bc750ab93be46fc
2026-01-30 04:36:30.044 DEBUG [src.node.docker_mananger] Container started with ID b70d8cdabf05. Setting up logs at ./log/docker/publishing_node1_2026-01-30_04-36-29__f17edb58-9250-4356-9952-5ab4552df488__wakuorg_nwaku:latest.log
2026-01-30 04:36:30.045 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26733
2026-01-30 04:36:30.045 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:36:30.136 ERROR [src.node.docker_mananger] Max retries reached for container 73227595f32d. Exiting log stream.
2026-01-30 04:36:30.624 ERROR [src.node.docker_mananger] Max retries reached for container a24327761e41. Exiting log stream.
2026-01-30 04:36:31.046 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26733/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:31.049 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:36:31.049 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:36:31.049 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26733/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:31.052 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.106/tcp/26734/p2p/16Uiu2HAmAvu6fmf9Nnk3EquJioxUSL977kpPs5QnWByVqG4piMf7","/ip4/172.18.107.106/tcp/26735/ws/p2p/16Uiu2HAmAvu6fmf9Nnk3EquJioxUSL977kpPs5QnWByVqG4piMf7"],"enrUri":"enr:-L24QO14BtIxYzkE-g5wLTnVJLP4qdgaaAb8tYzRvr6THHrzLb2Y68X0d-CT9EpWeL6jc_0Xaz_iUO8orJhiXT1YSosCgmlkgnY0gmlwhKwSa2qKbXVsdGlhZGRyc5YACASsEmtqBmhuAAoErBJragZob90DgnJzhQADAQAAiXNlY3AyNTZrMaEC5lv7BSUMUuuyGd4yUCRWYLf7geHOfuWfcLtU_NS6KGqDdGNwgmhug3VkcIJocIV3YWt1MgM"}'
2026-01-30 04:36:31.052 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:36:31.060 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:36:31.060 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-01-30_04-36-29__f17edb58-9250-4356-9952-5ab4552df488__wakuorg_nwaku:latest.log
2026-01-30 04:36:31.060 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:36:31.060 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:36:31.062 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:36:31.062 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.75.166
2026-01-30 04:36:31.062 DEBUG [src.node.docker_mananger] Generated ports ['6293', '6294', '6295', '6296', '6297']
2026-01-30 04:36:31.062 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:36:31.062 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:36:31.062 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:36:31.062 DEBUG [src.node.docker_mananger] docker run -i -t -p 6293:6293 -p 6294:6294 -p 6295:6295 -p 6296:6296 -p 6297:6297 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6295 --rest-port=6293 --tcp-port=6294 --discv5-udp-port=6296 --rest-address=0.0.0.0 --nat=extip:172.18.75.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ece6bbc911ae194a2cfecf2b24db2acc56ccabd8b55c24be6cbf0f497fb0fd6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6297 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QO14BtIxYzkE-g5wLTnVJLP4qdgaaAb8tYzRvr6THHrzLb2Y68X0d-CT9EpWeL6jc_0Xaz_iUO8orJhiXT1YSosCgmlkgnY0gmlwhKwSa2qKbXVsdGlhZGRyc5YACASsEmtqBmhuAAoErBJragZob90DgnJzhQADAQAAiXNlY3AyNTZrMaEC5lv7BSUMUuuyGd4yUCRWYLf7geHOfuWfcLtU_NS6KGqDdGNwgmhug3VkcIJocIV3YWt1MgM --storenode=/ip4/172.18.107.106/tcp/26734/p2p/16Uiu2HAmAvu6fmf9Nnk3EquJioxUSL977kpPs5QnWByVqG4piMf7 --store=true --relay=true
2026-01-30 04:36:31.244 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.75.166 waku e279ae129f3fff4c91cbd2bf5a732f4760ae28b18119b2a74b3df53d7b54b954
2026-01-30 04:36:31.279 DEBUG [src.node.docker_mananger] Container started with ID e279ae129f3f. Setting up logs at ./log/docker/store_node1_2026-01-30_04-36-29__f17edb58-9250-4356-9952-5ab4552df488__wakuorg_nwaku:latest.log
2026-01-30 04:36:31.280 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6293
2026-01-30 04:36:31.280 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:36:32.281 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6293/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:32.285 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:36:32.286 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:36:32.286 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6293/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:32.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.166/tcp/6294/p2p/16Uiu2HAmD7Mtdy4g6BgG83bCgPkwHCR3ai3EKqLn3MXYWm5HxuNf","/ip4/172.18.75.166/tcp/6295/ws/p2p/16Uiu2HAmD7Mtdy4g6BgG83bCgPkwHCR3ai3EKqLn3MXYWm5HxuNf"],"enrUri":"enr:-L24QGQTyk0F66klf0d3yBU9au-NQcX12IBS5qhlaMNYk7ygf2LgHsY884_IdurqWkQmp2-xn_zWJfT8fw4NDET4F2cCgmlkgnY0gmlwhKwSS6aKbXVsdGlhZGRyc5YACASsEkumBhiWAAoErBJLpgYYl90DgnJzhQADAQAAiXNlY3AyNTZrMaEDBsF0-jsUGIkf70NFOVZCWnemE_voO9eQN1he2E2JlNCDdGNwghiWg3VkcIIYmIV3YWt1MgM"}'
2026-01-30 04:36:32.289 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:36:32.289 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6293/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.107.106/tcp/26734/p2p/16Uiu2HAmAvu6fmf9Nnk3EquJioxUSL977kpPs5QnWByVqG4piMf7"]'
2026-01-30 04:36:32.291 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:32.292 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26733/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-30 04:36:32.295 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:32.295 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6293/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-30 04:36:32.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:32.299 DEBUG [src.steps.store] Relaying message
2026-01-30 04:36:32.300 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26733/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:36:32.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:32.307 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:36:32.508 DEBUG [src.steps.store] Relaying message
2026-01-30 04:36:32.509 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26733/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:36:32.514 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:32.515 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:36:32.716 DEBUG [src.steps.store] Relaying message
2026-01-30 04:36:32.716 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26733/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:36:32.723 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:32.723 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:36:32.924 DEBUG [src.steps.store] Relaying message
2026-01-30 04:36:32.924 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26733/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:36:32.930 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:32.931 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:36:33.134 DEBUG [src.steps.store] Relaying message
2026-01-30 04:36:33.134 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26733/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:36:33.141 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:33.142 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:36:33.342 DEBUG [src.steps.store] Relaying message
2026-01-30 04:36:33.343 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26733/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:36:33.349 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:33.349 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:36:33.550 DEBUG [src.steps.store] Relaying message
2026-01-30 04:36:33.551 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26733/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:36:33.561 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:33.562 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:36:33.763 DEBUG [src.steps.store] Relaying message
2026-01-30 04:36:33.763 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26733/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:36:33.769 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:33.770 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:36:33.971 DEBUG [tests.store.test_topics] Trying to get stored msg with wrong url topic waku/2/rs/3/0
2026-01-30 04:36:33.971 DEBUG [src.steps.store] Relaying message
2026-01-30 04:36:33.971 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26733/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:36:33.976 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:33.977 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:36:34.178 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-01-30 04:36:34.179 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26733/store/v3/messages?pubsubTopic=waku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:34.181 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-01-30 04:36:34.182 DEBUG [src.steps.store] messages length is 0
2026-01-30 04:36:34.182 ERROR [tests.store.test_topics] Topic waku/2/rs/3/0 is wrong ''n: Peer wakuorg/nwaku:latest couldn't find any messages. Actual response: {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2026-01-30 04:36:34.185 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:36:34.186 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:36:34.186 DEBUG [src.node.waku_node] Stopping container with id b70d8cdabf05
2026-01-30 04:36:34.692 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:36:34.693 DEBUG [src.node.waku_node] Stopping container with id e279ae129f3f
2026-01-30 04:36:35.258 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:36:35.261 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:36:35.269 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:36:35.276 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
