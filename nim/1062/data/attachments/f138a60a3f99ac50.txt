2026-01-30 04:34:47.890 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:34:47.891 DEBUG [tests.conftest] Running test: test_store_with_long_string_pubsub_topic with id: 2026-01-30_04-34-47__c3306458-23d5-4886-8a27-ba02435e1ddf
2026-01-30 04:34:47.891 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:34:47.891 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-30 04:34:47.891 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-01-30 04:34:47.898 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:34:47.898 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-01-30_04-34-47__c3306458-23d5-4886-8a27-ba02435e1ddf__wakuorg_nwaku:latest.log
2026-01-30 04:34:47.898 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:34:47.899 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:34:47.900 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:34:47.900 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.164.243
2026-01-30 04:34:47.900 DEBUG [src.node.docker_mananger] Generated ports ['54976', '54977', '54978', '54979', '54980']
2026-01-30 04:34:47.900 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:34:47.901 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:34:47.901 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:34:47.901 DEBUG [src.node.docker_mananger] docker run -i -t -p 54976:54976 -p 54977:54977 -p 54978:54978 -p 54979:54979 -p 54980:54980 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54978 --rest-port=54976 --tcp-port=54977 --discv5-udp-port=54979 --rest-address=0.0.0.0 --nat=extip:172.18.164.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0dafdd04faee88479bb7eda9478f504c9e74c794ecca31c8be3bee969dd72fae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54980 --metrics-logging=true --store=true --relay=true
2026-01-30 04:34:48.091 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.164.243 waku 051d76fdc4e0e5ee5586127ba226bc1e407c4567685c8346c97cc84c8a2ce1b0
2026-01-30 04:34:48.123 DEBUG [src.node.docker_mananger] Container started with ID 051d76fdc4e0. Setting up logs at ./log/docker/publishing_node1_2026-01-30_04-34-47__c3306458-23d5-4886-8a27-ba02435e1ddf__wakuorg_nwaku:latest.log
2026-01-30 04:34:48.124 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54976
2026-01-30 04:34:48.125 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:34:48.160 ERROR [src.node.docker_mananger] Max retries reached for container 8bf025bbbcae. Exiting log stream.
2026-01-30 04:34:48.692 ERROR [src.node.docker_mananger] Max retries reached for container cd556c7e1a55. Exiting log stream.
2026-01-30 04:34:49.126 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54976/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:34:49.129 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:34:49.130 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:34:49.130 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54976/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:34:49.132 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.243/tcp/54977/p2p/16Uiu2HAmLbVpiNDwNbyzw5F2eJAsfkbCgmGfBSxqGm1hTUfge8JD","/ip4/172.18.164.243/tcp/54978/ws/p2p/16Uiu2HAmLbVpiNDwNbyzw5F2eJAsfkbCgmGfBSxqGm1hTUfge8JD"],"enrUri":"enr:-L24QI4e03VwlGBWR6EaPuH0VikWZwyOlZWqnY1V4aLCHNifNt684cyix7rZPZWHbffvVKzm7zEBvOEEyx9AsJLgvngCgmlkgnY0gmlwhKwSpPOKbXVsdGlhZGRyc5YACASsEqTzBtbBAAoErBKk8wbWwt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdfh_SSNzQ8Csb0tM5pVh2s9gJN8bMqH2kdMFFA-QhJqDdGNwgtbBg3VkcILWw4V3YWt1MgM"}'
2026-01-30 04:34:49.132 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:34:49.139 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:34:49.139 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-01-30_04-34-47__c3306458-23d5-4886-8a27-ba02435e1ddf__wakuorg_nwaku:latest.log
2026-01-30 04:34:49.140 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:34:49.140 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:34:49.141 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:34:49.141 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.244.201
2026-01-30 04:34:49.141 DEBUG [src.node.docker_mananger] Generated ports ['59817', '59818', '59819', '59820', '59821']
2026-01-30 04:34:49.142 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:34:49.142 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:34:49.142 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:34:49.142 DEBUG [src.node.docker_mananger] docker run -i -t -p 59817:59817 -p 59818:59818 -p 59819:59819 -p 59820:59820 -p 59821:59821 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59819 --rest-port=59817 --tcp-port=59818 --discv5-udp-port=59820 --rest-address=0.0.0.0 --nat=extip:172.18.244.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b95ca13afdb76ba1ecce6684af57b19abc3eb2c7fe96aafd28cd68948febebfe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59821 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QI4e03VwlGBWR6EaPuH0VikWZwyOlZWqnY1V4aLCHNifNt684cyix7rZPZWHbffvVKzm7zEBvOEEyx9AsJLgvngCgmlkgnY0gmlwhKwSpPOKbXVsdGlhZGRyc5YACASsEqTzBtbBAAoErBKk8wbWwt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdfh_SSNzQ8Csb0tM5pVh2s9gJN8bMqH2kdMFFA-QhJqDdGNwgtbBg3VkcILWw4V3YWt1MgM --storenode=/ip4/172.18.164.243/tcp/54977/p2p/16Uiu2HAmLbVpiNDwNbyzw5F2eJAsfkbCgmGfBSxqGm1hTUfge8JD --store=true --relay=true
2026-01-30 04:34:49.327 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.244.201 waku df704702e39df9543b2f6315e570180110967f56e1a11e524a2e9dbaf53b8efc
2026-01-30 04:34:49.359 DEBUG [src.node.docker_mananger] Container started with ID df704702e39d. Setting up logs at ./log/docker/store_node1_2026-01-30_04-34-47__c3306458-23d5-4886-8a27-ba02435e1ddf__wakuorg_nwaku:latest.log
2026-01-30 04:34:49.360 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59817
2026-01-30 04:34:49.360 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:34:50.360 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59817/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:34:50.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:34:50.365 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:34:50.365 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59817/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:34:50.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.201/tcp/59818/p2p/16Uiu2HAm3WCCniJjybiVKJ2mfJENnCy78CkC9mBDCRL9QfY6DSzK","/ip4/172.18.244.201/tcp/59819/ws/p2p/16Uiu2HAm3WCCniJjybiVKJ2mfJENnCy78CkC9mBDCRL9QfY6DSzK"],"enrUri":"enr:-L24QNxMFijot4ZvYQfwKj3kCWpDtgD-OR6nHiyOxd8xDswfOig0lz94am6f_0TquYGAwxUXVVA7tsTWT3D37JCzgekCgmlkgnY0gmlwhKwS9MmKbXVsdGlhZGRyc5YACASsEvTJBumqAAoErBL0yQbpq90DgnJzhQADAQAAiXNlY3AyNTZrMaECeAX-O8wiwXTQqjsSbzeC3cCc-qNKVsa3-vcmOhRCHBCDdGNwgumqg3VkcILprIV3YWt1MgM"}'
2026-01-30 04:34:50.368 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:34:50.368 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59817/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.164.243/tcp/54977/p2p/16Uiu2HAmLbVpiNDwNbyzw5F2eJAsfkbCgmGfBSxqGm1hTUfge8JD"]'
2026-01-30 04:34:50.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:50.371 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54976/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-30 04:34:50.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:50.374 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59817/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-30 04:34:50.376 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:50.377 DEBUG [src.steps.store] Relaying message
2026-01-30 04:34:50.377 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54976/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:34:50.382 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:50.382 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:34:50.583 DEBUG [src.steps.store] Relaying message
2026-01-30 04:34:50.583 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54976/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:34:50.588 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:50.589 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:34:50.790 DEBUG [src.steps.store] Relaying message
2026-01-30 04:34:50.790 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54976/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:34:50.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:50.796 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:34:50.997 DEBUG [src.steps.store] Relaying message
2026-01-30 04:34:50.997 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54976/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:34:51.003 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:51.003 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:34:51.204 DEBUG [src.steps.store] Relaying message
2026-01-30 04:34:51.204 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54976/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:34:51.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:51.210 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:34:51.411 DEBUG [src.steps.store] Relaying message
2026-01-30 04:34:51.412 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54976/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:34:51.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:51.417 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:34:51.618 DEBUG [src.steps.store] Relaying message
2026-01-30 04:34:51.618 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54976/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:34:51.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:51.623 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:34:51.824 DEBUG [src.steps.store] Relaying message
2026-01-30 04:34:51.825 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54976/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:34:51.830 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:51.830 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:34:52.155 DEBUG [tests.store.test_topics] Trying to get stored msg with url topic size million 
2026-01-30 04:34:52.155 DEBUG [src.steps.store] Relaying message
2026-01-30 04:34:52.155 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54976/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:34:52.161 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:34:52.161 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:34:52.364 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-01-30 04:34:52.585 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-01-30 04:34:57.543 ERROR [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-01-30 04:34:57.547 ERROR [tests.store.test_topics] store request with very long pubsub topic wasn't accepted 
2026-01-30 04:34:57.550 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:34:57.551 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:34:57.551 DEBUG [src.node.waku_node] Stopping container with id 051d76fdc4e0
2026-01-30 04:34:58.076 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:34:58.076 DEBUG [src.node.waku_node] Stopping container with id df704702e39d
2026-01-30 04:34:58.605 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:34:58.606 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:34:58.616 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:34:58.624 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
