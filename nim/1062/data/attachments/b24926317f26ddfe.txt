2026-01-30 04:33:16.974 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:33:16.974 DEBUG [tests.conftest] Running test: test_publish_on_not_subscribed_content_topic_works with id: 2026-01-30_04-33-16__f0a34a50-2ad1-43a4-ba60-c3a05add45e2
2026-01-30 04:33:16.974 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:33:16.975 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-30 04:33:16.975 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-01-30 04:33:16.982 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:33:16.982 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-30_04-33-16__f0a34a50-2ad1-43a4-ba60-c3a05add45e2__wakuorg_nwaku:latest.log
2026-01-30 04:33:16.982 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:33:16.982 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:33:16.984 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:33:16.984 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.232.102
2026-01-30 04:33:16.984 DEBUG [src.node.docker_mananger] Generated ports ['28751', '28752', '28753', '28754', '28755']
2026-01-30 04:33:16.984 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:33:16.984 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:33:16.985 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:33:16.985 DEBUG [src.node.docker_mananger] docker run -i -t -p 28751:28751 -p 28752:28752 -p 28753:28753 -p 28754:28754 -p 28755:28755 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28753 --rest-port=28751 --tcp-port=28752 --discv5-udp-port=28754 --rest-address=0.0.0.0 --nat=extip:172.18.232.102 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=5df284edbd9aaca5ffeae1ecfb9c6dadfece830c22f863dbc269db8eadee7ded --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28755 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-01-30 04:33:17.164 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.232.102 waku 8507d11c1ea4ea0878428f8275014c1685400b274878c4889fe14222c809218e
2026-01-30 04:33:17.195 DEBUG [src.node.docker_mananger] Container started with ID 8507d11c1ea4. Setting up logs at ./log/docker/node1_2026-01-30_04-33-16__f0a34a50-2ad1-43a4-ba60-c3a05add45e2__wakuorg_nwaku:latest.log
2026-01-30 04:33:17.195 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28751
2026-01-30 04:33:17.195 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:33:17.256 ERROR [src.node.docker_mananger] Max retries reached for container 4147ae0b4ceb. Exiting log stream.
2026-01-30 04:33:17.772 ERROR [src.node.docker_mananger] Max retries reached for container 94d35c794bd6. Exiting log stream.
2026-01-30 04:33:18.196 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28751/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:18.199 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:33:18.199 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:33:18.199 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28751/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:18.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.102/tcp/28752/p2p/16Uiu2HAm4gs5tKLFPHd5rbmG3jJupXkkbCntvS1JifVFxGnxqcfS","/ip4/172.18.232.102/tcp/28753/ws/p2p/16Uiu2HAm4gs5tKLFPHd5rbmG3jJupXkkbCntvS1JifVFxGnxqcfS"],"enrUri":"enr:-L24QFjzdKgM_8lWpEdDkN98nR8vB3Lv0zPOYfvY98ZsIvANCTX4b-WVTh2saTdjhkuXZ50yFhAYeh1Twm-gZ_JzBoQCgmlkgnY0gmlwhKwS6GaKbXVsdGlhZGRyc5YACASsEuhmBnBQAAoErBLoZgZwUd0DgnJzhQACAQAAiXNlY3AyNTZrMaECiZ1zczoLD_8Uh8OFgGCOYloEJW1uZYJl-vSqSI6u7PGDdGNwgnBQg3VkcIJwUoV3YWt1MgU"}'
2026-01-30 04:33:18.202 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:33:18.208 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:33:18.209 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-30_04-33-16__f0a34a50-2ad1-43a4-ba60-c3a05add45e2__wakuorg_nwaku:latest.log
2026-01-30 04:33:18.209 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:33:18.209 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:33:18.210 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:33:18.210 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.159.74
2026-01-30 04:33:18.210 DEBUG [src.node.docker_mananger] Generated ports ['44990', '44991', '44992', '44993', '44994']
2026-01-30 04:33:18.211 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:33:18.211 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:33:18.211 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:33:18.211 DEBUG [src.node.docker_mananger] docker run -i -t -p 44990:44990 -p 44991:44991 -p 44992:44992 -p 44993:44993 -p 44994:44994 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44992 --rest-port=44990 --tcp-port=44991 --discv5-udp-port=44993 --rest-address=0.0.0.0 --nat=extip:172.18.159.74 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=dcac0ea6e32a5fd69aa917cfeb6cd6f6f83f4152b40ba6224e871c1ae6a7e204 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44994 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QFjzdKgM_8lWpEdDkN98nR8vB3Lv0zPOYfvY98ZsIvANCTX4b-WVTh2saTdjhkuXZ50yFhAYeh1Twm-gZ_JzBoQCgmlkgnY0gmlwhKwS6GaKbXVsdGlhZGRyc5YACASsEuhmBnBQAAoErBLoZgZwUd0DgnJzhQACAQAAiXNlY3AyNTZrMaECiZ1zczoLD_8Uh8OFgGCOYloEJW1uZYJl-vSqSI6u7PGDdGNwgnBQg3VkcIJwUoV3YWt1MgU --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-01-30 04:33:18.397 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.159.74 waku a3e92f584521a66a5c63d5c5f75c60dce285e9d94594d8136e7f1432667ba845
2026-01-30 04:33:18.429 DEBUG [src.node.docker_mananger] Container started with ID a3e92f584521. Setting up logs at ./log/docker/node2_2026-01-30_04-33-16__f0a34a50-2ad1-43a4-ba60-c3a05add45e2__wakuorg_nwaku:latest.log
2026-01-30 04:33:18.429 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44990
2026-01-30 04:33:18.429 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:33:19.430 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44990/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:19.445 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-30 04:33:19.445 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:33:19.446 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44990/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:19.450 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.74/tcp/44991/p2p/16Uiu2HAmAGDbbQUVUpv1kBXKKQhGL3o56Th34NZ24ZLWb7S4tB1i","/ip4/172.18.159.74/tcp/44992/ws/p2p/16Uiu2HAmAGDbbQUVUpv1kBXKKQhGL3o56Th34NZ24ZLWb7S4tB1i"],"enrUri":"enr:-L24QJro50F-NtltQM5TCtjs07mTU7e7AB_m5_MucnBmqjAlPa3ViABmppcWQEkpV0ouqpVL-MSnjRBziC7NqcWDTX8CgmlkgnY0gmlwhKwSn0qKbXVsdGlhZGRyc5YACASsEp9KBq-_AAoErBKfSgavwN0DgnJzhQACAQAAiXNlY3AyNTZrMaEC3HM-2-QusABh3DhkFLexu5osXwtivWHP1-_UTngdOtmDdGNwgq-_g3VkcIKvwYV3YWt1MgE"}'
2026-01-30 04:33:19.451 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:33:19.451 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44990/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.232.102/tcp/28752/p2p/16Uiu2HAm4gs5tKLFPHd5rbmG3jJupXkkbCntvS1JifVFxGnxqcfS"]'
2026-01-30 04:33:19.454 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:19.455 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28751/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-01-30 04:33:19.457 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:19.458 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44990/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-01-30 04:33:19.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:19.460 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28751/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:33:19.463 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:19.463 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44990/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:33:19.466 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:19.467 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:33:19.468 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:33:19.468 DEBUG [src.node.waku_node] Stopping container with id 8507d11c1ea4
2026-01-30 04:33:19.992 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:33:19.993 DEBUG [src.node.waku_node] Stopping container with id a3e92f584521
2026-01-30 04:33:20.546 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:33:20.548 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:33:20.554 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:33:20.558 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
