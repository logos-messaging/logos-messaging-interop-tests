2026-01-30 04:33:56.312 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:33:56.313 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2026-01-30_04-33-56__7c7aa787-edc4-499f-905a-d6b5a2920626
2026-01-30 04:33:56.313 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:33:56.313 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-30 04:33:56.313 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-01-30 04:33:56.319 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:33:56.319 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-30_04-33-56__7c7aa787-edc4-499f-905a-d6b5a2920626__wakuorg_nwaku:latest.log
2026-01-30 04:33:56.320 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:33:56.320 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:33:56.321 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:33:56.321 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.47
2026-01-30 04:33:56.321 DEBUG [src.node.docker_mananger] Generated ports ['22440', '22441', '22442', '22443', '22444']
2026-01-30 04:33:56.321 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:33:56.321 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:33:56.322 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:33:56.322 DEBUG [src.node.docker_mananger] docker run -i -t -p 22440:22440 -p 22441:22441 -p 22442:22442 -p 22443:22443 -p 22444:22444 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22442 --rest-port=22440 --tcp-port=22441 --discv5-udp-port=22443 --rest-address=0.0.0.0 --nat=extip:172.18.121.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2cfcc43b0631bed91cd5c2240ecdc808d43fad5abc55d0b93add155bf513d80c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22444 --metrics-logging=true --relay=true --filter=true
2026-01-30 04:33:56.499 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.47 waku 432bd250ee186b541a9dd6bd526ea76c18c860bf2abe2f2b0152e8d96c5997fe
2026-01-30 04:33:56.533 DEBUG [src.node.docker_mananger] Container started with ID 432bd250ee18. Setting up logs at ./log/docker/node1_2026-01-30_04-33-56__7c7aa787-edc4-499f-905a-d6b5a2920626__wakuorg_nwaku:latest.log
2026-01-30 04:33:56.534 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22440
2026-01-30 04:33:56.534 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:33:56.592 ERROR [src.node.docker_mananger] Max retries reached for container 153167b6e977. Exiting log stream.
2026-01-30 04:33:57.123 ERROR [src.node.docker_mananger] Max retries reached for container 5484b742bfd2. Exiting log stream.
2026-01-30 04:33:57.534 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22440/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:57.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:33:57.538 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:33:57.538 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22440/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:57.540 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.47/tcp/22441/p2p/16Uiu2HAmMLj3AfcmgoAJhMc3R6wHLQcGdbufG9Deu3vqVwzhHHvr","/ip4/172.18.121.47/tcp/22442/ws/p2p/16Uiu2HAmMLj3AfcmgoAJhMc3R6wHLQcGdbufG9Deu3vqVwzhHHvr"],"enrUri":"enr:-L24QM9ag20KNRt7LFIVFju7otsy-D6XZJZ8KBXu0Vx68_ilKXOv6_F3Mb8wZOZuOnfpMTdESlPiNgpvN9Q1HFAUGOYCgmlkgnY0gmlwhKwSeS-KbXVsdGlhZGRyc5YACASsEnkvBlepAAoErBJ5LwZXqt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgQtp9wP3bv3Gqb8e_t3iYV1MAyHQijFnRvJcLabmXZODdGNwglepg3VkcIJXq4V3YWt1MgU"}'
2026-01-30 04:33:57.540 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:33:57.541 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-01-30 04:33:57.547 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:33:57.547 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-30_04-33-56__7c7aa787-edc4-499f-905a-d6b5a2920626__wakuorg_nwaku:latest.log
2026-01-30 04:33:57.548 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:33:57.548 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:33:57.549 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:33:57.549 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.217.109
2026-01-30 04:33:57.549 DEBUG [src.node.docker_mananger] Generated ports ['50078', '50079', '50080', '50081', '50082']
2026-01-30 04:33:57.550 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:33:57.550 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:33:57.550 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:33:57.550 DEBUG [src.node.docker_mananger] docker run -i -t -p 50078:50078 -p 50079:50079 -p 50080:50080 -p 50081:50081 -p 50082:50082 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50080 --rest-port=50078 --tcp-port=50079 --discv5-udp-port=50081 --rest-address=0.0.0.0 --nat=extip:172.18.217.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=34ed8e3bc2c6fcf7c4f1aaf2c0adca4b5a7ddc4e8fbddcdfaa1dde206bdcfd42 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50082 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QM9ag20KNRt7LFIVFju7otsy-D6XZJZ8KBXu0Vx68_ilKXOv6_F3Mb8wZOZuOnfpMTdESlPiNgpvN9Q1HFAUGOYCgmlkgnY0gmlwhKwSeS-KbXVsdGlhZGRyc5YACASsEnkvBlepAAoErBJ5LwZXqt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgQtp9wP3bv3Gqb8e_t3iYV1MAyHQijFnRvJcLabmXZODdGNwglepg3VkcIJXq4V3YWt1MgU --filternode=/ip4/172.18.121.47/tcp/22441/p2p/16Uiu2HAmMLj3AfcmgoAJhMc3R6wHLQcGdbufG9Deu3vqVwzhHHvr
2026-01-30 04:33:57.731 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.217.109 waku 5af179c9e9859a9dd1a165402fb5379f117c1b8b5eee4ff3462e9d99a0abb329
2026-01-30 04:33:57.761 DEBUG [src.node.docker_mananger] Container started with ID 5af179c9e985. Setting up logs at ./log/docker/node2_2026-01-30_04-33-56__7c7aa787-edc4-499f-905a-d6b5a2920626__wakuorg_nwaku:latest.log
2026-01-30 04:33:57.761 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50078
2026-01-30 04:33:57.762 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:33:58.762 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50078/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:58.765 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-30 04:33:58.766 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:33:58.766 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50078/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:58.768 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.109/tcp/50079/p2p/16Uiu2HAm6KQgSjh3L7BcVUrRbBo7FdfkfzcUKtRrmYDMcQRej3fL","/ip4/172.18.217.109/tcp/50080/ws/p2p/16Uiu2HAm6KQgSjh3L7BcVUrRbBo7FdfkfzcUKtRrmYDMcQRej3fL"],"enrUri":"enr:-L24QOtKqOCXtPaymW2TEnD9ypkUkNKHunW71idZIvbt3aB_cA0Pmo4I3OCG2Pc5wsgLXXCnysh1bd9XyYoMuzZLGhgCgmlkgnY0gmlwhKwS2W2KbXVsdGlhZGRyc5YACASsEtltBsOfAAoErBLZbQbDoN0DgnJzhQADAQAAiXNlY3AyNTZrMaECodXFxtGfF8FL2a1fzhkWM9pE9zopAfQ1h_3dMemrzxeDdGNwgsOfg3VkcILDoYV3YWt1MgA"}'
2026-01-30 04:33:58.768 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:33:58.768 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.121.47/tcp/22441/p2p/16Uiu2HAmMLj3AfcmgoAJhMc3R6wHLQcGdbufG9Deu3vqVwzhHHvr"]'
2026-01-30 04:33:58.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:58.801 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/1
2026-01-30 04:33:58.802 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22440/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-30 04:33:58.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:58.815 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50078/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "330a2d9d-f28e-46d7-adfa-d3254d5b6585", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-30 04:33:58.826 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"330a2d9d-f28e-46d7-adfa-d3254d5b6585","statusDesc":"OK"}'
2026-01-30 04:33:58.826 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22440/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:33:58.833 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:58.833 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-30 04:33:58.933 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-30 04:33:58.934 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50078/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:58.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1769747638826797353,"ephemeral":false}]'
2026-01-30 04:33:58.939 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/2/2
2026-01-30 04:33:58.940 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22440/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2026-01-30 04:33:58.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:58.943 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50078/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "bc8451fb-fef7-426c-951c-7848b9c3cbf1", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
2026-01-30 04:33:58.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"bc8451fb-fef7-426c-951c-7848b9c3cbf1","statusDesc":"OK"}'
2026-01-30 04:33:58.952 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22440/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:33:58.956 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:58.956 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-30 04:33:59.057 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-30 04:33:59.057 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50078/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:59.060 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1769747638952311819,"ephemeral":false}]'
2026-01-30 04:33:59.061 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/9
2026-01-30 04:33:59.062 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22440/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
2026-01-30 04:33:59.064 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:59.065 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50078/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "03e89bbe-95cd-419c-acec-8b350ecd5958", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
2026-01-30 04:33:59.074 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"03e89bbe-95cd-419c-acec-8b350ecd5958","statusDesc":"OK"}'
2026-01-30 04:33:59.074 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22440/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:33:59.078 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:59.079 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-30 04:33:59.179 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-30 04:33:59.179 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50078/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:59.182 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1769747639074383437,"ephemeral":false}]'
2026-01-30 04:33:59.185 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:33:59.186 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:33:59.186 DEBUG [src.node.waku_node] Stopping container with id 432bd250ee18
2026-01-30 04:33:59.714 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:33:59.714 DEBUG [src.node.waku_node] Stopping container with id 5af179c9e985
2026-01-30 04:34:00.275 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:34:00.277 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:34:00.283 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:34:00.288 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
