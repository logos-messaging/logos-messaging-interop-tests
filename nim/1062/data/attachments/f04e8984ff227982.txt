2026-01-30 04:37:27.677 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:37:27.678 DEBUG [tests.conftest] Running test: test_filter_get_message_with_extra_field with id: 2026-01-30_04-37-27__12fd9ae7-45a8-4389-8062-cca4c762bf31
2026-01-30 04:37:27.678 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:37:27.678 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-30 04:37:27.678 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-01-30 04:37:27.685 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:37:27.685 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-30_04-37-27__12fd9ae7-45a8-4389-8062-cca4c762bf31__wakuorg_nwaku:latest.log
2026-01-30 04:37:27.685 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:37:27.685 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:37:27.687 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:37:27.687 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.251.233
2026-01-30 04:37:27.687 DEBUG [src.node.docker_mananger] Generated ports ['57164', '57165', '57166', '57167', '57168']
2026-01-30 04:37:27.687 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:37:27.687 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:37:27.687 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:37:27.687 DEBUG [src.node.docker_mananger] docker run -i -t -p 57164:57164 -p 57165:57165 -p 57166:57166 -p 57167:57167 -p 57168:57168 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57166 --rest-port=57164 --tcp-port=57165 --discv5-udp-port=57167 --rest-address=0.0.0.0 --nat=extip:172.18.251.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0e7b2c4fbb11dccfbdfaf6102a18d0aea7dd1d97cdcb84edf638bddde3feedf6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57168 --metrics-logging=true --relay=true --filter=true
2026-01-30 04:37:27.867 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.251.233 waku a362908f850e39a3799bbbfb338cdae0d254e375ac0a296740ac3720c1eb4026
2026-01-30 04:37:27.878 ERROR [src.node.docker_mananger] Max retries reached for container fafaec5ea16b. Exiting log stream.
2026-01-30 04:37:27.900 DEBUG [src.node.docker_mananger] Container started with ID a362908f850e. Setting up logs at ./log/docker/node1_2026-01-30_04-37-27__12fd9ae7-45a8-4389-8062-cca4c762bf31__wakuorg_nwaku:latest.log
2026-01-30 04:37:27.901 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57164
2026-01-30 04:37:27.902 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:37:28.284 ERROR [src.node.docker_mananger] Max retries reached for container 68664f8f9644. Exiting log stream.
2026-01-30 04:37:28.903 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57164/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:28.907 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:37:28.907 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:37:28.907 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57164/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:28.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.233/tcp/57165/p2p/16Uiu2HAmK8ShcQZ2shUKSicuYuzQXpewX7RYumRpHt2pauZsKACM","/ip4/172.18.251.233/tcp/57166/ws/p2p/16Uiu2HAmK8ShcQZ2shUKSicuYuzQXpewX7RYumRpHt2pauZsKACM"],"enrUri":"enr:-L24QETFza3qwH5YuxKdRx8CjkKm7hTCRJrkRlmCRwckdIHLJiKx6i4gdWa3BbGvjapM12SgmvhRiT6WRgYj9l2VBP4CgmlkgnY0gmlwhKwS--mKbXVsdGlhZGRyc5YACASsEvvpBt9NAAoErBL76QbfTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYC6ZDVxbhwJtBB67XGhoVQYURR_ubTkOjjdNw1jrdUaDdGNwgt9Ng3VkcILfT4V3YWt1MgU"}'
2026-01-30 04:37:28.909 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:37:28.910 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-01-30 04:37:28.916 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:37:28.916 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-30_04-37-27__12fd9ae7-45a8-4389-8062-cca4c762bf31__wakuorg_nwaku:latest.log
2026-01-30 04:37:28.916 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:37:28.916 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:37:28.917 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:37:28.918 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.57.61
2026-01-30 04:37:28.918 DEBUG [src.node.docker_mananger] Generated ports ['52788', '52789', '52790', '52791', '52792']
2026-01-30 04:37:28.918 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:37:28.918 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:37:28.918 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:37:28.918 DEBUG [src.node.docker_mananger] docker run -i -t -p 52788:52788 -p 52789:52789 -p 52790:52790 -p 52791:52791 -p 52792:52792 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52790 --rest-port=52788 --tcp-port=52789 --discv5-udp-port=52791 --rest-address=0.0.0.0 --nat=extip:172.18.57.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba4646bdad6926aeaea3fed3b57100023070dc16baa68a13bcc9a296156eb00f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52792 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QETFza3qwH5YuxKdRx8CjkKm7hTCRJrkRlmCRwckdIHLJiKx6i4gdWa3BbGvjapM12SgmvhRiT6WRgYj9l2VBP4CgmlkgnY0gmlwhKwS--mKbXVsdGlhZGRyc5YACASsEvvpBt9NAAoErBL76QbfTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYC6ZDVxbhwJtBB67XGhoVQYURR_ubTkOjjdNw1jrdUaDdGNwgt9Ng3VkcILfT4V3YWt1MgU --filternode=/ip4/172.18.251.233/tcp/57165/p2p/16Uiu2HAmK8ShcQZ2shUKSicuYuzQXpewX7RYumRpHt2pauZsKACM
2026-01-30 04:37:29.093 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.57.61 waku 8b73506d7baf6de52c49c4ccc502dc8f6d9ec2a66484663e7b8975c6ed45f525
2026-01-30 04:37:29.123 DEBUG [src.node.docker_mananger] Container started with ID 8b73506d7baf. Setting up logs at ./log/docker/node2_2026-01-30_04-37-27__12fd9ae7-45a8-4389-8062-cca4c762bf31__wakuorg_nwaku:latest.log
2026-01-30 04:37:29.123 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52788
2026-01-30 04:37:29.123 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:37:30.124 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52788/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:30.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-30 04:37:30.128 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:37:30.128 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52788/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:30.131 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.61/tcp/52789/p2p/16Uiu2HAmDXPMnYPe2UqHXZSBj5uE6NpbAMKjTpJkA5cWreCsa916","/ip4/172.18.57.61/tcp/52790/ws/p2p/16Uiu2HAmDXPMnYPe2UqHXZSBj5uE6NpbAMKjTpJkA5cWreCsa916"],"enrUri":"enr:-L24QM-QcZ_4agqquhrCIFBV967K3dzMm7HUOggpSqqI5hY0BVfq6RDaOv2Cv1oTFvPwk8JzLsp50FsKaNrWMc7UdiUCgmlkgnY0gmlwhKwSOT2KbXVsdGlhZGRyc5YACASsEjk9Bs41AAoErBI5PQbONt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDOkOaj_EKfpxBCTuG-Dve5qxjT_vtYM-4BrURBcr4A2DdGNwgs41g3VkcILON4V3YWt1MgA"}'
2026-01-30 04:37:30.131 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:37:30.131 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52788/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.233/tcp/57165/p2p/16Uiu2HAmK8ShcQZ2shUKSicuYuzQXpewX7RYumRpHt2pauZsKACM"]'
2026-01-30 04:37:30.161 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:37:30.162 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-01-30 04:37:30.163 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57164/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-30 04:37:30.176 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:37:30.177 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52788/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a91ebc09-3773-40a8-84ff-81c85883ec8c", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-30 04:37:30.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"a91ebc09-3773-40a8-84ff-81c85883ec8c","statusDesc":"OK"}'
2026-01-30 04:37:30.190 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57164/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
2026-01-30 04:37:30.193 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:57164/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-30 04:37:30.196 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:37:30.196 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:37:30.197 DEBUG [src.node.waku_node] Stopping container with id a362908f850e
2026-01-30 04:37:30.715 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:37:30.717 DEBUG [src.node.waku_node] Stopping container with id 8b73506d7baf
2026-01-30 04:37:31.212 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:37:31.215 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:37:31.220 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:37:31.224 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
