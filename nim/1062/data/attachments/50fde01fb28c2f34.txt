2026-01-30 04:32:55.347 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:32:55.347 DEBUG [tests.conftest] Running test: test_main_node_relay_lightpush__peer_only_filter with id: 2026-01-30_04-32-55__da376aa0-9c6d-4fca-bc00-f2685a9ce6af
2026-01-30 04:32:55.348 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:32:55.348 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-01-30 04:32:55.355 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:32:55.355 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-01-30_04-32-55__da376aa0-9c6d-4fca-bc00-f2685a9ce6af__wakuorg_nwaku:latest.log
2026-01-30 04:32:55.355 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:32:55.356 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:32:55.357 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:32:55.357 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.15
2026-01-30 04:32:55.357 DEBUG [src.node.docker_mananger] Generated ports ['18054', '18055', '18056', '18057', '18058']
2026-01-30 04:32:55.358 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:32:55.358 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:32:55.358 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:32:55.358 DEBUG [src.node.docker_mananger] docker run -i -t -p 18054:18054 -p 18055:18055 -p 18056:18056 -p 18057:18057 -p 18058:18058 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18056 --rest-port=18054 --tcp-port=18055 --discv5-udp-port=18057 --rest-address=0.0.0.0 --nat=extip:172.18.64.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f3beb1bce89ab1f6fec5d81acf627cfe657cc86d4caaa6fef11884b2ce7fedda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18058 --metrics-logging=true --lightpush=false --relay=false --filter=true
2026-01-30 04:32:55.556 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.15 waku a88fd56e09fd12d8d42eab2c93459087a925d348da370879e056135cfa3fef99
2026-01-30 04:32:55.590 DEBUG [src.node.docker_mananger] Container started with ID a88fd56e09fd. Setting up logs at ./log/docker/receiving_node1_2026-01-30_04-32-55__da376aa0-9c6d-4fca-bc00-f2685a9ce6af__wakuorg_nwaku:latest.log
2026-01-30 04:32:55.591 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18054
2026-01-30 04:32:55.592 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:32:55.610 ERROR [src.node.docker_mananger] Max retries reached for container 8bd79a4b3173. Exiting log stream.
2026-01-30 04:32:56.105 ERROR [src.node.docker_mananger] Max retries reached for container 33a1d1d8d8cb. Exiting log stream.
2026-01-30 04:32:56.592 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18054/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:32:56.595 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:32:56.596 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:32:56.596 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18054/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:32:56.598 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.15/tcp/18055/p2p/16Uiu2HAm1F4NVx5dyYWrTQXSRq6yMLxogPSiB4o8ZEYUACaW9k8F","/ip4/172.18.64.15/tcp/18056/ws/p2p/16Uiu2HAm1F4NVx5dyYWrTQXSRq6yMLxogPSiB4o8ZEYUACaW9k8F"],"enrUri":"enr:-L24QFI1I3Xet6xdXDd6xQ6zsZ1PG9kTyklddmwdUKKiEquUAqHJYVGoEdisbzHwaC2ysBHPtTxDbM9_MqHn-zpg3MwCgmlkgnY0gmlwhKwSQA-KbXVsdGlhZGRyc5YACASsEkAPBkaHAAoErBJADwZGiN0DgnJzhQADAQAAiXNlY3AyNTZrMaECVm4NAQe2jWO2YwB31ZshmCUOkaKb63OQwOSf-ofyNKCDdGNwgkaHg3VkcIJGiYV3YWt1MgQ"}'
2026-01-30 04:32:56.598 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:32:56.605 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:32:56.605 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-01-30_04-32-55__da376aa0-9c6d-4fca-bc00-f2685a9ce6af__wakuorg_nwaku:latest.log
2026-01-30 04:32:56.606 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:32:56.606 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:32:56.607 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:32:56.607 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.155.244
2026-01-30 04:32:56.607 DEBUG [src.node.docker_mananger] Generated ports ['46761', '46762', '46763', '46764', '46765']
2026-01-30 04:32:56.608 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:32:56.608 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:32:56.608 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:32:56.608 DEBUG [src.node.docker_mananger] docker run -i -t -p 46761:46761 -p 46762:46762 -p 46763:46763 -p 46764:46764 -p 46765:46765 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46763 --rest-port=46761 --tcp-port=46762 --discv5-udp-port=46764 --rest-address=0.0.0.0 --nat=extip:172.18.155.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f3e7ccbfb4b0f36aace32bfc3cfaaf17f2fcfe3207ceb9e8a1fc8b3e9f4f1452 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46765 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFI1I3Xet6xdXDd6xQ6zsZ1PG9kTyklddmwdUKKiEquUAqHJYVGoEdisbzHwaC2ysBHPtTxDbM9_MqHn-zpg3MwCgmlkgnY0gmlwhKwSQA-KbXVsdGlhZGRyc5YACASsEkAPBkaHAAoErBJADwZGiN0DgnJzhQADAQAAiXNlY3AyNTZrMaECVm4NAQe2jWO2YwB31ZshmCUOkaKb63OQwOSf-ofyNKCDdGNwgkaHg3VkcIJGiYV3YWt1MgQ --lightpushnode=/ip4/172.18.64.15/tcp/18055/p2p/16Uiu2HAm1F4NVx5dyYWrTQXSRq6yMLxogPSiB4o8ZEYUACaW9k8F --lightpush=true --relay=true
2026-01-30 04:32:56.798 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.155.244 waku b5abc86401fee35629a51b014c0351bab06d79d8b5a1069b22dcf4cbdbb7aa92
2026-01-30 04:32:56.833 DEBUG [src.node.docker_mananger] Container started with ID b5abc86401fe. Setting up logs at ./log/docker/lightpush_node1_2026-01-30_04-32-55__da376aa0-9c6d-4fca-bc00-f2685a9ce6af__wakuorg_nwaku:latest.log
2026-01-30 04:32:56.834 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46761
2026-01-30 04:32:56.834 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:32:57.834 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46761/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:32:57.838 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-30 04:32:57.839 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:32:57.839 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46761/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:32:57.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.244/tcp/46762/p2p/16Uiu2HAkw6E3oSNss6BfyGTGJCJThL9CWRGBFFKiapnxQLWTTW4w","/ip4/172.18.155.244/tcp/46763/ws/p2p/16Uiu2HAkw6E3oSNss6BfyGTGJCJThL9CWRGBFFKiapnxQLWTTW4w"],"enrUri":"enr:-L24QPS80aKW5BigdRzbCYCO5k2VKLpHWoP7eTDHYsNSFXAxPhpTRWjyqosEIUn_0qxb4w3D4dkFMIMQX2nrOFVR_nwCgmlkgnY0gmlwhKwSm_SKbXVsdGlhZGRyc5YACASsEpv0BraqAAoErBKb9Aa2q90DgnJzhQADAQAAiXNlY3AyNTZrMaECGLwEsK_qPLZajtdmdC56TodCO0IsjRSR6DDKBXXEUgiDdGNwgraqg3VkcIK2rIV3YWt1Mgk"}'
2026-01-30 04:32:57.841 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:32:57.841 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46761/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.64.15/tcp/18055/p2p/16Uiu2HAm1F4NVx5dyYWrTQXSRq6yMLxogPSiB4o8ZEYUACaW9k8F"]'
2026-01-30 04:32:57.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:32:57.889 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46761/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1769747577889546510}}'
2026-01-30 04:32:57.907 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:46761/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2026-01-30 04:32:57.911 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:32:57.912 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:32:57.912 DEBUG [src.node.waku_node] Stopping container with id a88fd56e09fd
2026-01-30 04:32:58.467 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:32:58.468 DEBUG [src.node.waku_node] Stopping container with id b5abc86401fe
2026-01-30 04:32:58.991 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:32:58.992 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:32:58.997 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:32:59.002 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
