2026-01-30 04:35:47.503 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:35:47.503 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_with_extra_field with id: 2026-01-30_04-35-47__7db14ba6-26e8-41c8-a3b0-fedb48a7d244
2026-01-30 04:35:47.503 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:35:47.503 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-30 04:35:47.504 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-01-30 04:35:47.511 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:35:47.511 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-30_04-35-47__7db14ba6-26e8-41c8-a3b0-fedb48a7d244__wakuorg_nwaku:latest.log
2026-01-30 04:35:47.511 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:35:47.512 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:35:47.513 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:35:47.513 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.232.223
2026-01-30 04:35:47.513 DEBUG [src.node.docker_mananger] Generated ports ['51826', '51827', '51828', '51829', '51830']
2026-01-30 04:35:47.513 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:35:47.514 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:35:47.514 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:35:47.514 DEBUG [src.node.docker_mananger] docker run -i -t -p 51826:51826 -p 51827:51827 -p 51828:51828 -p 51829:51829 -p 51830:51830 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51828 --rest-port=51826 --tcp-port=51827 --discv5-udp-port=51829 --rest-address=0.0.0.0 --nat=extip:172.18.232.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=34fc6ec8d127bbe33ff241f029fa444b02bcbe206dfbaecc7a4d42a06bcfcea7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51830 --metrics-logging=true --relay=true --filter=true
2026-01-30 04:35:47.708 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.232.223 waku 3c925453dddb0e1850d6786b31ccfac554cbc44d86144049ca5460e673bc93a3
2026-01-30 04:35:47.739 DEBUG [src.node.docker_mananger] Container started with ID 3c925453dddb. Setting up logs at ./log/docker/node1_2026-01-30_04-35-47__7db14ba6-26e8-41c8-a3b0-fedb48a7d244__wakuorg_nwaku:latest.log
2026-01-30 04:35:47.739 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51826
2026-01-30 04:35:47.739 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:35:47.744 ERROR [src.node.docker_mananger] Max retries reached for container f4e64ebb3625. Exiting log stream.
2026-01-30 04:35:48.310 ERROR [src.node.docker_mananger] Max retries reached for container 3a56ca95fe6d. Exiting log stream.
2026-01-30 04:35:48.741 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51826/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:48.744 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:35:48.744 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:35:48.745 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51826/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:48.747 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.223/tcp/51827/p2p/16Uiu2HAkypdWo4BdCgwyqjox2vsiXog5TGAqHS97h61w8gDAasNw","/ip4/172.18.232.223/tcp/51828/ws/p2p/16Uiu2HAkypdWo4BdCgwyqjox2vsiXog5TGAqHS97h61w8gDAasNw"],"enrUri":"enr:-L24QG6P7PFOA3ruOJ9ZrvG3Wt-bQVUoB84QszM6wh7eVgvfaVdkXdS1-8_yAi0vgbdC0PfLcloKdPvQQ4gLCABSjVMCgmlkgnY0gmlwhKwS6N-KbXVsdGlhZGRyc5YACASsEujfBspzAAoErBLo3wbKdN0DgnJzhQADAQAAiXNlY3AyNTZrMaECQVBRjeHiSrodWOI14hophltKJn7SxZnWL05gFeBB9XiDdGNwgspzg3VkcILKdYV3YWt1MgU"}'
2026-01-30 04:35:48.747 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:35:48.748 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-01-30 04:35:48.754 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:35:48.755 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-30_04-35-47__7db14ba6-26e8-41c8-a3b0-fedb48a7d244__wakuorg_nwaku:latest.log
2026-01-30 04:35:48.755 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:35:48.755 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:35:48.756 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:35:48.756 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.247.46
2026-01-30 04:35:48.756 DEBUG [src.node.docker_mananger] Generated ports ['54954', '54955', '54956', '54957', '54958']
2026-01-30 04:35:48.757 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:35:48.757 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:35:48.757 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:35:48.757 DEBUG [src.node.docker_mananger] docker run -i -t -p 54954:54954 -p 54955:54955 -p 54956:54956 -p 54957:54957 -p 54958:54958 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54956 --rest-port=54954 --tcp-port=54955 --discv5-udp-port=54957 --rest-address=0.0.0.0 --nat=extip:172.18.247.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e1ad8d5062a7ebb2afd4e0fead0edc1a4cfa3ab8bf76e3abf783cbe9cb7d478 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54958 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QG6P7PFOA3ruOJ9ZrvG3Wt-bQVUoB84QszM6wh7eVgvfaVdkXdS1-8_yAi0vgbdC0PfLcloKdPvQQ4gLCABSjVMCgmlkgnY0gmlwhKwS6N-KbXVsdGlhZGRyc5YACASsEujfBspzAAoErBLo3wbKdN0DgnJzhQADAQAAiXNlY3AyNTZrMaECQVBRjeHiSrodWOI14hophltKJn7SxZnWL05gFeBB9XiDdGNwgspzg3VkcILKdYV3YWt1MgU --filternode=/ip4/172.18.232.223/tcp/51827/p2p/16Uiu2HAkypdWo4BdCgwyqjox2vsiXog5TGAqHS97h61w8gDAasNw
2026-01-30 04:35:48.948 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.247.46 waku 9b2e6343c2e92dcb80ab4004d9ec16d5c2495bc0b65984af4e057fbb386e8632
2026-01-30 04:35:48.978 DEBUG [src.node.docker_mananger] Container started with ID 9b2e6343c2e9. Setting up logs at ./log/docker/node2_2026-01-30_04-35-47__7db14ba6-26e8-41c8-a3b0-fedb48a7d244__wakuorg_nwaku:latest.log
2026-01-30 04:35:48.979 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54954
2026-01-30 04:35:48.979 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:35:49.979 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54954/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:49.983 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-30 04:35:49.984 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:35:49.984 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54954/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:49.986 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.46/tcp/54955/p2p/16Uiu2HAm6Bew16BDXm7PWqD8X7tkbkUaQCZA4eih7k1z4a57CeBd","/ip4/172.18.247.46/tcp/54956/ws/p2p/16Uiu2HAm6Bew16BDXm7PWqD8X7tkbkUaQCZA4eih7k1z4a57CeBd"],"enrUri":"enr:-L24QLg0bsY0xF5admtxbp01K89mxnjx1y-09fdl2hZxtXHpDqmC4j2rdz-zYCMxdW4HZjOaWsYZQX2ygHfS0O4-Um4CgmlkgnY0gmlwhKwS9y6KbXVsdGlhZGRyc5YACASsEvcuBtarAAoErBL3LgbWrN0DgnJzhQADAQAAiXNlY3AyNTZrMaECn9k9X_uEREhqf90dV2ke447W_BKWzSydumfv2HqSr_SDdGNwgtarg3VkcILWrYV3YWt1MgA"}'
2026-01-30 04:35:49.986 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:35:49.987 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54954/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.232.223/tcp/51827/p2p/16Uiu2HAkypdWo4BdCgwyqjox2vsiXog5TGAqHS97h61w8gDAasNw"]'
2026-01-30 04:35:50.016 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:35:50.016 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-01-30 04:35:50.017 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51826/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-30 04:35:50.031 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:35:50.033 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54954/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7c1a7c03-74eb-41ef-9903-7e86f47f772c", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-30 04:35:50.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"7c1a7c03-74eb-41ef-9903-7e86f47f772c","statusDesc":"OK"}'
2026-01-30 04:35:50.046 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:54954/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1, "extraField": "extraValue"}'
2026-01-30 04:35:50.049 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:54954/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-01-30 04:35:50.052 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:35:50.053 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:35:50.053 DEBUG [src.node.waku_node] Stopping container with id 3c925453dddb
2026-01-30 04:35:50.599 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:35:50.599 DEBUG [src.node.waku_node] Stopping container with id 9b2e6343c2e9
2026-01-30 04:35:51.150 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:35:51.151 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:35:51.155 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:35:51.160 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
