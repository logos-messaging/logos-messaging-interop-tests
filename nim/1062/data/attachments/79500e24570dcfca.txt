2026-01-30 04:35:21.957 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:35:21.958 DEBUG [tests.conftest] Running test: test_filter_get_message_with_meta with id: 2026-01-30_04-35-21__b8a00b94-38fe-4df3-9ba8-22c2e143a247
2026-01-30 04:35:21.958 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:35:21.958 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-30 04:35:21.958 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-01-30 04:35:21.965 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:35:21.965 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-30_04-35-21__b8a00b94-38fe-4df3-9ba8-22c2e143a247__wakuorg_nwaku:latest.log
2026-01-30 04:35:21.965 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:35:21.965 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:35:21.967 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:35:21.967 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.58.67
2026-01-30 04:35:21.967 DEBUG [src.node.docker_mananger] Generated ports ['31492', '31493', '31494', '31495', '31496']
2026-01-30 04:35:21.967 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:35:21.967 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:35:21.968 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:35:21.968 DEBUG [src.node.docker_mananger] docker run -i -t -p 31492:31492 -p 31493:31493 -p 31494:31494 -p 31495:31495 -p 31496:31496 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31494 --rest-port=31492 --tcp-port=31493 --discv5-udp-port=31495 --rest-address=0.0.0.0 --nat=extip:172.18.58.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6cadfec1ce450bfee9713ab9061f7f8780cdf8f05dbccf1f3511dffa01ac5ea6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31496 --metrics-logging=true --relay=true --filter=true
2026-01-30 04:35:22.021 ERROR [src.node.docker_mananger] Max retries reached for container 892ddf4ef8b9. Exiting log stream.
2026-01-30 04:35:22.158 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.58.67 waku 45cfca75090d1f22c47d24e0af78a32c9526c0c2fa04eb11bf6d695c2ba87f11
2026-01-30 04:35:22.189 DEBUG [src.node.docker_mananger] Container started with ID 45cfca75090d. Setting up logs at ./log/docker/node1_2026-01-30_04-35-21__b8a00b94-38fe-4df3-9ba8-22c2e143a247__wakuorg_nwaku:latest.log
2026-01-30 04:35:22.189 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31492
2026-01-30 04:35:22.191 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:35:22.564 ERROR [src.node.docker_mananger] Max retries reached for container 2e430c9f73a0. Exiting log stream.
2026-01-30 04:35:23.191 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31492/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:23.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:35:23.195 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:35:23.195 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31492/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:23.197 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.67/tcp/31493/p2p/16Uiu2HAmCWTr3p2hvuTtY2seeVJAmMAVvg44D3MiKgD9a6u1LUk1","/ip4/172.18.58.67/tcp/31494/ws/p2p/16Uiu2HAmCWTr3p2hvuTtY2seeVJAmMAVvg44D3MiKgD9a6u1LUk1"],"enrUri":"enr:-L24QFHhQt1oaxCQRpxykuz12q_aPRMC2jNCNGCquXI9SVwHGvPjmQ0vooH5Jb6IHIjfMvgaVaGacuMzGzkPgAAXu1ICgmlkgnY0gmlwhKwSOkOKbXVsdGlhZGRyc5YACASsEjpDBnsFAAoErBI6QwZ7Bt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_dDcxL4HrHBjuZsoQ_CP7hvQ5Zyy2xwiutIzxJIot8KDdGNwgnsFg3VkcIJ7B4V3YWt1MgU"}'
2026-01-30 04:35:23.198 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:35:23.198 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-01-30 04:35:23.205 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:35:23.205 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-30_04-35-21__b8a00b94-38fe-4df3-9ba8-22c2e143a247__wakuorg_nwaku:latest.log
2026-01-30 04:35:23.205 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:35:23.205 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:35:23.207 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:35:23.207 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.113.225
2026-01-30 04:35:23.207 DEBUG [src.node.docker_mananger] Generated ports ['57094', '57095', '57096', '57097', '57098']
2026-01-30 04:35:23.207 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:35:23.207 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:35:23.207 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:35:23.207 DEBUG [src.node.docker_mananger] docker run -i -t -p 57094:57094 -p 57095:57095 -p 57096:57096 -p 57097:57097 -p 57098:57098 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57096 --rest-port=57094 --tcp-port=57095 --discv5-udp-port=57097 --rest-address=0.0.0.0 --nat=extip:172.18.113.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3f76cf70eecadfbbff429bfaec2eebbaf4de1f23080cd0d5d30c1c9acecbf5ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57098 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFHhQt1oaxCQRpxykuz12q_aPRMC2jNCNGCquXI9SVwHGvPjmQ0vooH5Jb6IHIjfMvgaVaGacuMzGzkPgAAXu1ICgmlkgnY0gmlwhKwSOkOKbXVsdGlhZGRyc5YACASsEjpDBnsFAAoErBI6QwZ7Bt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_dDcxL4HrHBjuZsoQ_CP7hvQ5Zyy2xwiutIzxJIot8KDdGNwgnsFg3VkcIJ7B4V3YWt1MgU --filternode=/ip4/172.18.58.67/tcp/31493/p2p/16Uiu2HAmCWTr3p2hvuTtY2seeVJAmMAVvg44D3MiKgD9a6u1LUk1
2026-01-30 04:35:23.406 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.113.225 waku 5b041e3ed0e36821be229408ad91581834435409a2b96f5d4fdbb6e16d8b3ce4
2026-01-30 04:35:23.437 DEBUG [src.node.docker_mananger] Container started with ID 5b041e3ed0e3. Setting up logs at ./log/docker/node2_2026-01-30_04-35-21__b8a00b94-38fe-4df3-9ba8-22c2e143a247__wakuorg_nwaku:latest.log
2026-01-30 04:35:23.437 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57094
2026-01-30 04:35:23.437 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:35:24.438 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57094/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:24.442 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-30 04:35:24.442 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:35:24.442 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57094/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:24.444 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.225/tcp/57095/p2p/16Uiu2HAm7MJqquBS4QDBPWtv5iruy8oQBPKtTRyQZLinKWndWXgj","/ip4/172.18.113.225/tcp/57096/ws/p2p/16Uiu2HAm7MJqquBS4QDBPWtv5iruy8oQBPKtTRyQZLinKWndWXgj"],"enrUri":"enr:-L24QCnfMGT6BBPU4rbIB9q_l_u4LgDHHQVbEJ2PLNa320BWQplCc8a4EjhY1RrH0_mdm5CUboNxIotfAcJy5hwkaaECgmlkgnY0gmlwhKwSceGKbXVsdGlhZGRyc5YACASsEnHhBt8HAAoErBJx4QbfCN0DgnJzhQADAQAAiXNlY3AyNTZrMaECsS4FJxTzq5ShHa7NiAM2T9cwbIMSDehIYyIYgf26cmCDdGNwgt8Hg3VkcILfCYV3YWt1MgA"}'
2026-01-30 04:35:24.445 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:35:24.445 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57094/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.58.67/tcp/31493/p2p/16Uiu2HAmCWTr3p2hvuTtY2seeVJAmMAVvg44D3MiKgD9a6u1LUk1"]'
2026-01-30 04:35:24.474 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:35:24.476 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-01-30 04:35:24.476 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31492/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-30 04:35:24.493 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:35:24.493 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57094/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c550a8ce-f30e-4b6a-b67c-69f957702123", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-30 04:35:24.505 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"c550a8ce-f30e-4b6a-b67c-69f957702123","statusDesc":"OK"}'
2026-01-30 04:35:24.506 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31492/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "meta": "RmlsdGVyIHdvcmtzISE="}'
2026-01-30 04:35:24.514 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:35:24.514 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-30 04:35:24.615 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-30 04:35:24.615 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57094/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:24.618 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1769747724506724804,"meta":"RmlsdGVyIHdvcmtzISE=","ephemeral":false}]'
2026-01-30 04:35:24.622 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:35:24.623 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:35:24.623 DEBUG [src.node.waku_node] Stopping container with id 45cfca75090d
2026-01-30 04:35:25.169 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:35:25.169 DEBUG [src.node.waku_node] Stopping container with id 5b041e3ed0e3
2026-01-30 04:35:25.735 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:35:25.739 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:35:25.744 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:35:25.748 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
