2026-01-30 04:33:08.315 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:33:08.315 DEBUG [tests.conftest] Running test: test_get_store_message_with_meta with id: 2026-01-30_04-33-08__bd7c42b1-8aac-485f-941f-cf528a2636a7
2026-01-30 04:33:08.316 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:33:08.316 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-30 04:33:08.316 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-01-30 04:33:08.323 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:33:08.323 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-01-30_04-33-08__bd7c42b1-8aac-485f-941f-cf528a2636a7__wakuorg_nwaku:latest.log
2026-01-30 04:33:08.323 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:33:08.323 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:33:08.325 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:33:08.325 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.103.48
2026-01-30 04:33:08.325 DEBUG [src.node.docker_mananger] Generated ports ['47162', '47163', '47164', '47165', '47166']
2026-01-30 04:33:08.325 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:33:08.325 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:33:08.325 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:33:08.325 DEBUG [src.node.docker_mananger] docker run -i -t -p 47162:47162 -p 47163:47163 -p 47164:47164 -p 47165:47165 -p 47166:47166 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47164 --rest-port=47162 --tcp-port=47163 --discv5-udp-port=47165 --rest-address=0.0.0.0 --nat=extip:172.18.103.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcf1d749b88e5a6df0cad2e339cddc9d66eac8b7dd0a0eeca4da4ae4cda6a2b2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47166 --metrics-logging=true --store=true --relay=true
2026-01-30 04:33:08.500 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.103.48 waku e0373c603448a05be6921d639740184b1f2376aaeb4b15a3ee27768fd41d6f44
2026-01-30 04:33:08.506 ERROR [src.node.docker_mananger] Max retries reached for container 077c125f4165. Exiting log stream.
2026-01-30 04:33:08.531 DEBUG [src.node.docker_mananger] Container started with ID e0373c603448. Setting up logs at ./log/docker/publishing_node1_2026-01-30_04-33-08__bd7c42b1-8aac-485f-941f-cf528a2636a7__wakuorg_nwaku:latest.log
2026-01-30 04:33:08.533 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47162
2026-01-30 04:33:08.533 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:33:09.034 ERROR [src.node.docker_mananger] Max retries reached for container 374b1d007de9. Exiting log stream.
2026-01-30 04:33:09.535 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47162/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:09.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:33:09.538 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:33:09.538 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47162/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:09.541 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.103.48/tcp/47163/p2p/16Uiu2HAmGA7Vri4CB4AkFeJjggtPgm7tCZMiZcR2fJ2E9FXzn8Wm","/ip4/172.18.103.48/tcp/47164/ws/p2p/16Uiu2HAmGA7Vri4CB4AkFeJjggtPgm7tCZMiZcR2fJ2E9FXzn8Wm"],"enrUri":"enr:-L24QPwhbaQAMzBjcCcyueZVYrh6oPlIBuJSoAAw0L45BAStTaI1-JtC48N_gVyPUsjCiri1k4xBBHxWGx7f2snyFEECgmlkgnY0gmlwhKwSZzCKbXVsdGlhZGRyc5YACASsEmcwBrg7AAoErBJnMAa4PN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNAj8d4v7JRZheugftqJEow6PVniuh6ruu8F_ysxK45KDdGNwgrg7g3VkcIK4PYV3YWt1MgM"}'
2026-01-30 04:33:09.541 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:33:09.548 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:33:09.548 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-01-30_04-33-08__bd7c42b1-8aac-485f-941f-cf528a2636a7__wakuorg_nwaku:latest.log
2026-01-30 04:33:09.548 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:33:09.548 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:33:09.549 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:33:09.550 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.248.175
2026-01-30 04:33:09.550 DEBUG [src.node.docker_mananger] Generated ports ['25968', '25969', '25970', '25971', '25972']
2026-01-30 04:33:09.550 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:33:09.550 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:33:09.550 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:33:09.550 DEBUG [src.node.docker_mananger] docker run -i -t -p 25968:25968 -p 25969:25969 -p 25970:25970 -p 25971:25971 -p 25972:25972 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25970 --rest-port=25968 --tcp-port=25969 --discv5-udp-port=25971 --rest-address=0.0.0.0 --nat=extip:172.18.248.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6c3fafc43fae20ce13ecffaff66efeed212d8adec38a14da6870ae536ae5c81 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25972 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPwhbaQAMzBjcCcyueZVYrh6oPlIBuJSoAAw0L45BAStTaI1-JtC48N_gVyPUsjCiri1k4xBBHxWGx7f2snyFEECgmlkgnY0gmlwhKwSZzCKbXVsdGlhZGRyc5YACASsEmcwBrg7AAoErBJnMAa4PN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNAj8d4v7JRZheugftqJEow6PVniuh6ruu8F_ysxK45KDdGNwgrg7g3VkcIK4PYV3YWt1MgM --storenode=/ip4/172.18.103.48/tcp/47163/p2p/16Uiu2HAmGA7Vri4CB4AkFeJjggtPgm7tCZMiZcR2fJ2E9FXzn8Wm --store=true --relay=true
2026-01-30 04:33:09.727 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.248.175 waku d4bc2e2c2f7b729407262510636e556073ef2883246589f40b08ff1acddf10d7
2026-01-30 04:33:09.756 DEBUG [src.node.docker_mananger] Container started with ID d4bc2e2c2f7b. Setting up logs at ./log/docker/store_node1_2026-01-30_04-33-08__bd7c42b1-8aac-485f-941f-cf528a2636a7__wakuorg_nwaku:latest.log
2026-01-30 04:33:09.757 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25968
2026-01-30 04:33:09.757 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:33:10.757 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25968/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:10.762 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:33:10.762 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:33:10.762 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25968/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:10.764 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.175/tcp/25969/p2p/16Uiu2HAmLX5LCi9TckAVKFBEfKKo6Busa1mhY22vs1ci9nAZyd2n","/ip4/172.18.248.175/tcp/25970/ws/p2p/16Uiu2HAmLX5LCi9TckAVKFBEfKKo6Busa1mhY22vs1ci9nAZyd2n"],"enrUri":"enr:-L24QCeZy0S8vUzerORfC91h3IXg4UdV1GrVox6-kdmAFrAQGsUBibs_MWf-VMWHU84UbAFD-aXlOmvt1Z-YrLbr0ZgCgmlkgnY0gmlwhKwS-K-KbXVsdGlhZGRyc5YACASsEvivBmVxAAoErBL4rwZlct0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdNZ7M_suuBDdsqDhVxw1P9p7Ym4b813tTGtH9fZfGxeDdGNwgmVxg3VkcIJlc4V3YWt1MgM"}'
2026-01-30 04:33:10.764 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:33:10.765 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25968/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.103.48/tcp/47163/p2p/16Uiu2HAmGA7Vri4CB4AkFeJjggtPgm7tCZMiZcR2fJ2E9FXzn8Wm"]'
2026-01-30 04:33:10.767 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:10.768 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47162/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-30 04:33:10.770 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:10.770 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25968/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-30 04:33:10.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:10.773 DEBUG [src.steps.store] Relaying message
2026-01-30 04:33:10.774 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47162/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "meta": "U3RvcmUgd29ya3MhIQ=="}'
2026-01-30 04:33:10.778 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:33:10.779 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:33:10.979 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-01-30 04:33:10.980 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47162/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:10.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x65755acd0b3e19c90e765a297a96dc15d649b050de94653a30d04d8a46008f27"}]}'
2026-01-30 04:33:10.983 DEBUG [src.steps.store] messages length is 1
2026-01-30 04:33:10.983 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-01-30 04:33:10.983 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25968/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:33:10.986 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x65755acd0b3e19c90e765a297a96dc15d649b050de94653a30d04d8a46008f27"}]}'
2026-01-30 04:33:10.986 DEBUG [src.steps.store] messages length is 1
2026-01-30 04:33:10.988 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:33:10.989 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:33:10.989 DEBUG [src.node.waku_node] Stopping container with id e0373c603448
2026-01-30 04:33:11.489 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:33:11.491 DEBUG [src.node.waku_node] Stopping container with id d4bc2e2c2f7b
2026-01-30 04:33:12.008 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:33:12.009 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:33:12.021 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:33:12.026 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
