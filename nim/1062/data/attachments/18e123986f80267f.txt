2026-01-30 04:36:10.747 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:36:10.747 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2026-01-30_04-36-10__0f85cfda-b56d-49c9-ab4e-ca5cc2901a21
2026-01-30 04:36:10.748 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:36:10.748 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-01-30 04:36:10.755 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:36:10.755 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-01-30_04-36-10__0f85cfda-b56d-49c9-ab4e-ca5cc2901a21__wakuorg_nwaku:latest.log
2026-01-30 04:36:10.755 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:36:10.755 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:36:10.757 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:36:10.757 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.192.37
2026-01-30 04:36:10.757 DEBUG [src.node.docker_mananger] Generated ports ['9808', '9809', '9810', '9811', '9812']
2026-01-30 04:36:10.757 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:36:10.757 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:36:10.757 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:36:10.758 DEBUG [src.node.docker_mananger] docker run -i -t -p 9808:9808 -p 9809:9809 -p 9810:9810 -p 9811:9811 -p 9812:9812 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9810 --rest-port=9808 --tcp-port=9809 --discv5-udp-port=9811 --rest-address=0.0.0.0 --nat=extip:172.18.192.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cee61fbddfec1deec1154ffd0d4fba7f26afaffa25accdf426f0d41d12ab80f9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9812 --metrics-logging=true --lightpush=true --relay=true
2026-01-30 04:36:10.942 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.192.37 waku f45ae91cbf0cebc9fbacc7f03534b4614711781d0342e72234806baf5fe7ba56
2026-01-30 04:36:10.973 DEBUG [src.node.docker_mananger] Container started with ID f45ae91cbf0c. Setting up logs at ./log/docker/receiving_node1_2026-01-30_04-36-10__0f85cfda-b56d-49c9-ab4e-ca5cc2901a21__wakuorg_nwaku:latest.log
2026-01-30 04:36:10.974 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9808
2026-01-30 04:36:10.974 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:36:11.005 ERROR [src.node.docker_mananger] Max retries reached for container 73a898c13149. Exiting log stream.
2026-01-30 04:36:11.547 ERROR [src.node.docker_mananger] Max retries reached for container 28e8522e06f1. Exiting log stream.
2026-01-30 04:36:11.975 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9808/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:11.978 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:36:11.978 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:36:11.978 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9808/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:11.981 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.37/tcp/9809/p2p/16Uiu2HAmQeAALyqrH4Cg7gUw63Bm3TPSh2hp4o1Jh1r52Lwh5Miz","/ip4/172.18.192.37/tcp/9810/ws/p2p/16Uiu2HAmQeAALyqrH4Cg7gUw63Bm3TPSh2hp4o1Jh1r52Lwh5Miz"],"enrUri":"enr:-L24QPxJKrC9-44QhD2MmtuEASFpzJEDpPW4_MWyeI8B26T-eNlfD9wyrmxIHnIotAqoB5uptIE5mcEuC7l2og9gWjECgmlkgnY0gmlwhKwSwCWKbXVsdGlhZGRyc5YACASsEsAlBiZRAAoErBLAJQYmUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDshXBh-X6axTMyr8btN8PZVLV6NP4A4iTqW9d8TztAnODdGNwgiZRg3VkcIImU4V3YWt1Mgk"}'
2026-01-30 04:36:11.981 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:36:11.987 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:36:11.988 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-01-30_04-36-10__0f85cfda-b56d-49c9-ab4e-ca5cc2901a21__wakuorg_nwaku:latest.log
2026-01-30 04:36:11.988 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:36:11.988 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:36:11.989 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:36:11.989 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.66.198
2026-01-30 04:36:11.989 DEBUG [src.node.docker_mananger] Generated ports ['62438', '62439', '62440', '62441', '62442']
2026-01-30 04:36:11.990 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:36:11.990 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:36:11.990 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:36:11.990 DEBUG [src.node.docker_mananger] docker run -i -t -p 62438:62438 -p 62439:62439 -p 62440:62440 -p 62441:62441 -p 62442:62442 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62440 --rest-port=62438 --tcp-port=62439 --discv5-udp-port=62441 --rest-address=0.0.0.0 --nat=extip:172.18.66.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eed4f1bbafe7ffe5b4aae7b58f34aefffe88466ec3441ab4fb0b8ebe06befc21 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62442 --metrics-logging=true --lightpush=false --relay=true
2026-01-30 04:36:12.184 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.66.198 waku d0a3b0404e8e9252a77624189d2d9dd928c511d48f65fcffcbf577abd8de8d7f
2026-01-30 04:36:12.215 DEBUG [src.node.docker_mananger] Container started with ID d0a3b0404e8e. Setting up logs at ./log/docker/receiving_node2_2026-01-30_04-36-10__0f85cfda-b56d-49c9-ab4e-ca5cc2901a21__wakuorg_nwaku:latest.log
2026-01-30 04:36:12.215 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62438
2026-01-30 04:36:12.215 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:36:13.216 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62438/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:13.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:36:13.219 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:36:13.219 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62438/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:13.221 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.198/tcp/62439/p2p/16Uiu2HAkx1V4EKmv6pHvvz21Mzy6dS1hSubDoFvX5NY3b2gwgsFD","/ip4/172.18.66.198/tcp/62440/ws/p2p/16Uiu2HAkx1V4EKmv6pHvvz21Mzy6dS1hSubDoFvX5NY3b2gwgsFD"],"enrUri":"enr:-L24QNRC0y-BCzq8NUqATlEuKOPsU2k4BmR9-x0zc7XSS_z2Sm9ZfW8sMhYJ9C4ylGGFnmhqVlSw1eWUzlf9gMVKZfwCgmlkgnY0gmlwhKwSQsaKbXVsdGlhZGRyc5YACASsEkLGBvPnAAoErBJCxgbz6N0DgnJzhQADAQAAiXNlY3AyNTZrMaECJmDFJqLGUdjsLbPo-lQ4uVQjzdSb2l3LrGXgXIY2xFiDdGNwgvPng3VkcILz6YV3YWt1MgE"}'
2026-01-30 04:36:13.222 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:36:13.222 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62438/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.37/tcp/9809/p2p/16Uiu2HAmQeAALyqrH4Cg7gUw63Bm3TPSh2hp4o1Jh1r52Lwh5Miz"]'
2026-01-30 04:36:13.254 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:13.264 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:36:13.264 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-01-30_04-36-10__0f85cfda-b56d-49c9-ab4e-ca5cc2901a21__wakuorg_nwaku:latest.log
2026-01-30 04:36:13.264 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:36:13.265 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:36:13.267 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:36:13.269 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.52.161
2026-01-30 04:36:13.270 DEBUG [src.node.docker_mananger] Generated ports ['45364', '45365', '45366', '45367', '45368']
2026-01-30 04:36:13.271 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:36:13.271 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:36:13.271 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:36:13.271 DEBUG [src.node.docker_mananger] docker run -i -t -p 45364:45364 -p 45365:45365 -p 45366:45366 -p 45367:45367 -p 45368:45368 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45366 --rest-port=45364 --tcp-port=45365 --discv5-udp-port=45367 --rest-address=0.0.0.0 --nat=extip:172.18.52.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa374176de1dcbb6ec85c915faaaec2ecef5ee330e47bb9fd8f2c9a3b5190d55 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45368 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPxJKrC9-44QhD2MmtuEASFpzJEDpPW4_MWyeI8B26T-eNlfD9wyrmxIHnIotAqoB5uptIE5mcEuC7l2og9gWjECgmlkgnY0gmlwhKwSwCWKbXVsdGlhZGRyc5YACASsEsAlBiZRAAoErBLAJQYmUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDshXBh-X6axTMyr8btN8PZVLV6NP4A4iTqW9d8TztAnODdGNwgiZRg3VkcIImU4V3YWt1Mgk --lightpushnode=/ip4/172.18.192.37/tcp/9809/p2p/16Uiu2HAmQeAALyqrH4Cg7gUw63Bm3TPSh2hp4o1Jh1r52Lwh5Miz --lightpush=true --relay=true
2026-01-30 04:36:13.462 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.52.161 waku 44e160715d67370e7634b9e3d3a57e9d610fef55ceac725dc07bd55281f9f2a7
2026-01-30 04:36:13.492 DEBUG [src.node.docker_mananger] Container started with ID 44e160715d67. Setting up logs at ./log/docker/lightpush_node1_2026-01-30_04-36-10__0f85cfda-b56d-49c9-ab4e-ca5cc2901a21__wakuorg_nwaku:latest.log
2026-01-30 04:36:13.493 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45364
2026-01-30 04:36:13.493 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:36:14.494 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45364/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:14.498 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:36:14.498 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:36:14.498 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45364/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:36:14.500 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.161/tcp/45365/p2p/16Uiu2HAmCg4CTzLKP22rBPayCFoJ41S1dkEdYjfzn5BmHzJbN694","/ip4/172.18.52.161/tcp/45366/ws/p2p/16Uiu2HAmCg4CTzLKP22rBPayCFoJ41S1dkEdYjfzn5BmHzJbN694"],"enrUri":"enr:-L24QDTBTvApp5vvRoaAos-QFxxMhym5HdvwS6YOqG9gN-r4GXxKDc1F3kSv-f_DhqZGk7C55YNuELuKEHpfWx7wTIgCgmlkgnY0gmlwhKwSNKGKbXVsdGlhZGRyc5YACASsEjShBrE1AAoErBI0oQaxNt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAEXufbUYZSCxEfoA6kdSRGXdE8zQrj53duBzX2nY2M-DdGNwgrE1g3VkcIKxN4V3YWt1Mgk"}'
2026-01-30 04:36:14.501 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:36:14.501 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45364/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.37/tcp/9809/p2p/16Uiu2HAmQeAALyqrH4Cg7gUw63Bm3TPSh2hp4o1Jh1r52Lwh5Miz"]'
2026-01-30 04:36:14.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:14.537 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45364/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.198/tcp/62439/p2p/16Uiu2HAkx1V4EKmv6pHvvz21Mzy6dS1hSubDoFvX5NY3b2gwgsFD"]'
2026-01-30 04:36:14.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:14.567 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9808/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-30 04:36:14.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:14.575 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62438/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-30 04:36:14.579 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:14.581 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45364/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-30 04:36:14.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:36:14.586 DEBUG [src.steps.light_push] Lightpushing message
2026-01-30 04:36:14.586 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45364/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1769747774585939181, "version": 2.1}}'
2026-01-30 04:36:14.588 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:45364/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-30 04:36:14.591 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:36:14.592 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:36:14.592 DEBUG [src.node.waku_node] Stopping container with id f45ae91cbf0c
2026-01-30 04:36:15.168 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:36:15.168 DEBUG [src.node.waku_node] Stopping container with id d0a3b0404e8e
2026-01-30 04:36:15.743 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:36:15.743 DEBUG [src.node.waku_node] Stopping container with id 44e160715d67
2026-01-30 04:36:15.982 ERROR [src.node.docker_mananger] Max retries reached for container f45ae91cbf0c. Exiting log stream.
2026-01-30 04:36:16.298 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:36:16.299 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:36:16.307 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:36:16.315 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:36:16.322 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
