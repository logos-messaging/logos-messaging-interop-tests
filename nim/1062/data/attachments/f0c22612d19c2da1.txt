[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2026-01-30_04-33-56__7c7aa787-edc4-499f-905a-d6b5a2920626
[35mDEBUG   [0m src.steps.common:common.py:19 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:86 WakuNode instance initialized with log path ./log/docker/node1_2026-01-30_04-33-56__7c7aa787-edc4-499f-905a-d6b5a2920626__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:90 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.121.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22440', '22441', '22442', '22443', '22444']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:176 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22440:22440 -p 22441:22441 -p 22442:22442 -p 22443:22443 -p 22444:22444 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22442 --rest-port=22440 --tcp-port=22441 --discv5-udp-port=22443 --rest-address=0.0.0.0 --nat=extip:172.18.121.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2cfcc43b0631bed91cd5c2240ecdc808d43fad5abc55d0b93add155bf513d80c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22444 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.121.47 waku 432bd250ee186b541a9dd6bd526ea76c18c860bf2abe2f2b0152e8d96c5997fe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 432bd250ee18. Setting up logs at ./log/docker/node1_2026-01-30_04-33-56__7c7aa787-edc4-499f-905a-d6b5a2920626__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:190 Started container from image wakuorg/nwaku:latest. REST: 22440
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 153167b6e977. Exiting log stream.
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5484b742bfd2. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22440/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22440/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.47/tcp/22441/p2p/16Uiu2HAmMLj3AfcmgoAJhMc3R6wHLQcGdbufG9Deu3vqVwzhHHvr","/ip4/172.18.121.47/tcp/22442/ws/p2p/16Uiu2HAmMLj3AfcmgoAJhMc3R6wHLQcGdbufG9Deu3vqVwzhHHvr"],"enrUri":"enr:-L24QM9ag20KNRt7LFIVFju7otsy-D6XZJZ8KBXu0Vx68_ilKXOv6_F3Mb8wZOZuOnfpMTdESlPiNgpvN9Q1HFAUGOYCgmlkgnY0gmlwhKwSeS-KbXVsdGlhZGRyc5YACASsEnkvBlepAAoErBJ5LwZXqt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgQtp9wP3bv3Gqb8e_t3iYV1MAyHQijFnRvJcLabmXZODdGNwglepg3VkcIJXq4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:292 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:86 WakuNode instance initialized with log path ./log/docker/node2_2026-01-30_04-33-56__7c7aa787-edc4-499f-905a-d6b5a2920626__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:90 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.217.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50078', '50079', '50080', '50081', '50082']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:176 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50078:50078 -p 50079:50079 -p 50080:50080 -p 50081:50081 -p 50082:50082 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50080 --rest-port=50078 --tcp-port=50079 --discv5-udp-port=50081 --rest-address=0.0.0.0 --nat=extip:172.18.217.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=34ed8e3bc2c6fcf7c4f1aaf2c0adca4b5a7ddc4e8fbddcdfaa1dde206bdcfd42 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50082 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QM9ag20KNRt7LFIVFju7otsy-D6XZJZ8KBXu0Vx68_ilKXOv6_F3Mb8wZOZuOnfpMTdESlPiNgpvN9Q1HFAUGOYCgmlkgnY0gmlwhKwSeS-KbXVsdGlhZGRyc5YACASsEnkvBlepAAoErBJ5LwZXqt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgQtp9wP3bv3Gqb8e_t3iYV1MAyHQijFnRvJcLabmXZODdGNwglepg3VkcIJXq4V3YWt1MgU --filternode=/ip4/172.18.121.47/tcp/22441/p2p/16Uiu2HAmMLj3AfcmgoAJhMc3R6wHLQcGdbufG9Deu3vqVwzhHHvr
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.217.109 waku 5af179c9e9859a9dd1a165402fb5379f117c1b8b5eee4ff3462e9d99a0abb329
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5af179c9e985. Setting up logs at ./log/docker/node2_2026-01-30_04-33-56__7c7aa787-edc4-499f-905a-d6b5a2920626__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:190 Started container from image wakuorg/nwaku:latest. REST: 50078
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50078/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50078/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.109/tcp/50079/p2p/16Uiu2HAm6KQgSjh3L7BcVUrRbBo7FdfkfzcUKtRrmYDMcQRej3fL","/ip4/172.18.217.109/tcp/50080/ws/p2p/16Uiu2HAm6KQgSjh3L7BcVUrRbBo7FdfkfzcUKtRrmYDMcQRej3fL"],"enrUri":"enr:-L24QOtKqOCXtPaymW2TEnD9ypkUkNKHunW71idZIvbt3aB_cA0Pmo4I3OCG2Pc5wsgLXXCnysh1bd9XyYoMuzZLGhgCgmlkgnY0gmlwhKwS2W2KbXVsdGlhZGRyc5YACASsEtltBsOfAAoErBLZbQbDoN0DgnJzhQADAQAAiXNlY3AyNTZrMaECodXFxtGfF8FL2a1fzhkWM9pE9zopAfQ1h_3dMemrzxeDdGNwgsOfg3VkcILDoYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:292 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.121.47/tcp/22441/p2p/16Uiu2HAmMLj3AfcmgoAJhMc3R6wHLQcGdbufG9Deu3vqVwzhHHvr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:39 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22440/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50078/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "330a2d9d-f28e-46d7-adfa-d3254d5b6585", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"330a2d9d-f28e-46d7-adfa-d3254d5b6585","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22440/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:96 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50078/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1769747638826797353,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:39 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22440/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50078/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "bc8451fb-fef7-426c-951c-7848b9c3cbf1", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"bc8451fb-fef7-426c-951c-7848b9c3cbf1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22440/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:96 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50078/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1769747638952311819,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:39 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22440/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50078/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "03e89bbe-95cd-419c-acec-8b350ecd5958", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"03e89bbe-95cd-419c-acec-8b350ecd5958","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22440/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:96 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50078/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1769747639074383437,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:234 Stopping container with id 432bd250ee18
[35mDEBUG   [0m src.node.waku_node:waku_node.py:241 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:234 Stopping container with id 5af179c9e985
[35mDEBUG   [0m src.node.waku_node:waku_node.py:241 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.