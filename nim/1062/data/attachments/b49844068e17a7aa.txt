2026-01-30 04:31:41.111 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:31:41.112 DEBUG [tests.conftest] Running test: test_filter_get_message_after_node_pauses_and_pauses with id: 2026-01-30_04-31-41__50f51774-3e57-493e-8f09-bd753de1611d
2026-01-30 04:31:41.113 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:31:41.115 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-30 04:31:41.115 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-01-30 04:31:41.123 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:31:41.123 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-30_04-31-41__50f51774-3e57-493e-8f09-bd753de1611d__wakuorg_nwaku:latest.log
2026-01-30 04:31:41.123 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:31:41.123 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:31:41.124 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:31:41.124 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.177.75
2026-01-30 04:31:41.125 DEBUG [src.node.docker_mananger] Generated ports ['21276', '21277', '21278', '21279', '21280']
2026-01-30 04:31:41.125 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:31:41.125 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:31:41.125 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:31:41.125 DEBUG [src.node.docker_mananger] docker run -i -t -p 21276:21276 -p 21277:21277 -p 21278:21278 -p 21279:21279 -p 21280:21280 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21278 --rest-port=21276 --tcp-port=21277 --discv5-udp-port=21279 --rest-address=0.0.0.0 --nat=extip:172.18.177.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=78c8c485c8ab9fefec1759f5c687e6a695edc42ccfa7ce8c731cddf5c199a9e6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21280 --metrics-logging=true --relay=true --filter=true
2026-01-30 04:31:41.297 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.177.75 waku 23bc16217d1bfffed74aa745ccbb637801395d434e0568413a50addccc158d2e
2026-01-30 04:31:41.325 DEBUG [src.node.docker_mananger] Container started with ID 23bc16217d1b. Setting up logs at ./log/docker/node1_2026-01-30_04-31-41__50f51774-3e57-493e-8f09-bd753de1611d__wakuorg_nwaku:latest.log
2026-01-30 04:31:41.326 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21276
2026-01-30 04:31:41.326 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:31:41.381 ERROR [src.node.docker_mananger] Max retries reached for container cbc0c1341d6d. Exiting log stream.
2026-01-30 04:31:41.926 ERROR [src.node.docker_mananger] Max retries reached for container 0ca75088dfb3. Exiting log stream.
2026-01-30 04:31:42.326 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21276/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:31:42.329 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:31:42.330 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:31:42.330 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21276/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:31:42.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.177.75/tcp/21277/p2p/16Uiu2HAmQDmMgSZpwyEEWQiBZVnxKJY9eNdCpLjZCDbSZruE6NhP","/ip4/172.18.177.75/tcp/21278/ws/p2p/16Uiu2HAmQDmMgSZpwyEEWQiBZVnxKJY9eNdCpLjZCDbSZruE6NhP"],"enrUri":"enr:-L24QDBobCpuqWpuSWIUaVG11fvJA2p2tppKrmhJiWXHgQbkfRQRhN00BL5uNFEpMI1hmhvwyLVPWmaoPskjCEDXrgYCgmlkgnY0gmlwhKwSsUuKbXVsdGlhZGRyc5YACASsErFLBlMdAAoErBKxSwZTHt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDq9YIB3o4mp1m_t3PlcicrzJk_vr5xtbrqpRxMC7oJXKDdGNwglMdg3VkcIJTH4V3YWt1MgU"}'
2026-01-30 04:31:42.332 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:31:42.333 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-01-30 04:31:42.339 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:31:42.339 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-30_04-31-41__50f51774-3e57-493e-8f09-bd753de1611d__wakuorg_nwaku:latest.log
2026-01-30 04:31:42.339 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:31:42.339 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:31:42.341 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:31:42.341 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.207.218
2026-01-30 04:31:42.341 DEBUG [src.node.docker_mananger] Generated ports ['51379', '51380', '51381', '51382', '51383']
2026-01-30 04:31:42.341 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:31:42.341 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:31:42.341 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:31:42.341 DEBUG [src.node.docker_mananger] docker run -i -t -p 51379:51379 -p 51380:51380 -p 51381:51381 -p 51382:51382 -p 51383:51383 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51381 --rest-port=51379 --tcp-port=51380 --discv5-udp-port=51382 --rest-address=0.0.0.0 --nat=extip:172.18.207.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8ceba4f26685fc8cedca67efbe2bb8db71edadcedfbdae8f7060c38bb917e59c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51383 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QDBobCpuqWpuSWIUaVG11fvJA2p2tppKrmhJiWXHgQbkfRQRhN00BL5uNFEpMI1hmhvwyLVPWmaoPskjCEDXrgYCgmlkgnY0gmlwhKwSsUuKbXVsdGlhZGRyc5YACASsErFLBlMdAAoErBKxSwZTHt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDq9YIB3o4mp1m_t3PlcicrzJk_vr5xtbrqpRxMC7oJXKDdGNwglMdg3VkcIJTH4V3YWt1MgU --filternode=/ip4/172.18.177.75/tcp/21277/p2p/16Uiu2HAmQDmMgSZpwyEEWQiBZVnxKJY9eNdCpLjZCDbSZruE6NhP
2026-01-30 04:31:42.516 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.207.218 waku 79f97701b0a48838590d79a651a3eba626490e9e725d3d076fb5267b20e46e72
2026-01-30 04:31:42.546 DEBUG [src.node.docker_mananger] Container started with ID 79f97701b0a4. Setting up logs at ./log/docker/node2_2026-01-30_04-31-41__50f51774-3e57-493e-8f09-bd753de1611d__wakuorg_nwaku:latest.log
2026-01-30 04:31:42.547 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51379
2026-01-30 04:31:42.547 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:31:43.548 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51379/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:31:43.552 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-30 04:31:43.552 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:31:43.552 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51379/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:31:43.555 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.218/tcp/51380/p2p/16Uiu2HAm1FSjz82tbUUjLUSWZq4dBrzVyjCE8w5VcLXGhPWnchfr","/ip4/172.18.207.218/tcp/51381/ws/p2p/16Uiu2HAm1FSjz82tbUUjLUSWZq4dBrzVyjCE8w5VcLXGhPWnchfr"],"enrUri":"enr:-L24QDVQptmHh2JhC50lmoyuPylIsiP6Huen89ZFmmZsyKJcO0VdV37wzh4l4yOvFmkEh7nKhMssiJ4q5Y6yuMv1RXYCgmlkgnY0gmlwhKwSz9qKbXVsdGlhZGRyc5YACASsEs_aBsi0AAoErBLP2gbItd0DgnJzhQADAQAAiXNlY3AyNTZrMaECVodYWvYcWDGiJh4ZkwWlJe5qshqE0IyV4GphkBSnVVWDdGNwgsi0g3VkcILItoV3YWt1MgA"}'
2026-01-30 04:31:43.555 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:31:43.555 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51379/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.177.75/tcp/21277/p2p/16Uiu2HAmQDmMgSZpwyEEWQiBZVnxKJY9eNdCpLjZCDbSZruE6NhP"]'
2026-01-30 04:31:43.585 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:31:43.586 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-01-30 04:31:43.586 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21276/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-30 04:31:43.598 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:31:43.600 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51379/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d3fdaea5-acbe-4e53-a2ca-e543d21ed598", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-30 04:31:43.612 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d3fdaea5-acbe-4e53-a2ca-e543d21ed598","statusDesc":"OK"}'
2026-01-30 04:31:43.613 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21276/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:31:43.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:31:43.621 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-30 04:31:43.721 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-30 04:31:43.721 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51379/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:31:43.723 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1769747503613689092,"ephemeral":false}]'
2026-01-30 04:31:43.725 DEBUG [src.node.waku_node] Pausing container with id 23bc16217d1b
2026-01-30 04:31:43.734 DEBUG [src.node.waku_node] Unpause container with id 23bc16217d1b
2026-01-30 04:31:43.742 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21276/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:31:43.746 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:31:43.746 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-30 04:31:43.847 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-30 04:31:43.847 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51379/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:31:43.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1769747503742156284,"ephemeral":false}]'
2026-01-30 04:31:43.851 DEBUG [src.node.waku_node] Pausing container with id 79f97701b0a4
2026-01-30 04:31:43.859 DEBUG [src.node.waku_node] Unpause container with id 79f97701b0a4
2026-01-30 04:31:43.868 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21276/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTI=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:31:43.872 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:31:43.872 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-30 04:31:43.973 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-30 04:31:43.973 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51379/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:31:43.976 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTI=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1769747503867960973,"ephemeral":false}]'
2026-01-30 04:31:43.979 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:31:43.980 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:31:43.980 DEBUG [src.node.waku_node] Stopping container with id 23bc16217d1b
2026-01-30 04:31:44.473 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:31:44.473 DEBUG [src.node.waku_node] Stopping container with id 79f97701b0a4
2026-01-30 04:31:44.985 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:31:44.987 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:31:44.993 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:31:44.997 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
