2026-01-30 04:37:53.462 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:37:53.463 DEBUG [tests.conftest] Running test: test_main_node_only_relay__peer_only_store with id: 2026-01-30_04-37-53__65d982f3-bf13-4a2c-b9cf-3fb35575ff49
2026-01-30 04:37:53.463 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:37:53.463 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-30 04:37:53.470 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:37:53.471 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-01-30_04-37-53__65d982f3-bf13-4a2c-b9cf-3fb35575ff49__wakuorg_nwaku:latest.log
2026-01-30 04:37:53.471 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:37:53.471 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:37:53.472 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:37:53.472 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.102.105
2026-01-30 04:37:53.473 DEBUG [src.node.docker_mananger] Generated ports ['8479', '8480', '8481', '8482', '8483']
2026-01-30 04:37:53.473 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:37:53.473 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:37:53.473 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:37:53.473 DEBUG [src.node.docker_mananger] docker run -i -t -p 8479:8479 -p 8480:8480 -p 8481:8481 -p 8482:8482 -p 8483:8483 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8481 --rest-port=8479 --tcp-port=8480 --discv5-udp-port=8482 --rest-address=0.0.0.0 --nat=extip:172.18.102.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaa75181292ea242cdbfefb3a5bcbcef3dbab62dddc1c6bad77c6d1f61caab1f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8483 --metrics-logging=true --store=false --relay=true
2026-01-30 04:37:53.659 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.102.105 waku 6b660e2670fdaadbf0f46975438ceeb9322342544742c8b5af7c2d70350905a3
2026-01-30 04:37:53.692 ERROR [src.node.docker_mananger] Max retries reached for container b5d650897d9d. Exiting log stream.
2026-01-30 04:37:53.695 DEBUG [src.node.docker_mananger] Container started with ID 6b660e2670fd. Setting up logs at ./log/docker/publishing_node1_2026-01-30_04-37-53__65d982f3-bf13-4a2c-b9cf-3fb35575ff49__wakuorg_nwaku:latest.log
2026-01-30 04:37:53.696 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8479
2026-01-30 04:37:53.696 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:37:54.263 ERROR [src.node.docker_mananger] Max retries reached for container 91e9247ea1ff. Exiting log stream.
2026-01-30 04:37:54.696 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8479/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:54.700 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:37:54.700 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:37:54.700 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8479/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:54.702 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.105/tcp/8480/p2p/16Uiu2HAkz7gKcPsUoU8KsijchdRGJHKK3rv9zXa1fWemSBeZsTZi","/ip4/172.18.102.105/tcp/8481/ws/p2p/16Uiu2HAkz7gKcPsUoU8KsijchdRGJHKK3rv9zXa1fWemSBeZsTZi"],"enrUri":"enr:-L24QNGBsI2dFdoICZ3WdSAuJQyUoHsqHspKQTWYvQZF4nrbTpFV1HUJjyu1u5lt6Ud9dj41YJqxAv1TPJgbxQTIuOECgmlkgnY0gmlwhKwSZmmKbXVsdGlhZGRyc5YACASsEmZpBiEgAAoErBJmaQYhId0DgnJzhQADAQAAiXNlY3AyNTZrMaECRa5dzP_KDOVTNQm6zMCCONhvMGP8hPz1WtO3Q0xtMgGDdGNwgiEgg3VkcIIhIoV3YWt1MgE"}'
2026-01-30 04:37:54.703 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:37:54.710 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:37:54.710 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-01-30_04-37-53__65d982f3-bf13-4a2c-b9cf-3fb35575ff49__wakuorg_nwaku:latest.log
2026-01-30 04:37:54.710 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:37:54.710 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:37:54.711 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:37:54.712 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.239
2026-01-30 04:37:54.712 DEBUG [src.node.docker_mananger] Generated ports ['13020', '13021', '13022', '13023', '13024']
2026-01-30 04:37:54.712 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:37:54.712 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:37:54.712 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:37:54.712 DEBUG [src.node.docker_mananger] docker run -i -t -p 13020:13020 -p 13021:13021 -p 13022:13022 -p 13023:13023 -p 13024:13024 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13022 --rest-port=13020 --tcp-port=13021 --discv5-udp-port=13023 --rest-address=0.0.0.0 --nat=extip:172.18.97.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=77667290d202be225dbb2d5ef3fd0deb2ff88e7a7f0e14e8d7f3e0ea98990041 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13024 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNGBsI2dFdoICZ3WdSAuJQyUoHsqHspKQTWYvQZF4nrbTpFV1HUJjyu1u5lt6Ud9dj41YJqxAv1TPJgbxQTIuOECgmlkgnY0gmlwhKwSZmmKbXVsdGlhZGRyc5YACASsEmZpBiEgAAoErBJmaQYhId0DgnJzhQADAQAAiXNlY3AyNTZrMaECRa5dzP_KDOVTNQm6zMCCONhvMGP8hPz1WtO3Q0xtMgGDdGNwgiEgg3VkcIIhIoV3YWt1MgE --storenode=/ip4/172.18.102.105/tcp/8480/p2p/16Uiu2HAkz7gKcPsUoU8KsijchdRGJHKK3rv9zXa1fWemSBeZsTZi --store=true --relay=false
2026-01-30 04:37:54.907 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.239 waku 60f8e4fd95dd59f09902b32cbd707816273144a4bf0ee99a02232faa8c02226c
2026-01-30 04:37:54.940 DEBUG [src.node.docker_mananger] Container started with ID 60f8e4fd95dd. Setting up logs at ./log/docker/store_node1_2026-01-30_04-37-53__65d982f3-bf13-4a2c-b9cf-3fb35575ff49__wakuorg_nwaku:latest.log
2026-01-30 04:37:54.940 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13020
2026-01-30 04:37:54.940 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:37:55.942 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13020/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:55.946 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:37:55.946 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:37:55.946 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13020/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:55.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.239/tcp/13021/p2p/16Uiu2HAmPQJGX4H55UtAXPzT9CRZGD9cWDVKJGGsbRVSuHMdeuLT","/ip4/172.18.97.239/tcp/13022/ws/p2p/16Uiu2HAmPQJGX4H55UtAXPzT9CRZGD9cWDVKJGGsbRVSuHMdeuLT"],"enrUri":"enr:-L24QHTjNBFp_M2FN4oip6b3YmX0mlFbP5VT7kXageFRGajJfQQ4g8xA1hKO537nNtS7XVUBdXenOohZdKOKW6tG-pECgmlkgnY0gmlwhKwSYe-KbXVsdGlhZGRyc5YACASsEmHvBjLdAAoErBJh7wYy3t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDn60ajNct5kVkvr2z8PM7KC-GfLmb_WuSyB_a2jS35UCDdGNwgjLdg3VkcIIy34V3YWt1MgI"}'
2026-01-30 04:37:55.949 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:37:55.949 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13020/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.102.105/tcp/8480/p2p/16Uiu2HAkz7gKcPsUoU8KsijchdRGJHKK3rv9zXa1fWemSBeZsTZi"]'
2026-01-30 04:37:55.979 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:37:55.979 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8479/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-30 04:37:55.991 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:37:55.993 DEBUG [src.steps.store] Relaying message
2026-01-30 04:37:55.994 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8479/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:37:56.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:37:56.000 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-30 04:37:56.201 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-01-30 04:37:56.201 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13020/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:56.204 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-01-30 04:37:56.204 DEBUG [src.steps.store] messages length is 0
2026-01-30 04:37:56.206 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:37:56.207 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:37:56.207 DEBUG [src.node.waku_node] Stopping container with id 6b660e2670fd
2026-01-30 04:37:56.802 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:37:56.802 DEBUG [src.node.waku_node] Stopping container with id 60f8e4fd95dd
2026-01-30 04:37:57.349 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:37:57.352 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:37:57.356 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:37:57.361 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
