2026-01-30 04:38:17.828 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:38:17.829 DEBUG [tests.conftest] Running test: test_publish_with_invalid_timestamps with id: 2026-01-30_04-38-17__62114343-982d-4870-a405-1e3ed4991a93
2026-01-30 04:38:17.829 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:38:17.829 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-30 04:38:17.830 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-01-30 04:38:17.838 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:38:17.839 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-30_04-38-17__62114343-982d-4870-a405-1e3ed4991a93__wakuorg_nwaku:latest.log
2026-01-30 04:38:17.839 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:38:17.839 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:38:17.841 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:38:17.842 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.236
2026-01-30 04:38:17.843 DEBUG [src.node.docker_mananger] Generated ports ['12958', '12959', '12960', '12961', '12962']
2026-01-30 04:38:17.843 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:38:17.844 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:38:17.844 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:38:17.844 DEBUG [src.node.docker_mananger] docker run -i -t -p 12958:12958 -p 12959:12959 -p 12960:12960 -p 12961:12961 -p 12962:12962 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12960 --rest-port=12958 --tcp-port=12959 --discv5-udp-port=12961 --rest-address=0.0.0.0 --nat=extip:172.18.213.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da3c9f5aa5ba90ddd4ceff81534f2bd62af28bd929e6adb8efe3c8fea274109a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12962 --metrics-logging=true --relay=true
2026-01-30 04:38:18.023 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.236 waku cb4564a71cb028130c8c7a6c1e1debfe081baeef52f3e7f8554e67a278aab39e
2026-01-30 04:38:18.057 DEBUG [src.node.docker_mananger] Container started with ID cb4564a71cb0. Setting up logs at ./log/docker/node1_2026-01-30_04-38-17__62114343-982d-4870-a405-1e3ed4991a93__wakuorg_nwaku:latest.log
2026-01-30 04:38:18.057 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12958
2026-01-30 04:38:18.058 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:38:18.083 ERROR [src.node.docker_mananger] Max retries reached for container c30477c0eab3. Exiting log stream.
2026-01-30 04:38:18.659 ERROR [src.node.docker_mananger] Max retries reached for container 2c1532bb465f. Exiting log stream.
2026-01-30 04:38:19.060 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12958/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:38:19.063 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:38:19.063 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:38:19.063 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12958/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:38:19.065 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.236/tcp/12959/p2p/16Uiu2HAmELF34J3LQEfZgdMKDHXY6jSmEWUk5cvvRPuinkemRGkr","/ip4/172.18.213.236/tcp/12960/ws/p2p/16Uiu2HAmELF34J3LQEfZgdMKDHXY6jSmEWUk5cvvRPuinkemRGkr"],"enrUri":"enr:-L24QJDDWRglooSinfRsGu7PMnmXO3Fk-KOw_YWgMOVzE7GvUVSaFnCp1qEUbOwWczbP669qmhXNwPyb_yB157sHcDECgmlkgnY0gmlwhKwS1eyKbXVsdGlhZGRyc5YACASsEtXsBjKfAAoErBLV7AYyoN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGOnxj6fC70nq0WPZ_3Mxyw22LxtP36wRKz2CeTURv-uDdGNwgjKfg3VkcIIyoYV3YWt1MgE"}'
2026-01-30 04:38:19.066 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:38:19.072 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:38:19.072 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-30_04-38-17__62114343-982d-4870-a405-1e3ed4991a93__wakuorg_nwaku:latest.log
2026-01-30 04:38:19.072 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:38:19.072 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:38:19.074 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:38:19.074 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.209.149
2026-01-30 04:38:19.074 DEBUG [src.node.docker_mananger] Generated ports ['61423', '61424', '61425', '61426', '61427']
2026-01-30 04:38:19.074 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:38:19.074 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:38:19.074 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:38:19.074 DEBUG [src.node.docker_mananger] docker run -i -t -p 61423:61423 -p 61424:61424 -p 61425:61425 -p 61426:61426 -p 61427:61427 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61425 --rest-port=61423 --tcp-port=61424 --discv5-udp-port=61426 --rest-address=0.0.0.0 --nat=extip:172.18.209.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a15ad9518a5feb0c089667aa325f6699c06cbd2ffbce4bf4dfdb58f01e5dbbfe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61427 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJDDWRglooSinfRsGu7PMnmXO3Fk-KOw_YWgMOVzE7GvUVSaFnCp1qEUbOwWczbP669qmhXNwPyb_yB157sHcDECgmlkgnY0gmlwhKwS1eyKbXVsdGlhZGRyc5YACASsEtXsBjKfAAoErBLV7AYyoN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGOnxj6fC70nq0WPZ_3Mxyw22LxtP36wRKz2CeTURv-uDdGNwgjKfg3VkcIIyoYV3YWt1MgE
2026-01-30 04:38:19.266 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.209.149 waku 32a95cb39196953b7b1fff2d4a0187b6f5407ac19affe6a557a03a928bff1f78
2026-01-30 04:38:19.298 DEBUG [src.node.docker_mananger] Container started with ID 32a95cb39196. Setting up logs at ./log/docker/node2_2026-01-30_04-38-17__62114343-982d-4870-a405-1e3ed4991a93__wakuorg_nwaku:latest.log
2026-01-30 04:38:19.299 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61423
2026-01-30 04:38:19.299 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:38:20.300 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61423/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:38:20.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:38:20.316 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:38:20.316 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61423/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:38:20.323 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.149/tcp/61424/p2p/16Uiu2HAmHnJPenHgtkVysqUY6QwxtLnMxw5exnQ5xhhGGf4vt9NZ","/ip4/172.18.209.149/tcp/61425/ws/p2p/16Uiu2HAmHnJPenHgtkVysqUY6QwxtLnMxw5exnQ5xhhGGf4vt9NZ"],"enrUri":"enr:-L24QPLwL8OCI7x29ntlTsbu6FxY2BP9fuz1qwaPzL2NL4GSHYEc4uTYvDfTUvjPLYuGk0TxvZhP422QFQjPAGmmQRgCgmlkgnY0gmlwhKwS0ZWKbXVsdGlhZGRyc5YACASsEtGVBu_wAAoErBLRlQbv8d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTCnmJcGH7nlAVJk1CHz-ZU02JMhp6MON8qI1ZkaMeyqDdGNwgu_wg3VkcILv8oV3YWt1MgE"}'
2026-01-30 04:38:20.323 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:38:20.323 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61423/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.236/tcp/12959/p2p/16Uiu2HAmELF34J3LQEfZgdMKDHXY6jSmEWUk5cvvRPuinkemRGkr"]'
2026-01-30 04:38:20.326 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:38:20.327 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-01-30 04:38:20.327 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12958/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-30 04:38:20.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:38:20.331 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61423/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-30 04:38:20.336 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:38:20.336 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:38:20.341 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:38:20.342 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-30 04:38:20.442 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-30 04:38:20.442 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:38:20.444 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769747900336646144,"ephemeral":false,"proof":""}]'
2026-01-30 04:38:20.446 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-30 04:38:20.446 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61423/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:38:20.448 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769747900336646144,"ephemeral":false,"proof":""}]'
2026-01-30 04:38:20.450 INFO [src.steps.relay] WARM UP successful!!
2026-01-30 04:38:20.450 DEBUG [tests.relay.test_publish] Running test with timestamp Timestamp as string number
2026-01-30 04:38:20.451 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:38:20.453 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-30 04:38:20.454 DEBUG [tests.relay.test_publish] Running test with timestamp Invalid large number
2026-01-30 04:38:20.454 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:38:20.457 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-30 04:38:20.457 DEBUG [tests.relay.test_publish] Running test with timestamp Float number
2026-01-30 04:38:20.458 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:38:20.460 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-30 04:38:20.461 DEBUG [tests.relay.test_publish] Running test with timestamp Array instead of timestamp
2026-01-30 04:38:20.462 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:38:20.464 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-30 04:38:20.464 DEBUG [tests.relay.test_publish] Running test with timestamp Object instead of timestamp
2026-01-30 04:38:20.465 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:38:20.467 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-30 04:38:20.468 DEBUG [tests.relay.test_publish] Running test with timestamp ISO 8601 timestamp
2026-01-30 04:38:20.468 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:38:20.471 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-30 04:38:20.471 DEBUG [tests.relay.test_publish] Running test with timestamp Missing
2026-01-30 04:38:20.472 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:38:20.474 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12958/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-30 04:38:20.476 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:38:20.477 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:38:20.478 DEBUG [src.node.waku_node] Stopping container with id cb4564a71cb0
2026-01-30 04:38:21.015 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:38:21.016 DEBUG [src.node.waku_node] Stopping container with id 32a95cb39196
2026-01-30 04:38:21.530 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:38:21.532 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:38:21.539 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:38:21.544 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
