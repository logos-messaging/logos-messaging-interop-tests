2026-01-30 04:35:13.584 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:35:13.584 DEBUG [tests.conftest] Running test: test_content_topic_not_in_docker_flags with id: 2026-01-30_04-35-13__cdb182bf-973f-445e-866e-d8e726481d11
2026-01-30 04:35:13.584 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:35:13.585 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-30 04:35:13.585 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-01-30 04:35:13.592 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:35:13.592 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-30_04-35-13__cdb182bf-973f-445e-866e-d8e726481d11__wakuorg_nwaku:latest.log
2026-01-30 04:35:13.593 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:35:13.593 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:35:13.594 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:35:13.594 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.60
2026-01-30 04:35:13.594 DEBUG [src.node.docker_mananger] Generated ports ['21289', '21290', '21291', '21292', '21293']
2026-01-30 04:35:13.595 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-01-30 04:35:13.595 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:35:13.595 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:35:13.595 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:35:13.595 DEBUG [src.node.docker_mananger] docker run -i -t -p 21289:21289 -p 21290:21290 -p 21291:21291 -p 21292:21292 -p 21293:21293 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21291 --rest-port=21289 --tcp-port=21290 --discv5-udp-port=21292 --rest-address=0.0.0.0 --nat=extip:172.18.117.60 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fa9c2e7b4e79de331fbeaeb27d436cdcdf64a0f30dddf0bbbd3ee031d5b90ff4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21293 --metrics-logging=true --relay=true --filter=true
2026-01-30 04:35:13.784 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.60 waku b96aa046e13bdee26cde6a7126638eb25dad404018cc0c831432e98c87279c29
2026-01-30 04:35:13.817 DEBUG [src.node.docker_mananger] Container started with ID b96aa046e13b. Setting up logs at ./log/docker/node1_2026-01-30_04-35-13__cdb182bf-973f-445e-866e-d8e726481d11__wakuorg_nwaku:latest.log
2026-01-30 04:35:13.817 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21289
2026-01-30 04:35:13.817 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:35:13.829 ERROR [src.node.docker_mananger] Max retries reached for container cbb399c72329. Exiting log stream.
2026-01-30 04:35:14.382 ERROR [src.node.docker_mananger] Max retries reached for container f184d523ba06. Exiting log stream.
2026-01-30 04:35:14.818 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21289/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:14.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:35:14.821 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:35:14.821 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21289/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:14.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.60/tcp/21290/p2p/16Uiu2HAmThBszuwGr36ncVuVEiK66oEkHLQJQDSRh9VEvuqfjNRB","/ip4/172.18.117.60/tcp/21291/ws/p2p/16Uiu2HAmThBszuwGr36ncVuVEiK66oEkHLQJQDSRh9VEvuqfjNRB"],"enrUri":"enr:-L24QIb1-W1yFc1FvRfXEL_z5M9Qp0OHeeDtYg1_QBDgkvlZB9GHe5KITbwmnDZWpazUkVAcQPEUp1Cepz8vE5FJ4LMCgmlkgnY0gmlwhKwSdTyKbXVsdGlhZGRyc5YACASsEnU8BlMqAAoErBJ1PAZTK90DgnJzhQACAQAAiXNlY3AyNTZrMaED32-Afn5N_MU0bATxGue5h5-Xpbo_YvJ7UOKwACCpeN6DdGNwglMqg3VkcIJTLIV3YWt1MgU"}'
2026-01-30 04:35:14.824 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:35:14.831 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:35:14.831 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-30_04-35-13__cdb182bf-973f-445e-866e-d8e726481d11__wakuorg_nwaku:latest.log
2026-01-30 04:35:14.831 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:35:14.831 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:35:14.832 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:35:14.833 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.102.42
2026-01-30 04:35:14.833 DEBUG [src.node.docker_mananger] Generated ports ['37874', '37875', '37876', '37877', '37878']
2026-01-30 04:35:14.833 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-01-30 04:35:14.833 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:35:14.833 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:35:14.833 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:35:14.834 DEBUG [src.node.docker_mananger] docker run -i -t -p 37874:37874 -p 37875:37875 -p 37876:37876 -p 37877:37877 -p 37878:37878 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37876 --rest-port=37874 --tcp-port=37875 --discv5-udp-port=37877 --rest-address=0.0.0.0 --nat=extip:172.18.102.42 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ad40a15574299d934cca8db0a0cce48b3fa2079dd84791c8d3abd3262abdf060 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37878 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QIb1-W1yFc1FvRfXEL_z5M9Qp0OHeeDtYg1_QBDgkvlZB9GHe5KITbwmnDZWpazUkVAcQPEUp1Cepz8vE5FJ4LMCgmlkgnY0gmlwhKwSdTyKbXVsdGlhZGRyc5YACASsEnU8BlMqAAoErBJ1PAZTK90DgnJzhQACAQAAiXNlY3AyNTZrMaED32-Afn5N_MU0bATxGue5h5-Xpbo_YvJ7UOKwACCpeN6DdGNwglMqg3VkcIJTLIV3YWt1MgU
2026-01-30 04:35:15.031 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.102.42 waku 37e2dd7c64457967bd6cebb122888122a2779c547b3b0c7b0b2e64b206ce2159
2026-01-30 04:35:15.065 DEBUG [src.node.docker_mananger] Container started with ID 37e2dd7c6445. Setting up logs at ./log/docker/node2_2026-01-30_04-35-13__cdb182bf-973f-445e-866e-d8e726481d11__wakuorg_nwaku:latest.log
2026-01-30 04:35:15.065 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37874
2026-01-30 04:35:15.065 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:35:16.066 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37874/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:16.074 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-30 04:35:16.075 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:35:16.077 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37874/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:16.080 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.42/tcp/37875/p2p/16Uiu2HAmPpXmF27kp2T7oFU3LqA1iZ6KRNusSUAERuQEp2ALqMnw","/ip4/172.18.102.42/tcp/37876/ws/p2p/16Uiu2HAmPpXmF27kp2T7oFU3LqA1iZ6KRNusSUAERuQEp2ALqMnw"],"enrUri":"enr:-L24QDYjmUwyutKZ2U1WuM-mkgCqfDksga_cCjagl4kGOuzkT53R_669Xgeh0fHi-pydY2Y3Bef6fsGJOf4tnUqJ97MCgmlkgnY0gmlwhKwSZiqKbXVsdGlhZGRyc5YACASsEmYqBpPzAAoErBJmKgaT9N0DgnJzhQACAQAAiXNlY3AyNTZrMaEDpeJNX3F9j3QJKNVdWokmRFCzzGa2uBMDyV55_zy5CkiDdGNwgpPzg3VkcIKT9YV3YWt1MgE"}'
2026-01-30 04:35:16.080 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:35:16.081 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37874/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.60/tcp/21290/p2p/16Uiu2HAmThBszuwGr36ncVuVEiK66oEkHLQJQDSRh9VEvuqfjNRB"]'
2026-01-30 04:35:16.083 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:35:16.083 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21289/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-01-30 04:35:16.086 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:35:16.086 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37874/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-01-30 04:35:16.088 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:35:16.089 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21289/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-30 04:35:16.093 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:35:16.093 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-30 04:35:16.194 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-30 04:35:16.194 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21289/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:16.197 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769747716088994111,"ephemeral":false,"proof":""}]'
2026-01-30 04:35:16.199 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-30 04:35:16.199 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37874/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:35:16.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769747716088994111,"ephemeral":false,"proof":""}]'
2026-01-30 04:35:16.203 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:35:16.204 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:35:16.205 DEBUG [src.node.waku_node] Stopping container with id b96aa046e13b
2026-01-30 04:35:16.739 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:35:16.739 DEBUG [src.node.waku_node] Stopping container with id 37e2dd7c6445
2026-01-30 04:35:17.276 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:35:17.277 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:35:17.283 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:35:17.288 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
