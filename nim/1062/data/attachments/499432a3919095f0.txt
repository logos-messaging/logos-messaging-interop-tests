2026-01-30 04:37:40.603 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-30 04:37:40.603 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_invalid_request_id with id: 2026-01-30_04-37-40__fd0e9259-19b0-42ee-9c73-865fc143ca92
2026-01-30 04:37:40.603 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-30 04:37:40.604 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-30 04:37:40.604 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-01-30 04:37:40.610 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:37:40.610 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-30_04-37-40__fd0e9259-19b0-42ee-9c73-865fc143ca92__wakuorg_nwaku:latest.log
2026-01-30 04:37:40.610 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:37:40.610 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:37:40.612 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:37:40.612 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.209.124
2026-01-30 04:37:40.612 DEBUG [src.node.docker_mananger] Generated ports ['61238', '61239', '61240', '61241', '61242']
2026-01-30 04:37:40.612 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:37:40.612 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:37:40.612 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:37:40.612 DEBUG [src.node.docker_mananger] docker run -i -t -p 61238:61238 -p 61239:61239 -p 61240:61240 -p 61241:61241 -p 61242:61242 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61240 --rest-port=61238 --tcp-port=61239 --discv5-udp-port=61241 --rest-address=0.0.0.0 --nat=extip:172.18.209.124 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc30447af7b26cbeed79b533c6bf05f4cdcb38ac7cec8d25ac05cb2ad1b4d7ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61242 --metrics-logging=true --relay=true --filter=true
2026-01-30 04:37:40.786 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.209.124 waku 590c855d805bf25b41731d9e505d5f2da3bb9cf3e216e37f90544cb5a1750a62
2026-01-30 04:37:40.821 DEBUG [src.node.docker_mananger] Container started with ID 590c855d805b. Setting up logs at ./log/docker/node1_2026-01-30_04-37-40__fd0e9259-19b0-42ee-9c73-865fc143ca92__wakuorg_nwaku:latest.log
2026-01-30 04:37:40.822 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61238
2026-01-30 04:37:40.823 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:37:40.846 ERROR [src.node.docker_mananger] Max retries reached for container 0bc873bc3d4a. Exiting log stream.
2026-01-30 04:37:41.358 ERROR [src.node.docker_mananger] Max retries reached for container ed6bf4d865ad. Exiting log stream.
2026-01-30 04:37:41.823 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61238/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:41.826 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-30 04:37:41.826 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:37:41.827 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61238/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:41.829 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.124/tcp/61239/p2p/16Uiu2HAm3mxc6mmgYH5N3gdfsn9fmXKehue6pL9SsRmPGYrSLAS7","/ip4/172.18.209.124/tcp/61240/ws/p2p/16Uiu2HAm3mxc6mmgYH5N3gdfsn9fmXKehue6pL9SsRmPGYrSLAS7"],"enrUri":"enr:-L24QPhERvU0oiCz0Pn0vxrEzkirimQbjmFPzv2QBK68maKENoCT7njcRJr6_okJS5op_OlWQ8IRDq2VcNnRbOHPULACgmlkgnY0gmlwhKwS0XyKbXVsdGlhZGRyc5YACASsEtF8Bu83AAoErBLRfAbvON0DgnJzhQADAQAAiXNlY3AyNTZrMaECfA_pIC9JEmQN2ewHCJfiBi5jKWaS5vBTn71UrB8cpFyDdGNwgu83g3VkcILvOYV3YWt1MgU"}'
2026-01-30 04:37:41.829 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:37:41.829 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-01-30 04:37:41.836 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-30 04:37:41.836 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-30_04-37-40__fd0e9259-19b0-42ee-9c73-865fc143ca92__wakuorg_nwaku:latest.log
2026-01-30 04:37:41.836 DEBUG [src.node.waku_node] Starting Node...
2026-01-30 04:37:41.836 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-30 04:37:41.838 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-30 04:37:41.838 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.244.83
2026-01-30 04:37:41.838 DEBUG [src.node.docker_mananger] Generated ports ['4869', '4870', '4871', '4872', '4873']
2026-01-30 04:37:41.838 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-30 04:37:41.838 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-30 04:37:41.838 DEBUG [src.node.waku_node] Using volumes []
2026-01-30 04:37:41.839 DEBUG [src.node.docker_mananger] docker run -i -t -p 4869:4869 -p 4870:4870 -p 4871:4871 -p 4872:4872 -p 4873:4873 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4871 --rest-port=4869 --tcp-port=4870 --discv5-udp-port=4872 --rest-address=0.0.0.0 --nat=extip:172.18.244.83 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2ec2d7c77cd921fac7fd2f357bbe67c597e17b8bddcb7400087d5df5eae426f5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4873 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QPhERvU0oiCz0Pn0vxrEzkirimQbjmFPzv2QBK68maKENoCT7njcRJr6_okJS5op_OlWQ8IRDq2VcNnRbOHPULACgmlkgnY0gmlwhKwS0XyKbXVsdGlhZGRyc5YACASsEtF8Bu83AAoErBLRfAbvON0DgnJzhQADAQAAiXNlY3AyNTZrMaECfA_pIC9JEmQN2ewHCJfiBi5jKWaS5vBTn71UrB8cpFyDdGNwgu83g3VkcILvOYV3YWt1MgU --filternode=/ip4/172.18.209.124/tcp/61239/p2p/16Uiu2HAm3mxc6mmgYH5N3gdfsn9fmXKehue6pL9SsRmPGYrSLAS7
2026-01-30 04:37:42.015 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.244.83 waku 9af9b38ec53f0412d9ccb91dc870881a1622c8e883aa3799bf88821182f06d22
2026-01-30 04:37:42.046 DEBUG [src.node.docker_mananger] Container started with ID 9af9b38ec53f. Setting up logs at ./log/docker/node2_2026-01-30_04-37-40__fd0e9259-19b0-42ee-9c73-865fc143ca92__wakuorg_nwaku:latest.log
2026-01-30 04:37:42.047 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4869
2026-01-30 04:37:42.048 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-30 04:37:43.048 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4869/health" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:43.052 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-30 04:37:43.052 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-30 04:37:43.053 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4869/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-30 04:37:43.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.83/tcp/4870/p2p/16Uiu2HAmTHVR33JN1r818TwPedXT3FXyjt49QEiBLfEoUtYDsm9o","/ip4/172.18.244.83/tcp/4871/ws/p2p/16Uiu2HAmTHVR33JN1r818TwPedXT3FXyjt49QEiBLfEoUtYDsm9o"],"enrUri":"enr:-L24QGhki0IQS6hnwW5Th2tC1NaIZmsd23_LTQeGWtiwhvvVPO854YP7HfhIAukFs3_81z_COBpkvhDAAT-UMaqRf5UCgmlkgnY0gmlwhKwS9FOKbXVsdGlhZGRyc5YACASsEvRTBhMGAAoErBL0UwYTB90DgnJzhQADAQAAiXNlY3AyNTZrMaED2V1juD7Cyyyzor_b5tBR9Hu4HA_bhtxSPQW3zNs1xV6DdGNwghMGg3VkcIITCIV3YWt1MgA"}'
2026-01-30 04:37:43.055 INFO [src.node.waku_node] REST service is ready !!
2026-01-30 04:37:43.055 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4869/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.209.124/tcp/61239/p2p/16Uiu2HAm3mxc6mmgYH5N3gdfsn9fmXKehue6pL9SsRmPGYrSLAS7"]'
2026-01-30 04:37:43.088 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:37:43.089 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-01-30 04:37:43.090 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61238/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-30 04:37:43.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-30 04:37:43.101 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4869/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e241c378-ae10-4f42-8bd2-1118e8885e4f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-30 04:37:43.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e241c378-ae10-4f42-8bd2-1118e8885e4f","statusDesc":"OK"}'
2026-01-30 04:37:43.114 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:4869/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-30 04:37:43.117 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:4869/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-01-30 04:37:43.119 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-30 04:37:43.120 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-30 04:37:43.120 DEBUG [src.node.waku_node] Stopping container with id 590c855d805b
2026-01-30 04:37:43.656 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:37:43.658 DEBUG [src.node.waku_node] Stopping container with id 9af9b38ec53f
2026-01-30 04:37:44.215 DEBUG [src.node.waku_node] Container stopped.
2026-01-30 04:37:44.218 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-30 04:37:44.222 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-30 04:37:44.226 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
