2026-01-31 04:33:08.790 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-31 04:33:08.791 DEBUG [tests.conftest] Running test: test_metrics_after_filter_get with id: 2026-01-31_04-33-08__0a602ff5-3cec-44bf-8683-84bf8e754ca5
2026-01-31 04:33:08.791 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-31 04:33:08.791 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-31 04:33:08.791 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-01-31 04:33:08.792 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-31 04:33:08.792 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-31 04:33:08.792 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-01-31 04:33:08.798 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:33:08.799 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-31_04-33-08__0a602ff5-3cec-44bf-8683-84bf8e754ca5__wakuorg_nwaku:latest.log
2026-01-31 04:33:08.799 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:33:08.799 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:33:08.800 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:33:08.800 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.62.169
2026-01-31 04:33:08.801 DEBUG [src.node.docker_mananger] Generated ports ['1209', '1210', '1211', '1212', '1213']
2026-01-31 04:33:08.801 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:33:08.801 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:33:08.801 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:33:08.801 DEBUG [src.node.docker_mananger] docker run -i -t -p 1209:1209 -p 1210:1210 -p 1211:1211 -p 1212:1212 -p 1213:1213 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1211 --rest-port=1209 --tcp-port=1210 --discv5-udp-port=1212 --rest-address=0.0.0.0 --nat=extip:172.18.62.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=774c5fb718cc619cfab8ee8a64acf5aed8abbd207e0ab4584d1defe93f4e5eed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1213 --metrics-logging=true --relay=true --filter=true
2026-01-31 04:33:08.975 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.62.169 waku efaf1cd2f06a017e85bc70bd1f4cf33baa57232d7f9d8df75efefba0fd490efb
2026-01-31 04:33:09.006 DEBUG [src.node.docker_mananger] Container started with ID efaf1cd2f06a. Setting up logs at ./log/docker/node1_2026-01-31_04-33-08__0a602ff5-3cec-44bf-8683-84bf8e754ca5__wakuorg_nwaku:latest.log
2026-01-31 04:33:09.007 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1209
2026-01-31 04:33:09.007 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:33:09.602 ERROR [src.node.docker_mananger] Max retries reached for container 9c4f4b9c2315. Exiting log stream.
2026-01-31 04:33:10.008 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1209/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:33:10.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:33:10.011 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:33:10.011 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1209/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:33:10.013 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.169/tcp/1210/p2p/16Uiu2HAmNXX4LZbFrE5Xg5o1oSxWVS621ui5XnZqyzZFez9viAYj","/ip4/172.18.62.169/tcp/1211/ws/p2p/16Uiu2HAmNXX4LZbFrE5Xg5o1oSxWVS621ui5XnZqyzZFez9viAYj"],"enrUri":"enr:-L24QF385TzIfrrGs_IMdvmOYtz1ZTbGEOZ-X2y-3vVwrDrMOLze7J4Th0Zzk7ofjtIWwJjnPUOPCk0XFACKOWOwX6YCgmlkgnY0gmlwhKwSPqmKbXVsdGlhZGRyc5YACASsEj6pBgS6AAoErBI-qQYEu90DgnJzhQADAQAAiXNlY3AyNTZrMaEDkqrxsnhHbJN60u_0koikKyNkgckuPF-iq_ocSUAIyeyDdGNwggS6g3VkcIIEvIV3YWt1MgU"}'
2026-01-31 04:33:10.014 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:33:10.014 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-01-31 04:33:10.021 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:33:10.021 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-31_04-33-08__0a602ff5-3cec-44bf-8683-84bf8e754ca5__wakuorg_nwaku:latest.log
2026-01-31 04:33:10.021 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:33:10.021 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:33:10.023 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:33:10.023 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.139.47
2026-01-31 04:33:10.023 DEBUG [src.node.docker_mananger] Generated ports ['22108', '22109', '22110', '22111', '22112']
2026-01-31 04:33:10.023 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:33:10.023 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:33:10.023 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:33:10.024 DEBUG [src.node.docker_mananger] docker run -i -t -p 22108:22108 -p 22109:22109 -p 22110:22110 -p 22111:22111 -p 22112:22112 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22110 --rest-port=22108 --tcp-port=22109 --discv5-udp-port=22111 --rest-address=0.0.0.0 --nat=extip:172.18.139.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbcf0148ac207543bf33bb63c14edb9b6dcfc942d6ef3b2de53f425266dbbd19 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22112 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QF385TzIfrrGs_IMdvmOYtz1ZTbGEOZ-X2y-3vVwrDrMOLze7J4Th0Zzk7ofjtIWwJjnPUOPCk0XFACKOWOwX6YCgmlkgnY0gmlwhKwSPqmKbXVsdGlhZGRyc5YACASsEj6pBgS6AAoErBI-qQYEu90DgnJzhQADAQAAiXNlY3AyNTZrMaEDkqrxsnhHbJN60u_0koikKyNkgckuPF-iq_ocSUAIyeyDdGNwggS6g3VkcIIEvIV3YWt1MgU --filternode=/ip4/172.18.62.169/tcp/1210/p2p/16Uiu2HAmNXX4LZbFrE5Xg5o1oSxWVS621ui5XnZqyzZFez9viAYj
2026-01-31 04:33:10.200 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.139.47 waku 0e6fb7ab2ce21a01566d61605da1b3d0040930a6567c8f323fd8d3f095990074
2026-01-31 04:33:10.228 DEBUG [src.node.docker_mananger] Container started with ID 0e6fb7ab2ce2. Setting up logs at ./log/docker/node2_2026-01-31_04-33-08__0a602ff5-3cec-44bf-8683-84bf8e754ca5__wakuorg_nwaku:latest.log
2026-01-31 04:33:10.229 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22108
2026-01-31 04:33:10.230 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:33:11.230 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22108/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:33:11.234 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-31 04:33:11.234 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:33:11.234 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22108/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:33:11.237 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.47/tcp/22109/p2p/16Uiu2HAm3vo5Wdx9xUSd8MUBT5fhaVTkFpNvDojuEH4ZrXaEqY5K","/ip4/172.18.139.47/tcp/22110/ws/p2p/16Uiu2HAm3vo5Wdx9xUSd8MUBT5fhaVTkFpNvDojuEH4ZrXaEqY5K"],"enrUri":"enr:-L24QJn6Hg2IseUitGZw_mtu3ij7j5z52kgXlxMmpV8eT6tPfnrSEAM8NklwxVbpkTMk0dyVHgYud5dTOHzSRcXkBWoCgmlkgnY0gmlwhKwSiy-KbXVsdGlhZGRyc5YACASsEosvBlZdAAoErBKLLwZWXt0DgnJzhQADAQAAiXNlY3AyNTZrMaECflNdgsNa2JiXAfB3xd8oWIUDCiVaukxw_uWt1nglJ0aDdGNwglZdg3VkcIJWX4V3YWt1MgA"}'
2026-01-31 04:33:11.237 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:33:11.237 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22108/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.62.169/tcp/1210/p2p/16Uiu2HAmNXX4LZbFrE5Xg5o1oSxWVS621ui5XnZqyzZFez9viAYj"]'
2026-01-31 04:33:11.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:33:11.269 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-01-31 04:33:11.270 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1209/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-31 04:33:11.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:33:11.283 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22108/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "14ef9755-aab1-4b13-b0b8-33efba813e33", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-31 04:33:11.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"14ef9755-aab1-4b13-b0b8-33efba813e33","statusDesc":"OK"}'
2026-01-31 04:33:11.298 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1209/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-31 04:33:11.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:33:11.306 DEBUG [src.libs.common] Sleeping for 0.5 seconds
2026-01-31 04:33:11.806 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22108/filter/v2/messages/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:33:11.809 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769833991298715223,"ephemeral":false}]'
2026-01-31 04:33:11.809 DEBUG [src.libs.common] Sleeping for 5 seconds
2026-01-31 04:33:16.810 DEBUG [src.steps.metrics] Checking metric: libp2p_peers has 1
2026-01-31 04:33:16.814 DEBUG [src.steps.metrics] Found metric: libp2p_peers with value 1.0
2026-01-31 04:33:16.815 DEBUG [src.steps.metrics] Checking metric: libp2p_pubsub_peers has 1
2026-01-31 04:33:16.818 DEBUG [src.steps.metrics] Found metric: libp2p_pubsub_peers with value 1.0
2026-01-31 04:33:16.818 DEBUG [src.steps.metrics] Checking metric: libp2p_pubsub_topics has 1
2026-01-31 04:33:16.822 DEBUG [src.steps.metrics] Found metric: libp2p_pubsub_topics with value 2.0
2026-01-31 04:33:16.822 DEBUG [src.steps.metrics] Checking metric: libp2p_pubsub_subscriptions_total has 1
2026-01-31 04:33:16.825 DEBUG [src.steps.metrics] Found metric: libp2p_pubsub_subscriptions_total with value 2.0
2026-01-31 04:33:16.825 DEBUG [src.steps.metrics] Checking metric: waku_peer_store_size has 1
2026-01-31 04:33:16.829 DEBUG [src.steps.metrics] Found metric: waku_peer_store_size with value 1.0
2026-01-31 04:33:16.829 DEBUG [src.steps.metrics] Checking metric: waku_histogram_message_size_count has 1
2026-01-31 04:33:16.832 DEBUG [src.steps.metrics] Found metric: waku_histogram_message_size_count with value 1.0
2026-01-31 04:33:16.832 DEBUG [src.steps.metrics] Checking metric: waku_node_messages_total{type="relay"} has 1
2026-01-31 04:33:16.835 DEBUG [src.steps.metrics] Found metric: waku_node_messages_total{type="relay"} with value 1.0
2026-01-31 04:33:16.836 DEBUG [src.steps.metrics] Checking metric: waku_service_peers{protocol="/vac/waku/filter-subscribe/2.0.0-beta1",peerId="/ip4/172.18.62.169/tcp/1210"} has 1
2026-01-31 04:33:16.839 DEBUG [src.steps.metrics] Found metric: waku_service_peers{protocol="/vac/waku/filter-subscribe/2.0.0-beta1",peerId="/ip4/172.18.62.169/tcp/1210"} with value 1.0
2026-01-31 04:33:16.839 DEBUG [src.steps.metrics] Checking metric: libp2p_peers has 1
2026-01-31 04:33:16.842 DEBUG [src.steps.metrics] Found metric: libp2p_peers with value 1.0
2026-01-31 04:33:16.843 DEBUG [src.steps.metrics] Checking metric: libp2p_total_dial_attempts_total has 1
2026-01-31 04:33:16.845 DEBUG [src.steps.metrics] Found metric: libp2p_total_dial_attempts_total with value 1.0
2026-01-31 04:33:16.846 DEBUG [src.steps.metrics] Checking metric: waku_peer_store_size has 1
2026-01-31 04:33:16.849 DEBUG [src.steps.metrics] Found metric: waku_peer_store_size with value 1.0
2026-01-31 04:33:16.851 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-31 04:33:16.852 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-31 04:33:16.852 DEBUG [src.node.waku_node] Stopping container with id efaf1cd2f06a
2026-01-31 04:33:17.372 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:33:17.372 DEBUG [src.node.waku_node] Stopping container with id 0e6fb7ab2ce2
2026-01-31 04:33:17.916 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:33:17.919 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-31 04:33:17.926 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-31 04:33:17.930 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
