2026-01-31 04:35:37.650 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-31 04:35:37.650 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2026-01-31_04-35-37__96e9ebe8-0be1-4925-b684-4f40de4572e9
2026-01-31 04:35:37.650 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-31 04:35:37.651 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-01-31 04:35:37.657 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:35:37.657 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-01-31_04-35-37__96e9ebe8-0be1-4925-b684-4f40de4572e9__wakuorg_nwaku:latest.log
2026-01-31 04:35:37.657 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:35:37.658 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:35:37.659 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:35:37.659 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.127
2026-01-31 04:35:37.659 DEBUG [src.node.docker_mananger] Generated ports ['37244', '37245', '37246', '37247', '37248']
2026-01-31 04:35:37.659 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:35:37.660 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:35:37.660 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:35:37.660 DEBUG [src.node.docker_mananger] docker run -i -t -p 37244:37244 -p 37245:37245 -p 37246:37246 -p 37247:37247 -p 37248:37248 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37246 --rest-port=37244 --tcp-port=37245 --discv5-udp-port=37247 --rest-address=0.0.0.0 --nat=extip:172.18.39.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1eba8d1bf39ecd21b719f547edff13c5e82fb5ffb1f35294b8fdc5afe9deea6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37248 --metrics-logging=true --lightpush=true --relay=true
2026-01-31 04:35:37.841 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.127 waku 0f1a35dfaef60f48cb690f44994c5309fcb310bf4e39832b13e81ffba9882954
2026-01-31 04:35:37.870 DEBUG [src.node.docker_mananger] Container started with ID 0f1a35dfaef6. Setting up logs at ./log/docker/receiving_node1_2026-01-31_04-35-37__96e9ebe8-0be1-4925-b684-4f40de4572e9__wakuorg_nwaku:latest.log
2026-01-31 04:35:37.870 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37244
2026-01-31 04:35:37.870 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:35:37.907 ERROR [src.node.docker_mananger] Max retries reached for container 474eef9d45b6. Exiting log stream.
2026-01-31 04:35:38.441 ERROR [src.node.docker_mananger] Max retries reached for container 91c752c0949a. Exiting log stream.
2026-01-31 04:35:38.871 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37244/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:35:38.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:35:38.874 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:35:38.874 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37244/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:35:38.877 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.127/tcp/37245/p2p/16Uiu2HAmFE5mrfBqDsApvzmY54bkVZkP9pnmx2USjrC1hsiBzjVa","/ip4/172.18.39.127/tcp/37246/ws/p2p/16Uiu2HAmFE5mrfBqDsApvzmY54bkVZkP9pnmx2USjrC1hsiBzjVa"],"enrUri":"enr:-L24QIlCcWfxKeMmbAZs-0_hxfI0T0q_DcdVFpAKlDzDM8Q_Btnr2W4wL4TFEVrAp-bRBxYYCTXArqJd1QSd8zNCpfUCgmlkgnY0gmlwhKwSJ3-KbXVsdGlhZGRyc5YACASsEid_BpF9AAoErBInfwaRft0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJjGsSfTxNk2K72enjJHlmSntMq0wV5hNaB_tIq6CuQmDdGNwgpF9g3VkcIKRf4V3YWt1Mgk"}'
2026-01-31 04:35:38.877 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:35:38.883 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:35:38.884 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-01-31_04-35-37__96e9ebe8-0be1-4925-b684-4f40de4572e9__wakuorg_nwaku:latest.log
2026-01-31 04:35:38.884 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:35:38.884 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:35:38.885 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:35:38.885 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.161.134
2026-01-31 04:35:38.886 DEBUG [src.node.docker_mananger] Generated ports ['7222', '7223', '7224', '7225', '7226']
2026-01-31 04:35:38.886 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:35:38.886 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:35:38.886 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:35:38.886 DEBUG [src.node.docker_mananger] docker run -i -t -p 7222:7222 -p 7223:7223 -p 7224:7224 -p 7225:7225 -p 7226:7226 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7224 --rest-port=7222 --tcp-port=7223 --discv5-udp-port=7225 --rest-address=0.0.0.0 --nat=extip:172.18.161.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c70bbbff7dcfcb800aaccdc59f3f85f1dd0de8e4bcffaddc9c466e8f53a757e0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7226 --metrics-logging=true --lightpush=false --relay=true
2026-01-31 04:35:39.073 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.161.134 waku 151bd7584be6df7495fcfece7bd34e129f22afa8bfc019dcd3e3865b9adc5a4b
2026-01-31 04:35:39.105 DEBUG [src.node.docker_mananger] Container started with ID 151bd7584be6. Setting up logs at ./log/docker/receiving_node2_2026-01-31_04-35-37__96e9ebe8-0be1-4925-b684-4f40de4572e9__wakuorg_nwaku:latest.log
2026-01-31 04:35:39.105 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7222
2026-01-31 04:35:39.105 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:35:40.106 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7222/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:35:40.109 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:35:40.109 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:35:40.110 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7222/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:35:40.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.134/tcp/7223/p2p/16Uiu2HAmDjxefDhgg164mS3G8meqmpsLNUQa3CFQy32foGeH8LhD","/ip4/172.18.161.134/tcp/7224/ws/p2p/16Uiu2HAmDjxefDhgg164mS3G8meqmpsLNUQa3CFQy32foGeH8LhD"],"enrUri":"enr:-L24QE_jqf28LaU5pFpDpzHUq33rP3KOI32pDlXFCMUBrEVEXCo-hSpSmx4egSMZy24JODZpE0oI0S9_-ZKuFX5duWQCgmlkgnY0gmlwhKwSoYaKbXVsdGlhZGRyc5YACASsEqGGBhw3AAoErBKhhgYcON0DgnJzhQADAQAAiXNlY3AyNTZrMaEDECGrDmgchYoStOVQv8kq7l7lws_SMGWPHKMJfnbEo8CDdGNwghw3g3VkcIIcOYV3YWt1MgE"}'
2026-01-31 04:35:40.112 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:35:40.112 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7222/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.127/tcp/37245/p2p/16Uiu2HAmFE5mrfBqDsApvzmY54bkVZkP9pnmx2USjrC1hsiBzjVa"]'
2026-01-31 04:35:40.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:35:40.159 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:35:40.161 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-01-31_04-35-37__96e9ebe8-0be1-4925-b684-4f40de4572e9__wakuorg_nwaku:latest.log
2026-01-31 04:35:40.162 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:35:40.164 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:35:40.165 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:35:40.165 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.199.8
2026-01-31 04:35:40.165 DEBUG [src.node.docker_mananger] Generated ports ['30572', '30573', '30574', '30575', '30576']
2026-01-31 04:35:40.165 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:35:40.166 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:35:40.166 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:35:40.166 DEBUG [src.node.docker_mananger] docker run -i -t -p 30572:30572 -p 30573:30573 -p 30574:30574 -p 30575:30575 -p 30576:30576 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30574 --rest-port=30572 --tcp-port=30573 --discv5-udp-port=30575 --rest-address=0.0.0.0 --nat=extip:172.18.199.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eda9d69d435dfc04c72945cab70e6999a4fe0a584510bdc171601306b16d4281 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30576 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIlCcWfxKeMmbAZs-0_hxfI0T0q_DcdVFpAKlDzDM8Q_Btnr2W4wL4TFEVrAp-bRBxYYCTXArqJd1QSd8zNCpfUCgmlkgnY0gmlwhKwSJ3-KbXVsdGlhZGRyc5YACASsEid_BpF9AAoErBInfwaRft0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJjGsSfTxNk2K72enjJHlmSntMq0wV5hNaB_tIq6CuQmDdGNwgpF9g3VkcIKRf4V3YWt1Mgk --lightpushnode=/ip4/172.18.39.127/tcp/37245/p2p/16Uiu2HAmFE5mrfBqDsApvzmY54bkVZkP9pnmx2USjrC1hsiBzjVa --lightpush=true --relay=true
2026-01-31 04:35:40.356 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.199.8 waku dd34467ace518351a3f1000edf6311c2a7fae82b391869abf263ac124f719513
2026-01-31 04:35:40.388 DEBUG [src.node.docker_mananger] Container started with ID dd34467ace51. Setting up logs at ./log/docker/lightpush_node1_2026-01-31_04-35-37__96e9ebe8-0be1-4925-b684-4f40de4572e9__wakuorg_nwaku:latest.log
2026-01-31 04:35:40.388 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30572
2026-01-31 04:35:40.388 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:35:41.389 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30572/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:35:41.393 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:35:41.393 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:35:41.393 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30572/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:35:41.395 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.8/tcp/30573/p2p/16Uiu2HAkv2LLjN1tX9ciCp8mujVF8Nne1rz1x8U9Er4xwGWfK9YG","/ip4/172.18.199.8/tcp/30574/ws/p2p/16Uiu2HAkv2LLjN1tX9ciCp8mujVF8Nne1rz1x8U9Er4xwGWfK9YG"],"enrUri":"enr:-L24QERTFG39I68yZnpYH05ajJpUNadaT3ahGKMc93cf9WJyelMtaAwMNkw6h_tZ0S0sGsBvAjPOO9EydClwGCJSz-oCgmlkgnY0gmlwhKwSxwiKbXVsdGlhZGRyc5YACASsEscIBndtAAoErBLHCAZ3bt0DgnJzhQADAQAAiXNlY3AyNTZrMaECCOEfVyOAw-yXQSKOp8DhMCZNwJtBFUs-FBy0dAiWEEWDdGNwgndtg3VkcIJ3b4V3YWt1Mgk"}'
2026-01-31 04:35:41.395 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:35:41.396 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30572/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.127/tcp/37245/p2p/16Uiu2HAmFE5mrfBqDsApvzmY54bkVZkP9pnmx2USjrC1hsiBzjVa"]'
2026-01-31 04:35:41.440 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:35:41.443 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30572/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.161.134/tcp/7223/p2p/16Uiu2HAmDjxefDhgg164mS3G8meqmpsLNUQa3CFQy32foGeH8LhD"]'
2026-01-31 04:35:41.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:35:41.466 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37244/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-31 04:35:41.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:35:41.471 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7222/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-31 04:35:41.476 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:35:41.477 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30572/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-31 04:35:41.480 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:35:41.483 DEBUG [src.steps.light_push] Lightpushing message
2026-01-31 04:35:41.484 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30572/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1769834141483386494, "version": 2.1}}'
2026-01-31 04:35:41.486 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30572/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-31 04:35:41.489 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-31 04:35:41.490 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-31 04:35:41.490 DEBUG [src.node.waku_node] Stopping container with id 0f1a35dfaef6
2026-01-31 04:35:42.036 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:35:42.037 DEBUG [src.node.waku_node] Stopping container with id 151bd7584be6
2026-01-31 04:35:42.553 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:35:42.554 DEBUG [src.node.waku_node] Stopping container with id dd34467ace51
2026-01-31 04:35:42.887 ERROR [src.node.docker_mananger] Max retries reached for container 0f1a35dfaef6. Exiting log stream.
2026-01-31 04:35:43.071 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:35:43.072 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-31 04:35:43.087 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-31 04:35:43.094 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-31 04:35:43.102 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
