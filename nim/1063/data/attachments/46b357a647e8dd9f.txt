2026-01-31 04:34:30.744 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-31 04:34:30.745 DEBUG [tests.conftest] Running test: test_publish_with_invalid_version with id: 2026-01-31_04-34-30__5bb08ae9-9503-4a14-963d-7c43509d8b1f
2026-01-31 04:34:30.745 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-31 04:34:30.745 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-31 04:34:30.746 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-01-31 04:34:30.752 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:34:30.752 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-31_04-34-30__5bb08ae9-9503-4a14-963d-7c43509d8b1f__wakuorg_nwaku:latest.log
2026-01-31 04:34:30.752 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:34:30.752 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:34:30.754 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:34:30.754 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.179.61
2026-01-31 04:34:30.754 DEBUG [src.node.docker_mananger] Generated ports ['6392', '6393', '6394', '6395', '6396']
2026-01-31 04:34:30.754 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:34:30.754 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:34:30.754 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:34:30.755 DEBUG [src.node.docker_mananger] docker run -i -t -p 6392:6392 -p 6393:6393 -p 6394:6394 -p 6395:6395 -p 6396:6396 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6394 --rest-port=6392 --tcp-port=6393 --discv5-udp-port=6395 --rest-address=0.0.0.0 --nat=extip:172.18.179.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d4bbf5ede47fc533ca3533dea6d9dffb532a0ba5f6eeff0cecb19c788ba1ea34 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6396 --metrics-logging=true --relay=true
2026-01-31 04:34:30.933 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.179.61 waku 5ce0477b6a9e90c600ecd80f2ad7b52cad7a34a744ffdcf7a5a6befbde7c55c7
2026-01-31 04:34:30.962 DEBUG [src.node.docker_mananger] Container started with ID 5ce0477b6a9e. Setting up logs at ./log/docker/node1_2026-01-31_04-34-30__5bb08ae9-9503-4a14-963d-7c43509d8b1f__wakuorg_nwaku:latest.log
2026-01-31 04:34:30.962 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6392
2026-01-31 04:34:30.962 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:34:30.992 ERROR [src.node.docker_mananger] Max retries reached for container 2c27b1356f04. Exiting log stream.
2026-01-31 04:34:31.547 ERROR [src.node.docker_mananger] Max retries reached for container c3475abd46cc. Exiting log stream.
2026-01-31 04:34:31.963 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6392/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:34:31.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:34:31.967 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:34:31.967 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6392/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:34:31.969 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.61/tcp/6393/p2p/16Uiu2HAmBAFfR23hPNvw2KpAoTTR4m59EKHk5wva1NJ14XJ1nw3b","/ip4/172.18.179.61/tcp/6394/ws/p2p/16Uiu2HAmBAFfR23hPNvw2KpAoTTR4m59EKHk5wva1NJ14XJ1nw3b"],"enrUri":"enr:-L24QOmQvQxnIvUDfVg6yXK4R44UrIvX9rBkH22GyH3LbgU9KBdjitUc3VcvRexKtVNVhhRRdLQVJS2KpfvO--zAu0kCgmlkgnY0gmlwhKwSsz2KbXVsdGlhZGRyc5YACASsErM9Bhj5AAoErBKzPQYY-t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6cfIlCFUy0Eyw_4AH3AC2gugZ01uQ7woAakMsFe8B9aDdGNwghj5g3VkcIIY-4V3YWt1MgE"}'
2026-01-31 04:34:31.969 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:34:31.975 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:34:31.975 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-31_04-34-30__5bb08ae9-9503-4a14-963d-7c43509d8b1f__wakuorg_nwaku:latest.log
2026-01-31 04:34:31.975 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:34:31.976 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:34:31.977 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:34:31.977 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.1.36
2026-01-31 04:34:31.977 DEBUG [src.node.docker_mananger] Generated ports ['57109', '57110', '57111', '57112', '57113']
2026-01-31 04:34:31.977 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:34:31.977 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:34:31.977 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:34:31.978 DEBUG [src.node.docker_mananger] docker run -i -t -p 57109:57109 -p 57110:57110 -p 57111:57111 -p 57112:57112 -p 57113:57113 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57111 --rest-port=57109 --tcp-port=57110 --discv5-udp-port=57112 --rest-address=0.0.0.0 --nat=extip:172.18.1.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf981afcadf1d8893c32f21f8cd31ada09d2b31fd2f0ff9ba5d6ad7ea9d6b074 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57113 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QOmQvQxnIvUDfVg6yXK4R44UrIvX9rBkH22GyH3LbgU9KBdjitUc3VcvRexKtVNVhhRRdLQVJS2KpfvO--zAu0kCgmlkgnY0gmlwhKwSsz2KbXVsdGlhZGRyc5YACASsErM9Bhj5AAoErBKzPQYY-t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6cfIlCFUy0Eyw_4AH3AC2gugZ01uQ7woAakMsFe8B9aDdGNwghj5g3VkcIIY-4V3YWt1MgE
2026-01-31 04:34:32.151 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.1.36 waku a745fa49caa26ccd5eebd88605f4c55c97a331f5409d1a4999eafcc63e3c95a9
2026-01-31 04:34:32.183 DEBUG [src.node.docker_mananger] Container started with ID a745fa49caa2. Setting up logs at ./log/docker/node2_2026-01-31_04-34-30__5bb08ae9-9503-4a14-963d-7c43509d8b1f__wakuorg_nwaku:latest.log
2026-01-31 04:34:32.183 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57109
2026-01-31 04:34:32.183 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:34:33.185 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57109/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:34:33.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:34:33.203 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:34:33.204 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57109/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:34:33.206 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.36/tcp/57110/p2p/16Uiu2HAmLa2dtai9z7yF7BH8mSe9cJQ8468qss6kmDMG3vWcJi6B","/ip4/172.18.1.36/tcp/57111/ws/p2p/16Uiu2HAmLa2dtai9z7yF7BH8mSe9cJQ8468qss6kmDMG3vWcJi6B"],"enrUri":"enr:-L24QEn-G3sg9KWKi9jO21wOmjHv8UQdXKVJ9WjjnmNrF0sOOUv2tBKklDil7JZuvw-Fb7AgC5iv7qBrLP8BZK6wpcICgmlkgnY0gmlwhKwSASSKbXVsdGlhZGRyc5YACASsEgEkBt8WAAoErBIBJAbfF90DgnJzhQADAQAAiXNlY3AyNTZrMaEDdZgtKBldwhI1COmhlQ34IwEOJjpJfMRrxTGnbkk3jCiDdGNwgt8Wg3VkcILfGIV3YWt1MgE"}'
2026-01-31 04:34:33.207 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:34:33.208 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57109/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.179.61/tcp/6393/p2p/16Uiu2HAmBAFfR23hPNvw2KpAoTTR4m59EKHk5wva1NJ14XJ1nw3b"]'
2026-01-31 04:34:33.212 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:34:33.213 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-01-31 04:34:33.213 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6392/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-31 04:34:33.216 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:34:33.217 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57109/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-31 04:34:33.221 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:34:33.222 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6392/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-31 04:34:33.227 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:34:33.227 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-31 04:34:33.327 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-31 04:34:33.327 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6392/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:34:33.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769834073222528256,"ephemeral":false,"proof":""}]'
2026-01-31 04:34:33.331 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-31 04:34:33.332 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57109/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:34:33.334 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769834073222528256,"ephemeral":false,"proof":""}]'
2026-01-31 04:34:33.335 INFO [src.steps.relay] WARM UP successful!!
2026-01-31 04:34:33.336 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6392/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)', "version": 2.1}'
2026-01-31 04:34:33.339 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6392/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-31 04:34:33.341 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-31 04:34:33.342 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-31 04:34:33.342 DEBUG [src.node.waku_node] Stopping container with id 5ce0477b6a9e
2026-01-31 04:34:33.863 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:34:33.863 DEBUG [src.node.waku_node] Stopping container with id a745fa49caa2
2026-01-31 04:34:34.362 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:34:34.365 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-31 04:34:34.372 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-31 04:34:34.377 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
