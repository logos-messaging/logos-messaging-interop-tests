2026-01-31 04:35:55.470 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-31 04:35:55.470 DEBUG [tests.conftest] Running test: test_filter_get_message_with_extra_field with id: 2026-01-31_04-35-55__bc0ea432-bf89-4bda-a79d-caa52b36ebec
2026-01-31 04:35:55.470 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-31 04:35:55.471 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-31 04:35:55.471 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-01-31 04:35:55.477 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:35:55.477 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-31_04-35-55__bc0ea432-bf89-4bda-a79d-caa52b36ebec__wakuorg_nwaku:latest.log
2026-01-31 04:35:55.477 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:35:55.478 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:35:55.479 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:35:55.479 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.224.21
2026-01-31 04:35:55.479 DEBUG [src.node.docker_mananger] Generated ports ['7066', '7067', '7068', '7069', '7070']
2026-01-31 04:35:55.479 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:35:55.479 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:35:55.480 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:35:55.480 DEBUG [src.node.docker_mananger] docker run -i -t -p 7066:7066 -p 7067:7067 -p 7068:7068 -p 7069:7069 -p 7070:7070 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7068 --rest-port=7066 --tcp-port=7067 --discv5-udp-port=7069 --rest-address=0.0.0.0 --nat=extip:172.18.224.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8aeb7fc74e210a95afd3e4282e956e5b05780ad4dbc0b3fe64856b9830cd7cad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7070 --metrics-logging=true --relay=true --filter=true
2026-01-31 04:35:55.662 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.224.21 waku ae0d05696142c675af0c89ea7bf0fa6624cfd7554fefce0b98c1b17b1c9ed9d1
2026-01-31 04:35:55.694 DEBUG [src.node.docker_mananger] Container started with ID ae0d05696142. Setting up logs at ./log/docker/node1_2026-01-31_04-35-55__bc0ea432-bf89-4bda-a79d-caa52b36ebec__wakuorg_nwaku:latest.log
2026-01-31 04:35:55.694 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7066
2026-01-31 04:35:55.695 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:35:56.073 ERROR [src.node.docker_mananger] Max retries reached for container b7849ef3aefe. Exiting log stream.
2026-01-31 04:35:56.696 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7066/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:35:56.699 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:35:56.699 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:35:56.699 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7066/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:35:56.702 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.21/tcp/7067/p2p/16Uiu2HAm5ePFtHk2ddyzuz6LKT4P4fQnFeHnubWc2nAg7CwL6r2V","/ip4/172.18.224.21/tcp/7068/ws/p2p/16Uiu2HAm5ePFtHk2ddyzuz6LKT4P4fQnFeHnubWc2nAg7CwL6r2V"],"enrUri":"enr:-L24QMqrD5e_JUNnFcki3saG_Nd1r5ryE30DAjlMxvc1x8bjT7Kb9yoJVEtzIbCbwE-iC1pOqfimyEMsW5LBuUta9p8CgmlkgnY0gmlwhKwS4BWKbXVsdGlhZGRyc5YACASsEuAVBhubAAoErBLgFQYbnN0DgnJzhQADAQAAiXNlY3AyNTZrMaECl9aC8ztYYZZSxUPGEsXGAwojPgHPJq0RBY-XXLHez7KDdGNwghubg3VkcIIbnYV3YWt1MgU"}'
2026-01-31 04:35:56.702 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:35:56.702 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-01-31 04:35:56.709 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:35:56.709 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-31_04-35-55__bc0ea432-bf89-4bda-a79d-caa52b36ebec__wakuorg_nwaku:latest.log
2026-01-31 04:35:56.709 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:35:56.709 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:35:56.711 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:35:56.711 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.192.239
2026-01-31 04:35:56.711 DEBUG [src.node.docker_mananger] Generated ports ['4130', '4131', '4132', '4133', '4134']
2026-01-31 04:35:56.711 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:35:56.711 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:35:56.711 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:35:56.712 DEBUG [src.node.docker_mananger] docker run -i -t -p 4130:4130 -p 4131:4131 -p 4132:4132 -p 4133:4133 -p 4134:4134 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4132 --rest-port=4130 --tcp-port=4131 --discv5-udp-port=4133 --rest-address=0.0.0.0 --nat=extip:172.18.192.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb70af9efbf3d20b5d8de984cb2d00922bdafbdd85abaa72f2bac1d1bf9bbde6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4134 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QMqrD5e_JUNnFcki3saG_Nd1r5ryE30DAjlMxvc1x8bjT7Kb9yoJVEtzIbCbwE-iC1pOqfimyEMsW5LBuUta9p8CgmlkgnY0gmlwhKwS4BWKbXVsdGlhZGRyc5YACASsEuAVBhubAAoErBLgFQYbnN0DgnJzhQADAQAAiXNlY3AyNTZrMaECl9aC8ztYYZZSxUPGEsXGAwojPgHPJq0RBY-XXLHez7KDdGNwghubg3VkcIIbnYV3YWt1MgU --filternode=/ip4/172.18.224.21/tcp/7067/p2p/16Uiu2HAm5ePFtHk2ddyzuz6LKT4P4fQnFeHnubWc2nAg7CwL6r2V
2026-01-31 04:35:56.905 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.192.239 waku 9944941aa4b079c4f96b21354679625c03fe447cf56a0810998fad370f8187ae
2026-01-31 04:35:56.932 DEBUG [src.node.docker_mananger] Container started with ID 9944941aa4b0. Setting up logs at ./log/docker/node2_2026-01-31_04-35-55__bc0ea432-bf89-4bda-a79d-caa52b36ebec__wakuorg_nwaku:latest.log
2026-01-31 04:35:56.932 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4130
2026-01-31 04:35:56.932 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:35:57.933 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4130/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:35:57.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-31 04:35:57.937 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:35:57.937 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4130/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:35:57.940 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.239/tcp/4131/p2p/16Uiu2HAm4NEDweci7zjUhH4ZcNLvHHw8Mkpduyvoy1t9tBwBXcYc","/ip4/172.18.192.239/tcp/4132/ws/p2p/16Uiu2HAm4NEDweci7zjUhH4ZcNLvHHw8Mkpduyvoy1t9tBwBXcYc"],"enrUri":"enr:-L24QJ3lxybUHQhq8k32cQ0cjh_44IdWWm1iyb49WfLvDJpKMZPVqG9vrPEY4G5XlaC-NR-i_bgtKyetXSs2uEEFoXkCgmlkgnY0gmlwhKwSwO-KbXVsdGlhZGRyc5YACASsEsDvBhAjAAoErBLA7wYQJN0DgnJzhQADAQAAiXNlY3AyNTZrMaEChNdRRQYd-4rbdoAUZFvx4ByJHDcDl6vO4q0rVsShwiWDdGNwghAjg3VkcIIQJYV3YWt1MgA"}'
2026-01-31 04:35:57.940 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:35:57.940 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4130/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.224.21/tcp/7067/p2p/16Uiu2HAm5ePFtHk2ddyzuz6LKT4P4fQnFeHnubWc2nAg7CwL6r2V"]'
2026-01-31 04:35:57.970 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:35:57.971 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-01-31 04:35:57.971 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7066/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-31 04:35:57.985 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:35:57.986 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4130/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "393d3a5e-c4e3-46ea-8a0a-63f182ff6799", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-31 04:35:57.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"393d3a5e-c4e3-46ea-8a0a-63f182ff6799","statusDesc":"OK"}'
2026-01-31 04:35:57.999 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7066/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
2026-01-31 04:35:58.001 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7066/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-31 04:35:58.004 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-31 04:35:58.005 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-31 04:35:58.005 DEBUG [src.node.waku_node] Stopping container with id ae0d05696142
2026-01-31 04:35:58.516 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:35:58.516 DEBUG [src.node.waku_node] Stopping container with id 9944941aa4b0
2026-01-31 04:35:59.050 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:35:59.051 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-31 04:35:59.056 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-31 04:35:59.061 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
