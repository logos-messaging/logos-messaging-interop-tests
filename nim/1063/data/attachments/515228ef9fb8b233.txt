2026-01-31 04:32:06.905 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-31 04:32:06.905 DEBUG [tests.conftest] Running test: test_passing_cursor_of_non_existing_message_from_the_store with id: 2026-01-31_04-32-06__15264ad5-f062-4eca-a64a-dedadff47da9
2026-01-31 04:32:06.905 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-31 04:32:06.906 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-31 04:32:06.906 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-01-31 04:32:06.913 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:32:06.914 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-01-31_04-32-06__15264ad5-f062-4eca-a64a-dedadff47da9__wakuorg_nwaku:latest.log
2026-01-31 04:32:06.914 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:32:06.914 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:32:06.915 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:32:06.915 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.183
2026-01-31 04:32:06.916 DEBUG [src.node.docker_mananger] Generated ports ['59970', '59971', '59972', '59973', '59974']
2026-01-31 04:32:06.916 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:32:06.916 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:32:06.916 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:32:06.916 DEBUG [src.node.docker_mananger] docker run -i -t -p 59970:59970 -p 59971:59971 -p 59972:59972 -p 59973:59973 -p 59974:59974 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59972 --rest-port=59970 --tcp-port=59971 --discv5-udp-port=59973 --rest-address=0.0.0.0 --nat=extip:172.18.97.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb8fe02cb39429048e7b8bba34355fbcdf5b6ae73956ea31b34a69fdd4d58d4b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59974 --metrics-logging=true --store=true --relay=true
2026-01-31 04:32:07.104 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.183 waku 4da560903811df69d483dd7f72fb69c099d81aebb5c1e1f330085627e1a6add4
2026-01-31 04:32:07.118 ERROR [src.node.docker_mananger] Max retries reached for container d495afdf6f48. Exiting log stream.
2026-01-31 04:32:07.137 DEBUG [src.node.docker_mananger] Container started with ID 4da560903811. Setting up logs at ./log/docker/publishing_node1_2026-01-31_04-32-06__15264ad5-f062-4eca-a64a-dedadff47da9__wakuorg_nwaku:latest.log
2026-01-31 04:32:07.139 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59970
2026-01-31 04:32:07.139 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:32:07.711 ERROR [src.node.docker_mananger] Max retries reached for container 54d1cc4356fd. Exiting log stream.
2026-01-31 04:32:08.140 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59970/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:08.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:32:08.144 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:32:08.144 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59970/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:08.146 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.183/tcp/59971/p2p/16Uiu2HAkwuf25a7oy2cPkCBfzeYsAu4ueiuTYHiXvb86eMRGbvmP","/ip4/172.18.97.183/tcp/59972/ws/p2p/16Uiu2HAkwuf25a7oy2cPkCBfzeYsAu4ueiuTYHiXvb86eMRGbvmP"],"enrUri":"enr:-L24QJ5B-cEoRBFzJa59UU9hq4SyGFhabLSz8xK7XN2OYHJSTQwRe7M5x9xLU6TVrxwDCYd417EWmrClhFfXgGCp5m8CgmlkgnY0gmlwhKwSYbeKbXVsdGlhZGRyc5YACASsEmG3BupDAAoErBJhtwbqRN0DgnJzhQADAQAAiXNlY3AyNTZrMaECJOKM5RdaLQJsX--8F_wORdIVXqn8tzxnYirT_tDYU0KDdGNwgupDg3VkcILqRYV3YWt1MgM"}'
2026-01-31 04:32:08.146 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:32:08.154 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:32:08.154 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-01-31_04-32-06__15264ad5-f062-4eca-a64a-dedadff47da9__wakuorg_nwaku:latest.log
2026-01-31 04:32:08.154 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:32:08.155 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:32:08.156 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:32:08.156 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.138.11
2026-01-31 04:32:08.156 DEBUG [src.node.docker_mananger] Generated ports ['58919', '58920', '58921', '58922', '58923']
2026-01-31 04:32:08.157 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:32:08.157 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:32:08.157 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:32:08.157 DEBUG [src.node.docker_mananger] docker run -i -t -p 58919:58919 -p 58920:58920 -p 58921:58921 -p 58922:58922 -p 58923:58923 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58921 --rest-port=58919 --tcp-port=58920 --discv5-udp-port=58922 --rest-address=0.0.0.0 --nat=extip:172.18.138.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa6dd433446c7af6ee83967fdedd9c8d35ae9fcbccee83faccc15cacfdc3cfd8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58923 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJ5B-cEoRBFzJa59UU9hq4SyGFhabLSz8xK7XN2OYHJSTQwRe7M5x9xLU6TVrxwDCYd417EWmrClhFfXgGCp5m8CgmlkgnY0gmlwhKwSYbeKbXVsdGlhZGRyc5YACASsEmG3BupDAAoErBJhtwbqRN0DgnJzhQADAQAAiXNlY3AyNTZrMaECJOKM5RdaLQJsX--8F_wORdIVXqn8tzxnYirT_tDYU0KDdGNwgupDg3VkcILqRYV3YWt1MgM --storenode=/ip4/172.18.97.183/tcp/59971/p2p/16Uiu2HAkwuf25a7oy2cPkCBfzeYsAu4ueiuTYHiXvb86eMRGbvmP --store=true --relay=true
2026-01-31 04:32:08.363 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.138.11 waku 62b1dffa4dcc17adfe2beed1da11009b5cfb976a15c3059877237eb7dac6cf70
2026-01-31 04:32:08.396 DEBUG [src.node.docker_mananger] Container started with ID 62b1dffa4dcc. Setting up logs at ./log/docker/store_node1_2026-01-31_04-32-06__15264ad5-f062-4eca-a64a-dedadff47da9__wakuorg_nwaku:latest.log
2026-01-31 04:32:08.397 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58919
2026-01-31 04:32:08.398 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:32:09.398 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58919/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:09.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:32:09.403 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:32:09.404 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58919/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:09.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.11/tcp/58920/p2p/16Uiu2HAmCt7AzifaigYcMvRW89Xmjk4MCFp8fKAS1rcgEkDCWfWu","/ip4/172.18.138.11/tcp/58921/ws/p2p/16Uiu2HAmCt7AzifaigYcMvRW89Xmjk4MCFp8fKAS1rcgEkDCWfWu"],"enrUri":"enr:-L24QHvVEpHDESDhKpsMWVnept3ZNLzPVoEZ_EsqZAMrVaD1doFyfvduTSmkEp8Ao2EoxyWg83zdTlyZ45RVq51VN_cCgmlkgnY0gmlwhKwSiguKbXVsdGlhZGRyc5YACASsEooLBuYoAAoErBKKCwbmKd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDA1xDx5qVGrB0NwBm5snyS9cnRpFGIIshZ7QccEukohaDdGNwguYog3VkcILmKoV3YWt1MgM"}'
2026-01-31 04:32:09.407 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:32:09.407 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58919/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.183/tcp/59971/p2p/16Uiu2HAkwuf25a7oy2cPkCBfzeYsAu4ueiuTYHiXvb86eMRGbvmP"]'
2026-01-31 04:32:09.410 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:09.411 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59970/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-31 04:32:09.413 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:09.414 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58919/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-31 04:32:09.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:09.417 DEBUG [src.steps.store] Relaying message
2026-01-31 04:32:09.417 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59970/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-31 04:32:09.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:09.423 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-31 04:32:09.625 DEBUG [src.steps.store] Relaying message
2026-01-31 04:32:09.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59970/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-31 04:32:09.631 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:09.631 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-31 04:32:09.832 DEBUG [src.steps.store] Relaying message
2026-01-31 04:32:09.832 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59970/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-31 04:32:09.838 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:09.838 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-31 04:32:10.039 DEBUG [src.steps.store] Relaying message
2026-01-31 04:32:10.040 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59970/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-31 04:32:10.045 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:10.045 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-31 04:32:10.247 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59970/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x53260e4bb64e6b5ea7ec60a5896d3bcf2f6cf525ac0b298f2c3a63b642dd136d&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:10.250 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:59970/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x53260e4bb64e6b5ea7ec60a5896d3bcf2f6cf525ac0b298f2c3a63b642dd136d&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-01-31 04:32:10.251 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58919/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x53260e4bb64e6b5ea7ec60a5896d3bcf2f6cf525ac0b298f2c3a63b642dd136d&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:10.254 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:58919/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x53260e4bb64e6b5ea7ec60a5896d3bcf2f6cf525ac0b298f2c3a63b642dd136d&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-01-31 04:32:10.256 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-31 04:32:10.257 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-31 04:32:10.258 DEBUG [src.node.waku_node] Stopping container with id 4da560903811
2026-01-31 04:32:10.805 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:32:10.807 DEBUG [src.node.waku_node] Stopping container with id 62b1dffa4dcc
2026-01-31 04:32:11.439 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:32:11.441 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-31 04:32:11.448 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-31 04:32:11.454 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
