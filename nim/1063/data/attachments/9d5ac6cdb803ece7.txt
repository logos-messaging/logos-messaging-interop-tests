2026-01-31 04:32:45.891 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-31 04:32:45.891 DEBUG [tests.conftest] Running test: test_publish_with_missing_content_topic with id: 2026-01-31_04-32-45__55924955-da51-496c-9a7d-c535b6beec95
2026-01-31 04:32:45.891 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-31 04:32:45.891 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-31 04:32:45.892 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-01-31 04:32:45.898 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:32:45.898 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-31_04-32-45__55924955-da51-496c-9a7d-c535b6beec95__wakuorg_nwaku:latest.log
2026-01-31 04:32:45.898 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:32:45.898 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:32:45.900 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:32:45.900 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.88.100
2026-01-31 04:32:45.900 DEBUG [src.node.docker_mananger] Generated ports ['7154', '7155', '7156', '7157', '7158']
2026-01-31 04:32:45.900 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:32:45.901 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:32:45.901 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:32:45.901 DEBUG [src.node.docker_mananger] docker run -i -t -p 7154:7154 -p 7155:7155 -p 7156:7156 -p 7157:7157 -p 7158:7158 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7156 --rest-port=7154 --tcp-port=7155 --discv5-udp-port=7157 --rest-address=0.0.0.0 --nat=extip:172.18.88.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d8bb7971ee1a1cbdcab10aea0733c2bf7d03380ba2bf27e0d9fcea4e32cdb0c8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7158 --metrics-logging=true --relay=true
2026-01-31 04:32:46.078 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.88.100 waku db30ace0cbd6217d049d59a8507afd5c1c87081d0195c2f754dcd5bbc158389f
2026-01-31 04:32:46.111 DEBUG [src.node.docker_mananger] Container started with ID db30ace0cbd6. Setting up logs at ./log/docker/node1_2026-01-31_04-32-45__55924955-da51-496c-9a7d-c535b6beec95__wakuorg_nwaku:latest.log
2026-01-31 04:32:46.111 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7154
2026-01-31 04:32:46.113 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:32:46.153 ERROR [src.node.docker_mananger] Max retries reached for container c5f453be0518. Exiting log stream.
2026-01-31 04:32:46.685 ERROR [src.node.docker_mananger] Max retries reached for container cc33018fd7e5. Exiting log stream.
2026-01-31 04:32:47.113 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7154/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:47.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:32:47.117 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:32:47.117 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7154/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:47.119 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.100/tcp/7155/p2p/16Uiu2HAmSeWEToZas7gvLrXTsqBeyaD7oKYJnARTpzKNq7RMKKPa","/ip4/172.18.88.100/tcp/7156/ws/p2p/16Uiu2HAmSeWEToZas7gvLrXTsqBeyaD7oKYJnARTpzKNq7RMKKPa"],"enrUri":"enr:-L24QGQMe7yaia9B9vuZrELbL0nUxxGydG6hNTOxt7Ya-mLaRr2cRa5ZwAyIroC_o477JmCmJ-XKmXPq6g0vxMxqqu0CgmlkgnY0gmlwhKwSWGSKbXVsdGlhZGRyc5YACASsElhkBhvzAAoErBJYZAYb9N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDz-PS_UwRWDa9gJXJr9tjwgiD47S98f07yFvE6RzL9zWDdGNwghvzg3VkcIIb9YV3YWt1MgE"}'
2026-01-31 04:32:47.119 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:32:47.126 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-31 04:32:47.126 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-31_04-32-45__55924955-da51-496c-9a7d-c535b6beec95__wakuorg_nwaku:latest.log
2026-01-31 04:32:47.126 DEBUG [src.node.waku_node] Starting Node...
2026-01-31 04:32:47.126 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-31 04:32:47.128 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-31 04:32:47.128 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.214.198
2026-01-31 04:32:47.128 DEBUG [src.node.docker_mananger] Generated ports ['26835', '26836', '26837', '26838', '26839']
2026-01-31 04:32:47.128 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-31 04:32:47.128 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-31 04:32:47.128 DEBUG [src.node.waku_node] Using volumes []
2026-01-31 04:32:47.128 DEBUG [src.node.docker_mananger] docker run -i -t -p 26835:26835 -p 26836:26836 -p 26837:26837 -p 26838:26838 -p 26839:26839 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26837 --rest-port=26835 --tcp-port=26836 --discv5-udp-port=26838 --rest-address=0.0.0.0 --nat=extip:172.18.214.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f329775af2cbf181b80da89c81fa9947c1dabfd54d8059ddedfa3082acf2c4ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26839 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGQMe7yaia9B9vuZrELbL0nUxxGydG6hNTOxt7Ya-mLaRr2cRa5ZwAyIroC_o477JmCmJ-XKmXPq6g0vxMxqqu0CgmlkgnY0gmlwhKwSWGSKbXVsdGlhZGRyc5YACASsElhkBhvzAAoErBJYZAYb9N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDz-PS_UwRWDa9gJXJr9tjwgiD47S98f07yFvE6RzL9zWDdGNwghvzg3VkcIIb9YV3YWt1MgE
2026-01-31 04:32:47.306 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.214.198 waku f9785175e1c780e031d0c65cab5f7113bfb9548ad7e70b30e09fd72e62e37702
2026-01-31 04:32:47.339 DEBUG [src.node.docker_mananger] Container started with ID f9785175e1c7. Setting up logs at ./log/docker/node2_2026-01-31_04-32-45__55924955-da51-496c-9a7d-c535b6beec95__wakuorg_nwaku:latest.log
2026-01-31 04:32:47.339 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26835
2026-01-31 04:32:47.339 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-31 04:32:48.340 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26835/health" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:48.350 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-31 04:32:48.351 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-31 04:32:48.352 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26835/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:48.357 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.198/tcp/26836/p2p/16Uiu2HAmRuDzyou4aL72kYHGdggULRB1BBv7XnPd2Apmj7e7mgi4","/ip4/172.18.214.198/tcp/26837/ws/p2p/16Uiu2HAmRuDzyou4aL72kYHGdggULRB1BBv7XnPd2Apmj7e7mgi4"],"enrUri":"enr:-L24QF_TavRAMnh2YN_McUG2OnYnss-XQhCwdOjA5pgl1ZRMexPpaKCnwMs5XE0u8IEfelNeMg6OYbI7h3_Zu5-l2goCgmlkgnY0gmlwhKwS1saKbXVsdGlhZGRyc5YACASsEtbGBmjUAAoErBLWxgZo1d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxM1-yxtATtNFMdqupO8jxTjppqR--D6MuNlDJqcI86mDdGNwgmjUg3VkcIJo1oV3YWt1MgE"}'
2026-01-31 04:32:48.360 INFO [src.node.waku_node] REST service is ready !!
2026-01-31 04:32:48.360 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26835/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.88.100/tcp/7155/p2p/16Uiu2HAmSeWEToZas7gvLrXTsqBeyaD7oKYJnARTpzKNq7RMKKPa"]'
2026-01-31 04:32:48.363 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:48.364 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-01-31 04:32:48.364 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7154/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-31 04:32:48.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:48.368 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26835/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-31 04:32:48.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:48.374 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7154/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-31 04:32:48.379 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-31 04:32:48.380 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-31 04:32:48.480 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-31 04:32:48.481 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7154/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:48.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769833968374243840,"ephemeral":false,"proof":""}]'
2026-01-31 04:32:48.485 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-31 04:32:48.485 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26835/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-31 04:32:48.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769833968374243840,"ephemeral":false,"proof":""}]'
2026-01-31 04:32:48.489 INFO [src.steps.relay] WARM UP successful!!
2026-01-31 04:32:48.489 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7154/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "timestamp": '$(date +%s%N)'}'
2026-01-31 04:32:48.492 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7154/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-31 04:32:48.494 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-31 04:32:48.495 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-31 04:32:48.495 DEBUG [src.node.waku_node] Stopping container with id db30ace0cbd6
2026-01-31 04:32:49.019 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:32:49.019 DEBUG [src.node.waku_node] Stopping container with id f9785175e1c7
2026-01-31 04:32:49.533 DEBUG [src.node.waku_node] Container stopped.
2026-01-31 04:32:49.534 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-31 04:32:49.540 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-31 04:32:49.546 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
