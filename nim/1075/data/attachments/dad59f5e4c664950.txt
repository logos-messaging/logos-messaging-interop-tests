2026-02-10 04:47:05.999 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-10 04:47:06.002 DEBUG [tests.conftest] Running test: test_store_with_empty_hashes with id: 2026-02-10_04-47-06__4f90dced-d7b1-42a3-aba9-a868198dedba
2026-02-10 04:47:06.002 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-10 04:47:06.002 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-10 04:47:06.003 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-10 04:47:06.012 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:47:06.012 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-10_04-47-06__4f90dced-d7b1-42a3-aba9-a868198dedba__wakuorg_nwaku:latest.log
2026-02-10 04:47:06.013 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:47:06.014 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:47:06.016 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:47:06.016 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.15.8
2026-02-10 04:47:06.017 DEBUG [src.node.docker_mananger] Generated ports ['24585', '24586', '24587', '24588', '24589']
2026-02-10 04:47:06.018 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:47:06.018 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:47:06.018 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:47:06.018 DEBUG [src.node.docker_mananger] docker run -i -t -p 24585:24585 -p 24586:24586 -p 24587:24587 -p 24588:24588 -p 24589:24589 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24587 --rest-port=24585 --tcp-port=24586 --discv5-udp-port=24588 --rest-address=0.0.0.0 --nat=extip:172.18.15.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3cf9ee0f2df538ed4b5b5fefdfa25fda08f0b9f695aee76ca4ad4fab6dda6e2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24589 --metrics-logging=true --store=true --relay=true
2026-02-10 04:47:06.109 ERROR [src.node.docker_mananger] Max retries reached for container 3da287b46558. Exiting log stream.
2026-02-10 04:47:06.230 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.15.8 waku 862292828af1678d9229275731bdb380a081e012b2d46b53f0a8658b28425ff6
2026-02-10 04:47:06.263 DEBUG [src.node.docker_mananger] Container started with ID 862292828af1. Setting up logs at ./log/docker/publishing_node1_2026-02-10_04-47-06__4f90dced-d7b1-42a3-aba9-a868198dedba__wakuorg_nwaku:latest.log
2026-02-10 04:47:06.264 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24585
2026-02-10 04:47:06.266 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:47:06.942 ERROR [src.node.docker_mananger] Max retries reached for container c4945dbffd55. Exiting log stream.
2026-02-10 04:47:07.266 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24585/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:07.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-10 04:47:07.270 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:47:07.270 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24585/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:07.272 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.8/tcp/24586/p2p/16Uiu2HAmVPEiimnBBtnAYkMrHgeBtUytPaQNxQVE52iB245EMvTg","/ip4/172.18.15.8/tcp/24587/ws/p2p/16Uiu2HAmVPEiimnBBtnAYkMrHgeBtUytPaQNxQVE52iB245EMvTg"],"enrUri":"enr:-L24QDg1Q7OGeeyZSvw5AqGgB7ZzheM1u-4kmBUBbOCS06XvHcumsKdIszp0RxIQOAJkxnG6xvcuNxBwtQOQaCIl7lICgmlkgnY0gmlwhKwSDwiKbXVsdGlhZGRyc5YACASsEg8IBmAKAAoErBIPCAZgC90DgnJzhQADAQAAiXNlY3AyNTZrMaED-I2h6FEkjjrTWuV4HJVKcTkRJClxatitflLHCIWSry-DdGNwgmAKg3VkcIJgDIV3YWt1MgM"}'
2026-02-10 04:47:07.273 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:47:07.280 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:47:07.280 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-10_04-47-06__4f90dced-d7b1-42a3-aba9-a868198dedba__wakuorg_nwaku:latest.log
2026-02-10 04:47:07.280 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:47:07.280 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:47:07.281 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:47:07.282 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.105.21
2026-02-10 04:47:07.282 DEBUG [src.node.docker_mananger] Generated ports ['59120', '59121', '59122', '59123', '59124']
2026-02-10 04:47:07.282 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:47:07.282 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:47:07.282 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:47:07.282 DEBUG [src.node.docker_mananger] docker run -i -t -p 59120:59120 -p 59121:59121 -p 59122:59122 -p 59123:59123 -p 59124:59124 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59122 --rest-port=59120 --tcp-port=59121 --discv5-udp-port=59123 --rest-address=0.0.0.0 --nat=extip:172.18.105.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5dfafad78fa9085ccb06628bf7fffeb250c90b29c2c6b51fd8bc1c7d56ada95b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59124 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDg1Q7OGeeyZSvw5AqGgB7ZzheM1u-4kmBUBbOCS06XvHcumsKdIszp0RxIQOAJkxnG6xvcuNxBwtQOQaCIl7lICgmlkgnY0gmlwhKwSDwiKbXVsdGlhZGRyc5YACASsEg8IBmAKAAoErBIPCAZgC90DgnJzhQADAQAAiXNlY3AyNTZrMaED-I2h6FEkjjrTWuV4HJVKcTkRJClxatitflLHCIWSry-DdGNwgmAKg3VkcIJgDIV3YWt1MgM --storenode=/ip4/172.18.15.8/tcp/24586/p2p/16Uiu2HAmVPEiimnBBtnAYkMrHgeBtUytPaQNxQVE52iB245EMvTg --store=true --relay=true
2026-02-10 04:47:07.477 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.105.21 waku 6357debeed6e1c48d03978207754468eec71d789f734253a50f94cf7422d9101
2026-02-10 04:47:07.507 DEBUG [src.node.docker_mananger] Container started with ID 6357debeed6e. Setting up logs at ./log/docker/store_node1_2026-02-10_04-47-06__4f90dced-d7b1-42a3-aba9-a868198dedba__wakuorg_nwaku:latest.log
2026-02-10 04:47:07.507 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59120
2026-02-10 04:47:07.507 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:47:08.509 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59120/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:08.513 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-10 04:47:08.513 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:47:08.513 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59120/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:08.516 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.105.21/tcp/59121/p2p/16Uiu2HAmV3Uw1nC1bP9MjkrXpoErURoT3GoaSSSWYHKtk7pCGYG8","/ip4/172.18.105.21/tcp/59122/ws/p2p/16Uiu2HAmV3Uw1nC1bP9MjkrXpoErURoT3GoaSSSWYHKtk7pCGYG8"],"enrUri":"enr:-L24QGy4reZgyN1IJpIp37UH7naP33O9yjy3l-K9PirrFO0aWojnT1S2AK6OJwzwNSty6Sf2ErDb2aL99BDEe3hvglYCgmlkgnY0gmlwhKwSaRWKbXVsdGlhZGRyc5YACASsEmkVBubxAAoErBJpFQbm8t0DgnJzhQADAQAAiXNlY3AyNTZrMaED834V9VyI8oXuWgVbduQ_FRazZitqiKeG2LzSW_yiAzGDdGNwgubxg3VkcILm84V3YWt1MgM"}'
2026-02-10 04:47:08.516 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:47:08.516 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59120/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.8/tcp/24586/p2p/16Uiu2HAmVPEiimnBBtnAYkMrHgeBtUytPaQNxQVE52iB245EMvTg"]'
2026-02-10 04:47:08.519 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:08.519 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24585/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-10 04:47:08.522 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:08.522 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59120/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-10 04:47:08.524 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:08.525 DEBUG [src.steps.store] Relaying message
2026-02-10 04:47:08.525 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24585/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-10 04:47:08.531 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:08.531 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-10 04:47:08.732 DEBUG [src.steps.store] Relaying message
2026-02-10 04:47:08.732 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24585/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-10 04:47:08.738 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:08.738 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-10 04:47:08.938 DEBUG [src.steps.store] Relaying message
2026-02-10 04:47:08.939 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24585/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-10 04:47:08.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:08.945 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-10 04:47:09.146 DEBUG [src.steps.store] Relaying message
2026-02-10 04:47:09.146 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24585/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-10 04:47:09.151 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:09.151 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-10 04:47:09.352 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24585/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:09.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1d21a3f5cdf9a5ac53ac18d40ebbf7a2eaa14ed3cafcfa845364e3395639096e"},{"messageHash":"0x5524154f476b0b006c57cb272514fe01d58f1cafa826091134a4dd3a1fb37fec"},{"messageHash":"0xe58195fab518c68e12e26865e413920d7d5d3dff11d92109b8fa0705a0ced9cc"},{"messageHash":"0x07bd5103f73a29b06c53fbff627e021080e33b08a25de50731e7fcb4d2a490e4"}]}'
2026-02-10 04:47:09.355 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59120/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:09.358 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1d21a3f5cdf9a5ac53ac18d40ebbf7a2eaa14ed3cafcfa845364e3395639096e"},{"messageHash":"0x5524154f476b0b006c57cb272514fe01d58f1cafa826091134a4dd3a1fb37fec"},{"messageHash":"0xe58195fab518c68e12e26865e413920d7d5d3dff11d92109b8fa0705a0ced9cc"},{"messageHash":"0x07bd5103f73a29b06c53fbff627e021080e33b08a25de50731e7fcb4d2a490e4"}]}'
2026-02-10 04:47:09.360 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-10 04:47:09.361 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-10 04:47:09.361 DEBUG [src.node.waku_node] Stopping container with id 862292828af1
2026-02-10 04:47:09.974 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:47:09.974 DEBUG [src.node.waku_node] Stopping container with id 6357debeed6e
2026-02-10 04:47:10.508 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:47:10.509 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-10 04:47:10.517 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-10 04:47:10.523 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
