2026-02-10 04:45:51.712 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-10 04:45:51.712 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_very_large_request_id with id: 2026-02-10_04-45-51__c1c196df-addd-48ce-8c2e-82e64f6fbf2e
2026-02-10 04:45:51.712 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-10 04:45:51.712 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-10 04:45:51.713 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-10 04:45:51.718 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:45:51.719 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-10_04-45-51__c1c196df-addd-48ce-8c2e-82e64f6fbf2e__wakuorg_nwaku:latest.log
2026-02-10 04:45:51.719 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:45:51.719 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:45:51.720 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:45:51.720 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.22.186
2026-02-10 04:45:51.720 DEBUG [src.node.docker_mananger] Generated ports ['47388', '47389', '47390', '47391', '47392']
2026-02-10 04:45:51.720 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:45:51.721 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:45:51.721 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:45:51.721 DEBUG [src.node.docker_mananger] docker run -i -t -p 47388:47388 -p 47389:47389 -p 47390:47390 -p 47391:47391 -p 47392:47392 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47390 --rest-port=47388 --tcp-port=47389 --discv5-udp-port=47391 --rest-address=0.0.0.0 --nat=extip:172.18.22.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=010b49f08277eeae7dcd6dc61cb7ddd7a8c044d9aeaa9072cec70c19d2ad77c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47392 --metrics-logging=true --relay=true --filter=true
2026-02-10 04:45:51.880 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.22.186 waku ab2666542001fda1fe702d19d9ff09607cec6eecf165ce298761111a8acf25d4
2026-02-10 04:45:51.909 DEBUG [src.node.docker_mananger] Container started with ID ab2666542001. Setting up logs at ./log/docker/node1_2026-02-10_04-45-51__c1c196df-addd-48ce-8c2e-82e64f6fbf2e__wakuorg_nwaku:latest.log
2026-02-10 04:45:51.911 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47388
2026-02-10 04:45:51.911 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:45:52.021 ERROR [src.node.docker_mananger] Max retries reached for container dd26be1f4210. Exiting log stream.
2026-02-10 04:45:52.509 ERROR [src.node.docker_mananger] Max retries reached for container f4ec5154ad05. Exiting log stream.
2026-02-10 04:45:52.913 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47388/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:52.916 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-10 04:45:52.916 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:45:52.916 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47388/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:52.919 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.186/tcp/47389/p2p/16Uiu2HAm75WQqHm3oRfjio8xe1DP6KcDuKj81zkWN6AR8PidGv3U","/ip4/172.18.22.186/tcp/47390/ws/p2p/16Uiu2HAm75WQqHm3oRfjio8xe1DP6KcDuKj81zkWN6AR8PidGv3U"],"enrUri":"enr:-L24QHg0Qdwpl0lNfNpwrcwxQL1lhOS3yBUJ0DoIzaGgqnGDZLblu0Yh98bQzCsti3CSGzqigTZcaxLotUe7fjmreAQCgmlkgnY0gmlwhKwSFrqKbXVsdGlhZGRyc5YACASsEha6BrkdAAoErBIWuga5Ht0DgnJzhQADAQAAiXNlY3AyNTZrMaECrSHO3D4lYZor-Wp22WJJ8C2wtOMSnKcfkxoPGzl5DzuDdGNwgrkdg3VkcIK5H4V3YWt1MgU"}'
2026-02-10 04:45:52.919 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:45:52.919 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-10 04:45:52.926 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:45:52.926 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-10_04-45-51__c1c196df-addd-48ce-8c2e-82e64f6fbf2e__wakuorg_nwaku:latest.log
2026-02-10 04:45:52.926 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:45:52.926 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:45:52.927 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:45:52.927 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.139.236
2026-02-10 04:45:52.928 DEBUG [src.node.docker_mananger] Generated ports ['1638', '1639', '1640', '1641', '1642']
2026-02-10 04:45:52.928 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:45:52.928 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:45:52.928 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:45:52.928 DEBUG [src.node.docker_mananger] docker run -i -t -p 1638:1638 -p 1639:1639 -p 1640:1640 -p 1641:1641 -p 1642:1642 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1640 --rest-port=1638 --tcp-port=1639 --discv5-udp-port=1641 --rest-address=0.0.0.0 --nat=extip:172.18.139.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e55eadf7b9d6976c9abc123a2d621332b70c130b071d10fd14e4fff02e6376c7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1642 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHg0Qdwpl0lNfNpwrcwxQL1lhOS3yBUJ0DoIzaGgqnGDZLblu0Yh98bQzCsti3CSGzqigTZcaxLotUe7fjmreAQCgmlkgnY0gmlwhKwSFrqKbXVsdGlhZGRyc5YACASsEha6BrkdAAoErBIWuga5Ht0DgnJzhQADAQAAiXNlY3AyNTZrMaECrSHO3D4lYZor-Wp22WJJ8C2wtOMSnKcfkxoPGzl5DzuDdGNwgrkdg3VkcIK5H4V3YWt1MgU --filternode=/ip4/172.18.22.186/tcp/47389/p2p/16Uiu2HAm75WQqHm3oRfjio8xe1DP6KcDuKj81zkWN6AR8PidGv3U
2026-02-10 04:45:53.086 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.139.236 waku ae1ad8e0c8adf09bc90ff850f73e949d0cacbac9666ab208abb457ca7c0e6a09
2026-02-10 04:45:53.110 DEBUG [src.node.docker_mananger] Container started with ID ae1ad8e0c8ad. Setting up logs at ./log/docker/node2_2026-02-10_04-45-51__c1c196df-addd-48ce-8c2e-82e64f6fbf2e__wakuorg_nwaku:latest.log
2026-02-10 04:45:53.111 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1638
2026-02-10 04:45:53.111 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:45:54.111 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1638/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:54.115 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-10 04:45:54.115 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:45:54.115 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1638/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:54.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.236/tcp/1639/p2p/16Uiu2HAmFGJawmHBEeE3Y7SaAjUsdRC7CoG7R7BJbrkgZ1FpXSdy","/ip4/172.18.139.236/tcp/1640/ws/p2p/16Uiu2HAmFGJawmHBEeE3Y7SaAjUsdRC7CoG7R7BJbrkgZ1FpXSdy"],"enrUri":"enr:-L24QKK0YxohWP09XDpVRNKwKQGSR2kzaUAew_z3Xc0L25NsJB_-0iURoEGa8GjgMjP49TyxZHKiq1psluZK1EwXFSwCgmlkgnY0gmlwhKwSi-yKbXVsdGlhZGRyc5YACASsEovsBgZnAAoErBKL7AYGaN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJsNSL7e9Yj_IOAFQ52fxLEbjSgf4zMerdkpaP1pzL0SDdGNwggZng3VkcIIGaYV3YWt1MgA"}'
2026-02-10 04:45:54.118 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:45:54.119 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1638/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.22.186/tcp/47389/p2p/16Uiu2HAm75WQqHm3oRfjio8xe1DP6KcDuKj81zkWN6AR8PidGv3U"]'
2026-02-10 04:45:54.145 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:45:54.146 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-10 04:45:54.146 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47388/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-10 04:45:54.160 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:45:54.161 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1638/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "96ef285d-29f6-4498-9326-a1adc4306e56", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-10 04:45:54.171 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"96ef285d-29f6-4498-9326-a1adc4306e56","statusDesc":"OK"}'
2026-02-10 04:45:54.173 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47388/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-10 04:45:54.179 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:45:54.179 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-10 04:45:54.279 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-10 04:45:54.280 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1638/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:54.283 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770698754173073530,"ephemeral":false}]'
2026-02-10 04:45:54.284 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:1638/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345678901234567890123456789012345678901234567890", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-10 04:45:54.292 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345678901234567890123456789012345678901234567890","statusDesc":"OK"}'
2026-02-10 04:45:54.292 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47388/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-10 04:45:54.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:45:54.296 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-10 04:45:54.396 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-10 04:45:54.397 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1638/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:54.399 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:1638/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
2026-02-10 04:45:54.402 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-10 04:45:54.403 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-10 04:45:54.403 DEBUG [src.node.waku_node] Stopping container with id ab2666542001
2026-02-10 04:45:54.897 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:45:54.897 DEBUG [src.node.waku_node] Stopping container with id ae1ad8e0c8ad
2026-02-10 04:45:55.374 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:45:55.377 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-10 04:45:55.382 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-10 04:45:55.386 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
