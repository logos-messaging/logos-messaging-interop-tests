2026-02-10 04:47:52.732 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-10 04:47:52.733 DEBUG [tests.conftest] Running test: test_publish_on_not_subscribed_content_topic_works with id: 2026-02-10_04-47-52__1460bfe8-9869-4d18-b7e8-a4bf2b5f2adf
2026-02-10 04:47:52.733 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-10 04:47:52.734 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-10 04:47:52.734 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-10 04:47:52.745 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:47:52.745 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-10_04-47-52__1460bfe8-9869-4d18-b7e8-a4bf2b5f2adf__wakuorg_nwaku:latest.log
2026-02-10 04:47:52.746 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:47:52.746 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:47:52.748 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:47:52.748 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.34.229
2026-02-10 04:47:52.748 DEBUG [src.node.docker_mananger] Generated ports ['39365', '39366', '39367', '39368', '39369']
2026-02-10 04:47:52.749 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:47:52.749 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:47:52.749 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:47:52.749 DEBUG [src.node.docker_mananger] docker run -i -t -p 39365:39365 -p 39366:39366 -p 39367:39367 -p 39368:39368 -p 39369:39369 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39367 --rest-port=39365 --tcp-port=39366 --discv5-udp-port=39368 --rest-address=0.0.0.0 --nat=extip:172.18.34.229 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e6deb4ee1bf734b10a1226ca65e92ee6b9f0ea2e5f2fdf18d4bcc39bf5aedda1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39369 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-02-10 04:47:52.928 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.34.229 waku f3bfe06e8ec940d8bcd3152812c49a322b1cbe49fa221fd43b593ea3a9b31c22
2026-02-10 04:47:52.960 DEBUG [src.node.docker_mananger] Container started with ID f3bfe06e8ec9. Setting up logs at ./log/docker/node1_2026-02-10_04-47-52__1460bfe8-9869-4d18-b7e8-a4bf2b5f2adf__wakuorg_nwaku:latest.log
2026-02-10 04:47:52.960 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39365
2026-02-10 04:47:52.960 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:47:52.988 ERROR [src.node.docker_mananger] Max retries reached for container 43a7f816c51e. Exiting log stream.
2026-02-10 04:47:53.557 ERROR [src.node.docker_mananger] Max retries reached for container c4c743993c78. Exiting log stream.
2026-02-10 04:47:53.962 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39365/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:53.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-10 04:47:53.965 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:47:53.965 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39365/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:53.967 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.229/tcp/39366/p2p/16Uiu2HAm7eqc53xx5Z3KiDvfh93nfPhKXdL7hbxFLHGcx7o8a5VM","/ip4/172.18.34.229/tcp/39367/ws/p2p/16Uiu2HAm7eqc53xx5Z3KiDvfh93nfPhKXdL7hbxFLHGcx7o8a5VM"],"enrUri":"enr:-L24QBRGpcIufKBYLdoC0doxHJClX98gbhLOO9cW1R6dyUl_UizfJeCejMDokk6_iwhjdhbDuDpQjyqeXZCQEeqgfhMCgmlkgnY0gmlwhKwSIuWKbXVsdGlhZGRyc5YACASsEiLlBpnGAAoErBIi5QaZx90DgnJzhQACAQAAiXNlY3AyNTZrMaECtautXAlGSjfIJFomETaU0zV9AQ33zC1WaUZewc_KgFSDdGNwgpnGg3VkcIKZyIV3YWt1MgU"}'
2026-02-10 04:47:53.967 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:47:53.974 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:47:53.974 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-10_04-47-52__1460bfe8-9869-4d18-b7e8-a4bf2b5f2adf__wakuorg_nwaku:latest.log
2026-02-10 04:47:53.974 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:47:53.974 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:47:53.976 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:47:53.976 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.253
2026-02-10 04:47:53.976 DEBUG [src.node.docker_mananger] Generated ports ['19420', '19421', '19422', '19423', '19424']
2026-02-10 04:47:53.976 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:47:53.976 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:47:53.977 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:47:53.977 DEBUG [src.node.docker_mananger] docker run -i -t -p 19420:19420 -p 19421:19421 -p 19422:19422 -p 19423:19423 -p 19424:19424 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19422 --rest-port=19420 --tcp-port=19421 --discv5-udp-port=19423 --rest-address=0.0.0.0 --nat=extip:172.18.121.253 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a2591be97ef3e6bbaa89d0b1e5046352535ff8afcafe871fe3b966f2accaccd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19424 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBRGpcIufKBYLdoC0doxHJClX98gbhLOO9cW1R6dyUl_UizfJeCejMDokk6_iwhjdhbDuDpQjyqeXZCQEeqgfhMCgmlkgnY0gmlwhKwSIuWKbXVsdGlhZGRyc5YACASsEiLlBpnGAAoErBIi5QaZx90DgnJzhQACAQAAiXNlY3AyNTZrMaECtautXAlGSjfIJFomETaU0zV9AQ33zC1WaUZewc_KgFSDdGNwgpnGg3VkcIKZyIV3YWt1MgU --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-02-10 04:47:54.175 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.253 waku 0498c9303f36d231afbfe491be65136381f686c13a2ecfd5dfa4fcfb1fc630b2
2026-02-10 04:47:54.210 DEBUG [src.node.docker_mananger] Container started with ID 0498c9303f36. Setting up logs at ./log/docker/node2_2026-02-10_04-47-52__1460bfe8-9869-4d18-b7e8-a4bf2b5f2adf__wakuorg_nwaku:latest.log
2026-02-10 04:47:54.210 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19420
2026-02-10 04:47:54.210 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:47:55.213 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19420/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:55.224 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-10 04:47:55.224 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:47:55.224 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19420/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:55.228 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.253/tcp/19421/p2p/16Uiu2HAm96SfdYKZs7GSw6YZPHA6jT6tQwQLTtGP9ivnVdr7y3Ag","/ip4/172.18.121.253/tcp/19422/ws/p2p/16Uiu2HAm96SfdYKZs7GSw6YZPHA6jT6tQwQLTtGP9ivnVdr7y3Ag"],"enrUri":"enr:-L24QGyG-xfd0m5qv5KYp77tQq-3-lkpTI0eCA2uuGgrdiQ4Jonv4ozBqjpoDdYV-s_zxIT7d2tELilccW8t31ktdDwCgmlkgnY0gmlwhKwSef2KbXVsdGlhZGRyc5YACASsEnn9BkvdAAoErBJ5_QZL3t0DgnJzhQACAQAAiXNlY3AyNTZrMaECyxaHQz5FEsI5sV0VCTjHtmlHdY3SN_15KV4DHQs6wTmDdGNwgkvdg3VkcIJL34V3YWt1MgE"}'
2026-02-10 04:47:55.229 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:47:55.229 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19420/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.229/tcp/39366/p2p/16Uiu2HAm7eqc53xx5Z3KiDvfh93nfPhKXdL7hbxFLHGcx7o8a5VM"]'
2026-02-10 04:47:55.231 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:55.232 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39365/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-10 04:47:55.234 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:55.235 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19420/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-10 04:47:55.237 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:55.238 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39365/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-10 04:47:55.240 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:55.241 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19420/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-10 04:47:55.243 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:55.245 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-10 04:47:55.246 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-10 04:47:55.246 DEBUG [src.node.waku_node] Stopping container with id f3bfe06e8ec9
2026-02-10 04:47:55.834 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:47:55.834 DEBUG [src.node.waku_node] Stopping container with id 0498c9303f36
2026-02-10 04:47:56.407 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:47:56.409 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-10 04:47:56.413 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-10 04:47:56.417 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
