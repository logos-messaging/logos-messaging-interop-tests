2026-02-10 04:49:28.461 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-10 04:49:28.462 DEBUG [tests.conftest] Running test: test_single_pubsub_topic[/waku/2/rs/2/0] with id: 2026-02-10_04-49-28__5ae7335d-8b87-4214-9a44-aad58e2482b7
2026-02-10 04:49:28.462 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-10 04:49:28.462 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-10 04:49:28.462 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-10 04:49:28.469 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:49:28.469 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-10_04-49-28__5ae7335d-8b87-4214-9a44-aad58e2482b7__wakuorg_nwaku:latest.log
2026-02-10 04:49:28.469 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:49:28.470 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:49:28.471 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:49:28.471 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.4
2026-02-10 04:49:28.471 DEBUG [src.node.docker_mananger] Generated ports ['49618', '49619', '49620', '49621', '49622']
2026-02-10 04:49:28.471 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-02-10 04:49:28.472 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-10 04:49:28.472 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:49:28.472 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:49:28.472 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:49:28.472 DEBUG [src.node.docker_mananger] docker run -i -t -p 49618:49618 -p 49619:49619 -p 49620:49620 -p 49621:49621 -p 49622:49622 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49620 --rest-port=49618 --tcp-port=49619 --discv5-udp-port=49621 --rest-address=0.0.0.0 --nat=extip:172.18.213.4 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=5bf4176c6bfe980561c9cffa3b0afd6cea73aebbe29faa7aa7c1fc7ddcbd57bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49622 --metrics-logging=true --relay=true --filter=true
2026-02-10 04:49:28.648 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.4 waku 9b795edc52ed9453d220b3a190e53f2742f09479ca3f73f42141bf7786e7257a
2026-02-10 04:49:28.679 DEBUG [src.node.docker_mananger] Container started with ID 9b795edc52ed. Setting up logs at ./log/docker/node1_2026-02-10_04-49-28__5ae7335d-8b87-4214-9a44-aad58e2482b7__wakuorg_nwaku:latest.log
2026-02-10 04:49:28.680 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49618
2026-02-10 04:49:28.680 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:49:28.721 ERROR [src.node.docker_mananger] Max retries reached for container 2ce9dd352d69. Exiting log stream.
2026-02-10 04:49:29.268 ERROR [src.node.docker_mananger] Max retries reached for container 5b9986ad47aa. Exiting log stream.
2026-02-10 04:49:29.680 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49618/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:49:29.683 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-10 04:49:29.684 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:49:29.684 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49618/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:49:29.686 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.4/tcp/49619/p2p/16Uiu2HAmFucRV2Vipm2soJUMfwKd8P2mreipmnjsaTpmcvcks3rK","/ip4/172.18.213.4/tcp/49620/ws/p2p/16Uiu2HAmFucRV2Vipm2soJUMfwKd8P2mreipmnjsaTpmcvcks3rK"],"enrUri":"enr:-L24QLGR8JL9uJy1osk9Wjkqkqfm7NNGAlH11_bDfcL3D64bMYUeJPADhKZaqNFN31hCNLztx13U0mwXV24iK4MnjikCgmlkgnY0gmlwhKwS1QSKbXVsdGlhZGRyc5YACASsEtUEBsHTAAoErBLVBAbB1N0DgnJzhQACAQAAiXNlY3AyNTZrMaEDMFH6rN35oPzXYsOktN6Wl0CSmJ2QOH_JRL0mU0NiJJSDdGNwgsHTg3VkcILB1YV3YWt1MgU"}'
2026-02-10 04:49:29.686 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:49:29.693 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:49:29.693 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-10_04-49-28__5ae7335d-8b87-4214-9a44-aad58e2482b7__wakuorg_nwaku:latest.log
2026-02-10 04:49:29.693 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:49:29.693 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:49:29.694 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:49:29.695 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.37.186
2026-02-10 04:49:29.695 DEBUG [src.node.docker_mananger] Generated ports ['58549', '58550', '58551', '58552', '58553']
2026-02-10 04:49:29.695 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-02-10 04:49:29.695 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-10 04:49:29.695 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:49:29.695 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:49:29.695 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:49:29.696 DEBUG [src.node.docker_mananger] docker run -i -t -p 58549:58549 -p 58550:58550 -p 58551:58551 -p 58552:58552 -p 58553:58553 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58551 --rest-port=58549 --tcp-port=58550 --discv5-udp-port=58552 --rest-address=0.0.0.0 --nat=extip:172.18.37.186 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2ddaa169cf30bdbfcca1e506d9d1e4dcebbd4a3404ce2fbbbcebcb15f86ebd73 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58553 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLGR8JL9uJy1osk9Wjkqkqfm7NNGAlH11_bDfcL3D64bMYUeJPADhKZaqNFN31hCNLztx13U0mwXV24iK4MnjikCgmlkgnY0gmlwhKwS1QSKbXVsdGlhZGRyc5YACASsEtUEBsHTAAoErBLVBAbB1N0DgnJzhQACAQAAiXNlY3AyNTZrMaEDMFH6rN35oPzXYsOktN6Wl0CSmJ2QOH_JRL0mU0NiJJSDdGNwgsHTg3VkcILB1YV3YWt1MgU
2026-02-10 04:49:29.875 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.37.186 waku 304a981a647d24ecf4a48e5be6348238c0ef1eca40347da491ac2e272dfbe59c
2026-02-10 04:49:29.907 DEBUG [src.node.docker_mananger] Container started with ID 304a981a647d. Setting up logs at ./log/docker/node2_2026-02-10_04-49-28__5ae7335d-8b87-4214-9a44-aad58e2482b7__wakuorg_nwaku:latest.log
2026-02-10 04:49:29.907 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58549
2026-02-10 04:49:29.908 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:49:30.908 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58549/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:49:30.922 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-10 04:49:30.924 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:49:30.924 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58549/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:49:30.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.186/tcp/58550/p2p/16Uiu2HAmHLzbH7pqtQoXPw4F2opTsRzKeU67gQFVPfSwJgQ9YrTf","/ip4/172.18.37.186/tcp/58551/ws/p2p/16Uiu2HAmHLzbH7pqtQoXPw4F2opTsRzKeU67gQFVPfSwJgQ9YrTf"],"enrUri":"enr:-L24QFXlCjPWemO2h_PBsdjL2qhZRcfixp8ps1kqE_d1PFW2Zcf415Dl0_JQc11Wiv7JQuPIBy0Mvz6utHYVO8RBYmYCgmlkgnY0gmlwhKwSJbqKbXVsdGlhZGRyc5YACASsEiW6BuS2AAoErBIlugbkt90DgnJzhQACAQAAiXNlY3AyNTZrMaEDRa5AtiIfN5VTfW5wl14lmk6zNW4V-XFRdedu2o2onOaDdGNwguS2g3VkcILkuIV3YWt1MgE"}'
2026-02-10 04:49:30.927 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:49:30.928 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58549/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.4/tcp/49619/p2p/16Uiu2HAmFucRV2Vipm2soJUMfwKd8P2mreipmnjsaTpmcvcks3rK"]'
2026-02-10 04:49:30.930 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:49:30.930 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49618/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-10 04:49:30.933 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:49:30.933 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58549/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-10 04:49:30.935 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:49:30.936 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49618/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-10 04:49:30.941 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:49:30.941 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-10 04:49:31.041 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-10 04:49:31.042 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49618/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:49:31.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770698970936208625,"ephemeral":false,"proof":""}]'
2026-02-10 04:49:31.047 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-10 04:49:31.047 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58549/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:49:31.049 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770698970936208625,"ephemeral":false,"proof":""}]'
2026-02-10 04:49:31.052 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-10 04:49:31.053 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-10 04:49:31.053 DEBUG [src.node.waku_node] Stopping container with id 9b795edc52ed
2026-02-10 04:49:31.589 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:49:31.590 DEBUG [src.node.waku_node] Stopping container with id 304a981a647d
2026-02-10 04:49:32.106 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:49:32.107 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-10 04:49:32.112 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-10 04:49:32.118 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
