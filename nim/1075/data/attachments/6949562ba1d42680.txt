2026-02-10 04:45:06.437 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-10 04:45:06.438 DEBUG [tests.conftest] Running test: test_filter_get_message_with_version with id: 2026-02-10_04-45-06__6173d758-1397-4454-b2b0-ba2b0d4bb8fa
2026-02-10 04:45:06.438 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-10 04:45:06.438 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-10 04:45:06.439 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-10 04:45:06.446 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:45:06.446 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-10_04-45-06__6173d758-1397-4454-b2b0-ba2b0d4bb8fa__wakuorg_nwaku:latest.log
2026-02-10 04:45:06.446 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:45:06.446 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:45:06.448 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:45:06.448 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.227.72
2026-02-10 04:45:06.448 DEBUG [src.node.docker_mananger] Generated ports ['28621', '28622', '28623', '28624', '28625']
2026-02-10 04:45:06.448 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:45:06.449 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:45:06.449 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:45:06.449 DEBUG [src.node.docker_mananger] docker run -i -t -p 28621:28621 -p 28622:28622 -p 28623:28623 -p 28624:28624 -p 28625:28625 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28623 --rest-port=28621 --tcp-port=28622 --discv5-udp-port=28624 --rest-address=0.0.0.0 --nat=extip:172.18.227.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db30cfdb4bbdc81249ad2bd51cec136618a9a084f93f5e75ff6e383a9b178931 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28625 --metrics-logging=true --relay=true --filter=true
2026-02-10 04:45:06.643 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.227.72 waku 681bc56e455635d5e75e256e110b374648f7f7f871bf82c370f9052606903e58
2026-02-10 04:45:06.673 DEBUG [src.node.docker_mananger] Container started with ID 681bc56e4556. Setting up logs at ./log/docker/node1_2026-02-10_04-45-06__6173d758-1397-4454-b2b0-ba2b0d4bb8fa__wakuorg_nwaku:latest.log
2026-02-10 04:45:06.674 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28621
2026-02-10 04:45:06.675 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:45:06.680 ERROR [src.node.docker_mananger] Max retries reached for container 00120134c6cb. Exiting log stream.
2026-02-10 04:45:07.245 ERROR [src.node.docker_mananger] Max retries reached for container 4fad02230a85. Exiting log stream.
2026-02-10 04:45:07.675 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28621/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:07.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-10 04:45:07.679 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:45:07.679 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28621/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:07.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.72/tcp/28622/p2p/16Uiu2HAm4eU3UdBmWUgw5ypAPagAkNftzmKnxGhfoasCCDC9xFoH","/ip4/172.18.227.72/tcp/28623/ws/p2p/16Uiu2HAm4eU3UdBmWUgw5ypAPagAkNftzmKnxGhfoasCCDC9xFoH"],"enrUri":"enr:-L24QEsTfYkKmS_Ycw8cewLgg6hef_n2BxWSwfYXOSLBLeSYN1dn2bJNXOX7pgL6uTqCqzn-8v0KLtmcr_Zj-Ansyw4CgmlkgnY0gmlwhKwS40iKbXVsdGlhZGRyc5YACASsEuNIBm_OAAoErBLjSAZvz90DgnJzhQADAQAAiXNlY3AyNTZrMaECiQA8eRgJjXyirfFzbYO2hOO1845Jr6_XDTGH4zq-COyDdGNwgm_Og3VkcIJv0IV3YWt1MgU"}'
2026-02-10 04:45:07.682 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:45:07.682 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-10 04:45:07.689 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:45:07.689 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-10_04-45-06__6173d758-1397-4454-b2b0-ba2b0d4bb8fa__wakuorg_nwaku:latest.log
2026-02-10 04:45:07.689 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:45:07.689 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:45:07.691 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:45:07.691 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.3.247
2026-02-10 04:45:07.691 DEBUG [src.node.docker_mananger] Generated ports ['56293', '56294', '56295', '56296', '56297']
2026-02-10 04:45:07.692 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:45:07.692 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:45:07.692 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:45:07.692 DEBUG [src.node.docker_mananger] docker run -i -t -p 56293:56293 -p 56294:56294 -p 56295:56295 -p 56296:56296 -p 56297:56297 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56295 --rest-port=56293 --tcp-port=56294 --discv5-udp-port=56296 --rest-address=0.0.0.0 --nat=extip:172.18.3.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ec0cd57eac9c471c39deaea2f5726f1ef1ec5effa3edcb01862fbbd78ae0ddbb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56297 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QEsTfYkKmS_Ycw8cewLgg6hef_n2BxWSwfYXOSLBLeSYN1dn2bJNXOX7pgL6uTqCqzn-8v0KLtmcr_Zj-Ansyw4CgmlkgnY0gmlwhKwS40iKbXVsdGlhZGRyc5YACASsEuNIBm_OAAoErBLjSAZvz90DgnJzhQADAQAAiXNlY3AyNTZrMaECiQA8eRgJjXyirfFzbYO2hOO1845Jr6_XDTGH4zq-COyDdGNwgm_Og3VkcIJv0IV3YWt1MgU --filternode=/ip4/172.18.227.72/tcp/28622/p2p/16Uiu2HAm4eU3UdBmWUgw5ypAPagAkNftzmKnxGhfoasCCDC9xFoH
2026-02-10 04:45:07.890 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.3.247 waku 1d82c34a1bf2e0ae755e7f69304072109ac12dfa4dbe60f8a36adef0767f0927
2026-02-10 04:45:07.918 DEBUG [src.node.docker_mananger] Container started with ID 1d82c34a1bf2. Setting up logs at ./log/docker/node2_2026-02-10_04-45-06__6173d758-1397-4454-b2b0-ba2b0d4bb8fa__wakuorg_nwaku:latest.log
2026-02-10 04:45:07.919 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56293
2026-02-10 04:45:07.919 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:45:08.919 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56293/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:08.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-10 04:45:08.924 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:45:08.924 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56293/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:08.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.247/tcp/56294/p2p/16Uiu2HAmNbGv4gJvVSQgkUtdqHr9YZzutpvhcbWBJT2SmXFXZtCz","/ip4/172.18.3.247/tcp/56295/ws/p2p/16Uiu2HAmNbGv4gJvVSQgkUtdqHr9YZzutpvhcbWBJT2SmXFXZtCz"],"enrUri":"enr:-L24QCdVtM2QDIeHcyB4I-JvDIhGDFK62yOiPyQKHce1bgg-V_ZNkM4ch7aIJ24kUpT7pnAVPFu7ghAU8OWSeuWHqxICgmlkgnY0gmlwhKwSA_eKbXVsdGlhZGRyc5YACASsEgP3BtvmAAoErBID9wbb590DgnJzhQADAQAAiXNlY3AyNTZrMaEDk6FGtiwuHrQlUIU4yAJRSmrisJq1SEO5xx8Iu_CjKQODdGNwgtvmg3VkcILb6IV3YWt1MgA"}'
2026-02-10 04:45:08.927 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:45:08.927 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56293/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.227.72/tcp/28622/p2p/16Uiu2HAm4eU3UdBmWUgw5ypAPagAkNftzmKnxGhfoasCCDC9xFoH"]'
2026-02-10 04:45:08.957 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:45:08.959 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-10 04:45:08.959 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28621/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-10 04:45:08.972 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:45:08.973 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56293/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ed458e72-8750-4951-8354-2b39a3318040", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-10 04:45:08.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ed458e72-8750-4951-8354-2b39a3318040","statusDesc":"OK"}'
2026-02-10 04:45:08.986 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28621/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "version": 10}'
2026-02-10 04:45:08.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:45:08.995 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-10 04:45:09.095 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-10 04:45:09.096 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56293/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:45:09.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":10,"timestamp":1770698708986723360,"ephemeral":false}]'
2026-02-10 04:45:09.102 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-10 04:45:09.103 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-10 04:45:09.103 DEBUG [src.node.waku_node] Stopping container with id 681bc56e4556
2026-02-10 04:45:09.666 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:45:09.666 DEBUG [src.node.waku_node] Stopping container with id 1d82c34a1bf2
2026-02-10 04:45:10.243 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:45:10.244 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-10 04:45:10.250 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-10 04:45:10.255 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
