2026-02-10 04:44:38.081 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-10 04:44:38.081 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2026-02-10_04-44-38__eb2520e5-71e7-4fbd-8bd0-abe7ecf15c20
2026-02-10 04:44:38.082 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-10 04:44:38.082 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-10 04:44:38.088 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:44:38.089 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-10_04-44-38__eb2520e5-71e7-4fbd-8bd0-abe7ecf15c20__wakuorg_nwaku:latest.log
2026-02-10 04:44:38.089 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:44:38.089 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:44:38.090 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:44:38.090 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.77.255
2026-02-10 04:44:38.091 DEBUG [src.node.docker_mananger] Generated ports ['57184', '57185', '57186', '57187', '57188']
2026-02-10 04:44:38.091 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:44:38.091 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:44:38.091 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:44:38.091 DEBUG [src.node.docker_mananger] docker run -i -t -p 57184:57184 -p 57185:57185 -p 57186:57186 -p 57187:57187 -p 57188:57188 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57186 --rest-port=57184 --tcp-port=57185 --discv5-udp-port=57187 --rest-address=0.0.0.0 --nat=extip:172.18.77.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f9bdfac272b6bd0fc5f3513ae7e97a22f2e01fef9cfe1f782f292af24d1fedc4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57188 --metrics-logging=true --lightpush=true --relay=true
2026-02-10 04:44:38.272 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.77.255 waku e94c571cbc0059232adc91df868a18aabd366fd4778d9d9623d949db8b8d79bf
2026-02-10 04:44:38.303 DEBUG [src.node.docker_mananger] Container started with ID e94c571cbc00. Setting up logs at ./log/docker/receiving_node1_2026-02-10_04-44-38__eb2520e5-71e7-4fbd-8bd0-abe7ecf15c20__wakuorg_nwaku:latest.log
2026-02-10 04:44:38.305 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57184
2026-02-10 04:44:38.305 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:44:38.362 ERROR [src.node.docker_mananger] Max retries reached for container 815cd3943ad9. Exiting log stream.
2026-02-10 04:44:38.881 ERROR [src.node.docker_mananger] Max retries reached for container 47e261c1a134. Exiting log stream.
2026-02-10 04:44:39.306 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57184/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:44:39.310 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-10 04:44:39.310 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:44:39.310 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57184/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:44:39.312 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.77.255/tcp/57185/p2p/16Uiu2HAmHsnd2FW8qHrygdaUcnfXDMMDMQSVcXhBtHXihLxREAUi","/ip4/172.18.77.255/tcp/57186/ws/p2p/16Uiu2HAmHsnd2FW8qHrygdaUcnfXDMMDMQSVcXhBtHXihLxREAUi"],"enrUri":"enr:-L24QKTVrjnUxW2N2lR3hNvuC46Nkvq8kSCHnlyFxtc4iM-8WgY_kRIOBaLHCp8yv8LWw2x1snaKn8tzWBak4i3bxtQCgmlkgnY0gmlwhKwSTf-KbXVsdGlhZGRyc5YACASsEk3_Bt9hAAoErBJN_wbfYt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTZG5MWCqoxojoXMdNXunrHh9nweQ5CwjMAArk7flVzODdGNwgt9hg3VkcILfY4V3YWt1Mgk"}'
2026-02-10 04:44:39.312 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:44:39.319 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:44:39.319 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-10_04-44-38__eb2520e5-71e7-4fbd-8bd0-abe7ecf15c20__wakuorg_nwaku:latest.log
2026-02-10 04:44:39.319 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:44:39.319 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:44:39.321 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:44:39.321 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.221.7
2026-02-10 04:44:39.321 DEBUG [src.node.docker_mananger] Generated ports ['20348', '20349', '20350', '20351', '20352']
2026-02-10 04:44:39.321 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:44:39.321 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:44:39.321 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:44:39.321 DEBUG [src.node.docker_mananger] docker run -i -t -p 20348:20348 -p 20349:20349 -p 20350:20350 -p 20351:20351 -p 20352:20352 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20350 --rest-port=20348 --tcp-port=20349 --discv5-udp-port=20351 --rest-address=0.0.0.0 --nat=extip:172.18.221.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc82dac8612aabec564bfa4581ead3fe887cd7ebd9bfa5ea7ed8f6cc6954cf5c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20352 --metrics-logging=true --lightpush=false --relay=true
2026-02-10 04:44:39.497 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.221.7 waku 861687c685eb8b858974254500e12b278cefd01b7561db618c7ad6f7a9612c69
2026-02-10 04:44:39.527 DEBUG [src.node.docker_mananger] Container started with ID 861687c685eb. Setting up logs at ./log/docker/receiving_node2_2026-02-10_04-44-38__eb2520e5-71e7-4fbd-8bd0-abe7ecf15c20__wakuorg_nwaku:latest.log
2026-02-10 04:44:39.528 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20348
2026-02-10 04:44:39.528 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:44:40.529 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20348/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:44:40.532 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-10 04:44:40.533 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:44:40.533 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20348/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:44:40.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.7/tcp/20349/p2p/16Uiu2HAm2vLUM8mVCJbE2LKXFgUe8q7H682aRvsBcd4NkrwLLoLD","/ip4/172.18.221.7/tcp/20350/ws/p2p/16Uiu2HAm2vLUM8mVCJbE2LKXFgUe8q7H682aRvsBcd4NkrwLLoLD"],"enrUri":"enr:-L24QA7AkTf7jmoz6plUq2_2SOtzK3XHnqZh3mb9t0EtAPTyfk6D7jJKxSO0MK2fDWcwoXZlUihi_wXRemGdcwByzUACgmlkgnY0gmlwhKwS3QeKbXVsdGlhZGRyc5YACASsEt0HBk99AAoErBLdBwZPft0DgnJzhQADAQAAiXNlY3AyNTZrMaECb1mYM9jjMWyMvIb3uERuF-ykOXUyYbQOL37TPp4nWnqDdGNwgk99g3VkcIJPf4V3YWt1MgE"}'
2026-02-10 04:44:40.535 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:44:40.536 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20348/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.77.255/tcp/57185/p2p/16Uiu2HAmHsnd2FW8qHrygdaUcnfXDMMDMQSVcXhBtHXihLxREAUi"]'
2026-02-10 04:44:40.568 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:44:40.581 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:44:40.582 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-10_04-44-38__eb2520e5-71e7-4fbd-8bd0-abe7ecf15c20__wakuorg_nwaku:latest.log
2026-02-10 04:44:40.582 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:44:40.582 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:44:40.586 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:44:40.586 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.217.115
2026-02-10 04:44:40.587 DEBUG [src.node.docker_mananger] Generated ports ['7362', '7363', '7364', '7365', '7366']
2026-02-10 04:44:40.587 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:44:40.587 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:44:40.587 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:44:40.587 DEBUG [src.node.docker_mananger] docker run -i -t -p 7362:7362 -p 7363:7363 -p 7364:7364 -p 7365:7365 -p 7366:7366 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7364 --rest-port=7362 --tcp-port=7363 --discv5-udp-port=7365 --rest-address=0.0.0.0 --nat=extip:172.18.217.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d690fe60565d5ede8e5fbd8b680fefc2dbd221cf9efe681accef0d4a023fd88d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7366 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKTVrjnUxW2N2lR3hNvuC46Nkvq8kSCHnlyFxtc4iM-8WgY_kRIOBaLHCp8yv8LWw2x1snaKn8tzWBak4i3bxtQCgmlkgnY0gmlwhKwSTf-KbXVsdGlhZGRyc5YACASsEk3_Bt9hAAoErBJN_wbfYt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTZG5MWCqoxojoXMdNXunrHh9nweQ5CwjMAArk7flVzODdGNwgt9hg3VkcILfY4V3YWt1Mgk --lightpushnode=/ip4/172.18.77.255/tcp/57185/p2p/16Uiu2HAmHsnd2FW8qHrygdaUcnfXDMMDMQSVcXhBtHXihLxREAUi --lightpush=true --relay=true
2026-02-10 04:44:40.772 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.217.115 waku 201233e109c86b4340f4da8533e9915ecd6c904366e81f21a72d26f98d5c4785
2026-02-10 04:44:40.803 DEBUG [src.node.docker_mananger] Container started with ID 201233e109c8. Setting up logs at ./log/docker/lightpush_node1_2026-02-10_04-44-38__eb2520e5-71e7-4fbd-8bd0-abe7ecf15c20__wakuorg_nwaku:latest.log
2026-02-10 04:44:40.803 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7362
2026-02-10 04:44:40.803 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:44:41.804 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7362/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:44:41.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-10 04:44:41.818 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:44:41.818 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7362/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:44:41.831 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.115/tcp/7363/p2p/16Uiu2HAmPE7b9vj7hEwG2SV1hvajGgLc9GoUxgMf9ZyzEV57VB36","/ip4/172.18.217.115/tcp/7364/ws/p2p/16Uiu2HAmPE7b9vj7hEwG2SV1hvajGgLc9GoUxgMf9ZyzEV57VB36"],"enrUri":"enr:-L24QIxOSe7DDVLs36HoSZrjucY1-aw57cDAHyvwVUqaFlwLU_9_k18yVYG6WSaS9meA3ZzhnMk9IjQ6OEkMtQ0iS2QCgmlkgnY0gmlwhKwS2XOKbXVsdGlhZGRyc5YACASsEtlzBhzDAAoErBLZcwYcxN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnRE4n17rkawT9dI8DPG6hFQW64ywJkogJ_T1gECFBaGDdGNwghzDg3VkcIIcxYV3YWt1Mgk"}'
2026-02-10 04:44:41.832 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:44:41.832 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7362/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.77.255/tcp/57185/p2p/16Uiu2HAmHsnd2FW8qHrygdaUcnfXDMMDMQSVcXhBtHXihLxREAUi"]'
2026-02-10 04:44:41.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:44:41.838 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7362/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.7/tcp/20349/p2p/16Uiu2HAm2vLUM8mVCJbE2LKXFgUe8q7H682aRvsBcd4NkrwLLoLD"]'
2026-02-10 04:44:41.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:44:41.859 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57184/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-10 04:44:41.864 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:44:41.867 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20348/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-10 04:44:41.871 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:44:41.872 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7362/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-10 04:44:41.877 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:44:41.878 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7362/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1770698681878792704}}'
2026-02-10 04:44:41.881 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7362/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-10 04:44:41.883 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-10 04:44:41.883 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-10 04:44:41.884 DEBUG [src.node.waku_node] Stopping container with id e94c571cbc00
2026-02-10 04:44:42.438 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:44:42.439 DEBUG [src.node.waku_node] Stopping container with id 861687c685eb
2026-02-10 04:44:42.954 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:44:42.954 DEBUG [src.node.waku_node] Stopping container with id 201233e109c8
2026-02-10 04:44:43.250 ERROR [src.node.docker_mananger] Max retries reached for container e94c571cbc00. Exiting log stream.
2026-02-10 04:44:43.459 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:44:43.460 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-10 04:44:43.467 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-10 04:44:43.475 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-10 04:44:43.482 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
