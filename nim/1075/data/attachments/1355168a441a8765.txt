2026-02-10 04:47:41.949 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-10 04:47:41.950 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_no_request_id with id: 2026-02-10_04-47-41__a3fa37c2-0667-40e6-8e38-f4fca0fa4aa0
2026-02-10 04:47:41.950 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-10 04:47:41.950 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-10 04:47:41.950 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-10 04:47:41.957 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:47:41.957 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-10_04-47-41__a3fa37c2-0667-40e6-8e38-f4fca0fa4aa0__wakuorg_nwaku:latest.log
2026-02-10 04:47:41.957 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:47:41.958 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:47:41.959 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:47:41.959 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.14
2026-02-10 04:47:41.959 DEBUG [src.node.docker_mananger] Generated ports ['63663', '63664', '63665', '63666', '63667']
2026-02-10 04:47:41.959 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:47:41.960 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:47:41.960 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:47:41.960 DEBUG [src.node.docker_mananger] docker run -i -t -p 63663:63663 -p 63664:63664 -p 63665:63665 -p 63666:63666 -p 63667:63667 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63665 --rest-port=63663 --tcp-port=63664 --discv5-udp-port=63666 --rest-address=0.0.0.0 --nat=extip:172.18.84.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=efda6fffbd6a30ba15b8afd22ae7caffcffec8163d3b2fecb58ee07a9c9a90fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63667 --metrics-logging=true --relay=true --filter=true
2026-02-10 04:47:42.136 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.14 waku eecded272cd1680f8d77e0907f7274a5101fde736a78691d768a3aae6292457a
2026-02-10 04:47:42.168 DEBUG [src.node.docker_mananger] Container started with ID eecded272cd1. Setting up logs at ./log/docker/node1_2026-02-10_04-47-41__a3fa37c2-0667-40e6-8e38-f4fca0fa4aa0__wakuorg_nwaku:latest.log
2026-02-10 04:47:42.169 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63663
2026-02-10 04:47:42.169 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:47:42.203 ERROR [src.node.docker_mananger] Max retries reached for container a7a1f62c7734. Exiting log stream.
2026-02-10 04:47:42.757 ERROR [src.node.docker_mananger] Max retries reached for container c519326812df. Exiting log stream.
2026-02-10 04:47:43.170 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63663/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:43.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-10 04:47:43.173 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:47:43.174 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63663/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:43.176 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.14/tcp/63664/p2p/16Uiu2HAmTBz5khdr1u9YftCFzSzR6qTxqku15Qc5cMwL85eivdsY","/ip4/172.18.84.14/tcp/63665/ws/p2p/16Uiu2HAmTBz5khdr1u9YftCFzSzR6qTxqku15Qc5cMwL85eivdsY"],"enrUri":"enr:-L24QHvUU_wO_k8Nes6uMG0g5bedkOZSITsFvst9yHrm_whKPLZU5eFoa00ttIflqIZMnr9bZeiT5wXOe1JqiNbkX3UCgmlkgnY0gmlwhKwSVA6KbXVsdGlhZGRyc5YACASsElQOBviwAAoErBJUDgb4sd0DgnJzhQADAQAAiXNlY3AyNTZrMaED1_RRtiL1ZfHEa9IHAMAtARJcpL4tT1NmGyfAf7xFP_uDdGNwgviwg3VkcIL4soV3YWt1MgU"}'
2026-02-10 04:47:43.176 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:47:43.177 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-10 04:47:43.183 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-10 04:47:43.183 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-10_04-47-41__a3fa37c2-0667-40e6-8e38-f4fca0fa4aa0__wakuorg_nwaku:latest.log
2026-02-10 04:47:43.184 DEBUG [src.node.waku_node] Starting Node...
2026-02-10 04:47:43.184 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-10 04:47:43.185 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-10 04:47:43.185 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.192.160
2026-02-10 04:47:43.185 DEBUG [src.node.docker_mananger] Generated ports ['54271', '54272', '54273', '54274', '54275']
2026-02-10 04:47:43.186 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-10 04:47:43.186 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-10 04:47:43.186 DEBUG [src.node.waku_node] Using volumes []
2026-02-10 04:47:43.186 DEBUG [src.node.docker_mananger] docker run -i -t -p 54271:54271 -p 54272:54272 -p 54273:54273 -p 54274:54274 -p 54275:54275 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54273 --rest-port=54271 --tcp-port=54272 --discv5-udp-port=54274 --rest-address=0.0.0.0 --nat=extip:172.18.192.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dad9e1059cc9bef2b4c2acfcfd9a3cbf85cedff0f0c3aa98afbdc633e76302d3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54275 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHvUU_wO_k8Nes6uMG0g5bedkOZSITsFvst9yHrm_whKPLZU5eFoa00ttIflqIZMnr9bZeiT5wXOe1JqiNbkX3UCgmlkgnY0gmlwhKwSVA6KbXVsdGlhZGRyc5YACASsElQOBviwAAoErBJUDgb4sd0DgnJzhQADAQAAiXNlY3AyNTZrMaED1_RRtiL1ZfHEa9IHAMAtARJcpL4tT1NmGyfAf7xFP_uDdGNwgviwg3VkcIL4soV3YWt1MgU --filternode=/ip4/172.18.84.14/tcp/63664/p2p/16Uiu2HAmTBz5khdr1u9YftCFzSzR6qTxqku15Qc5cMwL85eivdsY
2026-02-10 04:47:43.369 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.192.160 waku 802fcf72d472f414e9c08bdd6d9b1664da1a09e51f5baeb60c4b9ecfe520d53c
2026-02-10 04:47:43.401 DEBUG [src.node.docker_mananger] Container started with ID 802fcf72d472. Setting up logs at ./log/docker/node2_2026-02-10_04-47-41__a3fa37c2-0667-40e6-8e38-f4fca0fa4aa0__wakuorg_nwaku:latest.log
2026-02-10 04:47:43.401 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54271
2026-02-10 04:47:43.401 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-10 04:47:44.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54271/health" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:44.406 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-10 04:47:44.406 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-10 04:47:44.406 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54271/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-10 04:47:44.409 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.160/tcp/54272/p2p/16Uiu2HAmG54kNe39Nmt36Njs1VZroUoLYzzysr2WLZA6rki2xuBs","/ip4/172.18.192.160/tcp/54273/ws/p2p/16Uiu2HAmG54kNe39Nmt36Njs1VZroUoLYzzysr2WLZA6rki2xuBs"],"enrUri":"enr:-L24QJJviOxLRK5UU4yjv0eb8n0e9PR3v6BC58lHXisUeg_hCy-3aRjdae-9QW_9wpfqEaJMRr05AOrFZ70iXc1eCw0CgmlkgnY0gmlwhKwSwKCKbXVsdGlhZGRyc5YACASsEsCgBtQAAAoErBLAoAbUAd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMr35GJq_aM5s1vhk6P082W0pU0SldveGfpI8JUhFVk6DdGNwgtQAg3VkcILUAoV3YWt1MgA"}'
2026-02-10 04:47:44.409 INFO [src.node.waku_node] REST service is ready !!
2026-02-10 04:47:44.409 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54271/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.14/tcp/63664/p2p/16Uiu2HAmTBz5khdr1u9YftCFzSzR6qTxqku15Qc5cMwL85eivdsY"]'
2026-02-10 04:47:44.443 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:44.443 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-10 04:47:44.444 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63663/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-10 04:47:44.456 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-10 04:47:44.457 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54271/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f13501ac-31ff-4510-a134-a37795562bd8", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-10 04:47:44.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f13501ac-31ff-4510-a134-a37795562bd8","statusDesc":"OK"}'
2026-02-10 04:47:44.471 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54271/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-10 04:47:44.474 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:54271/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-10 04:47:44.477 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-10 04:47:44.478 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-10 04:47:44.478 DEBUG [src.node.waku_node] Stopping container with id eecded272cd1
2026-02-10 04:47:45.067 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:47:45.067 DEBUG [src.node.waku_node] Stopping container with id 802fcf72d472
2026-02-10 04:47:45.583 DEBUG [src.node.waku_node] Container stopped.
2026-02-10 04:47:45.587 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-10 04:47:45.592 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-10 04:47:45.597 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
