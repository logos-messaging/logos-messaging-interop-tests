2026-02-05 04:37:35.483 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:37:35.483 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_with_extra_field with id: 2026-02-05_04-37-35__fdecd8b1-64bd-4f43-a3e2-bc4035796c36
2026-02-05 04:37:35.483 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:37:35.484 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-05 04:37:35.484 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-05 04:37:35.490 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:37:35.490 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-05_04-37-35__fdecd8b1-64bd-4f43-a3e2-bc4035796c36__wakuorg_nwaku:latest.log
2026-02-05 04:37:35.490 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:37:35.490 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:37:35.492 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:37:35.492 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.183.80
2026-02-05 04:37:35.492 DEBUG [src.node.docker_mananger] Generated ports ['17157', '17158', '17159', '17160', '17161']
2026-02-05 04:37:35.492 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:37:35.492 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:37:35.492 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:37:35.493 DEBUG [src.node.docker_mananger] docker run -i -t -p 17157:17157 -p 17158:17158 -p 17159:17159 -p 17160:17160 -p 17161:17161 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17159 --rest-port=17157 --tcp-port=17158 --discv5-udp-port=17160 --rest-address=0.0.0.0 --nat=extip:172.18.183.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=63de6b5d489c1afc21ffddbe10f126dc1efff2a3fbdeecbbffbdd5fe2bbfc6a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17161 --metrics-logging=true --relay=true --filter=true
2026-02-05 04:37:35.666 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.183.80 waku 70f699b9e7ec3b3cf9751d4b898c3bb2e5e0e394677e9ab73a14776c768080d5
2026-02-05 04:37:35.699 DEBUG [src.node.docker_mananger] Container started with ID 70f699b9e7ec. Setting up logs at ./log/docker/node1_2026-02-05_04-37-35__fdecd8b1-64bd-4f43-a3e2-bc4035796c36__wakuorg_nwaku:latest.log
2026-02-05 04:37:35.700 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17157
2026-02-05 04:37:35.700 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:37:35.783 ERROR [src.node.docker_mananger] Max retries reached for container 9c924096a914. Exiting log stream.
2026-02-05 04:37:36.289 ERROR [src.node.docker_mananger] Max retries reached for container 356683e9a5f4. Exiting log stream.
2026-02-05 04:37:36.700 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17157/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:37:36.704 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:37:36.704 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:37:36.704 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17157/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:37:36.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.80/tcp/17158/p2p/16Uiu2HAmCud5y8yrRLaTteT8QmaoA54sEHiLAogjPeM94c7Me6vD","/ip4/172.18.183.80/tcp/17159/ws/p2p/16Uiu2HAmCud5y8yrRLaTteT8QmaoA54sEHiLAogjPeM94c7Me6vD"],"enrUri":"enr:-L24QMqR56_A-MnkYT2L_zhktRUZ-idzNPxMEon8NnmrVYigLjQrjsy0lrfeoIKiPZUY1Lrkp7ATIk2XKFfKv8sGGVYCgmlkgnY0gmlwhKwSt1CKbXVsdGlhZGRyc5YACASsErdQBkMGAAoErBK3UAZDB90DgnJzhQADAQAAiXNlY3AyNTZrMaEDA7-rLlgPVixyjEsn3xhKd3UFceostYA1Kwt2Lc5uKsqDdGNwgkMGg3VkcIJDCIV3YWt1MgU"}'
2026-02-05 04:37:36.706 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:37:36.707 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-05 04:37:36.713 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:37:36.713 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-05_04-37-35__fdecd8b1-64bd-4f43-a3e2-bc4035796c36__wakuorg_nwaku:latest.log
2026-02-05 04:37:36.714 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:37:36.714 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:37:36.715 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:37:36.715 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.3.24
2026-02-05 04:37:36.715 DEBUG [src.node.docker_mananger] Generated ports ['20735', '20736', '20737', '20738', '20739']
2026-02-05 04:37:36.716 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:37:36.716 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:37:36.716 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:37:36.716 DEBUG [src.node.docker_mananger] docker run -i -t -p 20735:20735 -p 20736:20736 -p 20737:20737 -p 20738:20738 -p 20739:20739 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20737 --rest-port=20735 --tcp-port=20736 --discv5-udp-port=20738 --rest-address=0.0.0.0 --nat=extip:172.18.3.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ade4befbf12a7cdba98be4ccbb20f149bb5ddac110510e9b176ee7ecfcc4bcc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20739 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QMqR56_A-MnkYT2L_zhktRUZ-idzNPxMEon8NnmrVYigLjQrjsy0lrfeoIKiPZUY1Lrkp7ATIk2XKFfKv8sGGVYCgmlkgnY0gmlwhKwSt1CKbXVsdGlhZGRyc5YACASsErdQBkMGAAoErBK3UAZDB90DgnJzhQADAQAAiXNlY3AyNTZrMaEDA7-rLlgPVixyjEsn3xhKd3UFceostYA1Kwt2Lc5uKsqDdGNwgkMGg3VkcIJDCIV3YWt1MgU --filternode=/ip4/172.18.183.80/tcp/17158/p2p/16Uiu2HAmCud5y8yrRLaTteT8QmaoA54sEHiLAogjPeM94c7Me6vD
2026-02-05 04:37:36.890 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.3.24 waku b2726b9dbdd1ba65669ebadbfcc09e252e432010392408a1d3b7911c31574e41
2026-02-05 04:37:36.923 DEBUG [src.node.docker_mananger] Container started with ID b2726b9dbdd1. Setting up logs at ./log/docker/node2_2026-02-05_04-37-35__fdecd8b1-64bd-4f43-a3e2-bc4035796c36__wakuorg_nwaku:latest.log
2026-02-05 04:37:36.923 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20735
2026-02-05 04:37:36.923 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:37:37.924 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20735/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:37:37.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-05 04:37:37.928 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:37:37.928 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20735/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:37:37.930 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.24/tcp/20736/p2p/16Uiu2HAmJ2bmeXPUSnH6bEuwSpQ9r8ayixC3fxKx2zN6ZFRH13NY","/ip4/172.18.3.24/tcp/20737/ws/p2p/16Uiu2HAmJ2bmeXPUSnH6bEuwSpQ9r8ayixC3fxKx2zN6ZFRH13NY"],"enrUri":"enr:-L24QDXrfyj3llBx3CKXOoNLX6fM4UApKaR8BeYirwTojAx2b4fMyOY8aHBg9b57porXO2SNm5s3j8J7fFoUjDHh4NUCgmlkgnY0gmlwhKwSAxiKbXVsdGlhZGRyc5YACASsEgMYBlEAAAoErBIDGAZRAd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDT9OuXMbySDEfH8IYE3VTwiBEa0RcFKzKvZyHITNtoamDdGNwglEAg3VkcIJRAoV3YWt1MgA"}'
2026-02-05 04:37:37.931 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:37:37.931 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20735/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.183.80/tcp/17158/p2p/16Uiu2HAmCud5y8yrRLaTteT8QmaoA54sEHiLAogjPeM94c7Me6vD"]'
2026-02-05 04:37:37.957 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:37:37.960 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-05 04:37:37.962 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17157/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-05 04:37:37.972 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:37:37.973 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20735/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "29bbdbdf-da9b-4a43-bba5-b6805166fe3e", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-05 04:37:37.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"29bbdbdf-da9b-4a43-bba5-b6805166fe3e","statusDesc":"OK"}'
2026-02-05 04:37:37.987 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:20735/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1, "extraField": "extraValue"}'
2026-02-05 04:37:37.990 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20735/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-05 04:37:37.992 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:37:37.993 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:37:37.993 DEBUG [src.node.waku_node] Stopping container with id 70f699b9e7ec
2026-02-05 04:37:38.492 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:37:38.493 DEBUG [src.node.waku_node] Stopping container with id b2726b9dbdd1
2026-02-05 04:37:39.004 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:37:39.005 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:37:39.009 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:37:39.014 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
