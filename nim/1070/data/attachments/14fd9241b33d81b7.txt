2026-02-05 04:36:00.724 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:36:00.724 DEBUG [tests.conftest] Running test: test_store_with_long_string_pubsub_topic with id: 2026-02-05_04-36-00__32f758d2-3285-4693-a123-db57574b8fe2
2026-02-05 04:36:00.725 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:36:00.725 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-05 04:36:00.725 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-05 04:36:00.731 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:36:00.731 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-05_04-36-00__32f758d2-3285-4693-a123-db57574b8fe2__wakuorg_nwaku:latest.log
2026-02-05 04:36:00.731 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:36:00.732 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:36:00.733 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:36:00.733 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.178.63
2026-02-05 04:36:00.733 DEBUG [src.node.docker_mananger] Generated ports ['33562', '33563', '33564', '33565', '33566']
2026-02-05 04:36:00.733 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:36:00.733 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:36:00.733 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:36:00.734 DEBUG [src.node.docker_mananger] docker run -i -t -p 33562:33562 -p 33563:33563 -p 33564:33564 -p 33565:33565 -p 33566:33566 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33564 --rest-port=33562 --tcp-port=33563 --discv5-udp-port=33565 --rest-address=0.0.0.0 --nat=extip:172.18.178.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d8ccca2d1ebdcfe40b5ee61c24bcdcecabc6f97ec497aaad7f0ba05ccaa75d3e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33566 --metrics-logging=true --store=true --relay=true
2026-02-05 04:36:00.923 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.178.63 waku 433de290b2e22e9e32bdbde0309c32e1464e45307380acfba45a535a050ae99a
2026-02-05 04:36:00.961 DEBUG [src.node.docker_mananger] Container started with ID 433de290b2e2. Setting up logs at ./log/docker/publishing_node1_2026-02-05_04-36-00__32f758d2-3285-4693-a123-db57574b8fe2__wakuorg_nwaku:latest.log
2026-02-05 04:36:00.964 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33562
2026-02-05 04:36:00.965 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:36:00.968 ERROR [src.node.docker_mananger] Max retries reached for container b477c75cb69b. Exiting log stream.
2026-02-05 04:36:01.524 ERROR [src.node.docker_mananger] Max retries reached for container 033fcac6099f. Exiting log stream.
2026-02-05 04:36:01.966 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33562/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:36:01.970 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:36:01.970 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:36:01.970 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33562/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:36:01.972 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.63/tcp/33563/p2p/16Uiu2HAmAaSbbZjNrtqjRLqbNFqNdMUtgAig2DnLjbMpb3BcreU3","/ip4/172.18.178.63/tcp/33564/ws/p2p/16Uiu2HAmAaSbbZjNrtqjRLqbNFqNdMUtgAig2DnLjbMpb3BcreU3"],"enrUri":"enr:-L24QLDVYB4xLrc1eji8rFdS-gyu7vc4id0-SsBNuhUh8T0lf2-Z-Hs8VUlc5AJ3EvXaU3DtbamonkHk055rAsSA5bwCgmlkgnY0gmlwhKwSsj-KbXVsdGlhZGRyc5YACASsErI_BoMbAAoErBKyPwaDHN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4R5mOPWb55boZfaCx7pnMcgb9XJuC1-VO4uir1tNv-yDdGNwgoMbg3VkcIKDHYV3YWt1MgM"}'
2026-02-05 04:36:01.973 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:36:01.979 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:36:01.979 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-05_04-36-00__32f758d2-3285-4693-a123-db57574b8fe2__wakuorg_nwaku:latest.log
2026-02-05 04:36:01.979 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:36:01.980 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:36:01.981 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:36:01.981 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.170
2026-02-05 04:36:01.981 DEBUG [src.node.docker_mananger] Generated ports ['17429', '17430', '17431', '17432', '17433']
2026-02-05 04:36:01.981 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:36:01.981 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:36:01.981 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:36:01.981 DEBUG [src.node.docker_mananger] docker run -i -t -p 17429:17429 -p 17430:17430 -p 17431:17431 -p 17432:17432 -p 17433:17433 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17431 --rest-port=17429 --tcp-port=17430 --discv5-udp-port=17432 --rest-address=0.0.0.0 --nat=extip:172.18.97.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9d9bcabb4a94472d9df8fd12531fb9686b501dedec9361e6af853d6e01f68ca1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17433 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLDVYB4xLrc1eji8rFdS-gyu7vc4id0-SsBNuhUh8T0lf2-Z-Hs8VUlc5AJ3EvXaU3DtbamonkHk055rAsSA5bwCgmlkgnY0gmlwhKwSsj-KbXVsdGlhZGRyc5YACASsErI_BoMbAAoErBKyPwaDHN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4R5mOPWb55boZfaCx7pnMcgb9XJuC1-VO4uir1tNv-yDdGNwgoMbg3VkcIKDHYV3YWt1MgM --storenode=/ip4/172.18.178.63/tcp/33563/p2p/16Uiu2HAmAaSbbZjNrtqjRLqbNFqNdMUtgAig2DnLjbMpb3BcreU3 --store=true --relay=true
2026-02-05 04:36:02.173 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.170 waku 4b168273286c8a23be4337d70f9e2cdd54b17ca60692bbc3473548b29ba58368
2026-02-05 04:36:02.202 DEBUG [src.node.docker_mananger] Container started with ID 4b168273286c. Setting up logs at ./log/docker/store_node1_2026-02-05_04-36-00__32f758d2-3285-4693-a123-db57574b8fe2__wakuorg_nwaku:latest.log
2026-02-05 04:36:02.204 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17429
2026-02-05 04:36:02.204 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:36:03.204 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17429/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:36:03.209 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:36:03.209 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:36:03.209 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17429/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:36:03.212 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.170/tcp/17430/p2p/16Uiu2HAmSRVxiWbn3vHgZYeyss5tEDQDXnUaf6vmjfpwms3W2CVv","/ip4/172.18.97.170/tcp/17431/ws/p2p/16Uiu2HAmSRVxiWbn3vHgZYeyss5tEDQDXnUaf6vmjfpwms3W2CVv"],"enrUri":"enr:-L24QPc-Dn5eWauE8g5pGVuK0AWqQsw9dM6k--XsGM4g1R0oJ0Jw8nqP9YwuiRB4X3AlP2nWIvTnA56j-4qouVlCVdMCgmlkgnY0gmlwhKwSYaqKbXVsdGlhZGRyc5YACASsEmGqBkQWAAoErBJhqgZEF90DgnJzhQADAQAAiXNlY3AyNTZrMaEDzI73eKdaKoj1NiKCJZNmqSxn3QAs1QNwsv6IZEIDwdGDdGNwgkQWg3VkcIJEGIV3YWt1MgM"}'
2026-02-05 04:36:03.212 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:36:03.212 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17429/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.63/tcp/33563/p2p/16Uiu2HAmAaSbbZjNrtqjRLqbNFqNdMUtgAig2DnLjbMpb3BcreU3"]'
2026-02-05 04:36:03.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:03.215 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33562/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:36:03.217 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:03.217 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17429/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:36:03.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:03.220 DEBUG [src.steps.store] Relaying message
2026-02-05 04:36:03.220 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33562/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:36:03.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:03.226 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:36:03.426 DEBUG [src.steps.store] Relaying message
2026-02-05 04:36:03.427 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33562/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:36:03.431 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:03.432 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:36:03.633 DEBUG [src.steps.store] Relaying message
2026-02-05 04:36:03.633 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33562/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:36:03.637 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:03.638 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:36:03.838 DEBUG [src.steps.store] Relaying message
2026-02-05 04:36:03.839 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33562/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:36:03.844 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:03.844 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:36:04.044 DEBUG [src.steps.store] Relaying message
2026-02-05 04:36:04.045 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33562/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:36:04.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:04.050 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:36:04.251 DEBUG [src.steps.store] Relaying message
2026-02-05 04:36:04.251 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33562/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:36:04.256 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:04.257 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:36:04.457 DEBUG [src.steps.store] Relaying message
2026-02-05 04:36:04.458 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33562/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:36:04.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:04.462 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:36:04.663 DEBUG [src.steps.store] Relaying message
2026-02-05 04:36:04.663 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33562/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:36:04.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:04.669 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:36:04.991 DEBUG [tests.store.test_topics] Trying to get stored msg with url topic size million 
2026-02-05 04:36:04.992 DEBUG [src.steps.store] Relaying message
2026-02-05 04:36:04.992 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33562/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:36:04.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:04.997 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:36:05.200 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-05 04:36:05.424 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-02-05 04:36:10.437 ERROR [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-02-05 04:36:10.440 ERROR [tests.store.test_topics] store request with very long pubsub topic wasn't accepted 
2026-02-05 04:36:10.443 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:36:10.444 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:36:10.445 DEBUG [src.node.waku_node] Stopping container with id 433de290b2e2
2026-02-05 04:36:10.976 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:36:10.976 DEBUG [src.node.waku_node] Stopping container with id 4b168273286c
2026-02-05 04:36:11.499 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:36:11.500 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:36:11.508 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:36:11.515 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
