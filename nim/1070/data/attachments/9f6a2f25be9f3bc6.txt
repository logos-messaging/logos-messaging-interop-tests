2026-02-05 04:38:22.214 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:38:22.214 DEBUG [tests.conftest] Running test: test_store_with_wrong_url_pubsub_topic with id: 2026-02-05_04-38-22__03375e20-91a9-4e76-9898-c4834f7e3d65
2026-02-05 04:38:22.214 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:38:22.214 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-05 04:38:22.215 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-05 04:38:22.221 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:38:22.221 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-05_04-38-22__03375e20-91a9-4e76-9898-c4834f7e3d65__wakuorg_nwaku:latest.log
2026-02-05 04:38:22.221 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:38:22.221 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:38:22.222 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:38:22.222 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.92
2026-02-05 04:38:22.222 DEBUG [src.node.docker_mananger] Generated ports ['12519', '12520', '12521', '12522', '12523']
2026-02-05 04:38:22.223 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:38:22.223 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:38:22.223 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:38:22.223 DEBUG [src.node.docker_mananger] docker run -i -t -p 12519:12519 -p 12520:12520 -p 12521:12521 -p 12522:12522 -p 12523:12523 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12521 --rest-port=12519 --tcp-port=12520 --discv5-udp-port=12522 --rest-address=0.0.0.0 --nat=extip:172.18.255.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecd2d08195c9a99f2edf0ad0ff648be5a68ddfeaebca6bfeb61a7f22bc7e3ba0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12523 --metrics-logging=true --store=true --relay=true
2026-02-05 04:38:22.386 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.92 waku 59baab253d8b8f894e7e3d00de5c34d8fd2240fd20ce5ee5e78c29827a8ca1bc
2026-02-05 04:38:22.412 DEBUG [src.node.docker_mananger] Container started with ID 59baab253d8b. Setting up logs at ./log/docker/publishing_node1_2026-02-05_04-38-22__03375e20-91a9-4e76-9898-c4834f7e3d65__wakuorg_nwaku:latest.log
2026-02-05 04:38:22.412 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12519
2026-02-05 04:38:22.415 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:38:22.513 ERROR [src.node.docker_mananger] Max retries reached for container 35440f177caf. Exiting log stream.
2026-02-05 04:38:23.009 ERROR [src.node.docker_mananger] Max retries reached for container 18919b6ecad3. Exiting log stream.
2026-02-05 04:38:23.416 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12519/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:23.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:38:23.419 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:38:23.419 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12519/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:23.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.92/tcp/12520/p2p/16Uiu2HAmN3f4yafoZdJ8o2Kh6frZq2jsr72wVH2eBWPzdPpuTCHC","/ip4/172.18.255.92/tcp/12521/ws/p2p/16Uiu2HAmN3f4yafoZdJ8o2Kh6frZq2jsr72wVH2eBWPzdPpuTCHC"],"enrUri":"enr:-L24QLBn3K97Zyn8ri_kDoXv71wOcfDsu_jOY59JVqxWMTDvcxRm80Ww-iz42bqj-ToKaEa5XmEyzh549d0ciMP0E0MCgmlkgnY0gmlwhKwS_1yKbXVsdGlhZGRyc5YACASsEv9cBjDoAAoErBL_XAYw6d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDi4e9UvF_R87IRID49dw8iPAFEJxEoHSh9vJ6NdR5qGeDdGNwgjDog3VkcIIw6oV3YWt1MgM"}'
2026-02-05 04:38:23.421 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:38:23.428 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:38:23.428 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-05_04-38-22__03375e20-91a9-4e76-9898-c4834f7e3d65__wakuorg_nwaku:latest.log
2026-02-05 04:38:23.428 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:38:23.428 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:38:23.430 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:38:23.430 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.127.222
2026-02-05 04:38:23.430 DEBUG [src.node.docker_mananger] Generated ports ['37424', '37425', '37426', '37427', '37428']
2026-02-05 04:38:23.430 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:38:23.430 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:38:23.430 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:38:23.430 DEBUG [src.node.docker_mananger] docker run -i -t -p 37424:37424 -p 37425:37425 -p 37426:37426 -p 37427:37427 -p 37428:37428 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37426 --rest-port=37424 --tcp-port=37425 --discv5-udp-port=37427 --rest-address=0.0.0.0 --nat=extip:172.18.127.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=514d0adce5fcaae330fbaf00342f18d9eedae8c14dcc602ecfe8dbfeabdadb25 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37428 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLBn3K97Zyn8ri_kDoXv71wOcfDsu_jOY59JVqxWMTDvcxRm80Ww-iz42bqj-ToKaEa5XmEyzh549d0ciMP0E0MCgmlkgnY0gmlwhKwS_1yKbXVsdGlhZGRyc5YACASsEv9cBjDoAAoErBL_XAYw6d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDi4e9UvF_R87IRID49dw8iPAFEJxEoHSh9vJ6NdR5qGeDdGNwgjDog3VkcIIw6oV3YWt1MgM --storenode=/ip4/172.18.255.92/tcp/12520/p2p/16Uiu2HAmN3f4yafoZdJ8o2Kh6frZq2jsr72wVH2eBWPzdPpuTCHC --store=true --relay=true
2026-02-05 04:38:23.595 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.127.222 waku 4a39b9098edf5acec7bbb19109b293b5492b2dc37fb2e9a5abb1fc8a04e0d112
2026-02-05 04:38:23.621 DEBUG [src.node.docker_mananger] Container started with ID 4a39b9098edf. Setting up logs at ./log/docker/store_node1_2026-02-05_04-38-22__03375e20-91a9-4e76-9898-c4834f7e3d65__wakuorg_nwaku:latest.log
2026-02-05 04:38:23.621 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37424
2026-02-05 04:38:23.622 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:38:24.623 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37424/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:24.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:38:24.627 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:38:24.627 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37424/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:24.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.222/tcp/37425/p2p/16Uiu2HAkxmeAg9zsqVjYf17FnvTbEzZmt9aPZ3cSYxj1vZ22uALK","/ip4/172.18.127.222/tcp/37426/ws/p2p/16Uiu2HAkxmeAg9zsqVjYf17FnvTbEzZmt9aPZ3cSYxj1vZ22uALK"],"enrUri":"enr:-L24QPKd3pCtetbd4cMSI_6DAdB0E8sN05kGe7VamwGLoIcmHQCywq5kBWvmdb-zL0NcGfZl9w9l_F1d8kwaCRgbq9oCgmlkgnY0gmlwhKwSf96KbXVsdGlhZGRyc5YACASsEn_eBpIxAAoErBJ_3gaSMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECMbCgsTqkat3PV0cBWfnQpbd3KS242xBcsW_exOgXSfSDdGNwgpIxg3VkcIKSM4V3YWt1MgM"}'
2026-02-05 04:38:24.629 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:38:24.630 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37424/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.255.92/tcp/12520/p2p/16Uiu2HAmN3f4yafoZdJ8o2Kh6frZq2jsr72wVH2eBWPzdPpuTCHC"]'
2026-02-05 04:38:24.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:24.632 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12519/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:38:24.634 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:24.635 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37424/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:38:24.637 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:24.637 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:24.637 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:24.642 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:24.642 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:24.843 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:24.843 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:24.848 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:24.849 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:25.050 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:25.050 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:25.057 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:25.057 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:25.258 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:25.258 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:25.263 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:25.264 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:25.465 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:25.465 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:25.471 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:25.471 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:25.672 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:25.672 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:25.678 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:25.679 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:25.879 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:25.880 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:25.885 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:25.885 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:26.086 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:26.087 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:26.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:26.092 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:26.294 DEBUG [tests.store.test_topics] Trying to get stored msg with wrong url topic waku/2/rs/3/0
2026-02-05 04:38:26.294 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:26.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12519/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:26.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:26.300 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:26.501 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-05 04:38:26.501 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12519/store/v3/messages?pubsubTopic=waku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:26.504 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-02-05 04:38:26.504 DEBUG [src.steps.store] messages length is 0
2026-02-05 04:38:26.505 ERROR [tests.store.test_topics] Topic waku/2/rs/3/0 is wrong ''n: Peer wakuorg/nwaku:latest couldn't find any messages. Actual response: {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2026-02-05 04:38:26.507 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:38:26.508 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:38:26.508 DEBUG [src.node.waku_node] Stopping container with id 59baab253d8b
2026-02-05 04:38:27.016 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:38:27.018 DEBUG [src.node.waku_node] Stopping container with id 4a39b9098edf
2026-02-05 04:38:27.504 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:38:27.505 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:38:27.511 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:38:27.518 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
