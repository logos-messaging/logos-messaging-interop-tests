2026-02-05 04:38:01.583 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:38:01.583 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2026-02-05_04-38-01__ffd9c5f6-5221-41cb-a362-7a93f8c28d9b
2026-02-05 04:38:01.583 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:38:01.583 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-05 04:38:01.590 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:38:01.590 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-05_04-38-01__ffd9c5f6-5221-41cb-a362-7a93f8c28d9b__wakuorg_nwaku:latest.log
2026-02-05 04:38:01.590 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:38:01.590 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:38:01.592 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:38:01.592 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.245.84
2026-02-05 04:38:01.592 DEBUG [src.node.docker_mananger] Generated ports ['33980', '33981', '33982', '33983', '33984']
2026-02-05 04:38:01.592 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:38:01.592 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:38:01.592 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:38:01.592 DEBUG [src.node.docker_mananger] docker run -i -t -p 33980:33980 -p 33981:33981 -p 33982:33982 -p 33983:33983 -p 33984:33984 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33982 --rest-port=33980 --tcp-port=33981 --discv5-udp-port=33983 --rest-address=0.0.0.0 --nat=extip:172.18.245.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af2a9bc8c3f17018cf82bd83db9c109fcb967ae4082abef4dfa7b87a95ff5fa2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33984 --metrics-logging=true --lightpush=true --relay=true
2026-02-05 04:38:01.783 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.245.84 waku dab7b4c55a15f17d75d18cd0256f23f059919eaf6ae82afbd90a073b399d25eb
2026-02-05 04:38:01.813 DEBUG [src.node.docker_mananger] Container started with ID dab7b4c55a15. Setting up logs at ./log/docker/receiving_node1_2026-02-05_04-38-01__ffd9c5f6-5221-41cb-a362-7a93f8c28d9b__wakuorg_nwaku:latest.log
2026-02-05 04:38:01.813 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33980
2026-02-05 04:38:01.814 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:38:01.838 ERROR [src.node.docker_mananger] Max retries reached for container 81ef379cd4c8. Exiting log stream.
2026-02-05 04:38:02.391 ERROR [src.node.docker_mananger] Max retries reached for container 4673241afdb9. Exiting log stream.
2026-02-05 04:38:02.815 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33980/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:02.818 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:38:02.818 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:38:02.819 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33980/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:02.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.84/tcp/33981/p2p/16Uiu2HAmLs3hTCP7xzaXcLWZzHhJSP1GMgx8SXLav1XNwG4ADAau","/ip4/172.18.245.84/tcp/33982/ws/p2p/16Uiu2HAmLs3hTCP7xzaXcLWZzHhJSP1GMgx8SXLav1XNwG4ADAau"],"enrUri":"enr:-L24QIi3RzfuyHhU6lBBU7BON46m0ZhXgXhtXDbe9GNiFggaNqadgrKEPOMqPPC4Y1RqqxrhwM05aa2n1cgty02ZGAACgmlkgnY0gmlwhKwS9VSKbXVsdGlhZGRyc5YACASsEvVUBoS9AAoErBL1VAaEvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDefRAE4rDhR1-J1rsepWbXto-C1-eIjq3biEYAoKz3AKDdGNwgoS9g3VkcIKEv4V3YWt1Mgk"}'
2026-02-05 04:38:02.821 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:38:02.828 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:38:02.828 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-05_04-38-01__ffd9c5f6-5221-41cb-a362-7a93f8c28d9b__wakuorg_nwaku:latest.log
2026-02-05 04:38:02.828 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:38:02.828 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:38:02.829 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:38:02.830 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.66.11
2026-02-05 04:38:02.830 DEBUG [src.node.docker_mananger] Generated ports ['35573', '35574', '35575', '35576', '35577']
2026-02-05 04:38:02.830 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:38:02.830 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:38:02.830 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:38:02.830 DEBUG [src.node.docker_mananger] docker run -i -t -p 35573:35573 -p 35574:35574 -p 35575:35575 -p 35576:35576 -p 35577:35577 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35575 --rest-port=35573 --tcp-port=35574 --discv5-udp-port=35576 --rest-address=0.0.0.0 --nat=extip:172.18.66.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adbfd7eca5da4dee4f5a74af908ec9d1f789d61c78c85a2bd44ccaeda720462f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35577 --metrics-logging=true --lightpush=false --relay=true
2026-02-05 04:38:03.010 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.66.11 waku 44b855270760dae6c47926712002d69e997c7403e2dd847810d71bb93349b62a
2026-02-05 04:38:03.040 DEBUG [src.node.docker_mananger] Container started with ID 44b855270760. Setting up logs at ./log/docker/receiving_node2_2026-02-05_04-38-01__ffd9c5f6-5221-41cb-a362-7a93f8c28d9b__wakuorg_nwaku:latest.log
2026-02-05 04:38:03.040 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35573
2026-02-05 04:38:03.040 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:38:04.041 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35573/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:04.045 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:38:04.045 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:38:04.045 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35573/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:04.047 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.11/tcp/35574/p2p/16Uiu2HAmPrttZwuwF8HbbbDzUyQmEFhrW2ifnP2g7HK3Ur1jHvrZ","/ip4/172.18.66.11/tcp/35575/ws/p2p/16Uiu2HAmPrttZwuwF8HbbbDzUyQmEFhrW2ifnP2g7HK3Ur1jHvrZ"],"enrUri":"enr:-L24QCiUc5jIw5ZjgYqdrG8pvzM3bvWIwYozAq9xbszvTHfHDSgf_Ul19xa8KX6t2oB8-PdJGVY9VqVKZU3pelvNxiQCgmlkgnY0gmlwhKwSQguKbXVsdGlhZGRyc5YACASsEkILBor2AAoErBJCCwaK990DgnJzhQADAQAAiXNlY3AyNTZrMaEDpn1Z-R-cqeg31lhRaZZXvg4NmTTDAPfEhwisL0ZELo6DdGNwgor2g3VkcIKK-IV3YWt1MgE"}'
2026-02-05 04:38:04.047 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:38:04.048 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35573/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.84/tcp/33981/p2p/16Uiu2HAmLs3hTCP7xzaXcLWZzHhJSP1GMgx8SXLav1XNwG4ADAau"]'
2026-02-05 04:38:04.079 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:04.097 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:38:04.097 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-05_04-38-01__ffd9c5f6-5221-41cb-a362-7a93f8c28d9b__wakuorg_nwaku:latest.log
2026-02-05 04:38:04.097 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:38:04.097 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:38:04.099 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:38:04.099 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.160.109
2026-02-05 04:38:04.100 DEBUG [src.node.docker_mananger] Generated ports ['18031', '18032', '18033', '18034', '18035']
2026-02-05 04:38:04.100 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:38:04.100 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:38:04.100 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:38:04.100 DEBUG [src.node.docker_mananger] docker run -i -t -p 18031:18031 -p 18032:18032 -p 18033:18033 -p 18034:18034 -p 18035:18035 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18033 --rest-port=18031 --tcp-port=18032 --discv5-udp-port=18034 --rest-address=0.0.0.0 --nat=extip:172.18.160.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d38ee8f444cbfddeb57e8d21bafef87fc0ad6c713faac6c9c0acf2ce8baf920c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18035 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIi3RzfuyHhU6lBBU7BON46m0ZhXgXhtXDbe9GNiFggaNqadgrKEPOMqPPC4Y1RqqxrhwM05aa2n1cgty02ZGAACgmlkgnY0gmlwhKwS9VSKbXVsdGlhZGRyc5YACASsEvVUBoS9AAoErBL1VAaEvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDefRAE4rDhR1-J1rsepWbXto-C1-eIjq3biEYAoKz3AKDdGNwgoS9g3VkcIKEv4V3YWt1Mgk --lightpushnode=/ip4/172.18.245.84/tcp/33981/p2p/16Uiu2HAmLs3hTCP7xzaXcLWZzHhJSP1GMgx8SXLav1XNwG4ADAau --lightpush=true --relay=true
2026-02-05 04:38:04.286 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.160.109 waku 9c489f80676cb71625614f20cbfacc4d74a156055a7a82bdb92f3802bcac4100
2026-02-05 04:38:04.317 DEBUG [src.node.docker_mananger] Container started with ID 9c489f80676c. Setting up logs at ./log/docker/lightpush_node1_2026-02-05_04-38-01__ffd9c5f6-5221-41cb-a362-7a93f8c28d9b__wakuorg_nwaku:latest.log
2026-02-05 04:38:04.317 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18031
2026-02-05 04:38:04.318 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:38:05.318 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18031/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:05.322 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:38:05.322 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:38:05.322 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18031/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:05.326 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.109/tcp/18032/p2p/16Uiu2HAm3ZkMiSTk8k85xQw43H7XHehyBxb8pwefiCuXdmGULmvG","/ip4/172.18.160.109/tcp/18033/ws/p2p/16Uiu2HAm3ZkMiSTk8k85xQw43H7XHehyBxb8pwefiCuXdmGULmvG"],"enrUri":"enr:-L24QMLfWtd1aR0ZZOFlg4TFaE_xWaHpvp0rIYrGtEF6JNaAZHTuNouN4HMLIOcjaO45-wfDFlc9LO6zRGSgWU8LanUCgmlkgnY0gmlwhKwSoG2KbXVsdGlhZGRyc5YACASsEqBtBkZwAAoErBKgbQZGcd0DgnJzhQADAQAAiXNlY3AyNTZrMaECeO8XkUI8oSE_LMQaN7gMZCEVcBj68BphNvDhSwNza0mDdGNwgkZwg3VkcIJGcoV3YWt1Mgk"}'
2026-02-05 04:38:05.328 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:38:05.329 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18031/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.84/tcp/33981/p2p/16Uiu2HAmLs3hTCP7xzaXcLWZzHhJSP1GMgx8SXLav1XNwG4ADAau"]'
2026-02-05 04:38:05.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:05.357 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18031/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.11/tcp/35574/p2p/16Uiu2HAmPrttZwuwF8HbbbDzUyQmEFhrW2ifnP2g7HK3Ur1jHvrZ"]'
2026-02-05 04:38:05.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:05.388 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33980/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:38:05.393 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:05.395 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35573/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:38:05.399 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:05.401 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18031/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:38:05.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:05.407 DEBUG [src.steps.light_push] Lightpushing message
2026-02-05 04:38:05.407 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18031/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770266285407173675}}'
2026-02-05 04:38:05.415 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18031/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2026-02-05 04:38:05.418 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:38:05.419 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:38:05.419 DEBUG [src.node.waku_node] Stopping container with id dab7b4c55a15
2026-02-05 04:38:05.999 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:38:06.000 DEBUG [src.node.waku_node] Stopping container with id 44b855270760
2026-02-05 04:38:06.577 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:38:06.577 DEBUG [src.node.waku_node] Stopping container with id 9c489f80676c
2026-02-05 04:38:06.813 ERROR [src.node.docker_mananger] Max retries reached for container dab7b4c55a15. Exiting log stream.
2026-02-05 04:38:07.105 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:38:07.108 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:38:07.115 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:38:07.122 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:38:07.130 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
