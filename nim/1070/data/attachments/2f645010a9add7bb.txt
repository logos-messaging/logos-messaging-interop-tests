2026-02-05 04:37:42.941 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:37:42.942 DEBUG [tests.conftest] Running test: test_single_content_topic[/myapp/1/latest/proto] with id: 2026-02-05_04-37-42__2d9b056d-8663-4044-8da4-bf1efc4982d0
2026-02-05 04:37:42.942 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:37:42.942 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-05 04:37:42.942 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-05 04:37:42.948 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:37:42.949 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-05_04-37-42__2d9b056d-8663-4044-8da4-bf1efc4982d0__wakuorg_nwaku:latest.log
2026-02-05 04:37:42.949 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:37:42.949 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:37:42.950 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:37:42.950 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.28.202
2026-02-05 04:37:42.950 DEBUG [src.node.docker_mananger] Generated ports ['14927', '14928', '14929', '14930', '14931']
2026-02-05 04:37:42.951 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:37:42.951 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:37:42.951 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:37:42.951 DEBUG [src.node.docker_mananger] docker run -i -t -p 14927:14927 -p 14928:14928 -p 14929:14929 -p 14930:14930 -p 14931:14931 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14929 --rest-port=14927 --tcp-port=14928 --discv5-udp-port=14930 --rest-address=0.0.0.0 --nat=extip:172.18.28.202 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=becca048065a2ec77ac2ad031fcada66aaa21a32f9287e6dea1b58dd26ad8e4f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14931 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2026-02-05 04:37:43.118 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.28.202 waku 72a5df4ccc8286a95af2c922fae3a3b322b3846b5fb55c335895fb2b92b1dcb7
2026-02-05 04:37:43.145 DEBUG [src.node.docker_mananger] Container started with ID 72a5df4ccc82. Setting up logs at ./log/docker/node1_2026-02-05_04-37-42__2d9b056d-8663-4044-8da4-bf1efc4982d0__wakuorg_nwaku:latest.log
2026-02-05 04:37:43.146 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14927
2026-02-05 04:37:43.147 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:37:43.216 ERROR [src.node.docker_mananger] Max retries reached for container f339029b3613. Exiting log stream.
2026-02-05 04:37:43.733 ERROR [src.node.docker_mananger] Max retries reached for container 50c6eb47f97f. Exiting log stream.
2026-02-05 04:37:44.147 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14927/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:37:44.150 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:37:44.151 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:37:44.151 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14927/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:37:44.153 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.202/tcp/14928/p2p/16Uiu2HAmBMKbsozv96hU76HPhQnpQY9Wki6apPSMdtQCyF36UF9v","/ip4/172.18.28.202/tcp/14929/ws/p2p/16Uiu2HAmBMKbsozv96hU76HPhQnpQY9Wki6apPSMdtQCyF36UF9v"],"enrUri":"enr:-L24QDZCulu9ahIWqSr5-SOZOePwhmzrCs_jMENe5g1eu9BaQurCR4isuTVqUWm8dmNZDqJnr_NUernJ8pdAJF0mHQACgmlkgnY0gmlwhKwSHMqKbXVsdGlhZGRyc5YACASsEhzKBjpQAAoErBIcygY6Ud0DgnJzhQACAQAAiXNlY3AyNTZrMaEC7J2gUfGSEf4m_84TeWDxWzBGsMxP2jfB-5CtGPvFWUWDdGNwgjpQg3VkcII6UoV3YWt1MgU"}'
2026-02-05 04:37:44.153 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:37:44.159 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:37:44.159 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-05_04-37-42__2d9b056d-8663-4044-8da4-bf1efc4982d0__wakuorg_nwaku:latest.log
2026-02-05 04:37:44.159 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:37:44.159 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:37:44.161 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:37:44.161 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.216.131
2026-02-05 04:37:44.161 DEBUG [src.node.docker_mananger] Generated ports ['62260', '62261', '62262', '62263', '62264']
2026-02-05 04:37:44.161 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:37:44.161 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:37:44.161 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:37:44.161 DEBUG [src.node.docker_mananger] docker run -i -t -p 62260:62260 -p 62261:62261 -p 62262:62262 -p 62263:62263 -p 62264:62264 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62262 --rest-port=62260 --tcp-port=62261 --discv5-udp-port=62263 --rest-address=0.0.0.0 --nat=extip:172.18.216.131 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=4a08c3401b6abb1cc99de10ce33a0c6730fee6cf475ffda1fac9aab2bb24b76c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62264 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QDZCulu9ahIWqSr5-SOZOePwhmzrCs_jMENe5g1eu9BaQurCR4isuTVqUWm8dmNZDqJnr_NUernJ8pdAJF0mHQACgmlkgnY0gmlwhKwSHMqKbXVsdGlhZGRyc5YACASsEhzKBjpQAAoErBIcygY6Ud0DgnJzhQACAQAAiXNlY3AyNTZrMaEC7J2gUfGSEf4m_84TeWDxWzBGsMxP2jfB-5CtGPvFWUWDdGNwgjpQg3VkcII6UoV3YWt1MgU --content-topic=/myapp/1/latest/proto
2026-02-05 04:37:44.323 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.216.131 waku 05006f8ab8b7df24697ce47ffeea0821fd1c1c6dc62db96a572f708575ff0d86
2026-02-05 04:37:44.348 DEBUG [src.node.docker_mananger] Container started with ID 05006f8ab8b7. Setting up logs at ./log/docker/node2_2026-02-05_04-37-42__2d9b056d-8663-4044-8da4-bf1efc4982d0__wakuorg_nwaku:latest.log
2026-02-05 04:37:44.349 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62260
2026-02-05 04:37:44.349 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:37:45.349 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62260/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:37:45.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-05 04:37:45.360 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:37:45.360 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62260/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:37:45.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.216.131/tcp/62261/p2p/16Uiu2HAm5HDoytUenkHZRiqwHfbaCZBPvkMbw18xs6E97FGkm9HN","/ip4/172.18.216.131/tcp/62262/ws/p2p/16Uiu2HAm5HDoytUenkHZRiqwHfbaCZBPvkMbw18xs6E97FGkm9HN"],"enrUri":"enr:-L24QK8gybCf8fOgyI19A_E7oqLtAfRmv9MztVXThntsJqLAJV76u2quIwhmZFgnEOiBYk-E_cFQbHdTR_jse9yck3sCgmlkgnY0gmlwhKwS2IOKbXVsdGlhZGRyc5YACASsEtiDBvM1AAoErBLYgwbzNt0DgnJzhQACAQAAiXNlY3AyNTZrMaECkmqiGmvjbx0bQNP-8LQY2r5xioSFk7QrdGyyHUESxkWDdGNwgvM1g3VkcILzN4V3YWt1MgE"}'
2026-02-05 04:37:45.365 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:37:45.367 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62260/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.28.202/tcp/14928/p2p/16Uiu2HAmBMKbsozv96hU76HPhQnpQY9Wki6apPSMdtQCyF36UF9v"]'
2026-02-05 04:37:45.369 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:37:45.370 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14927/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-05 04:37:45.372 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:37:45.372 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62260/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-05 04:37:45.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:37:45.374 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14927/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:37:45.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:37:45.378 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-05 04:37:45.479 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-05 04:37:45.480 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14927/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:37:45.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770266265374875481,"ephemeral":false,"proof":""}]'
2026-02-05 04:37:45.485 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-05 04:37:45.485 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62260/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:37:45.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770266265374875481,"ephemeral":false,"proof":""}]'
2026-02-05 04:37:45.489 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:37:45.490 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:37:45.490 DEBUG [src.node.waku_node] Stopping container with id 72a5df4ccc82
2026-02-05 04:37:46.005 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:37:46.005 DEBUG [src.node.waku_node] Stopping container with id 05006f8ab8b7
2026-02-05 04:37:46.462 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:37:46.463 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:37:46.467 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:37:46.472 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
