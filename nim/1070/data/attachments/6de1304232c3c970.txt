2026-02-05 04:36:31.789 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:36:31.789 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2026-02-05_04-36-31__7430ee6e-fccb-4b25-a00b-f8ef3ea1577b
2026-02-05 04:36:31.790 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:36:31.790 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-05 04:36:31.797 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:36:31.797 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-05_04-36-31__7430ee6e-fccb-4b25-a00b-f8ef3ea1577b__wakuorg_nwaku:latest.log
2026-02-05 04:36:31.797 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:36:31.797 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:36:31.799 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:36:31.799 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.78.155
2026-02-05 04:36:31.799 DEBUG [src.node.docker_mananger] Generated ports ['60539', '60540', '60541', '60542', '60543']
2026-02-05 04:36:31.799 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:36:31.799 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:36:31.800 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:36:31.800 DEBUG [src.node.docker_mananger] docker run -i -t -p 60539:60539 -p 60540:60540 -p 60541:60541 -p 60542:60542 -p 60543:60543 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60541 --rest-port=60539 --tcp-port=60540 --discv5-udp-port=60542 --rest-address=0.0.0.0 --nat=extip:172.18.78.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=faadde5aa8f1f2c35d6afb5727cf4cfaabf0b7aa8f3ffb73c1b7dadd913abceb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60543 --metrics-logging=true --lightpush=true --relay=true
2026-02-05 04:36:31.912 ERROR [src.node.docker_mananger] Max retries reached for container ea4cc77037e7. Exiting log stream.
2026-02-05 04:36:31.990 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.78.155 waku b3ef3db33eb9e052617e6e4ff81d954bafd79fa3b60636e5c5644676237bb4c0
2026-02-05 04:36:32.021 DEBUG [src.node.docker_mananger] Container started with ID b3ef3db33eb9. Setting up logs at ./log/docker/receiving_node1_2026-02-05_04-36-31__7430ee6e-fccb-4b25-a00b-f8ef3ea1577b__wakuorg_nwaku:latest.log
2026-02-05 04:36:32.021 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60539
2026-02-05 04:36:32.021 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:36:32.435 ERROR [src.node.docker_mananger] Max retries reached for container fa707120f542. Exiting log stream.
2026-02-05 04:36:33.023 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60539/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:36:33.026 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:36:33.026 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:36:33.026 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60539/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:36:33.028 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.155/tcp/60540/p2p/16Uiu2HAm4JWa5KdH2CenKSKFnsiKNSqfwJDMxzpXM5WARGGDZjsn","/ip4/172.18.78.155/tcp/60541/ws/p2p/16Uiu2HAm4JWa5KdH2CenKSKFnsiKNSqfwJDMxzpXM5WARGGDZjsn"],"enrUri":"enr:-L24QDRugDNc2pd-TsOE9aUXICS1girlCu0UjGiA0bzGUt6HcXsgtJuCipzpMShYCEE1B86l-2-dGyZ6bE7vGJyIfNsCgmlkgnY0gmlwhKwSTpuKbXVsdGlhZGRyc5YACASsEk6bBux8AAoErBJOmwbsfd0DgnJzhQADAQAAiXNlY3AyNTZrMaECg-N6W2zlymXQMD87n9snH06_GeJ6OTGXq-Hht8RzHkmDdGNwgux8g3VkcILsfoV3YWt1Mgk"}'
2026-02-05 04:36:33.029 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:36:33.036 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:36:33.036 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-05_04-36-31__7430ee6e-fccb-4b25-a00b-f8ef3ea1577b__wakuorg_nwaku:latest.log
2026-02-05 04:36:33.036 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:36:33.036 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:36:33.037 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:36:33.037 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.74.109
2026-02-05 04:36:33.038 DEBUG [src.node.docker_mananger] Generated ports ['9767', '9768', '9769', '9770', '9771']
2026-02-05 04:36:33.038 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:36:33.038 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:36:33.038 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:36:33.038 DEBUG [src.node.docker_mananger] docker run -i -t -p 9767:9767 -p 9768:9768 -p 9769:9769 -p 9770:9770 -p 9771:9771 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9769 --rest-port=9767 --tcp-port=9768 --discv5-udp-port=9770 --rest-address=0.0.0.0 --nat=extip:172.18.74.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2ffe12ee00561acf35d4356787dceb4ecf09cfba25bfecc6a8c961ea217b2e4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9771 --metrics-logging=true --lightpush=false --relay=true
2026-02-05 04:36:33.223 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.74.109 waku 906b252bbb1874a2504da73d5f584ee24b85f60fdc8c064cf5d3f933035ddc71
2026-02-05 04:36:33.254 DEBUG [src.node.docker_mananger] Container started with ID 906b252bbb18. Setting up logs at ./log/docker/receiving_node2_2026-02-05_04-36-31__7430ee6e-fccb-4b25-a00b-f8ef3ea1577b__wakuorg_nwaku:latest.log
2026-02-05 04:36:33.254 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9767
2026-02-05 04:36:33.255 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:36:34.256 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9767/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:36:34.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:36:34.259 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:36:34.260 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9767/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:36:34.262 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.109/tcp/9768/p2p/16Uiu2HAmBNqmY8DVyYzG2juShzDT7Y2FQHUPvDVxYAgavxuQk33F","/ip4/172.18.74.109/tcp/9769/ws/p2p/16Uiu2HAmBNqmY8DVyYzG2juShzDT7Y2FQHUPvDVxYAgavxuQk33F"],"enrUri":"enr:-L24QCeagtRXUK6UcZWRcsRoIJzb-k11gOCt2EMtWKb2xhbzWLnkCUL1amHUyQAXZpnCS-7-quVdq07DohuwguNB_LYCgmlkgnY0gmlwhKwSSm2KbXVsdGlhZGRyc5YACASsEkptBiYoAAoErBJKbQYmKd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7QFRBh9R8UU9vKZn__D5Yn58Nz9mBMsU1Cda2ONVd7KDdGNwgiYog3VkcIImKoV3YWt1MgE"}'
2026-02-05 04:36:34.262 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:36:34.262 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9767/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.155/tcp/60540/p2p/16Uiu2HAm4JWa5KdH2CenKSKFnsiKNSqfwJDMxzpXM5WARGGDZjsn"]'
2026-02-05 04:36:34.295 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:34.304 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:36:34.304 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-05_04-36-31__7430ee6e-fccb-4b25-a00b-f8ef3ea1577b__wakuorg_nwaku:latest.log
2026-02-05 04:36:34.304 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:36:34.304 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:36:34.307 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:36:34.307 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.163.100
2026-02-05 04:36:34.308 DEBUG [src.node.docker_mananger] Generated ports ['38637', '38638', '38639', '38640', '38641']
2026-02-05 04:36:34.309 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:36:34.309 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:36:34.309 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:36:34.309 DEBUG [src.node.docker_mananger] docker run -i -t -p 38637:38637 -p 38638:38638 -p 38639:38639 -p 38640:38640 -p 38641:38641 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38639 --rest-port=38637 --tcp-port=38638 --discv5-udp-port=38640 --rest-address=0.0.0.0 --nat=extip:172.18.163.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=40dd9c11b33ea4892cdaaece4b2fe0c6abff57b0ff1b5eeba188bbbc63dc8acd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38641 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDRugDNc2pd-TsOE9aUXICS1girlCu0UjGiA0bzGUt6HcXsgtJuCipzpMShYCEE1B86l-2-dGyZ6bE7vGJyIfNsCgmlkgnY0gmlwhKwSTpuKbXVsdGlhZGRyc5YACASsEk6bBux8AAoErBJOmwbsfd0DgnJzhQADAQAAiXNlY3AyNTZrMaECg-N6W2zlymXQMD87n9snH06_GeJ6OTGXq-Hht8RzHkmDdGNwgux8g3VkcILsfoV3YWt1Mgk --lightpushnode=/ip4/172.18.78.155/tcp/60540/p2p/16Uiu2HAm4JWa5KdH2CenKSKFnsiKNSqfwJDMxzpXM5WARGGDZjsn --lightpush=true --relay=true
2026-02-05 04:36:34.493 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.163.100 waku f10ba2be63123a2d4140f065c26c543a03dcd56ace909b6fa1dc614719f56f7f
2026-02-05 04:36:34.528 DEBUG [src.node.docker_mananger] Container started with ID f10ba2be6312. Setting up logs at ./log/docker/lightpush_node1_2026-02-05_04-36-31__7430ee6e-fccb-4b25-a00b-f8ef3ea1577b__wakuorg_nwaku:latest.log
2026-02-05 04:36:34.529 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38637
2026-02-05 04:36:34.529 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:36:35.530 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38637/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:36:35.534 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:36:35.534 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:36:35.534 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38637/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:36:35.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.100/tcp/38638/p2p/16Uiu2HAm9BUqiJ2NKhQsSvP9PDzvUcRmCX4RadC6n1pQWg3z2sm5","/ip4/172.18.163.100/tcp/38639/ws/p2p/16Uiu2HAm9BUqiJ2NKhQsSvP9PDzvUcRmCX4RadC6n1pQWg3z2sm5"],"enrUri":"enr:-L24QAfGD8HJxQeUNaLuwuvWItH4hPXDImHBywz5kvwEjsFYc6DXoae4lDbsFxU2gJe5LxABeUAvJHcocOB7GTfvRM0CgmlkgnY0gmlwhKwSo2SKbXVsdGlhZGRyc5YACASsEqNkBpbuAAoErBKjZAaW790DgnJzhQADAQAAiXNlY3AyNTZrMaECzGDj7zl3bAhP1oGnMKmp-WGImBH_H_jX1ew80fmdQjyDdGNwgpbug3VkcIKW8IV3YWt1Mgk"}'
2026-02-05 04:36:35.537 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:36:35.537 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38637/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.155/tcp/60540/p2p/16Uiu2HAm4JWa5KdH2CenKSKFnsiKNSqfwJDMxzpXM5WARGGDZjsn"]'
2026-02-05 04:36:35.569 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:35.569 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38637/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.109/tcp/9768/p2p/16Uiu2HAmBNqmY8DVyYzG2juShzDT7Y2FQHUPvDVxYAgavxuQk33F"]'
2026-02-05 04:36:35.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:35.592 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60539/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:36:35.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:35.597 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9767/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:36:35.601 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:35.601 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38637/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:36:35.609 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:35.611 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38637/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770266195611859863}}'
2026-02-05 04:36:35.625 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:36:35.630 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:36:35.632 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:36:35.633 DEBUG [src.node.waku_node] Stopping container with id b3ef3db33eb9
2026-02-05 04:36:36.181 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:36:36.182 DEBUG [src.node.waku_node] Stopping container with id 906b252bbb18
2026-02-05 04:36:36.732 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:36:36.732 DEBUG [src.node.waku_node] Stopping container with id f10ba2be6312
2026-02-05 04:36:37.037 ERROR [src.node.docker_mananger] Max retries reached for container b3ef3db33eb9. Exiting log stream.
2026-02-05 04:36:37.274 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:36:37.276 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:36:37.292 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:36:37.300 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:36:37.308 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
