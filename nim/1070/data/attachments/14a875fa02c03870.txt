2026-02-05 04:34:55.901 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:34:55.901 DEBUG [tests.conftest] Running test: test_main_node_only_relay__peer_relay_and_store with id: 2026-02-05_04-34-55__6c335007-e081-41b8-a5fa-37bdca2cd836
2026-02-05 04:34:55.901 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:34:55.902 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-05 04:34:55.909 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:55.909 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-05_04-34-55__6c335007-e081-41b8-a5fa-37bdca2cd836__wakuorg_nwaku:latest.log
2026-02-05 04:34:55.909 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:55.909 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:55.910 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:55.911 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.12.169
2026-02-05 04:34:55.911 DEBUG [src.node.docker_mananger] Generated ports ['29844', '29845', '29846', '29847', '29848']
2026-02-05 04:34:55.911 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:55.911 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:55.911 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:55.911 DEBUG [src.node.docker_mananger] docker run -i -t -p 29844:29844 -p 29845:29845 -p 29846:29846 -p 29847:29847 -p 29848:29848 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29846 --rest-port=29844 --tcp-port=29845 --discv5-udp-port=29847 --rest-address=0.0.0.0 --nat=extip:172.18.12.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa8006192d18ef4bb3ced6bd1fa9953f2cddc77bf9f255dffa4a9b0acfadef16 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29848 --metrics-logging=true --store=false --relay=true
2026-02-05 04:34:56.098 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.12.169 waku 9e03e49bb629703e05627531745cc1651f1042661e3c074eb5cf50a870f713b8
2026-02-05 04:34:56.128 DEBUG [src.node.docker_mananger] Container started with ID 9e03e49bb629. Setting up logs at ./log/docker/publishing_node1_2026-02-05_04-34-55__6c335007-e081-41b8-a5fa-37bdca2cd836__wakuorg_nwaku:latest.log
2026-02-05 04:34:56.130 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29844
2026-02-05 04:34:56.131 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:56.180 ERROR [src.node.docker_mananger] Max retries reached for container 88df29b97385. Exiting log stream.
2026-02-05 04:34:56.702 ERROR [src.node.docker_mananger] Max retries reached for container 300cf8b5ef7e. Exiting log stream.
2026-02-05 04:34:57.131 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29844/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:57.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:34:57.135 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:57.135 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29844/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:57.137 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.169/tcp/29845/p2p/16Uiu2HAm5i3enVj272L7mz2hLfT612kk8Te6GqncotDSz2ufnbRn","/ip4/172.18.12.169/tcp/29846/ws/p2p/16Uiu2HAm5i3enVj272L7mz2hLfT612kk8Te6GqncotDSz2ufnbRn"],"enrUri":"enr:-L24QNCfs9wA5-s_KD9uceUC8Umz2-JhTgQ480lddyGgAtuTIJzproaviKz08gwHJoo8_3yMBrcOZoFuyj10kG2MfQICgmlkgnY0gmlwhKwSDKmKbXVsdGlhZGRyc5YACASsEgypBnSVAAoErBIMqQZ0lt0DgnJzhQADAQAAiXNlY3AyNTZrMaECmMaqyJgMD9ahE4VOeTe3_g8Sb-dBU8hKXX4_ZiCDjA2DdGNwgnSVg3VkcIJ0l4V3YWt1MgE"}'
2026-02-05 04:34:57.137 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:57.144 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:57.144 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-05_04-34-55__6c335007-e081-41b8-a5fa-37bdca2cd836__wakuorg_nwaku:latest.log
2026-02-05 04:34:57.144 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:57.144 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:57.145 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:57.146 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.42.202
2026-02-05 04:34:57.146 DEBUG [src.node.docker_mananger] Generated ports ['49740', '49741', '49742', '49743', '49744']
2026-02-05 04:34:57.146 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:57.146 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:57.146 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:57.146 DEBUG [src.node.docker_mananger] docker run -i -t -p 49740:49740 -p 49741:49741 -p 49742:49742 -p 49743:49743 -p 49744:49744 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49742 --rest-port=49740 --tcp-port=49741 --discv5-udp-port=49743 --rest-address=0.0.0.0 --nat=extip:172.18.42.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf0c6ca0b9db86c79cf8df7d6f7eaa8a3660028ff17dccce1c4323f82e21a101 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49744 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNCfs9wA5-s_KD9uceUC8Umz2-JhTgQ480lddyGgAtuTIJzproaviKz08gwHJoo8_3yMBrcOZoFuyj10kG2MfQICgmlkgnY0gmlwhKwSDKmKbXVsdGlhZGRyc5YACASsEgypBnSVAAoErBIMqQZ0lt0DgnJzhQADAQAAiXNlY3AyNTZrMaECmMaqyJgMD9ahE4VOeTe3_g8Sb-dBU8hKXX4_ZiCDjA2DdGNwgnSVg3VkcIJ0l4V3YWt1MgE --storenode=/ip4/172.18.12.169/tcp/29845/p2p/16Uiu2HAm5i3enVj272L7mz2hLfT612kk8Te6GqncotDSz2ufnbRn --store=true --relay=true
2026-02-05 04:34:57.326 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.42.202 waku 0725991032e715929f9158dd8173b74add54b4cbcf654a18243d70fc399075ce
2026-02-05 04:34:57.356 DEBUG [src.node.docker_mananger] Container started with ID 0725991032e7. Setting up logs at ./log/docker/store_node1_2026-02-05_04-34-55__6c335007-e081-41b8-a5fa-37bdca2cd836__wakuorg_nwaku:latest.log
2026-02-05 04:34:57.357 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49740
2026-02-05 04:34:57.358 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:58.358 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49740/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:58.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:34:58.362 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:58.362 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49740/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:58.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.202/tcp/49741/p2p/16Uiu2HAmS4wcthKztuGeRRQkJkrwmgvxCaGd2CwnzRFyKZqZhiCT","/ip4/172.18.42.202/tcp/49742/ws/p2p/16Uiu2HAmS4wcthKztuGeRRQkJkrwmgvxCaGd2CwnzRFyKZqZhiCT"],"enrUri":"enr:-L24QBqHtMiLpRQjOMMM0uVIJGULFlcB5GajjhwqSQD492YYD9htfw092RJCgwxhnTND9XRPJ_cvc112BG3dwuzCtmgCgmlkgnY0gmlwhKwSKsqKbXVsdGlhZGRyc5YACASsEirKBsJNAAoErBIqygbCTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDx0rIEUSihK-P85yi2CjOXLt-GZzFoH1JprDk4my5pJyDdGNwgsJNg3VkcILCT4V3YWt1MgM"}'
2026-02-05 04:34:58.365 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:58.365 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49740/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.12.169/tcp/29845/p2p/16Uiu2HAm5i3enVj272L7mz2hLfT612kk8Te6GqncotDSz2ufnbRn"]'
2026-02-05 04:34:58.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:58.368 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29844/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:34:58.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:58.371 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49740/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:34:58.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:58.373 DEBUG [src.steps.store] Relaying message
2026-02-05 04:34:58.374 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:34:58.377 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:58.378 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:34:58.578 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-05 04:34:58.579 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49740/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:58.582 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x150fb92b51dc64eabd6ac1582fb99928ec1dd4e70d4a70e8fabb4e5081629b53"}]}'
2026-02-05 04:34:58.582 DEBUG [src.steps.store] messages length is 1
2026-02-05 04:34:58.583 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:34:58.584 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:34:58.584 DEBUG [src.node.waku_node] Stopping container with id 9e03e49bb629
2026-02-05 04:34:59.124 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:59.124 DEBUG [src.node.waku_node] Stopping container with id 0725991032e7
2026-02-05 04:34:59.665 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:59.668 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:34:59.674 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:34:59.679 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
