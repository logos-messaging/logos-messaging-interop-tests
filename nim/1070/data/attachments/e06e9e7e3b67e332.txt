2026-02-05 04:33:16.352 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:33:16.352 DEBUG [tests.conftest] Running test: test_lightpush with id: 2026-02-05_04-33-16__2c505725-42f8-4ded-a9d0-233172a9b586
2026-02-05 04:33:16.353 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:33:16.353 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-05 04:33:16.353 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-05 04:33:16.353 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-05 04:33:16.354 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-05 04:33:16.360 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:33:16.360 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-05_04-33-16__2c505725-42f8-4ded-a9d0-233172a9b586__wakuorg_nwaku:latest.log
2026-02-05 04:33:16.360 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:33:16.361 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:33:16.362 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:33:16.363 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.36.100
2026-02-05 04:33:16.363 DEBUG [src.node.docker_mananger] Generated ports ['44812', '44813', '44814', '44815', '44816']
2026-02-05 04:33:16.363 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:33:16.363 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:33:16.363 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:33:16.363 DEBUG [src.node.docker_mananger] docker run -i -t -p 44812:44812 -p 44813:44813 -p 44814:44814 -p 44815:44815 -p 44816:44816 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44814 --rest-port=44812 --tcp-port=44813 --discv5-udp-port=44815 --rest-address=0.0.0.0 --nat=extip:172.18.36.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2d104fc5a06aeb11501be5aabe4aae9a1dd6f8ba01962dfbaca7531b276247a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44816 --metrics-logging=true --lightpush=true --relay=true
2026-02-05 04:33:16.542 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.36.100 waku a1388ebe8b9f0b4ee9c50a7785b939b6144ac4d2b1d11fcabf52cdafa966a639
2026-02-05 04:33:16.574 DEBUG [src.node.docker_mananger] Container started with ID a1388ebe8b9f. Setting up logs at ./log/docker/node1_2026-02-05_04-33-16__2c505725-42f8-4ded-a9d0-233172a9b586__wakuorg_nwaku:latest.log
2026-02-05 04:33:16.574 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44812
2026-02-05 04:33:16.575 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:33:16.672 ERROR [src.node.docker_mananger] Max retries reached for container b46809259120. Exiting log stream.
2026-02-05 04:33:17.160 ERROR [src.node.docker_mananger] Max retries reached for container e00f985b0649. Exiting log stream.
2026-02-05 04:33:17.576 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44812/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:33:17.579 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:33:17.579 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:33:17.579 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44812/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:33:17.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.100/tcp/44813/p2p/16Uiu2HAkwuxDuy2QFDUBfjw1fed25n8Wvr4Vw8Apxu3CLCLjPZy3","/ip4/172.18.36.100/tcp/44814/ws/p2p/16Uiu2HAkwuxDuy2QFDUBfjw1fed25n8Wvr4Vw8Apxu3CLCLjPZy3"],"enrUri":"enr:-L24QN_HUSgmmfOyXJKeP5OB1MyF55It1xWVBqEZRv2_LTvSMSVqVknMl3KYbe54SFYfYfDcAZ-zBOtcctrDp3C1RJACgmlkgnY0gmlwhKwSJGSKbXVsdGlhZGRyc5YACASsEiRkBq8NAAoErBIkZAavDt0DgnJzhQADAQAAiXNlY3AyNTZrMaECJPYAx18uJo2Stgh9SrWboss79913egr_Oo6C_oJw82KDdGNwgq8Ng3VkcIKvD4V3YWt1Mgk"}'
2026-02-05 04:33:17.582 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:33:17.588 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:33:17.588 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-05_04-33-16__2c505725-42f8-4ded-a9d0-233172a9b586__wakuorg_nwaku:latest.log
2026-02-05 04:33:17.588 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:33:17.588 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:33:17.590 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:33:17.590 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.236
2026-02-05 04:33:17.590 DEBUG [src.node.docker_mananger] Generated ports ['1894', '1895', '1896', '1897', '1898']
2026-02-05 04:33:17.590 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:33:17.590 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:33:17.590 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:33:17.591 DEBUG [src.node.docker_mananger] docker run -i -t -p 1894:1894 -p 1895:1895 -p 1896:1896 -p 1897:1897 -p 1898:1898 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1896 --rest-port=1894 --tcp-port=1895 --discv5-udp-port=1897 --rest-address=0.0.0.0 --nat=extip:172.18.108.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7cecac61a8681f848ac14ef3ffbab79fb0af8b7cd62abecebbe5fefcffbf55c3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1898 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QN_HUSgmmfOyXJKeP5OB1MyF55It1xWVBqEZRv2_LTvSMSVqVknMl3KYbe54SFYfYfDcAZ-zBOtcctrDp3C1RJACgmlkgnY0gmlwhKwSJGSKbXVsdGlhZGRyc5YACASsEiRkBq8NAAoErBIkZAavDt0DgnJzhQADAQAAiXNlY3AyNTZrMaECJPYAx18uJo2Stgh9SrWboss79913egr_Oo6C_oJw82KDdGNwgq8Ng3VkcIKvD4V3YWt1Mgk
2026-02-05 04:33:17.764 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.236 waku abdee4ccdcb21b464d3c7a9be288cf65a3b47e3ca0f6280309c1eec395419039
2026-02-05 04:33:17.795 DEBUG [src.node.docker_mananger] Container started with ID abdee4ccdcb2. Setting up logs at ./log/docker/node1_2026-02-05_04-33-16__2c505725-42f8-4ded-a9d0-233172a9b586__wakuorg_nwaku:latest.log
2026-02-05 04:33:17.795 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1894
2026-02-05 04:33:17.795 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:33:18.796 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1894/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:33:18.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:33:18.808 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:33:18.812 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1894/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:33:18.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.236/tcp/1895/p2p/16Uiu2HAkzuBhuHUkDzqtWcsXFxdpLETECqkRKWPQqU3hUEmdhmuW","/ip4/172.18.108.236/tcp/1896/ws/p2p/16Uiu2HAkzuBhuHUkDzqtWcsXFxdpLETECqkRKWPQqU3hUEmdhmuW"],"enrUri":"enr:-L24QMQNuSfgsqnCOj5_7nnBDuwrTgk-sr2Xg9bBb7PNgZUbepFfdVqaoLC6eLt-4BBtb1xrA38_DE181Z-KyjAh-oUCgmlkgnY0gmlwhKwSbOyKbXVsdGlhZGRyc5YACASsEmzsBgdnAAoErBJs7AYHaN0DgnJzhQADAQAAiXNlY3AyNTZrMaECUVa6UDuWKV5wKu9PB_yZcLgLd_EWBI5VrdPOggAbNtWDdGNwggdng3VkcIIHaYV3YWt1MgE"}'
2026-02-05 04:33:18.816 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:33:18.822 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:33:18.822 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-05_04-33-16__2c505725-42f8-4ded-a9d0-233172a9b586__wakuorg_nwaku:latest.log
2026-02-05 04:33:18.822 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:33:18.823 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:33:18.824 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:33:18.824 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.124.51
2026-02-05 04:33:18.824 DEBUG [src.node.docker_mananger] Generated ports ['32310', '32311', '32312', '32313', '32314']
2026-02-05 04:33:18.824 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:33:18.824 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:33:18.825 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:33:18.825 DEBUG [src.node.docker_mananger] docker run -i -t -p 32310:32310 -p 32311:32311 -p 32312:32312 -p 32313:32313 -p 32314:32314 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32312 --rest-port=32310 --tcp-port=32311 --discv5-udp-port=32313 --rest-address=0.0.0.0 --nat=extip:172.18.124.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=acbecc93b0f42f7f4f40afcfd0f3ff0b2beb0da2491ae4aceab0f9ad54cda88c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32314 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-L24QN_HUSgmmfOyXJKeP5OB1MyF55It1xWVBqEZRv2_LTvSMSVqVknMl3KYbe54SFYfYfDcAZ-zBOtcctrDp3C1RJACgmlkgnY0gmlwhKwSJGSKbXVsdGlhZGRyc5YACASsEiRkBq8NAAoErBIkZAavDt0DgnJzhQADAQAAiXNlY3AyNTZrMaECJPYAx18uJo2Stgh9SrWboss79913egr_Oo6C_oJw82KDdGNwgq8Ng3VkcIKvD4V3YWt1Mgk --lightpushnode=/ip4/172.18.36.100/tcp/44813/p2p/16Uiu2HAkwuxDuy2QFDUBfjw1fed25n8Wvr4Vw8Apxu3CLCLjPZy3
2026-02-05 04:33:19.021 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.124.51 waku f3732b7376949518ebdbcdc22e25452b8483ff8e12e987ff6cf5f5787f66ad19
2026-02-05 04:33:19.052 DEBUG [src.node.docker_mananger] Container started with ID f3732b737694. Setting up logs at ./log/docker/node1_2026-02-05_04-33-16__2c505725-42f8-4ded-a9d0-233172a9b586__wakuorg_nwaku:latest.log
2026-02-05 04:33:19.052 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32310
2026-02-05 04:33:19.052 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:33:20.053 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32310/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:33:20.057 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:33:20.057 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:33:20.057 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32310/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:33:20.060 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.51/tcp/32311/p2p/16Uiu2HAmQMYa6ujEBgt9yYZMUAdgZ1Z7kGt1VHHYccyYmHczrszH","/ip4/172.18.124.51/tcp/32312/ws/p2p/16Uiu2HAmQMYa6ujEBgt9yYZMUAdgZ1Z7kGt1VHHYccyYmHczrszH"],"enrUri":"enr:-L24QMn_guk1VbaZqgaBTTyqerfGk4dY3cVTbrCWywEAP-lWIKTTgM0K5jfX7MfBsO6IYPL22cHaupbmp-h7kxMs_44CgmlkgnY0gmlwhKwSfDOKbXVsdGlhZGRyc5YACASsEnwzBn43AAoErBJ8MwZ-ON0DgnJzhQADAQAAiXNlY3AyNTZrMaEDrdQ4ic6l6J_47aREW-0-siDABbk3UqNyP0JDE5tyEhqDdGNwgn43g3VkcIJ-OYV3YWt1Mgk"}'
2026-02-05 04:33:20.060 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:33:20.060 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44812/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-05 04:33:20.063 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:33:20.064 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1894/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-05 04:33:20.068 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:33:20.069 DEBUG [src.steps.light_push] Lightpushing message
2026-02-05 04:33:20.070 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32310/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1770266000069776676}}'
2026-02-05 04:33:20.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:33:20.123 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-05 04:33:20.223 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2026-02-05 04:33:20.224 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44812/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:33:20.226 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770266000069776676,"ephemeral":false,"proof":""}]'
2026-02-05 04:33:20.227 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2026-02-05 04:33:20.228 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1894/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:33:20.230 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770266000069776676,"ephemeral":false,"proof":""}]'
2026-02-05 04:33:20.233 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:33:20.234 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:33:20.234 DEBUG [src.node.waku_node] Stopping container with id a1388ebe8b9f
2026-02-05 04:33:20.782 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:33:20.782 DEBUG [src.node.waku_node] Stopping container with id abdee4ccdcb2
2026-02-05 04:33:21.336 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:33:21.336 DEBUG [src.node.waku_node] Stopping container with id f3732b737694
2026-02-05 04:33:21.594 ERROR [src.node.docker_mananger] Max retries reached for container a1388ebe8b9f. Exiting log stream.
2026-02-05 04:33:21.802 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:33:21.803 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:33:21.812 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:33:21.822 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:33:21.831 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
