2026-02-05 04:34:48.748 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:34:48.748 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_some_of_the_subscribed_content_topics with id: 2026-02-05_04-34-48__84b2ef54-a7b9-4499-afae-97c60b80262c
2026-02-05 04:34:48.749 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:34:48.749 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-05 04:34:48.749 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-05 04:34:48.755 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:48.755 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-05_04-34-48__84b2ef54-a7b9-4499-afae-97c60b80262c__wakuorg_nwaku:latest.log
2026-02-05 04:34:48.756 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:48.756 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:48.757 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:48.757 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.233.60
2026-02-05 04:34:48.757 DEBUG [src.node.docker_mananger] Generated ports ['53549', '53550', '53551', '53552', '53553']
2026-02-05 04:34:48.757 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:48.758 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:48.758 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:48.758 DEBUG [src.node.docker_mananger] docker run -i -t -p 53549:53549 -p 53550:53550 -p 53551:53551 -p 53552:53552 -p 53553:53553 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53551 --rest-port=53549 --tcp-port=53550 --discv5-udp-port=53552 --rest-address=0.0.0.0 --nat=extip:172.18.233.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3857ab5d77306cad8f7d1554ade899286ffa2cef41e8ea1e855edb86fafcfdbc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53553 --metrics-logging=true --relay=true --filter=true
2026-02-05 04:34:48.945 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.233.60 waku 12e957e05019a107ea55681f71e9de1ee5796e1e1b7cc86fe4d84845ac294d23
2026-02-05 04:34:48.974 DEBUG [src.node.docker_mananger] Container started with ID 12e957e05019. Setting up logs at ./log/docker/node1_2026-02-05_04-34-48__84b2ef54-a7b9-4499-afae-97c60b80262c__wakuorg_nwaku:latest.log
2026-02-05 04:34:48.975 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53549
2026-02-05 04:34:48.975 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:49.039 ERROR [src.node.docker_mananger] Max retries reached for container cb663bb3d75f. Exiting log stream.
2026-02-05 04:34:49.552 ERROR [src.node.docker_mananger] Max retries reached for container af16c79203d5. Exiting log stream.
2026-02-05 04:34:49.976 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53549/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:49.979 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:34:49.979 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:49.980 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53549/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:49.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.233.60/tcp/53550/p2p/16Uiu2HAkusgmiEmX4nJeH8KQJoUUzSDFGPpJZMPWJEpLVr7GR8ss","/ip4/172.18.233.60/tcp/53551/ws/p2p/16Uiu2HAkusgmiEmX4nJeH8KQJoUUzSDFGPpJZMPWJEpLVr7GR8ss"],"enrUri":"enr:-L24QLGPqsS86jXpuRcTTW3nALfjEP8HOK9ScM_LeYhJWHD5NX-KfDUEd7cKege6sMqNdwMAsJSnpUXGp2jMAUV46DcCgmlkgnY0gmlwhKwS6TyKbXVsdGlhZGRyc5YACASsEuk8BtEuAAoErBLpPAbRL90DgnJzhQADAQAAiXNlY3AyNTZrMaECBqn_B3uBgxwPNaLc59deVi7cCeV15yR6QXwro-wrHjKDdGNwgtEug3VkcILRMIV3YWt1MgU"}'
2026-02-05 04:34:49.982 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:49.983 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-05 04:34:49.989 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:49.989 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-05_04-34-48__84b2ef54-a7b9-4499-afae-97c60b80262c__wakuorg_nwaku:latest.log
2026-02-05 04:34:49.989 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:49.989 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:49.991 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:49.991 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.15.125
2026-02-05 04:34:49.991 DEBUG [src.node.docker_mananger] Generated ports ['23707', '23708', '23709', '23710', '23711']
2026-02-05 04:34:49.991 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:49.992 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:49.992 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:49.992 DEBUG [src.node.docker_mananger] docker run -i -t -p 23707:23707 -p 23708:23708 -p 23709:23709 -p 23710:23710 -p 23711:23711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23709 --rest-port=23707 --tcp-port=23708 --discv5-udp-port=23710 --rest-address=0.0.0.0 --nat=extip:172.18.15.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=38b5391d7317ab5ee221066f7d4d7833fb716e50e486460225e6abb82fa1e9ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23711 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QLGPqsS86jXpuRcTTW3nALfjEP8HOK9ScM_LeYhJWHD5NX-KfDUEd7cKege6sMqNdwMAsJSnpUXGp2jMAUV46DcCgmlkgnY0gmlwhKwS6TyKbXVsdGlhZGRyc5YACASsEuk8BtEuAAoErBLpPAbRL90DgnJzhQADAQAAiXNlY3AyNTZrMaECBqn_B3uBgxwPNaLc59deVi7cCeV15yR6QXwro-wrHjKDdGNwgtEug3VkcILRMIV3YWt1MgU --filternode=/ip4/172.18.233.60/tcp/53550/p2p/16Uiu2HAkusgmiEmX4nJeH8KQJoUUzSDFGPpJZMPWJEpLVr7GR8ss
2026-02-05 04:34:50.185 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.15.125 waku bf90f885659a6ec7b2a7fcd131856e6fadead864a4c4ce8f272f0498e2fe8853
2026-02-05 04:34:50.217 DEBUG [src.node.docker_mananger] Container started with ID bf90f885659a. Setting up logs at ./log/docker/node2_2026-02-05_04-34-48__84b2ef54-a7b9-4499-afae-97c60b80262c__wakuorg_nwaku:latest.log
2026-02-05 04:34:50.217 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23707
2026-02-05 04:34:50.217 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:51.219 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23707/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:51.222 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-05 04:34:51.223 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:51.223 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:51.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.125/tcp/23708/p2p/16Uiu2HAmR5LhnoygipaRwtQSmkXJzQDs4KXqoqYaHPMtVonxnurL","/ip4/172.18.15.125/tcp/23709/ws/p2p/16Uiu2HAmR5LhnoygipaRwtQSmkXJzQDs4KXqoqYaHPMtVonxnurL"],"enrUri":"enr:-L24QB8VsmllznkXB0fAIVQ0uBpz_2T_knzqyPGxIhB2Rf73a8NBgf6OLbs6NjNvkd5gDzo1H49JZ21x5RbntaPLUlACgmlkgnY0gmlwhKwSD32KbXVsdGlhZGRyc5YACASsEg99BlycAAoErBIPfQZcnd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuIkyPoJvTAmui3g0dxiK9_VQWHt8-Wi6rAhzGNS4c5WDdGNwglycg3VkcIJcnoV3YWt1MgA"}'
2026-02-05 04:34:51.226 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:51.226 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23707/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.233.60/tcp/53550/p2p/16Uiu2HAkusgmiEmX4nJeH8KQJoUUzSDFGPpJZMPWJEpLVr7GR8ss"]'
2026-02-05 04:34:51.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:51.259 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-05 04:34:51.259 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53549/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-05 04:34:51.272 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:51.273 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23707/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b16f47a6-d54a-4842-81c0-636ee8000d23", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-05 04:34:51.286 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b16f47a6-d54a-4842-81c0-636ee8000d23","statusDesc":"OK"}'
2026-02-05 04:34:51.288 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53549/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-05 04:34:51.291 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:51.291 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23707/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12763517-1336-4e3a-b3bb-46999ecba3a8", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-05 04:34:51.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12763517-1336-4e3a-b3bb-46999ecba3a8","statusDesc":"OK"}'
2026-02-05 04:34:51.301 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53549/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:34:51.307 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:51.308 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-05 04:34:51.408 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-05 04:34:51.409 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23707/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:51.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1770266091300899047,"ephemeral":false}]'
2026-02-05 04:34:51.413 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:23707/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-05 04:34:51.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2026-02-05 04:34:51.422 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53549/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:34:51.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:51.427 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-05 04:34:51.527 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-05 04:34:51.528 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23707/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:51.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1770266091422477160,"ephemeral":false}]'
2026-02-05 04:34:51.532 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53549/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:34:51.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:51.536 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-05 04:34:51.637 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-05 04:34:51.637 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23707/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:51.639 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23707/filter/v2/messages/Hello%20World%21. Response content: b'Not subscribed to topic: Hello World!'
2026-02-05 04:34:51.643 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:34:51.644 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:34:51.644 DEBUG [src.node.waku_node] Stopping container with id 12e957e05019
2026-02-05 04:34:52.170 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:52.171 DEBUG [src.node.waku_node] Stopping container with id bf90f885659a
2026-02-05 04:34:52.690 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:52.691 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:34:52.698 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:34:52.704 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
