2026-02-05 04:34:26.076 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:34:26.077 DEBUG [tests.conftest] Running test: test_single_content_topic[/app/27/sometopic/someencoding] with id: 2026-02-05_04-34-26__b5992b23-bdbc-42dd-a225-1b9de08778b0
2026-02-05 04:34:26.077 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:34:26.078 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-05 04:34:26.079 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-05 04:34:26.089 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:26.090 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-05_04-34-26__b5992b23-bdbc-42dd-a225-1b9de08778b0__wakuorg_nwaku:latest.log
2026-02-05 04:34:26.091 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:26.091 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:26.093 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:26.093 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.235.186
2026-02-05 04:34:26.093 DEBUG [src.node.docker_mananger] Generated ports ['8454', '8455', '8456', '8457', '8458']
2026-02-05 04:34:26.094 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:26.094 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:26.094 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:26.094 DEBUG [src.node.docker_mananger] docker run -i -t -p 8454:8454 -p 8455:8455 -p 8456:8456 -p 8457:8457 -p 8458:8458 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8456 --rest-port=8454 --tcp-port=8455 --discv5-udp-port=8457 --rest-address=0.0.0.0 --nat=extip:172.18.235.186 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=754dafcba4cb61d68cdb1940e6e033d8beb6f87edbdf4b550dc0adfafd002de2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8458 --metrics-logging=true --relay=true --filter=true --content-topic=/app/27/sometopic/someencoding
2026-02-05 04:34:26.289 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.235.186 waku 7ca31d6980a92866d2a32ed386890a7089b4d3b62491f28def2d8b408bfb5e7d
2026-02-05 04:34:26.320 DEBUG [src.node.docker_mananger] Container started with ID 7ca31d6980a9. Setting up logs at ./log/docker/node1_2026-02-05_04-34-26__b5992b23-bdbc-42dd-a225-1b9de08778b0__wakuorg_nwaku:latest.log
2026-02-05 04:34:26.321 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8454
2026-02-05 04:34:26.321 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:26.353 ERROR [src.node.docker_mananger] Max retries reached for container 6d78eb9b4868. Exiting log stream.
2026-02-05 04:34:26.916 ERROR [src.node.docker_mananger] Max retries reached for container b84aa72f50bd. Exiting log stream.
2026-02-05 04:34:27.321 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8454/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:27.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:34:27.325 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:27.325 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8454/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:27.327 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.186/tcp/8455/p2p/16Uiu2HAmGxPWoN2dCT73QGLeKQPPJkuQmUfw5ZatN4Hbw7ZNHhnZ","/ip4/172.18.235.186/tcp/8456/ws/p2p/16Uiu2HAmGxPWoN2dCT73QGLeKQPPJkuQmUfw5ZatN4Hbw7ZNHhnZ"],"enrUri":"enr:-L24QPND4U0a-uA_fss_Xf2c7_p55Hobsbm7YfkdvnWMSQ0jEaq5VSo9Qgz8RHdFWpujYM-PaPpoXhsGp7mebDlrt3ACgmlkgnY0gmlwhKwS67qKbXVsdGlhZGRyc5YACASsEuu6BiEHAAoErBLrugYhCN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDP-PQI7M748Kjx6Q8dGqhmAlnnrK99evvRwNT5WXPg0KDdGNwgiEHg3VkcIIhCYV3YWt1MgU"}'
2026-02-05 04:34:27.327 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:27.334 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:27.334 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-05_04-34-26__b5992b23-bdbc-42dd-a225-1b9de08778b0__wakuorg_nwaku:latest.log
2026-02-05 04:34:27.334 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:27.334 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:27.335 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:27.335 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.246.121
2026-02-05 04:34:27.336 DEBUG [src.node.docker_mananger] Generated ports ['15671', '15672', '15673', '15674', '15675']
2026-02-05 04:34:27.336 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:27.336 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:27.336 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:27.336 DEBUG [src.node.docker_mananger] docker run -i -t -p 15671:15671 -p 15672:15672 -p 15673:15673 -p 15674:15674 -p 15675:15675 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15673 --rest-port=15671 --tcp-port=15672 --discv5-udp-port=15674 --rest-address=0.0.0.0 --nat=extip:172.18.246.121 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d8cbfc712fbd19a7b63ee8bed2f3cefaf0bd4c6f0a1ccc8cccd3ac9dcdbfae0a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15675 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QPND4U0a-uA_fss_Xf2c7_p55Hobsbm7YfkdvnWMSQ0jEaq5VSo9Qgz8RHdFWpujYM-PaPpoXhsGp7mebDlrt3ACgmlkgnY0gmlwhKwS67qKbXVsdGlhZGRyc5YACASsEuu6BiEHAAoErBLrugYhCN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDP-PQI7M748Kjx6Q8dGqhmAlnnrK99evvRwNT5WXPg0KDdGNwgiEHg3VkcIIhCYV3YWt1MgU --content-topic=/app/27/sometopic/someencoding
2026-02-05 04:34:27.525 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.246.121 waku 022a66596c540136b92652fc7a99e8109a3b53ef6e5dd5372b236d9a1db1ff92
2026-02-05 04:34:27.559 DEBUG [src.node.docker_mananger] Container started with ID 022a66596c54. Setting up logs at ./log/docker/node2_2026-02-05_04-34-26__b5992b23-bdbc-42dd-a225-1b9de08778b0__wakuorg_nwaku:latest.log
2026-02-05 04:34:27.559 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15671
2026-02-05 04:34:27.559 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:28.560 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15671/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:28.569 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-05 04:34:28.570 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:28.570 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15671/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:28.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.121/tcp/15672/p2p/16Uiu2HAkxXyo5bQHppGy5R7zyDmnxzqbSMi5CFgXREcvo9YAJD5x","/ip4/172.18.246.121/tcp/15673/ws/p2p/16Uiu2HAkxXyo5bQHppGy5R7zyDmnxzqbSMi5CFgXREcvo9YAJD5x"],"enrUri":"enr:-L24QK4k199GLxeWRuxKIEGoD_ioYW6d0PbK2JKfJA4JCBMeIgpBzVwq65Qo86a3RVdYnT6cVrDU-YErRv6YL3iJX8MCgmlkgnY0gmlwhKwS9nmKbXVsdGlhZGRyc5YACASsEvZ5Bj04AAoErBL2eQY9Od0DgnJzhQACAQAAiXNlY3AyNTZrMaECLjCwfx8f911VZFTB8l-Ulzsus6nAEJ_riWWP03jb-2eDdGNwgj04g3VkcII9OoV3YWt1MgE"}'
2026-02-05 04:34:28.576 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:28.577 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15671/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.235.186/tcp/8455/p2p/16Uiu2HAmGxPWoN2dCT73QGLeKQPPJkuQmUfw5ZatN4Hbw7ZNHhnZ"]'
2026-02-05 04:34:28.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:28.581 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8454/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/27/sometopic/someencoding"]'
2026-02-05 04:34:28.583 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:28.584 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15671/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/27/sometopic/someencoding"]'
2026-02-05 04:34:28.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:28.586 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8454/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:34:28.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:28.592 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-05 04:34:28.692 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-05 04:34:28.693 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8454/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:28.695 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1770266068586738801,"ephemeral":false,"proof":""}]'
2026-02-05 04:34:28.697 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-05 04:34:28.697 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15671/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:28.700 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1770266068586738801,"ephemeral":false,"proof":""}]'
2026-02-05 04:34:28.702 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:34:28.703 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:34:28.704 DEBUG [src.node.waku_node] Stopping container with id 7ca31d6980a9
2026-02-05 04:34:29.216 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:29.217 DEBUG [src.node.waku_node] Stopping container with id 022a66596c54
2026-02-05 04:34:29.716 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:29.718 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:34:29.723 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:34:29.727 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
