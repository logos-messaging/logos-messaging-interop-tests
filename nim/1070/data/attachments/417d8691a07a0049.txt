2026-02-05 04:35:46.975 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:35:46.976 DEBUG [tests.conftest] Running test: test_passing_cursor_of_non_existing_message_from_the_store with id: 2026-02-05_04-35-46__ed247116-caee-4792-b7b9-1d05d96c1154
2026-02-05 04:35:46.976 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:35:46.976 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-05 04:35:46.977 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-05 04:35:46.984 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:35:46.984 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-05_04-35-46__ed247116-caee-4792-b7b9-1d05d96c1154__wakuorg_nwaku:latest.log
2026-02-05 04:35:46.984 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:35:46.985 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:35:46.986 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:35:46.986 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.115.24
2026-02-05 04:35:46.986 DEBUG [src.node.docker_mananger] Generated ports ['52399', '52400', '52401', '52402', '52403']
2026-02-05 04:35:46.987 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:35:46.987 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:35:46.987 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:35:46.987 DEBUG [src.node.docker_mananger] docker run -i -t -p 52399:52399 -p 52400:52400 -p 52401:52401 -p 52402:52402 -p 52403:52403 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52401 --rest-port=52399 --tcp-port=52400 --discv5-udp-port=52402 --rest-address=0.0.0.0 --nat=extip:172.18.115.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9d348f973a9ea1e76a774bcc370b96dabb5bf73ff88b5eabb7e01cbf96ac124 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52403 --metrics-logging=true --store=true --relay=true
2026-02-05 04:35:47.201 ERROR [src.node.docker_mananger] Max retries reached for container a80f846bc951. Exiting log stream.
2026-02-05 04:35:47.202 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.115.24 waku 200fd12572b6ce3564b1b833a6c7b93144b9952f0323b74357609212f0587b7f
2026-02-05 04:35:47.235 DEBUG [src.node.docker_mananger] Container started with ID 200fd12572b6. Setting up logs at ./log/docker/publishing_node1_2026-02-05_04-35-46__ed247116-caee-4792-b7b9-1d05d96c1154__wakuorg_nwaku:latest.log
2026-02-05 04:35:47.237 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52399
2026-02-05 04:35:47.237 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:35:47.782 ERROR [src.node.docker_mananger] Max retries reached for container 91f89dc290b1. Exiting log stream.
2026-02-05 04:35:48.238 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52399/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:48.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:35:48.242 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:35:48.242 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52399/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:48.244 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.24/tcp/52400/p2p/16Uiu2HAm58zuHbDu4Pix2eRZAttkvdaPkU33zQ2tdyxQL48N3pdP","/ip4/172.18.115.24/tcp/52401/ws/p2p/16Uiu2HAm58zuHbDu4Pix2eRZAttkvdaPkU33zQ2tdyxQL48N3pdP"],"enrUri":"enr:-L24QLE_zMuS1mCHC6QjYG4TU4n8QwFUbKpVU60zg_TO4LDKGHwO3SUTvm1FHnGbo3WV51P3w3FhKcQOit6emlGoIxYCgmlkgnY0gmlwhKwScxiKbXVsdGlhZGRyc5YACASsEnMYBsywAAoErBJzGAbMsd0DgnJzhQADAQAAiXNlY3AyNTZrMaECkE9kGfBLHcc-vWqStdT-rykySovR6HQr0GxeztzmZxqDdGNwgsywg3VkcILMsoV3YWt1MgM"}'
2026-02-05 04:35:48.245 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:35:48.252 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:35:48.252 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-05_04-35-46__ed247116-caee-4792-b7b9-1d05d96c1154__wakuorg_nwaku:latest.log
2026-02-05 04:35:48.253 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:35:48.253 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:35:48.254 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:35:48.254 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.48.124
2026-02-05 04:35:48.254 DEBUG [src.node.docker_mananger] Generated ports ['46181', '46182', '46183', '46184', '46185']
2026-02-05 04:35:48.255 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:35:48.255 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:35:48.255 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:35:48.255 DEBUG [src.node.docker_mananger] docker run -i -t -p 46181:46181 -p 46182:46182 -p 46183:46183 -p 46184:46184 -p 46185:46185 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46183 --rest-port=46181 --tcp-port=46182 --discv5-udp-port=46184 --rest-address=0.0.0.0 --nat=extip:172.18.48.124 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0dba2429cee603eaec4ad5c7fcdd39bbefbbed059d0050c428c0bab27d3ebe2d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46185 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLE_zMuS1mCHC6QjYG4TU4n8QwFUbKpVU60zg_TO4LDKGHwO3SUTvm1FHnGbo3WV51P3w3FhKcQOit6emlGoIxYCgmlkgnY0gmlwhKwScxiKbXVsdGlhZGRyc5YACASsEnMYBsywAAoErBJzGAbMsd0DgnJzhQADAQAAiXNlY3AyNTZrMaECkE9kGfBLHcc-vWqStdT-rykySovR6HQr0GxeztzmZxqDdGNwgsywg3VkcILMsoV3YWt1MgM --storenode=/ip4/172.18.115.24/tcp/52400/p2p/16Uiu2HAm58zuHbDu4Pix2eRZAttkvdaPkU33zQ2tdyxQL48N3pdP --store=true --relay=true
2026-02-05 04:35:48.449 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.48.124 waku ce7a65e3a513ee6152e1daced52d0b00f418cbbd472e4fc668f69051877d2079
2026-02-05 04:35:48.484 DEBUG [src.node.docker_mananger] Container started with ID ce7a65e3a513. Setting up logs at ./log/docker/store_node1_2026-02-05_04-35-46__ed247116-caee-4792-b7b9-1d05d96c1154__wakuorg_nwaku:latest.log
2026-02-05 04:35:48.485 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46181
2026-02-05 04:35:48.485 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:35:49.486 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46181/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:49.490 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:35:49.491 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:35:49.491 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46181/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:49.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.124/tcp/46182/p2p/16Uiu2HAmRr9XKdgibZN5tK3s9Z5gYuEDfmp97HHTA2AmSkwdJksk","/ip4/172.18.48.124/tcp/46183/ws/p2p/16Uiu2HAmRr9XKdgibZN5tK3s9Z5gYuEDfmp97HHTA2AmSkwdJksk"],"enrUri":"enr:-L24QNoTpeSZ-zJML0q2vOirzs7YKRwzZXP7FnPaCMIVJsV9GB5YdV_us06DTwVZ-R5NVmcyO1yyOmu-yTUB3dzo7m4CgmlkgnY0gmlwhKwSMHyKbXVsdGlhZGRyc5YACASsEjB8BrRmAAoErBIwfAa0Z90DgnJzhQADAQAAiXNlY3AyNTZrMaEDxAOw26FcF5mnabVFD6QcFMNtjTXZlde_oHt0tTseOHODdGNwgrRmg3VkcIK0aIV3YWt1MgM"}'
2026-02-05 04:35:49.494 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:35:49.494 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46181/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.115.24/tcp/52400/p2p/16Uiu2HAm58zuHbDu4Pix2eRZAttkvdaPkU33zQ2tdyxQL48N3pdP"]'
2026-02-05 04:35:49.497 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:49.498 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52399/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:35:49.500 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:49.500 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46181/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:35:49.503 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:49.504 DEBUG [src.steps.store] Relaying message
2026-02-05 04:35:49.504 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52399/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:35:49.510 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:49.510 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:35:49.711 DEBUG [src.steps.store] Relaying message
2026-02-05 04:35:49.711 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52399/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:35:49.717 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:49.718 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:35:49.919 DEBUG [src.steps.store] Relaying message
2026-02-05 04:35:49.919 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52399/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:35:49.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:49.925 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:35:50.126 DEBUG [src.steps.store] Relaying message
2026-02-05 04:35:50.126 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52399/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:35:50.132 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:50.133 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:35:50.334 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52399/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xca4dadbce48d8f551b4d476166c3b3adac6e94ea09853169f77ebde005ce721e&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:50.338 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:52399/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xca4dadbce48d8f551b4d476166c3b3adac6e94ea09853169f77ebde005ce721e&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-05 04:35:50.339 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46181/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xca4dadbce48d8f551b4d476166c3b3adac6e94ea09853169f77ebde005ce721e&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:50.342 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:46181/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xca4dadbce48d8f551b4d476166c3b3adac6e94ea09853169f77ebde005ce721e&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-05 04:35:50.344 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:35:50.345 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:35:50.346 DEBUG [src.node.waku_node] Stopping container with id 200fd12572b6
2026-02-05 04:35:50.959 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:35:50.960 DEBUG [src.node.waku_node] Stopping container with id ce7a65e3a513
2026-02-05 04:35:51.578 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:35:51.579 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:35:51.588 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:35:51.595 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
