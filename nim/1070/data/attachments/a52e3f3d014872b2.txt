2026-02-05 04:35:52.432 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:35:52.432 DEBUG [tests.conftest] Running test: test_content_topic_and_pubsub_topic_not_in_docker_flags with id: 2026-02-05_04-35-52__b36f9843-660a-4197-b4f1-8ac4943d904d
2026-02-05 04:35:52.432 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:35:52.433 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-05 04:35:52.433 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-05 04:35:52.440 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:35:52.440 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-05_04-35-52__b36f9843-660a-4197-b4f1-8ac4943d904d__wakuorg_nwaku:latest.log
2026-02-05 04:35:52.441 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:35:52.441 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:35:52.442 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:35:52.442 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.144.114
2026-02-05 04:35:52.442 DEBUG [src.node.docker_mananger] Generated ports ['62803', '62804', '62805', '62806', '62807']
2026-02-05 04:35:52.443 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:35:52.443 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:35:52.443 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:35:52.443 DEBUG [src.node.docker_mananger] docker run -i -t -p 62803:62803 -p 62804:62804 -p 62805:62805 -p 62806:62806 -p 62807:62807 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62805 --rest-port=62803 --tcp-port=62804 --discv5-udp-port=62806 --rest-address=0.0.0.0 --nat=extip:172.18.144.114 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=9e1fa2b1e98684e9fded51a2de37eda96ddef8fb6e6c5c081c922e8fa00020bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62807 --metrics-logging=true --relay=true --filter=true
2026-02-05 04:35:52.623 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.144.114 waku 1a4dae364fce3f49e74df93840404f05983a0b6a4d373d489abc22eda5ec3737
2026-02-05 04:35:52.659 DEBUG [src.node.docker_mananger] Container started with ID 1a4dae364fce. Setting up logs at ./log/docker/node1_2026-02-05_04-35-52__b36f9843-660a-4197-b4f1-8ac4943d904d__wakuorg_nwaku:latest.log
2026-02-05 04:35:52.659 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62803
2026-02-05 04:35:52.660 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:35:52.706 ERROR [src.node.docker_mananger] Max retries reached for container 4f6952f5a125. Exiting log stream.
2026-02-05 04:35:53.235 ERROR [src.node.docker_mananger] Max retries reached for container 2e27bd83e3d1. Exiting log stream.
2026-02-05 04:35:53.660 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62803/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:53.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:35:53.664 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:35:53.664 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62803/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:53.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.144.114/tcp/62804/p2p/16Uiu2HAkxwbdhXHf5iT7BpgbkkNuYsZosnRFoTH6JB7HtD2vysAf","/ip4/172.18.144.114/tcp/62805/ws/p2p/16Uiu2HAkxwbdhXHf5iT7BpgbkkNuYsZosnRFoTH6JB7HtD2vysAf"],"enrUri":"enr:-L24QEWdJnNBLk5SYlo_WZ-TwFs-oCj8K810jNkmeDwLtbO3JnDM9yW9PKIKfjajle2WR0KG08UlLGg0AADdw8xnXpsCgmlkgnY0gmlwhKwSkHKKbXVsdGlhZGRyc5YACASsEpByBvVUAAoErBKQcgb1Vd0DgnJzhQACAQAAiXNlY3AyNTZrMaECND2SDKpCM8E6XQ41srENDAuDpAcA5GJxvmkqIENT5GiDdGNwgvVUg3VkcIL1VoV3YWt1MgU"}'
2026-02-05 04:35:53.667 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:35:53.674 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:35:53.674 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-05_04-35-52__b36f9843-660a-4197-b4f1-8ac4943d904d__wakuorg_nwaku:latest.log
2026-02-05 04:35:53.674 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:35:53.674 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:35:53.675 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:35:53.675 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.165.169
2026-02-05 04:35:53.676 DEBUG [src.node.docker_mananger] Generated ports ['15707', '15708', '15709', '15710', '15711']
2026-02-05 04:35:53.676 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:35:53.676 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:35:53.676 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:35:53.676 DEBUG [src.node.docker_mananger] docker run -i -t -p 15707:15707 -p 15708:15708 -p 15709:15709 -p 15710:15710 -p 15711:15711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15709 --rest-port=15707 --tcp-port=15708 --discv5-udp-port=15710 --rest-address=0.0.0.0 --nat=extip:172.18.165.169 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a4f2cb9286bfbf77cf215d459bed2ddb76d9dee2d782d4caaf3ae4be00cb7a3e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15711 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QEWdJnNBLk5SYlo_WZ-TwFs-oCj8K810jNkmeDwLtbO3JnDM9yW9PKIKfjajle2WR0KG08UlLGg0AADdw8xnXpsCgmlkgnY0gmlwhKwSkHKKbXVsdGlhZGRyc5YACASsEpByBvVUAAoErBKQcgb1Vd0DgnJzhQACAQAAiXNlY3AyNTZrMaECND2SDKpCM8E6XQ41srENDAuDpAcA5GJxvmkqIENT5GiDdGNwgvVUg3VkcIL1VoV3YWt1MgU
2026-02-05 04:35:53.852 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.165.169 waku 79be8e300ae777c12afdc4581cbe43a0a1fa07a6a6fd8c41f495d0c20c1c0ca6
2026-02-05 04:35:53.881 DEBUG [src.node.docker_mananger] Container started with ID 79be8e300ae7. Setting up logs at ./log/docker/node2_2026-02-05_04-35-52__b36f9843-660a-4197-b4f1-8ac4943d904d__wakuorg_nwaku:latest.log
2026-02-05 04:35:53.882 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15707
2026-02-05 04:35:53.882 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:35:54.883 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15707/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:54.894 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-05 04:35:54.895 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:35:54.896 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:54.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.169/tcp/15708/p2p/16Uiu2HAm4vZYKn4GUhETDwCmavmdm1tKKaK2WLnRqffEZdiRmo8x","/ip4/172.18.165.169/tcp/15709/ws/p2p/16Uiu2HAm4vZYKn4GUhETDwCmavmdm1tKKaK2WLnRqffEZdiRmo8x"],"enrUri":"enr:-L24QFRjhHGMli-QCKeEKeNhc48h3poA0q8S06bG7-tbg5HvMcDRirSD8d-jAWMvc3bqXxgte2qyaE50VqEiCTdwZ3ACgmlkgnY0gmlwhKwSpamKbXVsdGlhZGRyc5YACASsEqWpBj1cAAoErBKlqQY9Xd0DgnJzhQACAQAAiXNlY3AyNTZrMaECjR--vIWFQ95Z-eSGoziQBwbAZsJJnSB3c80HCHrs30WDdGNwgj1cg3VkcII9XoV3YWt1MgE"}'
2026-02-05 04:35:54.902 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:35:54.902 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15707/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.144.114/tcp/62804/p2p/16Uiu2HAkxwbdhXHf5iT7BpgbkkNuYsZosnRFoTH6JB7HtD2vysAf"]'
2026-02-05 04:35:54.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:54.907 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62803/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-05 04:35:54.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:54.909 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15707/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-05 04:35:54.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:54.913 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62803/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:35:54.917 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:35:54.917 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-05 04:35:55.018 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-05 04:35:55.018 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62803/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:55.021 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770266154912944299,"ephemeral":false,"proof":""}]'
2026-02-05 04:35:55.023 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-05 04:35:55.023 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15707/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:35:55.025 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770266154912944299,"ephemeral":false,"proof":""}]'
2026-02-05 04:35:55.028 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:35:55.029 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:35:55.029 DEBUG [src.node.waku_node] Stopping container with id 1a4dae364fce
2026-02-05 04:35:55.597 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:35:55.600 DEBUG [src.node.waku_node] Stopping container with id 79be8e300ae7
2026-02-05 04:35:56.132 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:35:56.134 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:35:56.141 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:35:56.146 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
