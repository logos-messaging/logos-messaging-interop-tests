2026-02-05 04:38:17.147 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:38:17.147 DEBUG [tests.conftest] Running test: test_store_with_wrong_url_content_topic with id: 2026-02-05_04-38-17__b998e8e6-245a-4bbc-ae69-dded08c466aa
2026-02-05 04:38:17.147 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:38:17.147 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-05 04:38:17.147 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-05 04:38:17.153 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:38:17.153 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-05_04-38-17__b998e8e6-245a-4bbc-ae69-dded08c466aa__wakuorg_nwaku:latest.log
2026-02-05 04:38:17.154 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:38:17.154 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:38:17.155 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:38:17.155 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.190
2026-02-05 04:38:17.155 DEBUG [src.node.docker_mananger] Generated ports ['6948', '6949', '6950', '6951', '6952']
2026-02-05 04:38:17.155 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:38:17.155 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:38:17.155 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:38:17.155 DEBUG [src.node.docker_mananger] docker run -i -t -p 6948:6948 -p 6949:6949 -p 6950:6950 -p 6951:6951 -p 6952:6952 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6950 --rest-port=6948 --tcp-port=6949 --discv5-udp-port=6951 --rest-address=0.0.0.0 --nat=extip:172.18.229.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee864e6798b236c039df834ed3ac1c1d24bedfaf9ed178cdab76fc534fdadecd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6952 --metrics-logging=true --store=true --relay=true
2026-02-05 04:38:17.314 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.190 waku 35440f177caf7edd7aa79aafbe11a7cdca48846ed04f454c0e8365d1b8d55c3e
2026-02-05 04:38:17.340 DEBUG [src.node.docker_mananger] Container started with ID 35440f177caf. Setting up logs at ./log/docker/publishing_node1_2026-02-05_04-38-17__b998e8e6-245a-4bbc-ae69-dded08c466aa__wakuorg_nwaku:latest.log
2026-02-05 04:38:17.340 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6948
2026-02-05 04:38:17.341 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:38:17.443 ERROR [src.node.docker_mananger] Max retries reached for container aac96fd7823e. Exiting log stream.
2026-02-05 04:38:17.940 ERROR [src.node.docker_mananger] Max retries reached for container fe2fa567f168. Exiting log stream.
2026-02-05 04:38:18.342 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6948/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:18.345 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:38:18.345 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:38:18.345 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6948/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:18.347 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.190/tcp/6949/p2p/16Uiu2HAmPKe7HEH546sTHgEfv2L25j7kedZiscREntoYe9AuwTDm","/ip4/172.18.229.190/tcp/6950/ws/p2p/16Uiu2HAmPKe7HEH546sTHgEfv2L25j7kedZiscREntoYe9AuwTDm"],"enrUri":"enr:-L24QHgbGul2V7C0Acd18ZPlODRChfHCD9YQv-A1tHtRj7whLuP27KN2R-M_Jp8iDmT_tsLofLm7tPUxV_jeePsl7BcCgmlkgnY0gmlwhKwS5b6KbXVsdGlhZGRyc5YACASsEuW-BhslAAoErBLlvgYbJt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnnuiNgFgHfttZYdYbVGjka61BCekCTwtg2g-Lh9CrFyDdGNwghslg3VkcIIbJ4V3YWt1MgM"}'
2026-02-05 04:38:18.348 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:38:18.353 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:38:18.354 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-05_04-38-17__b998e8e6-245a-4bbc-ae69-dded08c466aa__wakuorg_nwaku:latest.log
2026-02-05 04:38:18.354 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:38:18.354 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:38:18.355 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:38:18.355 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.78.38
2026-02-05 04:38:18.355 DEBUG [src.node.docker_mananger] Generated ports ['58738', '58739', '58740', '58741', '58742']
2026-02-05 04:38:18.355 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:38:18.355 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:38:18.356 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:38:18.356 DEBUG [src.node.docker_mananger] docker run -i -t -p 58738:58738 -p 58739:58739 -p 58740:58740 -p 58741:58741 -p 58742:58742 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58740 --rest-port=58738 --tcp-port=58739 --discv5-udp-port=58741 --rest-address=0.0.0.0 --nat=extip:172.18.78.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8ebef758c4d3ebee5e2d9224c4ca333d0deb80b1cec9f68c975dbecffc5ef2c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58742 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHgbGul2V7C0Acd18ZPlODRChfHCD9YQv-A1tHtRj7whLuP27KN2R-M_Jp8iDmT_tsLofLm7tPUxV_jeePsl7BcCgmlkgnY0gmlwhKwS5b6KbXVsdGlhZGRyc5YACASsEuW-BhslAAoErBLlvgYbJt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnnuiNgFgHfttZYdYbVGjka61BCekCTwtg2g-Lh9CrFyDdGNwghslg3VkcIIbJ4V3YWt1MgM --storenode=/ip4/172.18.229.190/tcp/6949/p2p/16Uiu2HAmPKe7HEH546sTHgEfv2L25j7kedZiscREntoYe9AuwTDm --store=true --relay=true
2026-02-05 04:38:18.526 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.78.38 waku 18919b6ecad3de09857aa128b14e94097f3a34d2b7df46d51b41246b6b3f9904
2026-02-05 04:38:18.554 DEBUG [src.node.docker_mananger] Container started with ID 18919b6ecad3. Setting up logs at ./log/docker/store_node1_2026-02-05_04-38-17__b998e8e6-245a-4bbc-ae69-dded08c466aa__wakuorg_nwaku:latest.log
2026-02-05 04:38:18.555 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58738
2026-02-05 04:38:18.556 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:38:19.556 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58738/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:19.560 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:38:19.560 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:38:19.561 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58738/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:19.562 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.38/tcp/58739/p2p/16Uiu2HAmMiBBRYsjWK86pmwv9naFgEZiqSDPdGe9tHn6U1isDPHZ","/ip4/172.18.78.38/tcp/58740/ws/p2p/16Uiu2HAmMiBBRYsjWK86pmwv9naFgEZiqSDPdGe9tHn6U1isDPHZ"],"enrUri":"enr:-L24QFaief1abu1O4Aie-H5fVl4Q47VtIDGco2-ppiZ7r-7HZr-lI4iZGduzMLbH0fwSIt8qgg3DeAmJhQQ6MaQA4WcCgmlkgnY0gmlwhKwSTiaKbXVsdGlhZGRyc5YACASsEk4mBuVzAAoErBJOJgbldN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhoorkFyaF3QdWRSrMXCSmxN3ki5PbAfTkkf4L788bPiDdGNwguVzg3VkcILldYV3YWt1MgM"}'
2026-02-05 04:38:19.563 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:38:19.563 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58738/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.229.190/tcp/6949/p2p/16Uiu2HAmPKe7HEH546sTHgEfv2L25j7kedZiscREntoYe9AuwTDm"]'
2026-02-05 04:38:19.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:19.565 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6948/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:38:19.568 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:19.568 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58738/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:38:19.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:19.571 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:19.571 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6948/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:19.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:19.575 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:19.776 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:19.777 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6948/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:19.782 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:19.782 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:19.983 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:19.983 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6948/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:19.989 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:19.989 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:20.190 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:20.190 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6948/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:20.197 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:20.197 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:20.398 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:20.398 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6948/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:20.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:20.403 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:20.605 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:20.605 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6948/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:20.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:20.610 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:20.811 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:20.811 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6948/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:20.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:20.817 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:21.018 DEBUG [src.steps.store] Relaying message
2026-02-05 04:38:21.018 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6948/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:38:21.025 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:38:21.025 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-05 04:38:21.226 DEBUG [tests.store.test_topics] trying to find stored messages with wrong content_topic =myapp/1/latest/proto
2026-02-05 04:38:21.226 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6948/store/v3/messages?includeData=true&contentTopics=myapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:38:21.230 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-02-05 04:38:21.230 DEBUG [tests.store.test_topics]  response for wrong url content topic is {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2026-02-05 04:38:21.232 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:38:21.233 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:38:21.233 DEBUG [src.node.waku_node] Stopping container with id 35440f177caf
2026-02-05 04:38:21.699 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:38:21.699 DEBUG [src.node.waku_node] Stopping container with id 18919b6ecad3
2026-02-05 04:38:22.196 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:38:22.199 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:38:22.205 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:38:22.211 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
