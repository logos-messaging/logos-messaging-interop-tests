2026-02-05 04:34:52.885 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:34:52.885 DEBUG [tests.conftest] Running test: test_publish_on_not_subscribed_content_topic_works with id: 2026-02-05_04-34-52__12920fc6-f051-4c52-ab98-2fe46e4a0946
2026-02-05 04:34:52.885 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:34:52.886 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-05 04:34:52.886 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-05 04:34:52.893 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:52.893 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-05_04-34-52__12920fc6-f051-4c52-ab98-2fe46e4a0946__wakuorg_nwaku:latest.log
2026-02-05 04:34:52.893 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:52.894 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:52.895 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:52.895 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.86.161
2026-02-05 04:34:52.895 DEBUG [src.node.docker_mananger] Generated ports ['60921', '60922', '60923', '60924', '60925']
2026-02-05 04:34:52.895 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:52.895 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:52.895 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:52.896 DEBUG [src.node.docker_mananger] docker run -i -t -p 60921:60921 -p 60922:60922 -p 60923:60923 -p 60924:60924 -p 60925:60925 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60923 --rest-port=60921 --tcp-port=60922 --discv5-udp-port=60924 --rest-address=0.0.0.0 --nat=extip:172.18.86.161 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6ad4fb6e335ebb0457eadbe0d5abcc5ff51a2faaae0bc5aba742124ed3c4db73 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60925 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-02-05 04:34:53.073 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.86.161 waku 579fd31253b97a8ec7c33102a7d1befdea1fca7d12729c4f88ddb9eb51b575e4
2026-02-05 04:34:53.105 DEBUG [src.node.docker_mananger] Container started with ID 579fd31253b9. Setting up logs at ./log/docker/node1_2026-02-05_04-34-52__12920fc6-f051-4c52-ab98-2fe46e4a0946__wakuorg_nwaku:latest.log
2026-02-05 04:34:53.106 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60921
2026-02-05 04:34:53.107 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:53.137 ERROR [src.node.docker_mananger] Max retries reached for container f223d791c851. Exiting log stream.
2026-02-05 04:34:53.689 ERROR [src.node.docker_mananger] Max retries reached for container defa3d29e33e. Exiting log stream.
2026-02-05 04:34:54.107 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60921/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:54.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:34:54.110 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:54.111 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60921/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:54.113 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.161/tcp/60922/p2p/16Uiu2HAmUQAqWCiDGGBEMrQvHqcZJV3Qxj1PYFAAQn45LB6nd9V4","/ip4/172.18.86.161/tcp/60923/ws/p2p/16Uiu2HAmUQAqWCiDGGBEMrQvHqcZJV3Qxj1PYFAAQn45LB6nd9V4"],"enrUri":"enr:-L24QAQKYTrrsh823ShUVP5u7T7sfBV6GKCAklbKiP6h9dqBZIojzJYpuOzzi_StxSIjyzta9xASYnSE1J6ZhrLSAjICgmlkgnY0gmlwhKwSVqGKbXVsdGlhZGRyc5YACASsElahBu36AAoErBJWoQbt-90DgnJzhQACAQAAiXNlY3AyNTZrMaED6e8iwRNJVUzDaci1--5ZX96mRN6oqMR0sRlclDuhyQuDdGNwgu36g3VkcILt_IV3YWt1MgU"}'
2026-02-05 04:34:54.113 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:54.119 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:54.120 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-05_04-34-52__12920fc6-f051-4c52-ab98-2fe46e4a0946__wakuorg_nwaku:latest.log
2026-02-05 04:34:54.120 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:54.120 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:54.121 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:54.121 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.136
2026-02-05 04:34:54.122 DEBUG [src.node.docker_mananger] Generated ports ['21393', '21394', '21395', '21396', '21397']
2026-02-05 04:34:54.122 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:54.122 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:54.122 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:54.122 DEBUG [src.node.docker_mananger] docker run -i -t -p 21393:21393 -p 21394:21394 -p 21395:21395 -p 21396:21396 -p 21397:21397 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21395 --rest-port=21393 --tcp-port=21394 --discv5-udp-port=21396 --rest-address=0.0.0.0 --nat=extip:172.18.255.136 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=7eeecb43047bdcca085509a8cee0603faee1ec8f8be642cc42cdf9c14ed0fbad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21397 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QAQKYTrrsh823ShUVP5u7T7sfBV6GKCAklbKiP6h9dqBZIojzJYpuOzzi_StxSIjyzta9xASYnSE1J6ZhrLSAjICgmlkgnY0gmlwhKwSVqGKbXVsdGlhZGRyc5YACASsElahBu36AAoErBJWoQbt-90DgnJzhQACAQAAiXNlY3AyNTZrMaED6e8iwRNJVUzDaci1--5ZX96mRN6oqMR0sRlclDuhyQuDdGNwgu36g3VkcILt_IV3YWt1MgU --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-02-05 04:34:54.311 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.136 waku 8b3f46dffb8c3f529d3a52e6352021de7594b0cd549a1cdb93442e336e46f197
2026-02-05 04:34:54.344 DEBUG [src.node.docker_mananger] Container started with ID 8b3f46dffb8c. Setting up logs at ./log/docker/node2_2026-02-05_04-34-52__12920fc6-f051-4c52-ab98-2fe46e4a0946__wakuorg_nwaku:latest.log
2026-02-05 04:34:54.345 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21393
2026-02-05 04:34:54.345 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:55.345 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21393/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:55.361 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-05 04:34:55.361 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:55.362 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21393/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:55.366 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.136/tcp/21394/p2p/16Uiu2HAmAYbY1G9KrkMFzbfAXNiJUNGh2hQ6Zm8VkJF266nL9z2T","/ip4/172.18.255.136/tcp/21395/ws/p2p/16Uiu2HAmAYbY1G9KrkMFzbfAXNiJUNGh2hQ6Zm8VkJF266nL9z2T"],"enrUri":"enr:-L24QEf3xWRvUmIlgkkhPx6ulyqDmWvsoF_xRptAYC1fA2UmbplNnyRkGC-PbeFpYWvCjaOkY4PiTsMTGsu_tgQzj-wCgmlkgnY0gmlwhKwS_4iKbXVsdGlhZGRyc5YACASsEv-IBlOSAAoErBL_iAZTk90DgnJzhQACAQAAiXNlY3AyNTZrMaEC4KVYEMvwMr9eUJSHzQ7aQ3EYt32X-cwM1TnJVdo0IKiDdGNwglOSg3VkcIJTlIV3YWt1MgE"}'
2026-02-05 04:34:55.367 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:55.367 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21393/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.161/tcp/60922/p2p/16Uiu2HAmUQAqWCiDGGBEMrQvHqcZJV3Qxj1PYFAAQn45LB6nd9V4"]'
2026-02-05 04:34:55.370 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:55.370 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60921/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-05 04:34:55.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:55.373 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21393/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-05 04:34:55.375 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:55.375 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60921/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:34:55.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:55.378 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21393/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-05 04:34:55.381 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:55.382 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:34:55.383 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:34:55.384 DEBUG [src.node.waku_node] Stopping container with id 579fd31253b9
2026-02-05 04:34:55.958 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:55.960 DEBUG [src.node.waku_node] Stopping container with id 8b3f46dffb8c
2026-02-05 04:34:56.510 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:56.512 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:34:56.521 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:34:56.525 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
