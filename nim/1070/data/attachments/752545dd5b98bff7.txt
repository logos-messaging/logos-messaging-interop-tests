2026-02-05 04:34:19.209 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-05 04:34:19.210 DEBUG [tests.conftest] Running test: test_light_push_with_extra_field with id: 2026-02-05_04-34-19__e18c94e2-93ab-4ba0-b205-69c6c7841045
2026-02-05 04:34:19.210 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-05 04:34:19.210 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-05 04:34:19.217 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:19.217 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-05_04-34-19__e18c94e2-93ab-4ba0-b205-69c6c7841045__wakuorg_nwaku:latest.log
2026-02-05 04:34:19.217 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:19.217 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:19.219 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:19.219 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.131
2026-02-05 04:34:19.219 DEBUG [src.node.docker_mananger] Generated ports ['17731', '17732', '17733', '17734', '17735']
2026-02-05 04:34:19.219 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:19.219 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:19.219 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:19.220 DEBUG [src.node.docker_mananger] docker run -i -t -p 17731:17731 -p 17732:17732 -p 17733:17733 -p 17734:17734 -p 17735:17735 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17733 --rest-port=17731 --tcp-port=17732 --discv5-udp-port=17734 --rest-address=0.0.0.0 --nat=extip:172.18.64.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcecd3aceff5e705048bfae2b6afd8fca9308a13bf9e29768ee9bebbdaadecfb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17735 --metrics-logging=true --lightpush=true --relay=true
2026-02-05 04:34:19.400 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.131 waku 86a14bf4f35aeb925b767431b9bca6acd056dea4852e5a2baf7332a38cb768c5
2026-02-05 04:34:19.429 ERROR [src.node.docker_mananger] Max retries reached for container a907851076b5. Exiting log stream.
2026-02-05 04:34:19.431 DEBUG [src.node.docker_mananger] Container started with ID 86a14bf4f35a. Setting up logs at ./log/docker/receiving_node1_2026-02-05_04-34-19__e18c94e2-93ab-4ba0-b205-69c6c7841045__wakuorg_nwaku:latest.log
2026-02-05 04:34:19.432 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17731
2026-02-05 04:34:19.432 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:20.002 ERROR [src.node.docker_mananger] Max retries reached for container ea138e789494. Exiting log stream.
2026-02-05 04:34:20.433 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17731/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:20.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:34:20.436 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:20.436 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17731/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:20.438 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.131/tcp/17732/p2p/16Uiu2HAmRX2Xe4zuWTb3oCP61oFq2sE2i64t9vKLNatmN3ccgbSK","/ip4/172.18.64.131/tcp/17733/ws/p2p/16Uiu2HAmRX2Xe4zuWTb3oCP61oFq2sE2i64t9vKLNatmN3ccgbSK"],"enrUri":"enr:-L24QJ_PplJCm0zNdPL5DAiIRVU8O1dosbEjH9I8qYeWs4I9NSEJUBLw7BspXJFEfFBzCwHPJDHuV2RQnbQMsX24M18CgmlkgnY0gmlwhKwSQIOKbXVsdGlhZGRyc5YACASsEkCDBkVEAAoErBJAgwZFRd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvx2_Kwnl5E5eWeRkJ_4XvDvWyWS6wPjnFDYJ--pKPayDdGNwgkVEg3VkcIJFRoV3YWt1Mgk"}'
2026-02-05 04:34:20.439 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:20.446 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:20.446 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-05_04-34-19__e18c94e2-93ab-4ba0-b205-69c6c7841045__wakuorg_nwaku:latest.log
2026-02-05 04:34:20.446 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:20.446 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:20.447 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:20.448 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.91.91
2026-02-05 04:34:20.448 DEBUG [src.node.docker_mananger] Generated ports ['6446', '6447', '6448', '6449', '6450']
2026-02-05 04:34:20.448 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:20.448 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:20.448 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:20.448 DEBUG [src.node.docker_mananger] docker run -i -t -p 6446:6446 -p 6447:6447 -p 6448:6448 -p 6449:6449 -p 6450:6450 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6448 --rest-port=6446 --tcp-port=6447 --discv5-udp-port=6449 --rest-address=0.0.0.0 --nat=extip:172.18.91.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4c1159f1fdfdaedc7bbaf0b7a0fb699c54e0d4fd8ba4b2e1cd70eb8837f0efef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6450 --metrics-logging=true --lightpush=false --relay=true
2026-02-05 04:34:20.633 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.91.91 waku fa6d7e32d02b01ed2b90e6cfca560d9d23e94b1ad230138ee4dc8418d8aca491
2026-02-05 04:34:20.665 DEBUG [src.node.docker_mananger] Container started with ID fa6d7e32d02b. Setting up logs at ./log/docker/receiving_node2_2026-02-05_04-34-19__e18c94e2-93ab-4ba0-b205-69c6c7841045__wakuorg_nwaku:latest.log
2026-02-05 04:34:20.665 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6446
2026-02-05 04:34:20.665 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:21.666 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6446/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:21.669 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:34:21.670 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:21.670 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6446/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:21.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.91/tcp/6447/p2p/16Uiu2HAm1sWiBTfyz6FpCYwGqch1chmWFWh5nhJ6zfCkyAjE7CYC","/ip4/172.18.91.91/tcp/6448/ws/p2p/16Uiu2HAm1sWiBTfyz6FpCYwGqch1chmWFWh5nhJ6zfCkyAjE7CYC"],"enrUri":"enr:-L24QPCe9gBpPxE-qf_ArA-yrAp5uVSJFgY55EiQglXnn9FWNGV1cFUHBrEzhO8MHLwEWLoCN0L2QGLZUd2xA7TvxRYCgmlkgnY0gmlwhKwSW1uKbXVsdGlhZGRyc5YACASsEltbBhkvAAoErBJbWwYZMN0DgnJzhQADAQAAiXNlY3AyNTZrMaECX8S97S-hsIsCGiim9kbUxd5OUxyaruU8RnzryLkYp92DdGNwghkvg3VkcIIZMYV3YWt1MgE"}'
2026-02-05 04:34:21.672 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:21.673 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6446/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.64.131/tcp/17732/p2p/16Uiu2HAmRX2Xe4zuWTb3oCP61oFq2sE2i64t9vKLNatmN3ccgbSK"]'
2026-02-05 04:34:21.705 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:21.714 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-05 04:34:21.715 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-05_04-34-19__e18c94e2-93ab-4ba0-b205-69c6c7841045__wakuorg_nwaku:latest.log
2026-02-05 04:34:21.716 DEBUG [src.node.waku_node] Starting Node...
2026-02-05 04:34:21.716 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-05 04:34:21.719 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-05 04:34:21.719 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.247.17
2026-02-05 04:34:21.720 DEBUG [src.node.docker_mananger] Generated ports ['11046', '11047', '11048', '11049', '11050']
2026-02-05 04:34:21.720 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-05 04:34:21.720 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-05 04:34:21.720 DEBUG [src.node.waku_node] Using volumes []
2026-02-05 04:34:21.721 DEBUG [src.node.docker_mananger] docker run -i -t -p 11046:11046 -p 11047:11047 -p 11048:11048 -p 11049:11049 -p 11050:11050 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11048 --rest-port=11046 --tcp-port=11047 --discv5-udp-port=11049 --rest-address=0.0.0.0 --nat=extip:172.18.247.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=25afb4ce3db2ff64ebbc0ce9d7e6da2edb0a6f90f4aecd4be8830599d41fda7c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11050 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJ_PplJCm0zNdPL5DAiIRVU8O1dosbEjH9I8qYeWs4I9NSEJUBLw7BspXJFEfFBzCwHPJDHuV2RQnbQMsX24M18CgmlkgnY0gmlwhKwSQIOKbXVsdGlhZGRyc5YACASsEkCDBkVEAAoErBJAgwZFRd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvx2_Kwnl5E5eWeRkJ_4XvDvWyWS6wPjnFDYJ--pKPayDdGNwgkVEg3VkcIJFRoV3YWt1Mgk --lightpushnode=/ip4/172.18.64.131/tcp/17732/p2p/16Uiu2HAmRX2Xe4zuWTb3oCP61oFq2sE2i64t9vKLNatmN3ccgbSK --lightpush=true --relay=true
2026-02-05 04:34:21.903 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.247.17 waku 01abdd44787f59582f92741a1ae31d844e16461f4c36f90f933c9cc1c9aea0c5
2026-02-05 04:34:21.933 DEBUG [src.node.docker_mananger] Container started with ID 01abdd44787f. Setting up logs at ./log/docker/lightpush_node1_2026-02-05_04-34-19__e18c94e2-93ab-4ba0-b205-69c6c7841045__wakuorg_nwaku:latest.log
2026-02-05 04:34:21.934 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11046
2026-02-05 04:34:21.935 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-05 04:34:22.935 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11046/health" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:22.939 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-05 04:34:22.939 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-05 04:34:22.939 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11046/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-05 04:34:22.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.17/tcp/11047/p2p/16Uiu2HAmVAunCFf8fKuJQUKAq2nSGSu6gyBQ1ZfGea36K2DwZCKV","/ip4/172.18.247.17/tcp/11048/ws/p2p/16Uiu2HAmVAunCFf8fKuJQUKAq2nSGSu6gyBQ1ZfGea36K2DwZCKV"],"enrUri":"enr:-L24QLDz-jbLKYAeDWBe8m6KIGU1paBxzocjGyw-rHa2EEb4PrHvQiBJwCp-Q76l4VIctVuvF7hu2UwYrpuCjygdgw8CgmlkgnY0gmlwhKwS9xGKbXVsdGlhZGRyc5YACASsEvcRBisnAAoErBL3EQYrKN0DgnJzhQADAQAAiXNlY3AyNTZrMaED9WU_QaESdnOY2dpifL_JtgwxsRNR5vnN-wMV8WVKttyDdGNwgisng3VkcIIrKYV3YWt1Mgk"}'
2026-02-05 04:34:22.942 INFO [src.node.waku_node] REST service is ready !!
2026-02-05 04:34:22.942 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11046/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.64.131/tcp/17732/p2p/16Uiu2HAmRX2Xe4zuWTb3oCP61oFq2sE2i64t9vKLNatmN3ccgbSK"]'
2026-02-05 04:34:22.991 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:22.991 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11046/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.91.91/tcp/6447/p2p/16Uiu2HAm1sWiBTfyz6FpCYwGqch1chmWFWh5nhJ6zfCkyAjE7CYC"]'
2026-02-05 04:34:23.018 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:23.020 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17731/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:34:23.025 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:23.026 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6446/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:34:23.031 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:23.031 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11046/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-05 04:34:23.035 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-05 04:34:23.039 DEBUG [src.steps.light_push] Lightpushing message
2026-02-05 04:34:23.040 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11046/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770266063039510081, "extraField": "extraValue"}}'
2026-02-05 04:34:23.043 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11046/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-05 04:34:23.047 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-05 04:34:23.048 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-05 04:34:23.048 DEBUG [src.node.waku_node] Stopping container with id 86a14bf4f35a
2026-02-05 04:34:23.607 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:23.609 DEBUG [src.node.waku_node] Stopping container with id fa6d7e32d02b
2026-02-05 04:34:24.155 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:24.155 DEBUG [src.node.waku_node] Stopping container with id 01abdd44787f
2026-02-05 04:34:24.421 ERROR [src.node.docker_mananger] Max retries reached for container 86a14bf4f35a. Exiting log stream.
2026-02-05 04:34:24.650 DEBUG [src.node.waku_node] Container stopped.
2026-02-05 04:34:24.652 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-05 04:34:24.661 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:34:24.676 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-05 04:34:24.685 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
