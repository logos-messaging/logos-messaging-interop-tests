2026-02-13 04:39:25.700 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-13 04:39:25.700 DEBUG [tests.conftest] Running test: test_single_content_topic[/app/27/sometopic/someencoding] with id: 2026-02-13_04-39-25__42aaedbd-f3e0-4e87-894e-fe7fcda7c660
2026-02-13 04:39:25.700 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-13 04:39:25.700 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-13 04:39:25.701 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-13 04:39:25.707 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:39:25.708 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-13_04-39-25__42aaedbd-f3e0-4e87-894e-fe7fcda7c660__wakuorg_nwaku:latest.log
2026-02-13 04:39:25.708 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:39:25.708 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:39:25.709 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:39:25.710 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.142.233
2026-02-13 04:39:25.710 DEBUG [src.node.docker_mananger] Generated ports ['57372', '57373', '57374', '57375', '57376']
2026-02-13 04:39:25.710 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:39:25.710 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:39:25.710 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:39:25.710 DEBUG [src.node.docker_mananger] docker run -i -t -p 57372:57372 -p 57373:57373 -p 57374:57374 -p 57375:57375 -p 57376:57376 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57374 --rest-port=57372 --tcp-port=57373 --discv5-udp-port=57375 --rest-address=0.0.0.0 --nat=extip:172.18.142.233 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=1d2b4b0a1be7db2de40c7f3a0b89bcc67edbb66dfc4d23799b7a9bc0daddb9f5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57376 --metrics-logging=true --relay=true --filter=true --content-topic=/app/27/sometopic/someencoding
2026-02-13 04:39:25.872 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.142.233 waku 1cba19e345d867410da3552a0ee8b1b2465bb599a4642f67e972db984aba9e07
2026-02-13 04:39:25.906 DEBUG [src.node.docker_mananger] Container started with ID 1cba19e345d8. Setting up logs at ./log/docker/node1_2026-02-13_04-39-25__42aaedbd-f3e0-4e87-894e-fe7fcda7c660__wakuorg_nwaku:latest.log
2026-02-13 04:39:25.907 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57372
2026-02-13 04:39:25.907 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:39:26.303 ERROR [src.node.docker_mananger] Max retries reached for container 73235e44842c. Exiting log stream.
2026-02-13 04:39:26.479 ERROR [src.node.docker_mananger] Max retries reached for container 589551fdcdda. Exiting log stream.
2026-02-13 04:39:26.907 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57372/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:26.910 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:39:26.910 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:39:26.910 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57372/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:26.913 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.233/tcp/57373/p2p/16Uiu2HAkzBSRQ6tNZXLSNK3Wv9CxemcnuxMxagRFuBUDzxkN5gWj","/ip4/172.18.142.233/tcp/57374/ws/p2p/16Uiu2HAkzBSRQ6tNZXLSNK3Wv9CxemcnuxMxagRFuBUDzxkN5gWj"],"enrUri":"enr:-L24QPzkkxdHhuRnfucapcfXeCfoGy7uMtp8D8Gq_o3b2rpcCB-fxJwMuI9bryjo7sPQiaxG0HlZxMPqgQCAZFWJL2YCgmlkgnY0gmlwhKwSjumKbXVsdGlhZGRyc5YACASsEo7pBuAdAAoErBKO6QbgHt0DgnJzhQACAQAAiXNlY3AyNTZrMaECRqT4_nNYUpCqbVK6liPq3YopF0xjyc0Sm2ByPg7uZEiDdGNwguAdg3VkcILgH4V3YWt1MgU"}'
2026-02-13 04:39:26.913 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:39:26.920 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:39:26.920 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-13_04-39-25__42aaedbd-f3e0-4e87-894e-fe7fcda7c660__wakuorg_nwaku:latest.log
2026-02-13 04:39:26.920 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:39:26.920 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:39:26.921 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:39:26.921 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.221.238
2026-02-13 04:39:26.921 DEBUG [src.node.docker_mananger] Generated ports ['32231', '32232', '32233', '32234', '32235']
2026-02-13 04:39:26.922 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:39:26.922 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:39:26.922 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:39:26.922 DEBUG [src.node.docker_mananger] docker run -i -t -p 32231:32231 -p 32232:32232 -p 32233:32233 -p 32234:32234 -p 32235:32235 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32233 --rest-port=32231 --tcp-port=32232 --discv5-udp-port=32234 --rest-address=0.0.0.0 --nat=extip:172.18.221.238 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=57eb2ba1a4e8ededc14ec40ae5b21282b44faeefe6ec233defaae9fba9eebade --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32235 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QPzkkxdHhuRnfucapcfXeCfoGy7uMtp8D8Gq_o3b2rpcCB-fxJwMuI9bryjo7sPQiaxG0HlZxMPqgQCAZFWJL2YCgmlkgnY0gmlwhKwSjumKbXVsdGlhZGRyc5YACASsEo7pBuAdAAoErBKO6QbgHt0DgnJzhQACAQAAiXNlY3AyNTZrMaECRqT4_nNYUpCqbVK6liPq3YopF0xjyc0Sm2ByPg7uZEiDdGNwguAdg3VkcILgH4V3YWt1MgU --content-topic=/app/27/sometopic/someencoding
2026-02-13 04:39:27.091 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.221.238 waku 3e37430be09f70d4d4656e587e47d2139c789f5b11ffb496ef44428733a2ee89
2026-02-13 04:39:27.124 DEBUG [src.node.docker_mananger] Container started with ID 3e37430be09f. Setting up logs at ./log/docker/node2_2026-02-13_04-39-25__42aaedbd-f3e0-4e87-894e-fe7fcda7c660__wakuorg_nwaku:latest.log
2026-02-13 04:39:27.124 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32231
2026-02-13 04:39:27.124 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:39:28.125 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32231/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:28.135 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-13 04:39:28.137 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:39:28.137 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32231/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:28.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.238/tcp/32232/p2p/16Uiu2HAmMmToJfDk1DtPmiqNUFAfqXuM2xaJgDMaTpm5QgpJHfxd","/ip4/172.18.221.238/tcp/32233/ws/p2p/16Uiu2HAmMmToJfDk1DtPmiqNUFAfqXuM2xaJgDMaTpm5QgpJHfxd"],"enrUri":"enr:-L24QHyD23zEYwsoUVUAYs0xNwYp8szua8qHElo8PSJdXpuiZiKm_VXLVM1icf7O7A6oT9BiIXEw8GRPNtNwjrgnWKgCgmlkgnY0gmlwhKwS3e6KbXVsdGlhZGRyc5YACASsEt3uBn3oAAoErBLd7gZ96d0DgnJzhQACAQAAiXNlY3AyNTZrMaEDh2G0DypV5p59dO1Hw8hoXKBpTavGPSwlNq8iBVus1iKDdGNwgn3og3VkcIJ96oV3YWt1MgE"}'
2026-02-13 04:39:28.143 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:39:28.144 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32231/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.142.233/tcp/57373/p2p/16Uiu2HAkzBSRQ6tNZXLSNK3Wv9CxemcnuxMxagRFuBUDzxkN5gWj"]'
2026-02-13 04:39:28.146 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:28.147 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57372/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/27/sometopic/someencoding"]'
2026-02-13 04:39:28.149 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:28.149 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32231/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/27/sometopic/someencoding"]'
2026-02-13 04:39:28.151 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:28.152 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57372/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-13 04:39:28.156 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:28.157 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-13 04:39:28.257 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-13 04:39:28.258 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57372/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:28.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1770957568152384700,"ephemeral":false,"proof":""}]'
2026-02-13 04:39:28.262 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-13 04:39:28.262 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32231/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:28.265 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1770957568152384700,"ephemeral":false,"proof":""}]'
2026-02-13 04:39:28.267 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-13 04:39:28.268 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-13 04:39:28.268 DEBUG [src.node.waku_node] Stopping container with id 1cba19e345d8
2026-02-13 04:39:28.490 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:39:28.490 DEBUG [src.node.waku_node] Stopping container with id 3e37430be09f
2026-02-13 04:39:28.726 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:39:28.727 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-13 04:39:28.736 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-13 04:39:28.740 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
