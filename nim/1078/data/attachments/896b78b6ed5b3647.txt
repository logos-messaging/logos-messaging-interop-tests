2026-02-13 04:41:34.667 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-13 04:41:34.669 DEBUG [tests.conftest] Running test: test_content_topic_not_in_docker_flags with id: 2026-02-13_04-41-34__767932ec-b2ff-48e0-b8d7-4082a58819b5
2026-02-13 04:41:34.670 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-13 04:41:34.671 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-13 04:41:34.672 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-13 04:41:34.685 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:41:34.685 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-13_04-41-34__767932ec-b2ff-48e0-b8d7-4082a58819b5__wakuorg_nwaku:latest.log
2026-02-13 04:41:34.686 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:41:34.686 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:41:34.689 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:41:34.689 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.31
2026-02-13 04:41:34.690 DEBUG [src.node.docker_mananger] Generated ports ['4377', '4378', '4379', '4380', '4381']
2026-02-13 04:41:34.690 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-13 04:41:34.692 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:41:34.693 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:41:34.693 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:41:34.693 DEBUG [src.node.docker_mananger] docker run -i -t -p 4377:4377 -p 4378:4378 -p 4379:4379 -p 4380:4380 -p 4381:4381 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4379 --rest-port=4377 --tcp-port=4378 --discv5-udp-port=4380 --rest-address=0.0.0.0 --nat=extip:172.18.84.31 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=de559cbcc3b0a6ed46ebb7ffdb8ce4f327efbfbea5fa977bdbfef4aeceaeb5de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4381 --metrics-logging=true --relay=true --filter=true
2026-02-13 04:41:34.899 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.31 waku b626b25139c7cc789d884d8c4ed628c29a12e5f0fa3187f3e8c4562ef52ac20f
2026-02-13 04:41:34.949 DEBUG [src.node.docker_mananger] Container started with ID b626b25139c7. Setting up logs at ./log/docker/node1_2026-02-13_04-41-34__767932ec-b2ff-48e0-b8d7-4082a58819b5__wakuorg_nwaku:latest.log
2026-02-13 04:41:34.949 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4377
2026-02-13 04:41:34.949 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:41:35.211 ERROR [src.node.docker_mananger] Max retries reached for container e68a2d9e0a58. Exiting log stream.
2026-02-13 04:41:35.517 ERROR [src.node.docker_mananger] Max retries reached for container df138eff1acd. Exiting log stream.
2026-02-13 04:41:35.950 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4377/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:35.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:41:35.953 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:41:35.954 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4377/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:35.956 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.31/tcp/4378/p2p/16Uiu2HAm5KDVUQ1oDtgHkJxKXpTYCKSVbvaxb2TQe8kKt8ZDnHJ6","/ip4/172.18.84.31/tcp/4379/ws/p2p/16Uiu2HAm5KDVUQ1oDtgHkJxKXpTYCKSVbvaxb2TQe8kKt8ZDnHJ6"],"enrUri":"enr:-L24QM33-KsZg8rzOxXL-Fe3eQR6O0C4xeIw2HVo9cXnmkPCO03jX0XdOT-c6UownEA4uk3nt4wws7RkQ7BAGxtiPOcCgmlkgnY0gmlwhKwSVB-KbXVsdGlhZGRyc5YACASsElQfBhEaAAoErBJUHwYRG90DgnJzhQACAQAAiXNlY3AyNTZrMaECku1vG4CWJShdNQkFf7IFBHr8hKmX1O6wTlBC_nDRpyeDdGNwghEag3VkcIIRHIV3YWt1MgU"}'
2026-02-13 04:41:35.956 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:41:35.963 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:41:35.963 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-13_04-41-34__767932ec-b2ff-48e0-b8d7-4082a58819b5__wakuorg_nwaku:latest.log
2026-02-13 04:41:35.964 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:41:35.964 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:41:35.965 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:41:35.965 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.92.218
2026-02-13 04:41:35.965 DEBUG [src.node.docker_mananger] Generated ports ['7007', '7008', '7009', '7010', '7011']
2026-02-13 04:41:35.966 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-13 04:41:35.966 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:41:35.966 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:41:35.966 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:41:35.966 DEBUG [src.node.docker_mananger] docker run -i -t -p 7007:7007 -p 7008:7008 -p 7009:7009 -p 7010:7010 -p 7011:7011 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7009 --rest-port=7007 --tcp-port=7008 --discv5-udp-port=7010 --rest-address=0.0.0.0 --nat=extip:172.18.92.218 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=13cccd36afae0dc4b8d261c39693caefada3e55a5fdaf0aa7dcea24eda6afcec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7011 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QM33-KsZg8rzOxXL-Fe3eQR6O0C4xeIw2HVo9cXnmkPCO03jX0XdOT-c6UownEA4uk3nt4wws7RkQ7BAGxtiPOcCgmlkgnY0gmlwhKwSVB-KbXVsdGlhZGRyc5YACASsElQfBhEaAAoErBJUHwYRG90DgnJzhQACAQAAiXNlY3AyNTZrMaECku1vG4CWJShdNQkFf7IFBHr8hKmX1O6wTlBC_nDRpyeDdGNwghEag3VkcIIRHIV3YWt1MgU
2026-02-13 04:41:36.170 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.92.218 waku 6873221652d247ac9b7009a2d58c9f3bf01301b7cc2f63b02503c522baa8ae65
2026-02-13 04:41:36.217 DEBUG [src.node.docker_mananger] Container started with ID 6873221652d2. Setting up logs at ./log/docker/node2_2026-02-13_04-41-34__767932ec-b2ff-48e0-b8d7-4082a58819b5__wakuorg_nwaku:latest.log
2026-02-13 04:41:36.218 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7007
2026-02-13 04:41:36.218 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:41:37.218 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7007/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:37.227 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-13 04:41:37.228 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:41:37.228 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7007/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:37.230 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.218/tcp/7008/p2p/16Uiu2HAm7KcDRn4uc5UWhd54P7TJ1JKG6n4oepByHtECZToTeCtj","/ip4/172.18.92.218/tcp/7009/ws/p2p/16Uiu2HAm7KcDRn4uc5UWhd54P7TJ1JKG6n4oepByHtECZToTeCtj"],"enrUri":"enr:-L24QEufBBPWZ38FAywu2UO3C9zFvrFhRCASqNXbOiVmRJG_Go6linlZ41gMcBFFiTjhErjQeaX6RZhu2Im9GyNKkKQCgmlkgnY0gmlwhKwSXNqKbXVsdGlhZGRyc5YACASsElzaBhtgAAoErBJc2gYbYd0DgnJzhQACAQAAiXNlY3AyNTZrMaECsL6AUe9VylQFHVpc8IUCmkio01BFZeLhNu3CpoCCdeyDdGNwghtgg3VkcIIbYoV3YWt1MgE"}'
2026-02-13 04:41:37.231 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:41:37.231 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7007/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.31/tcp/4378/p2p/16Uiu2HAm5KDVUQ1oDtgHkJxKXpTYCKSVbvaxb2TQe8kKt8ZDnHJ6"]'
2026-02-13 04:41:37.234 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:41:37.234 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4377/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-13 04:41:37.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:41:37.237 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7007/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-13 04:41:37.239 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:41:37.240 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4377/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-13 04:41:37.245 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:41:37.246 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-13 04:41:37.346 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-13 04:41:37.346 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4377/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:37.349 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770957697240025857,"ephemeral":false,"proof":""}]'
2026-02-13 04:41:37.351 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-13 04:41:37.351 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7007/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:37.354 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770957697240025857,"ephemeral":false,"proof":""}]'
2026-02-13 04:41:37.356 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-13 04:41:37.357 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-13 04:41:37.357 DEBUG [src.node.waku_node] Stopping container with id b626b25139c7
2026-02-13 04:41:37.606 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:41:37.607 DEBUG [src.node.waku_node] Stopping container with id 6873221652d2
2026-02-13 04:41:37.874 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:41:37.875 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-13 04:41:37.883 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-13 04:41:37.888 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
