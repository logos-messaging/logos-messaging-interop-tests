2026-02-13 04:47:15.951 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-13 04:47:15.952 DEBUG [tests.conftest] Running test: test_single_content_topic[/waku/2/content/test.js] with id: 2026-02-13_04-47-15__4bdaa7d2-65ff-4131-8dc5-2a61d8590b52
2026-02-13 04:47:15.953 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-13 04:47:15.953 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-13 04:47:15.953 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-13 04:47:15.965 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:47:15.966 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-13_04-47-15__4bdaa7d2-65ff-4131-8dc5-2a61d8590b52__wakuorg_nwaku:latest.log
2026-02-13 04:47:15.966 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:47:15.966 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:47:15.970 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:47:15.970 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.252.176
2026-02-13 04:47:15.970 DEBUG [src.node.docker_mananger] Generated ports ['23851', '23852', '23853', '23854', '23855']
2026-02-13 04:47:15.970 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:47:15.971 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:47:15.972 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:47:15.972 DEBUG [src.node.docker_mananger] docker run -i -t -p 23851:23851 -p 23852:23852 -p 23853:23853 -p 23854:23854 -p 23855:23855 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23853 --rest-port=23851 --tcp-port=23852 --discv5-udp-port=23854 --rest-address=0.0.0.0 --nat=extip:172.18.252.176 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fc1db56e402f4f21040ccec00f1eef7dbd7fc5596d90511ce1eddbb49b0eaead --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23855 --metrics-logging=true --relay=true --filter=true --content-topic=/waku/2/content/test.js
2026-02-13 04:47:16.174 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.252.176 waku dc43bab4bd20cb144181c5c9fe9f0081b1e998fa9f48d4989363f41e204561fa
2026-02-13 04:47:16.231 DEBUG [src.node.docker_mananger] Container started with ID dc43bab4bd20. Setting up logs at ./log/docker/node1_2026-02-13_04-47-15__4bdaa7d2-65ff-4131-8dc5-2a61d8590b52__wakuorg_nwaku:latest.log
2026-02-13 04:47:16.232 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23851
2026-02-13 04:47:16.232 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:47:16.486 ERROR [src.node.docker_mananger] Max retries reached for container 83865573a40b. Exiting log stream.
2026-02-13 04:47:16.781 ERROR [src.node.docker_mananger] Max retries reached for container bea94ae02a5f. Exiting log stream.
2026-02-13 04:47:17.233 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23851/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:47:17.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:47:17.236 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:47:17.237 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23851/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:47:17.239 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.176/tcp/23852/p2p/16Uiu2HAm5rVaPBfgShVYbGR7t8RBgbtjDxaaSDKZLcHnwKEfiB9b","/ip4/172.18.252.176/tcp/23853/ws/p2p/16Uiu2HAm5rVaPBfgShVYbGR7t8RBgbtjDxaaSDKZLcHnwKEfiB9b"],"enrUri":"enr:-L24QKXfySRjnxSs8r08Ml65taXzSU_oeQmV8Y3ye2GPAOW-OhoQy4_hyUIfMOYjOxl2QsPndJR2pHEQVHXsiDKj2WACgmlkgnY0gmlwhKwS_LCKbXVsdGlhZGRyc5YACASsEvywBl0sAAoErBL8sAZdLd0DgnJzhQACAQAAiXNlY3AyNTZrMaECmvCgRm6WNKXuwPK12F5FyZlRjn392Kt1Tajlwwg5t8KDdGNwgl0sg3VkcIJdLoV3YWt1MgU"}'
2026-02-13 04:47:17.239 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:47:17.246 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:47:17.246 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-13_04-47-15__4bdaa7d2-65ff-4131-8dc5-2a61d8590b52__wakuorg_nwaku:latest.log
2026-02-13 04:47:17.247 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:47:17.247 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:47:17.248 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:47:17.248 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.253.246
2026-02-13 04:47:17.248 DEBUG [src.node.docker_mananger] Generated ports ['23333', '23334', '23335', '23336', '23337']
2026-02-13 04:47:17.249 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:47:17.249 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:47:17.249 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:47:17.249 DEBUG [src.node.docker_mananger] docker run -i -t -p 23333:23333 -p 23334:23334 -p 23335:23335 -p 23336:23336 -p 23337:23337 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23335 --rest-port=23333 --tcp-port=23334 --discv5-udp-port=23336 --rest-address=0.0.0.0 --nat=extip:172.18.253.246 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f6fe8dbf4daf9a7bcdefad1cb2fa5dc7c6cddd3dd4db67da769fe99aa4d89cef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23337 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKXfySRjnxSs8r08Ml65taXzSU_oeQmV8Y3ye2GPAOW-OhoQy4_hyUIfMOYjOxl2QsPndJR2pHEQVHXsiDKj2WACgmlkgnY0gmlwhKwS_LCKbXVsdGlhZGRyc5YACASsEvywBl0sAAoErBL8sAZdLd0DgnJzhQACAQAAiXNlY3AyNTZrMaECmvCgRm6WNKXuwPK12F5FyZlRjn392Kt1Tajlwwg5t8KDdGNwgl0sg3VkcIJdLoV3YWt1MgU --content-topic=/waku/2/content/test.js
2026-02-13 04:47:17.450 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.253.246 waku 318436616b37cc4a3a8a0214b03356b8890d354c2e9db9c2ab4eeca5926d0ec5
2026-02-13 04:47:17.506 DEBUG [src.node.docker_mananger] Container started with ID 318436616b37. Setting up logs at ./log/docker/node2_2026-02-13_04-47-15__4bdaa7d2-65ff-4131-8dc5-2a61d8590b52__wakuorg_nwaku:latest.log
2026-02-13 04:47:17.507 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23333
2026-02-13 04:47:17.507 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:47:18.507 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23333/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:47:18.511 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-13 04:47:18.511 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:47:18.511 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23333/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:47:18.514 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.246/tcp/23334/p2p/16Uiu2HAmT2dymajAmKNYGdpi34t5FMBfZ6TEWjm4ptm35apbn1kR","/ip4/172.18.253.246/tcp/23335/ws/p2p/16Uiu2HAmT2dymajAmKNYGdpi34t5FMBfZ6TEWjm4ptm35apbn1kR"],"enrUri":"enr:-L24QL13mgO0oDrqZI6vaogkMOyWwVXHbsoduXKCUPj5trZtbydWS11bqubCqXeLj9A4gdAluZPo2LioJHeKYdkCvCACgmlkgnY0gmlwhKwS_faKbXVsdGlhZGRyc5YACASsEv32BlsmAAoErBL99gZbJ90DgnJzhQACAQAAiXNlY3AyNTZrMaED1Y9cdOCkh_WOo6rY7hzOjDVu9e03vNC5hmO7CiKKXZ6DdGNwglsmg3VkcIJbKIV3YWt1MgE"}'
2026-02-13 04:47:18.514 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:47:18.514 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23333/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.252.176/tcp/23852/p2p/16Uiu2HAm5rVaPBfgShVYbGR7t8RBgbtjDxaaSDKZLcHnwKEfiB9b"]'
2026-02-13 04:47:18.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:47:18.517 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23851/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
2026-02-13 04:47:18.520 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:47:18.520 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23333/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
2026-02-13 04:47:18.522 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:47:18.523 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23851/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-13 04:47:18.527 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:47:18.528 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-13 04:47:18.628 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-13 04:47:18.629 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23851/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:47:18.631 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1770958038523397505,"ephemeral":false,"proof":""}]'
2026-02-13 04:47:18.632 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-13 04:47:18.633 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23333/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:47:18.635 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1770958038523397505,"ephemeral":false,"proof":""}]'
2026-02-13 04:47:18.638 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-13 04:47:18.639 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-13 04:47:18.639 DEBUG [src.node.waku_node] Stopping container with id dc43bab4bd20
2026-02-13 04:47:18.949 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:47:18.950 DEBUG [src.node.waku_node] Stopping container with id 318436616b37
2026-02-13 04:47:19.238 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:47:19.240 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-13 04:47:19.250 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-13 04:47:19.256 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
