2026-02-13 04:37:22.012 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-13 04:37:22.013 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_content_topic with id: 2026-02-13_04-37-22__55c4d9a3-db14-41d1-b384-61c9ecb7abc8
2026-02-13 04:37:22.014 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-13 04:37:22.014 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-13 04:37:22.015 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-13 04:37:22.023 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:37:22.024 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-13_04-37-22__55c4d9a3-db14-41d1-b384-61c9ecb7abc8__wakuorg_nwaku:latest.log
2026-02-13 04:37:22.024 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:37:22.024 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:37:22.025 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:37:22.026 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.93.165
2026-02-13 04:37:22.026 DEBUG [src.node.docker_mananger] Generated ports ['17271', '17272', '17273', '17274', '17275']
2026-02-13 04:37:22.026 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:37:22.026 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:37:22.026 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:37:22.026 DEBUG [src.node.docker_mananger] docker run -i -t -p 17271:17271 -p 17272:17272 -p 17273:17273 -p 17274:17274 -p 17275:17275 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17273 --rest-port=17271 --tcp-port=17272 --discv5-udp-port=17274 --rest-address=0.0.0.0 --nat=extip:172.18.93.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c4a1853ffbc99bab2eba8bffc491b85ed472f0fefbce8c4fe8a0dab65e9fdd81 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17275 --metrics-logging=true --relay=true --filter=true
2026-02-13 04:37:22.222 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.93.165 waku e78ea1910a645428bd63ff8f4fc4019b4bd772f75f3015f192aeb735b3d21e3a
2026-02-13 04:37:22.269 DEBUG [src.node.docker_mananger] Container started with ID e78ea1910a64. Setting up logs at ./log/docker/node1_2026-02-13_04-37-22__55c4d9a3-db14-41d1-b384-61c9ecb7abc8__wakuorg_nwaku:latest.log
2026-02-13 04:37:22.269 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17271
2026-02-13 04:37:22.269 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:37:22.557 ERROR [src.node.docker_mananger] Max retries reached for container e2b96a7ddcf4. Exiting log stream.
2026-02-13 04:37:22.833 ERROR [src.node.docker_mananger] Max retries reached for container 434ded92b58b. Exiting log stream.
2026-02-13 04:37:23.271 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17271/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:23.274 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:37:23.274 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:37:23.274 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17271/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:23.276 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.165/tcp/17272/p2p/16Uiu2HAkyK6Acu275YeUrL5UqF7UxDSPMVksny6wbsUFuPP8CsWR","/ip4/172.18.93.165/tcp/17273/ws/p2p/16Uiu2HAkyK6Acu275YeUrL5UqF7UxDSPMVksny6wbsUFuPP8CsWR"],"enrUri":"enr:-L24QCxISG10OhNn-akeJXPMlxwC6h3Bdo4durwHhUCd4zvSUrw65EWZAve1qanT5yK3wehdeRnHWVfr1A2XjZ6UVOECgmlkgnY0gmlwhKwSXaWKbXVsdGlhZGRyc5YACASsEl2lBkN4AAoErBJdpQZDed0DgnJzhQADAQAAiXNlY3AyNTZrMaECOb8HrQs6BrGGIe-t46TgjKVLmFjURb3tDxqRPc_rnhqDdGNwgkN4g3VkcIJDeoV3YWt1MgU"}'
2026-02-13 04:37:23.277 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:37:23.277 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-13 04:37:23.284 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:37:23.284 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-13_04-37-22__55c4d9a3-db14-41d1-b384-61c9ecb7abc8__wakuorg_nwaku:latest.log
2026-02-13 04:37:23.284 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:37:23.284 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:37:23.286 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:37:23.286 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.131.235
2026-02-13 04:37:23.286 DEBUG [src.node.docker_mananger] Generated ports ['12184', '12185', '12186', '12187', '12188']
2026-02-13 04:37:23.286 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:37:23.286 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:37:23.286 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:37:23.287 DEBUG [src.node.docker_mananger] docker run -i -t -p 12184:12184 -p 12185:12185 -p 12186:12186 -p 12187:12187 -p 12188:12188 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12186 --rest-port=12184 --tcp-port=12185 --discv5-udp-port=12187 --rest-address=0.0.0.0 --nat=extip:172.18.131.235 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3be97edfaeb12bb88fe6c49cbd82a3f22ce0bb5fc9d463f7edc5b5c5ecd6f42 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12188 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QCxISG10OhNn-akeJXPMlxwC6h3Bdo4durwHhUCd4zvSUrw65EWZAve1qanT5yK3wehdeRnHWVfr1A2XjZ6UVOECgmlkgnY0gmlwhKwSXaWKbXVsdGlhZGRyc5YACASsEl2lBkN4AAoErBJdpQZDed0DgnJzhQADAQAAiXNlY3AyNTZrMaECOb8HrQs6BrGGIe-t46TgjKVLmFjURb3tDxqRPc_rnhqDdGNwgkN4g3VkcIJDeoV3YWt1MgU --filternode=/ip4/172.18.93.165/tcp/17272/p2p/16Uiu2HAkyK6Acu275YeUrL5UqF7UxDSPMVksny6wbsUFuPP8CsWR
2026-02-13 04:37:23.482 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.131.235 waku f18fcbe3f42a7ad041d713b60e45b4c0a9b1308b29473e553584345c3c057634
2026-02-13 04:37:23.527 DEBUG [src.node.docker_mananger] Container started with ID f18fcbe3f42a. Setting up logs at ./log/docker/node2_2026-02-13_04-37-22__55c4d9a3-db14-41d1-b384-61c9ecb7abc8__wakuorg_nwaku:latest.log
2026-02-13 04:37:23.527 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12184
2026-02-13 04:37:23.528 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:37:24.529 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12184/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:24.533 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-13 04:37:24.533 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:37:24.533 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12184/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:24.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.235/tcp/12185/p2p/16Uiu2HAm73EHCD5KXXv9gcPWC1acMugj6MeZ1ra5NTGF6wbRxVEb","/ip4/172.18.131.235/tcp/12186/ws/p2p/16Uiu2HAm73EHCD5KXXv9gcPWC1acMugj6MeZ1ra5NTGF6wbRxVEb"],"enrUri":"enr:-L24QD3TWSK_mEJ8ltC7E3w34rvq3ORi3sj_CSqiIz1_1VinHT3347plS4fnrIVHZBnaP6b0bgckPluY2Ok2SBIctVICgmlkgnY0gmlwhKwSg-uKbXVsdGlhZGRyc5YACASsEoPrBi-ZAAoErBKD6wYvmt0DgnJzhQADAQAAiXNlY3AyNTZrMaECrIxn_6ReRtRFEJGPMDYpb20GSnABIH2LpY4axNHQ9FyDdGNwgi-Zg3VkcIIvm4V3YWt1MgA"}'
2026-02-13 04:37:24.536 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:37:24.536 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12184/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.93.165/tcp/17272/p2p/16Uiu2HAkyK6Acu275YeUrL5UqF7UxDSPMVksny6wbsUFuPP8CsWR"]'
2026-02-13 04:37:24.566 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:37:24.567 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-13 04:37:24.571 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17271/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-13 04:37:24.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:37:24.581 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12184/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "52afa4e5-e5b7-4188-b927-0c5c67198103", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-13 04:37:24.594 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"52afa4e5-e5b7-4188-b927-0c5c67198103","statusDesc":"OK"}'
2026-02-13 04:37:24.597 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:12184/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/2/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-13 04:37:24.606 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:12184/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2026-02-13 04:37:24.607 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17271/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-13 04:37:24.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:37:24.614 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-13 04:37:24.715 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-13 04:37:24.715 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12184/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:24.718 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770957444607801123,"ephemeral":false}]'
2026-02-13 04:37:24.721 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-13 04:37:24.722 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-13 04:37:24.722 DEBUG [src.node.waku_node] Stopping container with id e78ea1910a64
2026-02-13 04:37:24.972 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:37:24.973 DEBUG [src.node.waku_node] Stopping container with id f18fcbe3f42a
2026-02-13 04:37:25.225 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:37:25.228 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-13 04:37:25.238 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-13 04:37:25.244 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
