2026-02-13 04:40:50.981 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-13 04:40:50.982 DEBUG [tests.conftest] Running test: test_metrics_after_filter_get with id: 2026-02-13_04-40-50__0f640ef5-7fba-49c5-90a3-1cd8dcef883f
2026-02-13 04:40:50.982 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-13 04:40:50.982 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-13 04:40:50.983 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-13 04:40:50.983 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-13 04:40:50.983 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-13 04:40:50.983 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-13 04:40:50.989 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:40:50.989 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-13_04-40-50__0f640ef5-7fba-49c5-90a3-1cd8dcef883f__wakuorg_nwaku:latest.log
2026-02-13 04:40:50.989 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:40:50.989 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:40:50.991 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:40:50.991 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.165.52
2026-02-13 04:40:50.991 DEBUG [src.node.docker_mananger] Generated ports ['18815', '18816', '18817', '18818', '18819']
2026-02-13 04:40:50.991 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:40:50.991 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:40:50.991 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:40:50.991 DEBUG [src.node.docker_mananger] docker run -i -t -p 18815:18815 -p 18816:18816 -p 18817:18817 -p 18818:18818 -p 18819:18819 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18817 --rest-port=18815 --tcp-port=18816 --discv5-udp-port=18818 --rest-address=0.0.0.0 --nat=extip:172.18.165.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ffff5accd77946addb2e0aedb9e5576dfcfcf1befe432ec4da52b6c40d47130c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18819 --metrics-logging=true --relay=true --filter=true
2026-02-13 04:40:51.158 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.165.52 waku 9a220fcabfeb8cea1fd6fb3ae18a43a39ed0aeef7fea8ec126889aec6a4b1de2
2026-02-13 04:40:51.192 DEBUG [src.node.docker_mananger] Container started with ID 9a220fcabfeb. Setting up logs at ./log/docker/node1_2026-02-13_04-40-50__0f640ef5-7fba-49c5-90a3-1cd8dcef883f__wakuorg_nwaku:latest.log
2026-02-13 04:40:51.192 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18815
2026-02-13 04:40:51.192 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:40:51.792 ERROR [src.node.docker_mananger] Max retries reached for container f4b2a2545542. Exiting log stream.
2026-02-13 04:40:52.193 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18815/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:40:52.196 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:40:52.196 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:40:52.196 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18815/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:40:52.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.52/tcp/18816/p2p/16Uiu2HAkzDpykoKVw6Kve5WRZRQWzY5QwmdeC4XNKEPr5EXxBWPh","/ip4/172.18.165.52/tcp/18817/ws/p2p/16Uiu2HAkzDpykoKVw6Kve5WRZRQWzY5QwmdeC4XNKEPr5EXxBWPh"],"enrUri":"enr:-L24QLbsWgCGmKiPUF_SZLBVL5nvdqBhtBdnU2yQpgfDiRqMU5nf59nrtXp14aN9wEhsUthSImg0cHFLntysWVX9RiACgmlkgnY0gmlwhKwSpTSKbXVsdGlhZGRyc5YACASsEqU0BkmAAAoErBKlNAZJgd0DgnJzhQADAQAAiXNlY3AyNTZrMaECR0Gj-VSDysNiyGTM9e1eH0Riap9WXW6TBsNgmiB3GziDdGNwgkmAg3VkcIJJgoV3YWt1MgU"}'
2026-02-13 04:40:52.199 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:40:52.199 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-13 04:40:52.205 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:40:52.205 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-13_04-40-50__0f640ef5-7fba-49c5-90a3-1cd8dcef883f__wakuorg_nwaku:latest.log
2026-02-13 04:40:52.205 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:40:52.205 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:40:52.206 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:40:52.206 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.157.77
2026-02-13 04:40:52.207 DEBUG [src.node.docker_mananger] Generated ports ['39565', '39566', '39567', '39568', '39569']
2026-02-13 04:40:52.207 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:40:52.207 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:40:52.207 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:40:52.207 DEBUG [src.node.docker_mananger] docker run -i -t -p 39565:39565 -p 39566:39566 -p 39567:39567 -p 39568:39568 -p 39569:39569 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39567 --rest-port=39565 --tcp-port=39566 --discv5-udp-port=39568 --rest-address=0.0.0.0 --nat=extip:172.18.157.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8dac46d3e0d24a60bbacb2c01e4ec84af874f9d68af03cd00bf8f42979647f8b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39569 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QLbsWgCGmKiPUF_SZLBVL5nvdqBhtBdnU2yQpgfDiRqMU5nf59nrtXp14aN9wEhsUthSImg0cHFLntysWVX9RiACgmlkgnY0gmlwhKwSpTSKbXVsdGlhZGRyc5YACASsEqU0BkmAAAoErBKlNAZJgd0DgnJzhQADAQAAiXNlY3AyNTZrMaECR0Gj-VSDysNiyGTM9e1eH0Riap9WXW6TBsNgmiB3GziDdGNwgkmAg3VkcIJJgoV3YWt1MgU --filternode=/ip4/172.18.165.52/tcp/18816/p2p/16Uiu2HAkzDpykoKVw6Kve5WRZRQWzY5QwmdeC4XNKEPr5EXxBWPh
2026-02-13 04:40:52.362 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.157.77 waku 7d80d93775b6332d2124ff46fdd67a41f1384e4939ba1dce8787092ced479759
2026-02-13 04:40:52.396 DEBUG [src.node.docker_mananger] Container started with ID 7d80d93775b6. Setting up logs at ./log/docker/node2_2026-02-13_04-40-50__0f640ef5-7fba-49c5-90a3-1cd8dcef883f__wakuorg_nwaku:latest.log
2026-02-13 04:40:52.397 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39565
2026-02-13 04:40:52.397 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:40:53.397 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39565/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:40:53.401 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-13 04:40:53.401 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:40:53.401 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39565/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:40:53.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.77/tcp/39566/p2p/16Uiu2HAm5XgtZs7hhPgtK1KsSer48HWqCvpyUGrRVBBfTVJmKydg","/ip4/172.18.157.77/tcp/39567/ws/p2p/16Uiu2HAm5XgtZs7hhPgtK1KsSer48HWqCvpyUGrRVBBfTVJmKydg"],"enrUri":"enr:-L24QDRxtmAUhtuDh6EegAgbIMlvRU3Hh-afU7halL58drDQMuMd1ZXxsiBHsqNawJbTWMLvbVQ-rB2_4u8NH38xYxkCgmlkgnY0gmlwhKwSnU2KbXVsdGlhZGRyc5YACASsEp1NBpqOAAoErBKdTQaaj90DgnJzhQADAQAAiXNlY3AyNTZrMaEClh9iCFbaVuZHwaEJ5b_itOBhs9C4B6yETSz_RdbYH1-DdGNwgpqOg3VkcIKakIV3YWt1MgA"}'
2026-02-13 04:40:53.404 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:40:53.404 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39565/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.165.52/tcp/18816/p2p/16Uiu2HAkzDpykoKVw6Kve5WRZRQWzY5QwmdeC4XNKEPr5EXxBWPh"]'
2026-02-13 04:40:53.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:40:53.430 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-13 04:40:53.430 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18815/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-13 04:40:53.445 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:40:53.445 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39565/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ac29b64e-b776-488d-ab55-2f42c8f2fc5a", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-13 04:40:53.456 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ac29b64e-b776-488d-ab55-2f42c8f2fc5a","statusDesc":"OK"}'
2026-02-13 04:40:53.457 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18815/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-13 04:40:53.463 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:40:53.464 DEBUG [src.libs.common] Sleeping for 0.5 seconds
2026-02-13 04:40:53.964 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39565/filter/v2/messages/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:40:53.967 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770957653457337611,"ephemeral":false}]'
2026-02-13 04:40:53.967 DEBUG [src.libs.common] Sleeping for 5 seconds
2026-02-13 04:40:58.967 DEBUG [src.steps.metrics] Checking metric: libp2p_peers has 1
2026-02-13 04:40:58.972 DEBUG [src.steps.metrics] Found metric: libp2p_peers with value 1.0
2026-02-13 04:40:58.972 DEBUG [src.steps.metrics] Checking metric: libp2p_pubsub_peers has 1
2026-02-13 04:40:58.975 DEBUG [src.steps.metrics] Found metric: libp2p_pubsub_peers with value 1.0
2026-02-13 04:40:58.976 DEBUG [src.steps.metrics] Checking metric: libp2p_pubsub_topics has 1
2026-02-13 04:40:58.979 DEBUG [src.steps.metrics] Found metric: libp2p_pubsub_topics with value 2.0
2026-02-13 04:40:58.979 DEBUG [src.steps.metrics] Checking metric: libp2p_pubsub_subscriptions_total has 1
2026-02-13 04:40:58.982 DEBUG [src.steps.metrics] Found metric: libp2p_pubsub_subscriptions_total with value 2.0
2026-02-13 04:40:58.982 DEBUG [src.steps.metrics] Checking metric: waku_peer_store_size has 1
2026-02-13 04:40:58.985 DEBUG [src.steps.metrics] Found metric: waku_peer_store_size with value 1.0
2026-02-13 04:40:58.986 DEBUG [src.steps.metrics] Checking metric: waku_histogram_message_size_count has 1
2026-02-13 04:40:58.988 DEBUG [src.steps.metrics] Found metric: waku_histogram_message_size_count with value 1.0
2026-02-13 04:40:58.989 DEBUG [src.steps.metrics] Checking metric: waku_node_messages_total{type="relay"} has 1
2026-02-13 04:40:58.992 DEBUG [src.steps.metrics] Found metric: waku_node_messages_total{type="relay"} with value 1.0
2026-02-13 04:40:58.992 DEBUG [src.steps.metrics] Checking metric: waku_service_peers{protocol="/vac/waku/filter-subscribe/2.0.0-beta1",peerId="/ip4/172.18.165.52/tcp/18816"} has 1
2026-02-13 04:40:58.995 DEBUG [src.steps.metrics] Found metric: waku_service_peers{protocol="/vac/waku/filter-subscribe/2.0.0-beta1",peerId="/ip4/172.18.165.52/tcp/18816"} with value 1.0
2026-02-13 04:40:58.995 DEBUG [src.steps.metrics] Checking metric: libp2p_peers has 1
2026-02-13 04:40:58.998 DEBUG [src.steps.metrics] Found metric: libp2p_peers with value 1.0
2026-02-13 04:40:58.999 DEBUG [src.steps.metrics] Checking metric: libp2p_total_dial_attempts_total has 1
2026-02-13 04:40:59.001 DEBUG [src.steps.metrics] Found metric: libp2p_total_dial_attempts_total with value 1.0
2026-02-13 04:40:59.001 DEBUG [src.steps.metrics] Checking metric: waku_peer_store_size has 1
2026-02-13 04:40:59.004 DEBUG [src.steps.metrics] Found metric: waku_peer_store_size with value 1.0
2026-02-13 04:40:59.006 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-13 04:40:59.007 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-13 04:40:59.007 DEBUG [src.node.waku_node] Stopping container with id 9a220fcabfeb
2026-02-13 04:40:59.220 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:40:59.221 DEBUG [src.node.waku_node] Stopping container with id 7d80d93775b6
2026-02-13 04:40:59.445 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:40:59.446 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-13 04:40:59.455 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-13 04:40:59.459 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
