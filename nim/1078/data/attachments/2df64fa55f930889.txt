2026-02-13 04:41:06.264 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-13 04:41:06.264 DEBUG [tests.conftest] Running test: test_publish_with_valid_meta with id: 2026-02-13_04-41-06__37c15ac9-751f-4078-801f-79ab56ecf39e
2026-02-13 04:41:06.265 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-13 04:41:06.265 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-13 04:41:06.265 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-13 04:41:06.273 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:41:06.273 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-13_04-41-06__37c15ac9-751f-4078-801f-79ab56ecf39e__wakuorg_nwaku:latest.log
2026-02-13 04:41:06.274 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:41:06.274 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:41:06.275 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:41:06.275 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.240.171
2026-02-13 04:41:06.275 DEBUG [src.node.docker_mananger] Generated ports ['38138', '38139', '38140', '38141', '38142']
2026-02-13 04:41:06.276 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:41:06.276 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:41:06.276 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:41:06.276 DEBUG [src.node.docker_mananger] docker run -i -t -p 38138:38138 -p 38139:38139 -p 38140:38140 -p 38141:38141 -p 38142:38142 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38140 --rest-port=38138 --tcp-port=38139 --discv5-udp-port=38141 --rest-address=0.0.0.0 --nat=extip:172.18.240.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=06c1fc795bad956fdae0a07eff8c7ef4ebacfec1effac0eeec0ebad79f6184ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38142 --metrics-logging=true --relay=true
2026-02-13 04:41:06.432 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.240.171 waku ed70eed1fb772c25073f10855fb1915e737348619f791a484c8b95de137d932a
2026-02-13 04:41:06.464 DEBUG [src.node.docker_mananger] Container started with ID ed70eed1fb77. Setting up logs at ./log/docker/node1_2026-02-13_04-41-06__37c15ac9-751f-4078-801f-79ab56ecf39e__wakuorg_nwaku:latest.log
2026-02-13 04:41:06.464 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38138
2026-02-13 04:41:06.464 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:41:06.792 ERROR [src.node.docker_mananger] Max retries reached for container a56461aefa6b. Exiting log stream.
2026-02-13 04:41:07.083 ERROR [src.node.docker_mananger] Max retries reached for container 5a1b3f8e8758. Exiting log stream.
2026-02-13 04:41:07.465 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38138/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:07.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:41:07.468 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:41:07.468 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38138/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:07.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.240.171/tcp/38139/p2p/16Uiu2HAmCsfFsSPUsisVJ1iKQ127RA6osHYLxq1gbu1qZjmfC1bf","/ip4/172.18.240.171/tcp/38140/ws/p2p/16Uiu2HAmCsfFsSPUsisVJ1iKQ127RA6osHYLxq1gbu1qZjmfC1bf"],"enrUri":"enr:-L24QOzZ_m4VUJwALm_H352PdU2TmYtdyp0iD-ldn_nGL1PTWCNHFP-HlZd0icbfvKtETsgvxFlbIE0_4gRHEJleQScCgmlkgnY0gmlwhKwS8KuKbXVsdGlhZGRyc5YACASsEvCrBpT7AAoErBLwqwaU_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAz72JLwO_pUnlgtXbIXOsQicuqQ89e0gbcaGilXABfKDdGNwgpT7g3VkcIKU_YV3YWt1MgE"}'
2026-02-13 04:41:07.470 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:41:07.476 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:41:07.476 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-13_04-41-06__37c15ac9-751f-4078-801f-79ab56ecf39e__wakuorg_nwaku:latest.log
2026-02-13 04:41:07.476 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:41:07.476 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:41:07.478 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:41:07.478 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.192.239
2026-02-13 04:41:07.478 DEBUG [src.node.docker_mananger] Generated ports ['62742', '62743', '62744', '62745', '62746']
2026-02-13 04:41:07.478 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:41:07.478 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:41:07.478 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:41:07.478 DEBUG [src.node.docker_mananger] docker run -i -t -p 62742:62742 -p 62743:62743 -p 62744:62744 -p 62745:62745 -p 62746:62746 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62744 --rest-port=62742 --tcp-port=62743 --discv5-udp-port=62745 --rest-address=0.0.0.0 --nat=extip:172.18.192.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5aede0fc7b53c1bf48d0cacdabfecc2219d1e709bbca4cc079ba6de531cee89 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62746 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QOzZ_m4VUJwALm_H352PdU2TmYtdyp0iD-ldn_nGL1PTWCNHFP-HlZd0icbfvKtETsgvxFlbIE0_4gRHEJleQScCgmlkgnY0gmlwhKwS8KuKbXVsdGlhZGRyc5YACASsEvCrBpT7AAoErBLwqwaU_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAz72JLwO_pUnlgtXbIXOsQicuqQ89e0gbcaGilXABfKDdGNwgpT7g3VkcIKU_YV3YWt1MgE
2026-02-13 04:41:07.643 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.192.239 waku 384e5fbfbcb09dc361f37baf1846882c97b152918b0cbe49697842ecc1f5839a
2026-02-13 04:41:07.676 DEBUG [src.node.docker_mananger] Container started with ID 384e5fbfbcb0. Setting up logs at ./log/docker/node2_2026-02-13_04-41-06__37c15ac9-751f-4078-801f-79ab56ecf39e__wakuorg_nwaku:latest.log
2026-02-13 04:41:07.676 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62742
2026-02-13 04:41:07.676 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:41:08.677 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62742/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:08.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:41:08.684 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:41:08.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62742/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:08.690 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.239/tcp/62743/p2p/16Uiu2HAkzhafQvcdNUDq4eXJBUgsPSSvaAAzbmNNCiJPYskkAZvC","/ip4/172.18.192.239/tcp/62744/ws/p2p/16Uiu2HAkzhafQvcdNUDq4eXJBUgsPSSvaAAzbmNNCiJPYskkAZvC"],"enrUri":"enr:-L24QJ_3SlC6qpzHGrkSBTN3W43EJcpcr1wMptvBxwgKXw6wFz4Zd0Fk5qkCAOFyOJqoidqkg73jEN-jejL3NfNmSBACgmlkgnY0gmlwhKwSwO-KbXVsdGlhZGRyc5YACASsEsDvBvUXAAoErBLA7wb1GN0DgnJzhQADAQAAiXNlY3AyNTZrMaECTl23OqePYq0OpD0tW1ypzVtMwwpOshvOjXkSDMA_CYWDdGNwgvUXg3VkcIL1GYV3YWt1MgE"}'
2026-02-13 04:41:08.690 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:41:08.691 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62742/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.240.171/tcp/38139/p2p/16Uiu2HAmCsfFsSPUsisVJ1iKQ127RA6osHYLxq1gbu1qZjmfC1bf"]'
2026-02-13 04:41:08.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:41:08.694 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-13 04:41:08.695 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38138/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-13 04:41:08.698 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:41:08.699 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62742/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-13 04:41:08.703 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:41:08.704 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38138/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-13 04:41:08.709 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:41:08.710 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-13 04:41:08.810 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-13 04:41:08.810 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38138/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:08.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770957668704153856,"ephemeral":false,"proof":""}]'
2026-02-13 04:41:08.814 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-13 04:41:08.814 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62742/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:08.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770957668704153856,"ephemeral":false,"proof":""}]'
2026-02-13 04:41:08.818 INFO [src.steps.relay] WARM UP successful!!
2026-02-13 04:41:08.819 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38138/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)', "meta": "UmVsYXkgd29ya3MhIQ=="}'
2026-02-13 04:41:08.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:41:08.824 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-13 04:41:08.924 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-13 04:41:08.924 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38138/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:08.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770957668819494775,"meta":"UmVsYXkgd29ya3MhIQ==","ephemeral":false,"proof":""}]'
2026-02-13 04:41:08.928 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-13 04:41:08.928 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62742/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:41:08.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770957668819494775,"meta":"UmVsYXkgd29ya3MhIQ==","ephemeral":false,"proof":""}]'
2026-02-13 04:41:08.933 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-13 04:41:08.934 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-13 04:41:08.935 DEBUG [src.node.waku_node] Stopping container with id ed70eed1fb77
2026-02-13 04:41:09.159 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:41:09.160 DEBUG [src.node.waku_node] Stopping container with id 384e5fbfbcb0
2026-02-13 04:41:09.377 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:41:09.379 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-13 04:41:09.391 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-13 04:41:09.397 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
