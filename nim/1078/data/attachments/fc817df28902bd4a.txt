2026-02-13 04:39:35.851 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-13 04:39:35.852 DEBUG [tests.conftest] Running test: test_single_content_topic[/app/22/sometopic/someencoding] with id: 2026-02-13_04-39-35__c62f74cb-7d3a-414a-8da4-eb048c86b786
2026-02-13 04:39:35.852 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-13 04:39:35.852 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-13 04:39:35.852 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-13 04:39:35.860 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:39:35.860 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-13_04-39-35__c62f74cb-7d3a-414a-8da4-eb048c86b786__wakuorg_nwaku:latest.log
2026-02-13 04:39:35.860 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:39:35.860 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:39:35.862 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:39:35.862 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.129.28
2026-02-13 04:39:35.862 DEBUG [src.node.docker_mananger] Generated ports ['60679', '60680', '60681', '60682', '60683']
2026-02-13 04:39:35.862 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:39:35.863 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:39:35.863 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:39:35.863 DEBUG [src.node.docker_mananger] docker run -i -t -p 60679:60679 -p 60680:60680 -p 60681:60681 -p 60682:60682 -p 60683:60683 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60681 --rest-port=60679 --tcp-port=60680 --discv5-udp-port=60682 --rest-address=0.0.0.0 --nat=extip:172.18.129.28 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c344d889fd8ae77b416ea498aad6c47978ea28d9bc9f6dc78bb646c5e1ace67a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60683 --metrics-logging=true --relay=true --filter=true --content-topic=/app/22/sometopic/someencoding
2026-02-13 04:39:36.067 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.129.28 waku 82280c4009e7bfb3a0ff512330cf71995c9201d87526e06401d609384f6590d5
2026-02-13 04:39:36.080 ERROR [src.node.docker_mananger] Max retries reached for container 602c9ebde911. Exiting log stream.
2026-02-13 04:39:36.118 DEBUG [src.node.docker_mananger] Container started with ID 82280c4009e7. Setting up logs at ./log/docker/node1_2026-02-13_04-39-35__c62f74cb-7d3a-414a-8da4-eb048c86b786__wakuorg_nwaku:latest.log
2026-02-13 04:39:36.119 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60679
2026-02-13 04:39:36.119 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:39:36.348 ERROR [src.node.docker_mananger] Max retries reached for container fb060a91e6dd. Exiting log stream.
2026-02-13 04:39:36.659 ERROR [src.node.docker_mananger] Max retries reached for container 5a9ff3c752c4. Exiting log stream.
2026-02-13 04:39:37.119 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60679/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:37.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:39:37.123 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:39:37.123 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60679/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:37.126 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.28/tcp/60680/p2p/16Uiu2HAm9orFWgywhrDFNpiDc6MhSqgWMwnS72Kfvyjv2NRFPsq6","/ip4/172.18.129.28/tcp/60681/ws/p2p/16Uiu2HAm9orFWgywhrDFNpiDc6MhSqgWMwnS72Kfvyjv2NRFPsq6"],"enrUri":"enr:-L24QCNzFmGGlaqQmT22rktGUlCIXgo1cUgis69ZJ9LigLztFl8p48CIUFQGeGBHtaaOTc0Ik7JUUU8uQjfUkpUZvhQCgmlkgnY0gmlwhKwSgRyKbXVsdGlhZGRyc5YACASsEoEcBu0IAAoErBKBHAbtCd0DgnJzhQACAQAAiXNlY3AyNTZrMaEC1bICHJE2LKfuRSJcrGoJJ0oanYLh1wvzmSW8oQU0x_2DdGNwgu0Ig3VkcILtCoV3YWt1MgU"}'
2026-02-13 04:39:37.126 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:39:37.133 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:39:37.133 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-13_04-39-35__c62f74cb-7d3a-414a-8da4-eb048c86b786__wakuorg_nwaku:latest.log
2026-02-13 04:39:37.134 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:39:37.134 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:39:37.135 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:39:37.135 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.129.112
2026-02-13 04:39:37.135 DEBUG [src.node.docker_mananger] Generated ports ['3261', '3262', '3263', '3264', '3265']
2026-02-13 04:39:37.136 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:39:37.136 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:39:37.136 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:39:37.136 DEBUG [src.node.docker_mananger] docker run -i -t -p 3261:3261 -p 3262:3262 -p 3263:3263 -p 3264:3264 -p 3265:3265 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3263 --rest-port=3261 --tcp-port=3262 --discv5-udp-port=3264 --rest-address=0.0.0.0 --nat=extip:172.18.129.112 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ccbeb056ac717cd9b9cfb4f3eb7de7d4bccdb7667a34d9cbbe48bba4cae5f9eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3265 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCNzFmGGlaqQmT22rktGUlCIXgo1cUgis69ZJ9LigLztFl8p48CIUFQGeGBHtaaOTc0Ik7JUUU8uQjfUkpUZvhQCgmlkgnY0gmlwhKwSgRyKbXVsdGlhZGRyc5YACASsEoEcBu0IAAoErBKBHAbtCd0DgnJzhQACAQAAiXNlY3AyNTZrMaEC1bICHJE2LKfuRSJcrGoJJ0oanYLh1wvzmSW8oQU0x_2DdGNwgu0Ig3VkcILtCoV3YWt1MgU --content-topic=/app/22/sometopic/someencoding
2026-02-13 04:39:37.344 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.129.112 waku 0124d7f3f6e12c00068d8223e389405cb062e1aa751756bf459538e365208fb0
2026-02-13 04:39:37.393 DEBUG [src.node.docker_mananger] Container started with ID 0124d7f3f6e1. Setting up logs at ./log/docker/node2_2026-02-13_04-39-35__c62f74cb-7d3a-414a-8da4-eb048c86b786__wakuorg_nwaku:latest.log
2026-02-13 04:39:37.394 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3261
2026-02-13 04:39:37.395 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:39:38.396 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3261/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:38.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-13 04:39:38.405 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:39:38.406 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3261/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:38.410 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.112/tcp/3262/p2p/16Uiu2HAmT6HzSPmyWLC5hxDaTPmTeXgeuYCKaNWsumDLY83vXrnX","/ip4/172.18.129.112/tcp/3263/ws/p2p/16Uiu2HAmT6HzSPmyWLC5hxDaTPmTeXgeuYCKaNWsumDLY83vXrnX"],"enrUri":"enr:-L24QI9OapC0K8jA9pE4G7CAx4mEQIGYZvR5Wq5cumlHyioKZMvGpRvPGYfcY4WeMXDasmHOCR1iqkS4Kst3R_a1ksQCgmlkgnY0gmlwhKwSgXCKbXVsdGlhZGRyc5YACASsEoFwBgy-AAoErBKBcAYMv90DgnJzhQACAQAAiXNlY3AyNTZrMaED1n8VV5dFHzZuTrGnJIsAaz-GAmuhIsTyIFjsq7FbyrSDdGNwggy-g3VkcIIMwIV3YWt1MgE"}'
2026-02-13 04:39:38.410 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:39:38.410 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3261/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.129.28/tcp/60680/p2p/16Uiu2HAm9orFWgywhrDFNpiDc6MhSqgWMwnS72Kfvyjv2NRFPsq6"]'
2026-02-13 04:39:38.413 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:38.413 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60679/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/22/sometopic/someencoding"]'
2026-02-13 04:39:38.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:38.416 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3261/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/22/sometopic/someencoding"]'
2026-02-13 04:39:38.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:38.419 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60679/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-13 04:39:38.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:38.424 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-13 04:39:38.524 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-13 04:39:38.525 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60679/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:38.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1770957578419307179,"ephemeral":false,"proof":""}]'
2026-02-13 04:39:38.529 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-13 04:39:38.530 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3261/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:38.532 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1770957578419307179,"ephemeral":false,"proof":""}]'
2026-02-13 04:39:38.535 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-13 04:39:38.536 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-13 04:39:38.536 DEBUG [src.node.waku_node] Stopping container with id 82280c4009e7
2026-02-13 04:39:38.831 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:39:38.832 DEBUG [src.node.waku_node] Stopping container with id 0124d7f3f6e1
2026-02-13 04:39:39.092 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:39:39.094 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-13 04:39:39.104 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-13 04:39:39.110 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
