2026-02-13 04:37:23.539 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-13 04:37:23.540 DEBUG [tests.conftest] Running test: test_relay_different_latency_between_two_nodes[5000] with id: 2026-02-13_04-37-23__3d0a0238-c5bd-4d27-ab21-e4c3f98f6a33
2026-02-13 04:37:23.540 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-13 04:37:23.540 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-13 04:37:23.549 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:37:23.549 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-13_04-37-23__3d0a0238-c5bd-4d27-ab21-e4c3f98f6a33__wakuorg_nwaku:latest.log
2026-02-13 04:37:23.555 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:37:23.555 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-13_04-37-23__3d0a0238-c5bd-4d27-ab21-e4c3f98f6a33__wakuorg_nwaku:latest.log
2026-02-13 04:37:23.556 INFO [tests.e2e.test_network_conditions] Starting node1 and node2 with relay enabled
2026-02-13 04:37:23.556 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:37:23.556 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:37:23.585 DEBUG [src.node.docker_mananger] Network waku created
2026-02-13 04:37:23.586 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.96.98
2026-02-13 04:37:23.586 DEBUG [src.node.docker_mananger] Generated ports ['18453', '18454', '18455', '18456', '18457']
2026-02-13 04:37:23.586 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:37:23.586 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:37:23.586 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:37:23.586 DEBUG [src.node.docker_mananger] docker run -i -t -p 18453:18453 -p 18454:18454 -p 18455:18455 -p 18456:18456 -p 18457:18457 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18455 --rest-port=18453 --tcp-port=18454 --discv5-udp-port=18456 --rest-address=0.0.0.0 --nat=extip:172.18.96.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=35e8c704c68b5ab479eaaadc7358aef7d8703aa2befea0a7e387cebabccd50cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18457 --metrics-logging=true --relay=true
2026-02-13 04:37:26.879 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.96.98 waku 0fda553d2740ca8a91dafd4b2914b3ecb3a183e7d88a2894f44a991c09921ce6
2026-02-13 04:37:26.911 DEBUG [src.node.docker_mananger] Container started with ID 0fda553d2740. Setting up logs at ./log/docker/node1_2026-02-13_04-37-23__3d0a0238-c5bd-4d27-ab21-e4c3f98f6a33__wakuorg_nwaku:latest.log
2026-02-13 04:37:26.911 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18453
2026-02-13 04:37:26.911 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:37:27.912 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18453/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:27.920 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:37:27.920 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:37:27.920 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18453/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:27.923 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.98/tcp/18454/p2p/16Uiu2HAmSgubM137J8VPn9sSjgxvPZaPNGtec1WvFn7DGW3pTvVL","/ip4/172.18.96.98/tcp/18455/ws/p2p/16Uiu2HAmSgubM137J8VPn9sSjgxvPZaPNGtec1WvFn7DGW3pTvVL"],"enrUri":"enr:-L24QGbmGc8dmNc9nDHamBZxH03nousP_Z9rfCwytAhd6F_jH8T1khin2ltA7rVvvQoX81jScAjzLqJzVRMfGHAXHU8CgmlkgnY0gmlwhKwSYGKKbXVsdGlhZGRyc5YACASsEmBiBkgWAAoErBJgYgZIF90DgnJzhQADAQAAiXNlY3AyNTZrMaED0IFmKm3Y91VcbMOk77llOVFc7Z0B3Kh_d4CcafL9Bt-DdGNwgkgWg3VkcIJIGIV3YWt1MgE"}'
2026-02-13 04:37:27.923 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:37:27.923 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:37:27.923 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:37:27.925 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:37:27.925 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.83.35
2026-02-13 04:37:27.925 DEBUG [src.node.docker_mananger] Generated ports ['37445', '37446', '37447', '37448', '37449']
2026-02-13 04:37:27.925 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:37:27.926 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:37:27.926 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:37:27.926 DEBUG [src.node.docker_mananger] docker run -i -t -p 37445:37445 -p 37446:37446 -p 37447:37447 -p 37448:37448 -p 37449:37449 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37447 --rest-port=37445 --tcp-port=37446 --discv5-udp-port=37448 --rest-address=0.0.0.0 --nat=extip:172.18.83.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6a9af9dd07ac2c13fd1396d8ae6bd24d1f1a429a98c5bea70cd72e4da51a74fe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37449 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGbmGc8dmNc9nDHamBZxH03nousP_Z9rfCwytAhd6F_jH8T1khin2ltA7rVvvQoX81jScAjzLqJzVRMfGHAXHU8CgmlkgnY0gmlwhKwSYGKKbXVsdGlhZGRyc5YACASsEmBiBkgWAAoErBJgYgZIF90DgnJzhQADAQAAiXNlY3AyNTZrMaED0IFmKm3Y91VcbMOk77llOVFc7Z0B3Kh_d4CcafL9Bt-DdGNwgkgWg3VkcIJIGIV3YWt1MgE
2026-02-13 04:37:28.086 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.83.35 waku 92c4788281013969cc70c5e6ac4bb0cdb98d53ee325b5ff757666f1263ca20c9
2026-02-13 04:37:28.117 DEBUG [src.node.docker_mananger] Container started with ID 92c478828101. Setting up logs at ./log/docker/node2_2026-02-13_04-37-23__3d0a0238-c5bd-4d27-ab21-e4c3f98f6a33__wakuorg_nwaku:latest.log
2026-02-13 04:37:28.117 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37445
2026-02-13 04:37:28.117 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:37:29.118 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37445/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:29.126 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:37:29.130 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:37:29.130 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37445/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:29.133 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.83.35/tcp/37446/p2p/16Uiu2HAmDaP6kbe5HQBAFzqaA4DDebQeJ5tVRTLQeddnToHVLxp8","/ip4/172.18.83.35/tcp/37447/ws/p2p/16Uiu2HAmDaP6kbe5HQBAFzqaA4DDebQeJ5tVRTLQeddnToHVLxp8"],"enrUri":"enr:-L24QL4YR7RanEIMrr3V-3isnTz8uDskUnjuNmt8SkhvMPQpZt5LoTVoq5HSoUQcXRg2qWC8m_FggE7pD2AGYFq_ZAcCgmlkgnY0gmlwhKwSUyOKbXVsdGlhZGRyc5YACASsElMjBpJGAAoErBJTIwaSR90DgnJzhQADAQAAiXNlY3AyNTZrMaEDDa2BcuGmMS6l4vGVhl5j93wmPFKexCtxxhoCyfKjA6GDdGNwgpJGg3VkcIKSSIV3YWt1MgE"}'
2026-02-13 04:37:29.133 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:37:29.133 INFO [tests.e2e.test_network_conditions] Subscribing both nodes to relay topic
2026-02-13 04:37:29.134 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18453/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-13 04:37:29.137 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:37:29.137 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37445/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-13 04:37:29.142 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:37:29.142 INFO [tests.e2e.test_network_conditions] Waiting for autoconnection
2026-02-13 04:37:29.142 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18453/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:29.145 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.83.35/tcp/55746/p2p/16Uiu2HAmDaP6kbe5HQBAFzqaA4DDebQeJ5tVRTLQeddnToHVLxp8","protocols":["/ipfs/id/1.0.0","/libp2p/autonat/1.0.0","/libp2p/circuit/relay/0.2.0/hop","/vac/waku/metadata/1.0.0","/vac/waku/relay/2.0.0","/vac/waku/rendezvous/1.0.0","/ipfs/ping/1.0.0","/vac/waku/filter-push/2.0.0-beta1","/vac/waku/peer-exchange/2.0.0-alpha1"],"shards":[0],"connected":"Connected","agent":"nwaku-v0.36.0-127-ga4e44d","origin":"UnknownOrigin"}]'
2026-02-13 04:37:29.145 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37445/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:29.147 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.96.98/tcp/18454/p2p/16Uiu2HAmSgubM137J8VPn9sSjgxvPZaPNGtec1WvFn7DGW3pTvVL","protocols":["/ipfs/id/1.0.0","/libp2p/autonat/1.0.0","/libp2p/circuit/relay/0.2.0/hop","/vac/waku/metadata/1.0.0","/vac/waku/relay/2.0.0","/vac/waku/rendezvous/1.0.0","/ipfs/ping/1.0.0","/vac/waku/filter-push/2.0.0-beta1","/vac/waku/peer-exchange/2.0.0-alpha1"],"shards":[0],"connected":"Connected","agent":"nwaku-v0.36.0-127-ga4e44d","origin":"Discv5"}]'
2026-02-13 04:37:29.147 DEBUG [src.libs.common] Sleeping for 10 seconds
2026-02-13 04:37:39.148 INFO [tests.e2e.test_network_conditions] Applying 5000ms latency to node2
2026-02-13 04:37:39.149 INFO [src.steps.network_conditions] TC exec: ['sudo', '-n', 'nsenter', '-t', '2941', '-n', 'tc', 'qdisc', 'del', 'dev', 'eth0', 'root']
2026-02-13 04:37:39.204 INFO [src.steps.network_conditions] TC exec: ['sudo', '-n', 'nsenter', '-t', '2941', '-n', 'tc', 'qdisc', 'del', 'dev', 'eth0', 'root']
2026-02-13 04:37:39.212 INFO [src.steps.network_conditions] TC exec: ['sudo', '-n', 'nsenter', '-t', '2941', '-n', 'tc', 'qdisc', 'add', 'dev', 'eth0', 'root', 'netem', 'delay', '5000ms']
2026-02-13 04:37:39.223 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18453/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-13 04:37:39.227 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:37:39.227 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37445/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:37:49.230 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770957459222995806,"ephemeral":false,"proof":""}]'
2026-02-13 04:37:49.232 INFO [src.steps.network_conditions] TC exec: ['sudo', '-n', 'nsenter', '-t', '2941', '-n', 'tc', 'qdisc', 'del', 'dev', 'eth0', 'root']
2026-02-13 04:37:49.241 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-13 04:37:49.242 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-13 04:37:49.242 DEBUG [src.node.waku_node] Stopping container with id 0fda553d2740
2026-02-13 04:37:49.452 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:37:49.452 DEBUG [src.node.waku_node] Stopping container with id 92c478828101
2026-02-13 04:37:49.661 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:37:49.663 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-13 04:37:49.687 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-13 04:37:49.700 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
