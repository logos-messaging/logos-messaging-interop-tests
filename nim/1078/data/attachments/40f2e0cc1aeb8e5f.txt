2026-02-13 04:39:28.744 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-13 04:39:28.744 DEBUG [tests.conftest] Running test: test_single_pubsub_topic[/waku/2/rs/8/0] with id: 2026-02-13_04-39-28__e3eed11c-d83a-4ad2-93f8-ad65fac01a26
2026-02-13 04:39:28.744 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-13 04:39:28.744 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-13 04:39:28.744 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-13 04:39:28.751 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:39:28.752 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-13_04-39-28__e3eed11c-d83a-4ad2-93f8-ad65fac01a26__wakuorg_nwaku:latest.log
2026-02-13 04:39:28.752 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:39:28.752 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:39:28.753 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:39:28.753 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.181.102
2026-02-13 04:39:28.754 DEBUG [src.node.docker_mananger] Generated ports ['41651', '41652', '41653', '41654', '41655']
2026-02-13 04:39:28.754 DEBUG [src.node.waku_node] Cluster id was resolved to: 8
2026-02-13 04:39:28.754 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-13 04:39:28.754 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:39:28.754 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:39:28.754 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:39:28.754 DEBUG [src.node.docker_mananger] docker run -i -t -p 41651:41651 -p 41652:41652 -p 41653:41653 -p 41654:41654 -p 41655:41655 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41653 --rest-port=41651 --tcp-port=41652 --discv5-udp-port=41654 --rest-address=0.0.0.0 --nat=extip:172.18.181.102 --peer-exchange=true --discv5-discovery=true --cluster-id=8 --nodekey=657cadebf1928cea380a7ffa6e9473ccecca32a87ddad0214f41fee58e05ddc4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41655 --metrics-logging=true --relay=true --filter=true
2026-02-13 04:39:28.919 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.181.102 waku c2f39fe695af4fd0970bed71d0e4a3a92650e21c6c0c148ab3f3c139bfd9ff99
2026-02-13 04:39:28.953 DEBUG [src.node.docker_mananger] Container started with ID c2f39fe695af. Setting up logs at ./log/docker/node1_2026-02-13_04-39-28__e3eed11c-d83a-4ad2-93f8-ad65fac01a26__wakuorg_nwaku:latest.log
2026-02-13 04:39:28.954 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41651
2026-02-13 04:39:28.954 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:39:29.320 ERROR [src.node.docker_mananger] Max retries reached for container 1cba19e345d8. Exiting log stream.
2026-02-13 04:39:29.537 ERROR [src.node.docker_mananger] Max retries reached for container 3e37430be09f. Exiting log stream.
2026-02-13 04:39:29.954 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41651/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:29.957 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:39:29.958 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:39:29.958 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41651/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:29.960 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.102/tcp/41652/p2p/16Uiu2HAmV1qTX18QwbcpEiqKac9G2pcQRaCSfZcFpm4scN7Hsm6y","/ip4/172.18.181.102/tcp/41653/ws/p2p/16Uiu2HAmV1qTX18QwbcpEiqKac9G2pcQRaCSfZcFpm4scN7Hsm6y"],"enrUri":"enr:-L24QDPWsU9YVCYHuWCX7n4YLmlGpsTjjsL7_-YVPz2JcJL0d0kf_8S6edg2Ts6_PlvaltxuqKgupsT1GAQTw4n1nqYCgmlkgnY0gmlwhKwStWaKbXVsdGlhZGRyc5YACASsErVmBqK0AAoErBK1Zgaitd0DgnJzhQAIAQAAiXNlY3AyNTZrMaED8xIiBZ5HXnTPC6chIef5VKJ_WWOoPM_Ocyxjq6yMzNqDdGNwgqK0g3VkcIKitoV3YWt1MgU"}'
2026-02-13 04:39:29.960 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:39:29.966 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:39:29.967 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-13_04-39-28__e3eed11c-d83a-4ad2-93f8-ad65fac01a26__wakuorg_nwaku:latest.log
2026-02-13 04:39:29.967 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:39:29.967 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:39:29.968 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:39:29.968 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.48.54
2026-02-13 04:39:29.968 DEBUG [src.node.docker_mananger] Generated ports ['8707', '8708', '8709', '8710', '8711']
2026-02-13 04:39:29.969 DEBUG [src.node.waku_node] Cluster id was resolved to: 8
2026-02-13 04:39:29.969 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-13 04:39:29.969 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:39:29.969 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:39:29.969 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:39:29.969 DEBUG [src.node.docker_mananger] docker run -i -t -p 8707:8707 -p 8708:8708 -p 8709:8709 -p 8710:8710 -p 8711:8711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8709 --rest-port=8707 --tcp-port=8708 --discv5-udp-port=8710 --rest-address=0.0.0.0 --nat=extip:172.18.48.54 --peer-exchange=true --discv5-discovery=true --cluster-id=8 --nodekey=cedc6a6bfc3a9e0efc6b826b13e58cf33cf2ffaa97b7bc93b0debee2ba4cbc4a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8711 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QDPWsU9YVCYHuWCX7n4YLmlGpsTjjsL7_-YVPz2JcJL0d0kf_8S6edg2Ts6_PlvaltxuqKgupsT1GAQTw4n1nqYCgmlkgnY0gmlwhKwStWaKbXVsdGlhZGRyc5YACASsErVmBqK0AAoErBK1Zgaitd0DgnJzhQAIAQAAiXNlY3AyNTZrMaED8xIiBZ5HXnTPC6chIef5VKJ_WWOoPM_Ocyxjq6yMzNqDdGNwgqK0g3VkcIKitoV3YWt1MgU
2026-02-13 04:39:30.140 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.48.54 waku f43e33f6466eceeeda958577d52494f13df28dbb1c8ce6fe533be7960ef064a2
2026-02-13 04:39:30.176 DEBUG [src.node.docker_mananger] Container started with ID f43e33f6466e. Setting up logs at ./log/docker/node2_2026-02-13_04-39-28__e3eed11c-d83a-4ad2-93f8-ad65fac01a26__wakuorg_nwaku:latest.log
2026-02-13 04:39:30.176 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8707
2026-02-13 04:39:30.176 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:39:31.176 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8707/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:31.188 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-13 04:39:31.189 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:39:31.189 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:31.194 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.54/tcp/8708/p2p/16Uiu2HAmVs61aih7BaLBJdRcJuoZtaERvY51uhfCqcQwAzPkTVzz","/ip4/172.18.48.54/tcp/8709/ws/p2p/16Uiu2HAmVs61aih7BaLBJdRcJuoZtaERvY51uhfCqcQwAzPkTVzz"],"enrUri":"enr:-L24QHbo_zNDCTTzT5UU8pDlBIzbgkxEcAVpPgcI1AnBdzrBXENn2mDGVOKpWzEJS304Aq8-QmDucJ8rxV_7_3NuPPgCgmlkgnY0gmlwhKwSMDaKbXVsdGlhZGRyc5YACASsEjA2BiIEAAoErBIwNgYiBd0DgnJzhQAIAQAAiXNlY3AyNTZrMaED_7AMJ5aRTRDDa3nNuPht2hsX7aURFhJh70bUVUqOXVODdGNwgiIEg3VkcIIiBoV3YWt1MgE"}'
2026-02-13 04:39:31.195 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:39:31.195 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8707/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.181.102/tcp/41652/p2p/16Uiu2HAmV1qTX18QwbcpEiqKac9G2pcQRaCSfZcFpm4scN7Hsm6y"]'
2026-02-13 04:39:31.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:31.198 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41651/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/8/0"]'
2026-02-13 04:39:31.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:31.201 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8707/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/8/0"]'
2026-02-13 04:39:31.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:31.204 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41651/relay/v1/messages/%2Fwaku%2F2%2Frs%2F8%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-13 04:39:31.208 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:39:31.208 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-13 04:39:31.309 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-13 04:39:31.310 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41651/relay/v1/messages/%2Fwaku%2F2%2Frs%2F8%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:31.312 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770957571204084346,"ephemeral":false,"proof":""}]'
2026-02-13 04:39:31.314 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-13 04:39:31.314 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8707/relay/v1/messages/%2Fwaku%2F2%2Frs%2F8%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:39:31.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770957571204084346,"ephemeral":false,"proof":""}]'
2026-02-13 04:39:31.319 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-13 04:39:31.320 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-13 04:39:31.320 DEBUG [src.node.waku_node] Stopping container with id c2f39fe695af
2026-02-13 04:39:31.568 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:39:31.569 DEBUG [src.node.waku_node] Stopping container with id f43e33f6466e
2026-02-13 04:39:31.780 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:39:31.783 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-13 04:39:31.788 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-13 04:39:31.794 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
