2026-02-13 04:40:24.477 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-13 04:40:24.478 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_pubsub_topic_from_another_cluster_id with id: 2026-02-13_04-40-24__b063d85c-c4d3-4315-b9e0-95920bc76b47
2026-02-13 04:40:24.478 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-13 04:40:24.479 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-13 04:40:24.479 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-13 04:40:24.487 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:40:24.488 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-13_04-40-24__b063d85c-c4d3-4315-b9e0-95920bc76b47__wakuorg_nwaku:latest.log
2026-02-13 04:40:24.488 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:40:24.488 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:40:24.490 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:40:24.490 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.74.219
2026-02-13 04:40:24.491 DEBUG [src.node.docker_mananger] Generated ports ['22977', '22978', '22979', '22980', '22981']
2026-02-13 04:40:24.491 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:40:24.491 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:40:24.491 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:40:24.491 DEBUG [src.node.docker_mananger] docker run -i -t -p 22977:22977 -p 22978:22978 -p 22979:22979 -p 22980:22980 -p 22981:22981 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22979 --rest-port=22977 --tcp-port=22978 --discv5-udp-port=22980 --rest-address=0.0.0.0 --nat=extip:172.18.74.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9095ec5bcd006aa7f25fdb78ee1c7fefed4ec72e585911e2d0e0c479e64c68ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22981 --metrics-logging=true --relay=true --filter=true
2026-02-13 04:40:24.558 ERROR [src.node.docker_mananger] Max retries reached for container 78100ef5a946. Exiting log stream.
2026-02-13 04:40:24.562 ERROR [src.node.docker_mananger] Max retries reached for container 92684466b014. Exiting log stream.
2026-02-13 04:40:24.690 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.74.219 waku 13b872a0d5aaec92d7ad6cca96197de33a1e972c0c552e9b2dc21898a773a0c6
2026-02-13 04:40:24.734 DEBUG [src.node.docker_mananger] Container started with ID 13b872a0d5aa. Setting up logs at ./log/docker/node1_2026-02-13_04-40-24__b063d85c-c4d3-4315-b9e0-95920bc76b47__wakuorg_nwaku:latest.log
2026-02-13 04:40:24.735 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22977
2026-02-13 04:40:24.737 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:40:25.628 ERROR [src.node.docker_mananger] Max retries reached for container 55481ff29139. Exiting log stream.
2026-02-13 04:40:25.737 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22977/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:40:25.740 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-13 04:40:25.741 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:40:25.741 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22977/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:40:25.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.219/tcp/22978/p2p/16Uiu2HAmPWBkTFHmH2jJbcjyTbDyXrNodsC6C8NkTogrwryRtxyJ","/ip4/172.18.74.219/tcp/22979/ws/p2p/16Uiu2HAmPWBkTFHmH2jJbcjyTbDyXrNodsC6C8NkTogrwryRtxyJ"],"enrUri":"enr:-L24QHHVHEgWf75KIS4tDgfg_N1aZ3m9jhFotbT-erdB_mbHRbT-ZbR7XVYhTDd7ZgxWjlQXv_PIjWRfp-PZyB9xhjYCgmlkgnY0gmlwhKwSStuKbXVsdGlhZGRyc5YACASsEkrbBlnCAAoErBJK2wZZw90DgnJzhQADAQAAiXNlY3AyNTZrMaEDoS833RIwsJi1fyd1E1Bm3AuBHy9ILdKlfGd2NlsY8jWDdGNwglnCg3VkcIJZxIV3YWt1MgU"}'
2026-02-13 04:40:25.743 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:40:25.744 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-13 04:40:25.749 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-13 04:40:25.750 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-13_04-40-24__b063d85c-c4d3-4315-b9e0-95920bc76b47__wakuorg_nwaku:latest.log
2026-02-13 04:40:25.750 DEBUG [src.node.waku_node] Starting Node...
2026-02-13 04:40:25.750 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-13 04:40:25.751 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-13 04:40:25.751 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.46.195
2026-02-13 04:40:25.751 DEBUG [src.node.docker_mananger] Generated ports ['39277', '39278', '39279', '39280', '39281']
2026-02-13 04:40:25.752 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-13 04:40:25.752 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-13 04:40:25.752 DEBUG [src.node.waku_node] Using volumes []
2026-02-13 04:40:25.752 DEBUG [src.node.docker_mananger] docker run -i -t -p 39277:39277 -p 39278:39278 -p 39279:39279 -p 39280:39280 -p 39281:39281 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39279 --rest-port=39277 --tcp-port=39278 --discv5-udp-port=39280 --rest-address=0.0.0.0 --nat=extip:172.18.46.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4d626f8482e1dca8dc1e60cca819e5f1ce164e4efddf7ba3ebead03ad06a0a80 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39281 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHHVHEgWf75KIS4tDgfg_N1aZ3m9jhFotbT-erdB_mbHRbT-ZbR7XVYhTDd7ZgxWjlQXv_PIjWRfp-PZyB9xhjYCgmlkgnY0gmlwhKwSStuKbXVsdGlhZGRyc5YACASsEkrbBlnCAAoErBJK2wZZw90DgnJzhQADAQAAiXNlY3AyNTZrMaEDoS833RIwsJi1fyd1E1Bm3AuBHy9ILdKlfGd2NlsY8jWDdGNwglnCg3VkcIJZxIV3YWt1MgU --filternode=/ip4/172.18.74.219/tcp/22978/p2p/16Uiu2HAmPWBkTFHmH2jJbcjyTbDyXrNodsC6C8NkTogrwryRtxyJ
2026-02-13 04:40:25.916 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.46.195 waku 2c31e4748ed0a9ee0dba1054ae9e9bf29e3649c567ab8dd9b6311745fec53187
2026-02-13 04:40:25.946 DEBUG [src.node.docker_mananger] Container started with ID 2c31e4748ed0. Setting up logs at ./log/docker/node2_2026-02-13_04-40-24__b063d85c-c4d3-4315-b9e0-95920bc76b47__wakuorg_nwaku:latest.log
2026-02-13 04:40:25.946 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39277
2026-02-13 04:40:25.946 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-13 04:40:26.947 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39277/health" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:40:26.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-13 04:40:26.951 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-13 04:40:26.951 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39277/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:40:26.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.195/tcp/39278/p2p/16Uiu2HAmEfie6hgSzKSqFEqpYTb5sRSxDqRXrirgkYEpmDqxy7hJ","/ip4/172.18.46.195/tcp/39279/ws/p2p/16Uiu2HAmEfie6hgSzKSqFEqpYTb5sRSxDqRXrirgkYEpmDqxy7hJ"],"enrUri":"enr:-L24QChRdBb5gW9J3YdB_BDmF6cu-saQu5KhWQ04eWFknZ76W09XZzITvU4xx23MUeIxY6T1UThF0rgDAzcdOgoS5v0CgmlkgnY0gmlwhKwSLsOKbXVsdGlhZGRyc5YACASsEi7DBpluAAoErBIuwwaZb90DgnJzhQADAQAAiXNlY3AyNTZrMaEDHecw69LibGk9ePRO4vKedWD01b2Vuu594VK345V7iymDdGNwgplug3VkcIKZcIV3YWt1MgA"}'
2026-02-13 04:40:26.954 INFO [src.node.waku_node] REST service is ready !!
2026-02-13 04:40:26.954 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39277/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.219/tcp/22978/p2p/16Uiu2HAmPWBkTFHmH2jJbcjyTbDyXrNodsC6C8NkTogrwryRtxyJ"]'
2026-02-13 04:40:26.981 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:40:26.983 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22977/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2026-02-13 04:40:26.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:40:26.995 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39277/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a05cb581-469b-48c9-9571-62aa9831138d", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
2026-02-13 04:40:27.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"a05cb581-469b-48c9-9571-62aa9831138d","statusDesc":"OK"}'
2026-02-13 04:40:27.007 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-13 04:40:27.013 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-13 04:40:27.013 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-13 04:40:27.113 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-13 04:40:27.114 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39277/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-13 04:40:27.117 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770957627007205434,"ephemeral":false}]'
2026-02-13 04:40:27.119 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-13 04:40:27.120 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-13 04:40:27.120 DEBUG [src.node.waku_node] Stopping container with id 13b872a0d5aa
2026-02-13 04:40:27.349 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:40:27.349 DEBUG [src.node.waku_node] Stopping container with id 2c31e4748ed0
2026-02-13 04:40:27.556 DEBUG [src.node.waku_node] Container stopped.
2026-02-13 04:40:27.558 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-13 04:40:27.568 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-13 04:40:27.573 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
