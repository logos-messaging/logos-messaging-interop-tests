2026-02-04 04:33:48.455 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 04:33:48.455 DEBUG [tests.conftest] Running test: test_passing_cursor_of_non_existing_message_from_the_store with id: 2026-02-04_04-33-48__843e9553-4574-4de5-ad92-1f46a60879fb
2026-02-04 04:33:48.455 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 04:33:48.455 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-04 04:33:48.456 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-04 04:33:48.461 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:33:48.462 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-04_04-33-48__843e9553-4574-4de5-ad92-1f46a60879fb__wakuorg_nwaku:latest.log
2026-02-04 04:33:48.462 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:33:48.462 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:33:48.463 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:33:48.463 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.56
2026-02-04 04:33:48.463 DEBUG [src.node.docker_mananger] Generated ports ['28311', '28312', '28313', '28314', '28315']
2026-02-04 04:33:48.463 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:33:48.463 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:33:48.464 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:33:48.464 DEBUG [src.node.docker_mananger] docker run -i -t -p 28311:28311 -p 28312:28312 -p 28313:28313 -p 28314:28314 -p 28315:28315 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28313 --rest-port=28311 --tcp-port=28312 --discv5-udp-port=28314 --rest-address=0.0.0.0 --nat=extip:172.18.213.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d4cfeeefde1ad1db8467acfd94df1caea2a747ada7ceb9e2c1fbacd5d7ba7f7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28315 --metrics-logging=true --store=true --relay=true
2026-02-04 04:33:48.618 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.56 waku 17d7b5de94ab896109a2fca8ddebe03fcc29d9da3498a32ebcd756d3b9b16a88
2026-02-04 04:33:48.642 DEBUG [src.node.docker_mananger] Container started with ID 17d7b5de94ab. Setting up logs at ./log/docker/publishing_node1_2026-02-04_04-33-48__843e9553-4574-4de5-ad92-1f46a60879fb__wakuorg_nwaku:latest.log
2026-02-04 04:33:48.642 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28311
2026-02-04 04:33:48.643 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:33:48.740 ERROR [src.node.docker_mananger] Max retries reached for container 9ddce0abd5f9. Exiting log stream.
2026-02-04 04:33:49.238 ERROR [src.node.docker_mananger] Max retries reached for container 855fdd7326a9. Exiting log stream.
2026-02-04 04:33:49.643 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28311/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:33:49.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:33:49.647 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:33:49.647 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28311/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:33:49.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.56/tcp/28312/p2p/16Uiu2HAm3W5V3iPHHSxMTPyjiL2BLVd6UaHiMxz5JAqbtYVLcu5c","/ip4/172.18.213.56/tcp/28313/ws/p2p/16Uiu2HAm3W5V3iPHHSxMTPyjiL2BLVd6UaHiMxz5JAqbtYVLcu5c"],"enrUri":"enr:-L24QHFxnGIPhlMd0LFJ-OHkS_eKmtv3gkwc35LrX4E3R99RexrbNNpcD6xTC2R0kkke4BBKpAzB3OMM9EGA-v-ffk4CgmlkgnY0gmlwhKwS1TiKbXVsdGlhZGRyc5YACASsEtU4Bm6YAAoErBLVOAZumd0DgnJzhQADAQAAiXNlY3AyNTZrMaECd_5lJ5Qp6MGeVss52yCWu9t7Lp8Edv-w70ClsBvMfMODdGNwgm6Yg3VkcIJumoV3YWt1MgM"}'
2026-02-04 04:33:49.649 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:33:49.655 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:33:49.655 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-04_04-33-48__843e9553-4574-4de5-ad92-1f46a60879fb__wakuorg_nwaku:latest.log
2026-02-04 04:33:49.655 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:33:49.656 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:33:49.657 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:33:49.657 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.70.39
2026-02-04 04:33:49.657 DEBUG [src.node.docker_mananger] Generated ports ['40353', '40354', '40355', '40356', '40357']
2026-02-04 04:33:49.657 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:33:49.657 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:33:49.657 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:33:49.658 DEBUG [src.node.docker_mananger] docker run -i -t -p 40353:40353 -p 40354:40354 -p 40355:40355 -p 40356:40356 -p 40357:40357 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40355 --rest-port=40353 --tcp-port=40354 --discv5-udp-port=40356 --rest-address=0.0.0.0 --nat=extip:172.18.70.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddafe2ab02e68fee01e550fdd4bec2f7d3e68b69f5d3e3475a85ef2c93cdb3bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40357 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHFxnGIPhlMd0LFJ-OHkS_eKmtv3gkwc35LrX4E3R99RexrbNNpcD6xTC2R0kkke4BBKpAzB3OMM9EGA-v-ffk4CgmlkgnY0gmlwhKwS1TiKbXVsdGlhZGRyc5YACASsEtU4Bm6YAAoErBLVOAZumd0DgnJzhQADAQAAiXNlY3AyNTZrMaECd_5lJ5Qp6MGeVss52yCWu9t7Lp8Edv-w70ClsBvMfMODdGNwgm6Yg3VkcIJumoV3YWt1MgM --storenode=/ip4/172.18.213.56/tcp/28312/p2p/16Uiu2HAm3W5V3iPHHSxMTPyjiL2BLVd6UaHiMxz5JAqbtYVLcu5c --store=true --relay=true
2026-02-04 04:33:49.813 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.70.39 waku 9fc15c680774a5e6bfb2d1f14a3d2910336387d8d621d5b3952a7fc9ac3b8671
2026-02-04 04:33:49.841 DEBUG [src.node.docker_mananger] Container started with ID 9fc15c680774. Setting up logs at ./log/docker/store_node1_2026-02-04_04-33-48__843e9553-4574-4de5-ad92-1f46a60879fb__wakuorg_nwaku:latest.log
2026-02-04 04:33:49.841 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40353
2026-02-04 04:33:49.842 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:33:50.843 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40353/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:33:50.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:33:50.848 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:33:50.848 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40353/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:33:50.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.39/tcp/40354/p2p/16Uiu2HAmPDAB3Zmqy8sAq9wok8dGPQVoSfy7bhtXu6uuhzYka1Ka","/ip4/172.18.70.39/tcp/40355/ws/p2p/16Uiu2HAmPDAB3Zmqy8sAq9wok8dGPQVoSfy7bhtXu6uuhzYka1Ka"],"enrUri":"enr:-L24QJ2Ym7TtSrUwNqu7FAHn7P0pdJS8M3hw5uTAIPD5J3vHMbbMaaAtAoKIVdxiiD3xYp-6z7uvunxJpxhM5T7Y-m4CgmlkgnY0gmlwhKwSRieKbXVsdGlhZGRyc5YACASsEkYnBp2iAAoErBJGJwado90DgnJzhQADAQAAiXNlY3AyNTZrMaEDnNKP_egCDhLvPg66UgWyV9zUY3Rb66IHmXn7x84Ti62DdGNwgp2ig3VkcIKdpIV3YWt1MgM"}'
2026-02-04 04:33:50.850 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:33:50.851 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40353/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.56/tcp/28312/p2p/16Uiu2HAm3W5V3iPHHSxMTPyjiL2BLVd6UaHiMxz5JAqbtYVLcu5c"]'
2026-02-04 04:33:50.853 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:33:50.853 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28311/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 04:33:50.855 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:33:50.856 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40353/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 04:33:50.858 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:33:50.859 DEBUG [src.steps.store] Relaying message
2026-02-04 04:33:50.859 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28311/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:33:50.864 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:33:50.864 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 04:33:51.065 DEBUG [src.steps.store] Relaying message
2026-02-04 04:33:51.065 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28311/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:33:51.070 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:33:51.071 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 04:33:51.271 DEBUG [src.steps.store] Relaying message
2026-02-04 04:33:51.272 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28311/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:33:51.277 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:33:51.277 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 04:33:51.477 DEBUG [src.steps.store] Relaying message
2026-02-04 04:33:51.478 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28311/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:33:51.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:33:51.484 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-04 04:33:51.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28311/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x3a1662ac63848c828eba7874c020690ad7839773c5d2b728c957dacd17c9c9a6&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:33:51.688 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:28311/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x3a1662ac63848c828eba7874c020690ad7839773c5d2b728c957dacd17c9c9a6&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-04 04:33:51.689 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40353/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x3a1662ac63848c828eba7874c020690ad7839773c5d2b728c957dacd17c9c9a6&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:33:51.692 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:40353/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x3a1662ac63848c828eba7874c020690ad7839773c5d2b728c957dacd17c9c9a6&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-04 04:33:51.693 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 04:33:51.694 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 04:33:51.694 DEBUG [src.node.waku_node] Stopping container with id 17d7b5de94ab
2026-02-04 04:33:52.182 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:33:52.184 DEBUG [src.node.waku_node] Stopping container with id 9fc15c680774
2026-02-04 04:33:52.694 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:33:52.697 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 04:33:52.702 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 04:33:52.708 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
