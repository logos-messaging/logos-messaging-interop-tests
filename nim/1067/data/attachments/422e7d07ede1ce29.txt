2026-02-04 04:34:10.486 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 04:34:10.487 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_no_request_id with id: 2026-02-04_04-34-10__27365dd3-5b24-403c-9cdb-8fe9c5181f28
2026-02-04 04:34:10.487 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 04:34:10.488 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-04 04:34:10.488 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-04 04:34:10.496 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:34:10.496 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_04-34-10__27365dd3-5b24-403c-9cdb-8fe9c5181f28__wakuorg_nwaku:latest.log
2026-02-04 04:34:10.497 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:34:10.497 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:34:10.499 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:34:10.500 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.13.110
2026-02-04 04:34:10.501 DEBUG [src.node.docker_mananger] Generated ports ['53103', '53104', '53105', '53106', '53107']
2026-02-04 04:34:10.501 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:34:10.501 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:34:10.501 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:34:10.501 DEBUG [src.node.docker_mananger] docker run -i -t -p 53103:53103 -p 53104:53104 -p 53105:53105 -p 53106:53106 -p 53107:53107 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53105 --rest-port=53103 --tcp-port=53104 --discv5-udp-port=53106 --rest-address=0.0.0.0 --nat=extip:172.18.13.110 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0a3b539fac28a409bd9f7aad3fd6bf97dbfba560b26bcead81aeabee59f877dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53107 --metrics-logging=true --relay=true --filter=true
2026-02-04 04:34:10.684 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.13.110 waku fc03329cd9c936972b12d23b7dae0538e7d4f2924cc736cbd3c0678a44caa788
2026-02-04 04:34:10.712 DEBUG [src.node.docker_mananger] Container started with ID fc03329cd9c9. Setting up logs at ./log/docker/node1_2026-02-04_04-34-10__27365dd3-5b24-403c-9cdb-8fe9c5181f28__wakuorg_nwaku:latest.log
2026-02-04 04:34:10.713 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53103
2026-02-04 04:34:10.714 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:34:10.756 ERROR [src.node.docker_mananger] Max retries reached for container 382f05ec1d1c. Exiting log stream.
2026-02-04 04:34:11.314 ERROR [src.node.docker_mananger] Max retries reached for container 90ac4719c70c. Exiting log stream.
2026-02-04 04:34:11.714 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53103/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:11.717 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:34:11.717 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:34:11.718 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53103/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:11.720 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.110/tcp/53104/p2p/16Uiu2HAmQBj4NxiAJqgo8geZVdvKnp84iZf9v9svS8d95yXiY53y","/ip4/172.18.13.110/tcp/53105/ws/p2p/16Uiu2HAmQBj4NxiAJqgo8geZVdvKnp84iZf9v9svS8d95yXiY53y"],"enrUri":"enr:-L24QE9bv6kOp5oe97TaQxjR50rPg64e3rT-P-1LYEPj3oV4Ys_UHtMstKDEO-7Qz_YAzfkD0qGkD8Q-reAHt0MxmvMCgmlkgnY0gmlwhKwSDW6KbXVsdGlhZGRyc5YACASsEg1uBs9wAAoErBINbgbPcd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDq1BFY4sWiH9y16w-uZjs_jlTua8PbPb7DFw67XugLGSDdGNwgs9wg3VkcILPcoV3YWt1MgU"}'
2026-02-04 04:34:11.720 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:34:11.720 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-04 04:34:11.726 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:34:11.726 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_04-34-10__27365dd3-5b24-403c-9cdb-8fe9c5181f28__wakuorg_nwaku:latest.log
2026-02-04 04:34:11.726 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:34:11.726 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:34:11.728 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:34:11.728 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.203.4
2026-02-04 04:34:11.728 DEBUG [src.node.docker_mananger] Generated ports ['21579', '21580', '21581', '21582', '21583']
2026-02-04 04:34:11.728 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:34:11.728 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:34:11.728 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:34:11.728 DEBUG [src.node.docker_mananger] docker run -i -t -p 21579:21579 -p 21580:21580 -p 21581:21581 -p 21582:21582 -p 21583:21583 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21581 --rest-port=21579 --tcp-port=21580 --discv5-udp-port=21582 --rest-address=0.0.0.0 --nat=extip:172.18.203.4 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1bbe9006bfbd0b80aabc8da0713ebcaff1c258ecd30c4f5b02efb4a4cb1d1446 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21583 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QE9bv6kOp5oe97TaQxjR50rPg64e3rT-P-1LYEPj3oV4Ys_UHtMstKDEO-7Qz_YAzfkD0qGkD8Q-reAHt0MxmvMCgmlkgnY0gmlwhKwSDW6KbXVsdGlhZGRyc5YACASsEg1uBs9wAAoErBINbgbPcd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDq1BFY4sWiH9y16w-uZjs_jlTua8PbPb7DFw67XugLGSDdGNwgs9wg3VkcILPcoV3YWt1MgU --filternode=/ip4/172.18.13.110/tcp/53104/p2p/16Uiu2HAmQBj4NxiAJqgo8geZVdvKnp84iZf9v9svS8d95yXiY53y
2026-02-04 04:34:11.911 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.203.4 waku 058f8d3aba6f88e38df5f57ac52e041d5dd1ab5982e28e7704612df8ce58950b
2026-02-04 04:34:11.942 DEBUG [src.node.docker_mananger] Container started with ID 058f8d3aba6f. Setting up logs at ./log/docker/node2_2026-02-04_04-34-10__27365dd3-5b24-403c-9cdb-8fe9c5181f28__wakuorg_nwaku:latest.log
2026-02-04 04:34:11.942 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21579
2026-02-04 04:34:11.943 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:34:12.943 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21579/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:12.947 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 04:34:12.947 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:34:12.947 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21579/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:12.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.4/tcp/21580/p2p/16Uiu2HAmRwBXCLYv6qzz5dq9xsFZqnEbLxh9oAvvvrZhWpmPxwwu","/ip4/172.18.203.4/tcp/21581/ws/p2p/16Uiu2HAmRwBXCLYv6qzz5dq9xsFZqnEbLxh9oAvvvrZhWpmPxwwu"],"enrUri":"enr:-L24QC89xQad8w9M2zT8YlfdWi68gMgPACiyv25gEGJDZqAXIyu30v4-R-2JtXbPVC5_1WjOT2HoWNY2mZB7m_wJ84ICgmlkgnY0gmlwhKwSywSKbXVsdGlhZGRyc5YACASsEssEBlRMAAoErBLLBAZUTd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxU3algc4MdSBGTTLORNpVkLfkUYzudKMBxecC7H8wcCDdGNwglRMg3VkcIJUToV3YWt1MgA"}'
2026-02-04 04:34:12.950 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:34:12.950 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21579/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.13.110/tcp/53104/p2p/16Uiu2HAmQBj4NxiAJqgo8geZVdvKnp84iZf9v9svS8d95yXiY53y"]'
2026-02-04 04:34:12.980 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:12.982 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-04 04:34:12.983 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53103/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 04:34:12.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:12.995 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21579/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5fee7bc9-be21-42f4-a646-f21ece58098f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 04:34:13.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"5fee7bc9-be21-42f4-a646-f21ece58098f","statusDesc":"OK"}'
2026-02-04 04:34:13.009 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:21579/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 04:34:13.012 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:21579/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-04 04:34:13.015 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 04:34:13.015 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 04:34:13.016 DEBUG [src.node.waku_node] Stopping container with id fc03329cd9c9
2026-02-04 04:34:13.555 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:34:13.555 DEBUG [src.node.waku_node] Stopping container with id 058f8d3aba6f
2026-02-04 04:34:14.055 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:34:14.057 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 04:34:14.062 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 04:34:14.066 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
