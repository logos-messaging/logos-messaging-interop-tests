2026-02-04 04:41:26.778 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 04:41:26.778 DEBUG [tests.conftest] Running test: test_content_topic_also_in_docker_flags[/aaaaa/3/bbbbb/proto] with id: 2026-02-04_04-41-26__2e431e89-9ff1-4776-9ee8-39bce94e1a93
2026-02-04 04:41:26.778 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 04:41:26.779 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 04:41:26.779 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-04 04:41:26.786 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:41:26.786 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_04-41-26__2e431e89-9ff1-4776-9ee8-39bce94e1a93__wakuorg_nwaku:latest.log
2026-02-04 04:41:26.786 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:41:26.787 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:41:26.788 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:41:26.788 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.90.9
2026-02-04 04:41:26.788 DEBUG [src.node.docker_mananger] Generated ports ['44267', '44268', '44269', '44270', '44271']
2026-02-04 04:41:26.789 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-02-04 04:41:26.789 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-04 04:41:26.789 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:41:26.789 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:41:26.789 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:41:26.789 DEBUG [src.node.docker_mananger] docker run -i -t -p 44267:44267 -p 44268:44268 -p 44269:44269 -p 44270:44270 -p 44271:44271 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44269 --rest-port=44267 --tcp-port=44268 --discv5-udp-port=44270 --rest-address=0.0.0.0 --nat=extip:172.18.90.9 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=599015dd74ac160fcf64efab9be8e58daa224df508bd1799cb62c9d95a1495fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44271 --metrics-logging=true --relay=true --filter=true --content-topic=/aaaaa/3/bbbbb/proto
2026-02-04 04:41:26.965 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.90.9 waku 73ed8f31ffe6e4792c78752a14998b29ffe61b45040883ed463adb62dd00eeae
2026-02-04 04:41:27.001 DEBUG [src.node.docker_mananger] Container started with ID 73ed8f31ffe6. Setting up logs at ./log/docker/node1_2026-02-04_04-41-26__2e431e89-9ff1-4776-9ee8-39bce94e1a93__wakuorg_nwaku:latest.log
2026-02-04 04:41:27.002 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44267
2026-02-04 04:41:27.002 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:41:27.032 ERROR [src.node.docker_mananger] Max retries reached for container cbe9503b420a. Exiting log stream.
2026-02-04 04:41:27.581 ERROR [src.node.docker_mananger] Max retries reached for container 614ed753fb15. Exiting log stream.
2026-02-04 04:41:28.002 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44267/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:41:28.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:41:28.006 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:41:28.006 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44267/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:41:28.008 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.90.9/tcp/44268/p2p/16Uiu2HAmTicF6GXU1KMLq6eZxhUHKZSUG6zfM1pPpK9JKkkN2D8L","/ip4/172.18.90.9/tcp/44269/ws/p2p/16Uiu2HAmTicF6GXU1KMLq6eZxhUHKZSUG6zfM1pPpK9JKkkN2D8L"],"enrUri":"enr:-L24QB5PymbeJ5vv9h74exeU49BtqklVrZKQ2YukmEEIGPAsIuaO9eu5cURQkyROjxRM73KvwwCPe1gL2z0BQchQ5EwCgmlkgnY0gmlwhKwSWgmKbXVsdGlhZGRyc5YACASsEloJBqzsAAoErBJaCQas7d0DgnJzhQACAQAAiXNlY3AyNTZrMaED38yhfU9AocXXCr59l08SWQIYYZ0nt95SgOuv1pm8WHGDdGNwgqzsg3VkcIKs7oV3YWt1MgU"}'
2026-02-04 04:41:28.008 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:41:28.015 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:41:28.016 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_04-41-26__2e431e89-9ff1-4776-9ee8-39bce94e1a93__wakuorg_nwaku:latest.log
2026-02-04 04:41:28.016 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:41:28.016 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:41:28.017 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:41:28.017 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.30.255
2026-02-04 04:41:28.018 DEBUG [src.node.docker_mananger] Generated ports ['23280', '23281', '23282', '23283', '23284']
2026-02-04 04:41:28.018 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-02-04 04:41:28.018 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-04 04:41:28.018 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:41:28.018 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:41:28.018 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:41:28.018 DEBUG [src.node.docker_mananger] docker run -i -t -p 23280:23280 -p 23281:23281 -p 23282:23282 -p 23283:23283 -p 23284:23284 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23282 --rest-port=23280 --tcp-port=23281 --discv5-udp-port=23283 --rest-address=0.0.0.0 --nat=extip:172.18.30.255 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d3adafb6a598767a5f57033f6ddeef7fb87bbbebf3af41fdecc6a4753845bae1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23284 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QB5PymbeJ5vv9h74exeU49BtqklVrZKQ2YukmEEIGPAsIuaO9eu5cURQkyROjxRM73KvwwCPe1gL2z0BQchQ5EwCgmlkgnY0gmlwhKwSWgmKbXVsdGlhZGRyc5YACASsEloJBqzsAAoErBJaCQas7d0DgnJzhQACAQAAiXNlY3AyNTZrMaED38yhfU9AocXXCr59l08SWQIYYZ0nt95SgOuv1pm8WHGDdGNwgqzsg3VkcIKs7oV3YWt1MgU --content-topic=/aaaaa/3/bbbbb/proto
2026-02-04 04:41:28.206 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.30.255 waku eba70c6accd65b8085c4bd082ec987a8409b324b7f3345ce355c894ef81ce654
2026-02-04 04:41:28.244 DEBUG [src.node.docker_mananger] Container started with ID eba70c6accd6. Setting up logs at ./log/docker/node2_2026-02-04_04-41-26__2e431e89-9ff1-4776-9ee8-39bce94e1a93__wakuorg_nwaku:latest.log
2026-02-04 04:41:28.245 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23280
2026-02-04 04:41:28.245 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:41:29.247 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23280/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:41:29.252 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 04:41:29.252 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:41:29.252 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23280/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:41:29.255 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.255/tcp/23281/p2p/16Uiu2HAmHb5a1B8jd4f6kcujKaaq7YrRH5zCCgZ5mkf3kp6jwcR8","/ip4/172.18.30.255/tcp/23282/ws/p2p/16Uiu2HAmHb5a1B8jd4f6kcujKaaq7YrRH5zCCgZ5mkf3kp6jwcR8"],"enrUri":"enr:-L24QCy_QpxKrDIsta7ZGko3P-iiCnoAHHKvz7CJZR9ryjuuLwMQ5SQRmgQgRLCWSAImND5Tx4McKPUvqxrssucrfTUCgmlkgnY0gmlwhKwSHv-KbXVsdGlhZGRyc5YACASsEh7_BlrxAAoErBIe_wZa8t0DgnJzhQACAQAAiXNlY3AyNTZrMaEDSUoDRO70pgP9cbtS1IPcvg4UHpOUcRx2j8mBV-ob-dODdGNwglrxg3VkcIJa84V3YWt1MgE"}'
2026-02-04 04:41:29.255 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:41:29.255 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23280/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.90.9/tcp/44268/p2p/16Uiu2HAmTicF6GXU1KMLq6eZxhUHKZSUG6zfM1pPpK9JKkkN2D8L"]'
2026-02-04 04:41:29.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:41:29.258 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44267/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-04 04:41:29.261 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:41:29.261 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23280/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-04 04:41:29.263 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:41:29.264 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44267/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:41:29.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:41:29.268 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 04:41:29.368 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-04 04:41:29.369 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44267/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:41:29.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770180089264202580,"ephemeral":false,"proof":""}]'
2026-02-04 04:41:29.373 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 04:41:29.373 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23280/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:41:29.376 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770180089264202580,"ephemeral":false,"proof":""}]'
2026-02-04 04:41:29.378 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 04:41:29.379 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 04:41:29.380 DEBUG [src.node.waku_node] Stopping container with id 73ed8f31ffe6
2026-02-04 04:41:29.910 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:41:29.910 DEBUG [src.node.waku_node] Stopping container with id eba70c6accd6
2026-02-04 04:41:30.423 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:41:30.426 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 04:41:30.431 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 04:41:30.435 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
