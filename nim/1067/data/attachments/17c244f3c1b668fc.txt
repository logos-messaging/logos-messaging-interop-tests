2026-02-04 04:34:31.530 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 04:34:31.530 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_multiple_overlapping_content_topics with id: 2026-02-04_04-34-31__c15fe755-3439-4a41-a96e-0774bb0adaed
2026-02-04 04:34:31.531 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 04:34:31.531 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-04 04:34:31.531 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-04 04:34:31.538 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:34:31.538 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_04-34-31__c15fe755-3439-4a41-a96e-0774bb0adaed__wakuorg_nwaku:latest.log
2026-02-04 04:34:31.538 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:34:31.538 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:34:31.540 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:34:31.540 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.25.17
2026-02-04 04:34:31.540 DEBUG [src.node.docker_mananger] Generated ports ['27977', '27978', '27979', '27980', '27981']
2026-02-04 04:34:31.540 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:34:31.540 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:34:31.540 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:34:31.540 DEBUG [src.node.docker_mananger] docker run -i -t -p 27977:27977 -p 27978:27978 -p 27979:27979 -p 27980:27980 -p 27981:27981 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27979 --rest-port=27977 --tcp-port=27978 --discv5-udp-port=27980 --rest-address=0.0.0.0 --nat=extip:172.18.25.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b20764683e765b4e3ca4eb03dca544668fc1667b8186d3d1f40b9247d81ec7c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27981 --metrics-logging=true --relay=true --filter=true
2026-02-04 04:34:31.722 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.25.17 waku 863dd3f6bd498ba190dc2460cd1bf74867bea8975313d5fdb94e703d7a2bfb85
2026-02-04 04:34:31.755 DEBUG [src.node.docker_mananger] Container started with ID 863dd3f6bd49. Setting up logs at ./log/docker/node1_2026-02-04_04-34-31__c15fe755-3439-4a41-a96e-0774bb0adaed__wakuorg_nwaku:latest.log
2026-02-04 04:34:31.756 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27977
2026-02-04 04:34:31.756 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:34:31.799 ERROR [src.node.docker_mananger] Max retries reached for container a3f666df9611. Exiting log stream.
2026-02-04 04:34:32.339 ERROR [src.node.docker_mananger] Max retries reached for container f6d2d3bd1261. Exiting log stream.
2026-02-04 04:34:32.756 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27977/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:32.759 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:34:32.760 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:34:32.760 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27977/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:32.762 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.17/tcp/27978/p2p/16Uiu2HAmVmC8atfM5G9xQ5u8vftcDfmZhGgULpiMxsBVXV2rxcgp","/ip4/172.18.25.17/tcp/27979/ws/p2p/16Uiu2HAmVmC8atfM5G9xQ5u8vftcDfmZhGgULpiMxsBVXV2rxcgp"],"enrUri":"enr:-L24QN8ebn-RfV2YyPmCZ1BFAjnlZHiPZkwCmnEl6uF-Sl9PJ1fcsevHg00LQQ-qOQlR1eqdumvrI_r2us6c4745Hz0CgmlkgnY0gmlwhKwSGRGKbXVsdGlhZGRyc5YACASsEhkRBm1KAAoErBIZEQZtS90DgnJzhQADAQAAiXNlY3AyNTZrMaED_i17vgWGk5bGX6abumnQ1oGVaQ6OwrAEvgx95PyGMzmDdGNwgm1Kg3VkcIJtTIV3YWt1MgU"}'
2026-02-04 04:34:32.762 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:34:32.762 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-04 04:34:32.769 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:34:32.769 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_04-34-31__c15fe755-3439-4a41-a96e-0774bb0adaed__wakuorg_nwaku:latest.log
2026-02-04 04:34:32.769 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:34:32.769 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:34:32.770 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:34:32.771 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.152.62
2026-02-04 04:34:32.771 DEBUG [src.node.docker_mananger] Generated ports ['9145', '9146', '9147', '9148', '9149']
2026-02-04 04:34:32.771 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:34:32.771 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:34:32.771 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:34:32.771 DEBUG [src.node.docker_mananger] docker run -i -t -p 9145:9145 -p 9146:9146 -p 9147:9147 -p 9148:9148 -p 9149:9149 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9147 --rest-port=9145 --tcp-port=9146 --discv5-udp-port=9148 --rest-address=0.0.0.0 --nat=extip:172.18.152.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b23bcc3b2dee7ba8cfcdf79bdaaacdedb3ac2efb4f4b84adc469afabbd24bcee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9149 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QN8ebn-RfV2YyPmCZ1BFAjnlZHiPZkwCmnEl6uF-Sl9PJ1fcsevHg00LQQ-qOQlR1eqdumvrI_r2us6c4745Hz0CgmlkgnY0gmlwhKwSGRGKbXVsdGlhZGRyc5YACASsEhkRBm1KAAoErBIZEQZtS90DgnJzhQADAQAAiXNlY3AyNTZrMaED_i17vgWGk5bGX6abumnQ1oGVaQ6OwrAEvgx95PyGMzmDdGNwgm1Kg3VkcIJtTIV3YWt1MgU --filternode=/ip4/172.18.25.17/tcp/27978/p2p/16Uiu2HAmVmC8atfM5G9xQ5u8vftcDfmZhGgULpiMxsBVXV2rxcgp
2026-02-04 04:34:32.950 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.152.62 waku 2de7b94e79dbf09d16a99c2bf857535ba995f7e9f7ef6c4093b3fb3f843ad8a6
2026-02-04 04:34:32.984 DEBUG [src.node.docker_mananger] Container started with ID 2de7b94e79db. Setting up logs at ./log/docker/node2_2026-02-04_04-34-31__c15fe755-3439-4a41-a96e-0774bb0adaed__wakuorg_nwaku:latest.log
2026-02-04 04:34:32.985 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9145
2026-02-04 04:34:32.986 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:34:33.986 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9145/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:33.990 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 04:34:33.990 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:34:33.990 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9145/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:33.992 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.62/tcp/9146/p2p/16Uiu2HAmVh4SHfXtrT6HBLMUFcfXW9NF9Tpm9gCeBTmUkABr82nf","/ip4/172.18.152.62/tcp/9147/ws/p2p/16Uiu2HAmVh4SHfXtrT6HBLMUFcfXW9NF9Tpm9gCeBTmUkABr82nf"],"enrUri":"enr:-L24QFxbUqG0xMedbAZ-zrM0MWUKJiNMqz01qIRXN2TJ9-0oFRuU9VvnqPq48rRjUotGKuEdIjvJRFbtRhxrw87rMrcCgmlkgnY0gmlwhKwSmD6KbXVsdGlhZGRyc5YACASsEpg-BiO6AAoErBKYPgYju90DgnJzhQADAQAAiXNlY3AyNTZrMaED_R51qbk4_64mO35kp3QYBxKqZIe0DXsxzVu9j1MVPaSDdGNwgiO6g3VkcIIjvIV3YWt1MgA"}'
2026-02-04 04:34:33.993 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:34:33.993 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9145/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.25.17/tcp/27978/p2p/16Uiu2HAmVmC8atfM5G9xQ5u8vftcDfmZhGgULpiMxsBVXV2rxcgp"]'
2026-02-04 04:34:34.023 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:34.026 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27977/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 04:34:34.036 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:34.037 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9145/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "af824461-8673-4083-8b3e-2e9e90b232ca", "contentFilters": ["Hello World!", "1234567890", "{\"key\": \"value\"}"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 04:34:34.049 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"af824461-8673-4083-8b3e-2e9e90b232ca","statusDesc":"OK"}'
2026-02-04 04:34:34.050 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27977/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 04:34:34.052 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:34.052 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9145/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7f897a91-be74-4733-a7e9-20bd9ecb5169", "contentFilters": ["1234567890", "{\"key\": \"value\"}", "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 04:34:34.061 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"7f897a91-be74-4733-a7e9-20bd9ecb5169","statusDesc":"OK"}'
2026-02-04 04:34:34.062 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:34:34.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:34.070 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 04:34:34.170 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 04:34:34.170 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9145/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:34.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"Hello World!","version":0,"timestamp":1770179674061919475,"ephemeral":false}]'
2026-02-04 04:34:34.175 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:34:34.180 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:34.180 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 04:34:34.280 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 04:34:34.281 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9145/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:34.283 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1770179674174878148,"ephemeral":false}]'
2026-02-04 04:34:34.285 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "{\"key\": \"value\"}", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:34:34.290 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:34.290 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 04:34:34.390 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 04:34:34.391 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9145/filter/v2/messages/%7B%22key%22%3A%20%22value%22%7D" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:34.393 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"{\\"key\\": \\"value\\"}","version":0,"timestamp":1770179674285028121,"ephemeral":false}]'
2026-02-04 04:34:34.395 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27977/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:34:34.400 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:34.400 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 04:34:34.500 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 04:34:34.501 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9145/filter/v2/messages/%E8%BF%99%E6%98%AF%E4%B8%80%E4%BA%9B%E4%B8%AD%E6%96%87" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:34.503 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xba\x9b\xe4\xb8\xad\xe6\x96\x87","version":0,"timestamp":1770179674395344404,"ephemeral":false}]'
2026-02-04 04:34:34.506 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 04:34:34.507 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 04:34:34.507 DEBUG [src.node.waku_node] Stopping container with id 863dd3f6bd49
2026-02-04 04:34:35.017 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:34:35.017 DEBUG [src.node.waku_node] Stopping container with id 2de7b94e79db
2026-02-04 04:34:35.537 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:34:35.538 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 04:34:35.550 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 04:34:35.557 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
