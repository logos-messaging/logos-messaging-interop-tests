2026-02-04 04:36:15.224 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 04:36:15.224 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2026-02-04_04-36-15__bc7e1aeb-ce1d-4020-b276-5997f45fe196
2026-02-04 04:36:15.224 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 04:36:15.225 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-04 04:36:15.231 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:36:15.231 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-04_04-36-15__bc7e1aeb-ce1d-4020-b276-5997f45fe196__wakuorg_nwaku:latest.log
2026-02-04 04:36:15.231 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:36:15.232 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:36:15.233 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:36:15.233 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.147.213
2026-02-04 04:36:15.233 DEBUG [src.node.docker_mananger] Generated ports ['29462', '29463', '29464', '29465', '29466']
2026-02-04 04:36:15.234 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:36:15.234 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:36:15.234 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:36:15.234 DEBUG [src.node.docker_mananger] docker run -i -t -p 29462:29462 -p 29463:29463 -p 29464:29464 -p 29465:29465 -p 29466:29466 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29464 --rest-port=29462 --tcp-port=29463 --discv5-udp-port=29465 --rest-address=0.0.0.0 --nat=extip:172.18.147.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef37b19bf2edbcc0e0d549822dfcf3b548acc5431efbc657ff5e96efe99b3e2d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29466 --metrics-logging=true --lightpush=true --relay=true
2026-02-04 04:36:15.416 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.147.213 waku 79c02c6ecdfb8150bee836b987eb621d413df08c3cfabd274cfdbf1a357ec9b6
2026-02-04 04:36:15.445 DEBUG [src.node.docker_mananger] Container started with ID 79c02c6ecdfb. Setting up logs at ./log/docker/receiving_node1_2026-02-04_04-36-15__bc7e1aeb-ce1d-4020-b276-5997f45fe196__wakuorg_nwaku:latest.log
2026-02-04 04:36:15.446 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29462
2026-02-04 04:36:15.446 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:36:15.476 ERROR [src.node.docker_mananger] Max retries reached for container 24adc46b7de7. Exiting log stream.
2026-02-04 04:36:16.014 ERROR [src.node.docker_mananger] Max retries reached for container 73f448f7aedf. Exiting log stream.
2026-02-04 04:36:16.447 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29462/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:36:16.450 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:36:16.450 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:36:16.450 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29462/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:36:16.453 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.213/tcp/29463/p2p/16Uiu2HAmCurDpXhD4pBfwmGyw6F7K23jt1L6T7xyvRs7sN3CQvpn","/ip4/172.18.147.213/tcp/29464/ws/p2p/16Uiu2HAmCurDpXhD4pBfwmGyw6F7K23jt1L6T7xyvRs7sN3CQvpn"],"enrUri":"enr:-L24QORulyg9PwNssdq3AXVxZkt1kXsh764Hn6YBWOhCUuxvNKk1agB4PSsak1q8Q7X45C26FOJTJ4tqt9KsmBbJ0RICgmlkgnY0gmlwhKwSk9WKbXVsdGlhZGRyc5YACASsEpPVBnMXAAoErBKT1QZzGN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDA86FWPHaWUdo_1xX25Dm-yNpduGW3s2_FepBl1BUKg-DdGNwgnMXg3VkcIJzGYV3YWt1Mgk"}'
2026-02-04 04:36:16.453 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:36:16.460 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:36:16.460 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-04_04-36-15__bc7e1aeb-ce1d-4020-b276-5997f45fe196__wakuorg_nwaku:latest.log
2026-02-04 04:36:16.460 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:36:16.460 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:36:16.462 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:36:16.462 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.200.232
2026-02-04 04:36:16.462 DEBUG [src.node.docker_mananger] Generated ports ['18174', '18175', '18176', '18177', '18178']
2026-02-04 04:36:16.462 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:36:16.462 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:36:16.462 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:36:16.463 DEBUG [src.node.docker_mananger] docker run -i -t -p 18174:18174 -p 18175:18175 -p 18176:18176 -p 18177:18177 -p 18178:18178 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18176 --rest-port=18174 --tcp-port=18175 --discv5-udp-port=18177 --rest-address=0.0.0.0 --nat=extip:172.18.200.232 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=145d8f2dc7dbdb6d70f7d48efa8c67cd4eaaaf3b80b3ae9e3cc3cf3d36bd8d0f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18178 --metrics-logging=true --lightpush=false --relay=true
2026-02-04 04:36:16.646 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.200.232 waku d67233dfe82d875a92ee2b059ca5dc0c4b4448515ee151ca2593c2f55794835a
2026-02-04 04:36:16.677 DEBUG [src.node.docker_mananger] Container started with ID d67233dfe82d. Setting up logs at ./log/docker/receiving_node2_2026-02-04_04-36-15__bc7e1aeb-ce1d-4020-b276-5997f45fe196__wakuorg_nwaku:latest.log
2026-02-04 04:36:16.678 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18174
2026-02-04 04:36:16.678 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:36:17.678 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18174/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:36:17.681 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:36:17.682 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:36:17.682 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18174/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:36:17.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.232/tcp/18175/p2p/16Uiu2HAmE74VV4hRTCjUNJxzTc53qi2LKHoL48bUmMAWmsjFpBsh","/ip4/172.18.200.232/tcp/18176/ws/p2p/16Uiu2HAmE74VV4hRTCjUNJxzTc53qi2LKHoL48bUmMAWmsjFpBsh"],"enrUri":"enr:-L24QEuTztcHoQmlwe27cqw7e7Z6hAFOhy7sLDzLClQqvmifZv0VHCDc5cRD_yVkW61lU_1fXBjFAdglfFv4RmllZxwCgmlkgnY0gmlwhKwSyOiKbXVsdGlhZGRyc5YACASsEsjoBkb_AAoErBLI6AZHAN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFYl4dOCRNbobN9ztN0E4g7R69nYsEK8gHcFXHC297NyDdGNwgkb_g3VkcIJHAYV3YWt1MgE"}'
2026-02-04 04:36:17.684 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:36:17.685 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18174/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.213/tcp/29463/p2p/16Uiu2HAmCurDpXhD4pBfwmGyw6F7K23jt1L6T7xyvRs7sN3CQvpn"]'
2026-02-04 04:36:17.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:36:17.734 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:36:17.734 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-04_04-36-15__bc7e1aeb-ce1d-4020-b276-5997f45fe196__wakuorg_nwaku:latest.log
2026-02-04 04:36:17.734 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:36:17.734 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:36:17.736 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:36:17.736 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.51.86
2026-02-04 04:36:17.736 DEBUG [src.node.docker_mananger] Generated ports ['11059', '11060', '11061', '11062', '11063']
2026-02-04 04:36:17.736 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:36:17.736 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:36:17.736 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:36:17.736 DEBUG [src.node.docker_mananger] docker run -i -t -p 11059:11059 -p 11060:11060 -p 11061:11061 -p 11062:11062 -p 11063:11063 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11061 --rest-port=11059 --tcp-port=11060 --discv5-udp-port=11062 --rest-address=0.0.0.0 --nat=extip:172.18.51.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db5f195ead3e2c7345af8d258aec4c6ad95b3209e53bcdb68e2fef609bc9b2f6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11063 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QORulyg9PwNssdq3AXVxZkt1kXsh764Hn6YBWOhCUuxvNKk1agB4PSsak1q8Q7X45C26FOJTJ4tqt9KsmBbJ0RICgmlkgnY0gmlwhKwSk9WKbXVsdGlhZGRyc5YACASsEpPVBnMXAAoErBKT1QZzGN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDA86FWPHaWUdo_1xX25Dm-yNpduGW3s2_FepBl1BUKg-DdGNwgnMXg3VkcIJzGYV3YWt1Mgk --lightpushnode=/ip4/172.18.147.213/tcp/29463/p2p/16Uiu2HAmCurDpXhD4pBfwmGyw6F7K23jt1L6T7xyvRs7sN3CQvpn --lightpush=true --relay=true
2026-02-04 04:36:17.923 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.51.86 waku ee5a58b6b86c8e2f82581235fa68bc847eaa0df26d14a1f24c837eced2a7bcb5
2026-02-04 04:36:17.955 DEBUG [src.node.docker_mananger] Container started with ID ee5a58b6b86c. Setting up logs at ./log/docker/lightpush_node1_2026-02-04_04-36-15__bc7e1aeb-ce1d-4020-b276-5997f45fe196__wakuorg_nwaku:latest.log
2026-02-04 04:36:17.955 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11059
2026-02-04 04:36:17.955 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:36:18.955 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11059/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:36:18.961 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:36:18.961 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:36:18.962 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11059/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:36:18.967 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.86/tcp/11060/p2p/16Uiu2HAmG1HoU75JqJZhq6Vnq2pL8DTPYVnqy9hfvurtrPm6cvWa","/ip4/172.18.51.86/tcp/11061/ws/p2p/16Uiu2HAmG1HoU75JqJZhq6Vnq2pL8DTPYVnqy9hfvurtrPm6cvWa"],"enrUri":"enr:-L24QI1aVNDWNTLWiPAOiX6P6sPvWNTUadA1uvDUYzFquVHmfTBdWuwV5rhboVTjuMnr44aKnafstkfwr-NO-8liQDACgmlkgnY0gmlwhKwSM1aKbXVsdGlhZGRyc5YACASsEjNWBis0AAoErBIzVgYrNd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMcZoxYnKrkNgeketMxUxbPb1jVIRiy7y3mf2qNwu3G-DdGNwgis0g3VkcIIrNoV3YWt1Mgk"}'
2026-02-04 04:36:18.967 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:36:18.968 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11059/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.213/tcp/29463/p2p/16Uiu2HAmCurDpXhD4pBfwmGyw6F7K23jt1L6T7xyvRs7sN3CQvpn"]'
2026-02-04 04:36:18.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:36:18.996 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11059/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.200.232/tcp/18175/p2p/16Uiu2HAmE74VV4hRTCjUNJxzTc53qi2LKHoL48bUmMAWmsjFpBsh"]'
2026-02-04 04:36:19.022 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:36:19.023 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29462/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 04:36:19.029 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:36:19.029 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18174/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 04:36:19.037 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:36:19.037 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11059/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-04 04:36:19.042 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:36:19.043 DEBUG [src.steps.light_push] Lightpushing message
2026-02-04 04:36:19.044 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11059/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770179779043537911, "version": 2.1}}'
2026-02-04 04:36:19.046 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11059/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-04 04:36:19.049 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 04:36:19.050 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 04:36:19.050 DEBUG [src.node.waku_node] Stopping container with id 79c02c6ecdfb
2026-02-04 04:36:19.575 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:36:19.575 DEBUG [src.node.waku_node] Stopping container with id d67233dfe82d
2026-02-04 04:36:20.111 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:36:20.112 DEBUG [src.node.waku_node] Stopping container with id ee5a58b6b86c
2026-02-04 04:36:20.389 ERROR [src.node.docker_mananger] Max retries reached for container 79c02c6ecdfb. Exiting log stream.
2026-02-04 04:36:20.647 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:36:20.648 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 04:36:20.657 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 04:36:20.671 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 04:36:20.679 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
