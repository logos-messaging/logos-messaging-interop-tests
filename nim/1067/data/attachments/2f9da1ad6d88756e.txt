2026-02-04 04:34:17.598 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 04:34:17.598 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_very_large_request_id with id: 2026-02-04_04-34-17__e9786045-9e77-4a79-adee-aaf677e73b8e
2026-02-04 04:34:17.598 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 04:34:17.599 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-04 04:34:17.599 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-04 04:34:17.605 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:34:17.605 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_04-34-17__e9786045-9e77-4a79-adee-aaf677e73b8e__wakuorg_nwaku:latest.log
2026-02-04 04:34:17.605 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:34:17.605 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:34:17.607 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:34:17.607 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.140.32
2026-02-04 04:34:17.607 DEBUG [src.node.docker_mananger] Generated ports ['34885', '34886', '34887', '34888', '34889']
2026-02-04 04:34:17.607 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:34:17.607 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:34:17.607 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:34:17.607 DEBUG [src.node.docker_mananger] docker run -i -t -p 34885:34885 -p 34886:34886 -p 34887:34887 -p 34888:34888 -p 34889:34889 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34887 --rest-port=34885 --tcp-port=34886 --discv5-udp-port=34888 --rest-address=0.0.0.0 --nat=extip:172.18.140.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f4ad0dfcc7d8dec8010fe6c0cb6f33e1e887774c3ddd3eede97bbd1acce75fa1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34889 --metrics-logging=true --relay=true --filter=true
2026-02-04 04:34:17.783 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.140.32 waku b9bedfaf039705b0cd2e37cee8dff71e10f8d01a396e6dcce795bc98a830a6c6
2026-02-04 04:34:17.816 DEBUG [src.node.docker_mananger] Container started with ID b9bedfaf0397. Setting up logs at ./log/docker/node1_2026-02-04_04-34-17__e9786045-9e77-4a79-adee-aaf677e73b8e__wakuorg_nwaku:latest.log
2026-02-04 04:34:17.817 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34885
2026-02-04 04:34:17.817 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:34:17.902 ERROR [src.node.docker_mananger] Max retries reached for container 39db146cb8b9. Exiting log stream.
2026-02-04 04:34:18.401 ERROR [src.node.docker_mananger] Max retries reached for container fb38f2a20e36. Exiting log stream.
2026-02-04 04:34:18.817 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34885/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:18.820 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:34:18.820 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:34:18.821 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34885/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:18.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.32/tcp/34886/p2p/16Uiu2HAkxzsgdhpDRCTrwJ7wdaRvDebZp6dR7CbYTDUTZB4uraZo","/ip4/172.18.140.32/tcp/34887/ws/p2p/16Uiu2HAkxzsgdhpDRCTrwJ7wdaRvDebZp6dR7CbYTDUTZB4uraZo"],"enrUri":"enr:-L24QGCaDHtQiyT1lLYBs4gnzl9XWI_Lfizm8Kizfo8oGzUTZTjKHH_lLK71jeRM8A49YvFSUzR_eX268EyKaZwa910CgmlkgnY0gmlwhKwSjCCKbXVsdGlhZGRyc5YACASsEowgBohGAAoErBKMIAaIR90DgnJzhQADAQAAiXNlY3AyNTZrMaECNRR2HcbJJ5mYSC2vZuMfb9j550-yN1jp_AwdW0uAGVqDdGNwgohGg3VkcIKISIV3YWt1MgU"}'
2026-02-04 04:34:18.823 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:34:18.823 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-04 04:34:18.829 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:34:18.829 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_04-34-17__e9786045-9e77-4a79-adee-aaf677e73b8e__wakuorg_nwaku:latest.log
2026-02-04 04:34:18.829 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:34:18.830 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:34:18.831 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:34:18.831 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.14.23
2026-02-04 04:34:18.831 DEBUG [src.node.docker_mananger] Generated ports ['41919', '41920', '41921', '41922', '41923']
2026-02-04 04:34:18.831 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:34:18.831 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:34:18.832 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:34:18.832 DEBUG [src.node.docker_mananger] docker run -i -t -p 41919:41919 -p 41920:41920 -p 41921:41921 -p 41922:41922 -p 41923:41923 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41921 --rest-port=41919 --tcp-port=41920 --discv5-udp-port=41922 --rest-address=0.0.0.0 --nat=extip:172.18.14.23 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=facb2c0b2db92da0d8a18dfadcd571553ad1545a670edaacaebcb35be04d9920 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41923 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGCaDHtQiyT1lLYBs4gnzl9XWI_Lfizm8Kizfo8oGzUTZTjKHH_lLK71jeRM8A49YvFSUzR_eX268EyKaZwa910CgmlkgnY0gmlwhKwSjCCKbXVsdGlhZGRyc5YACASsEowgBohGAAoErBKMIAaIR90DgnJzhQADAQAAiXNlY3AyNTZrMaECNRR2HcbJJ5mYSC2vZuMfb9j550-yN1jp_AwdW0uAGVqDdGNwgohGg3VkcIKISIV3YWt1MgU --filternode=/ip4/172.18.140.32/tcp/34886/p2p/16Uiu2HAkxzsgdhpDRCTrwJ7wdaRvDebZp6dR7CbYTDUTZB4uraZo
2026-02-04 04:34:19.004 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.14.23 waku 9aa62526f5cd5646b31ee9e1cd71446fa7854ea15c208315f72c6c10e02dd7a3
2026-02-04 04:34:19.037 DEBUG [src.node.docker_mananger] Container started with ID 9aa62526f5cd. Setting up logs at ./log/docker/node2_2026-02-04_04-34-17__e9786045-9e77-4a79-adee-aaf677e73b8e__wakuorg_nwaku:latest.log
2026-02-04 04:34:19.038 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41919
2026-02-04 04:34:19.038 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:34:20.038 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41919/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:20.042 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-04 04:34:20.042 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:34:20.042 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41919/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:20.045 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.23/tcp/41920/p2p/16Uiu2HAmJDZwWuAoRQ8i9A8T9TFi8FrGV3P5PmvUTgwS6eJoEoaR","/ip4/172.18.14.23/tcp/41921/ws/p2p/16Uiu2HAmJDZwWuAoRQ8i9A8T9TFi8FrGV3P5PmvUTgwS6eJoEoaR"],"enrUri":"enr:-L24QMy38VZ__D1_FNVQjSxtspafy_jAtEJGiFr3FlrzihSRLh-qreAX8CoBvEYc2lIga9ZrEd_gd8SWJLhi6zEfjnQCgmlkgnY0gmlwhKwSDheKbXVsdGlhZGRyc5YACASsEg4XBqPAAAoErBIOFwajwd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUqMAQFqAm40rF7NSJl1wMTgn4H4mWATmqE6CtT_f7VKDdGNwgqPAg3VkcIKjwoV3YWt1MgA"}'
2026-02-04 04:34:20.045 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:34:20.046 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41919/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.32/tcp/34886/p2p/16Uiu2HAkxzsgdhpDRCTrwJ7wdaRvDebZp6dR7CbYTDUTZB4uraZo"]'
2026-02-04 04:34:20.073 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:20.075 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-04 04:34:20.075 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34885/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 04:34:20.089 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:20.090 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41919/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "4e88088b-f9ec-44bf-9ad1-bbadf3027917", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 04:34:20.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"4e88088b-f9ec-44bf-9ad1-bbadf3027917","statusDesc":"OK"}'
2026-02-04 04:34:20.104 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34885/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:34:20.111 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:20.112 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 04:34:20.212 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 04:34:20.212 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41919/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:20.215 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770179660103949719,"ephemeral":false}]'
2026-02-04 04:34:20.217 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:41919/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345678901234567890123456789012345678901234567890", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-04 04:34:20.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345678901234567890123456789012345678901234567890","statusDesc":"OK"}'
2026-02-04 04:34:20.226 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34885/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:34:20.229 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:20.229 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 04:34:20.329 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 04:34:20.329 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41919/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:20.331 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41919/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
2026-02-04 04:34:20.334 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 04:34:20.335 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 04:34:20.335 DEBUG [src.node.waku_node] Stopping container with id b9bedfaf0397
2026-02-04 04:34:20.830 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:34:20.831 DEBUG [src.node.waku_node] Stopping container with id 9aa62526f5cd
2026-02-04 04:34:21.399 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:34:21.402 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 04:34:21.412 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 04:34:21.417 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
