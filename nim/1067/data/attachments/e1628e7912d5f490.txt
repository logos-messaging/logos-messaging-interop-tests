2026-02-04 04:34:01.203 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-04 04:34:01.203 DEBUG [tests.conftest] Running test: test_message_published_on_different_pubsub_topic_is_not_retrieved with id: 2026-02-04_04-34-01__412f8d52-328c-42da-b211-2ad301e9b772
2026-02-04 04:34:01.203 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-04 04:34:01.204 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-04 04:34:01.204 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-04 04:34:01.211 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:34:01.211 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-04_04-34-01__412f8d52-328c-42da-b211-2ad301e9b772__wakuorg_nwaku:latest.log
2026-02-04 04:34:01.211 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:34:01.211 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:34:01.212 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:34:01.213 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.20.32
2026-02-04 04:34:01.213 DEBUG [src.node.docker_mananger] Generated ports ['31620', '31621', '31622', '31623', '31624']
2026-02-04 04:34:01.213 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:34:01.213 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:34:01.213 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:34:01.213 DEBUG [src.node.docker_mananger] docker run -i -t -p 31620:31620 -p 31621:31621 -p 31622:31622 -p 31623:31623 -p 31624:31624 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31622 --rest-port=31620 --tcp-port=31621 --discv5-udp-port=31623 --rest-address=0.0.0.0 --nat=extip:172.18.20.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcfcfd33bc6fc9d2e7b2ab0c820cabc699afcbef1e3a9acd3f92c0bf7ccdbd4c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31624 --metrics-logging=true --relay=true
2026-02-04 04:34:01.399 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.20.32 waku 99a13f7d62db7fc1f7de3f32901698b5e29f3df54b17b8573981993fbf96dca4
2026-02-04 04:34:01.428 DEBUG [src.node.docker_mananger] Container started with ID 99a13f7d62db. Setting up logs at ./log/docker/node1_2026-02-04_04-34-01__412f8d52-328c-42da-b211-2ad301e9b772__wakuorg_nwaku:latest.log
2026-02-04 04:34:01.428 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31620
2026-02-04 04:34:01.429 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:34:01.457 ERROR [src.node.docker_mananger] Max retries reached for container a8def8f90ad9. Exiting log stream.
2026-02-04 04:34:02.012 ERROR [src.node.docker_mananger] Max retries reached for container e7b63da9bb81. Exiting log stream.
2026-02-04 04:34:02.430 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31620/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:02.433 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:34:02.434 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:34:02.434 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31620/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:02.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.32/tcp/31621/p2p/16Uiu2HAkyfcjNRR3r4hVQsDtA8yGWbkteMyzxVwK3S3n999uFAZY","/ip4/172.18.20.32/tcp/31622/ws/p2p/16Uiu2HAkyfcjNRR3r4hVQsDtA8yGWbkteMyzxVwK3S3n999uFAZY"],"enrUri":"enr:-L24QGTnjS7qyFZij-4jeRqLkpDg8ekseAu8rptlLVD-DUtJbGMMWNK2A7aYykwz3KES-xmMBX5pBLjVE4kff9BeSBACgmlkgnY0gmlwhKwSFCCKbXVsdGlhZGRyc5YACASsEhQgBnuFAAoErBIUIAZ7ht0DgnJzhQADAQAAiXNlY3AyNTZrMaECPwE0q1kGq1nC6arWjcfMPRxBYwLEWSJ5XlgJWXhiexODdGNwgnuFg3VkcIJ7h4V3YWt1MgE"}'
2026-02-04 04:34:02.436 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:34:02.443 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-04 04:34:02.443 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-04_04-34-01__412f8d52-328c-42da-b211-2ad301e9b772__wakuorg_nwaku:latest.log
2026-02-04 04:34:02.444 DEBUG [src.node.waku_node] Starting Node...
2026-02-04 04:34:02.444 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-04 04:34:02.445 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-04 04:34:02.445 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.112.44
2026-02-04 04:34:02.445 DEBUG [src.node.docker_mananger] Generated ports ['15814', '15815', '15816', '15817', '15818']
2026-02-04 04:34:02.445 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-04 04:34:02.445 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-04 04:34:02.446 DEBUG [src.node.waku_node] Using volumes []
2026-02-04 04:34:02.446 DEBUG [src.node.docker_mananger] docker run -i -t -p 15814:15814 -p 15815:15815 -p 15816:15816 -p 15817:15817 -p 15818:15818 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15816 --rest-port=15814 --tcp-port=15815 --discv5-udp-port=15817 --rest-address=0.0.0.0 --nat=extip:172.18.112.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=baca641b70e97d7a1e2d5ff30e8b9dbb2c8cbd9e166c9ff4ab3daeec9fcc0e14 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15818 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGTnjS7qyFZij-4jeRqLkpDg8ekseAu8rptlLVD-DUtJbGMMWNK2A7aYykwz3KES-xmMBX5pBLjVE4kff9BeSBACgmlkgnY0gmlwhKwSFCCKbXVsdGlhZGRyc5YACASsEhQgBnuFAAoErBIUIAZ7ht0DgnJzhQADAQAAiXNlY3AyNTZrMaECPwE0q1kGq1nC6arWjcfMPRxBYwLEWSJ5XlgJWXhiexODdGNwgnuFg3VkcIJ7h4V3YWt1MgE
2026-02-04 04:34:02.627 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.112.44 waku a7cb56809c719697cbfbf28fdf537d340b294b13f74a8596e164be7302085089
2026-02-04 04:34:02.659 DEBUG [src.node.docker_mananger] Container started with ID a7cb56809c71. Setting up logs at ./log/docker/node2_2026-02-04_04-34-01__412f8d52-328c-42da-b211-2ad301e9b772__wakuorg_nwaku:latest.log
2026-02-04 04:34:02.660 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15814
2026-02-04 04:34:02.660 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-04 04:34:03.661 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15814/health" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:03.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-04 04:34:03.672 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-04 04:34:03.672 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15814/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:03.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.44/tcp/15815/p2p/16Uiu2HAm9hmUn8pnoEQDiKEirTsr4yiLomBuNAJgBNk9SPZJsVdG","/ip4/172.18.112.44/tcp/15816/ws/p2p/16Uiu2HAm9hmUn8pnoEQDiKEirTsr4yiLomBuNAJgBNk9SPZJsVdG"],"enrUri":"enr:-L24QIjcBo_zUui7zPFZwrIljgh7eVEQR9-ORV9Mvw6xpQiEHqLIZx-Tn7VAttqJCdysp4UfwyIBNGQ1Kli1nkV-R8ACgmlkgnY0gmlwhKwScCyKbXVsdGlhZGRyc5YACASsEnAsBj3HAAoErBJwLAY9yN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC1CMg5XGfmogkNfKbWDRpQqZN4kdWYchpfFiYgl6Z0AeDdGNwgj3Hg3VkcII9yYV3YWt1MgE"}'
2026-02-04 04:34:03.677 INFO [src.node.waku_node] REST service is ready !!
2026-02-04 04:34:03.678 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15814/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.20.32/tcp/31621/p2p/16Uiu2HAkyfcjNRR3r4hVQsDtA8yGWbkteMyzxVwK3S3n999uFAZY"]'
2026-02-04 04:34:03.683 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:03.683 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-04 04:34:03.683 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31620/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 04:34:03.687 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:03.687 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15814/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-04 04:34:03.691 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:03.694 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31620/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:34:03.698 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:03.699 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 04:34:03.799 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-04 04:34:03.799 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31620/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:03.802 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770179643694102528,"ephemeral":false,"proof":""}]'
2026-02-04 04:34:03.805 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-04 04:34:03.805 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15814/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:03.807 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770179643694102528,"ephemeral":false,"proof":""}]'
2026-02-04 04:34:03.809 INFO [src.steps.relay] WARM UP successful!!
2026-02-04 04:34:03.810 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31620/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2026-02-04 04:34:03.816 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:03.818 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15814/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2026-02-04 04:34:03.826 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:03.827 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31620/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-04 04:34:03.834 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-04 04:34:03.834 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-04 04:34:03.934 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15814/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-04 04:34:03.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2026-02-04 04:34:03.939 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-04 04:34:03.940 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-04 04:34:03.940 DEBUG [src.node.waku_node] Stopping container with id 99a13f7d62db
2026-02-04 04:34:04.526 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:34:04.526 DEBUG [src.node.waku_node] Stopping container with id a7cb56809c71
2026-02-04 04:34:05.092 DEBUG [src.node.waku_node] Container stopped.
2026-02-04 04:34:05.095 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-04 04:34:05.101 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-04 04:34:05.107 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
