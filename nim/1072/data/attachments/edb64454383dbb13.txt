2026-02-07 04:35:33.073 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-07 04:35:33.073 DEBUG [tests.conftest] Running test: test_publish_with_invalid_version with id: 2026-02-07_04-35-33__4ac131cf-c3f5-417b-96a5-fc88dd5f4fc2
2026-02-07 04:35:33.073 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-07 04:35:33.074 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-07 04:35:33.074 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-07 04:35:33.080 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:35:33.080 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-07_04-35-33__4ac131cf-c3f5-417b-96a5-fc88dd5f4fc2__wakuorg_nwaku:latest.log
2026-02-07 04:35:33.081 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:35:33.081 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:35:33.082 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:35:33.082 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.237.216
2026-02-07 04:35:33.082 DEBUG [src.node.docker_mananger] Generated ports ['8947', '8948', '8949', '8950', '8951']
2026-02-07 04:35:33.082 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:35:33.083 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:35:33.083 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:35:33.083 DEBUG [src.node.docker_mananger] docker run -i -t -p 8947:8947 -p 8948:8948 -p 8949:8949 -p 8950:8950 -p 8951:8951 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8949 --rest-port=8947 --tcp-port=8948 --discv5-udp-port=8950 --rest-address=0.0.0.0 --nat=extip:172.18.237.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f9f9c53e53e8bd1d5dbfab2baaaedc8da3af6c46e82a1bf780130367206d8f3b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8951 --metrics-logging=true --relay=true
2026-02-07 04:35:33.276 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.237.216 waku c0530f83a09dc69ccbeff500971484077e25a49ede9086dcd183cc342ad747ca
2026-02-07 04:35:33.308 DEBUG [src.node.docker_mananger] Container started with ID c0530f83a09d. Setting up logs at ./log/docker/node1_2026-02-07_04-35-33__4ac131cf-c3f5-417b-96a5-fc88dd5f4fc2__wakuorg_nwaku:latest.log
2026-02-07 04:35:33.309 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8947
2026-02-07 04:35:33.309 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:35:33.321 ERROR [src.node.docker_mananger] Max retries reached for container 3c2a8c006119. Exiting log stream.
2026-02-07 04:35:33.848 ERROR [src.node.docker_mananger] Max retries reached for container 59380a7199c7. Exiting log stream.
2026-02-07 04:35:34.309 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8947/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:35:34.313 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:35:34.313 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:35:34.313 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8947/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:35:34.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.216/tcp/8948/p2p/16Uiu2HAmQA1Qoj3mAS834FqmznkNfSxFqQRNvmHi2WkmeY1cabAu","/ip4/172.18.237.216/tcp/8949/ws/p2p/16Uiu2HAmQA1Qoj3mAS834FqmznkNfSxFqQRNvmHi2WkmeY1cabAu"],"enrUri":"enr:-L24QI7SudWNCxhPh3LQUcA8csbwRxdyKjlmJL3UCec-xZrNInZ6CobdO5qL2c3kDBIVpa8c2GikDpoiMvLuQ1ElYtACgmlkgnY0gmlwhKwS7diKbXVsdGlhZGRyc5YACASsEu3YBiL0AAoErBLt2AYi9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqt-ZUj_b3xQ69Up7rfjW4Fq6mmM8MOprbYXWvym_5Z6DdGNwgiL0g3VkcIIi9oV3YWt1MgE"}'
2026-02-07 04:35:34.315 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:35:34.322 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:35:34.322 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-07_04-35-33__4ac131cf-c3f5-417b-96a5-fc88dd5f4fc2__wakuorg_nwaku:latest.log
2026-02-07 04:35:34.322 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:35:34.322 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:35:34.323 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:35:34.323 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.43.83
2026-02-07 04:35:34.324 DEBUG [src.node.docker_mananger] Generated ports ['61609', '61610', '61611', '61612', '61613']
2026-02-07 04:35:34.324 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:35:34.324 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:35:34.324 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:35:34.324 DEBUG [src.node.docker_mananger] docker run -i -t -p 61609:61609 -p 61610:61610 -p 61611:61611 -p 61612:61612 -p 61613:61613 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61611 --rest-port=61609 --tcp-port=61610 --discv5-udp-port=61612 --rest-address=0.0.0.0 --nat=extip:172.18.43.83 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=70dfcb4141e30c468ddeae3a0d8fda3fddedbbad791ce812f6c2c23cc634e173 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61613 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QI7SudWNCxhPh3LQUcA8csbwRxdyKjlmJL3UCec-xZrNInZ6CobdO5qL2c3kDBIVpa8c2GikDpoiMvLuQ1ElYtACgmlkgnY0gmlwhKwS7diKbXVsdGlhZGRyc5YACASsEu3YBiL0AAoErBLt2AYi9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqt-ZUj_b3xQ69Up7rfjW4Fq6mmM8MOprbYXWvym_5Z6DdGNwgiL0g3VkcIIi9oV3YWt1MgE
2026-02-07 04:35:34.510 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.43.83 waku d0aa69fb97605e6b1bcb411b0fafa3f17cc782eb29df43589fcaa614eec5130f
2026-02-07 04:35:34.539 DEBUG [src.node.docker_mananger] Container started with ID d0aa69fb9760. Setting up logs at ./log/docker/node2_2026-02-07_04-35-33__4ac131cf-c3f5-417b-96a5-fc88dd5f4fc2__wakuorg_nwaku:latest.log
2026-02-07 04:35:34.540 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61609
2026-02-07 04:35:34.540 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:35:35.540 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61609/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:35:35.553 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:35:35.555 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:35:35.557 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61609/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:35:35.562 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.83/tcp/61610/p2p/16Uiu2HAmJnD8tzhfm39F1Bxw67DAEkvZq7ZWsB1J8eUru2BVFZbo","/ip4/172.18.43.83/tcp/61611/ws/p2p/16Uiu2HAmJnD8tzhfm39F1Bxw67DAEkvZq7ZWsB1J8eUru2BVFZbo"],"enrUri":"enr:-L24QKKonXUkdefnAyYUtkPPbGMCjK1fJS4Vgg3MUrpp0U6jSKfNYZugCOofQILyRods-e--xvDB8z167AS5GQ7MQXgCgmlkgnY0gmlwhKwSK1OKbXVsdGlhZGRyc5YACASsEitTBvCqAAoErBIrUwbwq90DgnJzhQADAQAAiXNlY3AyNTZrMaEDWv-lEA16seeIZ0_EF8cdVZOj7hcsgPVQ-noibZXyM9KDdGNwgvCqg3VkcILwrIV3YWt1MgE"}'
2026-02-07 04:35:35.562 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:35:35.562 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61609/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.237.216/tcp/8948/p2p/16Uiu2HAmQA1Qoj3mAS834FqmznkNfSxFqQRNvmHi2WkmeY1cabAu"]'
2026-02-07 04:35:35.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:35:35.565 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-07 04:35:35.565 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8947/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-07 04:35:35.569 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:35:35.569 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61609/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-07 04:35:35.574 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:35:35.575 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:35:35.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:35:35.581 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-07 04:35:35.681 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-07 04:35:35.681 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:35:35.683 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770438935575419904,"ephemeral":false,"proof":""}]'
2026-02-07 04:35:35.686 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-07 04:35:35.686 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61609/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:35:35.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770438935575419904,"ephemeral":false,"proof":""}]'
2026-02-07 04:35:35.690 INFO [src.steps.relay] WARM UP successful!!
2026-02-07 04:35:35.691 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)', "version": 2.1}'
2026-02-07 04:35:35.693 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-07 04:35:35.696 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-07 04:35:35.697 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-07 04:35:35.697 DEBUG [src.node.waku_node] Stopping container with id c0530f83a09d
2026-02-07 04:35:36.283 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:35:36.284 DEBUG [src.node.waku_node] Stopping container with id d0aa69fb9760
2026-02-07 04:35:36.880 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:35:36.883 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-07 04:35:36.889 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:35:36.894 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
