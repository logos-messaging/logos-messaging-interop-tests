2026-02-07 04:30:43.071 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-07 04:30:43.072 DEBUG [tests.conftest] Running test: test_lightpush with id: 2026-02-07_04-30-43__30589031-b78d-46c1-a5c2-97f5693a5676
2026-02-07 04:30:43.072 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-07 04:30:43.073 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-07 04:30:43.073 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-07 04:30:43.073 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-07 04:30:43.074 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-07 04:30:43.083 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:30:43.084 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-07_04-30-43__30589031-b78d-46c1-a5c2-97f5693a5676__wakuorg_nwaku:latest.log
2026-02-07 04:30:43.084 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:30:43.084 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:30:43.085 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:30:43.085 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.237.50
2026-02-07 04:30:43.086 DEBUG [src.node.docker_mananger] Generated ports ['30312', '30313', '30314', '30315', '30316']
2026-02-07 04:30:43.086 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:30:43.086 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:30:43.086 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:30:43.086 DEBUG [src.node.docker_mananger] docker run -i -t -p 30312:30312 -p 30313:30313 -p 30314:30314 -p 30315:30315 -p 30316:30316 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30314 --rest-port=30312 --tcp-port=30313 --discv5-udp-port=30315 --rest-address=0.0.0.0 --nat=extip:172.18.237.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=720afcaafa74f768ebc0a34f2f41aedcedf2ebae26ce8bd5fefb870c8f007ac2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30316 --metrics-logging=true --lightpush=true --relay=true
2026-02-07 04:30:43.265 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.237.50 waku 1dca73eb30ac8b73818491b22d9fb88dc4e7bbfedee4a698f78ced3496895b5d
2026-02-07 04:30:43.298 DEBUG [src.node.docker_mananger] Container started with ID 1dca73eb30ac. Setting up logs at ./log/docker/node1_2026-02-07_04-30-43__30589031-b78d-46c1-a5c2-97f5693a5676__wakuorg_nwaku:latest.log
2026-02-07 04:30:43.299 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30312
2026-02-07 04:30:43.299 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:30:43.375 ERROR [src.node.docker_mananger] Max retries reached for container b5330a454ca5. Exiting log stream.
2026-02-07 04:30:43.895 ERROR [src.node.docker_mananger] Max retries reached for container 7081d705abbf. Exiting log stream.
2026-02-07 04:30:44.300 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30312/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:30:44.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:30:44.303 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:30:44.303 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30312/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:30:44.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.50/tcp/30313/p2p/16Uiu2HAm4LGYu2bbnJNwpGmwFQHFrkDYV7kSFjbsFb1PoXaQ1GTL","/ip4/172.18.237.50/tcp/30314/ws/p2p/16Uiu2HAm4LGYu2bbnJNwpGmwFQHFrkDYV7kSFjbsFb1PoXaQ1GTL"],"enrUri":"enr:-L24QEoYqaRu9Oq8tnB6pdcfo9UFdDeIBnR896IYRfnArX6QOKjqZNkqxBBf00nouG6rRG5kD_UPyzR9YDbFSnghBEgCgmlkgnY0gmlwhKwS7TKKbXVsdGlhZGRyc5YACASsEu0yBnZpAAoErBLtMgZ2at0DgnJzhQADAQAAiXNlY3AyNTZrMaEChFbJacn5-wsalsy_T1SjnnGh_dVXlsbVUCrnRvw8DaODdGNwgnZpg3VkcIJ2a4V3YWt1Mgk"}'
2026-02-07 04:30:44.306 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:30:44.312 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:30:44.312 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-07_04-30-43__30589031-b78d-46c1-a5c2-97f5693a5676__wakuorg_nwaku:latest.log
2026-02-07 04:30:44.312 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:30:44.312 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:30:44.313 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:30:44.313 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.23.33
2026-02-07 04:30:44.313 DEBUG [src.node.docker_mananger] Generated ports ['56626', '56627', '56628', '56629', '56630']
2026-02-07 04:30:44.314 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:30:44.314 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:30:44.314 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:30:44.314 DEBUG [src.node.docker_mananger] docker run -i -t -p 56626:56626 -p 56627:56627 -p 56628:56628 -p 56629:56629 -p 56630:56630 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56628 --rest-port=56626 --tcp-port=56627 --discv5-udp-port=56629 --rest-address=0.0.0.0 --nat=extip:172.18.23.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd3dda9eff9cb52bcb1a94d0bdb8f8ffaefdbabadf1ee7aa14c782b797bccb1d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56630 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QEoYqaRu9Oq8tnB6pdcfo9UFdDeIBnR896IYRfnArX6QOKjqZNkqxBBf00nouG6rRG5kD_UPyzR9YDbFSnghBEgCgmlkgnY0gmlwhKwS7TKKbXVsdGlhZGRyc5YACASsEu0yBnZpAAoErBLtMgZ2at0DgnJzhQADAQAAiXNlY3AyNTZrMaEChFbJacn5-wsalsy_T1SjnnGh_dVXlsbVUCrnRvw8DaODdGNwgnZpg3VkcIJ2a4V3YWt1Mgk
2026-02-07 04:30:44.487 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.23.33 waku 759c449adbbaa69171da6901e0cee02db6cc26f26d8f8b7fb239c8542092f2fa
2026-02-07 04:30:44.515 DEBUG [src.node.docker_mananger] Container started with ID 759c449adbba. Setting up logs at ./log/docker/node1_2026-02-07_04-30-43__30589031-b78d-46c1-a5c2-97f5693a5676__wakuorg_nwaku:latest.log
2026-02-07 04:30:44.516 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56626
2026-02-07 04:30:44.516 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:30:45.516 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56626/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:30:45.529 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:30:45.531 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:30:45.533 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56626/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:30:45.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.33/tcp/56627/p2p/16Uiu2HAmGeGh4iwvWp5ceC8JuTii6j6NQw3ghTx1VjHAW7Z2uZgR","/ip4/172.18.23.33/tcp/56628/ws/p2p/16Uiu2HAmGeGh4iwvWp5ceC8JuTii6j6NQw3ghTx1VjHAW7Z2uZgR"],"enrUri":"enr:-L24QB9luFiIPfm0izPb2aSIt3hs-0fTNlgiYWXnfOOlto4ZHOVRv_ZRYomF0ucbrrRN8d6h8wWqvvWA8x7LlPQwfMgCgmlkgnY0gmlwhKwSFyGKbXVsdGlhZGRyc5YACASsEhchBt0zAAoErBIXIQbdNN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOz-kx24mdrYPsAKbF_DEFoq7N2a2SBOeO7y0Nf6rhZ6DdGNwgt0zg3VkcILdNYV3YWt1MgE"}'
2026-02-07 04:30:45.537 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:30:45.543 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:30:45.543 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-07_04-30-43__30589031-b78d-46c1-a5c2-97f5693a5676__wakuorg_nwaku:latest.log
2026-02-07 04:30:45.543 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:30:45.543 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:30:45.545 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:30:45.545 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.26.179
2026-02-07 04:30:45.545 DEBUG [src.node.docker_mananger] Generated ports ['47070', '47071', '47072', '47073', '47074']
2026-02-07 04:30:45.545 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:30:45.545 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:30:45.545 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:30:45.545 DEBUG [src.node.docker_mananger] docker run -i -t -p 47070:47070 -p 47071:47071 -p 47072:47072 -p 47073:47073 -p 47074:47074 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47072 --rest-port=47070 --tcp-port=47071 --discv5-udp-port=47073 --rest-address=0.0.0.0 --nat=extip:172.18.26.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6fe00b0e0118fd1c469cbd853319fbce0ea7a0cb49f4b2cee3e71c5e3b04fcfd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47074 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-L24QEoYqaRu9Oq8tnB6pdcfo9UFdDeIBnR896IYRfnArX6QOKjqZNkqxBBf00nouG6rRG5kD_UPyzR9YDbFSnghBEgCgmlkgnY0gmlwhKwS7TKKbXVsdGlhZGRyc5YACASsEu0yBnZpAAoErBLtMgZ2at0DgnJzhQADAQAAiXNlY3AyNTZrMaEChFbJacn5-wsalsy_T1SjnnGh_dVXlsbVUCrnRvw8DaODdGNwgnZpg3VkcIJ2a4V3YWt1Mgk --lightpushnode=/ip4/172.18.237.50/tcp/30313/p2p/16Uiu2HAm4LGYu2bbnJNwpGmwFQHFrkDYV7kSFjbsFb1PoXaQ1GTL
2026-02-07 04:30:45.723 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.26.179 waku bddabb584aa14e0082812632eae0c6255ddd406202a915086b44df5cd27f84da
2026-02-07 04:30:45.752 DEBUG [src.node.docker_mananger] Container started with ID bddabb584aa1. Setting up logs at ./log/docker/node1_2026-02-07_04-30-43__30589031-b78d-46c1-a5c2-97f5693a5676__wakuorg_nwaku:latest.log
2026-02-07 04:30:45.753 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47070
2026-02-07 04:30:45.753 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:30:46.753 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47070/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:30:46.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:30:46.762 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:30:46.762 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47070/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:30:46.775 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.26.179/tcp/47071/p2p/16Uiu2HAm75jcPfVPg42FfWTbbS67DGpjTDphR8jUo6NeGKWmK2LA","/ip4/172.18.26.179/tcp/47072/ws/p2p/16Uiu2HAm75jcPfVPg42FfWTbbS67DGpjTDphR8jUo6NeGKWmK2LA"],"enrUri":"enr:-L24QHXM6Zp2-c3-rSkE8yOBkROCytIN9eMVNkKPPXL3e1-KHlj4vkqRj7Hk1mkKE22qBEjloGuOABBRJ7Yn-Rr5O78CgmlkgnY0gmlwhKwSGrOKbXVsdGlhZGRyc5YACASsEhqzBrffAAoErBIaswa34N0DgnJzhQADAQAAiXNlY3AyNTZrMaECrTC7hnbuyNWRI0Hd_sAnL5HpbR4RGzKnr6zyC98UgyuDdGNwgrffg3VkcIK34YV3YWt1Mgk"}'
2026-02-07 04:30:46.775 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:30:46.776 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30312/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-07 04:30:46.780 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:30:46.781 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56626/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-07 04:30:46.788 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:30:46.789 DEBUG [src.steps.light_push] Lightpushing message
2026-02-07 04:30:46.791 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47070/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1770438646789134751}}'
2026-02-07 04:30:46.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:30:46.806 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-07 04:30:46.906 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2026-02-07 04:30:46.907 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30312/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:30:46.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770438646789134751,"ephemeral":false,"proof":""}]'
2026-02-07 04:30:46.910 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2026-02-07 04:30:46.910 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56626/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:30:46.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770438646789134751,"ephemeral":false,"proof":""}]'
2026-02-07 04:30:46.915 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-07 04:30:46.916 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-07 04:30:46.916 DEBUG [src.node.waku_node] Stopping container with id 1dca73eb30ac
2026-02-07 04:30:47.414 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:30:47.415 DEBUG [src.node.waku_node] Stopping container with id 759c449adbba
2026-02-07 04:30:47.920 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:30:47.921 DEBUG [src.node.waku_node] Stopping container with id bddabb584aa1
2026-02-07 04:30:48.226 ERROR [src.node.docker_mananger] Max retries reached for container 1dca73eb30ac. Exiting log stream.
2026-02-07 04:30:48.420 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:30:48.421 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-07 04:30:48.432 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:30:48.440 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:30:48.448 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
