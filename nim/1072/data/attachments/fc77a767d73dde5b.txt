2026-02-07 04:32:34.116 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-07 04:32:34.116 DEBUG [tests.conftest] Running test: test_publish_with_invalid_content_topics with id: 2026-02-07_04-32-34__84d6c0d1-0455-4413-b758-a1ee3735fbc1
2026-02-07 04:32:34.117 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-07 04:32:34.117 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-07 04:32:34.117 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-07 04:32:34.124 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:34.124 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-07_04-32-34__84d6c0d1-0455-4413-b758-a1ee3735fbc1__wakuorg_nwaku:latest.log
2026-02-07 04:32:34.125 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:34.125 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:34.126 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:34.126 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.248.71
2026-02-07 04:32:34.126 DEBUG [src.node.docker_mananger] Generated ports ['40024', '40025', '40026', '40027', '40028']
2026-02-07 04:32:34.127 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:34.127 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:34.127 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:34.127 DEBUG [src.node.docker_mananger] docker run -i -t -p 40024:40024 -p 40025:40025 -p 40026:40026 -p 40027:40027 -p 40028:40028 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40026 --rest-port=40024 --tcp-port=40025 --discv5-udp-port=40027 --rest-address=0.0.0.0 --nat=extip:172.18.248.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c7acdeec05eb65e8dcbf11cafec345d3e3bce346b853ecca579a4c07cecad6ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40028 --metrics-logging=true --relay=true
2026-02-07 04:32:34.321 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.248.71 waku 513c1578797608dc83dbcd492848b38d5f336545e3ffaa51112b1c7b81b4732d
2026-02-07 04:32:34.350 DEBUG [src.node.docker_mananger] Container started with ID 513c15787976. Setting up logs at ./log/docker/node1_2026-02-07_04-32-34__84d6c0d1-0455-4413-b758-a1ee3735fbc1__wakuorg_nwaku:latest.log
2026-02-07 04:32:34.352 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40024
2026-02-07 04:32:34.353 ERROR [src.node.docker_mananger] Max retries reached for container 0670a4b34f1b. Exiting log stream.
2026-02-07 04:32:34.353 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:34.908 ERROR [src.node.docker_mananger] Max retries reached for container 1154067e023d. Exiting log stream.
2026-02-07 04:32:35.356 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40024/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:35.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:32:35.360 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:35.360 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40024/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:35.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.71/tcp/40025/p2p/16Uiu2HAkuazqKvvgnYka5FgYvTesUqmUtqq4V8VEkX71EyzQfs74","/ip4/172.18.248.71/tcp/40026/ws/p2p/16Uiu2HAkuazqKvvgnYka5FgYvTesUqmUtqq4V8VEkX71EyzQfs74"],"enrUri":"enr:-L24QHa7wT0WrNrGa4Sx-KUs1zQiC9pbE-uM_AG6EoKuvdyHcvN4B74DXnSEECZ2pYxfBcbat3aVIgTq1s832ffMRncCgmlkgnY0gmlwhKwS-EeKbXVsdGlhZGRyc5YACASsEvhHBpxZAAoErBL4RwacWt0DgnJzhQADAQAAiXNlY3AyNTZrMaECAmOLrHJrDq9IUpRh9_zwYo3hL-P-UcVycWBQVOFtE-eDdGNwgpxZg3VkcIKcW4V3YWt1MgE"}'
2026-02-07 04:32:35.362 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:35.369 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:35.369 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-07_04-32-34__84d6c0d1-0455-4413-b758-a1ee3735fbc1__wakuorg_nwaku:latest.log
2026-02-07 04:32:35.369 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:35.369 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:35.370 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:35.370 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.67.126
2026-02-07 04:32:35.371 DEBUG [src.node.docker_mananger] Generated ports ['39020', '39021', '39022', '39023', '39024']
2026-02-07 04:32:35.371 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:35.371 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:35.371 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:35.371 DEBUG [src.node.docker_mananger] docker run -i -t -p 39020:39020 -p 39021:39021 -p 39022:39022 -p 39023:39023 -p 39024:39024 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39022 --rest-port=39020 --tcp-port=39021 --discv5-udp-port=39023 --rest-address=0.0.0.0 --nat=extip:172.18.67.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=81d90f0e0a217aaf36aaeecb0d9aebf35a2bc6caee79dc1b62a8fa428fd5ea88 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39024 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QHa7wT0WrNrGa4Sx-KUs1zQiC9pbE-uM_AG6EoKuvdyHcvN4B74DXnSEECZ2pYxfBcbat3aVIgTq1s832ffMRncCgmlkgnY0gmlwhKwS-EeKbXVsdGlhZGRyc5YACASsEvhHBpxZAAoErBL4RwacWt0DgnJzhQADAQAAiXNlY3AyNTZrMaECAmOLrHJrDq9IUpRh9_zwYo3hL-P-UcVycWBQVOFtE-eDdGNwgpxZg3VkcIKcW4V3YWt1MgE
2026-02-07 04:32:35.565 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.67.126 waku 0f6aac3f02285df11feeeacc358e55bc33d263f92c7211eeca5877cd7546d692
2026-02-07 04:32:35.596 DEBUG [src.node.docker_mananger] Container started with ID 0f6aac3f0228. Setting up logs at ./log/docker/node2_2026-02-07_04-32-34__84d6c0d1-0455-4413-b758-a1ee3735fbc1__wakuorg_nwaku:latest.log
2026-02-07 04:32:35.597 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39020
2026-02-07 04:32:35.597 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:36.597 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39020/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:36.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:32:36.616 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:36.616 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39020/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:36.621 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.67.126/tcp/39021/p2p/16Uiu2HAmMpMMptyBGXU5yh4F7houQGg8X4gLoKvKzJGeG9aNocsS","/ip4/172.18.67.126/tcp/39022/ws/p2p/16Uiu2HAmMpMMptyBGXU5yh4F7houQGg8X4gLoKvKzJGeG9aNocsS"],"enrUri":"enr:-L24QLMVceHuY7uIH1_oD0lLBPEOdr_CrPeMdlQKOH8cJ47oO0FkImhja-SeevJ_v1LR0YUT0QHXt9_5m40DYi_BeZoCgmlkgnY0gmlwhKwSQ36KbXVsdGlhZGRyc5YACASsEkN-BphtAAoErBJDfgaYbt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDiB8qNCQb599tQ_Bkn8E4MCyWV2Q46XwP9zPvt5ruDPmDdGNwgphtg3VkcIKYb4V3YWt1MgE"}'
2026-02-07 04:32:36.621 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:36.622 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39020/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.248.71/tcp/40025/p2p/16Uiu2HAkuazqKvvgnYka5FgYvTesUqmUtqq4V8VEkX71EyzQfs74"]'
2026-02-07 04:32:36.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:36.625 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-07 04:32:36.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40024/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-07 04:32:36.631 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:36.631 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39020/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-07 04:32:36.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:36.637 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:36.642 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:36.642 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-07 04:32:36.742 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-07 04:32:36.743 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:36.746 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770438756637095936,"ephemeral":false,"proof":""}]'
2026-02-07 04:32:36.747 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-07 04:32:36.747 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39020/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:36.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770438756637095936,"ephemeral":false,"proof":""}]'
2026-02-07 04:32:36.751 INFO [src.steps.relay] WARM UP successful!!
2026-02-07 04:32:36.752 DEBUG [tests.relay.test_publish] Running test with contetn topic Empty string
2026-02-07 04:32:36.752 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:36.755 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-07 04:32:36.755 DEBUG [tests.relay.test_publish] Running test with contetn topic A dictionary
2026-02-07 04:32:36.755 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": {"key": "YWFh"}, "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:36.758 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-07 04:32:36.758 DEBUG [tests.relay.test_publish] Running test with contetn topic An integer
2026-02-07 04:32:36.758 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": 1234567890, "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:36.760 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-07 04:32:36.761 DEBUG [tests.relay.test_publish] Running test with contetn topic A list
2026-02-07 04:32:36.761 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": ["YWFh"], "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:36.763 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-07 04:32:36.763 DEBUG [tests.relay.test_publish] Running test with contetn topic A bool
2026-02-07 04:32:36.764 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": true, "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:36.766 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40024/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-07 04:32:36.768 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-07 04:32:36.769 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-07 04:32:36.769 DEBUG [src.node.waku_node] Stopping container with id 513c15787976
2026-02-07 04:32:37.354 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:37.354 DEBUG [src.node.waku_node] Stopping container with id 0f6aac3f0228
2026-02-07 04:32:37.904 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:37.905 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-07 04:32:37.911 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:32:37.916 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
