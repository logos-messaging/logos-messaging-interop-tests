2026-02-07 04:33:52.674 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-07 04:33:52.674 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_no_request_id with id: 2026-02-07_04-33-52__80f571da-50ad-4a10-8d2e-55526cc91412
2026-02-07 04:33:52.674 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-07 04:33:52.675 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-07 04:33:52.675 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-07 04:33:52.682 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:33:52.682 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-07_04-33-52__80f571da-50ad-4a10-8d2e-55526cc91412__wakuorg_nwaku:latest.log
2026-02-07 04:33:52.682 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:33:52.683 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:33:52.684 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:33:52.684 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.219.234
2026-02-07 04:33:52.684 DEBUG [src.node.docker_mananger] Generated ports ['63485', '63486', '63487', '63488', '63489']
2026-02-07 04:33:52.684 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:33:52.685 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:33:52.685 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:33:52.685 DEBUG [src.node.docker_mananger] docker run -i -t -p 63485:63485 -p 63486:63486 -p 63487:63487 -p 63488:63488 -p 63489:63489 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63487 --rest-port=63485 --tcp-port=63486 --discv5-udp-port=63488 --rest-address=0.0.0.0 --nat=extip:172.18.219.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=48ef4ba5ba52b6a7c183cac4f9e2594e3561bc4de8bde321cabee7cb59dbe870 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63489 --metrics-logging=true --relay=true --filter=true
2026-02-07 04:33:52.874 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.219.234 waku 2e2644134978332496d35a9518203945379a272abdc9096f37a7766b7041db72
2026-02-07 04:33:52.907 DEBUG [src.node.docker_mananger] Container started with ID 2e2644134978. Setting up logs at ./log/docker/node1_2026-02-07_04-33-52__80f571da-50ad-4a10-8d2e-55526cc91412__wakuorg_nwaku:latest.log
2026-02-07 04:33:52.907 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63485
2026-02-07 04:33:52.907 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:33:52.916 ERROR [src.node.docker_mananger] Max retries reached for container d9d92d945af6. Exiting log stream.
2026-02-07 04:33:53.464 ERROR [src.node.docker_mananger] Max retries reached for container c600483d3fc6. Exiting log stream.
2026-02-07 04:33:53.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63485/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:53.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:33:53.912 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:33:53.912 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63485/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:53.914 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.234/tcp/63486/p2p/16Uiu2HAmQWbNShnPhW53JfQMBCcNtbDkq9Hft1XWP9LLJTTqvaUQ","/ip4/172.18.219.234/tcp/63487/ws/p2p/16Uiu2HAmQWbNShnPhW53JfQMBCcNtbDkq9Hft1XWP9LLJTTqvaUQ"],"enrUri":"enr:-L24QFtaRIs_iZx8u5Waf68XLxVHgBbS6jJ2GgaWUs-YQnXbE82VX4S254tVRdLxMbFIJjVqDzhcwCary1x4VrjhexYCgmlkgnY0gmlwhKwS2-qKbXVsdGlhZGRyc5YACASsEtvqBvf-AAoErBLb6gb3_90DgnJzhQADAQAAiXNlY3AyNTZrMaEDsCWc6u3b20poMWjikfZSJPAcwRXYXjxj59J53ZVHPWGDdGNwgvf-g3VkcIL4AIV3YWt1MgU"}'
2026-02-07 04:33:53.915 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:33:53.915 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-07 04:33:53.921 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:33:53.921 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-07_04-33-52__80f571da-50ad-4a10-8d2e-55526cc91412__wakuorg_nwaku:latest.log
2026-02-07 04:33:53.921 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:33:53.922 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:33:53.923 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:33:53.923 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.81.140
2026-02-07 04:33:53.923 DEBUG [src.node.docker_mananger] Generated ports ['51027', '51028', '51029', '51030', '51031']
2026-02-07 04:33:53.923 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:33:53.923 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:33:53.924 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:33:53.924 DEBUG [src.node.docker_mananger] docker run -i -t -p 51027:51027 -p 51028:51028 -p 51029:51029 -p 51030:51030 -p 51031:51031 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51029 --rest-port=51027 --tcp-port=51028 --discv5-udp-port=51030 --rest-address=0.0.0.0 --nat=extip:172.18.81.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d5a4fe4606acceff505bde4ad9edd734a573e1cd369fc68ce68fec6e56561c48 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51031 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFtaRIs_iZx8u5Waf68XLxVHgBbS6jJ2GgaWUs-YQnXbE82VX4S254tVRdLxMbFIJjVqDzhcwCary1x4VrjhexYCgmlkgnY0gmlwhKwS2-qKbXVsdGlhZGRyc5YACASsEtvqBvf-AAoErBLb6gb3_90DgnJzhQADAQAAiXNlY3AyNTZrMaEDsCWc6u3b20poMWjikfZSJPAcwRXYXjxj59J53ZVHPWGDdGNwgvf-g3VkcIL4AIV3YWt1MgU --filternode=/ip4/172.18.219.234/tcp/63486/p2p/16Uiu2HAmQWbNShnPhW53JfQMBCcNtbDkq9Hft1XWP9LLJTTqvaUQ
2026-02-07 04:33:54.103 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.81.140 waku 119842660a6805eae3e060f4c9517176850c16f082201a2ab6a93927e927d47f
2026-02-07 04:33:54.134 DEBUG [src.node.docker_mananger] Container started with ID 119842660a68. Setting up logs at ./log/docker/node2_2026-02-07_04-33-52__80f571da-50ad-4a10-8d2e-55526cc91412__wakuorg_nwaku:latest.log
2026-02-07 04:33:54.135 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51027
2026-02-07 04:33:54.135 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:33:55.135 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51027/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:55.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-07 04:33:55.139 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:33:55.139 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51027/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:55.141 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.140/tcp/51028/p2p/16Uiu2HAmRfphxcqjmUDHgqycF4G3YNxhxyJqHK4YrJ9YsZdFf44i","/ip4/172.18.81.140/tcp/51029/ws/p2p/16Uiu2HAmRfphxcqjmUDHgqycF4G3YNxhxyJqHK4YrJ9YsZdFf44i"],"enrUri":"enr:-L24QLo9jLL-AlUN_MITul6hFYT__AgldVCG60JjSzUsiMZZLaDRtE2VQh_b0rc0ToFEaCTaOqojGWhpdTZiCvt-w6wCgmlkgnY0gmlwhKwSUYyKbXVsdGlhZGRyc5YACASsElGMBsdUAAoErBJRjAbHVd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwV6bVXB4D9_FfQFKYaFMpP112OtgakAfQAKf3Mowi5ODdGNwgsdUg3VkcILHVoV3YWt1MgA"}'
2026-02-07 04:33:55.142 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:33:55.142 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51027/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.219.234/tcp/63486/p2p/16Uiu2HAmQWbNShnPhW53JfQMBCcNtbDkq9Hft1XWP9LLJTTqvaUQ"]'
2026-02-07 04:33:55.171 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:33:55.173 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-07 04:33:55.173 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63485/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-07 04:33:55.186 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:33:55.187 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51027/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6f477a3f-acab-4cfa-aee7-b7107f73929c", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-07 04:33:55.199 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"6f477a3f-acab-4cfa-aee7-b7107f73929c","statusDesc":"OK"}'
2026-02-07 04:33:55.201 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51027/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-07 04:33:55.203 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51027/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-07 04:33:55.205 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-07 04:33:55.206 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-07 04:33:55.207 DEBUG [src.node.waku_node] Stopping container with id 2e2644134978
2026-02-07 04:33:55.711 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:33:55.711 DEBUG [src.node.waku_node] Stopping container with id 119842660a68
2026-02-07 04:33:56.272 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:33:56.273 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-07 04:33:56.278 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:33:56.283 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
