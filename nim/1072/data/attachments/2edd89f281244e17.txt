2026-02-07 04:32:21.606 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-07 04:32:21.606 DEBUG [tests.conftest] Running test: test_single_pubsub_topic[/waku/2/rs/5/999] with id: 2026-02-07_04-32-21__2f036d65-a907-4f2a-a88c-870223a5c6c9
2026-02-07 04:32:21.606 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-07 04:32:21.607 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-07 04:32:21.607 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-07 04:32:21.614 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:21.615 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-07_04-32-21__2f036d65-a907-4f2a-a88c-870223a5c6c9__wakuorg_nwaku:latest.log
2026-02-07 04:32:21.615 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:21.615 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:21.616 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:21.616 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.71
2026-02-07 04:32:21.616 DEBUG [src.node.docker_mananger] Generated ports ['44836', '44837', '44838', '44839', '44840']
2026-02-07 04:32:21.617 DEBUG [src.node.waku_node] Cluster id was resolved to: 5
2026-02-07 04:32:21.617 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-07 04:32:21.617 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:21.617 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:21.617 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:21.617 DEBUG [src.node.docker_mananger] docker run -i -t -p 44836:44836 -p 44837:44837 -p 44838:44838 -p 44839:44839 -p 44840:44840 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44838 --rest-port=44836 --tcp-port=44837 --discv5-udp-port=44839 --rest-address=0.0.0.0 --nat=extip:172.18.121.71 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=bcbddabf41dcb7ee45b63d1dd3d7df0dfbd3f693d6bfb7bbc7fa8f43bbffc6b0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44840 --metrics-logging=true --relay=true --filter=true
2026-02-07 04:32:21.806 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.71 waku a4fbc72071c15ea9f8cdb1291b1f3bb1e5ff08b19297bb682f2a22e9280b445f
2026-02-07 04:32:21.842 DEBUG [src.node.docker_mananger] Container started with ID a4fbc72071c1. Setting up logs at ./log/docker/node1_2026-02-07_04-32-21__2f036d65-a907-4f2a-a88c-870223a5c6c9__wakuorg_nwaku:latest.log
2026-02-07 04:32:21.844 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44836
2026-02-07 04:32:21.844 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:21.877 ERROR [src.node.docker_mananger] Max retries reached for container c1ff6b940901. Exiting log stream.
2026-02-07 04:32:22.408 ERROR [src.node.docker_mananger] Max retries reached for container 5b55ed8a0e53. Exiting log stream.
2026-02-07 04:32:22.844 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44836/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:22.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:32:22.848 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:22.848 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44836/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:22.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.71/tcp/44837/p2p/16Uiu2HAmDCKDhFW8xACBPacVFbvsHKkCsWpGXPZVqw2tPYgeaR4u","/ip4/172.18.121.71/tcp/44838/ws/p2p/16Uiu2HAmDCKDhFW8xACBPacVFbvsHKkCsWpGXPZVqw2tPYgeaR4u"],"enrUri":"enr:-L24QBabpGzMrvXg5SWfUnQMsZ3L3Tq__O9AwIFwi8sbrc4kGOlMlF3BU6_ZvPjSzTDKBPJFIrM86OcnFVnELZzUiwkCgmlkgnY0gmlwhKwSeUeKbXVsdGlhZGRyc5YACASsEnlHBq8lAAoErBJ5RwavJt0DgnJzhQAFAQAAiXNlY3AyNTZrMaEDCAZXI20NGaU1Bkm7XuIWz-EOpDH2qRWW_N3VGg-Q19qDdGNwgq8lg3VkcIKvJ4V3YWt1MgU"}'
2026-02-07 04:32:22.850 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:22.857 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:22.857 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-07_04-32-21__2f036d65-a907-4f2a-a88c-870223a5c6c9__wakuorg_nwaku:latest.log
2026-02-07 04:32:22.857 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:22.857 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:22.859 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:22.859 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.136
2026-02-07 04:32:22.859 DEBUG [src.node.docker_mananger] Generated ports ['63886', '63887', '63888', '63889', '63890']
2026-02-07 04:32:22.859 DEBUG [src.node.waku_node] Cluster id was resolved to: 5
2026-02-07 04:32:22.859 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-07 04:32:22.860 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:22.860 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:22.860 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:22.860 DEBUG [src.node.docker_mananger] docker run -i -t -p 63886:63886 -p 63887:63887 -p 63888:63888 -p 63889:63889 -p 63890:63890 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63888 --rest-port=63886 --tcp-port=63887 --discv5-udp-port=63889 --rest-address=0.0.0.0 --nat=extip:172.18.255.136 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=7a419ad0ceabff4facdee73839d6944ef690f6efb8ec3f02c4e90580cb183add --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63890 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBabpGzMrvXg5SWfUnQMsZ3L3Tq__O9AwIFwi8sbrc4kGOlMlF3BU6_ZvPjSzTDKBPJFIrM86OcnFVnELZzUiwkCgmlkgnY0gmlwhKwSeUeKbXVsdGlhZGRyc5YACASsEnlHBq8lAAoErBJ5RwavJt0DgnJzhQAFAQAAiXNlY3AyNTZrMaEDCAZXI20NGaU1Bkm7XuIWz-EOpDH2qRWW_N3VGg-Q19qDdGNwgq8lg3VkcIKvJ4V3YWt1MgU
2026-02-07 04:32:23.046 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.136 waku a51c3ec631e3835cd4778436152e8bab736ed4e4c19a012b955aaa099d8fc0b9
2026-02-07 04:32:23.078 DEBUG [src.node.docker_mananger] Container started with ID a51c3ec631e3. Setting up logs at ./log/docker/node2_2026-02-07_04-32-21__2f036d65-a907-4f2a-a88c-870223a5c6c9__wakuorg_nwaku:latest.log
2026-02-07 04:32:23.079 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63886
2026-02-07 04:32:23.079 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:24.080 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63886/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:24.089 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-07 04:32:24.089 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:24.089 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63886/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:24.096 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.136/tcp/63887/p2p/16Uiu2HAmA9h6yNXnXtmp4Vyz776bcgNyFGUgWwSwUSKnr54GCy9t","/ip4/172.18.255.136/tcp/63888/ws/p2p/16Uiu2HAmA9h6yNXnXtmp4Vyz776bcgNyFGUgWwSwUSKnr54GCy9t"],"enrUri":"enr:-L24QMSbW24n_rALIgxaVrkSLpdVJKyrDMLoKbMYrQh6ce4pE0HHIgCWQpaD4ce_f4RqWhYnadCJboCcVrQKou2HDyICgmlkgnY0gmlwhKwS_4iKbXVsdGlhZGRyc5YACASsEv-IBvmPAAoErBL_iAb5kN0DgnJzhQAFAQAAiXNlY3AyNTZrMaEC2sdIF7TeqILI4VFRoPfXWatoEhh9UsjuErM8yfDIvuuDdGNwgvmPg3VkcIL5kYV3YWt1MgE"}'
2026-02-07 04:32:24.096 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:24.097 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63886/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.121.71/tcp/44837/p2p/16Uiu2HAmDCKDhFW8xACBPacVFbvsHKkCsWpGXPZVqw2tPYgeaR4u"]'
2026-02-07 04:32:24.101 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:24.101 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44836/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/999"]'
2026-02-07 04:32:24.105 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:24.105 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63886/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/999"]'
2026-02-07 04:32:24.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:24.111 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44836/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F999" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:24.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:24.116 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-07 04:32:24.217 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-07 04:32:24.217 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44836/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F999" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:24.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770438744111000735,"ephemeral":false,"proof":""}]'
2026-02-07 04:32:24.221 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-07 04:32:24.221 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63886/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F999" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:24.224 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770438744111000735,"ephemeral":false,"proof":""}]'
2026-02-07 04:32:24.226 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-07 04:32:24.227 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-07 04:32:24.228 DEBUG [src.node.waku_node] Stopping container with id a4fbc72071c1
2026-02-07 04:32:24.787 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:24.787 DEBUG [src.node.waku_node] Stopping container with id a51c3ec631e3
2026-02-07 04:32:25.352 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:25.355 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-07 04:32:25.360 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:32:25.364 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
