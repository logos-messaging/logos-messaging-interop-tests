2026-02-07 04:32:12.876 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-07 04:32:12.877 DEBUG [tests.conftest] Running test: test_passing_cursor_of_non_existing_message_from_the_store with id: 2026-02-07_04-32-12__973bc325-0968-4e5b-818d-4273e0337c16
2026-02-07 04:32:12.877 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-07 04:32:12.877 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-07 04:32:12.877 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-07 04:32:12.883 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:12.883 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-07_04-32-12__973bc325-0968-4e5b-818d-4273e0337c16__wakuorg_nwaku:latest.log
2026-02-07 04:32:12.883 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:12.883 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:12.885 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:12.885 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.25.204
2026-02-07 04:32:12.885 DEBUG [src.node.docker_mananger] Generated ports ['64642', '64643', '64644', '64645', '64646']
2026-02-07 04:32:12.885 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:12.885 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:12.885 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:12.885 DEBUG [src.node.docker_mananger] docker run -i -t -p 64642:64642 -p 64643:64643 -p 64644:64644 -p 64645:64645 -p 64646:64646 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64644 --rest-port=64642 --tcp-port=64643 --discv5-udp-port=64645 --rest-address=0.0.0.0 --nat=extip:172.18.25.204 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=374cde60769ec9ad543a1f2643bae75742c3d4ebfb5aa921beee156eff75ca7a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64646 --metrics-logging=true --store=true --relay=true
2026-02-07 04:32:13.039 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.25.204 waku b316ada55a92c6087f12f063646b184b8e25ef31b3f31ddd2bf3eafa919dfa53
2026-02-07 04:32:13.067 DEBUG [src.node.docker_mananger] Container started with ID b316ada55a92. Setting up logs at ./log/docker/publishing_node1_2026-02-07_04-32-12__973bc325-0968-4e5b-818d-4273e0337c16__wakuorg_nwaku:latest.log
2026-02-07 04:32:13.068 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64642
2026-02-07 04:32:13.068 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:13.231 ERROR [src.node.docker_mananger] Max retries reached for container b761a68f8ae0. Exiting log stream.
2026-02-07 04:32:13.663 ERROR [src.node.docker_mananger] Max retries reached for container 4f12dba70391. Exiting log stream.
2026-02-07 04:32:14.069 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64642/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:14.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:32:14.073 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:14.073 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64642/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:14.075 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.204/tcp/64643/p2p/16Uiu2HAmBw8KiF53RXreoub6Vzz3phJucw6JhYUDAfpfRRHyBRkL","/ip4/172.18.25.204/tcp/64644/ws/p2p/16Uiu2HAmBw8KiF53RXreoub6Vzz3phJucw6JhYUDAfpfRRHyBRkL"],"enrUri":"enr:-L24QHeGwYpLFlco6CJr4yTnEtRSJ07P9zpHWC-xyEU-L84NaZteSB0zbns6OJZ7kFuimsbFGWHPnjPXC5sIh_XMXiECgmlkgnY0gmlwhKwSGcyKbXVsdGlhZGRyc5YACASsEhnMBvyDAAoErBIZzAb8hN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9Uae8lPj4mwX-GXKokBN7LkH7CROEeplItrSpwAOPkGDdGNwgvyDg3VkcIL8hYV3YWt1MgM"}'
2026-02-07 04:32:14.075 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:14.081 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:14.082 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-07_04-32-12__973bc325-0968-4e5b-818d-4273e0337c16__wakuorg_nwaku:latest.log
2026-02-07 04:32:14.082 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:14.082 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:14.083 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:14.083 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.224.94
2026-02-07 04:32:14.083 DEBUG [src.node.docker_mananger] Generated ports ['36823', '36824', '36825', '36826', '36827']
2026-02-07 04:32:14.084 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:14.084 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:14.084 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:14.084 DEBUG [src.node.docker_mananger] docker run -i -t -p 36823:36823 -p 36824:36824 -p 36825:36825 -p 36826:36826 -p 36827:36827 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36825 --rest-port=36823 --tcp-port=36824 --discv5-udp-port=36826 --rest-address=0.0.0.0 --nat=extip:172.18.224.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fab45af236a2eddcdfd46dd5cf067d5ebe9a02fac3ec8fa7ea7d8fa9dbd12261 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36827 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHeGwYpLFlco6CJr4yTnEtRSJ07P9zpHWC-xyEU-L84NaZteSB0zbns6OJZ7kFuimsbFGWHPnjPXC5sIh_XMXiECgmlkgnY0gmlwhKwSGcyKbXVsdGlhZGRyc5YACASsEhnMBvyDAAoErBIZzAb8hN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9Uae8lPj4mwX-GXKokBN7LkH7CROEeplItrSpwAOPkGDdGNwgvyDg3VkcIL8hYV3YWt1MgM --storenode=/ip4/172.18.25.204/tcp/64643/p2p/16Uiu2HAmBw8KiF53RXreoub6Vzz3phJucw6JhYUDAfpfRRHyBRkL --store=true --relay=true
2026-02-07 04:32:14.227 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.224.94 waku 621747bc0b84a05ede34223c69a9ffe5625c03bff6956a9557a4830ee6e60658
2026-02-07 04:32:14.252 DEBUG [src.node.docker_mananger] Container started with ID 621747bc0b84. Setting up logs at ./log/docker/store_node1_2026-02-07_04-32-12__973bc325-0968-4e5b-818d-4273e0337c16__wakuorg_nwaku:latest.log
2026-02-07 04:32:14.252 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36823
2026-02-07 04:32:14.253 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:15.254 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36823/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:15.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:32:15.258 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:15.258 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36823/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:15.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.94/tcp/36824/p2p/16Uiu2HAmF2h4br67AcBnisXJ6TXFV3J2h6ekpQSr8MfRtzyZwcnE","/ip4/172.18.224.94/tcp/36825/ws/p2p/16Uiu2HAmF2h4br67AcBnisXJ6TXFV3J2h6ekpQSr8MfRtzyZwcnE"],"enrUri":"enr:-L24QMt0eK-ShDw6ougOuwdwdlr79PJ4v5ZsNUMyu9wzoO0SRNLGVNZ20XeB9LC5s6ap03LCEYaOCmE2M9vGX7Papf8CgmlkgnY0gmlwhKwS4F6KbXVsdGlhZGRyc5YACASsEuBeBo_YAAoErBLgXgaP2d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDI0aatwb9xVqZSyi85_lddmhr-MBFBCEnV0zkbh39f1uDdGNwgo_Yg3VkcIKP2oV3YWt1MgM"}'
2026-02-07 04:32:15.260 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:15.261 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36823/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.25.204/tcp/64643/p2p/16Uiu2HAmBw8KiF53RXreoub6Vzz3phJucw6JhYUDAfpfRRHyBRkL"]'
2026-02-07 04:32:15.263 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:15.264 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64642/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-07 04:32:15.266 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:15.266 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36823/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-07 04:32:15.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:15.269 DEBUG [src.steps.store] Relaying message
2026-02-07 04:32:15.269 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64642/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:15.274 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:15.274 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:32:15.475 DEBUG [src.steps.store] Relaying message
2026-02-07 04:32:15.475 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64642/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:15.480 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:15.481 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:32:15.681 DEBUG [src.steps.store] Relaying message
2026-02-07 04:32:15.682 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64642/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:15.686 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:15.687 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:32:15.888 DEBUG [src.steps.store] Relaying message
2026-02-07 04:32:15.888 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64642/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:32:15.893 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:15.893 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:32:16.094 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64642/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xc3b5bff063c030480dc918a1c08e256ab9b9a405479181a2ffda68dd0068d138&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:16.097 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:64642/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xc3b5bff063c030480dc918a1c08e256ab9b9a405479181a2ffda68dd0068d138&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-07 04:32:16.098 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36823/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xc3b5bff063c030480dc918a1c08e256ab9b9a405479181a2ffda68dd0068d138&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:16.101 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:36823/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xc3b5bff063c030480dc918a1c08e256ab9b9a405479181a2ffda68dd0068d138&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-07 04:32:16.103 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-07 04:32:16.104 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-07 04:32:16.104 DEBUG [src.node.waku_node] Stopping container with id b316ada55a92
2026-02-07 04:32:16.596 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:16.596 DEBUG [src.node.waku_node] Stopping container with id 621747bc0b84
2026-02-07 04:32:17.066 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:17.069 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-07 04:32:17.075 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:32:17.080 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
