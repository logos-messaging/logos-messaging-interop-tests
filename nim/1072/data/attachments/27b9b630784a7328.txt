2026-02-07 04:33:16.971 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-07 04:33:16.971 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2026-02-07_04-33-16__4c6f519a-e4bb-497e-9924-ab01dd151202
2026-02-07 04:33:16.972 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-07 04:33:16.972 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-07 04:33:16.973 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-07 04:33:16.982 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:33:16.982 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-07_04-33-16__4c6f519a-e4bb-497e-9924-ab01dd151202__wakuorg_nwaku:latest.log
2026-02-07 04:33:16.983 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:33:16.983 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:33:16.984 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:33:16.984 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.48.76
2026-02-07 04:33:16.984 DEBUG [src.node.docker_mananger] Generated ports ['10620', '10621', '10622', '10623', '10624']
2026-02-07 04:33:16.984 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:33:16.985 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:33:16.985 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:33:16.985 DEBUG [src.node.docker_mananger] docker run -i -t -p 10620:10620 -p 10621:10621 -p 10622:10622 -p 10623:10623 -p 10624:10624 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10622 --rest-port=10620 --tcp-port=10621 --discv5-udp-port=10623 --rest-address=0.0.0.0 --nat=extip:172.18.48.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=83bbcaddf303b1dd4b7eedb6fddd4990f78ab9ea7aac1ce8fbf6ab9b151f4dcb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10624 --metrics-logging=true --relay=true --filter=true
2026-02-07 04:33:17.166 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.48.76 waku 4511a98a786fdf18fe852ba53ff9177cf2ecf2580a99895953c2cb8670db8fa1
2026-02-07 04:33:17.197 DEBUG [src.node.docker_mananger] Container started with ID 4511a98a786f. Setting up logs at ./log/docker/node1_2026-02-07_04-33-16__4c6f519a-e4bb-497e-9924-ab01dd151202__wakuorg_nwaku:latest.log
2026-02-07 04:33:17.198 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10620
2026-02-07 04:33:17.198 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:33:17.239 ERROR [src.node.docker_mananger] Max retries reached for container 64400f7615a9. Exiting log stream.
2026-02-07 04:33:17.792 ERROR [src.node.docker_mananger] Max retries reached for container e15cae3b6e5d. Exiting log stream.
2026-02-07 04:33:18.199 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10620/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:18.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:33:18.202 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:33:18.203 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10620/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:18.205 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.76/tcp/10621/p2p/16Uiu2HAkzFZfHnjanKa8VcRUnBS6gpWd6uSDuzXkaJKHzifM5Uog","/ip4/172.18.48.76/tcp/10622/ws/p2p/16Uiu2HAkzFZfHnjanKa8VcRUnBS6gpWd6uSDuzXkaJKHzifM5Uog"],"enrUri":"enr:-L24QPlaLTVKzJ9IzQ-LmOCoK-Y7pnkw2GclwCGse9O3ZvgoRcjpdxyp18RJfyCq6mtxrjYTOWZ_mPcn9tgpNcVN7EoCgmlkgnY0gmlwhKwSMEyKbXVsdGlhZGRyc5YACASsEjBMBil9AAoErBIwTAYpft0DgnJzhQADAQAAiXNlY3AyNTZrMaECR7N7Si7cfgRvE7knegvH8YJM8cdlGiKYhr1ywL5kR7-DdGNwgil9g3VkcIIpf4V3YWt1MgU"}'
2026-02-07 04:33:18.205 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:33:18.206 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-07 04:33:18.212 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:33:18.212 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-07_04-33-16__4c6f519a-e4bb-497e-9924-ab01dd151202__wakuorg_nwaku:latest.log
2026-02-07 04:33:18.213 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:33:18.213 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:33:18.214 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:33:18.214 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.81.54
2026-02-07 04:33:18.214 DEBUG [src.node.docker_mananger] Generated ports ['10091', '10092', '10093', '10094', '10095']
2026-02-07 04:33:18.214 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:33:18.215 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:33:18.215 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:33:18.215 DEBUG [src.node.docker_mananger] docker run -i -t -p 10091:10091 -p 10092:10092 -p 10093:10093 -p 10094:10094 -p 10095:10095 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10093 --rest-port=10091 --tcp-port=10092 --discv5-udp-port=10094 --rest-address=0.0.0.0 --nat=extip:172.18.81.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=90ed7010cc2b73b969ecf1abdf5e54dfcd0fc4dc682e760206bfd7ef183cb8f9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10095 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QPlaLTVKzJ9IzQ-LmOCoK-Y7pnkw2GclwCGse9O3ZvgoRcjpdxyp18RJfyCq6mtxrjYTOWZ_mPcn9tgpNcVN7EoCgmlkgnY0gmlwhKwSMEyKbXVsdGlhZGRyc5YACASsEjBMBil9AAoErBIwTAYpft0DgnJzhQADAQAAiXNlY3AyNTZrMaECR7N7Si7cfgRvE7knegvH8YJM8cdlGiKYhr1ywL5kR7-DdGNwgil9g3VkcIIpf4V3YWt1MgU --filternode=/ip4/172.18.48.76/tcp/10621/p2p/16Uiu2HAkzFZfHnjanKa8VcRUnBS6gpWd6uSDuzXkaJKHzifM5Uog
2026-02-07 04:33:18.398 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.81.54 waku ad3284744f2a620aac2db4d9cdc013933699013a245570421c56568b03766600
2026-02-07 04:33:18.429 DEBUG [src.node.docker_mananger] Container started with ID ad3284744f2a. Setting up logs at ./log/docker/node2_2026-02-07_04-33-16__4c6f519a-e4bb-497e-9924-ab01dd151202__wakuorg_nwaku:latest.log
2026-02-07 04:33:18.429 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10091
2026-02-07 04:33:18.430 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:33:19.431 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10091/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:19.435 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-07 04:33:19.435 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:33:19.435 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10091/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:19.437 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.54/tcp/10092/p2p/16Uiu2HAmQnZb5JNrWrbcVUzwWM9MdSBCTRed1tUApRkKcfC2byyy","/ip4/172.18.81.54/tcp/10093/ws/p2p/16Uiu2HAmQnZb5JNrWrbcVUzwWM9MdSBCTRed1tUApRkKcfC2byyy"],"enrUri":"enr:-L24QKPqIxbQlABMHpvGAQteTwEB3Sf3uxmDf3U1-QmjyXMURIVM5iKxmi0leSybGmkJvfzIc2QRGRLgoBEEFvXaGvkCgmlkgnY0gmlwhKwSUTaKbXVsdGlhZGRyc5YACASsElE2BidsAAoErBJRNgYnbd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtDzkB1mu0Zy-fgmAr8aRUFc9H1k3lQN0iaW0zMsA1giDdGNwgidsg3VkcIInboV3YWt1MgA"}'
2026-02-07 04:33:19.438 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:33:19.438 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10091/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.76/tcp/10621/p2p/16Uiu2HAkzFZfHnjanKa8VcRUnBS6gpWd6uSDuzXkaJKHzifM5Uog"]'
2026-02-07 04:33:19.469 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:33:19.475 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/1
2026-02-07 04:33:19.475 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10620/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-07 04:33:19.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:33:19.482 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10091/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e1646041-ceb1-44a9-a87a-ea91392d6340", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-07 04:33:19.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e1646041-ceb1-44a9-a87a-ea91392d6340","statusDesc":"OK"}'
2026-02-07 04:33:19.494 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10620/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:33:19.502 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:33:19.502 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-07 04:33:19.602 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-07 04:33:19.603 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10091/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:19.605 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1770438799494502182,"ephemeral":false}]'
2026-02-07 04:33:19.607 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/2/2
2026-02-07 04:33:19.607 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10620/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2026-02-07 04:33:19.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:33:19.610 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10091/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "cc33e452-6e82-452e-9ee1-4399409d8e0f", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
2026-02-07 04:33:19.619 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"cc33e452-6e82-452e-9ee1-4399409d8e0f","statusDesc":"OK"}'
2026-02-07 04:33:19.620 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10620/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:33:19.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:33:19.624 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-07 04:33:19.724 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-07 04:33:19.724 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10091/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:19.727 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1770438799619863965,"ephemeral":false}]'
2026-02-07 04:33:19.728 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/9
2026-02-07 04:33:19.728 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10620/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
2026-02-07 04:33:19.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:33:19.731 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10091/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a1df4296-1ab6-49a4-b7a1-8722bc1f78fd", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
2026-02-07 04:33:19.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"a1df4296-1ab6-49a4-b7a1-8722bc1f78fd","statusDesc":"OK"}'
2026-02-07 04:33:19.740 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10620/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:33:19.745 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:33:19.745 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-07 04:33:19.845 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-07 04:33:19.845 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10091/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:33:19.848 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1770438799740728284,"ephemeral":false}]'
2026-02-07 04:33:19.851 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-07 04:33:19.852 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-07 04:33:19.852 DEBUG [src.node.waku_node] Stopping container with id 4511a98a786f
2026-02-07 04:33:20.384 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:33:20.384 DEBUG [src.node.waku_node] Stopping container with id ad3284744f2a
2026-02-07 04:33:20.886 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:33:20.888 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-07 04:33:20.894 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:33:20.900 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
