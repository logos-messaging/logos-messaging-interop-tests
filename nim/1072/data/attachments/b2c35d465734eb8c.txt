2026-02-07 04:32:08.407 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-07 04:32:08.407 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_no_request_id with id: 2026-02-07_04-32-08__e48806b5-96ba-48c0-9d19-39830ce98125
2026-02-07 04:32:08.407 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-07 04:32:08.408 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-07 04:32:08.408 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-07 04:32:08.413 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:08.413 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-07_04-32-08__e48806b5-96ba-48c0-9d19-39830ce98125__wakuorg_nwaku:latest.log
2026-02-07 04:32:08.413 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:08.413 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:08.415 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:08.415 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.214.209
2026-02-07 04:32:08.415 DEBUG [src.node.docker_mananger] Generated ports ['25573', '25574', '25575', '25576', '25577']
2026-02-07 04:32:08.415 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:08.415 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:08.415 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:08.415 DEBUG [src.node.docker_mananger] docker run -i -t -p 25573:25573 -p 25574:25574 -p 25575:25575 -p 25576:25576 -p 25577:25577 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25575 --rest-port=25573 --tcp-port=25574 --discv5-udp-port=25576 --rest-address=0.0.0.0 --nat=extip:172.18.214.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abfb14701d1cc5a74a020a272ceeacf91c4c9acfecda49fadcce88d906ed6fea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25577 --metrics-logging=true --relay=true --filter=true
2026-02-07 04:32:08.560 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.214.209 waku 112381aef46681efb52490e57963aa80a1245d2b14d7641d9afb3d27c3e999fb
2026-02-07 04:32:08.583 DEBUG [src.node.docker_mananger] Container started with ID 112381aef466. Setting up logs at ./log/docker/node1_2026-02-07_04-32-08__e48806b5-96ba-48c0-9d19-39830ce98125__wakuorg_nwaku:latest.log
2026-02-07 04:32:08.584 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25573
2026-02-07 04:32:08.584 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:08.727 ERROR [src.node.docker_mananger] Max retries reached for container 430c60d80e4d. Exiting log stream.
2026-02-07 04:32:09.209 ERROR [src.node.docker_mananger] Max retries reached for container 7acb1f6c64bb. Exiting log stream.
2026-02-07 04:32:09.585 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25573/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:09.588 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:32:09.589 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:09.589 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25573/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:09.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.209/tcp/25574/p2p/16Uiu2HAm2PJpSMkb6qRvsNKhQuRQcYvmwHQ52ZTXsseV7JEfpNGt","/ip4/172.18.214.209/tcp/25575/ws/p2p/16Uiu2HAm2PJpSMkb6qRvsNKhQuRQcYvmwHQ52ZTXsseV7JEfpNGt"],"enrUri":"enr:-L24QBJe9yk2kDXEYU5q1rUId7dSijNDAWQuJ8ILyHyU0p0xIGs6i-gNnjBrsQ6qYK3LwL3zlbuVLvgkT7gOqI6_0JwCgmlkgnY0gmlwhKwS1tGKbXVsdGlhZGRyc5YACASsEtbRBmPmAAoErBLW0QZj590DgnJzhQADAQAAiXNlY3AyNTZrMaECZ2a4PqrO9S_a9sH3kk38TFbTZzEZNh-Y3Is9ivQeraWDdGNwgmPmg3VkcIJj6IV3YWt1MgU"}'
2026-02-07 04:32:09.591 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:09.592 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-07 04:32:09.597 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:09.597 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-07_04-32-08__e48806b5-96ba-48c0-9d19-39830ce98125__wakuorg_nwaku:latest.log
2026-02-07 04:32:09.598 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:09.598 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:09.599 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:09.599 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.178.63
2026-02-07 04:32:09.599 DEBUG [src.node.docker_mananger] Generated ports ['51756', '51757', '51758', '51759', '51760']
2026-02-07 04:32:09.599 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:09.599 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:09.600 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:09.600 DEBUG [src.node.docker_mananger] docker run -i -t -p 51756:51756 -p 51757:51757 -p 51758:51758 -p 51759:51759 -p 51760:51760 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51758 --rest-port=51756 --tcp-port=51757 --discv5-udp-port=51759 --rest-address=0.0.0.0 --nat=extip:172.18.178.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6bc9ecd9d43a67e733cb1ec5a237bb06f49a1dd13fe66fbab7d6b09f3481bc51 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51760 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBJe9yk2kDXEYU5q1rUId7dSijNDAWQuJ8ILyHyU0p0xIGs6i-gNnjBrsQ6qYK3LwL3zlbuVLvgkT7gOqI6_0JwCgmlkgnY0gmlwhKwS1tGKbXVsdGlhZGRyc5YACASsEtbRBmPmAAoErBLW0QZj590DgnJzhQADAQAAiXNlY3AyNTZrMaECZ2a4PqrO9S_a9sH3kk38TFbTZzEZNh-Y3Is9ivQeraWDdGNwgmPmg3VkcIJj6IV3YWt1MgU --filternode=/ip4/172.18.214.209/tcp/25574/p2p/16Uiu2HAm2PJpSMkb6qRvsNKhQuRQcYvmwHQ52ZTXsseV7JEfpNGt
2026-02-07 04:32:09.750 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.178.63 waku 0593fd44639d74f6b0689db4470bf03721bc771a94a5e03fb64153af1a14c30e
2026-02-07 04:32:09.772 DEBUG [src.node.docker_mananger] Container started with ID 0593fd44639d. Setting up logs at ./log/docker/node2_2026-02-07_04-32-08__e48806b5-96ba-48c0-9d19-39830ce98125__wakuorg_nwaku:latest.log
2026-02-07 04:32:09.773 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51756
2026-02-07 04:32:09.773 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:10.773 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51756/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:10.777 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-07 04:32:10.778 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:10.778 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51756/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:10.780 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.63/tcp/51757/p2p/16Uiu2HAmCdA5JRJWkZaVQdaLXYqDJgpShAyZz3T9zaySG9fENLL2","/ip4/172.18.178.63/tcp/51758/ws/p2p/16Uiu2HAmCdA5JRJWkZaVQdaLXYqDJgpShAyZz3T9zaySG9fENLL2"],"enrUri":"enr:-L24QJZUP_mpyM5qcy68uqbTOPr2OWNX1ZVjVYpbbDChDjqrfBib5PXzNAKgozAqOP-N8IprcFarAq_56FWgElHRQAICgmlkgnY0gmlwhKwSsj-KbXVsdGlhZGRyc5YACASsErI_BsotAAoErBKyPwbKLt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_4fVbqFCT3FdI7PpcLsa24G2wnevoiHMFvWdGWm7p1ODdGNwgsotg3VkcILKL4V3YWt1MgA"}'
2026-02-07 04:32:10.780 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:10.780 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51756/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.214.209/tcp/25574/p2p/16Uiu2HAm2PJpSMkb6qRvsNKhQuRQcYvmwHQ52ZTXsseV7JEfpNGt"]'
2026-02-07 04:32:10.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:10.807 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-07 04:32:10.807 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25573/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-07 04:32:10.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:10.820 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51756/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b2ba6b96-43d7-41e5-9d13-b65d06704e0b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-07 04:32:10.831 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b2ba6b96-43d7-41e5-9d13-b65d06704e0b","statusDesc":"OK"}'
2026-02-07 04:32:10.832 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:51756/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-07 04:32:10.834 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51756/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-07 04:32:10.837 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-07 04:32:10.837 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-07 04:32:10.838 DEBUG [src.node.waku_node] Stopping container with id 112381aef466
2026-02-07 04:32:11.303 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:11.303 DEBUG [src.node.waku_node] Stopping container with id 0593fd44639d
2026-02-07 04:32:11.754 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:11.755 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-07 04:32:11.761 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:32:11.766 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
