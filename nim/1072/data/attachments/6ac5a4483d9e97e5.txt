2026-02-07 04:32:31.437 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-07 04:32:31.438 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2026-02-07_04-32-31__9d1c22e6-4524-48bc-8f63-5e1fe316a3c4
2026-02-07 04:32:31.438 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-07 04:32:31.438 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-07 04:32:31.445 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:31.445 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-07_04-32-31__9d1c22e6-4524-48bc-8f63-5e1fe316a3c4__wakuorg_nwaku:latest.log
2026-02-07 04:32:31.445 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:31.445 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:31.446 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:31.447 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.190.38
2026-02-07 04:32:31.447 DEBUG [src.node.docker_mananger] Generated ports ['29364', '29365', '29366', '29367', '29368']
2026-02-07 04:32:31.447 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:31.447 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:31.447 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:31.447 DEBUG [src.node.docker_mananger] docker run -i -t -p 29364:29364 -p 29365:29365 -p 29366:29366 -p 29367:29367 -p 29368:29368 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29366 --rest-port=29364 --tcp-port=29365 --discv5-udp-port=29367 --rest-address=0.0.0.0 --nat=extip:172.18.190.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4caebc3f85cc64b713b82f100e1fff0ea7c46c1768a5f702f8d1edbe0ca1c44c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29368 --metrics-logging=true --lightpush=true --relay=true
2026-02-07 04:32:31.629 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.190.38 waku 3b4f02ac6e8012f9ba9f303f7abca9d9cda4731468792b6409c5867e3eb147be
2026-02-07 04:32:31.659 DEBUG [src.node.docker_mananger] Container started with ID 3b4f02ac6e80. Setting up logs at ./log/docker/receiving_node1_2026-02-07_04-32-31__9d1c22e6-4524-48bc-8f63-5e1fe316a3c4__wakuorg_nwaku:latest.log
2026-02-07 04:32:31.660 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29364
2026-02-07 04:32:31.662 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:31.715 ERROR [src.node.docker_mananger] Max retries reached for container 7d65285eb3f4. Exiting log stream.
2026-02-07 04:32:32.223 ERROR [src.node.docker_mananger] Max retries reached for container e29c75102dc5. Exiting log stream.
2026-02-07 04:32:32.663 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29364/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:32.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:32:32.666 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:32.667 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29364/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:32.669 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.38/tcp/29365/p2p/16Uiu2HAmHLKN8seKqrkikAbVidBwN6Zr4TzjK8w8N2ZcxiWXKPBj","/ip4/172.18.190.38/tcp/29366/ws/p2p/16Uiu2HAmHLKN8seKqrkikAbVidBwN6Zr4TzjK8w8N2ZcxiWXKPBj"],"enrUri":"enr:-L24QBhJU5x1eIPh-rRF0jlFfy3Jek67B1esjUx4okBBQH1ZcP3KmgrkbbKq9lul1PlV1P7auzt63tEIruLowbqIvB8CgmlkgnY0gmlwhKwSviaKbXVsdGlhZGRyc5YACASsEr4mBnK1AAoErBK-JgZytt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDRYHmLaLKTn7WqOmDQqmGU1o54FS2nZMLZNtghqFX9haDdGNwgnK1g3VkcIJyt4V3YWt1Mgk"}'
2026-02-07 04:32:32.669 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:32.676 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:32.676 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-07_04-32-31__9d1c22e6-4524-48bc-8f63-5e1fe316a3c4__wakuorg_nwaku:latest.log
2026-02-07 04:32:32.677 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:32.677 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:32.678 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:32.678 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.227.143
2026-02-07 04:32:32.678 DEBUG [src.node.docker_mananger] Generated ports ['62695', '62696', '62697', '62698', '62699']
2026-02-07 04:32:32.679 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:32.679 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:32.679 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:32.679 DEBUG [src.node.docker_mananger] docker run -i -t -p 62695:62695 -p 62696:62696 -p 62697:62697 -p 62698:62698 -p 62699:62699 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62697 --rest-port=62695 --tcp-port=62696 --discv5-udp-port=62698 --rest-address=0.0.0.0 --nat=extip:172.18.227.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7adfe3ac7622daf9a0a81e3deb548cc16b306d3d5cbfe4c2daaacaeafa646d1e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62699 --metrics-logging=true --lightpush=false --relay=true
2026-02-07 04:32:32.864 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.227.143 waku b5e8fed57813e74c424e8e70d5d65d389363c04815979e737721b6d70c46c198
2026-02-07 04:32:32.893 DEBUG [src.node.docker_mananger] Container started with ID b5e8fed57813. Setting up logs at ./log/docker/receiving_node2_2026-02-07_04-32-31__9d1c22e6-4524-48bc-8f63-5e1fe316a3c4__wakuorg_nwaku:latest.log
2026-02-07 04:32:32.894 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62695
2026-02-07 04:32:32.894 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:33.895 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62695/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:33.898 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:32:33.899 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:33.899 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62695/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:33.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.143/tcp/62696/p2p/16Uiu2HAkxqVeB1JmfdR5HWMJbY5F4EWb9F1iX36RDJBZrNZd5W4B","/ip4/172.18.227.143/tcp/62697/ws/p2p/16Uiu2HAkxqVeB1JmfdR5HWMJbY5F4EWb9F1iX36RDJBZrNZd5W4B"],"enrUri":"enr:-L24QLRai1G-1wNwCyKaMErR5KAjfBv7oYLVPC2ni3iAVI50eCPJKdElwJwRiH6lZffphQ1cHuiFiy6KXJJJvEoXG_oCgmlkgnY0gmlwhKwS44-KbXVsdGlhZGRyc5YACASsEuOPBvToAAoErBLjjwb06d0DgnJzhQADAQAAiXNlY3AyNTZrMaECMq1Ph-OwDRjDqIvM_x2xgPyM2bt89o6tAzGiSXvs_myDdGNwgvTog3VkcIL06oV3YWt1MgE"}'
2026-02-07 04:32:33.901 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:33.902 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62695/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.190.38/tcp/29365/p2p/16Uiu2HAmHLKN8seKqrkikAbVidBwN6Zr4TzjK8w8N2ZcxiWXKPBj"]'
2026-02-07 04:32:33.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:33.943 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:32:33.943 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-07_04-32-31__9d1c22e6-4524-48bc-8f63-5e1fe316a3c4__wakuorg_nwaku:latest.log
2026-02-07 04:32:33.944 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:32:33.944 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:32:33.947 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:32:33.949 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.191.127
2026-02-07 04:32:33.950 DEBUG [src.node.docker_mananger] Generated ports ['51453', '51454', '51455', '51456', '51457']
2026-02-07 04:32:33.950 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:32:33.952 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:32:33.952 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:32:33.952 DEBUG [src.node.docker_mananger] docker run -i -t -p 51453:51453 -p 51454:51454 -p 51455:51455 -p 51456:51456 -p 51457:51457 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51455 --rest-port=51453 --tcp-port=51454 --discv5-udp-port=51456 --rest-address=0.0.0.0 --nat=extip:172.18.191.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0d30a13bb52befeee20fd26bffc19c6e1237184fbbbf2d2b7816e6dca1c9ab29 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51457 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBhJU5x1eIPh-rRF0jlFfy3Jek67B1esjUx4okBBQH1ZcP3KmgrkbbKq9lul1PlV1P7auzt63tEIruLowbqIvB8CgmlkgnY0gmlwhKwSviaKbXVsdGlhZGRyc5YACASsEr4mBnK1AAoErBK-JgZytt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDRYHmLaLKTn7WqOmDQqmGU1o54FS2nZMLZNtghqFX9haDdGNwgnK1g3VkcIJyt4V3YWt1Mgk --lightpushnode=/ip4/172.18.190.38/tcp/29365/p2p/16Uiu2HAmHLKN8seKqrkikAbVidBwN6Zr4TzjK8w8N2ZcxiWXKPBj --lightpush=true --relay=true
2026-02-07 04:32:34.151 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.191.127 waku dee0c976f79706884b607c47649eb7f3ddcfc083c59d433dbaa2e1f97e5d38cd
2026-02-07 04:32:34.183 DEBUG [src.node.docker_mananger] Container started with ID dee0c976f797. Setting up logs at ./log/docker/lightpush_node1_2026-02-07_04-32-31__9d1c22e6-4524-48bc-8f63-5e1fe316a3c4__wakuorg_nwaku:latest.log
2026-02-07 04:32:34.183 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51453
2026-02-07 04:32:34.183 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:32:35.184 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51453/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:35.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:32:35.196 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:32:35.197 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51453/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:32:35.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.127/tcp/51454/p2p/16Uiu2HAm2noBs39byRu3yA5dVHy8FyXsQBsAHMBVV9a6M1WpWCY4","/ip4/172.18.191.127/tcp/51455/ws/p2p/16Uiu2HAm2noBs39byRu3yA5dVHy8FyXsQBsAHMBVV9a6M1WpWCY4"],"enrUri":"enr:-L24QJ2nkL60PHOw2P0oG5kBjIb92i8dV1Pk5E3FPC2dxlhbJQ5BmQ7QPMesJy7O2vcCCzTHiMVIZVLg0wIn3DGl9s0CgmlkgnY0gmlwhKwSv3-KbXVsdGlhZGRyc5YACASsEr9_Bsj-AAoErBK_fwbI_90DgnJzhQADAQAAiXNlY3AyNTZrMaECbWsn3DMeZr-N9aXgnMyzuf379utzxKoulBCam3hHeC2DdGNwgsj-g3VkcILJAIV3YWt1Mgk"}'
2026-02-07 04:32:35.215 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:32:35.216 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51453/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.190.38/tcp/29365/p2p/16Uiu2HAmHLKN8seKqrkikAbVidBwN6Zr4TzjK8w8N2ZcxiWXKPBj"]'
2026-02-07 04:32:35.224 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:35.224 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51453/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.227.143/tcp/62696/p2p/16Uiu2HAkxqVeB1JmfdR5HWMJbY5F4EWb9F1iX36RDJBZrNZd5W4B"]'
2026-02-07 04:32:35.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:35.250 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29364/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-07 04:32:35.254 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:35.254 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62695/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-07 04:32:35.261 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:35.261 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51453/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-07 04:32:35.263 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:32:35.265 DEBUG [src.steps.light_push] Lightpushing message
2026-02-07 04:32:35.265 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51453/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770438755264874435, "meta": "Light push works!!"}}'
2026-02-07 04:32:35.267 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51453/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
2026-02-07 04:32:35.269 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-07 04:32:35.270 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-07 04:32:35.271 DEBUG [src.node.waku_node] Stopping container with id 3b4f02ac6e80
2026-02-07 04:32:35.802 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:35.803 DEBUG [src.node.waku_node] Stopping container with id b5e8fed57813
2026-02-07 04:32:36.327 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:36.328 DEBUG [src.node.waku_node] Stopping container with id dee0c976f797
2026-02-07 04:32:36.617 ERROR [src.node.docker_mananger] Max retries reached for container 3b4f02ac6e80. Exiting log stream.
2026-02-07 04:32:36.835 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:32:36.836 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-07 04:32:36.843 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:32:36.851 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:32:36.858 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
