2026-02-07 04:34:40.132 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-07 04:34:40.132 DEBUG [tests.conftest] Running test: test_cursor_pointing_to_deleted_message with id: 2026-02-07_04-34-40__3f1d3bd7-0446-4253-88dc-e2aa482a1b64
2026-02-07 04:34:40.133 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-07 04:34:40.134 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-07 04:34:40.134 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-07 04:34:40.143 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:34:40.144 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-07_04-34-40__3f1d3bd7-0446-4253-88dc-e2aa482a1b64__wakuorg_nwaku:latest.log
2026-02-07 04:34:40.144 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:34:40.145 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:34:40.146 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:34:40.147 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.126.13
2026-02-07 04:34:40.147 DEBUG [src.node.docker_mananger] Generated ports ['39308', '39309', '39310', '39311', '39312']
2026-02-07 04:34:40.148 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:34:40.149 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:34:40.149 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:34:40.149 DEBUG [src.node.docker_mananger] docker run -i -t -p 39308:39308 -p 39309:39309 -p 39310:39310 -p 39311:39311 -p 39312:39312 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39310 --rest-port=39308 --tcp-port=39309 --discv5-udp-port=39311 --rest-address=0.0.0.0 --nat=extip:172.18.126.13 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7b57a496ffbe9b75bc4a60a2748ec5d6a0e2c1def57fbbe3eb4202eb5a2accba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39312 --metrics-logging=true --store=true --relay=true
2026-02-07 04:34:40.336 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.126.13 waku 78f71bd5b82a009772830129e1dc6eb9c3646148c58dbdd541aa60f3e3890c67
2026-02-07 04:34:40.359 ERROR [src.node.docker_mananger] Max retries reached for container 41f3cdaf9707. Exiting log stream.
2026-02-07 04:34:40.368 DEBUG [src.node.docker_mananger] Container started with ID 78f71bd5b82a. Setting up logs at ./log/docker/publishing_node1_2026-02-07_04-34-40__3f1d3bd7-0446-4253-88dc-e2aa482a1b64__wakuorg_nwaku:latest.log
2026-02-07 04:34:40.370 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39308
2026-02-07 04:34:40.371 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:34:40.963 ERROR [src.node.docker_mananger] Max retries reached for container fa10645d1610. Exiting log stream.
2026-02-07 04:34:41.373 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39308/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:34:41.376 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:34:41.376 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:34:41.376 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39308/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:34:41.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.13/tcp/39309/p2p/16Uiu2HAkwX2KowALnGvqT6Sggiv6urCWBAVWe17qP4UkZfFQgw73","/ip4/172.18.126.13/tcp/39310/ws/p2p/16Uiu2HAkwX2KowALnGvqT6Sggiv6urCWBAVWe17qP4UkZfFQgw73"],"enrUri":"enr:-L24QAEu7eUvPA1golCDWNTcxR72lu6wEXoEbTwL8vORMmgjEKkh4af_aiFAn7Djk-8U-_PfqZNOeHJdUtORoSs42RgCgmlkgnY0gmlwhKwSfg2KbXVsdGlhZGRyc5YACASsEn4NBpmNAAoErBJ-DQaZjt0DgnJzhQADAQAAiXNlY3AyNTZrMaECHxZIPZVy8Gxk-ItNBrz32nj79zhqDvsvadyW8lcq4L6DdGNwgpmNg3VkcIKZj4V3YWt1MgM"}'
2026-02-07 04:34:41.378 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:34:41.386 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-07 04:34:41.386 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-07_04-34-40__3f1d3bd7-0446-4253-88dc-e2aa482a1b64__wakuorg_nwaku:latest.log
2026-02-07 04:34:41.386 DEBUG [src.node.waku_node] Starting Node...
2026-02-07 04:34:41.386 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-07 04:34:41.387 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-07 04:34:41.388 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.137.27
2026-02-07 04:34:41.388 DEBUG [src.node.docker_mananger] Generated ports ['43698', '43699', '43700', '43701', '43702']
2026-02-07 04:34:41.388 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-07 04:34:41.388 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-07 04:34:41.388 DEBUG [src.node.waku_node] Using volumes []
2026-02-07 04:34:41.388 DEBUG [src.node.docker_mananger] docker run -i -t -p 43698:43698 -p 43699:43699 -p 43700:43700 -p 43701:43701 -p 43702:43702 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43700 --rest-port=43698 --tcp-port=43699 --discv5-udp-port=43701 --rest-address=0.0.0.0 --nat=extip:172.18.137.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aec19d94cfafad41cfe2c8ac795cc11fd7eebcce7d71d8a4c3c2d53cda0262aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43702 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAEu7eUvPA1golCDWNTcxR72lu6wEXoEbTwL8vORMmgjEKkh4af_aiFAn7Djk-8U-_PfqZNOeHJdUtORoSs42RgCgmlkgnY0gmlwhKwSfg2KbXVsdGlhZGRyc5YACASsEn4NBpmNAAoErBJ-DQaZjt0DgnJzhQADAQAAiXNlY3AyNTZrMaECHxZIPZVy8Gxk-ItNBrz32nj79zhqDvsvadyW8lcq4L6DdGNwgpmNg3VkcIKZj4V3YWt1MgM --storenode=/ip4/172.18.126.13/tcp/39309/p2p/16Uiu2HAkwX2KowALnGvqT6Sggiv6urCWBAVWe17qP4UkZfFQgw73 --store=true --relay=true
2026-02-07 04:34:41.573 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.137.27 waku 2b7b2f0ca39e296f9f734f420d0f09484e5e6d6af718bf5763c7b56b9414f79d
2026-02-07 04:34:41.606 DEBUG [src.node.docker_mananger] Container started with ID 2b7b2f0ca39e. Setting up logs at ./log/docker/store_node1_2026-02-07_04-34-40__3f1d3bd7-0446-4253-88dc-e2aa482a1b64__wakuorg_nwaku:latest.log
2026-02-07 04:34:41.606 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43698
2026-02-07 04:34:41.606 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-07 04:34:42.608 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43698/health" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:34:42.612 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-07 04:34:42.612 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-07 04:34:42.612 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43698/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:34:42.615 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.27/tcp/43699/p2p/16Uiu2HAmJv6dj327vmY8Fi2Czue3KmGw2fvNG6va3tDdK4Bb6phF","/ip4/172.18.137.27/tcp/43700/ws/p2p/16Uiu2HAmJv6dj327vmY8Fi2Czue3KmGw2fvNG6va3tDdK4Bb6phF"],"enrUri":"enr:-L24QOY4X6QKQQ_Um9kiVA3VJC-6K7imVI-Os7zLAFURNt-oLJaTvLx6gDsXY2A-l-MshYM9GWGbWcPsqdX0nNIrj0ACgmlkgnY0gmlwhKwSiRuKbXVsdGlhZGRyc5YACASsEokbBqqzAAoErBKJGwaqtN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXQTwNjz78dUSfKhGb-VckR9yvgVmdS-4kRb8zYfCIaKDdGNwgqqzg3VkcIKqtYV3YWt1MgM"}'
2026-02-07 04:34:42.615 INFO [src.node.waku_node] REST service is ready !!
2026-02-07 04:34:42.615 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43698/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.13/tcp/39309/p2p/16Uiu2HAkwX2KowALnGvqT6Sggiv6urCWBAVWe17qP4UkZfFQgw73"]'
2026-02-07 04:34:42.618 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:42.618 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-07 04:34:42.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:42.621 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43698/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-07 04:34:42.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:42.624 DEBUG [src.steps.store] Relaying message
2026-02-07 04:34:42.624 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:34:42.630 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:42.630 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:34:42.831 DEBUG [src.steps.store] Relaying message
2026-02-07 04:34:42.831 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:34:42.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:42.837 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:34:43.038 DEBUG [src.steps.store] Relaying message
2026-02-07 04:34:43.039 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:34:43.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:43.044 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:34:43.245 DEBUG [src.steps.store] Relaying message
2026-02-07 04:34:43.245 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:34:43.250 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:43.251 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:34:43.452 DEBUG [src.steps.store] Relaying message
2026-02-07 04:34:43.453 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:34:43.458 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:43.458 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:34:43.659 DEBUG [src.steps.store] Relaying message
2026-02-07 04:34:43.659 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:34:43.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:43.665 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:34:43.866 DEBUG [src.steps.store] Relaying message
2026-02-07 04:34:43.866 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:34:43.872 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:43.872 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:34:44.073 DEBUG [src.steps.store] Relaying message
2026-02-07 04:34:44.074 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:34:44.080 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:44.081 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:34:44.281 DEBUG [src.steps.store] Relaying message
2026-02-07 04:34:44.282 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:34:44.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:44.288 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:34:44.489 DEBUG [src.steps.store] Relaying message
2026-02-07 04:34:44.490 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39308/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-07 04:34:44.499 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-07 04:34:44.500 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-07 04:34:44.700 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39308/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x24497388a3bce6ecbf238477868d00ac288f9ddac40b491f40ec8a230ccf4305&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:34:44.704 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:39308/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x24497388a3bce6ecbf238477868d00ac288f9ddac40b491f40ec8a230ccf4305&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-07 04:34:44.704 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43698/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x24497388a3bce6ecbf238477868d00ac288f9ddac40b491f40ec8a230ccf4305&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-07 04:34:44.707 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:43698/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x24497388a3bce6ecbf238477868d00ac288f9ddac40b491f40ec8a230ccf4305&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-07 04:34:44.708 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-07 04:34:44.710 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-07 04:34:44.710 DEBUG [src.node.waku_node] Stopping container with id 78f71bd5b82a
2026-02-07 04:34:45.290 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:34:45.292 DEBUG [src.node.waku_node] Stopping container with id 2b7b2f0ca39e
2026-02-07 04:34:45.866 DEBUG [src.node.waku_node] Container stopped.
2026-02-07 04:34:45.868 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-07 04:34:45.876 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-07 04:34:45.884 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
