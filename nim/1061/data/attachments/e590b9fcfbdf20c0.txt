2026-01-29 04:30:56.769 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:30:56.770 DEBUG [tests.conftest] Running test: test_filter with id: 2026-01-29_04-30-56__d2fcabf0-d91c-40ce-859b-5b815e0267d0
2026-01-29 04:30:56.770 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:30:56.770 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-29 04:30:56.771 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-01-29 04:30:56.771 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:30:56.771 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-29 04:30:56.788 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:30:56.788 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-30-56__d2fcabf0-d91c-40ce-859b-5b815e0267d0__wakuorg_nwaku:latest.log
2026-01-29 04:30:56.788 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:30:56.788 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:30:56.833 DEBUG [src.node.docker_mananger] Network waku created
2026-01-29 04:30:56.833 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.144
2026-01-29 04:30:56.834 DEBUG [src.node.docker_mananger] Generated ports ['53799', '53800', '53801', '53802', '53803']
2026-01-29 04:30:56.834 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:30:56.834 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:30:56.834 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:30:56.834 DEBUG [src.node.docker_mananger] docker run -i -t -p 53799:53799 -p 53800:53800 -p 53801:53801 -p 53802:53802 -p 53803:53803 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53801 --rest-port=53799 --tcp-port=53800 --discv5-udp-port=53802 --rest-address=0.0.0.0 --nat=extip:172.18.121.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cea32202bb7c7c82c7cdfed75f190fbadfc228fde0ddf4e322a3897ace9b8b2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53803 --metrics-logging=true --relay=true --filter=true
2026-01-29 04:31:00.080 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.144 waku 15dcee8ea32eb9ec230bdb0c9756097622fd7dae51cb34e1f799e281c94a53fb
2026-01-29 04:31:00.112 DEBUG [src.node.docker_mananger] Container started with ID 15dcee8ea32e. Setting up logs at ./log/docker/node1_2026-01-29_04-30-56__d2fcabf0-d91c-40ce-859b-5b815e0267d0__wakuorg_nwaku:latest.log
2026-01-29 04:31:00.114 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53799
2026-01-29 04:31:00.114 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:31:01.115 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53799/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:01.119 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:31:01.119 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:31:01.119 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53799/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:01.122 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.144/tcp/53800/p2p/16Uiu2HAmHcFR1WSdbKy1JSuYzL1fdkRnWhQYSWHd3sanSdXcQrdn","/ip4/172.18.121.144/tcp/53801/ws/p2p/16Uiu2HAmHcFR1WSdbKy1JSuYzL1fdkRnWhQYSWHd3sanSdXcQrdn"],"enrUri":"enr:-L24QK4wlT83Sf5cRmGHJXtNUzjMj1D2x6c9AWS_zuMeyR7uYgpVnQSz0Qo4NL28qZNaK1IK3ld71wOcH-JIaB7EprQCgmlkgnY0gmlwhKwSeZCKbXVsdGlhZGRyc5YACASsEnmQBtIoAAoErBJ5kAbSKd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSZa5q4feZ52jrC-ItMXIaz-U_akmDaYNjV9iMbiMXkGDdGNwgtIog3VkcILSKoV3YWt1MgU"}'
2026-01-29 04:31:01.122 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:31:01.128 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:31:01.128 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-30-56__d2fcabf0-d91c-40ce-859b-5b815e0267d0__wakuorg_nwaku:latest.log
2026-01-29 04:31:01.128 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:31:01.129 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:31:01.130 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:31:01.130 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.76.247
2026-01-29 04:31:01.130 DEBUG [src.node.docker_mananger] Generated ports ['56301', '56302', '56303', '56304', '56305']
2026-01-29 04:31:01.130 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:31:01.130 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:31:01.130 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:31:01.131 DEBUG [src.node.docker_mananger] docker run -i -t -p 56301:56301 -p 56302:56302 -p 56303:56303 -p 56304:56304 -p 56305:56305 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56303 --rest-port=56301 --tcp-port=56302 --discv5-udp-port=56304 --rest-address=0.0.0.0 --nat=extip:172.18.76.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0dffc9132c6ccda45a48dd92fbd71717c01ec944e0fc8addb6daabd1fcecaadb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56305 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QK4wlT83Sf5cRmGHJXtNUzjMj1D2x6c9AWS_zuMeyR7uYgpVnQSz0Qo4NL28qZNaK1IK3ld71wOcH-JIaB7EprQCgmlkgnY0gmlwhKwSeZCKbXVsdGlhZGRyc5YACASsEnmQBtIoAAoErBJ5kAbSKd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSZa5q4feZ52jrC-ItMXIaz-U_akmDaYNjV9iMbiMXkGDdGNwgtIog3VkcILSKoV3YWt1MgU --filternode=/ip4/172.18.121.144/tcp/53800/p2p/16Uiu2HAmHcFR1WSdbKy1JSuYzL1fdkRnWhQYSWHd3sanSdXcQrdn
2026-01-29 04:31:01.333 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.76.247 waku 7e3f0634ab878ca51474dc072f5449c39962908530ee68f7f54814da01188463
2026-01-29 04:31:01.364 DEBUG [src.node.docker_mananger] Container started with ID 7e3f0634ab87. Setting up logs at ./log/docker/node1_2026-01-29_04-30-56__d2fcabf0-d91c-40ce-859b-5b815e0267d0__wakuorg_nwaku:latest.log
2026-01-29 04:31:01.364 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56301
2026-01-29 04:31:01.365 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:31:02.365 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56301/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:02.369 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-29 04:31:02.369 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:31:02.369 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56301/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:02.372 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.247/tcp/56302/p2p/16Uiu2HAmVCPhmUQqi9iwJ2J7GrWZcxt3QduUmQoj4oG5G15tWYZt","/ip4/172.18.76.247/tcp/56303/ws/p2p/16Uiu2HAmVCPhmUQqi9iwJ2J7GrWZcxt3QduUmQoj4oG5G15tWYZt"],"enrUri":"enr:-L24QC_DM1_aV5zUJBT7S4RH7JAWOT8jXjofnZWer_PKN0lOBWsNoYvfqo1rVDZnnNko_-TPtFcxIlzh2XZ0gQsdMqoCgmlkgnY0gmlwhKwSTPeKbXVsdGlhZGRyc5YACASsEkz3BtvuAAoErBJM9wbb790DgnJzhQADAQAAiXNlY3AyNTZrMaED9cZmu18RVNO7D5ry05nlrx7_1tLKu7KD14fdfWW__YeDdGNwgtvug3VkcILb8IV3YWt1MgA"}'
2026-01-29 04:31:02.372 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:31:02.373 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53799/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:31:02.386 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:02.387 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56301/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f19ce262-bd38-4c38-8a19-598544a3ba5e", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-29 04:31:02.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f19ce262-bd38-4c38-8a19-598544a3ba5e","statusDesc":"OK"}'
2026-01-29 04:31:02.426 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53799/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:31:02.439 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:02.439 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:31:02.539 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:31:02.540 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56301/filter/v2/messages/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:02.543 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661062426845333,"ephemeral":false}]'
2026-01-29 04:31:02.547 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:31:02.548 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:31:02.549 DEBUG [src.node.waku_node] Stopping container with id 15dcee8ea32e
2026-01-29 04:31:03.132 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:31:03.132 DEBUG [src.node.waku_node] Stopping container with id 7e3f0634ab87
2026-01-29 04:31:03.678 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:31:03.679 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:31:03.686 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:31:03.691 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
