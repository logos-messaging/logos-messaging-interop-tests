2026-01-29 04:48:30.405 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:48:30.406 DEBUG [tests.conftest] Running test: test_content_topic_also_in_docker_flags[/aaaaa/3/bbbbb/proto] with id: 2026-01-29_04-48-30__53319f6c-1ad2-4500-9247-d1cb6b5b62bf
2026-01-29 04:48:30.407 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:48:30.407 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:48:30.407 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-01-29 04:48:30.418 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:48:30.419 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-48-30__53319f6c-1ad2-4500-9247-d1cb6b5b62bf__wakuorg_nwaku:latest.log
2026-01-29 04:48:30.419 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:48:30.420 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:48:30.422 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:48:30.422 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.240.205
2026-01-29 04:48:30.422 DEBUG [src.node.docker_mananger] Generated ports ['7761', '7762', '7763', '7764', '7765']
2026-01-29 04:48:30.422 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-01-29 04:48:30.423 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-01-29 04:48:30.423 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:48:30.423 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:48:30.423 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:48:30.424 DEBUG [src.node.docker_mananger] docker run -i -t -p 7761:7761 -p 7762:7762 -p 7763:7763 -p 7764:7764 -p 7765:7765 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7763 --rest-port=7761 --tcp-port=7762 --discv5-udp-port=7764 --rest-address=0.0.0.0 --nat=extip:172.18.240.205 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e03ebfca03f31825caa9e67f0db9fcc5ad66bb36c27ca630dfdf537f7dcf3ebf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7765 --metrics-logging=true --relay=true --filter=true --content-topic=/aaaaa/3/bbbbb/proto
2026-01-29 04:48:30.622 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.240.205 waku 6c676b2face4d5194c6515f94a1e8b2beac5e17ef5607a7bc21fb1b9bd7e778a
2026-01-29 04:48:30.656 ERROR [src.node.docker_mananger] Max retries reached for container 19446e43cdf5. Exiting log stream.
2026-01-29 04:48:30.659 DEBUG [src.node.docker_mananger] Container started with ID 6c676b2face4. Setting up logs at ./log/docker/node1_2026-01-29_04-48-30__53319f6c-1ad2-4500-9247-d1cb6b5b62bf__wakuorg_nwaku:latest.log
2026-01-29 04:48:30.661 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7761
2026-01-29 04:48:30.661 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:48:31.245 ERROR [src.node.docker_mananger] Max retries reached for container 5dd6ee807c7a. Exiting log stream.
2026-01-29 04:48:31.661 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7761/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:31.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:48:31.665 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:48:31.665 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7761/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:31.667 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.240.205/tcp/7762/p2p/16Uiu2HAm2XQHUqAfQNNvmDansC1FAfGHzD8FQKRQxxM6EJG9bxow","/ip4/172.18.240.205/tcp/7763/ws/p2p/16Uiu2HAm2XQHUqAfQNNvmDansC1FAfGHzD8FQKRQxxM6EJG9bxow"],"enrUri":"enr:-L24QAe3CfnNxCvta82P76yujiVky2C1I0tALegDySjowoMXDnpUng-VNK6qOjNGO-5mMg2yjZhIiKyOsgpso-0HnEMCgmlkgnY0gmlwhKwS8M2KbXVsdGlhZGRyc5YACASsEvDNBh5SAAoErBLwzQYeU90DgnJzhQACAQAAiXNlY3AyNTZrMaECaXmMAPtnrwbhjFE4VYKl4xH3bmbIBXjjIbqPsU8Cx06DdGNwgh5Sg3VkcIIeVIV3YWt1MgU"}'
2026-01-29 04:48:31.668 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:48:31.675 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:48:31.675 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-29_04-48-30__53319f6c-1ad2-4500-9247-d1cb6b5b62bf__wakuorg_nwaku:latest.log
2026-01-29 04:48:31.675 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:48:31.675 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:48:31.677 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:48:31.677 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.95.32
2026-01-29 04:48:31.677 DEBUG [src.node.docker_mananger] Generated ports ['27037', '27038', '27039', '27040', '27041']
2026-01-29 04:48:31.677 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-01-29 04:48:31.677 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-01-29 04:48:31.677 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:48:31.678 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:48:31.678 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:48:31.678 DEBUG [src.node.docker_mananger] docker run -i -t -p 27037:27037 -p 27038:27038 -p 27039:27039 -p 27040:27040 -p 27041:27041 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27039 --rest-port=27037 --tcp-port=27038 --discv5-udp-port=27040 --rest-address=0.0.0.0 --nat=extip:172.18.95.32 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=9af2a566c251efde3c3792f6bfb7e595fb76bedbc0f91be057d69a139acba1a6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27041 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QAe3CfnNxCvta82P76yujiVky2C1I0tALegDySjowoMXDnpUng-VNK6qOjNGO-5mMg2yjZhIiKyOsgpso-0HnEMCgmlkgnY0gmlwhKwS8M2KbXVsdGlhZGRyc5YACASsEvDNBh5SAAoErBLwzQYeU90DgnJzhQACAQAAiXNlY3AyNTZrMaECaXmMAPtnrwbhjFE4VYKl4xH3bmbIBXjjIbqPsU8Cx06DdGNwgh5Sg3VkcIIeVIV3YWt1MgU --content-topic=/aaaaa/3/bbbbb/proto
2026-01-29 04:48:31.866 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.95.32 waku 3fec37a79da2d8b807b07e4973efad1fe04343830da098bc0da384c53a731db1
2026-01-29 04:48:31.896 DEBUG [src.node.docker_mananger] Container started with ID 3fec37a79da2. Setting up logs at ./log/docker/node2_2026-01-29_04-48-30__53319f6c-1ad2-4500-9247-d1cb6b5b62bf__wakuorg_nwaku:latest.log
2026-01-29 04:48:31.897 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27037
2026-01-29 04:48:31.898 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:48:32.898 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27037/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:32.915 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-29 04:48:32.915 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:48:32.918 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27037/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:32.922 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.32/tcp/27038/p2p/16Uiu2HAm26GaVL6i1yTvxfrprzRHVNEtLG7gpGZo48LJPAM8aedL","/ip4/172.18.95.32/tcp/27039/ws/p2p/16Uiu2HAm26GaVL6i1yTvxfrprzRHVNEtLG7gpGZo48LJPAM8aedL"],"enrUri":"enr:-L24QBysAKbZxgDFT6vru83nQh2SrzNG9Pht7lM0fTCkOI15N7Mm4W_k8JA0Moocjp7dE8HdlG4bOa37M6Q18aP_2W8CgmlkgnY0gmlwhKwSXyCKbXVsdGlhZGRyc5YACASsEl8gBmmeAAoErBJfIAZpn90DgnJzhQACAQAAiXNlY3AyNTZrMaECYwlQB4pl90nQsrMUYiC_kBoMf4mjdyiwj3EBJaUm68eDdGNwgmmeg3VkcIJpoIV3YWt1MgE"}'
2026-01-29 04:48:32.922 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:48:32.923 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27037/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.240.205/tcp/7762/p2p/16Uiu2HAm2XQHUqAfQNNvmDansC1FAfGHzD8FQKRQxxM6EJG9bxow"]'
2026-01-29 04:48:32.926 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:32.926 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7761/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-01-29 04:48:32.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:32.929 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27037/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-01-29 04:48:32.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:32.932 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:48:32.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:32.937 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:48:33.038 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:48:33.038 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:33.041 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769662112932154880,"ephemeral":false,"proof":""}]'
2026-01-29 04:48:33.043 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:48:33.043 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27037/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:33.045 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769662112932154880,"ephemeral":false,"proof":""}]'
2026-01-29 04:48:33.048 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:48:33.049 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:48:33.049 DEBUG [src.node.waku_node] Stopping container with id 6c676b2face4
2026-01-29 04:48:33.628 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:48:33.628 DEBUG [src.node.waku_node] Stopping container with id 3fec37a79da2
2026-01-29 04:48:34.167 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:48:34.169 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:48:34.174 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:48:34.179 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
