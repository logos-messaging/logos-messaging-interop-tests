2026-01-29 04:35:54.147 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:35:54.148 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_from_single_pubsub_topic with id: 2026-01-29_04-35-54__5b66fa89-9f11-4767-b38a-58025dffae8d
2026-01-29 04:35:54.148 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:35:54.148 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:35:54.149 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-01-29 04:35:54.155 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:35:54.155 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-35-54__5b66fa89-9f11-4767-b38a-58025dffae8d__wakuorg_nwaku:latest.log
2026-01-29 04:35:54.156 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:35:54.156 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:35:54.164 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:35:54.164 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.16.97
2026-01-29 04:35:54.164 DEBUG [src.node.docker_mananger] Generated ports ['9448', '9449', '9450', '9451', '9452']
2026-01-29 04:35:54.164 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:35:54.165 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:35:54.165 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:35:54.165 DEBUG [src.node.docker_mananger] docker run -i -t -p 9448:9448 -p 9449:9449 -p 9450:9450 -p 9451:9451 -p 9452:9452 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9450 --rest-port=9448 --tcp-port=9449 --discv5-udp-port=9451 --rest-address=0.0.0.0 --nat=extip:172.18.16.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7abeb1cb8b83604b2bb893ad685f3a7b82bfaf2b865baa0ab37aec0cab343bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9452 --metrics-logging=true --relay=true
2026-01-29 04:35:54.340 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.16.97 waku e33cf2e28d0c979c5c9e22ac38a6021300c2f4a532bc80b2dc1ea4027df7b545
2026-01-29 04:35:54.370 DEBUG [src.node.docker_mananger] Container started with ID e33cf2e28d0c. Setting up logs at ./log/docker/node1_2026-01-29_04-35-54__5b66fa89-9f11-4767-b38a-58025dffae8d__wakuorg_nwaku:latest.log
2026-01-29 04:35:54.371 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9448
2026-01-29 04:35:54.371 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:35:54.409 ERROR [src.node.docker_mananger] Max retries reached for container a3e87b883a6e. Exiting log stream.
2026-01-29 04:35:54.933 ERROR [src.node.docker_mananger] Max retries reached for container 6aa051af05c8. Exiting log stream.
2026-01-29 04:35:55.372 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9448/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:35:55.375 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:35:55.375 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:35:55.375 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9448/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:35:55.377 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.97/tcp/9449/p2p/16Uiu2HAmDDzC89ZkeqXmBRgEGMxhvwKzmvD5Vxzi77yTw2rAY7ew","/ip4/172.18.16.97/tcp/9450/ws/p2p/16Uiu2HAmDDzC89ZkeqXmBRgEGMxhvwKzmvD5Vxzi77yTw2rAY7ew"],"enrUri":"enr:-L24QJQZDYG_Z2OzcCxwWYhcGdMnX4WU3xP8CUouoo108Vg9ApE8_IHogGGT9hr1PL8Z0LLcWm1soBkjfuf_OFdq77oCgmlkgnY0gmlwhKwSEGGKbXVsdGlhZGRyc5YACASsEhBhBiTpAAoErBIQYQYk6t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCHP87mdJSZxAcgJ4dgYUGyJgcNCaaFsCcW7UExMx2riDdGNwgiTpg3VkcIIk64V3YWt1MgE"}'
2026-01-29 04:35:55.378 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:35:55.384 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:35:55.384 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-29_04-35-54__5b66fa89-9f11-4767-b38a-58025dffae8d__wakuorg_nwaku:latest.log
2026-01-29 04:35:55.384 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:35:55.384 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:35:55.385 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:35:55.386 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.25.158
2026-01-29 04:35:55.386 DEBUG [src.node.docker_mananger] Generated ports ['14950', '14951', '14952', '14953', '14954']
2026-01-29 04:35:55.386 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:35:55.386 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:35:55.386 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:35:55.386 DEBUG [src.node.docker_mananger] docker run -i -t -p 14950:14950 -p 14951:14951 -p 14952:14952 -p 14953:14953 -p 14954:14954 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14952 --rest-port=14950 --tcp-port=14951 --discv5-udp-port=14953 --rest-address=0.0.0.0 --nat=extip:172.18.25.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f6de06a45e1c3f338dfcbdece8bbc890cbc9ebe03c5bccfefbadc9fb5762d25b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14954 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJQZDYG_Z2OzcCxwWYhcGdMnX4WU3xP8CUouoo108Vg9ApE8_IHogGGT9hr1PL8Z0LLcWm1soBkjfuf_OFdq77oCgmlkgnY0gmlwhKwSEGGKbXVsdGlhZGRyc5YACASsEhBhBiTpAAoErBIQYQYk6t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCHP87mdJSZxAcgJ4dgYUGyJgcNCaaFsCcW7UExMx2riDdGNwgiTpg3VkcIIk64V3YWt1MgE
2026-01-29 04:35:55.563 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.25.158 waku 283c674b1822c14a506566ea6d8a4c91d7519eb9bd7ab0ee08d2876ca9ce3bb8
2026-01-29 04:35:55.596 DEBUG [src.node.docker_mananger] Container started with ID 283c674b1822. Setting up logs at ./log/docker/node2_2026-01-29_04-35-54__5b66fa89-9f11-4767-b38a-58025dffae8d__wakuorg_nwaku:latest.log
2026-01-29 04:35:55.597 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14950
2026-01-29 04:35:55.597 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:35:56.597 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14950/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:35:56.608 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:35:56.609 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:35:56.609 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14950/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:35:56.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.158/tcp/14951/p2p/16Uiu2HAmP8bFQQ4z2ZJtzbWvd2M3s8LZ3Cf2aC2wFG6yEojz4Hdq","/ip4/172.18.25.158/tcp/14952/ws/p2p/16Uiu2HAmP8bFQQ4z2ZJtzbWvd2M3s8LZ3Cf2aC2wFG6yEojz4Hdq"],"enrUri":"enr:-L24QPkQmojlLBrvhbScjsJWeIW1HsFNN9d_xx2gWX9Gp6wiLMF1l9CFDOaPceG0LKjGNSOqk7RuWkxmPXcgBUxY2VICgmlkgnY0gmlwhKwSGZ6KbXVsdGlhZGRyc5YACASsEhmeBjpnAAoErBIZngY6aN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDm6cC0IrzM31HcGKsH77uHr5XvEAr1iu2f_uRUmJ6S-CDdGNwgjpng3VkcII6aYV3YWt1MgE"}'
2026-01-29 04:35:56.617 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:35:56.617 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14950/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.16.97/tcp/9449/p2p/16Uiu2HAmDDzC89ZkeqXmBRgEGMxhvwKzmvD5Vxzi77yTw2rAY7ew"]'
2026-01-29 04:35:56.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:35:56.621 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9448/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:35:56.625 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:35:56.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14950/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:35:56.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:35:56.631 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9448/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:35:56.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:35:56.636 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:35:56.737 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:35:56.737 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9448/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:35:56.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661356631453696,"ephemeral":false,"proof":""}]'
2026-01-29 04:35:56.741 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:35:56.741 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:35:56.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661356631453696,"ephemeral":false,"proof":""}]'
2026-01-29 04:35:56.745 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:9448/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:35:56.748 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:35:56.748 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:14950/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:35:56.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:35:56.753 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9448/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:35:56.756 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9448/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/3/1'
2026-01-29 04:35:56.757 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:35:56.758 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:35:56.758 DEBUG [src.node.waku_node] Stopping container with id e33cf2e28d0c
2026-01-29 04:35:57.290 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:35:57.291 DEBUG [src.node.waku_node] Stopping container with id 283c674b1822
2026-01-29 04:35:57.777 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:35:57.778 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:35:57.784 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:35:57.790 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
