2026-01-29 04:48:17.450 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:48:17.450 DEBUG [tests.conftest] Running test: test_single_content_topic[/waku/2/content/test.js] with id: 2026-01-29_04-48-17__c25dc06d-c7f1-4c85-ac07-3cedcf6e6670
2026-01-29 04:48:17.451 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:48:17.451 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:48:17.451 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-01-29 04:48:17.459 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:48:17.460 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-48-17__c25dc06d-c7f1-4c85-ac07-3cedcf6e6670__wakuorg_nwaku:latest.log
2026-01-29 04:48:17.460 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:48:17.460 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:48:17.461 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:48:17.462 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.175.31
2026-01-29 04:48:17.462 DEBUG [src.node.docker_mananger] Generated ports ['33516', '33517', '33518', '33519', '33520']
2026-01-29 04:48:17.462 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:48:17.462 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:48:17.462 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:48:17.462 DEBUG [src.node.docker_mananger] docker run -i -t -p 33516:33516 -p 33517:33517 -p 33518:33518 -p 33519:33519 -p 33520:33520 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33518 --rest-port=33516 --tcp-port=33517 --discv5-udp-port=33519 --rest-address=0.0.0.0 --nat=extip:172.18.175.31 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=20f76c1e2aec8acaf727c3d57123a4debacec15cfd0ee032cdf9597bca006054 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33520 --metrics-logging=true --relay=true --filter=true --content-topic=/waku/2/content/test.js
2026-01-29 04:48:17.662 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.175.31 waku a132f581b27fe76233c05a43ddb76996efcc5580664d6bcdbdf02fb3a1f3f191
2026-01-29 04:48:17.683 ERROR [src.node.docker_mananger] Max retries reached for container 87681bea30a1. Exiting log stream.
2026-01-29 04:48:17.694 DEBUG [src.node.docker_mananger] Container started with ID a132f581b27f. Setting up logs at ./log/docker/node1_2026-01-29_04-48-17__c25dc06d-c7f1-4c85-ac07-3cedcf6e6670__wakuorg_nwaku:latest.log
2026-01-29 04:48:17.694 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33516
2026-01-29 04:48:17.694 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:48:18.252 ERROR [src.node.docker_mananger] Max retries reached for container 9fc8824384c3. Exiting log stream.
2026-01-29 04:48:18.695 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33516/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:18.699 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:48:18.699 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:48:18.699 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33516/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:18.701 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.175.31/tcp/33517/p2p/16Uiu2HAm9Jgco3H1sx1YGU7s6tyD2iYULvuxxDM4o6UcgXF5sGVh","/ip4/172.18.175.31/tcp/33518/ws/p2p/16Uiu2HAm9Jgco3H1sx1YGU7s6tyD2iYULvuxxDM4o6UcgXF5sGVh"],"enrUri":"enr:-L24QCodGsMkrjmhJ87w-d2EKkbUQvSPVns7U_IGcz3ht6BVX4C7InFSYe0tzUc0cD_zNFQD8ZTEAevZLnNv3bip2fMCgmlkgnY0gmlwhKwSrx-KbXVsdGlhZGRyc5YACASsEq8fBoLtAAoErBKvHwaC7t0DgnJzhQACAQAAiXNlY3AyNTZrMaECzjlFy5AS97HmYVWdbVQZzEu0zGIUzYBzrQ1VQonBNGyDdGNwgoLtg3VkcIKC74V3YWt1MgU"}'
2026-01-29 04:48:18.701 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:48:18.708 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:48:18.708 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-29_04-48-17__c25dc06d-c7f1-4c85-ac07-3cedcf6e6670__wakuorg_nwaku:latest.log
2026-01-29 04:48:18.708 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:48:18.708 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:48:18.710 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:48:18.710 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.207.48
2026-01-29 04:48:18.710 DEBUG [src.node.docker_mananger] Generated ports ['26612', '26613', '26614', '26615', '26616']
2026-01-29 04:48:18.710 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:48:18.710 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:48:18.710 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:48:18.710 DEBUG [src.node.docker_mananger] docker run -i -t -p 26612:26612 -p 26613:26613 -p 26614:26614 -p 26615:26615 -p 26616:26616 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26614 --rest-port=26612 --tcp-port=26613 --discv5-udp-port=26615 --rest-address=0.0.0.0 --nat=extip:172.18.207.48 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2685df00aeab1f995a3f208ddfe237c89e5b1be8d1eb5109bdffe5c0dfacee41 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26616 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCodGsMkrjmhJ87w-d2EKkbUQvSPVns7U_IGcz3ht6BVX4C7InFSYe0tzUc0cD_zNFQD8ZTEAevZLnNv3bip2fMCgmlkgnY0gmlwhKwSrx-KbXVsdGlhZGRyc5YACASsEq8fBoLtAAoErBKvHwaC7t0DgnJzhQACAQAAiXNlY3AyNTZrMaECzjlFy5AS97HmYVWdbVQZzEu0zGIUzYBzrQ1VQonBNGyDdGNwgoLtg3VkcIKC74V3YWt1MgU --content-topic=/waku/2/content/test.js
2026-01-29 04:48:18.894 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.207.48 waku 03924a83c75efe68d76f844f385eb3c2b67e60e796fad1fb6243d4324a7c4a42
2026-01-29 04:48:18.923 DEBUG [src.node.docker_mananger] Container started with ID 03924a83c75e. Setting up logs at ./log/docker/node2_2026-01-29_04-48-17__c25dc06d-c7f1-4c85-ac07-3cedcf6e6670__wakuorg_nwaku:latest.log
2026-01-29 04:48:18.924 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26612
2026-01-29 04:48:18.924 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:48:19.924 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26612/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:19.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-29 04:48:19.944 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:48:19.946 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26612/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:19.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.48/tcp/26613/p2p/16Uiu2HAmCVnFe6KKGEcdixfe2GdihHiSEH53AswhBCmyHEBqXXF4","/ip4/172.18.207.48/tcp/26614/ws/p2p/16Uiu2HAmCVnFe6KKGEcdixfe2GdihHiSEH53AswhBCmyHEBqXXF4"],"enrUri":"enr:-L24QBCujOxLeZaF8cOEFHnyJMyrQYXWTyNk7E-bFbBs884eIYF8S_pCCZPVf0GtCKQ1WvPZVV6iCJRCldxhOqwaNY8CgmlkgnY0gmlwhKwSzzCKbXVsdGlhZGRyc5YACASsEs8wBmf1AAoErBLPMAZn9t0DgnJzhQACAQAAiXNlY3AyNTZrMaEC_aQYGWlFVmu74By6hu-ULnCnxfxSK5JPcwDsniWdDpeDdGNwgmf1g3VkcIJn94V3YWt1MgE"}'
2026-01-29 04:48:19.951 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:48:19.951 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26612/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.175.31/tcp/33517/p2p/16Uiu2HAm9Jgco3H1sx1YGU7s6tyD2iYULvuxxDM4o6UcgXF5sGVh"]'
2026-01-29 04:48:19.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:19.955 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33516/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
2026-01-29 04:48:19.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:19.958 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26612/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
2026-01-29 04:48:19.960 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:19.961 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33516/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:48:19.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:19.966 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:48:20.066 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:48:20.067 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33516/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:20.070 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1769662099961126943,"ephemeral":false,"proof":""}]'
2026-01-29 04:48:20.071 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:48:20.071 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26612/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:20.074 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1769662099961126943,"ephemeral":false,"proof":""}]'
2026-01-29 04:48:20.077 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:48:20.078 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:48:20.078 DEBUG [src.node.waku_node] Stopping container with id a132f581b27f
2026-01-29 04:48:20.628 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:48:20.629 DEBUG [src.node.waku_node] Stopping container with id 03924a83c75e
2026-01-29 04:48:21.173 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:48:21.175 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:48:21.179 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:48:21.185 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
