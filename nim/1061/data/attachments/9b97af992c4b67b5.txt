2026-01-29 04:49:42.962 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:49:42.964 DEBUG [tests.conftest] Running test: test_content_topic_and_pubsub_topic_not_in_docker_flags with id: 2026-01-29_04-49-42__00cdffc6-3389-42f6-bf6f-2c2f4cafcef8
2026-01-29 04:49:42.964 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:49:42.965 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:49:42.965 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-01-29 04:49:42.974 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:49:42.974 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-49-42__00cdffc6-3389-42f6-bf6f-2c2f4cafcef8__wakuorg_nwaku:latest.log
2026-01-29 04:49:42.974 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:49:42.975 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:49:42.976 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:49:42.976 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.153.42
2026-01-29 04:49:42.976 DEBUG [src.node.docker_mananger] Generated ports ['28509', '28510', '28511', '28512', '28513']
2026-01-29 04:49:42.976 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:49:42.976 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:49:42.976 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:49:42.977 DEBUG [src.node.docker_mananger] docker run -i -t -p 28509:28509 -p 28510:28510 -p 28511:28511 -p 28512:28512 -p 28513:28513 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28511 --rest-port=28509 --tcp-port=28510 --discv5-udp-port=28512 --rest-address=0.0.0.0 --nat=extip:172.18.153.42 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c78e996ad3fce14ab86f9afdd88d6aaaf63c4c3a6d5b7cf8e7de8c2900e38ec4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28513 --metrics-logging=true --relay=true --filter=true
2026-01-29 04:49:43.155 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.153.42 waku 5c82798c945c39c32754e2100f7efd0bae5c6c0935548c1678885c3cf56dffce
2026-01-29 04:49:43.184 DEBUG [src.node.docker_mananger] Container started with ID 5c82798c945c. Setting up logs at ./log/docker/node1_2026-01-29_04-49-42__00cdffc6-3389-42f6-bf6f-2c2f4cafcef8__wakuorg_nwaku:latest.log
2026-01-29 04:49:43.185 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28509
2026-01-29 04:49:43.185 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:49:43.268 ERROR [src.node.docker_mananger] Max retries reached for container 794d18e0a48a. Exiting log stream.
2026-01-29 04:49:43.782 ERROR [src.node.docker_mananger] Max retries reached for container c93732b84b90. Exiting log stream.
2026-01-29 04:49:44.186 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28509/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:44.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:49:44.189 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:49:44.189 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28509/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:44.192 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.153.42/tcp/28510/p2p/16Uiu2HAmQ9UeNrftV4c8KFT63fCBEeCpwYcaDYnuZEHxJBHL1rAK","/ip4/172.18.153.42/tcp/28511/ws/p2p/16Uiu2HAmQ9UeNrftV4c8KFT63fCBEeCpwYcaDYnuZEHxJBHL1rAK"],"enrUri":"enr:-L24QHj1vvHYtUV7wHsVe5BLRntaaKi5kapJtN9kHCvhJqvRIjXscQNnEMkzaP3I-wCSBB4KAMn72QqLg5B5SUer_0sCgmlkgnY0gmlwhKwSmSqKbXVsdGlhZGRyc5YACASsEpkqBm9eAAoErBKZKgZvX90DgnJzhQACAQAAiXNlY3AyNTZrMaEDqrzPyY1b4q_bhPNQ0OSAMKqQVrsGqbso4F4t7WV_NDCDdGNwgm9eg3VkcIJvYIV3YWt1MgU"}'
2026-01-29 04:49:44.192 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:49:44.198 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:49:44.199 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-29_04-49-42__00cdffc6-3389-42f6-bf6f-2c2f4cafcef8__wakuorg_nwaku:latest.log
2026-01-29 04:49:44.199 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:49:44.199 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:49:44.200 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:49:44.200 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.197.220
2026-01-29 04:49:44.200 DEBUG [src.node.docker_mananger] Generated ports ['61514', '61515', '61516', '61517', '61518']
2026-01-29 04:49:44.201 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:49:44.201 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:49:44.201 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:49:44.201 DEBUG [src.node.docker_mananger] docker run -i -t -p 61514:61514 -p 61515:61515 -p 61516:61516 -p 61517:61517 -p 61518:61518 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61516 --rest-port=61514 --tcp-port=61515 --discv5-udp-port=61517 --rest-address=0.0.0.0 --nat=extip:172.18.197.220 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=458b50956facba64b13f0ae05ba9dd57978b165e75bdb64c7861d25ddabb1d99 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61518 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QHj1vvHYtUV7wHsVe5BLRntaaKi5kapJtN9kHCvhJqvRIjXscQNnEMkzaP3I-wCSBB4KAMn72QqLg5B5SUer_0sCgmlkgnY0gmlwhKwSmSqKbXVsdGlhZGRyc5YACASsEpkqBm9eAAoErBKZKgZvX90DgnJzhQACAQAAiXNlY3AyNTZrMaEDqrzPyY1b4q_bhPNQ0OSAMKqQVrsGqbso4F4t7WV_NDCDdGNwgm9eg3VkcIJvYIV3YWt1MgU
2026-01-29 04:49:44.383 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.197.220 waku bd35b0e0d48dd2c462123154432deeced2b90dc9c47ac1fd8df4986357c49d44
2026-01-29 04:49:44.412 DEBUG [src.node.docker_mananger] Container started with ID bd35b0e0d48d. Setting up logs at ./log/docker/node2_2026-01-29_04-49-42__00cdffc6-3389-42f6-bf6f-2c2f4cafcef8__wakuorg_nwaku:latest.log
2026-01-29 04:49:44.412 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61514
2026-01-29 04:49:44.412 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:49:45.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61514/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:45.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-29 04:49:45.431 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:49:45.433 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61514/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:45.437 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.220/tcp/61515/p2p/16Uiu2HAkxpXdnpavvpEhR7VRHFW95hhbiDz6o97TZPnn1vCAb93i","/ip4/172.18.197.220/tcp/61516/ws/p2p/16Uiu2HAkxpXdnpavvpEhR7VRHFW95hhbiDz6o97TZPnn1vCAb93i"],"enrUri":"enr:-L24QCNOQNSFr_Kds_n5cyGMfZu9rRJxNW4q6tVAZ2qDhfd3P2RmR8FX4c6L_drjljTeZwdJYlI48IgoUcrPVGuIqrQCgmlkgnY0gmlwhKwSxdyKbXVsdGlhZGRyc5YACASsEsXcBvBLAAoErBLF3AbwTN0DgnJzhQACAQAAiXNlY3AyNTZrMaECMm372uIrli5EibJW3YBvUEsI1oBuDYbZv3Xe50orKL2DdGNwgvBLg3VkcILwTYV3YWt1MgE"}'
2026-01-29 04:49:45.437 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:49:45.437 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61514/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.153.42/tcp/28510/p2p/16Uiu2HAmQ9UeNrftV4c8KFT63fCBEeCpwYcaDYnuZEHxJBHL1rAK"]'
2026-01-29 04:49:45.440 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:49:45.441 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28509/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-01-29 04:49:45.443 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:49:45.444 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61514/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-01-29 04:49:45.446 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:49:45.446 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28509/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:49:45.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:49:45.452 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:49:45.552 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:49:45.552 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28509/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:45.555 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769662185446797331,"ephemeral":false,"proof":""}]'
2026-01-29 04:49:45.556 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:49:45.557 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61514/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:45.559 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769662185446797331,"ephemeral":false,"proof":""}]'
2026-01-29 04:49:45.561 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:49:45.563 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:49:45.563 DEBUG [src.node.waku_node] Stopping container with id 5c82798c945c
2026-01-29 04:49:46.134 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:49:46.135 DEBUG [src.node.waku_node] Stopping container with id bd35b0e0d48d
2026-01-29 04:49:46.646 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:49:46.649 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:49:46.654 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:49:46.659 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
