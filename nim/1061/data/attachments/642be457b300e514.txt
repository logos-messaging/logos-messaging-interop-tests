2026-01-29 04:33:36.360 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:33:36.361 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_multiple_overlapping_content_topics with id: 2026-01-29_04-33-36__c1bb3ee1-ca5c-4ff6-a266-ac47effa4a04
2026-01-29 04:33:36.361 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:33:36.361 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-29 04:33:36.361 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-01-29 04:33:36.368 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:33:36.368 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-33-36__c1bb3ee1-ca5c-4ff6-a266-ac47effa4a04__wakuorg_nwaku:latest.log
2026-01-29 04:33:36.368 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:33:36.368 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:33:36.369 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:33:36.369 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.125.245
2026-01-29 04:33:36.370 DEBUG [src.node.docker_mananger] Generated ports ['27513', '27514', '27515', '27516', '27517']
2026-01-29 04:33:36.370 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:33:36.370 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:33:36.370 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:33:36.370 DEBUG [src.node.docker_mananger] docker run -i -t -p 27513:27513 -p 27514:27514 -p 27515:27515 -p 27516:27516 -p 27517:27517 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27515 --rest-port=27513 --tcp-port=27514 --discv5-udp-port=27516 --rest-address=0.0.0.0 --nat=extip:172.18.125.245 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebcdd8ab5d6fdd6d2c6bd30bfc5ae2a21bc93f1f0ebfa84893a3fcf58bc06984 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27517 --metrics-logging=true --relay=true --filter=true
2026-01-29 04:33:36.561 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.125.245 waku 36956ee9d7e2b0b5175ed12014fa238d34f726587f9112366bf33a8e24c3584a
2026-01-29 04:33:36.593 DEBUG [src.node.docker_mananger] Container started with ID 36956ee9d7e2. Setting up logs at ./log/docker/node1_2026-01-29_04-33-36__c1bb3ee1-ca5c-4ff6-a266-ac47effa4a04__wakuorg_nwaku:latest.log
2026-01-29 04:33:36.594 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27513
2026-01-29 04:33:36.595 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:33:36.651 ERROR [src.node.docker_mananger] Max retries reached for container ee8f49422cfe. Exiting log stream.
2026-01-29 04:33:37.157 ERROR [src.node.docker_mananger] Max retries reached for container 66a22a17e64c. Exiting log stream.
2026-01-29 04:33:37.595 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27513/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:33:37.598 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:33:37.599 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:33:37.599 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27513/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:33:37.601 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.245/tcp/27514/p2p/16Uiu2HAmE9FZzNVepFyThTNRkReCqi49KThGiXBrC1oUaWNvka67","/ip4/172.18.125.245/tcp/27515/ws/p2p/16Uiu2HAmE9FZzNVepFyThTNRkReCqi49KThGiXBrC1oUaWNvka67"],"enrUri":"enr:-L24QNpAoiR7TJunzcf5V41IKZbRwbJHAv1VWmoyod2XWqbmDtaIR_kialcoD9TOdG1PoOrq7nYfw6Y-cNmrRGtP83ECgmlkgnY0gmlwhKwSffWKbXVsdGlhZGRyc5YACASsEn31Bmt6AAoErBJ99QZre90DgnJzhQADAQAAiXNlY3AyNTZrMaEDFhkoYG0dyyPqp8It5oTiMzHl4flvCuysa5gOFwmQMLSDdGNwgmt6g3VkcIJrfIV3YWt1MgU"}'
2026-01-29 04:33:37.601 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:33:37.602 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-01-29 04:33:37.608 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:33:37.608 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-29_04-33-36__c1bb3ee1-ca5c-4ff6-a266-ac47effa4a04__wakuorg_nwaku:latest.log
2026-01-29 04:33:37.608 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:33:37.608 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:33:37.610 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:33:37.610 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.54.209
2026-01-29 04:33:37.610 DEBUG [src.node.docker_mananger] Generated ports ['17268', '17269', '17270', '17271', '17272']
2026-01-29 04:33:37.610 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:33:37.610 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:33:37.610 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:33:37.611 DEBUG [src.node.docker_mananger] docker run -i -t -p 17268:17268 -p 17269:17269 -p 17270:17270 -p 17271:17271 -p 17272:17272 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17270 --rest-port=17268 --tcp-port=17269 --discv5-udp-port=17271 --rest-address=0.0.0.0 --nat=extip:172.18.54.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3d817de46adb4ccdc03ef8d3a335ebcfb7f1d007547d23be6b799a2eeac1f75b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17272 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QNpAoiR7TJunzcf5V41IKZbRwbJHAv1VWmoyod2XWqbmDtaIR_kialcoD9TOdG1PoOrq7nYfw6Y-cNmrRGtP83ECgmlkgnY0gmlwhKwSffWKbXVsdGlhZGRyc5YACASsEn31Bmt6AAoErBJ99QZre90DgnJzhQADAQAAiXNlY3AyNTZrMaEDFhkoYG0dyyPqp8It5oTiMzHl4flvCuysa5gOFwmQMLSDdGNwgmt6g3VkcIJrfIV3YWt1MgU --filternode=/ip4/172.18.125.245/tcp/27514/p2p/16Uiu2HAmE9FZzNVepFyThTNRkReCqi49KThGiXBrC1oUaWNvka67
2026-01-29 04:33:37.826 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.54.209 waku d0046ce0a3fb4efa6d163dff2b6f486d17867956e799fc58f82877224da0496d
2026-01-29 04:33:37.857 DEBUG [src.node.docker_mananger] Container started with ID d0046ce0a3fb. Setting up logs at ./log/docker/node2_2026-01-29_04-33-36__c1bb3ee1-ca5c-4ff6-a266-ac47effa4a04__wakuorg_nwaku:latest.log
2026-01-29 04:33:37.858 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17268
2026-01-29 04:33:37.859 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:33:38.859 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17268/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:33:38.863 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-29 04:33:38.864 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:33:38.864 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17268/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:33:38.866 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.209/tcp/17269/p2p/16Uiu2HAm2XadptEB9mPwk7Wbpbe26LPbpKLaDSZEg2Ujn9bYMtbE","/ip4/172.18.54.209/tcp/17270/ws/p2p/16Uiu2HAm2XadptEB9mPwk7Wbpbe26LPbpKLaDSZEg2Ujn9bYMtbE"],"enrUri":"enr:-L24QLQGD01hRacWulc_lZvfROLFNbzw7Z8uHmljgM1KRMxmLX78_THON6NuLd7q8-vhGo2M1CmvwmLJ5px_t7qJbPECgmlkgnY0gmlwhKwSNtGKbXVsdGlhZGRyc5YACASsEjbRBkN1AAoErBI20QZDdt0DgnJzhQADAQAAiXNlY3AyNTZrMaECaYVAJPVUzPVojH-VH7CmQjyfHgQvO5YgGpOj38MSg72DdGNwgkN1g3VkcIJDd4V3YWt1MgA"}'
2026-01-29 04:33:38.866 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:33:38.867 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17268/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.125.245/tcp/27514/p2p/16Uiu2HAmE9FZzNVepFyThTNRkReCqi49KThGiXBrC1oUaWNvka67"]'
2026-01-29 04:33:38.896 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:33:38.902 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27513/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:33:38.910 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:33:38.911 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17268/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e5c458fa-4a48-4663-b0d1-5493973fc0da", "contentFilters": ["Hello World!", "1234567890", "{\"key\": \"value\"}"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-29 04:33:38.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e5c458fa-4a48-4663-b0d1-5493973fc0da","statusDesc":"OK"}'
2026-01-29 04:33:38.925 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27513/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:33:38.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:33:38.927 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17268/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f993d650-45f9-457e-b495-481c5ea92a01", "contentFilters": ["1234567890", "{\"key\": \"value\"}", "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-29 04:33:38.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f993d650-45f9-457e-b495-481c5ea92a01","statusDesc":"OK"}'
2026-01-29 04:33:38.937 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27513/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:33:38.944 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:33:38.945 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:33:39.045 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:33:39.045 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17268/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:33:39.048 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"Hello World!","version":0,"timestamp":1769661218937394154,"ephemeral":false}]'
2026-01-29 04:33:39.050 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27513/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:33:39.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:33:39.055 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:33:39.155 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:33:39.156 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17268/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:33:39.158 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1769661219050091668,"ephemeral":false}]'
2026-01-29 04:33:39.160 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27513/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "{\"key\": \"value\"}", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:33:39.165 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:33:39.165 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:33:39.265 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:33:39.266 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17268/filter/v2/messages/%7B%22key%22%3A%20%22value%22%7D" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:33:39.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"{\\"key\\": \\"value\\"}","version":0,"timestamp":1769661219160310248,"ephemeral":false}]'
2026-01-29 04:33:39.270 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27513/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:33:39.275 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:33:39.276 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:33:39.376 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:33:39.376 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17268/filter/v2/messages/%E8%BF%99%E6%98%AF%E4%B8%80%E4%BA%9B%E4%B8%AD%E6%96%87" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:33:39.379 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xba\x9b\xe4\xb8\xad\xe6\x96\x87","version":0,"timestamp":1769661219270532690,"ephemeral":false}]'
2026-01-29 04:33:39.382 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:33:39.383 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:33:39.383 DEBUG [src.node.waku_node] Stopping container with id 36956ee9d7e2
2026-01-29 04:33:39.940 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:33:39.940 DEBUG [src.node.waku_node] Stopping container with id d0046ce0a3fb
2026-01-29 04:33:40.480 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:33:40.482 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:33:40.488 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:33:40.494 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
