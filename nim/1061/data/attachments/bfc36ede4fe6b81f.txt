2026-01-29 04:48:58.509 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:48:58.511 DEBUG [tests.conftest] Running test: test_publishing_node_is_stopped with id: 2026-01-29_04-48-58__765b11fb-4c7e-42b0-a7f4-7f2d9a1c0fec
2026-01-29 04:48:58.511 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:48:58.511 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-29 04:48:58.512 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-01-29 04:48:58.521 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:48:58.522 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-01-29_04-48-58__765b11fb-4c7e-42b0-a7f4-7f2d9a1c0fec__wakuorg_nwaku:latest.log
2026-01-29 04:48:58.522 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:48:58.522 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:48:58.524 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:48:58.524 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.69.104
2026-01-29 04:48:58.525 DEBUG [src.node.docker_mananger] Generated ports ['56434', '56435', '56436', '56437', '56438']
2026-01-29 04:48:58.525 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:48:58.525 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:48:58.525 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:48:58.526 DEBUG [src.node.docker_mananger] docker run -i -t -p 56434:56434 -p 56435:56435 -p 56436:56436 -p 56437:56437 -p 56438:56438 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56436 --rest-port=56434 --tcp-port=56435 --discv5-udp-port=56437 --rest-address=0.0.0.0 --nat=extip:172.18.69.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=07aa0b7fd7aedec55e016791a815ad933ab072edfacec9b0ae307c09dcc7dff2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56438 --metrics-logging=true --store=true --relay=true
2026-01-29 04:48:58.725 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.69.104 waku 34f7532420f44eea48da206abfcc36d29a75103bca0a10b2b65d911ce3c4bb38
2026-01-29 04:48:58.748 ERROR [src.node.docker_mananger] Max retries reached for container bbbc1f0af340. Exiting log stream.
2026-01-29 04:48:58.761 DEBUG [src.node.docker_mananger] Container started with ID 34f7532420f4. Setting up logs at ./log/docker/publishing_node1_2026-01-29_04-48-58__765b11fb-4c7e-42b0-a7f4-7f2d9a1c0fec__wakuorg_nwaku:latest.log
2026-01-29 04:48:58.762 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56434
2026-01-29 04:48:58.763 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:48:59.356 ERROR [src.node.docker_mananger] Max retries reached for container 293b3a650923. Exiting log stream.
2026-01-29 04:48:59.764 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56434/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:59.767 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:48:59.767 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:48:59.768 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56434/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:59.770 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.104/tcp/56435/p2p/16Uiu2HAmGC3o8WmsBYfFgXq9dXGoBNBoUJ871qSwZo4CYJ22MSUS","/ip4/172.18.69.104/tcp/56436/ws/p2p/16Uiu2HAmGC3o8WmsBYfFgXq9dXGoBNBoUJ871qSwZo4CYJ22MSUS"],"enrUri":"enr:-L24QMPrYVvcM-j07Nl2beieNIrqM_AwizUo7OaweRA1i2Exd7734TZ-P2iSJlHVQOhVeYtdcQbfLP2PgtBlFiTDPfkCgmlkgnY0gmlwhKwSRWiKbXVsdGlhZGRyc5YACASsEkVoBtxzAAoErBJFaAbcdN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNIf2M9cXJm8AgCDRYFBSVHrsxq75Ib8ySxqEYImWvUuDdGNwgtxzg3VkcILcdYV3YWt1MgM"}'
2026-01-29 04:48:59.770 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:48:59.777 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:48:59.777 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-01-29_04-48-58__765b11fb-4c7e-42b0-a7f4-7f2d9a1c0fec__wakuorg_nwaku:latest.log
2026-01-29 04:48:59.777 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:48:59.777 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:48:59.779 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:48:59.779 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.46.37
2026-01-29 04:48:59.779 DEBUG [src.node.docker_mananger] Generated ports ['16886', '16887', '16888', '16889', '16890']
2026-01-29 04:48:59.779 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:48:59.779 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:48:59.779 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:48:59.779 DEBUG [src.node.docker_mananger] docker run -i -t -p 16886:16886 -p 16887:16887 -p 16888:16888 -p 16889:16889 -p 16890:16890 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16888 --rest-port=16886 --tcp-port=16887 --discv5-udp-port=16889 --rest-address=0.0.0.0 --nat=extip:172.18.46.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2d9fb1feceef37abcefdd69682cbdf3d18df6eb275bb6cd96160d356ae36d33 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16890 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMPrYVvcM-j07Nl2beieNIrqM_AwizUo7OaweRA1i2Exd7734TZ-P2iSJlHVQOhVeYtdcQbfLP2PgtBlFiTDPfkCgmlkgnY0gmlwhKwSRWiKbXVsdGlhZGRyc5YACASsEkVoBtxzAAoErBJFaAbcdN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNIf2M9cXJm8AgCDRYFBSVHrsxq75Ib8ySxqEYImWvUuDdGNwgtxzg3VkcILcdYV3YWt1MgM --storenode=/ip4/172.18.69.104/tcp/56435/p2p/16Uiu2HAmGC3o8WmsBYfFgXq9dXGoBNBoUJ871qSwZo4CYJ22MSUS --store=true --relay=true
2026-01-29 04:48:59.963 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.46.37 waku 85a80e0e6233483fcfbbaec60b9ff06dceaa12291f76f4918fb47f2471f241f5
2026-01-29 04:48:59.997 DEBUG [src.node.docker_mananger] Container started with ID 85a80e0e6233. Setting up logs at ./log/docker/store_node1_2026-01-29_04-48-58__765b11fb-4c7e-42b0-a7f4-7f2d9a1c0fec__wakuorg_nwaku:latest.log
2026-01-29 04:48:59.999 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16886
2026-01-29 04:48:59.999 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:49:00.999 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16886/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:01.004 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:49:01.004 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:49:01.004 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16886/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:01.007 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.37/tcp/16887/p2p/16Uiu2HAmNxoaDvUay6m7UNfHuk25EfeAPPi449xfykKv6SNaHXrZ","/ip4/172.18.46.37/tcp/16888/ws/p2p/16Uiu2HAmNxoaDvUay6m7UNfHuk25EfeAPPi449xfykKv6SNaHXrZ"],"enrUri":"enr:-L24QJIXwM5Yr3zBOMlneuo1bJSHGQWWFV1XgRspzq0-y7Z2Uoj_zjVdAg_UOtohgx8ikO0IqGhea8Q0qzQRvnS-LQICgmlkgnY0gmlwhKwSLiWKbXVsdGlhZGRyc5YACASsEi4lBkH3AAoErBIuJQZB-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmSUjYviUYkLjxLXjYi0aar7JcmWpU1NYu2ewgpchcuKDdGNwgkH3g3VkcIJB-YV3YWt1MgM"}'
2026-01-29 04:49:01.007 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:49:01.007 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16886/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.69.104/tcp/56435/p2p/16Uiu2HAmGC3o8WmsBYfFgXq9dXGoBNBoUJ871qSwZo4CYJ22MSUS"]'
2026-01-29 04:49:01.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:49:01.011 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56434/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-29 04:49:01.013 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:49:01.013 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16886/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-29 04:49:01.016 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:49:01.017 DEBUG [src.steps.store] Relaying message
2026-01-29 04:49:01.017 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:49:01.022 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:49:01.022 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-29 04:49:01.223 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-01-29 04:49:01.224 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56434/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:01.227 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x687de67371eca4a2fbb20a9c8eb0cd4483eed9d08ee9d4c9142caaebcc823cfa"}]}'
2026-01-29 04:49:01.227 DEBUG [src.steps.store] messages length is 1
2026-01-29 04:49:01.227 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-01-29 04:49:01.228 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16886/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:01.230 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x687de67371eca4a2fbb20a9c8eb0cd4483eed9d08ee9d4c9142caaebcc823cfa"}]}'
2026-01-29 04:49:01.231 DEBUG [src.steps.store] messages length is 1
2026-01-29 04:49:01.231 DEBUG [src.node.waku_node] Stopping container with id 34f7532420f4
2026-01-29 04:49:01.821 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:49:01.821 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16886/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:49:01.826 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x687de67371eca4a2fbb20a9c8eb0cd4483eed9d08ee9d4c9142caaebcc823cfa"}]}'
2026-01-29 04:49:01.828 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:49:01.829 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:49:01.829 DEBUG [src.node.waku_node] Stopping container with id 85a80e0e6233
2026-01-29 04:49:02.362 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:49:02.363 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:49:02.369 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:49:02.375 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
