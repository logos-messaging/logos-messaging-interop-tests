2026-01-29 04:45:34.408 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:45:34.409 DEBUG [tests.conftest] Running test: test_publish_with_invalid_timestamps with id: 2026-01-29_04-45-34__a9111911-9777-42de-bcc4-cec7ccb3d893
2026-01-29 04:45:34.409 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:45:34.409 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:45:34.410 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-01-29 04:45:34.417 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:45:34.417 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-45-34__a9111911-9777-42de-bcc4-cec7ccb3d893__wakuorg_nwaku:latest.log
2026-01-29 04:45:34.417 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:45:34.418 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:45:34.419 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:45:34.419 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.33.136
2026-01-29 04:45:34.419 DEBUG [src.node.docker_mananger] Generated ports ['63470', '63471', '63472', '63473', '63474']
2026-01-29 04:45:34.419 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:45:34.420 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:45:34.420 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:45:34.420 DEBUG [src.node.docker_mananger] docker run -i -t -p 63470:63470 -p 63471:63471 -p 63472:63472 -p 63473:63473 -p 63474:63474 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63472 --rest-port=63470 --tcp-port=63471 --discv5-udp-port=63473 --rest-address=0.0.0.0 --nat=extip:172.18.33.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d7e9d609cfc0cc5ae42acf7cccebaa6ecd7adce48cf47baade5432c3965e2d8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63474 --metrics-logging=true --relay=true
2026-01-29 04:45:34.610 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.33.136 waku c8b770217c391fcb1d5277f0087c631d4ed667e56deba548ebcbc8d9599e5461
2026-01-29 04:45:34.616 ERROR [src.node.docker_mananger] Max retries reached for container 836b43f478dc. Exiting log stream.
2026-01-29 04:45:34.643 DEBUG [src.node.docker_mananger] Container started with ID c8b770217c39. Setting up logs at ./log/docker/node1_2026-01-29_04-45-34__a9111911-9777-42de-bcc4-cec7ccb3d893__wakuorg_nwaku:latest.log
2026-01-29 04:45:34.644 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63470
2026-01-29 04:45:34.644 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:45:35.199 ERROR [src.node.docker_mananger] Max retries reached for container 288a2d47f4cd. Exiting log stream.
2026-01-29 04:45:35.645 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63470/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:35.648 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:45:35.648 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:45:35.648 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63470/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:35.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.136/tcp/63471/p2p/16Uiu2HAmA14xphK6zDMxW19hFoPuh1xCg7BmYqM9XJVEmCaE5wb7","/ip4/172.18.33.136/tcp/63472/ws/p2p/16Uiu2HAmA14xphK6zDMxW19hFoPuh1xCg7BmYqM9XJVEmCaE5wb7"],"enrUri":"enr:-L24QMiHV6aum0NLsmge4joiUQYHdWHhRIxzFA9EvQwNQKCzSjZfygWA_4_yxN7NtyP_9_hfdGF-opEHWkTeWSXlT0YCgmlkgnY0gmlwhKwSIYiKbXVsdGlhZGRyc5YACASsEiGIBvfvAAoErBIhiAb38N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2JHFW-6AJcn1DBP8SBIdNd2YElSy3yQpZAPbokvI9SKDdGNwgvfvg3VkcIL38YV3YWt1MgE"}'
2026-01-29 04:45:35.651 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:45:35.658 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:45:35.658 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-29_04-45-34__a9111911-9777-42de-bcc4-cec7ccb3d893__wakuorg_nwaku:latest.log
2026-01-29 04:45:35.658 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:45:35.658 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:45:35.660 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:45:35.660 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.128.119
2026-01-29 04:45:35.660 DEBUG [src.node.docker_mananger] Generated ports ['54644', '54645', '54646', '54647', '54648']
2026-01-29 04:45:35.660 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:45:35.660 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:45:35.660 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:45:35.660 DEBUG [src.node.docker_mananger] docker run -i -t -p 54644:54644 -p 54645:54645 -p 54646:54646 -p 54647:54647 -p 54648:54648 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54646 --rest-port=54644 --tcp-port=54645 --discv5-udp-port=54647 --rest-address=0.0.0.0 --nat=extip:172.18.128.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f82dbce3ce96b9c8114cd066dd7ffa3bec148f383cbffe3c89fb2eaf5f09c1ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54648 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMiHV6aum0NLsmge4joiUQYHdWHhRIxzFA9EvQwNQKCzSjZfygWA_4_yxN7NtyP_9_hfdGF-opEHWkTeWSXlT0YCgmlkgnY0gmlwhKwSIYiKbXVsdGlhZGRyc5YACASsEiGIBvfvAAoErBIhiAb38N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2JHFW-6AJcn1DBP8SBIdNd2YElSy3yQpZAPbokvI9SKDdGNwgvfvg3VkcIL38YV3YWt1MgE
2026-01-29 04:45:35.861 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.128.119 waku afccba00765a14dae22b4419e6315fb54e90aa32eefbd2aeada95a1ce3defcdb
2026-01-29 04:45:35.893 DEBUG [src.node.docker_mananger] Container started with ID afccba00765a. Setting up logs at ./log/docker/node2_2026-01-29_04-45-34__a9111911-9777-42de-bcc4-cec7ccb3d893__wakuorg_nwaku:latest.log
2026-01-29 04:45:35.894 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54644
2026-01-29 04:45:35.894 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:45:36.894 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54644/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:36.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:45:36.909 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:45:36.910 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54644/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:36.916 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.119/tcp/54645/p2p/16Uiu2HAkvfjA7HcDgmoTm57RSu8SoqSD7bVvLvkZQwjUrp5pNCYN","/ip4/172.18.128.119/tcp/54646/ws/p2p/16Uiu2HAkvfjA7HcDgmoTm57RSu8SoqSD7bVvLvkZQwjUrp5pNCYN"],"enrUri":"enr:-L24QBlddJsHu5PSiFsL-4iEs2623MpWxSMOZK1xbYxA5gDsEKuwBJ80vXOaHDkeiyV_q0p7_Dqlz-INQaBAJP_nLV8CgmlkgnY0gmlwhKwSgHeKbXVsdGlhZGRyc5YACASsEoB3BtV1AAoErBKAdwbVdt0DgnJzhQADAQAAiXNlY3AyNTZrMaECEnVpVeyO4ruzaToBU3x3R8WEVcshNamN0l9foVHtMJ-DdGNwgtV1g3VkcILVd4V3YWt1MgE"}'
2026-01-29 04:45:36.917 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:45:36.917 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54644/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.33.136/tcp/63471/p2p/16Uiu2HAmA14xphK6zDMxW19hFoPuh1xCg7BmYqM9XJVEmCaE5wb7"]'
2026-01-29 04:45:36.920 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:36.920 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-01-29 04:45:36.920 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63470/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:45:36.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:36.924 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54644/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:45:36.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:36.931 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:36.935 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:36.936 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:45:37.036 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:45:37.037 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:37.039 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661936930932736,"ephemeral":false,"proof":""}]'
2026-01-29 04:45:37.041 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:45:37.041 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54644/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:37.043 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661936930932736,"ephemeral":false,"proof":""}]'
2026-01-29 04:45:37.045 INFO [src.steps.relay] WARM UP successful!!
2026-01-29 04:45:37.046 DEBUG [tests.relay.test_publish] Running test with timestamp Timestamp as string number
2026-01-29 04:45:37.046 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:37.049 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-29 04:45:37.050 DEBUG [tests.relay.test_publish] Running test with timestamp Invalid large number
2026-01-29 04:45:37.050 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:37.052 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-29 04:45:37.053 DEBUG [tests.relay.test_publish] Running test with timestamp Float number
2026-01-29 04:45:37.053 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:37.056 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-29 04:45:37.056 DEBUG [tests.relay.test_publish] Running test with timestamp Array instead of timestamp
2026-01-29 04:45:37.057 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:37.059 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-29 04:45:37.060 DEBUG [tests.relay.test_publish] Running test with timestamp Object instead of timestamp
2026-01-29 04:45:37.060 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:37.063 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-29 04:45:37.063 DEBUG [tests.relay.test_publish] Running test with timestamp ISO 8601 timestamp
2026-01-29 04:45:37.064 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:37.066 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-29 04:45:37.067 DEBUG [tests.relay.test_publish] Running test with timestamp Missing
2026-01-29 04:45:37.067 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:37.070 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-01-29 04:45:37.072 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:45:37.073 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:45:37.073 DEBUG [src.node.waku_node] Stopping container with id c8b770217c39
2026-01-29 04:45:37.644 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:45:37.644 DEBUG [src.node.waku_node] Stopping container with id afccba00765a
2026-01-29 04:45:38.181 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:45:38.182 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:45:38.187 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:45:38.193 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
