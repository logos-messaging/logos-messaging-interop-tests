2026-01-29 04:38:10.186 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:38:10.187 DEBUG [tests.conftest] Running test: test_publish_with_valid_meta with id: 2026-01-29_04-38-10__b56760be-4a81-4bd8-86ea-8c602d664936
2026-01-29 04:38:10.187 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:38:10.187 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:38:10.187 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-01-29 04:38:10.194 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:38:10.194 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-38-10__b56760be-4a81-4bd8-86ea-8c602d664936__wakuorg_nwaku:latest.log
2026-01-29 04:38:10.195 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:38:10.195 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:38:10.196 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:38:10.196 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.34.149
2026-01-29 04:38:10.196 DEBUG [src.node.docker_mananger] Generated ports ['44250', '44251', '44252', '44253', '44254']
2026-01-29 04:38:10.196 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:38:10.197 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:38:10.197 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:38:10.197 DEBUG [src.node.docker_mananger] docker run -i -t -p 44250:44250 -p 44251:44251 -p 44252:44252 -p 44253:44253 -p 44254:44254 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44252 --rest-port=44250 --tcp-port=44251 --discv5-udp-port=44253 --rest-address=0.0.0.0 --nat=extip:172.18.34.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=44caedb2dfac9e6faf754478ddd5b6dcf2342e618428a2fa8e16bbd82d7ee0c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44254 --metrics-logging=true --relay=true
2026-01-29 04:38:10.375 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.34.149 waku 67674602ae876b60d31eafc856b7f1c5623cf75336794baef05eb64de0e9dd91
2026-01-29 04:38:10.409 DEBUG [src.node.docker_mananger] Container started with ID 67674602ae87. Setting up logs at ./log/docker/node1_2026-01-29_04-38-10__b56760be-4a81-4bd8-86ea-8c602d664936__wakuorg_nwaku:latest.log
2026-01-29 04:38:10.410 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44250
2026-01-29 04:38:10.410 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:38:10.461 ERROR [src.node.docker_mananger] Max retries reached for container cb661bfae6a0. Exiting log stream.
2026-01-29 04:38:10.985 ERROR [src.node.docker_mananger] Max retries reached for container 589ec6680293. Exiting log stream.
2026-01-29 04:38:11.411 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44250/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:38:11.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:38:11.414 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:38:11.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44250/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:38:11.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.149/tcp/44251/p2p/16Uiu2HAmUyL3vgRR8V4AmKcodtdweTtMmDU2FmxWNrNV3wCitbby","/ip4/172.18.34.149/tcp/44252/ws/p2p/16Uiu2HAmUyL3vgRR8V4AmKcodtdweTtMmDU2FmxWNrNV3wCitbby"],"enrUri":"enr:-L24QN--N01XbJ39IVSKQvVP2gOn4EY1obg8kAclEwPQl6phEDN0JJDDFQbFqr6hUTNNbmML4sFzY3kAxXmXWINNJpkCgmlkgnY0gmlwhKwSIpWKbXVsdGlhZGRyc5YACASsEiKVBqzbAAoErBIilQas3N0DgnJzhQADAQAAiXNlY3AyNTZrMaED8m24kJ0WV5E8j9_F-Ku9Nr7E12ZK21bwUIhn5E15gpyDdGNwgqzbg3VkcIKs3YV3YWt1MgE"}'
2026-01-29 04:38:11.417 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:38:11.423 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:38:11.423 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-29_04-38-10__b56760be-4a81-4bd8-86ea-8c602d664936__wakuorg_nwaku:latest.log
2026-01-29 04:38:11.423 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:38:11.424 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:38:11.425 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:38:11.425 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.200.112
2026-01-29 04:38:11.425 DEBUG [src.node.docker_mananger] Generated ports ['32641', '32642', '32643', '32644', '32645']
2026-01-29 04:38:11.425 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:38:11.426 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:38:11.426 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:38:11.426 DEBUG [src.node.docker_mananger] docker run -i -t -p 32641:32641 -p 32642:32642 -p 32643:32643 -p 32644:32644 -p 32645:32645 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32643 --rest-port=32641 --tcp-port=32642 --discv5-udp-port=32644 --rest-address=0.0.0.0 --nat=extip:172.18.200.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4cd947b401d9bce8e0a6f02ee58acdc3ed7fbaa34fa8c9ccef48b7cba43da9ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32645 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QN--N01XbJ39IVSKQvVP2gOn4EY1obg8kAclEwPQl6phEDN0JJDDFQbFqr6hUTNNbmML4sFzY3kAxXmXWINNJpkCgmlkgnY0gmlwhKwSIpWKbXVsdGlhZGRyc5YACASsEiKVBqzbAAoErBIilQas3N0DgnJzhQADAQAAiXNlY3AyNTZrMaED8m24kJ0WV5E8j9_F-Ku9Nr7E12ZK21bwUIhn5E15gpyDdGNwgqzbg3VkcIKs3YV3YWt1MgE
2026-01-29 04:38:11.605 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.200.112 waku 8546ffda3480f255279116864aea10c752f5e5f9019c12737c79571e88a890f9
2026-01-29 04:38:11.638 DEBUG [src.node.docker_mananger] Container started with ID 8546ffda3480. Setting up logs at ./log/docker/node2_2026-01-29_04-38-10__b56760be-4a81-4bd8-86ea-8c602d664936__wakuorg_nwaku:latest.log
2026-01-29 04:38:11.639 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32641
2026-01-29 04:38:11.639 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:38:12.640 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32641/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:38:12.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:38:12.651 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:38:12.651 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32641/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:38:12.654 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.112/tcp/32642/p2p/16Uiu2HAmQ8a6B2Bhe3YtVLu8E1319nFMgThFWMc3CCrxGTnYuEk1","/ip4/172.18.200.112/tcp/32643/ws/p2p/16Uiu2HAmQ8a6B2Bhe3YtVLu8E1319nFMgThFWMc3CCrxGTnYuEk1"],"enrUri":"enr:-L24QFTCEUqrhgWVQPYVaIcXq6dnSd8JoXUFJlaghVFLi06yFXUMt_8kJawsDslz7tRC7Qsy8o1zO6lcHjhL29a1oogCgmlkgnY0gmlwhKwSyHCKbXVsdGlhZGRyc5YACASsEshwBn-CAAoErBLIcAZ_g90DgnJzhQADAQAAiXNlY3AyNTZrMaEDqoFjI-3WMwOG7w8eZlNQo-_5eGMKEAwcSKhmIoff-8KDdGNwgn-Cg3VkcIJ_hIV3YWt1MgE"}'
2026-01-29 04:38:12.655 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:38:12.656 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32641/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.149/tcp/44251/p2p/16Uiu2HAmUyL3vgRR8V4AmKcodtdweTtMmDU2FmxWNrNV3wCitbby"]'
2026-01-29 04:38:12.660 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:38:12.660 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-01-29 04:38:12.660 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44250/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:38:12.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:38:12.665 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32641/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:38:12.669 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:38:12.670 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44250/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:38:12.675 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:38:12.676 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:38:12.776 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:38:12.776 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44250/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:38:12.779 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661492669927168,"ephemeral":false,"proof":""}]'
2026-01-29 04:38:12.781 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:38:12.781 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32641/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:38:12.783 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661492669927168,"ephemeral":false,"proof":""}]'
2026-01-29 04:38:12.784 INFO [src.steps.relay] WARM UP successful!!
2026-01-29 04:38:12.786 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44250/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)', "meta": "UmVsYXkgd29ya3MhIQ=="}'
2026-01-29 04:38:12.790 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:38:12.791 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:38:12.891 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:38:12.892 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44250/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:38:12.894 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661492785844113,"meta":"UmVsYXkgd29ya3MhIQ==","ephemeral":false,"proof":""}]'
2026-01-29 04:38:12.896 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:38:12.896 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32641/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:38:12.898 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661492785844113,"meta":"UmVsYXkgd29ya3MhIQ==","ephemeral":false,"proof":""}]'
2026-01-29 04:38:12.901 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:38:12.903 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:38:12.903 DEBUG [src.node.waku_node] Stopping container with id 67674602ae87
2026-01-29 04:38:13.455 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:38:13.456 DEBUG [src.node.waku_node] Stopping container with id 8546ffda3480
2026-01-29 04:38:13.967 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:38:13.970 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:38:13.976 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:38:13.981 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
