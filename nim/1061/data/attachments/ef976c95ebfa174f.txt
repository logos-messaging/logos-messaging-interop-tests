2026-01-29 04:31:06.251 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:31:06.251 DEBUG [tests.conftest] Running test: test_relay with id: 2026-01-29_04-31-06__3b145466-dc0e-43d1-9f0c-f50018eb848b
2026-01-29 04:31:06.251 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:31:06.252 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-29 04:31:06.252 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-01-29 04:31:06.252 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:31:06.252 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-29 04:31:06.262 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:31:06.263 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-31-06__3b145466-dc0e-43d1-9f0c-f50018eb848b__wakuorg_nwaku:latest.log
2026-01-29 04:31:06.263 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:31:06.263 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:31:06.305 DEBUG [src.node.docker_mananger] Network waku created
2026-01-29 04:31:06.305 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.30.19
2026-01-29 04:31:06.305 DEBUG [src.node.docker_mananger] Generated ports ['63878', '63879', '63880', '63881', '63882']
2026-01-29 04:31:06.305 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:31:06.305 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:31:06.305 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:31:06.306 DEBUG [src.node.docker_mananger] docker run -i -t -p 63878:63878 -p 63879:63879 -p 63880:63880 -p 63881:63881 -p 63882:63882 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63880 --rest-port=63878 --tcp-port=63879 --discv5-udp-port=63881 --rest-address=0.0.0.0 --nat=extip:172.18.30.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9918e91e11ee2a4f98bd65760f71f5d46f245a48ee1ac0080cdb3bcc005e3206 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63882 --metrics-logging=true --relay=true
2026-01-29 04:31:08.670 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.30.19 waku cb4b4ecbbb6740929b4551be68de84d98b3d518cc755a7363f911a576267d35d
2026-01-29 04:31:08.702 DEBUG [src.node.docker_mananger] Container started with ID cb4b4ecbbb67. Setting up logs at ./log/docker/node1_2026-01-29_04-31-06__3b145466-dc0e-43d1-9f0c-f50018eb848b__wakuorg_nwaku:latest.log
2026-01-29 04:31:08.703 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63878
2026-01-29 04:31:08.703 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:31:09.703 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63878/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:09.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:31:09.707 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:31:09.707 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63878/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:09.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.19/tcp/63879/p2p/16Uiu2HAmQvcPRHL1ywqNP12gw9a5aMcbZzXuDR3qEZoiWo4ggpnh","/ip4/172.18.30.19/tcp/63880/ws/p2p/16Uiu2HAmQvcPRHL1ywqNP12gw9a5aMcbZzXuDR3qEZoiWo4ggpnh"],"enrUri":"enr:-L24QN2bbnhOuhlD-vWy0pCnoEB4TMoTJu1tAjSOVgEKN_6aIz089V1XnHAgExQy0SxP29jNQ2Sc7WvaowoaVTmp01QCgmlkgnY0gmlwhKwSHhOKbXVsdGlhZGRyc5YACASsEh4TBvmHAAoErBIeEwb5iN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtkyzvLUE69sfBMa8J5tB9xNbNfDoy4VNk6bJN2UeO16DdGNwgvmHg3VkcIL5iYV3YWt1MgE"}'
2026-01-29 04:31:09.710 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:31:09.717 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:31:09.717 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-31-06__3b145466-dc0e-43d1-9f0c-f50018eb848b__wakuorg_nwaku:latest.log
2026-01-29 04:31:09.717 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:31:09.717 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:31:09.719 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:31:09.719 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.226.108
2026-01-29 04:31:09.719 DEBUG [src.node.docker_mananger] Generated ports ['29353', '29354', '29355', '29356', '29357']
2026-01-29 04:31:09.719 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:31:09.719 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:31:09.719 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:31:09.720 DEBUG [src.node.docker_mananger] docker run -i -t -p 29353:29353 -p 29354:29354 -p 29355:29355 -p 29356:29356 -p 29357:29357 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29355 --rest-port=29353 --tcp-port=29354 --discv5-udp-port=29356 --rest-address=0.0.0.0 --nat=extip:172.18.226.108 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfe6dfee0ca090ef9ff6ff3de7bc3fbecda3aa351b5ec3387b5efc7a4bacaf6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29357 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QN2bbnhOuhlD-vWy0pCnoEB4TMoTJu1tAjSOVgEKN_6aIz089V1XnHAgExQy0SxP29jNQ2Sc7WvaowoaVTmp01QCgmlkgnY0gmlwhKwSHhOKbXVsdGlhZGRyc5YACASsEh4TBvmHAAoErBIeEwb5iN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtkyzvLUE69sfBMa8J5tB9xNbNfDoy4VNk6bJN2UeO16DdGNwgvmHg3VkcIL5iYV3YWt1MgE
2026-01-29 04:31:09.900 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.226.108 waku 3ab8cd32c4b6531ac6039f99ade9b99129a9a8b601c5a62c241bbf0c786ef015
2026-01-29 04:31:09.931 DEBUG [src.node.docker_mananger] Container started with ID 3ab8cd32c4b6. Setting up logs at ./log/docker/node1_2026-01-29_04-31-06__3b145466-dc0e-43d1-9f0c-f50018eb848b__wakuorg_nwaku:latest.log
2026-01-29 04:31:09.931 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29353
2026-01-29 04:31:09.932 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:31:10.933 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29353/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:10.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:31:10.948 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:31:10.948 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29353/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:10.952 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.108/tcp/29354/p2p/16Uiu2HAm7bES77X6Bo3VvhwQG4cJ89pcFZth4VMAAgC6rKEFE4j2","/ip4/172.18.226.108/tcp/29355/ws/p2p/16Uiu2HAm7bES77X6Bo3VvhwQG4cJ89pcFZth4VMAAgC6rKEFE4j2"],"enrUri":"enr:-L24QMPE-EEPW3wrqklVm8nMhiA_ij7IEssf7VC-hpnO_jNbUTayblOXn2r0CduJPfi-JiBcw96NztZm5knbykWfBvcCgmlkgnY0gmlwhKwS4myKbXVsdGlhZGRyc5YACASsEuJsBnKqAAoErBLibAZyq90DgnJzhQADAQAAiXNlY3AyNTZrMaECtL8qdtwencUiqLGHcTTv9W6dWqdO6UbCmXmqBM2WvvmDdGNwgnKqg3VkcIJyrIV3YWt1MgE"}'
2026-01-29 04:31:10.953 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:31:10.953 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63878/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:31:10.956 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:10.957 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29353/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:31:10.962 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:10.963 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63878/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:31:10.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:10.968 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:31:11.068 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:31:11.069 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63878/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:11.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661070962996224,"ephemeral":false,"proof":""}]'
2026-01-29 04:31:11.074 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:31:11.074 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29353/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:11.076 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661070962996224,"ephemeral":false,"proof":""}]'
2026-01-29 04:31:11.080 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:31:11.081 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:31:11.081 DEBUG [src.node.waku_node] Stopping container with id cb4b4ecbbb67
2026-01-29 04:31:11.636 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:31:11.636 DEBUG [src.node.waku_node] Stopping container with id 3ab8cd32c4b6
2026-01-29 04:31:12.153 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:31:12.156 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:31:12.162 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:31:12.167 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
