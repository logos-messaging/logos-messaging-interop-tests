2026-01-29 04:48:36.498 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:48:36.498 DEBUG [tests.conftest] Running test: test_subscribe_and_publish_on_another_content_topic_from_another_shard with id: 2026-01-29_04-48-36__95dffa90-73ab-4262-b6ae-f4b8cb14b8f9
2026-01-29 04:48:36.498 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:48:36.498 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:48:36.499 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-01-29 04:48:36.506 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:48:36.507 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-48-36__95dffa90-73ab-4262-b6ae-f4b8cb14b8f9__wakuorg_nwaku:latest.log
2026-01-29 04:48:36.507 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:48:36.507 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:48:36.508 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:48:36.508 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.92.232
2026-01-29 04:48:36.508 DEBUG [src.node.docker_mananger] Generated ports ['45061', '45062', '45063', '45064', '45065']
2026-01-29 04:48:36.509 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:48:36.509 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:48:36.509 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:48:36.509 DEBUG [src.node.docker_mananger] docker run -i -t -p 45061:45061 -p 45062:45062 -p 45063:45063 -p 45064:45064 -p 45065:45065 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45063 --rest-port=45061 --tcp-port=45062 --discv5-udp-port=45064 --rest-address=0.0.0.0 --nat=extip:172.18.92.232 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ed9514d0bf5c6fecc7e416ba847e9eedd1bfc80bfaa975cda7006abcafdd35cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45065 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-01-29 04:48:36.706 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.92.232 waku 5b8b9cf96572decafb82d9bf6e4e89a9af0814b941df683bb8410e4b6ba13b14
2026-01-29 04:48:36.738 DEBUG [src.node.docker_mananger] Container started with ID 5b8b9cf96572. Setting up logs at ./log/docker/node1_2026-01-29_04-48-36__95dffa90-73ab-4262-b6ae-f4b8cb14b8f9__wakuorg_nwaku:latest.log
2026-01-29 04:48:36.738 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45061
2026-01-29 04:48:36.740 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:48:37.305 ERROR [src.node.docker_mananger] Max retries reached for container 298b55ebe27e. Exiting log stream.
2026-01-29 04:48:37.740 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45061/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:37.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:48:37.743 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:48:37.744 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45061/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:37.746 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.232/tcp/45062/p2p/16Uiu2HAmQdRXxmxnT6HUmmjoq7jatRCiushKXFe5dhCsiVU59YZN","/ip4/172.18.92.232/tcp/45063/ws/p2p/16Uiu2HAmQdRXxmxnT6HUmmjoq7jatRCiushKXFe5dhCsiVU59YZN"],"enrUri":"enr:-L24QNCBak3Hq7L8f-i35P_rk13uWA_WN3rfuPJbx60n_KiJfXhDI_E3ND2Rgjkw-QEDQGkojMglT4VjTXWNVUw560oCgmlkgnY0gmlwhKwSXOiKbXVsdGlhZGRyc5YACASsElzoBrAGAAoErBJc6AawB90DgnJzhQACAQAAiXNlY3AyNTZrMaEDseWOoVEnqf96Pw-OjE1JtxFIggLbrrbEuF42NhSLGZGDdGNwgrAGg3VkcIKwCIV3YWt1MgU"}'
2026-01-29 04:48:37.746 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:48:37.753 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:48:37.753 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-29_04-48-36__95dffa90-73ab-4262-b6ae-f4b8cb14b8f9__wakuorg_nwaku:latest.log
2026-01-29 04:48:37.753 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:48:37.753 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:48:37.755 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:48:37.755 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.199.249
2026-01-29 04:48:37.755 DEBUG [src.node.docker_mananger] Generated ports ['12482', '12483', '12484', '12485', '12486']
2026-01-29 04:48:37.755 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:48:37.755 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:48:37.756 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:48:37.756 DEBUG [src.node.docker_mananger] docker run -i -t -p 12482:12482 -p 12483:12483 -p 12484:12484 -p 12485:12485 -p 12486:12486 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12484 --rest-port=12482 --tcp-port=12483 --discv5-udp-port=12485 --rest-address=0.0.0.0 --nat=extip:172.18.199.249 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=0aecbb7e1cd3ada8cdd11abfbdd5fd375df707dc5c28fffa0c2e5f2b4eac5794 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12486 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNCBak3Hq7L8f-i35P_rk13uWA_WN3rfuPJbx60n_KiJfXhDI_E3ND2Rgjkw-QEDQGkojMglT4VjTXWNVUw560oCgmlkgnY0gmlwhKwSXOiKbXVsdGlhZGRyc5YACASsElzoBrAGAAoErBJc6AawB90DgnJzhQACAQAAiXNlY3AyNTZrMaEDseWOoVEnqf96Pw-OjE1JtxFIggLbrrbEuF42NhSLGZGDdGNwgrAGg3VkcIKwCIV3YWt1MgU --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-01-29 04:48:37.958 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.199.249 waku cd0cda7ba7c768a54b161d1ad9c6e1a0c0635ebe530fb2ac6b1afdcca51e4d89
2026-01-29 04:48:37.991 DEBUG [src.node.docker_mananger] Container started with ID cd0cda7ba7c7. Setting up logs at ./log/docker/node2_2026-01-29_04-48-36__95dffa90-73ab-4262-b6ae-f4b8cb14b8f9__wakuorg_nwaku:latest.log
2026-01-29 04:48:37.992 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12482
2026-01-29 04:48:37.992 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:48:38.994 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12482/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:39.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-29 04:48:39.006 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:48:39.007 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12482/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:39.012 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.249/tcp/12483/p2p/16Uiu2HAmTTSNyZ9xhqTkRaHDu69qmqonLgkcT1BpC2JT4rB2fy4Z","/ip4/172.18.199.249/tcp/12484/ws/p2p/16Uiu2HAmTTSNyZ9xhqTkRaHDu69qmqonLgkcT1BpC2JT4rB2fy4Z"],"enrUri":"enr:-L24QF3iKuSR_cI--1DkG3PLP4-TyjRnGscNQa_VN9Q5g4OoEoSjWh9SSSFGl0NXi5tlPyLFy027kQNiWdbVoftvmJACgmlkgnY0gmlwhKwSx_mKbXVsdGlhZGRyc5YACASsEsf5BjDDAAoErBLH-QYwxN0DgnJzhQACAQAAiXNlY3AyNTZrMaED2-nD7eY1-JkWfJbsh0mj7WF7vaYNka0tj1Juv4dNGa6DdGNwgjDDg3VkcIIwxYV3YWt1MgE"}'
2026-01-29 04:48:39.013 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:48:39.013 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12482/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.92.232/tcp/45062/p2p/16Uiu2HAmQdRXxmxnT6HUmmjoq7jatRCiushKXFe5dhCsiVU59YZN"]'
2026-01-29 04:48:39.016 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:39.016 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45061/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
2026-01-29 04:48:39.019 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:39.020 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12482/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
2026-01-29 04:48:39.024 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:39.025 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45061/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:48:39.030 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:39.031 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:48:39.131 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:48:39.132 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45061/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:39.135 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1769662119025090297,"ephemeral":false,"proof":""}]'
2026-01-29 04:48:39.136 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:48:39.136 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12482/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:39.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1769662119025090297,"ephemeral":false,"proof":""}]'
2026-01-29 04:48:39.140 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45061/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:48:39.144 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:48:39.145 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:48:39.245 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:48:39.245 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45061/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:39.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769662119140457292,"ephemeral":false,"proof":""}]'
2026-01-29 04:48:39.250 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:48:39.250 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12482/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:48:39.252 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769662119140457292,"ephemeral":false,"proof":""}]'
2026-01-29 04:48:39.255 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:48:39.256 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:48:39.256 DEBUG [src.node.waku_node] Stopping container with id 5b8b9cf96572
2026-01-29 04:48:39.788 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:48:39.788 DEBUG [src.node.waku_node] Stopping container with id cd0cda7ba7c7
2026-01-29 04:48:40.344 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:48:40.345 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:48:40.357 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:48:40.363 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
