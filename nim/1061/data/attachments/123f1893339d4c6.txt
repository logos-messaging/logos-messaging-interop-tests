2026-01-29 04:45:31.918 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:45:31.918 DEBUG [tests.conftest] Running test: test_passing_cursor_of_non_existing_message_from_the_store with id: 2026-01-29_04-45-31__cd1b902b-1c70-4006-a545-9ec52dfecb9c
2026-01-29 04:45:31.918 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:45:31.918 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-29 04:45:31.919 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-01-29 04:45:31.925 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:45:31.925 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-01-29_04-45-31__cd1b902b-1c70-4006-a545-9ec52dfecb9c__wakuorg_nwaku:latest.log
2026-01-29 04:45:31.925 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:45:31.925 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:45:31.926 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:45:31.927 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.12.41
2026-01-29 04:45:31.927 DEBUG [src.node.docker_mananger] Generated ports ['32744', '32745', '32746', '32747', '32748']
2026-01-29 04:45:31.927 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:45:31.927 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:45:31.927 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:45:31.927 DEBUG [src.node.docker_mananger] docker run -i -t -p 32744:32744 -p 32745:32745 -p 32746:32746 -p 32747:32747 -p 32748:32748 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32746 --rest-port=32744 --tcp-port=32745 --discv5-udp-port=32747 --rest-address=0.0.0.0 --nat=extip:172.18.12.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5aa1cbce6a74d6f3e6c2bf6b4bc045ad5414797fbfff7687efe3badbdc36b3c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32748 --metrics-logging=true --store=true --relay=true
2026-01-29 04:45:32.120 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.12.41 waku 80cc00b9b1be59bbbb4a414dcc3852978b486c9087b3ee6f33e23546fa7c806f
2026-01-29 04:45:32.152 DEBUG [src.node.docker_mananger] Container started with ID 80cc00b9b1be. Setting up logs at ./log/docker/publishing_node1_2026-01-29_04-45-31__cd1b902b-1c70-4006-a545-9ec52dfecb9c__wakuorg_nwaku:latest.log
2026-01-29 04:45:32.152 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32744
2026-01-29 04:45:32.152 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:45:32.206 ERROR [src.node.docker_mananger] Max retries reached for container 59e6fa5d88d6. Exiting log stream.
2026-01-29 04:45:32.712 ERROR [src.node.docker_mananger] Max retries reached for container 5eed9e538ba1. Exiting log stream.
2026-01-29 04:45:33.153 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32744/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:33.156 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:45:33.156 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:45:33.156 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32744/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:33.159 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.41/tcp/32745/p2p/16Uiu2HAmUKLqbYeYFvbFHqcrD6zViG9mPUgSm5S3upSMAyRLAi3B","/ip4/172.18.12.41/tcp/32746/ws/p2p/16Uiu2HAmUKLqbYeYFvbFHqcrD6zViG9mPUgSm5S3upSMAyRLAi3B"],"enrUri":"enr:-L24QJlOqGoHCtDOHoF4k9vVlRaw_vjU0y720vRalLrmAMV4DIyGKVS6iaVM-BpeJk7B9tXhORcsK3rOve56DtmSM2QCgmlkgnY0gmlwhKwSDCmKbXVsdGlhZGRyc5YACASsEgwpBn_pAAoErBIMKQZ_6t0DgnJzhQADAQAAiXNlY3AyNTZrMaED6LKKYS7m0_BN365aAD1BlyZ8-phwUIO99ZvxLONNnFqDdGNwgn_pg3VkcIJ_64V3YWt1MgM"}'
2026-01-29 04:45:33.159 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:45:33.166 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:45:33.166 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-01-29_04-45-31__cd1b902b-1c70-4006-a545-9ec52dfecb9c__wakuorg_nwaku:latest.log
2026-01-29 04:45:33.166 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:45:33.166 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:45:33.167 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:45:33.168 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.119.149
2026-01-29 04:45:33.168 DEBUG [src.node.docker_mananger] Generated ports ['16634', '16635', '16636', '16637', '16638']
2026-01-29 04:45:33.168 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:45:33.168 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:45:33.168 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:45:33.168 DEBUG [src.node.docker_mananger] docker run -i -t -p 16634:16634 -p 16635:16635 -p 16636:16636 -p 16637:16637 -p 16638:16638 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16636 --rest-port=16634 --tcp-port=16635 --discv5-udp-port=16637 --rest-address=0.0.0.0 --nat=extip:172.18.119.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa0caf6ff4fde88a5c4eb2d15fcfab68c3e9953a1cd5facb85da91ee5ba8f4aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16638 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJlOqGoHCtDOHoF4k9vVlRaw_vjU0y720vRalLrmAMV4DIyGKVS6iaVM-BpeJk7B9tXhORcsK3rOve56DtmSM2QCgmlkgnY0gmlwhKwSDCmKbXVsdGlhZGRyc5YACASsEgwpBn_pAAoErBIMKQZ_6t0DgnJzhQADAQAAiXNlY3AyNTZrMaED6LKKYS7m0_BN365aAD1BlyZ8-phwUIO99ZvxLONNnFqDdGNwgn_pg3VkcIJ_64V3YWt1MgM --storenode=/ip4/172.18.12.41/tcp/32745/p2p/16Uiu2HAmUKLqbYeYFvbFHqcrD6zViG9mPUgSm5S3upSMAyRLAi3B --store=true --relay=true
2026-01-29 04:45:33.356 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.119.149 waku 4a95fa34611afcc93f60eef36080b37c6afe9e948113f2056fe991c6ae7e3be4
2026-01-29 04:45:33.384 DEBUG [src.node.docker_mananger] Container started with ID 4a95fa34611a. Setting up logs at ./log/docker/store_node1_2026-01-29_04-45-31__cd1b902b-1c70-4006-a545-9ec52dfecb9c__wakuorg_nwaku:latest.log
2026-01-29 04:45:33.385 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16634
2026-01-29 04:45:33.386 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:45:34.386 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16634/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:34.390 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:45:34.390 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:45:34.391 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16634/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:34.393 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.119.149/tcp/16635/p2p/16Uiu2HAm6SVEsV6hz7tKtLEydgsZHMbDgrKNGJTN5kWiw6fUiDXQ","/ip4/172.18.119.149/tcp/16636/ws/p2p/16Uiu2HAm6SVEsV6hz7tKtLEydgsZHMbDgrKNGJTN5kWiw6fUiDXQ"],"enrUri":"enr:-L24QDyI60C7fYn_MB9Pk2UMv-s1SLeFFk8enhfWGQNonD54PCXj5FVFo9OBg8FBNi_ZR-_G_exWrZZVZcX75bmnbCICgmlkgnY0gmlwhKwSd5WKbXVsdGlhZGRyc5YACASsEneVBkD7AAoErBJ3lQZA_N0DgnJzhQADAQAAiXNlY3AyNTZrMaECo6X-QjYmExQFUuyXi2-RGyewCsg5hNK-hD6qiQDzuKuDdGNwgkD7g3VkcIJA_YV3YWt1MgM"}'
2026-01-29 04:45:34.393 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:45:34.393 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16634/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.12.41/tcp/32745/p2p/16Uiu2HAmUKLqbYeYFvbFHqcrD6zViG9mPUgSm5S3upSMAyRLAi3B"]'
2026-01-29 04:45:34.396 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:34.396 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32744/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-29 04:45:34.398 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:34.399 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16634/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-29 04:45:34.401 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:34.402 DEBUG [src.steps.store] Relaying message
2026-01-29 04:45:34.402 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32744/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:34.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:34.407 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-29 04:45:34.608 DEBUG [src.steps.store] Relaying message
2026-01-29 04:45:34.609 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32744/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:34.613 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:34.614 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-29 04:45:34.814 DEBUG [src.steps.store] Relaying message
2026-01-29 04:45:34.815 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32744/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:34.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:34.821 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-29 04:45:35.022 DEBUG [src.steps.store] Relaying message
2026-01-29 04:45:35.022 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32744/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:45:35.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:45:35.028 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-29 04:45:35.229 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32744/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xc57e9cd70f569278055b986c6b692114af11d5f2b3dc3ef727768df33decbbbe&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:35.231 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32744/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xc57e9cd70f569278055b986c6b692114af11d5f2b3dc3ef727768df33decbbbe&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-01-29 04:45:35.232 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16634/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xc57e9cd70f569278055b986c6b692114af11d5f2b3dc3ef727768df33decbbbe&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:45:35.235 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:16634/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0xc57e9cd70f569278055b986c6b692114af11d5f2b3dc3ef727768df33decbbbe&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-01-29 04:45:35.237 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:45:35.238 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:45:35.238 DEBUG [src.node.waku_node] Stopping container with id 80cc00b9b1be
2026-01-29 04:45:35.754 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:45:35.756 DEBUG [src.node.waku_node] Stopping container with id 4a95fa34611a
2026-01-29 04:45:36.257 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:45:36.260 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:45:36.273 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:45:36.280 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
