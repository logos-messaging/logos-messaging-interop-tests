2026-01-29 04:31:24.326 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:31:24.326 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_content_topic with id: 2026-01-29_04-31-24__19ffc7bd-f142-4ae9-aa95-647c75363460
2026-01-29 04:31:24.326 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:31:24.327 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-29 04:31:24.327 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-01-29 04:31:24.334 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:31:24.334 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-31-24__19ffc7bd-f142-4ae9-aa95-647c75363460__wakuorg_nwaku:latest.log
2026-01-29 04:31:24.334 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:31:24.334 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:31:24.335 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:31:24.336 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.1.91
2026-01-29 04:31:24.336 DEBUG [src.node.docker_mananger] Generated ports ['61640', '61641', '61642', '61643', '61644']
2026-01-29 04:31:24.336 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:31:24.336 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:31:24.336 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:31:24.336 DEBUG [src.node.docker_mananger] docker run -i -t -p 61640:61640 -p 61641:61641 -p 61642:61642 -p 61643:61643 -p 61644:61644 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61642 --rest-port=61640 --tcp-port=61641 --discv5-udp-port=61643 --rest-address=0.0.0.0 --nat=extip:172.18.1.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6fbdeae46d98fcbb8f8ab6a18ea67de0ead76c83418df604deb52478adc926e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61644 --metrics-logging=true --relay=true --filter=true
2026-01-29 04:31:24.523 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.1.91 waku 59f5e9eb2d7bae2438203da2f91cb0475bdcc188e2f8d7675f1f534c72a0eb1b
2026-01-29 04:31:24.551 DEBUG [src.node.docker_mananger] Container started with ID 59f5e9eb2d7b. Setting up logs at ./log/docker/node1_2026-01-29_04-31-24__19ffc7bd-f142-4ae9-aa95-647c75363460__wakuorg_nwaku:latest.log
2026-01-29 04:31:24.552 ERROR [src.node.docker_mananger] Max retries reached for container 49c4d4532a88. Exiting log stream.
2026-01-29 04:31:24.554 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61640
2026-01-29 04:31:24.554 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:31:25.131 ERROR [src.node.docker_mananger] Max retries reached for container d7018f35888b. Exiting log stream.
2026-01-29 04:31:25.555 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61640/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:25.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:31:25.558 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:31:25.559 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61640/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:25.561 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.91/tcp/61641/p2p/16Uiu2HAmSpMUAaW373cC2cxjxzTCgrVj1HTGmc2wmFnR4Brc39fr","/ip4/172.18.1.91/tcp/61642/ws/p2p/16Uiu2HAmSpMUAaW373cC2cxjxzTCgrVj1HTGmc2wmFnR4Brc39fr"],"enrUri":"enr:-L24QJvyg1luaamQPNkosNwmrVSJJgk6QJUDyvKYksgieG8oKO6LyyhBCXK0TxxiJEv0P4mLIxU4oQwJvdEpT4TosKcCgmlkgnY0gmlwhKwSAVuKbXVsdGlhZGRyc5YACASsEgFbBvDJAAoErBIBWwbwyt0DgnJzhQADAQAAiXNlY3AyNTZrMaED0mm5G2oXWudSWZ6xpaziJ7gMe08v7E_Fks4eMS5D8w2DdGNwgvDJg3VkcILwy4V3YWt1MgU"}'
2026-01-29 04:31:25.561 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:31:25.562 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-01-29 04:31:25.568 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:31:25.568 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-29_04-31-24__19ffc7bd-f142-4ae9-aa95-647c75363460__wakuorg_nwaku:latest.log
2026-01-29 04:31:25.568 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:31:25.568 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:31:25.570 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:31:25.570 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.61.106
2026-01-29 04:31:25.570 DEBUG [src.node.docker_mananger] Generated ports ['52595', '52596', '52597', '52598', '52599']
2026-01-29 04:31:25.570 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:31:25.570 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:31:25.570 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:31:25.571 DEBUG [src.node.docker_mananger] docker run -i -t -p 52595:52595 -p 52596:52596 -p 52597:52597 -p 52598:52598 -p 52599:52599 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52597 --rest-port=52595 --tcp-port=52596 --discv5-udp-port=52598 --rest-address=0.0.0.0 --nat=extip:172.18.61.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edde74cfec2e17a8bc04b1c0ff3cef984fd626ae7deabc52c4c5a5cae45b8cc2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52599 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QJvyg1luaamQPNkosNwmrVSJJgk6QJUDyvKYksgieG8oKO6LyyhBCXK0TxxiJEv0P4mLIxU4oQwJvdEpT4TosKcCgmlkgnY0gmlwhKwSAVuKbXVsdGlhZGRyc5YACASsEgFbBvDJAAoErBIBWwbwyt0DgnJzhQADAQAAiXNlY3AyNTZrMaED0mm5G2oXWudSWZ6xpaziJ7gMe08v7E_Fks4eMS5D8w2DdGNwgvDJg3VkcILwy4V3YWt1MgU --filternode=/ip4/172.18.1.91/tcp/61641/p2p/16Uiu2HAmSpMUAaW373cC2cxjxzTCgrVj1HTGmc2wmFnR4Brc39fr
2026-01-29 04:31:25.747 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.61.106 waku 2511347f585322ce25a625749aa492e23ba686a09ab106751f9c9fe0b31cf4e3
2026-01-29 04:31:25.776 DEBUG [src.node.docker_mananger] Container started with ID 2511347f5853. Setting up logs at ./log/docker/node2_2026-01-29_04-31-24__19ffc7bd-f142-4ae9-aa95-647c75363460__wakuorg_nwaku:latest.log
2026-01-29 04:31:25.776 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52595
2026-01-29 04:31:25.776 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:31:26.777 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52595/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:26.782 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-29 04:31:26.783 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:31:26.783 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52595/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:26.785 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.106/tcp/52596/p2p/16Uiu2HAmFaj3BA16zuTR3r3atLt8qmXWMNYVTLXAmZMeUdgyxXer","/ip4/172.18.61.106/tcp/52597/ws/p2p/16Uiu2HAmFaj3BA16zuTR3r3atLt8qmXWMNYVTLXAmZMeUdgyxXer"],"enrUri":"enr:-L24QPQclCNf_hk2fYNCcz1WSewTExd1EMOUxiuEU2BtdPjoM1AQGa0WtLWy9ztYHNpRC5lk0sBjCKfN3q2uW1HjxQcCgmlkgnY0gmlwhKwSPWqKbXVsdGlhZGRyc5YACASsEj1qBs10AAoErBI9agbNdd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDK3tsggNM-HA-fWk1VzXmwcv5SuBKGNtEbEVWRadL8cODdGNwgs10g3VkcILNdoV3YWt1MgA"}'
2026-01-29 04:31:26.785 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:31:26.786 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52595/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.1.91/tcp/61641/p2p/16Uiu2HAmSpMUAaW373cC2cxjxzTCgrVj1HTGmc2wmFnR4Brc39fr"]'
2026-01-29 04:31:26.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:26.815 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-01-29 04:31:26.819 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61640/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:31:26.828 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:26.830 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52595/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "377a43e2-c95a-481a-b8cc-43fbf9fd7c34", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-29 04:31:26.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"377a43e2-c95a-481a-b8cc-43fbf9fd7c34","statusDesc":"OK"}'
2026-01-29 04:31:26.842 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:52595/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/2/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-01-29 04:31:26.850 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:52595/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2026-01-29 04:31:26.851 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61640/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:31:26.858 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:26.858 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:31:26.958 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:31:26.959 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52595/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:26.962 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1769661086851673588,"ephemeral":false}]'
2026-01-29 04:31:26.965 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:31:26.966 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:31:26.966 DEBUG [src.node.waku_node] Stopping container with id 59f5e9eb2d7b
2026-01-29 04:31:27.559 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:31:27.560 DEBUG [src.node.waku_node] Stopping container with id 2511347f5853
2026-01-29 04:31:28.075 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:31:28.076 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:31:28.082 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:31:28.087 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
