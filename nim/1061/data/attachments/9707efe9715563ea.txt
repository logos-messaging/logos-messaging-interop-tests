2026-01-29 04:31:03.695 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:31:03.695 DEBUG [tests.conftest] Running test: test_lightpush with id: 2026-01-29_04-31-03__abfb88d7-a580-4bc4-89f0-69498985de8e
2026-01-29 04:31:03.696 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:31:03.696 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-01-29 04:31:03.696 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-01-29 04:31:03.696 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:31:03.697 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-29 04:31:03.704 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:31:03.704 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-31-03__abfb88d7-a580-4bc4-89f0-69498985de8e__wakuorg_nwaku:latest.log
2026-01-29 04:31:03.704 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:31:03.704 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:31:03.707 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:31:03.707 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.181.18
2026-01-29 04:31:03.707 DEBUG [src.node.docker_mananger] Generated ports ['49753', '49754', '49755', '49756', '49757']
2026-01-29 04:31:03.707 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:31:03.707 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:31:03.707 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:31:03.708 DEBUG [src.node.docker_mananger] docker run -i -t -p 49753:49753 -p 49754:49754 -p 49755:49755 -p 49756:49756 -p 49757:49757 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49755 --rest-port=49753 --tcp-port=49754 --discv5-udp-port=49756 --rest-address=0.0.0.0 --nat=extip:172.18.181.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4a60461c12860dab5bc5b7dad0f099f70be5e85cedd71f3ddfdbc3a52efcd9c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49757 --metrics-logging=true --lightpush=true --relay=true
2026-01-29 04:31:03.889 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.181.18 waku 814ad7e25947730a69c9d7785c0aa33a6efd48408490d4e823c83745741ce08c
2026-01-29 04:31:03.921 DEBUG [src.node.docker_mananger] Container started with ID 814ad7e25947. Setting up logs at ./log/docker/node1_2026-01-29_04-31-03__abfb88d7-a580-4bc4-89f0-69498985de8e__wakuorg_nwaku:latest.log
2026-01-29 04:31:03.921 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49753
2026-01-29 04:31:03.922 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:31:03.947 ERROR [src.node.docker_mananger] Max retries reached for container 15dcee8ea32e. Exiting log stream.
2026-01-29 04:31:04.503 ERROR [src.node.docker_mananger] Max retries reached for container 7e3f0634ab87. Exiting log stream.
2026-01-29 04:31:04.922 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49753/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:04.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:31:04.925 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:31:04.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49753/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:04.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.18/tcp/49754/p2p/16Uiu2HAmG8MGk835jCAN4MPd5pC7177FDWBnuQ2STcrry7Z1HHhf","/ip4/172.18.181.18/tcp/49755/ws/p2p/16Uiu2HAmG8MGk835jCAN4MPd5pC7177FDWBnuQ2STcrry7Z1HHhf"],"enrUri":"enr:-L24QIWm5P-fiahjaobbkayrvijt71qGbx1QxS3fsb1xR6LRa2MBqH8-E4lutUAOtioDC3APgu7Zod8dRB6D2VCdkIcCgmlkgnY0gmlwhKwStRKKbXVsdGlhZGRyc5YACASsErUSBsJaAAoErBK1EgbCW90DgnJzhQADAQAAiXNlY3AyNTZrMaEDM5VmFrXQDcLso2J7pn0mvXtl-BoOCZUMsIpF_1lP-naDdGNwgsJag3VkcILCXIV3YWt1Mgk"}'
2026-01-29 04:31:04.928 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:31:04.934 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:31:04.935 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-31-03__abfb88d7-a580-4bc4-89f0-69498985de8e__wakuorg_nwaku:latest.log
2026-01-29 04:31:04.935 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:31:04.935 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:31:04.936 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:31:04.936 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.24.51
2026-01-29 04:31:04.937 DEBUG [src.node.docker_mananger] Generated ports ['29521', '29522', '29523', '29524', '29525']
2026-01-29 04:31:04.937 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:31:04.937 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:31:04.937 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:31:04.937 DEBUG [src.node.docker_mananger] docker run -i -t -p 29521:29521 -p 29522:29522 -p 29523:29523 -p 29524:29524 -p 29525:29525 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29523 --rest-port=29521 --tcp-port=29522 --discv5-udp-port=29524 --rest-address=0.0.0.0 --nat=extip:172.18.24.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b9dd8ffef8bc2ec0b01a0db0ee7ae1654afd3d6dcd4fbcea4dd0aff594b0ef8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29525 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QIWm5P-fiahjaobbkayrvijt71qGbx1QxS3fsb1xR6LRa2MBqH8-E4lutUAOtioDC3APgu7Zod8dRB6D2VCdkIcCgmlkgnY0gmlwhKwStRKKbXVsdGlhZGRyc5YACASsErUSBsJaAAoErBK1EgbCW90DgnJzhQADAQAAiXNlY3AyNTZrMaEDM5VmFrXQDcLso2J7pn0mvXtl-BoOCZUMsIpF_1lP-naDdGNwgsJag3VkcILCXIV3YWt1Mgk
2026-01-29 04:31:05.128 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.24.51 waku ab31566a182d6458f8a488be2116632a07251bd1cb79787987eb02037ea5fa6a
2026-01-29 04:31:05.159 DEBUG [src.node.docker_mananger] Container started with ID ab31566a182d. Setting up logs at ./log/docker/node1_2026-01-29_04-31-03__abfb88d7-a580-4bc4-89f0-69498985de8e__wakuorg_nwaku:latest.log
2026-01-29 04:31:05.160 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29521
2026-01-29 04:31:05.160 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:31:06.161 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29521/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:06.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:31:06.177 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:31:06.178 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29521/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:06.182 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.51/tcp/29522/p2p/16Uiu2HAmTufGZjRZoaTg6fd5ReiNobMdKHKKLTYdRk5AhgfFHqw4","/ip4/172.18.24.51/tcp/29523/ws/p2p/16Uiu2HAmTufGZjRZoaTg6fd5ReiNobMdKHKKLTYdRk5AhgfFHqw4"],"enrUri":"enr:-L24QEKm6blzaWRJ27tp2euJcHf0elBG-VjeE2u9JcxUboVbX0_roJ8Wom6LAPGBAvM-ZOSztCJdw7GCdJDq4SnW3R8CgmlkgnY0gmlwhKwSGDOKbXVsdGlhZGRyc5YACASsEhgzBnNSAAoErBIYMwZzU90DgnJzhQADAQAAiXNlY3AyNTZrMaED4qFwyDVd85ZYIQ_8hrjUJsHHRJvbla-il-IuMluCht-DdGNwgnNSg3VkcIJzVIV3YWt1MgE"}'
2026-01-29 04:31:06.185 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:31:06.193 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:31:06.193 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-31-03__abfb88d7-a580-4bc4-89f0-69498985de8e__wakuorg_nwaku:latest.log
2026-01-29 04:31:06.194 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:31:06.194 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:31:06.195 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:31:06.195 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.58.200
2026-01-29 04:31:06.195 DEBUG [src.node.docker_mananger] Generated ports ['57976', '57977', '57978', '57979', '57980']
2026-01-29 04:31:06.196 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:31:06.196 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:31:06.196 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:31:06.196 DEBUG [src.node.docker_mananger] docker run -i -t -p 57976:57976 -p 57977:57977 -p 57978:57978 -p 57979:57979 -p 57980:57980 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57978 --rest-port=57976 --tcp-port=57977 --discv5-udp-port=57979 --rest-address=0.0.0.0 --nat=extip:172.18.58.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a37ac2bffcf7c2d8db81bacbdb2aef7d17b10583d1f12bb8efb9a0b247a1adbf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57980 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-L24QIWm5P-fiahjaobbkayrvijt71qGbx1QxS3fsb1xR6LRa2MBqH8-E4lutUAOtioDC3APgu7Zod8dRB6D2VCdkIcCgmlkgnY0gmlwhKwStRKKbXVsdGlhZGRyc5YACASsErUSBsJaAAoErBK1EgbCW90DgnJzhQADAQAAiXNlY3AyNTZrMaEDM5VmFrXQDcLso2J7pn0mvXtl-BoOCZUMsIpF_1lP-naDdGNwgsJag3VkcILCXIV3YWt1Mgk --lightpushnode=/ip4/172.18.181.18/tcp/49754/p2p/16Uiu2HAmG8MGk835jCAN4MPd5pC7177FDWBnuQ2STcrry7Z1HHhf
2026-01-29 04:31:06.381 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.58.200 waku 6c6e402c7c114113fcc771a6adfad7f4af6de13617eb24dab92d31b0099b5cb1
2026-01-29 04:31:06.415 DEBUG [src.node.docker_mananger] Container started with ID 6c6e402c7c11. Setting up logs at ./log/docker/node1_2026-01-29_04-31-03__abfb88d7-a580-4bc4-89f0-69498985de8e__wakuorg_nwaku:latest.log
2026-01-29 04:31:06.416 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57976
2026-01-29 04:31:06.416 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:31:07.417 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57976/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:07.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:31:07.422 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:31:07.422 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57976/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:07.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.200/tcp/57977/p2p/16Uiu2HAmRKkkPwVJcY3vYSeABcNWnUmssxkinuyreF4Ryq1nYaq7","/ip4/172.18.58.200/tcp/57978/ws/p2p/16Uiu2HAmRKkkPwVJcY3vYSeABcNWnUmssxkinuyreF4Ryq1nYaq7"],"enrUri":"enr:-L24QOq_dpUQMFcwrjUxdclRpDfDxZKT5w7KC3rJCehKMVQ8K6VY-MK3-ZzOGJ2p-ayl99102P1g_y1lpWcbOhkLJz4CgmlkgnY0gmlwhKwSOsiKbXVsdGlhZGRyc5YACASsEjrIBuJ5AAoErBI6yAbiet0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvDqD6TdW_-g1Nn3Y5wRL9LCUjJXA5dhFJtmSxdNywTKDdGNwguJ5g3VkcILie4V3YWt1Mgk"}'
2026-01-29 04:31:07.424 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:31:07.425 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49753/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:31:07.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:07.430 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29521/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-01-29 04:31:07.433 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:07.435 DEBUG [src.steps.light_push] Lightpushing message
2026-01-29 04:31:07.435 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57976/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1769661067434945444}}'
2026-01-29 04:31:07.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:31:07.488 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:31:07.588 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2026-01-29 04:31:07.588 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49753/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:07.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661067434945444,"ephemeral":false,"proof":""}]'
2026-01-29 04:31:07.593 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2026-01-29 04:31:07.593 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29521/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:31:07.595 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769661067434945444,"ephemeral":false,"proof":""}]'
2026-01-29 04:31:07.599 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:31:07.599 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:31:07.600 DEBUG [src.node.waku_node] Stopping container with id 814ad7e25947
2026-01-29 04:31:08.174 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:31:08.175 DEBUG [src.node.waku_node] Stopping container with id ab31566a182d
2026-01-29 04:31:08.712 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:31:08.713 DEBUG [src.node.waku_node] Stopping container with id 6c6e402c7c11
2026-01-29 04:31:08.989 ERROR [src.node.docker_mananger] Max retries reached for container 814ad7e25947. Exiting log stream.
2026-01-29 04:31:09.252 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:31:09.254 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:31:09.263 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:31:09.271 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:31:09.279 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
