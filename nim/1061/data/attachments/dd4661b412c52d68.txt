2026-01-29 04:39:31.199 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:39:31.199 DEBUG [tests.conftest] Running test: test_single_pubsub_topic[/waku/2/rs/2/0] with id: 2026-01-29_04-39-31__4cc9722f-8369-4efe-b794-d5d729498d71
2026-01-29 04:39:31.200 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:39:31.201 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-01-29 04:39:31.201 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-01-29 04:39:31.212 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:39:31.212 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-01-29_04-39-31__4cc9722f-8369-4efe-b794-d5d729498d71__wakuorg_nwaku:latest.log
2026-01-29 04:39:31.213 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:39:31.213 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:39:31.216 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:39:31.216 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.11
2026-01-29 04:39:31.216 DEBUG [src.node.docker_mananger] Generated ports ['44367', '44368', '44369', '44370', '44371']
2026-01-29 04:39:31.216 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-01-29 04:39:31.216 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-01-29 04:39:31.216 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:39:31.217 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:39:31.217 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:39:31.218 DEBUG [src.node.docker_mananger] docker run -i -t -p 44367:44367 -p 44368:44368 -p 44369:44369 -p 44370:44370 -p 44371:44371 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44369 --rest-port=44367 --tcp-port=44368 --discv5-udp-port=44370 --rest-address=0.0.0.0 --nat=extip:172.18.107.11 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=5b9a7f0c7db981169795e23a5cea37ba596eeac9a66ba7122f93bbb079df1a58 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44371 --metrics-logging=true --relay=true --filter=true
2026-01-29 04:39:31.392 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.11 waku 67e7971daa032aaf97ec47d5e8f0caeeb238088f3f416899a348a3f48abe0f30
2026-01-29 04:39:31.428 DEBUG [src.node.docker_mananger] Container started with ID 67e7971daa03. Setting up logs at ./log/docker/node1_2026-01-29_04-39-31__4cc9722f-8369-4efe-b794-d5d729498d71__wakuorg_nwaku:latest.log
2026-01-29 04:39:31.429 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44367
2026-01-29 04:39:31.429 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:39:31.430 ERROR [src.node.docker_mananger] Max retries reached for container cda17370b181. Exiting log stream.
2026-01-29 04:39:32.027 ERROR [src.node.docker_mananger] Max retries reached for container 3aa5cd97f145. Exiting log stream.
2026-01-29 04:39:32.429 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44367/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:39:32.433 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:39:32.433 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:39:32.433 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44367/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:39:32.435 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.11/tcp/44368/p2p/16Uiu2HAmCacyxNUWfXaEJr44V4DBDvakAtkBoUuAZhW2KyJaLGay","/ip4/172.18.107.11/tcp/44369/ws/p2p/16Uiu2HAmCacyxNUWfXaEJr44V4DBDvakAtkBoUuAZhW2KyJaLGay"],"enrUri":"enr:-L24QDc5sGKMEh-6CRqdZV7QFYGp4PZ47ijcihyZ7eWN33WWKhOInMwXxEoNuGSZ_8kcnyOiodvICap-BDakfMVeRksCgmlkgnY0gmlwhKwSawuKbXVsdGlhZGRyc5YACASsEmsLBq1QAAoErBJrCwatUd0DgnJzhQACAQAAiXNlY3AyNTZrMaEC_uGEHZI5uZmmhrs3gzmi6zNHlbxntCiGwRKzMDpRenaDdGNwgq1Qg3VkcIKtUoV3YWt1MgU"}'
2026-01-29 04:39:32.435 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:39:32.442 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:39:32.442 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-01-29_04-39-31__4cc9722f-8369-4efe-b794-d5d729498d71__wakuorg_nwaku:latest.log
2026-01-29 04:39:32.442 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:39:32.443 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:39:32.444 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:39:32.444 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.32.177
2026-01-29 04:39:32.444 DEBUG [src.node.docker_mananger] Generated ports ['14666', '14667', '14668', '14669', '14670']
2026-01-29 04:39:32.444 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-01-29 04:39:32.445 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-01-29 04:39:32.445 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:39:32.445 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:39:32.445 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:39:32.445 DEBUG [src.node.docker_mananger] docker run -i -t -p 14666:14666 -p 14667:14667 -p 14668:14668 -p 14669:14669 -p 14670:14670 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14668 --rest-port=14666 --tcp-port=14667 --discv5-udp-port=14669 --rest-address=0.0.0.0 --nat=extip:172.18.32.177 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2a0dc7f8edacee23ec3bdfc3ca860a8f07e7e0590fefdddadb825d6e2a5c49f2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14670 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QDc5sGKMEh-6CRqdZV7QFYGp4PZ47ijcihyZ7eWN33WWKhOInMwXxEoNuGSZ_8kcnyOiodvICap-BDakfMVeRksCgmlkgnY0gmlwhKwSawuKbXVsdGlhZGRyc5YACASsEmsLBq1QAAoErBJrCwatUd0DgnJzhQACAQAAiXNlY3AyNTZrMaEC_uGEHZI5uZmmhrs3gzmi6zNHlbxntCiGwRKzMDpRenaDdGNwgq1Qg3VkcIKtUoV3YWt1MgU
2026-01-29 04:39:32.638 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.32.177 waku 2f9da09023cf0035f7b3134d2c222c4946350ead2fd33379da9d62c35be44d73
2026-01-29 04:39:32.669 DEBUG [src.node.docker_mananger] Container started with ID 2f9da09023cf. Setting up logs at ./log/docker/node2_2026-01-29_04-39-31__4cc9722f-8369-4efe-b794-d5d729498d71__wakuorg_nwaku:latest.log
2026-01-29 04:39:32.669 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14666
2026-01-29 04:39:32.669 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:39:33.669 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14666/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:39:33.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-01-29 04:39:33.685 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:39:33.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14666/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:39:33.692 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.32.177/tcp/14667/p2p/16Uiu2HAkvnqSdiTS5Ztys7yfh17Cu3V4v6Lay9E3wj4TJafg1ZZq","/ip4/172.18.32.177/tcp/14668/ws/p2p/16Uiu2HAkvnqSdiTS5Ztys7yfh17Cu3V4v6Lay9E3wj4TJafg1ZZq"],"enrUri":"enr:-L24QOyvkrECienlydtNQlmJEPmdgyCSxd5fXAlDmqp9ejWGPQII_NS2jWwvWlJ0OOVyLK7lOZi7ovyjy_CheecHTfsCgmlkgnY0gmlwhKwSILGKbXVsdGlhZGRyc5YACASsEiCxBjlLAAoErBIgsQY5TN0DgnJzhQACAQAAiXNlY3AyNTZrMaECFEeVYCUIi_QjhphMR_4FegFLEU687u0zIRR4FTdFn-CDdGNwgjlLg3VkcII5TYV3YWt1MgE"}'
2026-01-29 04:39:33.693 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:39:33.693 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14666/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.107.11/tcp/44368/p2p/16Uiu2HAmCacyxNUWfXaEJr44V4DBDvakAtkBoUuAZhW2KyJaLGay"]'
2026-01-29 04:39:33.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:39:33.696 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44367/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-01-29 04:39:33.698 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:39:33.699 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14666/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-01-29 04:39:33.701 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:39:33.701 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44367/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:39:33.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:39:33.706 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-01-29 04:39:33.806 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-01-29 04:39:33.807 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44367/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:39:33.809 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769661573701761621,"ephemeral":false,"proof":""}]'
2026-01-29 04:39:33.810 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-01-29 04:39:33.811 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14666/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:39:33.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769661573701761621,"ephemeral":false,"proof":""}]'
2026-01-29 04:39:33.815 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:39:33.816 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:39:33.817 DEBUG [src.node.waku_node] Stopping container with id 67e7971daa03
2026-01-29 04:39:34.342 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:39:34.342 DEBUG [src.node.waku_node] Stopping container with id 2f9da09023cf
2026-01-29 04:39:34.881 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:39:34.883 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:39:34.891 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:39:34.895 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
