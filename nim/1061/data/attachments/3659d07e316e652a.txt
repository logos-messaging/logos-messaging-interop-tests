2026-01-29 04:50:21.384 DEBUG [tests.conftest] Running fixture setup: test_id
2026-01-29 04:50:21.385 DEBUG [tests.conftest] Running test: test_messages_with_timestamps_far_from_now with id: 2026-01-29_04-50-21__47396cd0-6392-4a20-a06b-ae55c5db27c3
2026-01-29 04:50:21.385 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-01-29 04:50:21.386 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-01-29 04:50:21.386 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-01-29 04:50:21.396 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:50:21.396 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-01-29_04-50-21__47396cd0-6392-4a20-a06b-ae55c5db27c3__wakuorg_nwaku:latest.log
2026-01-29 04:50:21.396 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:50:21.397 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:50:21.399 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:50:21.399 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.228.181
2026-01-29 04:50:21.400 DEBUG [src.node.docker_mananger] Generated ports ['23160', '23161', '23162', '23163', '23164']
2026-01-29 04:50:21.400 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:50:21.400 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:50:21.400 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:50:21.400 DEBUG [src.node.docker_mananger] docker run -i -t -p 23160:23160 -p 23161:23161 -p 23162:23162 -p 23163:23163 -p 23164:23164 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23162 --rest-port=23160 --tcp-port=23161 --discv5-udp-port=23163 --rest-address=0.0.0.0 --nat=extip:172.18.228.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e361fb6b64da4ff183b025edb4cad9aebdfdfab4e9ccccaa8136b1dc957befc6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23164 --metrics-logging=true --store=true --relay=true
2026-01-29 04:50:21.581 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.228.181 waku e02c5c7a7bdb7922123219fe1e462455d83160471cba552325b1d28508b04c38
2026-01-29 04:50:21.612 DEBUG [src.node.docker_mananger] Container started with ID e02c5c7a7bdb. Setting up logs at ./log/docker/publishing_node1_2026-01-29_04-50-21__47396cd0-6392-4a20-a06b-ae55c5db27c3__wakuorg_nwaku:latest.log
2026-01-29 04:50:21.612 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23160
2026-01-29 04:50:21.612 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:50:21.635 ERROR [src.node.docker_mananger] Max retries reached for container ffad7c52b666. Exiting log stream.
2026-01-29 04:50:22.226 ERROR [src.node.docker_mananger] Max retries reached for container d0a69d1c60a5. Exiting log stream.
2026-01-29 04:50:22.613 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23160/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:50:22.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:50:22.616 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:50:22.616 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23160/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:50:22.618 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.181/tcp/23161/p2p/16Uiu2HAm17j5z55VmRXSgNP9x9up1TeVNukQcYdNQisr7WjfoNZ3","/ip4/172.18.228.181/tcp/23162/ws/p2p/16Uiu2HAm17j5z55VmRXSgNP9x9up1TeVNukQcYdNQisr7WjfoNZ3"],"enrUri":"enr:-L24QJPUXVSwgQpqA2d5OplDLPPaTsanUKF63_U8STVxyB_QSK79nwyVX4nZKfDRyrswGQObkVCJrvP3RNdV7jffvJoCgmlkgnY0gmlwhKwS5LWKbXVsdGlhZGRyc5YACASsEuS1Blp5AAoErBLktQZaet0DgnJzhQADAQAAiXNlY3AyNTZrMaECVI0uB52bS41TyWEQygcvWkBbsPoHgaSH2iMdRjC0cEaDdGNwglp5g3VkcIJae4V3YWt1MgM"}'
2026-01-29 04:50:22.618 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:50:22.625 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-01-29 04:50:22.625 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-01-29_04-50-21__47396cd0-6392-4a20-a06b-ae55c5db27c3__wakuorg_nwaku:latest.log
2026-01-29 04:50:22.625 DEBUG [src.node.waku_node] Starting Node...
2026-01-29 04:50:22.626 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-01-29 04:50:22.627 DEBUG [src.node.docker_mananger] Network waku already exists
2026-01-29 04:50:22.627 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.162.81
2026-01-29 04:50:22.627 DEBUG [src.node.docker_mananger] Generated ports ['20494', '20495', '20496', '20497', '20498']
2026-01-29 04:50:22.627 DEBUG [src.node.waku_node] RLN credentials were not set
2026-01-29 04:50:22.627 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-01-29 04:50:22.627 DEBUG [src.node.waku_node] Using volumes []
2026-01-29 04:50:22.628 DEBUG [src.node.docker_mananger] docker run -i -t -p 20494:20494 -p 20495:20495 -p 20496:20496 -p 20497:20497 -p 20498:20498 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20496 --rest-port=20494 --tcp-port=20495 --discv5-udp-port=20497 --rest-address=0.0.0.0 --nat=extip:172.18.162.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6eecc2343bfed0d7f5b1a8df9ffdf8da1db81dbaba330be9e837a0c68edaee5c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20498 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJPUXVSwgQpqA2d5OplDLPPaTsanUKF63_U8STVxyB_QSK79nwyVX4nZKfDRyrswGQObkVCJrvP3RNdV7jffvJoCgmlkgnY0gmlwhKwS5LWKbXVsdGlhZGRyc5YACASsEuS1Blp5AAoErBLktQZaet0DgnJzhQADAQAAiXNlY3AyNTZrMaECVI0uB52bS41TyWEQygcvWkBbsPoHgaSH2iMdRjC0cEaDdGNwglp5g3VkcIJae4V3YWt1MgM --storenode=/ip4/172.18.228.181/tcp/23161/p2p/16Uiu2HAm17j5z55VmRXSgNP9x9up1TeVNukQcYdNQisr7WjfoNZ3 --store=true --relay=true
2026-01-29 04:50:22.810 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.162.81 waku 3d7bd1aafe7abf01e13d14c915032eab66ff70d754c845aa3cef1663188a18ea
2026-01-29 04:50:22.845 DEBUG [src.node.docker_mananger] Container started with ID 3d7bd1aafe7a. Setting up logs at ./log/docker/store_node1_2026-01-29_04-50-21__47396cd0-6392-4a20-a06b-ae55c5db27c3__wakuorg_nwaku:latest.log
2026-01-29 04:50:22.846 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20494
2026-01-29 04:50:22.846 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-01-29 04:50:23.847 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20494/health" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:50:23.851 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-01-29 04:50:23.851 INFO [src.node.waku_node] Node protocols are initialized !!
2026-01-29 04:50:23.851 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20494/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:50:23.854 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.81/tcp/20495/p2p/16Uiu2HAm92Bmwc9MXTEp6szubueh4rex9yRaj3zni7N5iTEiCsCi","/ip4/172.18.162.81/tcp/20496/ws/p2p/16Uiu2HAm92Bmwc9MXTEp6szubueh4rex9yRaj3zni7N5iTEiCsCi"],"enrUri":"enr:-L24QBMIfuyfMUNFnIQbcc1u4FFVXFDoMvomi1a2isSNW0LFUQhCDR4wmUf2Slt6VIYyELK7FZ-oB8INGlDh_4lIV9MCgmlkgnY0gmlwhKwSolGKbXVsdGlhZGRyc5YACASsEqJRBlAPAAoErBKiUQZQEN0DgnJzhQADAQAAiXNlY3AyNTZrMaECyf9eHGoHjPHLI955-w67uUBvO3Nl53LcZm10offkqxeDdGNwglAPg3VkcIJQEYV3YWt1MgM"}'
2026-01-29 04:50:23.854 INFO [src.node.waku_node] REST service is ready !!
2026-01-29 04:50:23.854 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20494/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.228.181/tcp/23161/p2p/16Uiu2HAm17j5z55VmRXSgNP9x9up1TeVNukQcYdNQisr7WjfoNZ3"]'
2026-01-29 04:50:23.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:50:23.857 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23160/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-29 04:50:23.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:50:23.860 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20494/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-01-29 04:50:23.862 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:50:23.863 DEBUG [tests.store.test_time_filter] Running test with payload 20 sec Past
2026-01-29 04:50:23.863 DEBUG [src.steps.store] Relaying message
2026-01-29 04:50:23.864 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23160/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:50:23.868 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:50:23.868 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-29 04:50:24.069 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-01-29 04:50:24.069 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23160/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:50:24.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-01-29 04:50:24.072 DEBUG [src.steps.store] messages length is 0
2026-01-29 04:50:24.073 DEBUG [tests.store.test_time_filter] Running test with payload 40 sec Future
2026-01-29 04:50:24.073 DEBUG [src.steps.store] Relaying message
2026-01-29 04:50:24.073 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23160/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-01-29 04:50:24.077 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-01-29 04:50:24.078 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-01-29 04:50:24.278 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-01-29 04:50:24.279 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23160/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2026-01-29 04:50:24.281 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-01-29 04:50:24.281 DEBUG [src.steps.store] messages length is 0
2026-01-29 04:50:24.283 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-01-29 04:50:24.284 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-01-29 04:50:24.284 DEBUG [src.node.waku_node] Stopping container with id e02c5c7a7bdb
2026-01-29 04:50:24.846 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:50:24.846 DEBUG [src.node.waku_node] Stopping container with id 3d7bd1aafe7a
2026-01-29 04:50:25.386 DEBUG [src.node.waku_node] Container stopped.
2026-01-29 04:50:25.388 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-01-29 04:50:25.394 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-01-29 04:50:25.399 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
