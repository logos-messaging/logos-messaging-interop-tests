2026-02-12 04:41:50.895 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:41:50.896 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2026-02-12_04-41-50__3b42dee0-cfb7-4b24-8efc-f19585ae9a6c
2026-02-12 04:41:50.896 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:41:50.896 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-12 04:41:50.897 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-12 04:41:50.903 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:41:50.903 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-12_04-41-50__3b42dee0-cfb7-4b24-8efc-f19585ae9a6c__wakuorg_nwaku:latest.log
2026-02-12 04:41:50.903 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:41:50.903 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:41:50.905 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:41:50.905 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.247
2026-02-12 04:41:50.905 DEBUG [src.node.docker_mananger] Generated ports ['41459', '41460', '41461', '41462', '41463']
2026-02-12 04:41:50.905 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:41:50.905 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:41:50.905 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:41:50.906 DEBUG [src.node.docker_mananger] docker run -i -t -p 41459:41459 -p 41460:41460 -p 41461:41461 -p 41462:41462 -p 41463:41463 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41461 --rest-port=41459 --tcp-port=41460 --discv5-udp-port=41462 --rest-address=0.0.0.0 --nat=extip:172.18.45.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=99546eabb8ada227ab0bc94f7487f5ca1ecdd78fa7a7cae11cfee5e6a3bcfb56 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41463 --metrics-logging=true --relay=true --filter=true
2026-02-12 04:41:51.091 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.247 waku 5f5fd406c97dcf774a6936435a116a4ffd61be71be70b2aab115e5a4659685f2
2026-02-12 04:41:51.122 DEBUG [src.node.docker_mananger] Container started with ID 5f5fd406c97d. Setting up logs at ./log/docker/node1_2026-02-12_04-41-50__3b42dee0-cfb7-4b24-8efc-f19585ae9a6c__wakuorg_nwaku:latest.log
2026-02-12 04:41:51.122 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41459
2026-02-12 04:41:51.123 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:41:51.164 ERROR [src.node.docker_mananger] Max retries reached for container 599a9c3af44d. Exiting log stream.
2026-02-12 04:41:51.703 ERROR [src.node.docker_mananger] Max retries reached for container 26a42b3d26a9. Exiting log stream.
2026-02-12 04:41:52.123 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41459/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:52.126 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:41:52.127 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:41:52.127 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41459/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:52.129 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.247/tcp/41460/p2p/16Uiu2HAmD7h7sxFByPs3etBsycsfMCJsGKuv3D28JPz8unWYZdyM","/ip4/172.18.45.247/tcp/41461/ws/p2p/16Uiu2HAmD7h7sxFByPs3etBsycsfMCJsGKuv3D28JPz8unWYZdyM"],"enrUri":"enr:-L24QEawYgMoMYIZbi1VHzkYkALOh7LxU9FuuH9C4xlh-IehOzA9IpdIQMbhO6izr44hwrGeXkkdUpB07I_5evbW8toCgmlkgnY0gmlwhKwSLfeKbXVsdGlhZGRyc5YACASsEi33BqH0AAoErBIt9wah9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBtcyzV6ohAe_d2pZtgp6CqBq43S3k2AN1SWTNr-l7ySDdGNwgqH0g3VkcIKh9oV3YWt1MgU"}'
2026-02-12 04:41:52.129 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:41:52.129 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-12 04:41:52.136 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:41:52.136 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-12_04-41-50__3b42dee0-cfb7-4b24-8efc-f19585ae9a6c__wakuorg_nwaku:latest.log
2026-02-12 04:41:52.136 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:41:52.136 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:41:52.138 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:41:52.138 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.73.178
2026-02-12 04:41:52.138 DEBUG [src.node.docker_mananger] Generated ports ['63456', '63457', '63458', '63459', '63460']
2026-02-12 04:41:52.138 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:41:52.138 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:41:52.138 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:41:52.139 DEBUG [src.node.docker_mananger] docker run -i -t -p 63456:63456 -p 63457:63457 -p 63458:63458 -p 63459:63459 -p 63460:63460 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63458 --rest-port=63456 --tcp-port=63457 --discv5-udp-port=63459 --rest-address=0.0.0.0 --nat=extip:172.18.73.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=14da8aac2e381fc08abd94aa5f4c00c0cb5eef8a7da893be4d95ff0dbe5c420a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63460 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QEawYgMoMYIZbi1VHzkYkALOh7LxU9FuuH9C4xlh-IehOzA9IpdIQMbhO6izr44hwrGeXkkdUpB07I_5evbW8toCgmlkgnY0gmlwhKwSLfeKbXVsdGlhZGRyc5YACASsEi33BqH0AAoErBIt9wah9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBtcyzV6ohAe_d2pZtgp6CqBq43S3k2AN1SWTNr-l7ySDdGNwgqH0g3VkcIKh9oV3YWt1MgU --filternode=/ip4/172.18.45.247/tcp/41460/p2p/16Uiu2HAmD7h7sxFByPs3etBsycsfMCJsGKuv3D28JPz8unWYZdyM
2026-02-12 04:41:52.322 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.73.178 waku fada3f91b06a775cba873c5005676980072df2d5de66fcf55285a175ef10e898
2026-02-12 04:41:52.354 DEBUG [src.node.docker_mananger] Container started with ID fada3f91b06a. Setting up logs at ./log/docker/node2_2026-02-12_04-41-50__3b42dee0-cfb7-4b24-8efc-f19585ae9a6c__wakuorg_nwaku:latest.log
2026-02-12 04:41:52.354 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63456
2026-02-12 04:41:52.354 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:41:53.356 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63456/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:53.360 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-12 04:41:53.360 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:41:53.360 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63456/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:53.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.178/tcp/63457/p2p/16Uiu2HAm1VmzR1c1oQrEgj52vmzfvh8R5b96wGYKE2fTpoHx75XX","/ip4/172.18.73.178/tcp/63458/ws/p2p/16Uiu2HAm1VmzR1c1oQrEgj52vmzfvh8R5b96wGYKE2fTpoHx75XX"],"enrUri":"enr:-L24QMGBmOrSZi7FyLDIBeqCLkXwa4efaTrpSAAwbUpo96i8JjrTL_bAyZRJUR3MFidXcrqYcGy9J-fbZ8-8oy_ZDqYCgmlkgnY0gmlwhKwSSbKKbXVsdGlhZGRyc5YACASsEkmyBvfhAAoErBJJsgb34t0DgnJzhQADAQAAiXNlY3AyNTZrMaECWjM9uosDoQ8OvzdmXmzO7NMXZIg8d0np6ZmN5Jj7L9qDdGNwgvfhg3VkcIL344V3YWt1MgA"}'
2026-02-12 04:41:53.363 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:41:53.363 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63456/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.45.247/tcp/41460/p2p/16Uiu2HAmD7h7sxFByPs3etBsycsfMCJsGKuv3D28JPz8unWYZdyM"]'
2026-02-12 04:41:53.390 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:53.394 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/1
2026-02-12 04:41:53.395 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41459/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-12 04:41:53.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:53.406 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63456/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b47dbb32-a1f5-4a8e-86e0-f44d64e54610", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-12 04:41:53.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b47dbb32-a1f5-4a8e-86e0-f44d64e54610","statusDesc":"OK"}'
2026-02-12 04:41:53.420 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41459/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:41:53.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:53.427 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:41:53.527 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:41:53.528 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63456/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:53.531 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1770871313420154746,"ephemeral":false}]'
2026-02-12 04:41:53.533 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/2/2
2026-02-12 04:41:53.533 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41459/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2026-02-12 04:41:53.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:53.536 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63456/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c2eb751a-fa1f-47e9-8f2b-095fbeea2421", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
2026-02-12 04:41:53.545 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"c2eb751a-fa1f-47e9-8f2b-095fbeea2421","statusDesc":"OK"}'
2026-02-12 04:41:53.546 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41459/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:41:53.550 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:53.550 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:41:53.651 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:41:53.651 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63456/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:53.654 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1770871313546149668,"ephemeral":false}]'
2026-02-12 04:41:53.655 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/9
2026-02-12 04:41:53.656 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41459/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
2026-02-12 04:41:53.659 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:53.659 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63456/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6355a3d8-1c4f-4c58-b842-31b5e768f5b2", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
2026-02-12 04:41:53.669 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"6355a3d8-1c4f-4c58-b842-31b5e768f5b2","statusDesc":"OK"}'
2026-02-12 04:41:53.669 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41459/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:41:53.674 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:53.674 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:41:53.774 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:41:53.775 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63456/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:53.778 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1770871313669455767,"ephemeral":false}]'
2026-02-12 04:41:53.781 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:41:53.782 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:41:53.782 DEBUG [src.node.waku_node] Stopping container with id 5f5fd406c97d
2026-02-12 04:41:54.338 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:41:54.338 DEBUG [src.node.waku_node] Stopping container with id fada3f91b06a
2026-02-12 04:41:55.058 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:41:55.059 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:41:55.066 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:41:55.073 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
