2026-02-12 04:44:52.170 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:44:52.170 DEBUG [tests.conftest] Running test: test_single_pubsub_topic[/waku/2/rs/2/0] with id: 2026-02-12_04-44-52__e70bd9b5-c661-4723-9a1b-0663279b3000
2026-02-12 04:44:52.171 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:44:52.171 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-12 04:44:52.171 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-12 04:44:52.179 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:44:52.179 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-12_04-44-52__e70bd9b5-c661-4723-9a1b-0663279b3000__wakuorg_nwaku:latest.log
2026-02-12 04:44:52.179 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:44:52.179 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:44:52.181 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:44:52.181 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.164.190
2026-02-12 04:44:52.181 DEBUG [src.node.docker_mananger] Generated ports ['48893', '48894', '48895', '48896', '48897']
2026-02-12 04:44:52.181 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-02-12 04:44:52.181 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-12 04:44:52.182 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:44:52.182 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:44:52.182 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:44:52.182 DEBUG [src.node.docker_mananger] docker run -i -t -p 48893:48893 -p 48894:48894 -p 48895:48895 -p 48896:48896 -p 48897:48897 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48895 --rest-port=48893 --tcp-port=48894 --discv5-udp-port=48896 --rest-address=0.0.0.0 --nat=extip:172.18.164.190 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fbaec5d80bf822e0a9ab0e77ea6942a6ffffcd6fcdfe1e89ae173eda77c7fd19 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48897 --metrics-logging=true --relay=true --filter=true
2026-02-12 04:44:52.366 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.164.190 waku cf52d2e93ada5ea12dad16e4eb4cb9ec8c169d76f9b7b37a5aaff5c99eb2bbeb
2026-02-12 04:44:52.399 DEBUG [src.node.docker_mananger] Container started with ID cf52d2e93ada. Setting up logs at ./log/docker/node1_2026-02-12_04-44-52__e70bd9b5-c661-4723-9a1b-0663279b3000__wakuorg_nwaku:latest.log
2026-02-12 04:44:52.401 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48893
2026-02-12 04:44:52.401 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:44:52.410 ERROR [src.node.docker_mananger] Max retries reached for container 8b18622d76dc. Exiting log stream.
2026-02-12 04:44:52.979 ERROR [src.node.docker_mananger] Max retries reached for container 64a32f409f25. Exiting log stream.
2026-02-12 04:44:53.401 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48893/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:53.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:44:53.405 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:44:53.405 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48893/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:53.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.190/tcp/48894/p2p/16Uiu2HAmRa47UVuh8yqpcuvoyafUdc1bnpwuYc2Lb56HTr9dSX3B","/ip4/172.18.164.190/tcp/48895/ws/p2p/16Uiu2HAmRa47UVuh8yqpcuvoyafUdc1bnpwuYc2Lb56HTr9dSX3B"],"enrUri":"enr:-L24QOgtjeh5u_8tNM7GcuhcX90cipCT52JJQkWay9Y7qXXpV6cmLseKqFhcF8f4D2BDvFkhyHgGKixziDE_CnSIP-cCgmlkgnY0gmlwhKwSpL6KbXVsdGlhZGRyc5YACASsEqS-Br7-AAoErBKkvga-_90DgnJzhQACAQAAiXNlY3AyNTZrMaEDv-RHjLQo5xSY8COKHXYyY7UXPD8eJvWwwrDtkWszAR6DdGNwgr7-g3VkcIK_AIV3YWt1MgU"}'
2026-02-12 04:44:53.407 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:44:53.414 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:44:53.414 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-12_04-44-52__e70bd9b5-c661-4723-9a1b-0663279b3000__wakuorg_nwaku:latest.log
2026-02-12 04:44:53.414 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:44:53.415 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:44:53.416 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:44:53.416 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.86.108
2026-02-12 04:44:53.416 DEBUG [src.node.docker_mananger] Generated ports ['60252', '60253', '60254', '60255', '60256']
2026-02-12 04:44:53.416 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-02-12 04:44:53.417 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-12 04:44:53.417 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:44:53.417 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:44:53.417 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:44:53.417 DEBUG [src.node.docker_mananger] docker run -i -t -p 60252:60252 -p 60253:60253 -p 60254:60254 -p 60255:60255 -p 60256:60256 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60254 --rest-port=60252 --tcp-port=60253 --discv5-udp-port=60255 --rest-address=0.0.0.0 --nat=extip:172.18.86.108 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=1fc4ab957bdbba2a6e2bcff5aff2cde81d80091cb78dbc3f67abad39b53a151c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60256 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QOgtjeh5u_8tNM7GcuhcX90cipCT52JJQkWay9Y7qXXpV6cmLseKqFhcF8f4D2BDvFkhyHgGKixziDE_CnSIP-cCgmlkgnY0gmlwhKwSpL6KbXVsdGlhZGRyc5YACASsEqS-Br7-AAoErBKkvga-_90DgnJzhQACAQAAiXNlY3AyNTZrMaEDv-RHjLQo5xSY8COKHXYyY7UXPD8eJvWwwrDtkWszAR6DdGNwgr7-g3VkcIK_AIV3YWt1MgU
2026-02-12 04:44:53.605 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.86.108 waku d0bdeb2870374f1b0f7d38bf98d99d9f8aad6ceec48655c20a670291d500dbc2
2026-02-12 04:44:53.639 DEBUG [src.node.docker_mananger] Container started with ID d0bdeb287037. Setting up logs at ./log/docker/node2_2026-02-12_04-44-52__e70bd9b5-c661-4723-9a1b-0663279b3000__wakuorg_nwaku:latest.log
2026-02-12 04:44:53.640 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60252
2026-02-12 04:44:53.640 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:44:54.641 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60252/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:54.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-12 04:44:54.654 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:44:54.656 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60252/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:54.660 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.108/tcp/60253/p2p/16Uiu2HAmUGisp7nQ6oLNAQWayJBikLY3WwHhnJ7tnHz2zKeSiAnd","/ip4/172.18.86.108/tcp/60254/ws/p2p/16Uiu2HAmUGisp7nQ6oLNAQWayJBikLY3WwHhnJ7tnHz2zKeSiAnd"],"enrUri":"enr:-L24QCpK-Kf27y45znRnI2T-uLTmNrI7n3xGfF5oqawB3c5YZFTzVGE2wY2EP0-ETPIFdspTcnYpsVxyWyD8V3qHgqUCgmlkgnY0gmlwhKwSVmyKbXVsdGlhZGRyc5YACASsElZsButdAAoErBJWbAbrXt0DgnJzhQACAQAAiXNlY3AyNTZrMaED6Aa3gQmgIpdAAc0brFzhYAmUt88XMbunltis3TVJobKDdGNwgutdg3VkcILrX4V3YWt1MgE"}'
2026-02-12 04:44:54.660 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:44:54.661 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60252/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.164.190/tcp/48894/p2p/16Uiu2HAmRa47UVuh8yqpcuvoyafUdc1bnpwuYc2Lb56HTr9dSX3B"]'
2026-02-12 04:44:54.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:44:54.664 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48893/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-12 04:44:54.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:44:54.667 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60252/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-12 04:44:54.669 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:44:54.670 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48893/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:44:54.674 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:44:54.675 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:44:54.775 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-12 04:44:54.776 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48893/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:54.779 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770871494670197692,"ephemeral":false,"proof":""}]'
2026-02-12 04:44:54.781 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:44:54.782 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60252/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:54.785 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770871494670197692,"ephemeral":false,"proof":""}]'
2026-02-12 04:44:54.788 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:44:54.789 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:44:54.789 DEBUG [src.node.waku_node] Stopping container with id cf52d2e93ada
2026-02-12 04:44:55.341 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:44:55.341 DEBUG [src.node.waku_node] Stopping container with id d0bdeb287037
2026-02-12 04:44:55.884 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:44:55.885 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:44:55.896 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:44:55.902 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
