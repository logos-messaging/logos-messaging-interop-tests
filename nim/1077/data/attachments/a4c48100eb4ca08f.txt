2026-02-12 04:41:30.005 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:41:30.007 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_very_large_request_id with id: 2026-02-12_04-41-30__3a9295ab-3b34-4685-b72d-0b038c71d27b
2026-02-12 04:41:30.007 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:41:30.008 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-12 04:41:30.008 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-12 04:41:30.017 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:41:30.017 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-12_04-41-30__3a9295ab-3b34-4685-b72d-0b038c71d27b__wakuorg_nwaku:latest.log
2026-02-12 04:41:30.017 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:41:30.017 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:41:30.019 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:41:30.020 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.170.70
2026-02-12 04:41:30.020 DEBUG [src.node.docker_mananger] Generated ports ['54303', '54304', '54305', '54306', '54307']
2026-02-12 04:41:30.020 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:41:30.020 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:41:30.020 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:41:30.020 DEBUG [src.node.docker_mananger] docker run -i -t -p 54303:54303 -p 54304:54304 -p 54305:54305 -p 54306:54306 -p 54307:54307 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54305 --rest-port=54303 --tcp-port=54304 --discv5-udp-port=54306 --rest-address=0.0.0.0 --nat=extip:172.18.170.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6fea6fc6b5d6dd8dfedb0bf88dff4ba6b9c1eabdc6d8ffedb3131316bd7965b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54307 --metrics-logging=true --relay=true --filter=true
2026-02-12 04:41:30.198 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.170.70 waku 4918b36bc0cf876e530d186c3728b837123a90658489a88ff71cbd1335f9b19e
2026-02-12 04:41:30.229 DEBUG [src.node.docker_mananger] Container started with ID 4918b36bc0cf. Setting up logs at ./log/docker/node1_2026-02-12_04-41-30__3a9295ab-3b34-4685-b72d-0b038c71d27b__wakuorg_nwaku:latest.log
2026-02-12 04:41:30.229 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54303
2026-02-12 04:41:30.230 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:41:30.242 ERROR [src.node.docker_mananger] Max retries reached for container 237992c38fab. Exiting log stream.
2026-02-12 04:41:30.829 ERROR [src.node.docker_mananger] Max retries reached for container 8957e137a334. Exiting log stream.
2026-02-12 04:41:31.230 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54303/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:31.233 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:41:31.233 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:41:31.234 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54303/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:31.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.70/tcp/54304/p2p/16Uiu2HAmQ48CsKA2W1XtK66t8LH4dZ4pjPjQP4fK7EteJUdYkaBM","/ip4/172.18.170.70/tcp/54305/ws/p2p/16Uiu2HAmQ48CsKA2W1XtK66t8LH4dZ4pjPjQP4fK7EteJUdYkaBM"],"enrUri":"enr:-L24QAOrGXfznM9DZ_Cb-cURZiYG406LCd5gH_ujPkgPoQYsNaGIdvr-rHZwUI1GOu3FFlnTvapPhJv0QizTIOJ9T9kCgmlkgnY0gmlwhKwSqkaKbXVsdGlhZGRyc5YACASsEqpGBtQgAAoErBKqRgbUId0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqV3L1wAuvrsm_VPGakhpNiqzQj7RZn1vCmMBFs9hCmSDdGNwgtQgg3VkcILUIoV3YWt1MgU"}'
2026-02-12 04:41:31.236 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:41:31.236 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-12 04:41:31.243 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:41:31.243 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-12_04-41-30__3a9295ab-3b34-4685-b72d-0b038c71d27b__wakuorg_nwaku:latest.log
2026-02-12 04:41:31.243 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:41:31.244 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:41:31.245 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:41:31.245 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.132.231
2026-02-12 04:41:31.245 DEBUG [src.node.docker_mananger] Generated ports ['17221', '17222', '17223', '17224', '17225']
2026-02-12 04:41:31.245 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:41:31.245 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:41:31.245 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:41:31.246 DEBUG [src.node.docker_mananger] docker run -i -t -p 17221:17221 -p 17222:17222 -p 17223:17223 -p 17224:17224 -p 17225:17225 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17223 --rest-port=17221 --tcp-port=17222 --discv5-udp-port=17224 --rest-address=0.0.0.0 --nat=extip:172.18.132.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=457db1eb5ea1f1caa1f9738b8ea3b3ac234349fde03aafb93a3e59ded80cfb2e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17225 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QAOrGXfznM9DZ_Cb-cURZiYG406LCd5gH_ujPkgPoQYsNaGIdvr-rHZwUI1GOu3FFlnTvapPhJv0QizTIOJ9T9kCgmlkgnY0gmlwhKwSqkaKbXVsdGlhZGRyc5YACASsEqpGBtQgAAoErBKqRgbUId0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqV3L1wAuvrsm_VPGakhpNiqzQj7RZn1vCmMBFs9hCmSDdGNwgtQgg3VkcILUIoV3YWt1MgU --filternode=/ip4/172.18.170.70/tcp/54304/p2p/16Uiu2HAmQ48CsKA2W1XtK66t8LH4dZ4pjPjQP4fK7EteJUdYkaBM
2026-02-12 04:41:31.426 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.132.231 waku 9eb100a48bff0c911bc98cc190061f3fce27bde47e6fd6a172af722ee01b9153
2026-02-12 04:41:31.456 DEBUG [src.node.docker_mananger] Container started with ID 9eb100a48bff. Setting up logs at ./log/docker/node2_2026-02-12_04-41-30__3a9295ab-3b34-4685-b72d-0b038c71d27b__wakuorg_nwaku:latest.log
2026-02-12 04:41:31.456 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17221
2026-02-12 04:41:31.456 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:41:32.457 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17221/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:32.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-12 04:41:32.461 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:41:32.461 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17221/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:32.463 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.231/tcp/17222/p2p/16Uiu2HAm3d7N2fH3dJoZ6KD3NWd4vvJiJ5JkWWGxsYhe8tZNutLm","/ip4/172.18.132.231/tcp/17223/ws/p2p/16Uiu2HAm3d7N2fH3dJoZ6KD3NWd4vvJiJ5JkWWGxsYhe8tZNutLm"],"enrUri":"enr:-L24QE3BU01RaenzfS7SbeDeLbRp-Q-xXJC1zagPxzCnj6yUFGoKvGZslkQqZhonEiMLfwG7YGNoJLOSSiQ8aWq0AHICgmlkgnY0gmlwhKwShOeKbXVsdGlhZGRyc5YACASsEoTnBkNGAAoErBKE5wZDR90DgnJzhQADAQAAiXNlY3AyNTZrMaECecuV2_VtLFg9Cc2BbZwAOPqJ2sDnLMCtwOngLvarMlaDdGNwgkNGg3VkcIJDSIV3YWt1MgA"}'
2026-02-12 04:41:32.463 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:41:32.464 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17221/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.170.70/tcp/54304/p2p/16Uiu2HAmQ48CsKA2W1XtK66t8LH4dZ4pjPjQP4fK7EteJUdYkaBM"]'
2026-02-12 04:41:32.491 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:32.492 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-12 04:41:32.492 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54303/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-12 04:41:32.504 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:32.506 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17221/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "cd28197a-18b0-4b86-b835-8ab29799abc0", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-12 04:41:32.515 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"cd28197a-18b0-4b86-b835-8ab29799abc0","statusDesc":"OK"}'
2026-02-12 04:41:32.516 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54303/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:41:32.523 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:32.523 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:41:32.624 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:41:32.624 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17221/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:32.627 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770871292516807640,"ephemeral":false}]'
2026-02-12 04:41:32.629 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:17221/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345678901234567890123456789012345678901234567890", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-12 04:41:32.637 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345678901234567890123456789012345678901234567890","statusDesc":"OK"}'
2026-02-12 04:41:32.637 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54303/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:41:32.640 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:32.641 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:41:32.741 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:41:32.741 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17221/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:32.744 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:17221/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
2026-02-12 04:41:32.747 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:41:32.748 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:41:32.748 DEBUG [src.node.waku_node] Stopping container with id 4918b36bc0cf
2026-02-12 04:41:33.339 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:41:33.340 DEBUG [src.node.waku_node] Stopping container with id 9eb100a48bff
2026-02-12 04:41:33.910 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:41:33.911 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:41:33.918 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:41:33.923 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
