2026-02-12 04:40:25.169 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:40:25.169 DEBUG [tests.conftest] Running test: test_light_push_with_extra_field with id: 2026-02-12_04-40-25__eae113c8-c2b3-4fcf-b957-0ae8f91b4543
2026-02-12 04:40:25.169 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:40:25.170 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-12 04:40:25.177 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:40:25.177 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-12_04-40-25__eae113c8-c2b3-4fcf-b957-0ae8f91b4543__wakuorg_nwaku:latest.log
2026-02-12 04:40:25.177 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:40:25.177 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:40:25.178 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:40:25.179 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.230.168
2026-02-12 04:40:25.179 DEBUG [src.node.docker_mananger] Generated ports ['41348', '41349', '41350', '41351', '41352']
2026-02-12 04:40:25.179 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:40:25.179 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:40:25.179 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:40:25.179 DEBUG [src.node.docker_mananger] docker run -i -t -p 41348:41348 -p 41349:41349 -p 41350:41350 -p 41351:41351 -p 41352:41352 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41350 --rest-port=41348 --tcp-port=41349 --discv5-udp-port=41351 --rest-address=0.0.0.0 --nat=extip:172.18.230.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ebf80ced8ef8d625aa1d5b0d90be272198feb7c1c1e508390fccdbf32b8cfbc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41352 --metrics-logging=true --lightpush=true --relay=true
2026-02-12 04:40:25.365 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.230.168 waku 6d7e46849ce5a01652dfdbf90091b33239aa251fa862b4cd7fda2990ac9fe85c
2026-02-12 04:40:25.395 DEBUG [src.node.docker_mananger] Container started with ID 6d7e46849ce5. Setting up logs at ./log/docker/receiving_node1_2026-02-12_04-40-25__eae113c8-c2b3-4fcf-b957-0ae8f91b4543__wakuorg_nwaku:latest.log
2026-02-12 04:40:25.395 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41348
2026-02-12 04:40:25.395 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:40:25.401 ERROR [src.node.docker_mananger] Max retries reached for container 7996abcad5c0. Exiting log stream.
2026-02-12 04:40:25.968 ERROR [src.node.docker_mananger] Max retries reached for container 0f488eab2b59. Exiting log stream.
2026-02-12 04:40:26.396 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41348/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:26.399 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:40:26.399 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:40:26.399 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41348/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:26.401 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.168/tcp/41349/p2p/16Uiu2HAmF7bZ1SdWj9FniGk2toDKPMH4nxT2imVQsa9ku45bZB7i","/ip4/172.18.230.168/tcp/41350/ws/p2p/16Uiu2HAmF7bZ1SdWj9FniGk2toDKPMH4nxT2imVQsa9ku45bZB7i"],"enrUri":"enr:-L24QP4pW6cBaT5nuQ12UCbmfbgCezT9CCe0XFk0EOXqrGDjA19jgLp6s5nDK-CCmRqBuyLeburGt87XEtyxsYezWtQCgmlkgnY0gmlwhKwS5qiKbXVsdGlhZGRyc5YACASsEuaoBqGFAAoErBLmqAahht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJIhHKNW2Pv9QYIrdqPKi4PZCcn3Er0ZFfje4NBNV8E2DdGNwgqGFg3VkcIKhh4V3YWt1Mgk"}'
2026-02-12 04:40:26.402 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:40:26.408 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:40:26.409 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-12_04-40-25__eae113c8-c2b3-4fcf-b957-0ae8f91b4543__wakuorg_nwaku:latest.log
2026-02-12 04:40:26.409 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:40:26.409 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:40:26.410 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:40:26.410 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.125.190
2026-02-12 04:40:26.411 DEBUG [src.node.docker_mananger] Generated ports ['6438', '6439', '6440', '6441', '6442']
2026-02-12 04:40:26.411 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:40:26.411 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:40:26.411 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:40:26.411 DEBUG [src.node.docker_mananger] docker run -i -t -p 6438:6438 -p 6439:6439 -p 6440:6440 -p 6441:6441 -p 6442:6442 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6440 --rest-port=6438 --tcp-port=6439 --discv5-udp-port=6441 --rest-address=0.0.0.0 --nat=extip:172.18.125.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d8ed6f17a0af8ae82e5f918fcac613f4bbd84432ef83bddb14c3bb7ab09a8f88 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6442 --metrics-logging=true --lightpush=false --relay=true
2026-02-12 04:40:26.597 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.125.190 waku 0def310504b2427b5d830085780e63d9fe33c804deeb01bdb7f48ea3d3588ab5
2026-02-12 04:40:26.628 DEBUG [src.node.docker_mananger] Container started with ID 0def310504b2. Setting up logs at ./log/docker/receiving_node2_2026-02-12_04-40-25__eae113c8-c2b3-4fcf-b957-0ae8f91b4543__wakuorg_nwaku:latest.log
2026-02-12 04:40:26.628 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6438
2026-02-12 04:40:26.628 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:40:27.629 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6438/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:27.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:40:27.632 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:40:27.633 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6438/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:27.635 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.190/tcp/6439/p2p/16Uiu2HAmRQQgKtX5C91LHPAe63PFNHBrbNux9oVyJQttT38q5ZT5","/ip4/172.18.125.190/tcp/6440/ws/p2p/16Uiu2HAmRQQgKtX5C91LHPAe63PFNHBrbNux9oVyJQttT38q5ZT5"],"enrUri":"enr:-L24QDtEU1OS43caRQwbLKmUu_EdabeCFTe7zIUSz94EvIT-CtNZFNkiH-c-mrRXTcPC3ATHcxx3b3bHcydTj1NfiXACgmlkgnY0gmlwhKwSfb6KbXVsdGlhZGRyc5YACASsEn2-BhknAAoErBJ9vgYZKN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvWu51TKHoudaAhu7oGM4ro0yJo0u3MMXCt64wdsZX-iDdGNwghkng3VkcIIZKYV3YWt1MgE"}'
2026-02-12 04:40:27.635 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:40:27.635 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6438/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.168/tcp/41349/p2p/16Uiu2HAmF7bZ1SdWj9FniGk2toDKPMH4nxT2imVQsa9ku45bZB7i"]'
2026-02-12 04:40:27.667 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:27.678 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:40:27.678 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-12_04-40-25__eae113c8-c2b3-4fcf-b957-0ae8f91b4543__wakuorg_nwaku:latest.log
2026-02-12 04:40:27.678 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:40:27.678 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:40:27.682 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:40:27.683 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.205.86
2026-02-12 04:40:27.684 DEBUG [src.node.docker_mananger] Generated ports ['52524', '52525', '52526', '52527', '52528']
2026-02-12 04:40:27.685 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:40:27.685 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:40:27.685 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:40:27.685 DEBUG [src.node.docker_mananger] docker run -i -t -p 52524:52524 -p 52525:52525 -p 52526:52526 -p 52527:52527 -p 52528:52528 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52526 --rest-port=52524 --tcp-port=52525 --discv5-udp-port=52527 --rest-address=0.0.0.0 --nat=extip:172.18.205.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcbdc12eccb2a8862ebdf6fe5230abbdb9fd6352bfca4ba0f36fe1ecd1febf1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52528 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QP4pW6cBaT5nuQ12UCbmfbgCezT9CCe0XFk0EOXqrGDjA19jgLp6s5nDK-CCmRqBuyLeburGt87XEtyxsYezWtQCgmlkgnY0gmlwhKwS5qiKbXVsdGlhZGRyc5YACASsEuaoBqGFAAoErBLmqAahht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJIhHKNW2Pv9QYIrdqPKi4PZCcn3Er0ZFfje4NBNV8E2DdGNwgqGFg3VkcIKhh4V3YWt1Mgk --lightpushnode=/ip4/172.18.230.168/tcp/41349/p2p/16Uiu2HAmF7bZ1SdWj9FniGk2toDKPMH4nxT2imVQsa9ku45bZB7i --lightpush=true --relay=true
2026-02-12 04:40:27.892 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.205.86 waku 977ffb2034996072cb5c7e3f494dd81c065ce41b9b1a2388f990d051745a93aa
2026-02-12 04:40:27.922 DEBUG [src.node.docker_mananger] Container started with ID 977ffb203499. Setting up logs at ./log/docker/lightpush_node1_2026-02-12_04-40-25__eae113c8-c2b3-4fcf-b957-0ae8f91b4543__wakuorg_nwaku:latest.log
2026-02-12 04:40:27.923 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52524
2026-02-12 04:40:27.924 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:40:28.924 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52524/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:28.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:40:28.928 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:40:28.929 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52524/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:28.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.86/tcp/52525/p2p/16Uiu2HAmCUyZgowcL8wEwWiwvmFfVhF1wpUiYx9LACMRBJfWKiBs","/ip4/172.18.205.86/tcp/52526/ws/p2p/16Uiu2HAmCUyZgowcL8wEwWiwvmFfVhF1wpUiYx9LACMRBJfWKiBs"],"enrUri":"enr:-L24QHqrqC32v36w8yBW_pVqrqrnjy5xX9N3zRgouoDl-8rYIjgzvUd4xsiigMGGvOgwT1tjgJelUW8iU-vYewO6o3ICgmlkgnY0gmlwhKwSzVaKbXVsdGlhZGRyc5YACASsEs1WBs0tAAoErBLNVgbNLt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_W9Nii-hkYl21YXU_3iWnc-_g2YZ5HbXLby1x7Us-9qDdGNwgs0tg3VkcILNL4V3YWt1Mgk"}'
2026-02-12 04:40:28.931 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:40:28.931 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52524/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.168/tcp/41349/p2p/16Uiu2HAmF7bZ1SdWj9FniGk2toDKPMH4nxT2imVQsa9ku45bZB7i"]'
2026-02-12 04:40:28.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:28.967 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52524/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.125.190/tcp/6439/p2p/16Uiu2HAmRQQgKtX5C91LHPAe63PFNHBrbNux9oVyJQttT38q5ZT5"]'
2026-02-12 04:40:28.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:28.996 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41348/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-12 04:40:29.001 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:29.001 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6438/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-12 04:40:29.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:29.006 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52524/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-12 04:40:29.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:29.012 DEBUG [src.steps.light_push] Lightpushing message
2026-02-12 04:40:29.013 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52524/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770871229012656662, "extraField": "extraValue"}}'
2026-02-12 04:40:29.017 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52524/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-12 04:40:29.024 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:40:29.025 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:40:29.025 DEBUG [src.node.waku_node] Stopping container with id 6d7e46849ce5
2026-02-12 04:40:29.576 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:40:29.577 DEBUG [src.node.waku_node] Stopping container with id 0def310504b2
2026-02-12 04:40:30.107 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:40:30.107 DEBUG [src.node.waku_node] Stopping container with id 977ffb203499
2026-02-12 04:40:30.390 ERROR [src.node.docker_mananger] Max retries reached for container 6d7e46849ce5. Exiting log stream.
2026-02-12 04:40:30.624 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:40:30.625 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:40:30.633 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:40:30.641 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:40:30.648 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
