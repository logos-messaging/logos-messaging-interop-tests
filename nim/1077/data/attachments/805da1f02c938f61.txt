2026-02-12 04:41:05.188 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:41:05.188 DEBUG [tests.conftest] Running test: test_relay_subscribe_to_single_pubsub_topic with id: 2026-02-12_04-41-05__8194e738-5951-4ef2-b07b-a5bb522e9d83
2026-02-12 04:41:05.189 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:41:05.189 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-12 04:41:05.189 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-12 04:41:05.197 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:41:05.197 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-12_04-41-05__8194e738-5951-4ef2-b07b-a5bb522e9d83__wakuorg_nwaku:latest.log
2026-02-12 04:41:05.197 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:41:05.197 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:41:05.200 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:41:05.200 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.207.70
2026-02-12 04:41:05.200 DEBUG [src.node.docker_mananger] Generated ports ['15742', '15743', '15744', '15745', '15746']
2026-02-12 04:41:05.200 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:41:05.200 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:41:05.201 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:41:05.201 DEBUG [src.node.docker_mananger] docker run -i -t -p 15742:15742 -p 15743:15743 -p 15744:15744 -p 15745:15745 -p 15746:15746 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15744 --rest-port=15742 --tcp-port=15743 --discv5-udp-port=15745 --rest-address=0.0.0.0 --nat=extip:172.18.207.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf968cf2651bcadaaef29e6c6864b97f23eaebcdae3fd051e2afbaf6ce8fa8ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15746 --metrics-logging=true --relay=true
2026-02-12 04:41:05.389 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.207.70 waku 21ff3f080cb12607a64c4ae8ab06c8aa90d674d7784fb7f9e3c2a78c492740bc
2026-02-12 04:41:05.416 DEBUG [src.node.docker_mananger] Container started with ID 21ff3f080cb1. Setting up logs at ./log/docker/node1_2026-02-12_04-41-05__8194e738-5951-4ef2-b07b-a5bb522e9d83__wakuorg_nwaku:latest.log
2026-02-12 04:41:05.417 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15742
2026-02-12 04:41:05.417 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:41:05.448 ERROR [src.node.docker_mananger] Max retries reached for container 9214baa87bbd. Exiting log stream.
2026-02-12 04:41:06.021 ERROR [src.node.docker_mananger] Max retries reached for container 36ead3c82a1f. Exiting log stream.
2026-02-12 04:41:06.417 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15742/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:06.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:41:06.421 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:41:06.421 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15742/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:06.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.70/tcp/15743/p2p/16Uiu2HAmLEeJGzR1Pkd2Zkq7X4budY4yBvqzDwHzaLCioTNGvhrR","/ip4/172.18.207.70/tcp/15744/ws/p2p/16Uiu2HAmLEeJGzR1Pkd2Zkq7X4budY4yBvqzDwHzaLCioTNGvhrR"],"enrUri":"enr:-L24QHo-jVR35BkwssAQIzwVJ8_fO5KFdP2VP_nqlVTwPvlkWDu7gpQ64aGzyBlVHhK6NA4HiMYFxBCNxCyG92cnGIICgmlkgnY0gmlwhKwSz0aKbXVsdGlhZGRyc5YACASsEs9GBj1_AAoErBLPRgY9gN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcKDiF8tXhe3hOFpRj66DMY7mXlAsjUEgjTIqZpDXXaqDdGNwgj1_g3VkcII9gYV3YWt1MgE"}'
2026-02-12 04:41:06.424 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:41:06.431 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:41:06.431 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-12_04-41-05__8194e738-5951-4ef2-b07b-a5bb522e9d83__wakuorg_nwaku:latest.log
2026-02-12 04:41:06.431 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:41:06.431 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:41:06.432 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:41:06.433 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.8
2026-02-12 04:41:06.433 DEBUG [src.node.docker_mananger] Generated ports ['7225', '7226', '7227', '7228', '7229']
2026-02-12 04:41:06.433 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:41:06.433 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:41:06.433 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:41:06.433 DEBUG [src.node.docker_mananger] docker run -i -t -p 7225:7225 -p 7226:7226 -p 7227:7227 -p 7228:7228 -p 7229:7229 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7227 --rest-port=7225 --tcp-port=7226 --discv5-udp-port=7228 --rest-address=0.0.0.0 --nat=extip:172.18.229.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=00fd000dbbcb0c65db450dfcab4bd2c748b24cf9af35bdeefc8abbe6333b9dea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7229 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QHo-jVR35BkwssAQIzwVJ8_fO5KFdP2VP_nqlVTwPvlkWDu7gpQ64aGzyBlVHhK6NA4HiMYFxBCNxCyG92cnGIICgmlkgnY0gmlwhKwSz0aKbXVsdGlhZGRyc5YACASsEs9GBj1_AAoErBLPRgY9gN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcKDiF8tXhe3hOFpRj66DMY7mXlAsjUEgjTIqZpDXXaqDdGNwgj1_g3VkcII9gYV3YWt1MgE
2026-02-12 04:41:06.613 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.8 waku 62c2142c76031e5742b6ef24e931f9a21b0a134e34409c60ade2fb8bade7104b
2026-02-12 04:41:06.642 DEBUG [src.node.docker_mananger] Container started with ID 62c2142c7603. Setting up logs at ./log/docker/node2_2026-02-12_04-41-05__8194e738-5951-4ef2-b07b-a5bb522e9d83__wakuorg_nwaku:latest.log
2026-02-12 04:41:06.643 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7225
2026-02-12 04:41:06.643 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:41:07.644 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7225/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:07.656 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:41:07.657 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:41:07.657 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7225/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:07.661 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.8/tcp/7226/p2p/16Uiu2HAm7bjfGeFc3anCyvSSvMj1zWsyZfvsRJ7w7ZsAvaEdwUKT","/ip4/172.18.229.8/tcp/7227/ws/p2p/16Uiu2HAm7bjfGeFc3anCyvSSvMj1zWsyZfvsRJ7w7ZsAvaEdwUKT"],"enrUri":"enr:-L24QFN9ho_UIqB0BIEjEkJ-SgoLRoLMVEpb3x-u4mBpwakvAiQpfl7_SoZnr6ssXFYGInowFBXApEfzLfaXLAqLfgQCgmlkgnY0gmlwhKwS5QiKbXVsdGlhZGRyc5YACASsEuUIBhw6AAoErBLlCAYcO90DgnJzhQADAQAAiXNlY3AyNTZrMaECtOA2gcHDLeCMkKN99DVUwVezAJXutyPuV6GdqzKqwoqDdGNwghw6g3VkcIIcPIV3YWt1MgE"}'
2026-02-12 04:41:07.662 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:41:07.662 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7225/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.207.70/tcp/15743/p2p/16Uiu2HAmLEeJGzR1Pkd2Zkq7X4budY4yBvqzDwHzaLCioTNGvhrR"]'
2026-02-12 04:41:07.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:07.667 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15742/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-12 04:41:07.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:07.672 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7225/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-12 04:41:07.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:07.678 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15742/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:41:07.683 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:07.684 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:41:07.784 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-12 04:41:07.784 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15742/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:07.786 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770871267678712832,"ephemeral":false,"proof":""}]'
2026-02-12 04:41:07.788 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:41:07.788 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7225/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:07.790 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770871267678712832,"ephemeral":false,"proof":""}]'
2026-02-12 04:41:07.793 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:41:07.794 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:41:07.794 DEBUG [src.node.waku_node] Stopping container with id 21ff3f080cb1
2026-02-12 04:41:08.330 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:41:08.330 DEBUG [src.node.waku_node] Stopping container with id 62c2142c7603
2026-02-12 04:41:08.848 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:41:08.851 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:41:08.856 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:41:08.862 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
