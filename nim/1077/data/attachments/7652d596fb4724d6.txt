2026-02-12 04:42:42.801 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:42:42.801 DEBUG [tests.conftest] Running test: test_store_with_long_string_pubsub_topic with id: 2026-02-12_04-42-42__a4e57a67-b7c1-4301-839a-1d6ee7f53386
2026-02-12 04:42:42.801 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:42:42.801 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-12 04:42:42.801 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-12 04:42:42.807 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:42:42.807 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-12_04-42-42__a4e57a67-b7c1-4301-839a-1d6ee7f53386__wakuorg_nwaku:latest.log
2026-02-12 04:42:42.807 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:42:42.807 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:42:42.809 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:42:42.809 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.35
2026-02-12 04:42:42.809 DEBUG [src.node.docker_mananger] Generated ports ['20668', '20669', '20670', '20671', '20672']
2026-02-12 04:42:42.809 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:42:42.809 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:42:42.809 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:42:42.810 DEBUG [src.node.docker_mananger] docker run -i -t -p 20668:20668 -p 20669:20669 -p 20670:20670 -p 20671:20671 -p 20672:20672 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20670 --rest-port=20668 --tcp-port=20669 --discv5-udp-port=20671 --rest-address=0.0.0.0 --nat=extip:172.18.71.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d9ba7fccb99dac6de68add3b50cf8e2a2bcd6b1acef30ddf274cf6be1be3cf2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20672 --metrics-logging=true --store=true --relay=true
2026-02-12 04:42:42.968 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.35 waku a79d979b18fdafde5c9103552e6d1227df9acc50e85f75331f2b7d48cc006ea8
2026-02-12 04:42:42.991 DEBUG [src.node.docker_mananger] Container started with ID a79d979b18fd. Setting up logs at ./log/docker/publishing_node1_2026-02-12_04-42-42__a4e57a67-b7c1-4301-839a-1d6ee7f53386__wakuorg_nwaku:latest.log
2026-02-12 04:42:42.992 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20668
2026-02-12 04:42:42.992 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:42:43.104 ERROR [src.node.docker_mananger] Max retries reached for container 3b39913ab32d. Exiting log stream.
2026-02-12 04:42:43.609 ERROR [src.node.docker_mananger] Max retries reached for container 9f661c7739f8. Exiting log stream.
2026-02-12 04:42:43.994 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20668/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:42:43.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:42:43.997 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:42:43.997 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20668/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:42:44.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.35/tcp/20669/p2p/16Uiu2HAmQNXiNW9znKdKzbNcP6LbfGbBFcFb6He7B5vwUbfws8Kt","/ip4/172.18.71.35/tcp/20670/ws/p2p/16Uiu2HAmQNXiNW9znKdKzbNcP6LbfGbBFcFb6He7B5vwUbfws8Kt"],"enrUri":"enr:-L24QNDaiYCcQfySm5673akC37NHUd9ER6lkvlyQbe2oE4j7dIfT1Sxrrxvsr91VpgwkTaASnzKrZttl6F_QeJY870MCgmlkgnY0gmlwhKwSRyOKbXVsdGlhZGRyc5YACASsEkcjBlC9AAoErBJHIwZQvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDrhTVCFlwV-MLrfaOghrtS5VioMOJb83uV0Pt2HnRGzODdGNwglC9g3VkcIJQv4V3YWt1MgM"}'
2026-02-12 04:42:44.000 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:42:44.006 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:42:44.006 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-12_04-42-42__a4e57a67-b7c1-4301-839a-1d6ee7f53386__wakuorg_nwaku:latest.log
2026-02-12 04:42:44.006 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:42:44.006 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:42:44.008 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:42:44.008 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.96.218
2026-02-12 04:42:44.008 DEBUG [src.node.docker_mananger] Generated ports ['3191', '3192', '3193', '3194', '3195']
2026-02-12 04:42:44.008 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:42:44.008 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:42:44.008 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:42:44.008 DEBUG [src.node.docker_mananger] docker run -i -t -p 3191:3191 -p 3192:3192 -p 3193:3193 -p 3194:3194 -p 3195:3195 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3193 --rest-port=3191 --tcp-port=3192 --discv5-udp-port=3194 --rest-address=0.0.0.0 --nat=extip:172.18.96.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af2059c90b37f60c59511b1ebdfcf9e1c7cf0bd59cf4be5f9f36303a687917cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3195 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNDaiYCcQfySm5673akC37NHUd9ER6lkvlyQbe2oE4j7dIfT1Sxrrxvsr91VpgwkTaASnzKrZttl6F_QeJY870MCgmlkgnY0gmlwhKwSRyOKbXVsdGlhZGRyc5YACASsEkcjBlC9AAoErBJHIwZQvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDrhTVCFlwV-MLrfaOghrtS5VioMOJb83uV0Pt2HnRGzODdGNwglC9g3VkcIJQv4V3YWt1MgM --storenode=/ip4/172.18.71.35/tcp/20669/p2p/16Uiu2HAmQNXiNW9znKdKzbNcP6LbfGbBFcFb6He7B5vwUbfws8Kt --store=true --relay=true
2026-02-12 04:42:44.156 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.96.218 waku 57c12e98052e9e9fb151694058c8c33d48f0112d093c77f22bd341dcfe177268
2026-02-12 04:42:44.179 DEBUG [src.node.docker_mananger] Container started with ID 57c12e98052e. Setting up logs at ./log/docker/store_node1_2026-02-12_04-42-42__a4e57a67-b7c1-4301-839a-1d6ee7f53386__wakuorg_nwaku:latest.log
2026-02-12 04:42:44.180 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3191
2026-02-12 04:42:44.180 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:42:45.181 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3191/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:42:45.185 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:42:45.185 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:42:45.185 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3191/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:42:45.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.218/tcp/3192/p2p/16Uiu2HAmQ1pkasoVRsmtWrguiGSDriqCzaPH9H7XiPwmtXepH7pH","/ip4/172.18.96.218/tcp/3193/ws/p2p/16Uiu2HAmQ1pkasoVRsmtWrguiGSDriqCzaPH9H7XiPwmtXepH7pH"],"enrUri":"enr:-L24QKX-6WHz2Brds8WH_kUUGSC1N0AofIlsOr5jz82M-F_hYu2opp72i6HWw0h5RRcza-RQ3ae7KER_DBWc-2eH-S8CgmlkgnY0gmlwhKwSYNqKbXVsdGlhZGRyc5YACASsEmDaBgx4AAoErBJg2gYMed0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqMbmeJ6OkH0TfVGc-sW7zR8gpirlm84Qcvjwm4RpfR6DdGNwggx4g3VkcIIMeoV3YWt1MgM"}'
2026-02-12 04:42:45.187 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:42:45.188 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3191/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.71.35/tcp/20669/p2p/16Uiu2HAmQNXiNW9znKdKzbNcP6LbfGbBFcFb6He7B5vwUbfws8Kt"]'
2026-02-12 04:42:45.190 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:45.191 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20668/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-12 04:42:45.193 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:45.193 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3191/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-12 04:42:45.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:45.195 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:45.196 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20668/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:45.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:45.201 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:45.402 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:45.402 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20668/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:45.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:45.407 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:45.608 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:45.608 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20668/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:45.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:45.614 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:45.816 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:45.816 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20668/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:45.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:45.821 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:46.022 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:46.023 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20668/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:46.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:46.028 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:46.229 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:46.229 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20668/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:46.234 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:46.234 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:46.435 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:46.435 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20668/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:46.441 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:46.441 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:46.641 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:46.642 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20668/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:46.647 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:46.647 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:46.976 DEBUG [tests.store.test_topics] Trying to get stored msg with url topic size million 
2026-02-12 04:42:46.976 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:46.976 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20668/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:46.981 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:46.981 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:47.184 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-12 04:42:47.389 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-02-12 04:42:52.280 ERROR [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-02-12 04:42:52.285 ERROR [tests.store.test_topics] store request with very long pubsub topic wasn't accepted 
2026-02-12 04:42:52.288 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:42:52.289 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:42:52.289 DEBUG [src.node.waku_node] Stopping container with id a79d979b18fd
2026-02-12 04:42:52.747 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:42:52.747 DEBUG [src.node.waku_node] Stopping container with id 57c12e98052e
2026-02-12 04:42:53.221 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:42:53.222 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:42:53.229 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:42:53.237 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
