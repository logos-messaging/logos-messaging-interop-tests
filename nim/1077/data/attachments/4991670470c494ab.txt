2026-02-12 04:41:20.903 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:41:20.904 DEBUG [tests.conftest] Running test: test_single_pubsub_topic[/waku/2/rs/8/0] with id: 2026-02-12_04-41-20__eef56d9d-a623-435f-a0ac-1a53b1d368e5
2026-02-12 04:41:20.904 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:41:20.904 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-12 04:41:20.905 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-12 04:41:20.911 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:41:20.912 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-12_04-41-20__eef56d9d-a623-435f-a0ac-1a53b1d368e5__wakuorg_nwaku:latest.log
2026-02-12 04:41:20.912 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:41:20.912 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:41:20.913 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:41:20.913 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.125.45
2026-02-12 04:41:20.913 DEBUG [src.node.docker_mananger] Generated ports ['57821', '57822', '57823', '57824', '57825']
2026-02-12 04:41:20.914 DEBUG [src.node.waku_node] Cluster id was resolved to: 8
2026-02-12 04:41:20.914 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-12 04:41:20.914 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:41:20.914 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:41:20.914 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:41:20.914 DEBUG [src.node.docker_mananger] docker run -i -t -p 57821:57821 -p 57822:57822 -p 57823:57823 -p 57824:57824 -p 57825:57825 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57823 --rest-port=57821 --tcp-port=57822 --discv5-udp-port=57824 --rest-address=0.0.0.0 --nat=extip:172.18.125.45 --peer-exchange=true --discv5-discovery=true --cluster-id=8 --nodekey=a922cebfb99da2bc5bfac8ca6aa9e3e1e8a0a1fe8979e4ede8eebc06132e2fce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57825 --metrics-logging=true --relay=true --filter=true
2026-02-12 04:41:21.095 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.125.45 waku 8ad6e1126b0152e2bcffed97da6a397604c545a160b0a980e708eb90e824b92e
2026-02-12 04:41:21.131 DEBUG [src.node.docker_mananger] Container started with ID 8ad6e1126b01. Setting up logs at ./log/docker/node1_2026-02-12_04-41-20__eef56d9d-a623-435f-a0ac-1a53b1d368e5__wakuorg_nwaku:latest.log
2026-02-12 04:41:21.131 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57821
2026-02-12 04:41:21.132 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:41:21.196 ERROR [src.node.docker_mananger] Max retries reached for container 116bde9c4365. Exiting log stream.
2026-02-12 04:41:21.721 ERROR [src.node.docker_mananger] Max retries reached for container f2080c128605. Exiting log stream.
2026-02-12 04:41:22.133 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57821/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:22.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:41:22.136 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:41:22.137 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57821/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:22.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.45/tcp/57822/p2p/16Uiu2HAm6kRemV66VVCZ3ZxDmyWwgWV2pspGRHHjDkPtunQqe9Vb","/ip4/172.18.125.45/tcp/57823/ws/p2p/16Uiu2HAm6kRemV66VVCZ3ZxDmyWwgWV2pspGRHHjDkPtunQqe9Vb"],"enrUri":"enr:-L24QNwbZbDyhPMQWy_w8dMqo5DJV9LPu_Rp3bX0HMYGv_vkHWfgAdOF-nJGfSINXKISuCzFKMA3NmOoEk0OybZKQKQCgmlkgnY0gmlwhKwSfS2KbXVsdGlhZGRyc5YACASsEn0tBuHeAAoErBJ9LQbh390DgnJzhQAIAQAAiXNlY3AyNTZrMaECqD5kC_LO4rd8BuoggZumq_tN9JdFPNcJmKWFe2EW0gKDdGNwguHeg3VkcILh4IV3YWt1MgU"}'
2026-02-12 04:41:22.139 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:41:22.146 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:41:22.146 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-12_04-41-20__eef56d9d-a623-435f-a0ac-1a53b1d368e5__wakuorg_nwaku:latest.log
2026-02-12 04:41:22.146 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:41:22.146 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:41:22.148 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:41:22.148 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.55.140
2026-02-12 04:41:22.148 DEBUG [src.node.docker_mananger] Generated ports ['8756', '8757', '8758', '8759', '8760']
2026-02-12 04:41:22.148 DEBUG [src.node.waku_node] Cluster id was resolved to: 8
2026-02-12 04:41:22.148 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-12 04:41:22.148 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:41:22.148 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:41:22.148 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:41:22.149 DEBUG [src.node.docker_mananger] docker run -i -t -p 8756:8756 -p 8757:8757 -p 8758:8758 -p 8759:8759 -p 8760:8760 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8758 --rest-port=8756 --tcp-port=8757 --discv5-udp-port=8759 --rest-address=0.0.0.0 --nat=extip:172.18.55.140 --peer-exchange=true --discv5-discovery=true --cluster-id=8 --nodekey=1555ee05a6aaca968ac96063ba5b4b5e2a46fefdeb3df56330db8abf388adbbc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8760 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNwbZbDyhPMQWy_w8dMqo5DJV9LPu_Rp3bX0HMYGv_vkHWfgAdOF-nJGfSINXKISuCzFKMA3NmOoEk0OybZKQKQCgmlkgnY0gmlwhKwSfS2KbXVsdGlhZGRyc5YACASsEn0tBuHeAAoErBJ9LQbh390DgnJzhQAIAQAAiXNlY3AyNTZrMaECqD5kC_LO4rd8BuoggZumq_tN9JdFPNcJmKWFe2EW0gKDdGNwguHeg3VkcILh4IV3YWt1MgU
2026-02-12 04:41:22.330 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.55.140 waku d6db71916530430e67f9dee6832d0c139a5602d1fa445fd1adfdc28c3b011062
2026-02-12 04:41:22.360 DEBUG [src.node.docker_mananger] Container started with ID d6db71916530. Setting up logs at ./log/docker/node2_2026-02-12_04-41-20__eef56d9d-a623-435f-a0ac-1a53b1d368e5__wakuorg_nwaku:latest.log
2026-02-12 04:41:22.361 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8756
2026-02-12 04:41:22.362 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:41:23.362 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8756/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:23.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-12 04:41:23.374 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:41:23.374 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8756/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:23.379 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.140/tcp/8757/p2p/16Uiu2HAmL3hNmaHcK58ogYTnVa3SCWCu7QaxLGcTjwhWh4U2DPNf","/ip4/172.18.55.140/tcp/8758/ws/p2p/16Uiu2HAmL3hNmaHcK58ogYTnVa3SCWCu7QaxLGcTjwhWh4U2DPNf"],"enrUri":"enr:-L24QIFWraRjyxyQKdOpEqlVob0onWkhmF2kJxlmexBc_vlcGWoTxQW4Vd1SZI3g2Gu43vECR2_xmX_iFi3cPMZY2RYCgmlkgnY0gmlwhKwSN4yKbXVsdGlhZGRyc5YACASsEjeMBiI1AAoErBI3jAYiNt0DgnJzhQAIAQAAiXNlY3AyNTZrMaEDbdL5VlfZQw4h2ddPP_gogqLd098XPqqkoyjCdXg0gJCDdGNwgiI1g3VkcIIiN4V3YWt1MgE"}'
2026-02-12 04:41:23.380 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:41:23.382 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8756/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.125.45/tcp/57822/p2p/16Uiu2HAm6kRemV66VVCZ3ZxDmyWwgWV2pspGRHHjDkPtunQqe9Vb"]'
2026-02-12 04:41:23.386 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:23.386 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57821/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/8/0"]'
2026-02-12 04:41:23.388 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:23.389 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8756/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/8/0"]'
2026-02-12 04:41:23.391 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:23.391 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57821/relay/v1/messages/%2Fwaku%2F2%2Frs%2F8%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:41:23.396 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:23.396 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:41:23.497 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-12 04:41:23.498 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57821/relay/v1/messages/%2Fwaku%2F2%2Frs%2F8%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:23.500 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770871283391800818,"ephemeral":false,"proof":""}]'
2026-02-12 04:41:23.503 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:41:23.503 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8756/relay/v1/messages/%2Fwaku%2F2%2Frs%2F8%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:23.506 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770871283391800818,"ephemeral":false,"proof":""}]'
2026-02-12 04:41:23.509 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:41:23.510 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:41:23.510 DEBUG [src.node.waku_node] Stopping container with id 8ad6e1126b01
2026-02-12 04:41:24.082 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:41:24.082 DEBUG [src.node.waku_node] Stopping container with id d6db71916530
2026-02-12 04:41:24.635 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:41:24.636 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:41:24.643 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:41:24.648 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
