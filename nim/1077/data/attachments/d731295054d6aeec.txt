2026-02-12 04:40:58.982 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:40:58.982 DEBUG [tests.conftest] Running test: test_publish_on_not_subscribed_content_topic_works with id: 2026-02-12_04-40-58__7297caba-8447-4a33-ae83-3a21811a6b47
2026-02-12 04:40:58.983 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:40:58.983 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-12 04:40:58.983 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-12 04:40:58.991 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:40:58.991 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-12_04-40-58__7297caba-8447-4a33-ae83-3a21811a6b47__wakuorg_nwaku:latest.log
2026-02-12 04:40:58.991 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:40:58.991 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:40:58.993 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:40:58.993 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.25.191
2026-02-12 04:40:58.993 DEBUG [src.node.docker_mananger] Generated ports ['55769', '55770', '55771', '55772', '55773']
2026-02-12 04:40:58.993 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:40:58.993 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:40:58.994 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:40:58.994 DEBUG [src.node.docker_mananger] docker run -i -t -p 55769:55769 -p 55770:55770 -p 55771:55771 -p 55772:55772 -p 55773:55773 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55771 --rest-port=55769 --tcp-port=55770 --discv5-udp-port=55772 --rest-address=0.0.0.0 --nat=extip:172.18.25.191 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a89f891cadc7c1caaadf40fd4ac244aadaa4cfb9a0d6422390d7f35bfdaf5fc7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55773 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-02-12 04:40:59.174 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.25.191 waku f4ce5308e127c59539a4a88441c8b18f5a27b45f0a1c426d595c6312087786e3
2026-02-12 04:40:59.206 DEBUG [src.node.docker_mananger] Container started with ID f4ce5308e127. Setting up logs at ./log/docker/node1_2026-02-12_04-40-58__7297caba-8447-4a33-ae83-3a21811a6b47__wakuorg_nwaku:latest.log
2026-02-12 04:40:59.207 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55769
2026-02-12 04:40:59.207 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:40:59.241 ERROR [src.node.docker_mananger] Max retries reached for container d9102830c62f. Exiting log stream.
2026-02-12 04:40:59.790 ERROR [src.node.docker_mananger] Max retries reached for container 2001c6bc9cb6. Exiting log stream.
2026-02-12 04:41:00.209 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55769/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:00.212 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:41:00.212 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:41:00.212 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55769/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:00.215 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.191/tcp/55770/p2p/16Uiu2HAmFhJY7QmSTqVkGkvnAJaLfxcXJatG7ZpdVz7W57T51Ho9","/ip4/172.18.25.191/tcp/55771/ws/p2p/16Uiu2HAmFhJY7QmSTqVkGkvnAJaLfxcXJatG7ZpdVz7W57T51Ho9"],"enrUri":"enr:-L24QFwAd0FDlvZoAAFNgbrsKfFC2vkiX_0ePR8uX9TkkhyVAWkb_gT13zwgYaVOsMfcqGQEBUGiuptfz4nF_Og2ie4CgmlkgnY0gmlwhKwSGb-KbXVsdGlhZGRyc5YACASsEhm_BtnaAAoErBIZvwbZ290DgnJzhQACAQAAiXNlY3AyNTZrMaEDLSrJOPF5r2DbkZ7fh4tihQV0h47Eh08tzG95Z3Z8L7SDdGNwgtnag3VkcILZ3IV3YWt1MgU"}'
2026-02-12 04:41:00.215 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:41:00.222 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:41:00.222 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-12_04-40-58__7297caba-8447-4a33-ae83-3a21811a6b47__wakuorg_nwaku:latest.log
2026-02-12 04:41:00.222 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:41:00.222 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:41:00.223 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:41:00.223 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.169
2026-02-12 04:41:00.224 DEBUG [src.node.docker_mananger] Generated ports ['42600', '42601', '42602', '42603', '42604']
2026-02-12 04:41:00.224 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:41:00.224 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:41:00.224 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:41:00.224 DEBUG [src.node.docker_mananger] docker run -i -t -p 42600:42600 -p 42601:42601 -p 42602:42602 -p 42603:42603 -p 42604:42604 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42602 --rest-port=42600 --tcp-port=42601 --discv5-udp-port=42603 --rest-address=0.0.0.0 --nat=extip:172.18.108.169 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6e60a02928c9e4eec02d9b2d8ce79e6c8365dee166ef02a18b40263b4f3d143e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42604 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QFwAd0FDlvZoAAFNgbrsKfFC2vkiX_0ePR8uX9TkkhyVAWkb_gT13zwgYaVOsMfcqGQEBUGiuptfz4nF_Og2ie4CgmlkgnY0gmlwhKwSGb-KbXVsdGlhZGRyc5YACASsEhm_BtnaAAoErBIZvwbZ290DgnJzhQACAQAAiXNlY3AyNTZrMaEDLSrJOPF5r2DbkZ7fh4tihQV0h47Eh08tzG95Z3Z8L7SDdGNwgtnag3VkcILZ3IV3YWt1MgU --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-02-12 04:41:00.413 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.169 waku 86b81e2607b82dbec3127283b827c9622882249a667fdb1db6f71815aeb5ff5c
2026-02-12 04:41:00.446 DEBUG [src.node.docker_mananger] Container started with ID 86b81e2607b8. Setting up logs at ./log/docker/node2_2026-02-12_04-40-58__7297caba-8447-4a33-ae83-3a21811a6b47__wakuorg_nwaku:latest.log
2026-02-12 04:41:00.446 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42600
2026-02-12 04:41:00.446 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:41:01.447 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42600/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:01.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-12 04:41:01.466 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:41:01.466 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42600/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:41:01.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.169/tcp/42601/p2p/16Uiu2HAkyM9RArjkuCsq2KjMJuCjg7LS8VcSn8sPPrcuWfR5pCf5","/ip4/172.18.108.169/tcp/42602/ws/p2p/16Uiu2HAkyM9RArjkuCsq2KjMJuCjg7LS8VcSn8sPPrcuWfR5pCf5"],"enrUri":"enr:-L24QPfs8hOgwyGZb5yZRuOhf963LjDCLdhVkUJm6QNdm5mhPQBOhImAX98pAuszE86yQ6ISJ4a66Mj_RqX56kdjlbsCgmlkgnY0gmlwhKwSbKmKbXVsdGlhZGRyc5YACASsEmypBqZpAAoErBJsqQamat0DgnJzhQACAQAAiXNlY3AyNTZrMaECOkXeDOPfrUykhm1QBLgpWj6-ijq1MtccCeAduTJOVcSDdGNwgqZpg3VkcIKma4V3YWt1MgE"}'
2026-02-12 04:41:01.470 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:41:01.471 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42600/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.25.191/tcp/55770/p2p/16Uiu2HAmFhJY7QmSTqVkGkvnAJaLfxcXJatG7ZpdVz7W57T51Ho9"]'
2026-02-12 04:41:01.473 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:01.474 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55769/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-12 04:41:01.476 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:01.476 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42600/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-12 04:41:01.479 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:01.479 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55769/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:41:01.482 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:01.482 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42600/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:41:01.485 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:41:01.486 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:41:01.487 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:41:01.488 DEBUG [src.node.waku_node] Stopping container with id f4ce5308e127
2026-02-12 04:41:02.085 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:41:02.086 DEBUG [src.node.waku_node] Stopping container with id 86b81e2607b8
2026-02-12 04:41:02.605 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:41:02.606 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:41:02.611 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:41:02.616 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
