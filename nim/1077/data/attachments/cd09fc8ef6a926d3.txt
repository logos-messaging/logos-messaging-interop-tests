2026-02-12 04:42:05.480 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:42:05.481 DEBUG [tests.conftest] Running test: test_store_without_pubsub_topic_and_content_topic with id: 2026-02-12_04-42-05__771351d2-fc60-407a-93a6-a97aedb782de
2026-02-12 04:42:05.481 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:42:05.482 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-12 04:42:05.482 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-12 04:42:05.491 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:42:05.492 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-12_04-42-05__771351d2-fc60-407a-93a6-a97aedb782de__wakuorg_nwaku:latest.log
2026-02-12 04:42:05.492 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:42:05.492 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:42:05.496 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:42:05.496 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.99.206
2026-02-12 04:42:05.496 DEBUG [src.node.docker_mananger] Generated ports ['6703', '6704', '6705', '6706', '6707']
2026-02-12 04:42:05.497 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:42:05.497 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:42:05.497 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:42:05.497 DEBUG [src.node.docker_mananger] docker run -i -t -p 6703:6703 -p 6704:6704 -p 6705:6705 -p 6706:6706 -p 6707:6707 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6705 --rest-port=6703 --tcp-port=6704 --discv5-udp-port=6706 --rest-address=0.0.0.0 --nat=extip:172.18.99.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc55d31ead1aeb08a2edd51c2c0ceadeebd45dca5c7fefef295d8d0c3fcd3bce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6707 --metrics-logging=true --store=true --relay=true
2026-02-12 04:42:05.693 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.99.206 waku f2e697e38b73d168acd4abf489dc3e77949c80ac552bfa1b79586ea0e212e5f5
2026-02-12 04:42:05.710 ERROR [src.node.docker_mananger] Max retries reached for container 0caf51abdc9d. Exiting log stream.
2026-02-12 04:42:05.728 DEBUG [src.node.docker_mananger] Container started with ID f2e697e38b73. Setting up logs at ./log/docker/publishing_node1_2026-02-12_04-42-05__771351d2-fc60-407a-93a6-a97aedb782de__wakuorg_nwaku:latest.log
2026-02-12 04:42:05.729 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6703
2026-02-12 04:42:05.729 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:42:06.319 ERROR [src.node.docker_mananger] Max retries reached for container 68a2919eca37. Exiting log stream.
2026-02-12 04:42:06.729 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6703/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:42:06.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:42:06.733 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:42:06.733 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6703/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:42:06.735 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.206/tcp/6704/p2p/16Uiu2HAmNJvSTbZahuetwTxhhzY6tyauBmXssng94R2WDhH8FTgp","/ip4/172.18.99.206/tcp/6705/ws/p2p/16Uiu2HAmNJvSTbZahuetwTxhhzY6tyauBmXssng94R2WDhH8FTgp"],"enrUri":"enr:-L24QLHxkPjFDDmVCkaKmLDofOg6DWR2Ezm0gGy4SUEKqGUEXAoHKlmc15D5Ne6Q8alHrolZ6FncHJYlE4ihdrUu_hUCgmlkgnY0gmlwhKwSY86KbXVsdGlhZGRyc5YACASsEmPOBhowAAoErBJjzgYaMd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDj3DUv3JfcX5QGXBN1r_T5VvSWPHJM639eNBhwub6yU2DdGNwghowg3VkcIIaMoV3YWt1MgM"}'
2026-02-12 04:42:06.735 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:42:06.742 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:42:06.743 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-12_04-42-05__771351d2-fc60-407a-93a6-a97aedb782de__wakuorg_nwaku:latest.log
2026-02-12 04:42:06.743 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:42:06.743 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:42:06.744 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:42:06.744 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.133.44
2026-02-12 04:42:06.744 DEBUG [src.node.docker_mananger] Generated ports ['29592', '29593', '29594', '29595', '29596']
2026-02-12 04:42:06.745 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:42:06.745 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:42:06.745 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:42:06.745 DEBUG [src.node.docker_mananger] docker run -i -t -p 29592:29592 -p 29593:29593 -p 29594:29594 -p 29595:29595 -p 29596:29596 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29594 --rest-port=29592 --tcp-port=29593 --discv5-udp-port=29595 --rest-address=0.0.0.0 --nat=extip:172.18.133.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dad8cde5ccffcde76decbcdd5beed5370f744a2225b19070459ad29ad42c821d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29596 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLHxkPjFDDmVCkaKmLDofOg6DWR2Ezm0gGy4SUEKqGUEXAoHKlmc15D5Ne6Q8alHrolZ6FncHJYlE4ihdrUu_hUCgmlkgnY0gmlwhKwSY86KbXVsdGlhZGRyc5YACASsEmPOBhowAAoErBJjzgYaMd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDj3DUv3JfcX5QGXBN1r_T5VvSWPHJM639eNBhwub6yU2DdGNwghowg3VkcIIaMoV3YWt1MgM --storenode=/ip4/172.18.99.206/tcp/6704/p2p/16Uiu2HAmNJvSTbZahuetwTxhhzY6tyauBmXssng94R2WDhH8FTgp --store=true --relay=true
2026-02-12 04:42:06.931 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.133.44 waku febafaf19414d8f9df16776806b72a47b50315dbcf18cd1cab15088d5b5f367d
2026-02-12 04:42:06.963 DEBUG [src.node.docker_mananger] Container started with ID febafaf19414. Setting up logs at ./log/docker/store_node1_2026-02-12_04-42-05__771351d2-fc60-407a-93a6-a97aedb782de__wakuorg_nwaku:latest.log
2026-02-12 04:42:06.964 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29592
2026-02-12 04:42:06.966 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:42:07.966 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29592/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:42:07.970 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:42:07.971 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:42:07.971 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29592/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:42:07.973 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.44/tcp/29593/p2p/16Uiu2HAmP4mbYTvvXvDpyA5qUS1pyZ6DKpvHsrb4YWfATGkR5agL","/ip4/172.18.133.44/tcp/29594/ws/p2p/16Uiu2HAmP4mbYTvvXvDpyA5qUS1pyZ6DKpvHsrb4YWfATGkR5agL"],"enrUri":"enr:-L24QJVDarbtR232LRIktGuveiV4aWtO6CZQg8hiZm3JSmObEf7AQcx4rIGDyKs5FTiNOatLEvmId9abUKBihRFpEVkCgmlkgnY0gmlwhKwShSyKbXVsdGlhZGRyc5YACASsEoUsBnOZAAoErBKFLAZzmt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmqxjLN_TTBAiILKC85nCgspy_D2ID6AvXkATYa7QTk2DdGNwgnOZg3VkcIJzm4V3YWt1MgM"}'
2026-02-12 04:42:07.974 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:42:07.974 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29592/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.206/tcp/6704/p2p/16Uiu2HAmNJvSTbZahuetwTxhhzY6tyauBmXssng94R2WDhH8FTgp"]'
2026-02-12 04:42:07.977 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:07.977 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-12 04:42:07.979 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:07.980 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29592/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-12 04:42:07.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:07.982 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:07.982 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:07.987 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:07.988 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:08.189 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:08.189 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:08.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:08.196 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:08.397 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:08.397 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:08.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:08.403 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:08.604 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:08.604 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:08.609 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:08.609 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:08.810 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:08.811 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:08.816 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:08.817 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:09.017 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:09.018 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:09.023 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:09.023 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:09.224 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:09.224 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:09.229 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:09.230 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:09.431 DEBUG [src.steps.store] Relaying message
2026-02-12 04:42:09.432 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:42:09.438 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:42:09.439 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-12 04:42:09.640 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6703/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:42:09.643 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xaa8419836c3755a17149a2872857b70e633d4801a7bc6eaa3fd9f04a3f7e8b1b"},{"messageHash":"0xa5efcb1f792dfbd2c99b287d73a65f8785dc16120060dc0a8f40ad46502d705b"},{"messageHash":"0x73251aca38994f4cb1436a42767900f748c77a3bb3244576564510b4918bbd34"},{"messageHash":"0x5498cc5b83b2dfa5a68220314490f061901df866afbc4f817f35657cbbac41e3"},{"messageHash":"0x9407e8c82fe3e684f8031d1547deb3a274c5d48ff247a774708189e2f01a1328"},{"messageHash":"0x581df57f3abaa79144668977e7a9e304e8810b1c48cf7df7f3dbfc0c834583c2"},{"messageHash":"0x1a29415be53cb450524ce07faf3120f8f0d491b9f02a70bfb87314f5d8f2fbd2"},{"messageHash":"0x864078dbfe408ebd37bf4f096b58effe35a0d90679debd9a60245928fa52cac5"}]}'
2026-02-12 04:42:09.644 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29592/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:42:09.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xaa8419836c3755a17149a2872857b70e633d4801a7bc6eaa3fd9f04a3f7e8b1b"},{"messageHash":"0xa5efcb1f792dfbd2c99b287d73a65f8785dc16120060dc0a8f40ad46502d705b"},{"messageHash":"0x73251aca38994f4cb1436a42767900f748c77a3bb3244576564510b4918bbd34"},{"messageHash":"0x5498cc5b83b2dfa5a68220314490f061901df866afbc4f817f35657cbbac41e3"},{"messageHash":"0x9407e8c82fe3e684f8031d1547deb3a274c5d48ff247a774708189e2f01a1328"},{"messageHash":"0x581df57f3abaa79144668977e7a9e304e8810b1c48cf7df7f3dbfc0c834583c2"},{"messageHash":"0x1a29415be53cb450524ce07faf3120f8f0d491b9f02a70bfb87314f5d8f2fbd2"},{"messageHash":"0x864078dbfe408ebd37bf4f096b58effe35a0d90679debd9a60245928fa52cac5"}]}'
2026-02-12 04:42:09.649 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:42:09.650 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:42:09.650 DEBUG [src.node.waku_node] Stopping container with id f2e697e38b73
2026-02-12 04:42:10.215 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:42:10.216 DEBUG [src.node.waku_node] Stopping container with id febafaf19414
2026-02-12 04:42:10.749 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:42:10.750 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:42:10.756 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:42:10.764 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
