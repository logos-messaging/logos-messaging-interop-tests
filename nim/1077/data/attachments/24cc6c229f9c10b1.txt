2026-02-12 04:40:03.970 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:40:03.970 DEBUG [tests.conftest] Running test: test_filter_resubscribe_to_unsubscribed_topics with id: 2026-02-12_04-40-03__5ac8fe4d-a1a5-4805-946b-52e921b7d6ed
2026-02-12 04:40:03.970 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:40:03.971 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-12 04:40:03.971 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-12 04:40:03.977 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:40:03.978 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-12_04-40-03__5ac8fe4d-a1a5-4805-946b-52e921b7d6ed__wakuorg_nwaku:latest.log
2026-02-12 04:40:03.978 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:40:03.978 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:40:03.979 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:40:03.979 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.4
2026-02-12 04:40:03.979 DEBUG [src.node.docker_mananger] Generated ports ['13137', '13138', '13139', '13140', '13141']
2026-02-12 04:40:03.980 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:40:03.980 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:40:03.980 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:40:03.980 DEBUG [src.node.docker_mananger] docker run -i -t -p 13137:13137 -p 13138:13138 -p 13139:13139 -p 13140:13140 -p 13141:13141 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13139 --rest-port=13137 --tcp-port=13138 --discv5-udp-port=13140 --rest-address=0.0.0.0 --nat=extip:172.18.121.4 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c8e0d75ea180ca421e7f3b580bc83089c3af5b068b0df1e1aaa5e2b0f4fa37c7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13141 --metrics-logging=true --relay=true --filter=true
2026-02-12 04:40:04.161 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.4 waku a46d3df4ef04c0976ba03dcac39397261ce6c80165e6ee8f0801f578941597da
2026-02-12 04:40:04.191 DEBUG [src.node.docker_mananger] Container started with ID a46d3df4ef04. Setting up logs at ./log/docker/node1_2026-02-12_04-40-03__5ac8fe4d-a1a5-4805-946b-52e921b7d6ed__wakuorg_nwaku:latest.log
2026-02-12 04:40:04.192 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13137
2026-02-12 04:40:04.193 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:40:04.224 ERROR [src.node.docker_mananger] Max retries reached for container 4d1bace7d497. Exiting log stream.
2026-02-12 04:40:04.778 ERROR [src.node.docker_mananger] Max retries reached for container c2444264864f. Exiting log stream.
2026-02-12 04:40:05.194 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13137/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:05.197 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:40:05.197 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:40:05.197 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13137/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:05.200 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.4/tcp/13138/p2p/16Uiu2HAmJCEKhD7wJ5CaGtZoEXqTXkSv37apQJyR2FwNqPQaSqs4","/ip4/172.18.121.4/tcp/13139/ws/p2p/16Uiu2HAmJCEKhD7wJ5CaGtZoEXqTXkSv37apQJyR2FwNqPQaSqs4"],"enrUri":"enr:-L24QOEyYLPua5OscONM9sXsiVwQMvwBo4TjYLTn-zdL-TOvCupG1gciXj5SZ_PTeqdAj93-OY1pLoS5E3bIAiMyDPwCgmlkgnY0gmlwhKwSeQSKbXVsdGlhZGRyc5YACASsEnkEBjNSAAoErBJ5BAYzU90DgnJzhQADAQAAiXNlY3AyNTZrMaEDUks9C0sk5n1Ni-bqK5PrhYl0rsQYOC8G9GMHWQPoou-DdGNwgjNSg3VkcIIzVIV3YWt1MgU"}'
2026-02-12 04:40:05.200 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:40:05.200 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-12 04:40:05.207 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:40:05.207 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-12_04-40-03__5ac8fe4d-a1a5-4805-946b-52e921b7d6ed__wakuorg_nwaku:latest.log
2026-02-12 04:40:05.207 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:40:05.207 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:40:05.208 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:40:05.208 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.195.162
2026-02-12 04:40:05.209 DEBUG [src.node.docker_mananger] Generated ports ['2806', '2807', '2808', '2809', '2810']
2026-02-12 04:40:05.209 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:40:05.209 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:40:05.209 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:40:05.209 DEBUG [src.node.docker_mananger] docker run -i -t -p 2806:2806 -p 2807:2807 -p 2808:2808 -p 2809:2809 -p 2810:2810 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2808 --rest-port=2806 --tcp-port=2807 --discv5-udp-port=2809 --rest-address=0.0.0.0 --nat=extip:172.18.195.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=81c2ac779b3c5bbba0c6deb97667562041edadff5cabec1c837f28aec8da3aed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2810 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QOEyYLPua5OscONM9sXsiVwQMvwBo4TjYLTn-zdL-TOvCupG1gciXj5SZ_PTeqdAj93-OY1pLoS5E3bIAiMyDPwCgmlkgnY0gmlwhKwSeQSKbXVsdGlhZGRyc5YACASsEnkEBjNSAAoErBJ5BAYzU90DgnJzhQADAQAAiXNlY3AyNTZrMaEDUks9C0sk5n1Ni-bqK5PrhYl0rsQYOC8G9GMHWQPoou-DdGNwgjNSg3VkcIIzVIV3YWt1MgU --filternode=/ip4/172.18.121.4/tcp/13138/p2p/16Uiu2HAmJCEKhD7wJ5CaGtZoEXqTXkSv37apQJyR2FwNqPQaSqs4
2026-02-12 04:40:05.394 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.195.162 waku a380da9cf1231c30c40a5186aeed9225205ec8151a03cffe943e19306fc292ef
2026-02-12 04:40:05.426 DEBUG [src.node.docker_mananger] Container started with ID a380da9cf123. Setting up logs at ./log/docker/node2_2026-02-12_04-40-03__5ac8fe4d-a1a5-4805-946b-52e921b7d6ed__wakuorg_nwaku:latest.log
2026-02-12 04:40:05.426 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2806
2026-02-12 04:40:05.426 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:40:06.428 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2806/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:06.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-12 04:40:06.432 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:40:06.432 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2806/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:06.435 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.162/tcp/2807/p2p/16Uiu2HAmNv8ENzxNCjkTGXvr4qZ8wp4B3Vxt1dd4AXqZrBtvw54j","/ip4/172.18.195.162/tcp/2808/ws/p2p/16Uiu2HAmNv8ENzxNCjkTGXvr4qZ8wp4B3Vxt1dd4AXqZrBtvw54j"],"enrUri":"enr:-L24QGa4uZPey3GU1-3RigSigTwsfCDkpKrdguuAlES97nK6faQ1aJ8YXlyXYOgGjuwPwg9cp2nXo4u9ifvpXqxuAZACgmlkgnY0gmlwhKwSw6KKbXVsdGlhZGRyc5YACASsEsOiBgr3AAoErBLDogYK-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmHV-COhquaqZ7-dQCRAeyzJXX0JIus9YgL68k4n47giDdGNwggr3g3VkcIIK-YV3YWt1MgA"}'
2026-02-12 04:40:06.435 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:40:06.435 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2806/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.121.4/tcp/13138/p2p/16Uiu2HAmJCEKhD7wJ5CaGtZoEXqTXkSv37apQJyR2FwNqPQaSqs4"]'
2026-02-12 04:40:06.467 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:06.467 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-12 04:40:06.468 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13137/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-12 04:40:06.480 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:06.481 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2806/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f9cf2f34-053c-45da-8951-b8f0254205b5", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-12 04:40:06.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f9cf2f34-053c-45da-8951-b8f0254205b5","statusDesc":"OK"}'
2026-02-12 04:40:06.493 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13137/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:40:06.500 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:06.500 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:40:06.601 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:40:06.601 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2806/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:06.604 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770871206493698038,"ephemeral":false}]'
2026-02-12 04:40:06.606 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:2806/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-12 04:40:06.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2026-02-12 04:40:06.615 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13137/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:40:06.618 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:06.618 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:40:06.719 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:40:06.719 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2806/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:06.721 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:2806/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
2026-02-12 04:40:06.723 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13137/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-12 04:40:06.725 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:06.726 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2806/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f01e17b9-eb9d-41b3-8da2-c8aec656af59", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-12 04:40:06.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f01e17b9-eb9d-41b3-8da2-c8aec656af59","statusDesc":"OK"}'
2026-02-12 04:40:06.735 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13137/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:40:06.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:06.739 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:40:06.839 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:40:06.840 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2806/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:06.842 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770871206735203860,"ephemeral":false}]'
2026-02-12 04:40:06.846 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:40:06.847 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:40:06.847 DEBUG [src.node.waku_node] Stopping container with id a46d3df4ef04
2026-02-12 04:40:07.391 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:40:07.393 DEBUG [src.node.waku_node] Stopping container with id a380da9cf123
2026-02-12 04:40:07.911 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:40:07.913 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:40:07.919 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:40:07.925 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
