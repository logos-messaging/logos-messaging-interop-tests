2026-02-12 04:44:48.384 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:44:48.384 DEBUG [tests.conftest] Running test: test_single_content_topic[/app/20/sometopic/someencoding] with id: 2026-02-12_04-44-48__ac721709-4431-4007-94b4-c3955ff55568
2026-02-12 04:44:48.384 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:44:48.385 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-12 04:44:48.385 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-12 04:44:48.393 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:44:48.393 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-12_04-44-48__ac721709-4431-4007-94b4-c3955ff55568__wakuorg_nwaku:latest.log
2026-02-12 04:44:48.393 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:44:48.393 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:44:48.395 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:44:48.395 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.173.130
2026-02-12 04:44:48.395 DEBUG [src.node.docker_mananger] Generated ports ['64402', '64403', '64404', '64405', '64406']
2026-02-12 04:44:48.396 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:44:48.396 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:44:48.396 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:44:48.396 DEBUG [src.node.docker_mananger] docker run -i -t -p 64402:64402 -p 64403:64403 -p 64404:64404 -p 64405:64405 -p 64406:64406 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64404 --rest-port=64402 --tcp-port=64403 --discv5-udp-port=64405 --rest-address=0.0.0.0 --nat=extip:172.18.173.130 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ee4e6d18a184b13b85361fd902f76da9e66cd92ff5d9e8738ff52badc5ef9cb3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64406 --metrics-logging=true --relay=true --filter=true --content-topic=/app/20/sometopic/someencoding
2026-02-12 04:44:48.584 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.173.130 waku 8b18622d76dcc62f33090fc219d10c67f2f3ed94e390e79f1e43a0a058534ba3
2026-02-12 04:44:48.615 DEBUG [src.node.docker_mananger] Container started with ID 8b18622d76dc. Setting up logs at ./log/docker/node1_2026-02-12_04-44-48__ac721709-4431-4007-94b4-c3955ff55568__wakuorg_nwaku:latest.log
2026-02-12 04:44:48.615 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64402
2026-02-12 04:44:48.615 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:44:48.629 ERROR [src.node.docker_mananger] Max retries reached for container 09a8b200e17e. Exiting log stream.
2026-02-12 04:44:49.182 ERROR [src.node.docker_mananger] Max retries reached for container d938b0d0f234. Exiting log stream.
2026-02-12 04:44:49.616 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64402/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:49.619 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:44:49.619 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:44:49.619 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64402/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:49.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.130/tcp/64403/p2p/16Uiu2HAmSv2c94oKe6tZuMJC8PseYv2Z9xEUhgc1DMHr7Xp6HH1C","/ip4/172.18.173.130/tcp/64404/ws/p2p/16Uiu2HAmSv2c94oKe6tZuMJC8PseYv2Z9xEUhgc1DMHr7Xp6HH1C"],"enrUri":"enr:-L24QI_JFLx2EVfwELWiPsFWfVKH5rNqPfs4xvWkmVuHw6t2XpficbU7fqhZHUGJUAdZDUDTFfI2pkqudijlbjdhhogCgmlkgnY0gmlwhKwSrYKKbXVsdGlhZGRyc5YACASsEq2CBvuTAAoErBKtggb7lN0DgnJzhQACAQAAiXNlY3AyNTZrMaED093hSG03WjtTk1PNhv8RcCRuyq7j5GmJNvT6Wr1D6fuDdGNwgvuTg3VkcIL7lYV3YWt1MgU"}'
2026-02-12 04:44:49.622 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:44:49.629 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:44:49.629 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-12_04-44-48__ac721709-4431-4007-94b4-c3955ff55568__wakuorg_nwaku:latest.log
2026-02-12 04:44:49.629 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:44:49.630 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:44:49.631 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:44:49.631 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.140
2026-02-12 04:44:49.631 DEBUG [src.node.docker_mananger] Generated ports ['52678', '52679', '52680', '52681', '52682']
2026-02-12 04:44:49.632 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:44:49.632 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:44:49.632 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:44:49.632 DEBUG [src.node.docker_mananger] docker run -i -t -p 52678:52678 -p 52679:52679 -p 52680:52680 -p 52681:52681 -p 52682:52682 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52680 --rest-port=52678 --tcp-port=52679 --discv5-udp-port=52681 --rest-address=0.0.0.0 --nat=extip:172.18.71.140 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=41debd3cdeb2ea1233badd8ec9afbf3406b88cffde39324ea86a7ea61f7c4dc1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52682 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QI_JFLx2EVfwELWiPsFWfVKH5rNqPfs4xvWkmVuHw6t2XpficbU7fqhZHUGJUAdZDUDTFfI2pkqudijlbjdhhogCgmlkgnY0gmlwhKwSrYKKbXVsdGlhZGRyc5YACASsEq2CBvuTAAoErBKtggb7lN0DgnJzhQACAQAAiXNlY3AyNTZrMaED093hSG03WjtTk1PNhv8RcCRuyq7j5GmJNvT6Wr1D6fuDdGNwgvuTg3VkcIL7lYV3YWt1MgU --content-topic=/app/20/sometopic/someencoding
2026-02-12 04:44:49.832 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.140 waku 64a32f409f2550c30b471300e2fc63943ab900440e9270a554266247c4f2b526
2026-02-12 04:44:49.863 DEBUG [src.node.docker_mananger] Container started with ID 64a32f409f25. Setting up logs at ./log/docker/node2_2026-02-12_04-44-48__ac721709-4431-4007-94b4-c3955ff55568__wakuorg_nwaku:latest.log
2026-02-12 04:44:49.863 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52678
2026-02-12 04:44:49.864 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:44:50.866 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52678/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:50.877 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-12 04:44:50.879 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:44:50.879 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52678/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:50.883 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.140/tcp/52679/p2p/16Uiu2HAmPRMmkbG6SoNyXL5nZosMHXzp47dWoTuAkGa7rZ9q96o6","/ip4/172.18.71.140/tcp/52680/ws/p2p/16Uiu2HAmPRMmkbG6SoNyXL5nZosMHXzp47dWoTuAkGa7rZ9q96o6"],"enrUri":"enr:-L24QHhzOTACYPAvEmmG-0pKvxAO3wY2ii9AApRYqw3XjbZuScYp766RA0MmwlihpdyCSXGg0Ba04gdupPb1hk4ZrhACgmlkgnY0gmlwhKwSR4yKbXVsdGlhZGRyc5YACASsEkeMBs3HAAoErBJHjAbNyN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDn_KlgyTKD-s3hcfy8ruGQg6eQK2jAtolHkOKNegwC-WDdGNwgs3Hg3VkcILNyYV3YWt1MgE"}'
2026-02-12 04:44:50.884 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:44:50.885 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52678/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.173.130/tcp/64403/p2p/16Uiu2HAmSv2c94oKe6tZuMJC8PseYv2Z9xEUhgc1DMHr7Xp6HH1C"]'
2026-02-12 04:44:50.889 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:44:50.890 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64402/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/20/sometopic/someencoding"]'
2026-02-12 04:44:50.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:44:50.893 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52678/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/20/sometopic/someencoding"]'
2026-02-12 04:44:50.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:44:50.896 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64402/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:44:50.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:44:50.901 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:44:51.001 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-12 04:44:51.002 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64402/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:51.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1770871490895987119,"ephemeral":false,"proof":""}]'
2026-02-12 04:44:51.007 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:44:51.007 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52678/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:44:51.009 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1770871490895987119,"ephemeral":false,"proof":""}]'
2026-02-12 04:44:51.012 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:44:51.014 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:44:51.014 DEBUG [src.node.waku_node] Stopping container with id 8b18622d76dc
2026-02-12 04:44:51.596 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:44:51.598 DEBUG [src.node.waku_node] Stopping container with id 64a32f409f25
2026-02-12 04:44:52.154 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:44:52.155 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:44:52.161 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:44:52.166 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
