2026-02-12 04:40:33.547 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-12 04:40:33.548 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_from_single_pubsub_topic with id: 2026-02-12_04-40-33__8a5985c7-bb82-4ef7-be73-7c3faa169e7f
2026-02-12 04:40:33.548 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-12 04:40:33.548 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-12 04:40:33.548 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-12 04:40:33.556 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:40:33.556 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-12_04-40-33__8a5985c7-bb82-4ef7-be73-7c3faa169e7f__wakuorg_nwaku:latest.log
2026-02-12 04:40:33.556 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:40:33.556 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:40:33.558 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:40:33.558 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.218.1
2026-02-12 04:40:33.558 DEBUG [src.node.docker_mananger] Generated ports ['14464', '14465', '14466', '14467', '14468']
2026-02-12 04:40:33.558 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:40:33.558 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:40:33.558 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:40:33.559 DEBUG [src.node.docker_mananger] docker run -i -t -p 14464:14464 -p 14465:14465 -p 14466:14466 -p 14467:14467 -p 14468:14468 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14466 --rest-port=14464 --tcp-port=14465 --discv5-udp-port=14467 --rest-address=0.0.0.0 --nat=extip:172.18.218.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=164affb9a5a98b31d3f7dbdd868bf3c88cdb6aa1e5f9da4123ccaee5cbda3d2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14468 --metrics-logging=true --relay=true
2026-02-12 04:40:33.752 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.218.1 waku 82799b98f4d7a7eeb482574320ba9a5eb5dd8a505bfa8d6f627805ba63cde335
2026-02-12 04:40:33.773 ERROR [src.node.docker_mananger] Max retries reached for container 103165837b41. Exiting log stream.
2026-02-12 04:40:33.784 DEBUG [src.node.docker_mananger] Container started with ID 82799b98f4d7. Setting up logs at ./log/docker/node1_2026-02-12_04-40-33__8a5985c7-bb82-4ef7-be73-7c3faa169e7f__wakuorg_nwaku:latest.log
2026-02-12 04:40:33.785 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14464
2026-02-12 04:40:33.786 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:40:34.342 ERROR [src.node.docker_mananger] Max retries reached for container 93bf60de9191. Exiting log stream.
2026-02-12 04:40:34.787 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14464/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:34.790 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:40:34.790 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:40:34.791 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14464/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:34.793 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.1/tcp/14465/p2p/16Uiu2HAmHBXPxdh2Hofxgz52m47vW22fH7HaAHRWYqWfwffYCR2a","/ip4/172.18.218.1/tcp/14466/ws/p2p/16Uiu2HAmHBXPxdh2Hofxgz52m47vW22fH7HaAHRWYqWfwffYCR2a"],"enrUri":"enr:-L24QGOX4xm1t5Or3WdofYT2T3k0YOcasiHXN3rJlVlpVBPgInlOX75zh6_ySecHGGDPzyeFZRpwgFbpuetdETxXFlwCgmlkgnY0gmlwhKwS2gGKbXVsdGlhZGRyc5YACASsEtoBBjiBAAoErBLaAQY4gt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQ0FGnahDEKp8rzknVZwdxl_SY8IqSN7gYeVHAUL0KqODdGNwgjiBg3VkcII4g4V3YWt1MgE"}'
2026-02-12 04:40:34.793 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:40:34.800 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-12 04:40:34.800 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-12_04-40-33__8a5985c7-bb82-4ef7-be73-7c3faa169e7f__wakuorg_nwaku:latest.log
2026-02-12 04:40:34.801 DEBUG [src.node.waku_node] Starting Node...
2026-02-12 04:40:34.801 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-12 04:40:34.802 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-12 04:40:34.802 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.128.230
2026-02-12 04:40:34.802 DEBUG [src.node.docker_mananger] Generated ports ['13603', '13604', '13605', '13606', '13607']
2026-02-12 04:40:34.803 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-12 04:40:34.803 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-12 04:40:34.803 DEBUG [src.node.waku_node] Using volumes []
2026-02-12 04:40:34.803 DEBUG [src.node.docker_mananger] docker run -i -t -p 13603:13603 -p 13604:13604 -p 13605:13605 -p 13606:13606 -p 13607:13607 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13605 --rest-port=13603 --tcp-port=13604 --discv5-udp-port=13606 --rest-address=0.0.0.0 --nat=extip:172.18.128.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=15d7ea7237f8c33c01fd3ddfcfc2ec1cebcdabccfedf2dda84a4f6a86bdfabf6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13607 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGOX4xm1t5Or3WdofYT2T3k0YOcasiHXN3rJlVlpVBPgInlOX75zh6_ySecHGGDPzyeFZRpwgFbpuetdETxXFlwCgmlkgnY0gmlwhKwS2gGKbXVsdGlhZGRyc5YACASsEtoBBjiBAAoErBLaAQY4gt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQ0FGnahDEKp8rzknVZwdxl_SY8IqSN7gYeVHAUL0KqODdGNwgjiBg3VkcII4g4V3YWt1MgE
2026-02-12 04:40:35.029 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.128.230 waku 314d46921f1034d5f0cd2183f407d474114cfa8da44b9228161d7ddda91d7b98
2026-02-12 04:40:35.061 DEBUG [src.node.docker_mananger] Container started with ID 314d46921f10. Setting up logs at ./log/docker/node2_2026-02-12_04-40-33__8a5985c7-bb82-4ef7-be73-7c3faa169e7f__wakuorg_nwaku:latest.log
2026-02-12 04:40:35.062 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13603
2026-02-12 04:40:35.063 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-12 04:40:36.063 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13603/health" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:36.076 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-12 04:40:36.077 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-12 04:40:36.079 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13603/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:36.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.230/tcp/13604/p2p/16Uiu2HAmLA7JDRRxGrmExQCaHv3Ms3nbZgtQrwfzeEmnenPk4HKd","/ip4/172.18.128.230/tcp/13605/ws/p2p/16Uiu2HAmLA7JDRRxGrmExQCaHv3Ms3nbZgtQrwfzeEmnenPk4HKd"],"enrUri":"enr:-L24QBaxRqmqNt1N3UyJQ7kJ_e5fp9JoawpLM-s2LPWYVHvzCAiDNx_iez2f2coW63tUkcEtpDtokM4jNX9AuMjTfnECgmlkgnY0gmlwhKwSgOaKbXVsdGlhZGRyc5YACASsEoDmBjUkAAoErBKA5gY1Jd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDb3eBxgjxaAqaoIfZhqxyJkyk6byswCJrkHi3IKsHgSCDdGNwgjUkg3VkcII1JoV3YWt1MgE"}'
2026-02-12 04:40:36.084 INFO [src.node.waku_node] REST service is ready !!
2026-02-12 04:40:36.085 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13603/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.218.1/tcp/14465/p2p/16Uiu2HAmHBXPxdh2Hofxgz52m47vW22fH7HaAHRWYqWfwffYCR2a"]'
2026-02-12 04:40:36.087 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:36.088 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14464/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-12 04:40:36.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:36.093 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13603/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-12 04:40:36.098 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:36.101 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14464/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:40:36.105 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:36.106 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-12 04:40:36.206 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-12 04:40:36.206 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14464/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:36.209 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770871236100875264,"ephemeral":false,"proof":""}]'
2026-02-12 04:40:36.211 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-12 04:40:36.211 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13603/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-12 04:40:36.213 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770871236100875264,"ephemeral":false,"proof":""}]'
2026-02-12 04:40:36.215 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:14464/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-12 04:40:36.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:36.219 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:13603/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-12 04:40:36.224 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-12 04:40:36.225 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14464/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-12 04:40:36.227 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14464/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/3/1'
2026-02-12 04:40:36.228 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-12 04:40:36.229 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-12 04:40:36.230 DEBUG [src.node.waku_node] Stopping container with id 82799b98f4d7
2026-02-12 04:40:36.780 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:40:36.780 DEBUG [src.node.waku_node] Stopping container with id 314d46921f10
2026-02-12 04:40:37.329 DEBUG [src.node.waku_node] Container stopped.
2026-02-12 04:40:37.329 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-12 04:40:37.335 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-12 04:40:37.341 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
