2026-02-14 04:36:57.880 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-14 04:36:57.881 DEBUG [tests.conftest] Running test: test_sender_uses_auto_api_receiver_uses_regular_api with id: 2026-02-14_04-36-57__cdc4e741-c726-46e3-b3cf-4d082f452d8a
2026-02-14 04:36:57.881 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-14 04:36:57.883 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-14 04:36:57.883 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-14 04:36:57.896 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:36:57.897 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-14_04-36-57__cdc4e741-c726-46e3-b3cf-4d082f452d8a__wakuorg_nwaku:latest.log
2026-02-14 04:36:57.897 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:36:57.898 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:36:57.901 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:36:57.901 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.63.14
2026-02-14 04:36:57.902 DEBUG [src.node.docker_mananger] Generated ports ['58774', '58775', '58776', '58777', '58778']
2026-02-14 04:36:57.902 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-14 04:36:57.902 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:36:57.903 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:36:57.903 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:36:57.903 DEBUG [src.node.docker_mananger] docker run -i -t -p 58774:58774 -p 58775:58775 -p 58776:58776 -p 58777:58777 -p 58778:58778 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58776 --rest-port=58774 --tcp-port=58775 --discv5-udp-port=58777 --rest-address=0.0.0.0 --nat=extip:172.18.63.14 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a8149d1cd92bddfaab4a91fee4db0244bbbdb012daa8dcebaf9a809abbbe9daf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58778 --metrics-logging=true --relay=true --filter=true --num-shards-in-network=1
2026-02-14 04:36:58.111 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.63.14 waku 2fbe9b25ab5f192f61f9b0a44bc6abd3f50182b327f96f6088eff8bf2cbb5e41
2026-02-14 04:36:58.160 DEBUG [src.node.docker_mananger] Container started with ID 2fbe9b25ab5f. Setting up logs at ./log/docker/node1_2026-02-14_04-36-57__cdc4e741-c726-46e3-b3cf-4d082f452d8a__wakuorg_nwaku:latest.log
2026-02-14 04:36:58.161 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58774
2026-02-14 04:36:58.162 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:36:58.411 ERROR [src.node.docker_mananger] Max retries reached for container 2ac4ba5786a8. Exiting log stream.
2026-02-14 04:36:58.721 ERROR [src.node.docker_mananger] Max retries reached for container 4fcc655eeb25. Exiting log stream.
2026-02-14 04:36:59.162 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58774/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:36:59.165 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:36:59.166 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:36:59.166 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58774/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:36:59.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.14/tcp/58775/p2p/16Uiu2HAm74HS5Tv94WZVUFBYcgzy3XgHZUF5NJ7XHtDozz3HMFSX","/ip4/172.18.63.14/tcp/58776/ws/p2p/16Uiu2HAm74HS5Tv94WZVUFBYcgzy3XgHZUF5NJ7XHtDozz3HMFSX"],"enrUri":"enr:-L24QILvA1lBi8NWOg2Pi6OzQ0Af2-8-sBM1eJddX3VV2LP3KKLaO4wIqAP1-UKAbkZ6aethB9V8MUE9b1nEZd6cidgCgmlkgnY0gmlwhKwSPw6KbXVsdGlhZGRyc5YACASsEj8OBuWXAAoErBI_DgblmN0DgnJzhQACAQAAiXNlY3AyNTZrMaECrNGNZupUuk1_M9O-OK45DYh_1WWy3l4_yIP4WfF1MeCDdGNwguWXg3VkcILlmYV3YWt1MgU"}'
2026-02-14 04:36:59.169 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:36:59.176 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:36:59.176 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-14_04-36-57__cdc4e741-c726-46e3-b3cf-4d082f452d8a__wakuorg_nwaku:latest.log
2026-02-14 04:36:59.176 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:36:59.176 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:36:59.178 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:36:59.178 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.72.142
2026-02-14 04:36:59.178 DEBUG [src.node.docker_mananger] Generated ports ['24372', '24373', '24374', '24375', '24376']
2026-02-14 04:36:59.179 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-14 04:36:59.179 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:36:59.179 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:36:59.179 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:36:59.179 DEBUG [src.node.docker_mananger] docker run -i -t -p 24372:24372 -p 24373:24373 -p 24374:24374 -p 24375:24375 -p 24376:24376 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24374 --rest-port=24372 --tcp-port=24373 --discv5-udp-port=24375 --rest-address=0.0.0.0 --nat=extip:172.18.72.142 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e03dd139d5e1b2a97b4c339ea70f63ecceac500cf64ede37cdea7fa9e1c1d914 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24376 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QILvA1lBi8NWOg2Pi6OzQ0Af2-8-sBM1eJddX3VV2LP3KKLaO4wIqAP1-UKAbkZ6aethB9V8MUE9b1nEZd6cidgCgmlkgnY0gmlwhKwSPw6KbXVsdGlhZGRyc5YACASsEj8OBuWXAAoErBI_DgblmN0DgnJzhQACAQAAiXNlY3AyNTZrMaECrNGNZupUuk1_M9O-OK45DYh_1WWy3l4_yIP4WfF1MeCDdGNwguWXg3VkcILlmYV3YWt1MgU --num-shards-in-network=1
2026-02-14 04:36:59.384 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.72.142 waku 2f81afec1d49b9ce2181066b1812b5f99372c4227fe0cd0db745357b7af6913b
2026-02-14 04:36:59.434 DEBUG [src.node.docker_mananger] Container started with ID 2f81afec1d49. Setting up logs at ./log/docker/node2_2026-02-14_04-36-57__cdc4e741-c726-46e3-b3cf-4d082f452d8a__wakuorg_nwaku:latest.log
2026-02-14 04:36:59.435 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24372
2026-02-14 04:36:59.435 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:37:00.436 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24372/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:37:00.441 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"PartiallyConnected","protocolsHealth":[{"Relay":"READY"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:37:00.442 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:37:00.443 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24372/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:37:00.446 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.72.142/tcp/24373/p2p/16Uiu2HAm31LPVzawxwHc7VJchjWrod3Vf1sKuprGtKFqPhGkf3EK","/ip4/172.18.72.142/tcp/24374/ws/p2p/16Uiu2HAm31LPVzawxwHc7VJchjWrod3Vf1sKuprGtKFqPhGkf3EK"],"enrUri":"enr:-L24QAfpUptO3tjUzcZwETsxdpFNDTYYT_ZpbeoGcy4sMYz0X_PMBEEy2Us_rHOdmtp0qgIQZZ17iKFn1g_mRnxtuEICgmlkgnY0gmlwhKwSSI6KbXVsdGlhZGRyc5YACASsEkiOBl81AAoErBJIjgZfNt0DgnJzhQACAQAAiXNlY3AyNTZrMaECcKFncmxNAK0481UYwJ0fxlYyTRpIEi7c90ZFKOshwkyDdGNwgl81g3VkcIJfN4V3YWt1MgE"}'
2026-02-14 04:37:00.446 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:37:00.446 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24372/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.14/tcp/58775/p2p/16Uiu2HAm74HS5Tv94WZVUFBYcgzy3XgHZUF5NJ7XHtDozz3HMFSX"]'
2026-02-14 04:37:00.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:37:00.450 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58774/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-14 04:37:00.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:37:00.453 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24372/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-14 04:37:00.455 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:37:00.456 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58774/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:37:00.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:37:00.461 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-14 04:37:00.562 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:37:00.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1771043820455897141,"ephemeral":false,"proof":""}]'
2026-02-14 04:37:00.566 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-14 04:37:00.568 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-14 04:37:00.568 DEBUG [src.node.waku_node] Stopping container with id 2fbe9b25ab5f
2026-02-14 04:37:00.833 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:37:00.834 DEBUG [src.node.waku_node] Stopping container with id 2f81afec1d49
2026-02-14 04:37:01.086 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:37:01.090 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-14 04:37:01.099 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:37:01.105 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
