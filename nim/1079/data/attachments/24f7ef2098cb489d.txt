2026-02-14 04:31:59.466 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-14 04:31:59.467 DEBUG [tests.conftest] Running test: test_filter_get_message_after_node_pauses_and_pauses with id: 2026-02-14_04-31-59__7ac0e207-73ef-4e91-93a0-c10b60a1ccbe
2026-02-14 04:31:59.468 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-14 04:31:59.468 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-14 04:31:59.469 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-14 04:31:59.477 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:31:59.477 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-14_04-31-59__7ac0e207-73ef-4e91-93a0-c10b60a1ccbe__wakuorg_nwaku:latest.log
2026-02-14 04:31:59.477 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:31:59.477 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:31:59.478 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:31:59.479 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.184.78
2026-02-14 04:31:59.479 DEBUG [src.node.docker_mananger] Generated ports ['57826', '57827', '57828', '57829', '57830']
2026-02-14 04:31:59.479 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:31:59.479 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:31:59.479 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:31:59.479 DEBUG [src.node.docker_mananger] docker run -i -t -p 57826:57826 -p 57827:57827 -p 57828:57828 -p 57829:57829 -p 57830:57830 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57828 --rest-port=57826 --tcp-port=57827 --discv5-udp-port=57829 --rest-address=0.0.0.0 --nat=extip:172.18.184.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5af5eec6a080db0fa31eabff91846ef6ff46d7a6abc3ae396bec4ebba72a2df6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57830 --metrics-logging=true --relay=true --filter=true
2026-02-14 04:31:59.668 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.184.78 waku 9ac8546de505f29606f7edb8387badf87520eddce3fb273e2d9d33c789594fa6
2026-02-14 04:31:59.719 DEBUG [src.node.docker_mananger] Container started with ID 9ac8546de505. Setting up logs at ./log/docker/node1_2026-02-14_04-31-59__7ac0e207-73ef-4e91-93a0-c10b60a1ccbe__wakuorg_nwaku:latest.log
2026-02-14 04:31:59.720 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57826
2026-02-14 04:31:59.720 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:31:59.727 ERROR [src.node.docker_mananger] Max retries reached for container bd118e0231d5. Exiting log stream.
2026-02-14 04:31:59.987 ERROR [src.node.docker_mananger] Max retries reached for container 02990913ec02. Exiting log stream.
2026-02-14 04:32:00.287 ERROR [src.node.docker_mananger] Max retries reached for container 54ea1d8f0c0c. Exiting log stream.
2026-02-14 04:32:00.720 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57826/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:32:00.723 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:32:00.724 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:32:00.724 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57826/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:32:00.726 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.78/tcp/57827/p2p/16Uiu2HAmMMpSHXNjEFK1dhdk6z7RhKvZzSS91qBAvgzXdcLRRJYN","/ip4/172.18.184.78/tcp/57828/ws/p2p/16Uiu2HAmMMpSHXNjEFK1dhdk6z7RhKvZzSS91qBAvgzXdcLRRJYN"],"enrUri":"enr:-L24QBTSZ30UKqa6DBticyzG-BhFvj72Ii2P24lS1bP7bo0PDy6YfqVdn53qxhRLHmtsx9v8DnzpX5lkqEqVTR00mr0CgmlkgnY0gmlwhKwSuE6KbXVsdGlhZGRyc5YACASsErhOBuHjAAoErBK4Tgbh5N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgVMZVCJgVCmYS4e2WX_MF_JLAmsJ2VqhLI7Kve-F31-DdGNwguHjg3VkcILh5YV3YWt1MgU"}'
2026-02-14 04:32:00.726 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:32:00.727 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-14 04:32:00.733 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:32:00.733 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-14_04-31-59__7ac0e207-73ef-4e91-93a0-c10b60a1ccbe__wakuorg_nwaku:latest.log
2026-02-14 04:32:00.733 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:32:00.733 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:32:00.735 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:32:00.735 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.87.201
2026-02-14 04:32:00.735 DEBUG [src.node.docker_mananger] Generated ports ['43194', '43195', '43196', '43197', '43198']
2026-02-14 04:32:00.735 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:32:00.735 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:32:00.735 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:32:00.735 DEBUG [src.node.docker_mananger] docker run -i -t -p 43194:43194 -p 43195:43195 -p 43196:43196 -p 43197:43197 -p 43198:43198 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43196 --rest-port=43194 --tcp-port=43195 --discv5-udp-port=43197 --rest-address=0.0.0.0 --nat=extip:172.18.87.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c7abdcdfdc844cead7c36fd8bebf2abd03cc47e417eca6270cb9cd2fbdbdc653 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43198 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBTSZ30UKqa6DBticyzG-BhFvj72Ii2P24lS1bP7bo0PDy6YfqVdn53qxhRLHmtsx9v8DnzpX5lkqEqVTR00mr0CgmlkgnY0gmlwhKwSuE6KbXVsdGlhZGRyc5YACASsErhOBuHjAAoErBK4Tgbh5N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgVMZVCJgVCmYS4e2WX_MF_JLAmsJ2VqhLI7Kve-F31-DdGNwguHjg3VkcILh5YV3YWt1MgU --filternode=/ip4/172.18.184.78/tcp/57827/p2p/16Uiu2HAmMMpSHXNjEFK1dhdk6z7RhKvZzSS91qBAvgzXdcLRRJYN
2026-02-14 04:32:00.931 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.87.201 waku 823d7690a64723cb8eba31632b85a26b752713a936bb17dda78de87ccadd54bf
2026-02-14 04:32:00.979 DEBUG [src.node.docker_mananger] Container started with ID 823d7690a647. Setting up logs at ./log/docker/node2_2026-02-14_04-31-59__7ac0e207-73ef-4e91-93a0-c10b60a1ccbe__wakuorg_nwaku:latest.log
2026-02-14 04:32:00.979 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43194
2026-02-14 04:32:00.979 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:32:01.981 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43194/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:32:01.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:32:01.984 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:32:01.984 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43194/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:32:01.987 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.201/tcp/43195/p2p/16Uiu2HAm2d73z39ursKwQ4suCZSWpTypxdEiLBsEQiVNUvNxQDf6","/ip4/172.18.87.201/tcp/43196/ws/p2p/16Uiu2HAm2d73z39ursKwQ4suCZSWpTypxdEiLBsEQiVNUvNxQDf6"],"enrUri":"enr:-L24QFiDWjaXNIhgoqTYnAWd5HwPn6xkGhZZ1rsdqe-W2JcKDz3LCIalBni5Zpc1MgfXECICJKgE3Mm4V3D1eKrvxNsCgmlkgnY0gmlwhKwSV8mKbXVsdGlhZGRyc5YACASsElfJBqi7AAoErBJXyQaovN0DgnJzhQADAQAAiXNlY3AyNTZrMaECau-L8quuJqWyt5LcOrMp7_n6fd78ija3FcjxJrJiFDmDdGNwgqi7g3VkcIKovYV3YWt1MgA"}'
2026-02-14 04:32:01.987 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:32:01.987 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43194/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.78/tcp/57827/p2p/16Uiu2HAmMMpSHXNjEFK1dhdk6z7RhKvZzSS91qBAvgzXdcLRRJYN"]'
2026-02-14 04:32:02.024 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:32:02.025 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-14 04:32:02.025 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57826/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-14 04:32:02.041 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:32:02.042 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43194/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c93112e7-5f77-49b0-97b1-e9ff87d7a4fd", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-14 04:32:02.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"c93112e7-5f77-49b0-97b1-e9ff87d7a4fd","statusDesc":"OK"}'
2026-02-14 04:32:02.059 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57826/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:32:02.066 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:32:02.066 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-14 04:32:02.167 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-14 04:32:02.167 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43194/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:32:02.170 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1771043522059372460,"ephemeral":false}]'
2026-02-14 04:32:02.171 DEBUG [src.node.waku_node] Pausing container with id 9ac8546de505
2026-02-14 04:32:02.181 DEBUG [src.node.waku_node] Unpause container with id 9ac8546de505
2026-02-14 04:32:02.189 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57826/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:32:02.194 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:32:02.194 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-14 04:32:02.294 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-14 04:32:02.295 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43194/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:32:02.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1771043522189644061,"ephemeral":false}]'
2026-02-14 04:32:02.299 DEBUG [src.node.waku_node] Pausing container with id 823d7690a647
2026-02-14 04:32:02.308 DEBUG [src.node.waku_node] Unpause container with id 823d7690a647
2026-02-14 04:32:02.316 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57826/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTI=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:32:02.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:32:02.321 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-14 04:32:02.421 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-14 04:32:02.422 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43194/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:32:02.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTI=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1771043522316659057,"ephemeral":false}]'
2026-02-14 04:32:02.427 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-14 04:32:02.428 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-14 04:32:02.428 DEBUG [src.node.waku_node] Stopping container with id 9ac8546de505
2026-02-14 04:32:02.687 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:32:02.687 DEBUG [src.node.waku_node] Stopping container with id 823d7690a647
2026-02-14 04:32:02.943 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:32:02.945 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-14 04:32:02.955 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:32:02.962 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
