2026-02-14 04:33:29.882 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-14 04:33:29.883 DEBUG [tests.conftest] Running test: test_filter_auto_sharding_multiple_content_topics with id: 2026-02-14_04-33-29__318fa895-c8bc-4774-bdb7-15d187f83af3
2026-02-14 04:33:29.883 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-14 04:33:29.883 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-14 04:33:29.884 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-14 04:33:29.891 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:33:29.891 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-14_04-33-29__318fa895-c8bc-4774-bdb7-15d187f83af3__wakuorg_nwaku:latest.log
2026-02-14 04:33:29.891 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:33:29.891 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:33:29.893 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:33:29.893 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.237.205
2026-02-14 04:33:29.893 DEBUG [src.node.docker_mananger] Generated ports ['28874', '28875', '28876', '28877', '28878']
2026-02-14 04:33:29.893 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-14 04:33:29.893 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:33:29.894 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:33:29.894 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:33:29.894 DEBUG [src.node.docker_mananger] docker run -i -t -p 28874:28874 -p 28875:28875 -p 28876:28876 -p 28877:28877 -p 28878:28878 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28876 --rest-port=28874 --tcp-port=28875 --discv5-udp-port=28877 --rest-address=0.0.0.0 --nat=extip:172.18.237.205 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=3f3697d9abdeefbfe3e2b5270baedd88ed5dead0b4d96eac5b5c1e2a4e7cbe47 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28878 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --content-topic=/waku/2/content/test.js --content-topic=/app/22/sometopic/someencoding --content-topic=/toychat/2/huilong/proto --content-topic=/statusim/1/community/cbor --content-topic=/app/27/sometopic/someencoding --content-topic=/app/29/sometopic/someencoding --content-topic=/app/20/sometopic/someencoding --num-shards-in-network=8
2026-02-14 04:33:30.090 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.237.205 waku b09d39cf5f3a4bc3f14ccd129bef8770a9b81f605d98e56734c3fda7f175517d
2026-02-14 04:33:30.143 DEBUG [src.node.docker_mananger] Container started with ID b09d39cf5f3a. Setting up logs at ./log/docker/node1_2026-02-14_04-33-29__318fa895-c8bc-4774-bdb7-15d187f83af3__wakuorg_nwaku:latest.log
2026-02-14 04:33:30.144 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28874
2026-02-14 04:33:30.144 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:33:30.691 ERROR [src.node.docker_mananger] Max retries reached for container 73e2efc9cf62. Exiting log stream.
2026-02-14 04:33:31.144 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28874/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:31.147 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:33:31.147 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:33:31.147 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28874/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:31.150 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.205/tcp/28875/p2p/16Uiu2HAmJjTkW45KFYMcUoLojszRaXT71fbNx9Nt53RQ8PnBsGu6","/ip4/172.18.237.205/tcp/28876/ws/p2p/16Uiu2HAmJjTkW45KFYMcUoLojszRaXT71fbNx9Nt53RQ8PnBsGu6"],"enrUri":"enr:-L24QMKO6JjbKNeY4jXYKFipmdZ6R9TkW6xGeIQ7b05tUnHPJSMWidl1sZaNfW8epsUBfpjkgQNxvDWaQRblG2LM6ZECgmlkgnY0gmlwhKwS7c2KbXVsdGlhZGRyc5YACASsEu3NBnDLAAoErBLtzQZwzN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDWkttIkcFUjRh697VQ0SHB95ATElIiePMlIW7cNWPbnmDdGNwgnDLg3VkcIJwzYV3YWt1MgU"}'
2026-02-14 04:33:31.150 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:33:31.157 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:33:31.157 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-14_04-33-29__318fa895-c8bc-4774-bdb7-15d187f83af3__wakuorg_nwaku:latest.log
2026-02-14 04:33:31.157 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:33:31.158 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:33:31.159 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:33:31.159 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.161.28
2026-02-14 04:33:31.159 DEBUG [src.node.docker_mananger] Generated ports ['2772', '2773', '2774', '2775', '2776']
2026-02-14 04:33:31.159 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-14 04:33:31.160 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:33:31.160 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:33:31.160 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:33:31.160 DEBUG [src.node.docker_mananger] docker run -i -t -p 2772:2772 -p 2773:2773 -p 2774:2774 -p 2775:2775 -p 2776:2776 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2774 --rest-port=2772 --tcp-port=2773 --discv5-udp-port=2775 --rest-address=0.0.0.0 --nat=extip:172.18.161.28 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ad11c3f4d12997fb1a8da93ce56884cedabd9aece9ec98b76bcf04f12d2a0953 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2776 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QMKO6JjbKNeY4jXYKFipmdZ6R9TkW6xGeIQ7b05tUnHPJSMWidl1sZaNfW8epsUBfpjkgQNxvDWaQRblG2LM6ZECgmlkgnY0gmlwhKwS7c2KbXVsdGlhZGRyc5YACASsEu3NBnDLAAoErBLtzQZwzN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDWkttIkcFUjRh697VQ0SHB95ATElIiePMlIW7cNWPbnmDdGNwgnDLg3VkcIJwzYV3YWt1MgU --filternode=/ip4/172.18.237.205/tcp/28875/p2p/16Uiu2HAmJjTkW45KFYMcUoLojszRaXT71fbNx9Nt53RQ8PnBsGu6 --content-topic=/myapp/1/latest/proto --content-topic=/waku/2/content/test.js --content-topic=/app/22/sometopic/someencoding --content-topic=/toychat/2/huilong/proto --content-topic=/statusim/1/community/cbor --content-topic=/app/27/sometopic/someencoding --content-topic=/app/29/sometopic/someencoding --content-topic=/app/20/sometopic/someencoding
2026-02-14 04:33:31.354 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.161.28 waku ebab39a1b2431690e93a37a2ffc8508696256e46085063c9b17fe9f4840178a2
2026-02-14 04:33:31.405 DEBUG [src.node.docker_mananger] Container started with ID ebab39a1b243. Setting up logs at ./log/docker/node2_2026-02-14_04-33-29__318fa895-c8bc-4774-bdb7-15d187f83af3__wakuorg_nwaku:latest.log
2026-02-14 04:33:31.405 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2772
2026-02-14 04:33:31.405 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:33:32.407 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2772/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:32.410 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:33:32.410 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:33:32.410 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2772/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:32.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.28/tcp/2773/p2p/16Uiu2HAmTQDk41G3G2D6PsCbnSkr71ovMJRLm9pdkQeqFyYYT2nG","/ip4/172.18.161.28/tcp/2774/ws/p2p/16Uiu2HAmTQDk41G3G2D6PsCbnSkr71ovMJRLm9pdkQeqFyYYT2nG"],"enrUri":"enr:-L24QLP9kbqs9N1DhomfPJ0ekgXYbQ9VnyqBJmYmqhiu4GpCKjSUzEvSYXDwzMr2bcy5FOcUQzcPKaBZutBWb-wSQ08CgmlkgnY0gmlwhKwSoRyKbXVsdGlhZGRyc5YACASsEqEcBgrVAAoErBKhHAYK1t0DgnJzhQACAQAAiXNlY3AyNTZrMaED2xa8EuKAkOkD-43QXNSciMGiDLbLEWTigsus0wFUicWDdGNwggrVg3VkcIIK14V3YWt1MgA"}'
2026-02-14 04:33:32.413 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:33:32.413 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2772/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.237.205/tcp/28875/p2p/16Uiu2HAmJjTkW45KFYMcUoLojszRaXT71fbNx9Nt53RQ8PnBsGu6"]'
2026-02-14 04:33:32.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:32.452 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28874/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2026-02-14 04:33:32.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:32.473 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2772/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f4857d52-c909-4a7d-8ea5-49e1fdff2e62", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
2026-02-14 04:33:32.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f4857d52-c909-4a7d-8ea5-49e1fdff2e62","statusDesc":"OK"}'
2026-02-14 04:33:32.487 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2772/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "387f55f3-e884-483a-8c50-5d50ee648ada", "contentFilters": ["/waku/2/content/test.js"], "pubsubTopic": "/waku/2/rs/2/1"}'
2026-02-14 04:33:32.497 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"387f55f3-e884-483a-8c50-5d50ee648ada","statusDesc":"OK"}'
2026-02-14 04:33:32.497 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2772/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ab6cf94e-b578-4ef6-b003-a09a34091571", "contentFilters": ["/app/22/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/2"}'
2026-02-14 04:33:32.506 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ab6cf94e-b578-4ef6-b003-a09a34091571","statusDesc":"OK"}'
2026-02-14 04:33:32.507 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2772/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3ba6dca0-5be3-44e3-8e1d-e2a429d3d534", "contentFilters": ["/toychat/2/huilong/proto"], "pubsubTopic": "/waku/2/rs/2/3"}'
2026-02-14 04:33:32.516 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"3ba6dca0-5be3-44e3-8e1d-e2a429d3d534","statusDesc":"OK"}'
2026-02-14 04:33:32.516 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2772/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d3dc6a10-8186-4206-95f3-76fbb43ceb36", "contentFilters": ["/statusim/1/community/cbor"], "pubsubTopic": "/waku/2/rs/2/4"}'
2026-02-14 04:33:32.526 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d3dc6a10-8186-4206-95f3-76fbb43ceb36","statusDesc":"OK"}'
2026-02-14 04:33:32.526 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2772/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e035c44e-d1c9-437b-95be-e887f572f5e2", "contentFilters": ["/app/27/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/5"}'
2026-02-14 04:33:32.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e035c44e-d1c9-437b-95be-e887f572f5e2","statusDesc":"OK"}'
2026-02-14 04:33:32.536 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2772/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "91ec689c-4a41-4689-b688-69fc62cc6cbe", "contentFilters": ["/app/29/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/6"}'
2026-02-14 04:33:32.546 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"91ec689c-4a41-4689-b688-69fc62cc6cbe","statusDesc":"OK"}'
2026-02-14 04:33:32.546 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2772/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f94179c3-b121-4b27-9d43-f1970fe49faa", "contentFilters": ["/app/20/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/7"}'
2026-02-14 04:33:32.556 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f94179c3-b121-4b27-9d43-f1970fe49faa","statusDesc":"OK"}'
2026-02-14 04:33:32.557 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28874/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:33:32.566 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28874/relay/v1/auto/messages. Response content: b'Failed to publish: publish failed in relay: NoPeersToPublish'
2026-02-14 04:33:32.636 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-14 04:33:32.637 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-14 04:33:32.637 DEBUG [src.node.waku_node] Stopping container with id b09d39cf5f3a
2026-02-14 04:33:32.906 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:33:32.908 DEBUG [src.node.waku_node] Stopping container with id ebab39a1b243
2026-02-14 04:33:33.164 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:33:33.167 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-14 04:33:33.184 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:33:33.195 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:33:33.199 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2026-02-14 04:33:33.199 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2026-02-14 04:33:33.201 DEBUG [src.libs.common] Attaching file ./log/docker/node1_2026-02-14_04-33-29__318fa895-c8bc-4774-bdb7-15d187f83af3__wakuorg_nwaku:latest.log
2026-02-14 04:33:33.204 DEBUG [src.libs.common] Attaching file ./log/docker/node2_2026-02-14_04-33-29__318fa895-c8bc-4774-bdb7-15d187f83af3__wakuorg_nwaku:latest.log
2026-02-14 04:33:33.220 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-14 04:33:33.221 DEBUG [tests.conftest] Running test: test_filter_auto_sharding_multiple_content_topics with id: 2026-02-14_04-33-33__e532d0be-9481-447d-a323-4ccde216e2ef
2026-02-14 04:33:33.222 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-14 04:33:33.222 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-14 04:33:33.222 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-14 04:33:33.233 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:33:33.234 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-14_04-33-33__e532d0be-9481-447d-a323-4ccde216e2ef__wakuorg_nwaku:latest.log
2026-02-14 04:33:33.234 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:33:33.234 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:33:33.235 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:33:33.235 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.24.32
2026-02-14 04:33:33.235 DEBUG [src.node.docker_mananger] Generated ports ['19127', '19128', '19129', '19130', '19131']
2026-02-14 04:33:33.236 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-14 04:33:33.236 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:33:33.236 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:33:33.236 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:33:33.236 DEBUG [src.node.docker_mananger] docker run -i -t -p 19127:19127 -p 19128:19128 -p 19129:19129 -p 19130:19130 -p 19131:19131 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19129 --rest-port=19127 --tcp-port=19128 --discv5-udp-port=19130 --rest-address=0.0.0.0 --nat=extip:172.18.24.32 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=56b0ed9f1575bfb7a64b0ee02a10b6c2ed354012faecfe95f4cdc63f7ef1bcfc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19131 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --content-topic=/waku/2/content/test.js --content-topic=/app/22/sometopic/someencoding --content-topic=/toychat/2/huilong/proto --content-topic=/statusim/1/community/cbor --content-topic=/app/27/sometopic/someencoding --content-topic=/app/29/sometopic/someencoding --content-topic=/app/20/sometopic/someencoding --num-shards-in-network=8
2026-02-14 04:33:33.430 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.24.32 waku 9f31de9a2f5c0ea6275de7223005cde23fb468a13730f0015409cd66a8f21a76
2026-02-14 04:33:33.478 DEBUG [src.node.docker_mananger] Container started with ID 9f31de9a2f5c. Setting up logs at ./log/docker/node1_2026-02-14_04-33-33__e532d0be-9481-447d-a323-4ccde216e2ef__wakuorg_nwaku:latest.log
2026-02-14 04:33:33.478 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19127
2026-02-14 04:33:33.478 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:33:33.753 ERROR [src.node.docker_mananger] Max retries reached for container b09d39cf5f3a. Exiting log stream.
2026-02-14 04:33:34.043 ERROR [src.node.docker_mananger] Max retries reached for container ebab39a1b243. Exiting log stream.
2026-02-14 04:33:34.479 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19127/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:34.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:33:34.481 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:33:34.482 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19127/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:34.484 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.32/tcp/19128/p2p/16Uiu2HAmL9CGuQtJfpt7eFWau9eNSVwACosE2DHkDqschC5TVVCg","/ip4/172.18.24.32/tcp/19129/ws/p2p/16Uiu2HAmL9CGuQtJfpt7eFWau9eNSVwACosE2DHkDqschC5TVVCg"],"enrUri":"enr:-L24QEpGzwtaoijq-ZGDaUMJfJW86EQkytIsz7oScwNSi_A3WbBTCAu3De9j1CwnOtPIfiIbASiPgcrOvhUaN3TQcKQCgmlkgnY0gmlwhKwSGCCKbXVsdGlhZGRyc5YACASsEhggBkq4AAoErBIYIAZKud0DgnJzhQACAQAAiXNlY3AyNTZrMaEDbzuN2MMtB-KHUIEjynkO72kjGydB1v9Pab8wTJ-aKNWDdGNwgkq4g3VkcIJKuoV3YWt1MgU"}'
2026-02-14 04:33:34.484 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:33:34.491 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:33:34.491 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-14_04-33-33__e532d0be-9481-447d-a323-4ccde216e2ef__wakuorg_nwaku:latest.log
2026-02-14 04:33:34.491 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:33:34.491 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:33:34.493 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:33:34.493 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.27
2026-02-14 04:33:34.493 DEBUG [src.node.docker_mananger] Generated ports ['56178', '56179', '56180', '56181', '56182']
2026-02-14 04:33:34.493 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-14 04:33:34.494 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:33:34.494 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:33:34.494 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:33:34.494 DEBUG [src.node.docker_mananger] docker run -i -t -p 56178:56178 -p 56179:56179 -p 56180:56180 -p 56181:56181 -p 56182:56182 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56180 --rest-port=56178 --tcp-port=56179 --discv5-udp-port=56181 --rest-address=0.0.0.0 --nat=extip:172.18.229.27 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f11d92d81de0eb16dab8a6ac0a11200c9158c4fb5626dcff752aa0db5f81dfb5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56182 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QEpGzwtaoijq-ZGDaUMJfJW86EQkytIsz7oScwNSi_A3WbBTCAu3De9j1CwnOtPIfiIbASiPgcrOvhUaN3TQcKQCgmlkgnY0gmlwhKwSGCCKbXVsdGlhZGRyc5YACASsEhggBkq4AAoErBIYIAZKud0DgnJzhQACAQAAiXNlY3AyNTZrMaEDbzuN2MMtB-KHUIEjynkO72kjGydB1v9Pab8wTJ-aKNWDdGNwgkq4g3VkcIJKuoV3YWt1MgU --filternode=/ip4/172.18.24.32/tcp/19128/p2p/16Uiu2HAmL9CGuQtJfpt7eFWau9eNSVwACosE2DHkDqschC5TVVCg --content-topic=/myapp/1/latest/proto --content-topic=/waku/2/content/test.js --content-topic=/app/22/sometopic/someencoding --content-topic=/toychat/2/huilong/proto --content-topic=/statusim/1/community/cbor --content-topic=/app/27/sometopic/someencoding --content-topic=/app/29/sometopic/someencoding --content-topic=/app/20/sometopic/someencoding
2026-02-14 04:33:34.694 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.27 waku 68cd3a9cecbc5f28bdd39bd6337ad422db76d5d6e3767bbc83e1c2456dd10720
2026-02-14 04:33:34.740 DEBUG [src.node.docker_mananger] Container started with ID 68cd3a9cecbc. Setting up logs at ./log/docker/node2_2026-02-14_04-33-33__e532d0be-9481-447d-a323-4ccde216e2ef__wakuorg_nwaku:latest.log
2026-02-14 04:33:34.740 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56178
2026-02-14 04:33:34.741 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:33:35.741 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56178/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:35.744 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:33:35.744 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:33:35.744 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56178/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:35.746 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.27/tcp/56179/p2p/16Uiu2HAmBRyLbYXKpchnEaF526HP5aXtnqHsg8kcuzeJ8aybFeLc","/ip4/172.18.229.27/tcp/56180/ws/p2p/16Uiu2HAmBRyLbYXKpchnEaF526HP5aXtnqHsg8kcuzeJ8aybFeLc"],"enrUri":"enr:-L24QA9sOXYWyvrcURlpRLFxjVDDcd8GjcwR0nrcA43pOZLabP2uO9kQS7JY56MGwI8bZ3ghuOEWxffVnbeIeeIWdDACgmlkgnY0gmlwhKwS5RuKbXVsdGlhZGRyc5YACASsEuUbBttzAAoErBLlGwbbdN0DgnJzhQACAQAAiXNlY3AyNTZrMaEC7c6eSw1wWaFIRcLs0JyDBOxTnjewc0jXFliOwdEwLrWDdGNwgttzg3VkcILbdYV3YWt1MgA"}'
2026-02-14 04:33:35.747 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:33:35.747 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56178/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.24.32/tcp/19128/p2p/16Uiu2HAmL9CGuQtJfpt7eFWau9eNSVwACosE2DHkDqschC5TVVCg"]'
2026-02-14 04:33:35.782 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:35.782 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19127/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2026-02-14 04:33:35.799 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:35.800 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56178/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fe10793a-190e-46aa-a752-819b9e09b83c", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
2026-02-14 04:33:35.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"fe10793a-190e-46aa-a752-819b9e09b83c","statusDesc":"OK"}'
2026-02-14 04:33:35.814 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56178/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b9bd8c25-282a-40e1-9030-ced4ee4a5d0d", "contentFilters": ["/waku/2/content/test.js"], "pubsubTopic": "/waku/2/rs/2/1"}'
2026-02-14 04:33:35.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b9bd8c25-282a-40e1-9030-ced4ee4a5d0d","statusDesc":"OK"}'
2026-02-14 04:33:35.823 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56178/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "dca55b7c-592a-4b2e-b0d7-53c6959e1922", "contentFilters": ["/app/22/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/2"}'
2026-02-14 04:33:35.832 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"dca55b7c-592a-4b2e-b0d7-53c6959e1922","statusDesc":"OK"}'
2026-02-14 04:33:35.832 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56178/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d3429c5b-a73e-4843-87eb-fda219131cfb", "contentFilters": ["/toychat/2/huilong/proto"], "pubsubTopic": "/waku/2/rs/2/3"}'
2026-02-14 04:33:35.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d3429c5b-a73e-4843-87eb-fda219131cfb","statusDesc":"OK"}'
2026-02-14 04:33:35.842 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56178/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e38185d3-b3a5-4f33-8c6c-f70d858b8370", "contentFilters": ["/statusim/1/community/cbor"], "pubsubTopic": "/waku/2/rs/2/4"}'
2026-02-14 04:33:35.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e38185d3-b3a5-4f33-8c6c-f70d858b8370","statusDesc":"OK"}'
2026-02-14 04:33:35.852 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56178/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9e1bbacc-098f-4feb-bc96-5ef2ea31978b", "contentFilters": ["/app/27/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/5"}'
2026-02-14 04:33:35.861 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"9e1bbacc-098f-4feb-bc96-5ef2ea31978b","statusDesc":"OK"}'
2026-02-14 04:33:35.862 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56178/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "cac76fa5-3fc2-4041-9fa8-ab95f73442bb", "contentFilters": ["/app/29/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/6"}'
2026-02-14 04:33:35.872 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"cac76fa5-3fc2-4041-9fa8-ab95f73442bb","statusDesc":"OK"}'
2026-02-14 04:33:35.872 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56178/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ad3e5377-7074-4b16-8b97-4de0fab2b60f", "contentFilters": ["/app/20/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/7"}'
2026-02-14 04:33:35.882 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ad3e5377-7074-4b16-8b97-4de0fab2b60f","statusDesc":"OK"}'
2026-02-14 04:33:35.883 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19127/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:33:35.891 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19127/relay/v1/auto/messages. Response content: b'Failed to publish: publish failed in relay: NoPeersToPublish'
2026-02-14 04:33:35.927 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-14 04:33:35.928 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-14 04:33:35.929 DEBUG [src.node.waku_node] Stopping container with id 9f31de9a2f5c
2026-02-14 04:33:36.196 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:33:36.197 DEBUG [src.node.waku_node] Stopping container with id 68cd3a9cecbc
2026-02-14 04:33:36.448 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:33:36.451 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-14 04:33:36.466 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:33:36.475 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:33:36.476 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2026-02-14 04:33:36.478 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2026-02-14 04:33:36.479 DEBUG [src.libs.common] Attaching file ./log/docker/node2_2026-02-14_04-33-33__e532d0be-9481-447d-a323-4ccde216e2ef__wakuorg_nwaku:latest.log
2026-02-14 04:33:36.481 DEBUG [src.libs.common] Attaching file ./log/docker/node1_2026-02-14_04-33-33__e532d0be-9481-447d-a323-4ccde216e2ef__wakuorg_nwaku:latest.log
