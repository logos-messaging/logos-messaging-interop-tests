2026-02-14 04:33:14.592 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-14 04:33:14.592 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_very_large_request_id with id: 2026-02-14_04-33-14__209fdcb3-ce51-4c3f-87ad-33e4385b7945
2026-02-14 04:33:14.592 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-14 04:33:14.593 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-14 04:33:14.593 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-14 04:33:14.598 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:33:14.598 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-14_04-33-14__209fdcb3-ce51-4c3f-87ad-33e4385b7945__wakuorg_nwaku:latest.log
2026-02-14 04:33:14.599 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:33:14.599 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:33:14.600 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:33:14.600 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.0
2026-02-14 04:33:14.600 DEBUG [src.node.docker_mananger] Generated ports ['43943', '43944', '43945', '43946', '43947']
2026-02-14 04:33:14.600 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:33:14.601 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:33:14.601 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:33:14.601 DEBUG [src.node.docker_mananger] docker run -i -t -p 43943:43943 -p 43944:43944 -p 43945:43945 -p 43946:43946 -p 43947:43947 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43945 --rest-port=43943 --tcp-port=43944 --discv5-udp-port=43946 --rest-address=0.0.0.0 --nat=extip:172.18.71.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad14a3a9dd6a4fd00d3fb80f2e62c1e2dfca0b0c7a41ed455b0aa8d7d6b2784f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43947 --metrics-logging=true --relay=true --filter=true
2026-02-14 04:33:14.757 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.0 waku 705bb86998e9bfccf53427ca6b4071aafd12b9d31e380819952e3a251986c6b0
2026-02-14 04:33:14.791 DEBUG [src.node.docker_mananger] Container started with ID 705bb86998e9. Setting up logs at ./log/docker/node1_2026-02-14_04-33-14__209fdcb3-ce51-4c3f-87ad-33e4385b7945__wakuorg_nwaku:latest.log
2026-02-14 04:33:14.792 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43943
2026-02-14 04:33:14.792 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:33:15.186 ERROR [src.node.docker_mananger] Max retries reached for container 59becdc5847c. Exiting log stream.
2026-02-14 04:33:15.390 ERROR [src.node.docker_mananger] Max retries reached for container ef3470f15975. Exiting log stream.
2026-02-14 04:33:15.792 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43943/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:15.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:33:15.795 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:33:15.795 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43943/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:15.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.0/tcp/43944/p2p/16Uiu2HAmVrhUTP2s5XdrXQLRYFxp2UioMxND2E8Pa1EJycetrYTw","/ip4/172.18.71.0/tcp/43945/ws/p2p/16Uiu2HAmVrhUTP2s5XdrXQLRYFxp2UioMxND2E8Pa1EJycetrYTw"],"enrUri":"enr:-L24QASUfs9hrjsY8P3ABMCBaqWJQTO-nhs-axiPzADydWfxfcJ0ow4PzV-cLaUbm5k7LVEtz6yrc5_go0Xr7fnkiakCgmlkgnY0gmlwhKwSRwCKbXVsdGlhZGRyc5YACASsEkcABquoAAoErBJHAAarqd0DgnJzhQADAQAAiXNlY3AyNTZrMaED_5aQsGKLgBjfHTiJ7CttV4l5Xj7SLcrXAiI-Ahhwyy6DdGNwgquog3VkcIKrqoV3YWt1MgU"}'
2026-02-14 04:33:15.798 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:33:15.798 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-14 04:33:15.804 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:33:15.804 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-14_04-33-14__209fdcb3-ce51-4c3f-87ad-33e4385b7945__wakuorg_nwaku:latest.log
2026-02-14 04:33:15.804 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:33:15.804 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:33:15.805 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:33:15.805 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.166.11
2026-02-14 04:33:15.805 DEBUG [src.node.docker_mananger] Generated ports ['43357', '43358', '43359', '43360', '43361']
2026-02-14 04:33:15.805 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:33:15.805 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:33:15.806 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:33:15.806 DEBUG [src.node.docker_mananger] docker run -i -t -p 43357:43357 -p 43358:43358 -p 43359:43359 -p 43360:43360 -p 43361:43361 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43359 --rest-port=43357 --tcp-port=43358 --discv5-udp-port=43360 --rest-address=0.0.0.0 --nat=extip:172.18.166.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0af4bb26d772f0dcf31dc773d5e0a6d61f271daf81bdbf5ebf275b9facbcdde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43361 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QASUfs9hrjsY8P3ABMCBaqWJQTO-nhs-axiPzADydWfxfcJ0ow4PzV-cLaUbm5k7LVEtz6yrc5_go0Xr7fnkiakCgmlkgnY0gmlwhKwSRwCKbXVsdGlhZGRyc5YACASsEkcABquoAAoErBJHAAarqd0DgnJzhQADAQAAiXNlY3AyNTZrMaED_5aQsGKLgBjfHTiJ7CttV4l5Xj7SLcrXAiI-Ahhwyy6DdGNwgquog3VkcIKrqoV3YWt1MgU --filternode=/ip4/172.18.71.0/tcp/43944/p2p/16Uiu2HAmVrhUTP2s5XdrXQLRYFxp2UioMxND2E8Pa1EJycetrYTw
2026-02-14 04:33:15.962 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.166.11 waku 3b77eb00795a5a752bd07ece18d98e4f78685f118568d3548918e40b9f6936ea
2026-02-14 04:33:15.994 DEBUG [src.node.docker_mananger] Container started with ID 3b77eb00795a. Setting up logs at ./log/docker/node2_2026-02-14_04-33-14__209fdcb3-ce51-4c3f-87ad-33e4385b7945__wakuorg_nwaku:latest.log
2026-02-14 04:33:15.994 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43357
2026-02-14 04:33:15.995 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:33:16.996 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43357/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:16.998 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:33:16.999 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:33:16.999 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43357/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:17.001 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.166.11/tcp/43358/p2p/16Uiu2HAm8LufVAbHBezyBh343Gd6bi4BDGkMfhADsx2GrL1LyFgf","/ip4/172.18.166.11/tcp/43359/ws/p2p/16Uiu2HAm8LufVAbHBezyBh343Gd6bi4BDGkMfhADsx2GrL1LyFgf"],"enrUri":"enr:-L24QFQsjjoSPESlqNmx8uCBET_qbXdtZ9uVqzSjBk0ocFjhVyyNeeENg4uocU-WvIVj_ihqgosBwFjWUIH6kU-CVtcCgmlkgnY0gmlwhKwSpguKbXVsdGlhZGRyc5YACASsEqYLBqleAAoErBKmCwapX90DgnJzhQADAQAAiXNlY3AyNTZrMaECv-9_u2F3MS4Ev6V3je7jXXJLrtX5GpIgQbgQN23qICSDdGNwgqleg3VkcIKpYIV3YWt1MgA"}'
2026-02-14 04:33:17.001 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:33:17.001 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43357/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.71.0/tcp/43944/p2p/16Uiu2HAmVrhUTP2s5XdrXQLRYFxp2UioMxND2E8Pa1EJycetrYTw"]'
2026-02-14 04:33:17.032 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:17.032 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-14 04:33:17.033 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43943/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-14 04:33:17.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:17.051 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43357/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c65435ae-0c93-4232-861f-91924969d7ec", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-14 04:33:17.063 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"c65435ae-0c93-4232-861f-91924969d7ec","statusDesc":"OK"}'
2026-02-14 04:33:17.064 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43943/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:33:17.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:17.071 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-14 04:33:17.171 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-14 04:33:17.171 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43357/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:17.174 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1771043597064390953,"ephemeral":false}]'
2026-02-14 04:33:17.176 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:43357/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345678901234567890123456789012345678901234567890", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-14 04:33:17.184 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345678901234567890123456789012345678901234567890","statusDesc":"OK"}'
2026-02-14 04:33:17.184 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43943/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:33:17.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:17.188 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-14 04:33:17.288 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-14 04:33:17.288 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43357/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:17.291 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43357/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
2026-02-14 04:33:17.293 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-14 04:33:17.294 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-14 04:33:17.294 DEBUG [src.node.waku_node] Stopping container with id 705bb86998e9
2026-02-14 04:33:17.548 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:33:17.549 DEBUG [src.node.waku_node] Stopping container with id 3b77eb00795a
2026-02-14 04:33:17.752 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:33:17.754 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-14 04:33:17.759 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:33:17.764 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
