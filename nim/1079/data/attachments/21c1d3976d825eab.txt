2026-02-14 04:36:31.081 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-14 04:36:31.082 DEBUG [tests.conftest] Running test: test_publish_with_invalid_timestamps with id: 2026-02-14_04-36-31__f6ce89f5-87f8-4d0c-acbb-ce8a034bf3d2
2026-02-14 04:36:31.083 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-14 04:36:31.083 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-14 04:36:31.084 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-14 04:36:31.092 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:36:31.092 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-14_04-36-31__f6ce89f5-87f8-4d0c-acbb-ce8a034bf3d2__wakuorg_nwaku:latest.log
2026-02-14 04:36:31.093 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:36:31.093 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:36:31.098 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:36:31.099 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.165
2026-02-14 04:36:31.100 DEBUG [src.node.docker_mananger] Generated ports ['19940', '19941', '19942', '19943', '19944']
2026-02-14 04:36:31.100 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:36:31.101 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:36:31.101 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:36:31.101 DEBUG [src.node.docker_mananger] docker run -i -t -p 19940:19940 -p 19941:19941 -p 19942:19942 -p 19943:19943 -p 19944:19944 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19942 --rest-port=19940 --tcp-port=19941 --discv5-udp-port=19943 --rest-address=0.0.0.0 --nat=extip:172.18.229.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fdc0d3b5b8eedda67242a1034f8f4feb3eb15f36ddc5ffedfd3b96a39f0a6a5e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19944 --metrics-logging=true --relay=true
2026-02-14 04:36:31.302 ERROR [src.node.docker_mananger] Max retries reached for container 3f518f6fe13f. Exiting log stream.
2026-02-14 04:36:31.310 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.165 waku 27cc4840dc958aca6a1b4857138bd220b6c557dec43beedb2dea5e6a2adcf0b3
2026-02-14 04:36:31.361 DEBUG [src.node.docker_mananger] Container started with ID 27cc4840dc95. Setting up logs at ./log/docker/node1_2026-02-14_04-36-31__f6ce89f5-87f8-4d0c-acbb-ce8a034bf3d2__wakuorg_nwaku:latest.log
2026-02-14 04:36:31.361 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19940
2026-02-14 04:36:31.361 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:36:31.556 ERROR [src.node.docker_mananger] Max retries reached for container a6c5529eb731. Exiting log stream.
2026-02-14 04:36:31.917 ERROR [src.node.docker_mananger] Max retries reached for container b4fd8556d2b7. Exiting log stream.
2026-02-14 04:36:32.362 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19940/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:36:32.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:36:32.365 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:36:32.365 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19940/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:36:32.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.165/tcp/19941/p2p/16Uiu2HAmQkRPbbtHKnuPi1e7WCA77ue47cMBqtE8kBTTAu2p497i","/ip4/172.18.229.165/tcp/19942/ws/p2p/16Uiu2HAmQkRPbbtHKnuPi1e7WCA77ue47cMBqtE8kBTTAu2p497i"],"enrUri":"enr:-L24QAiG7KJteoB9Sgalss7cZ40FsfjhS0GeszLcMBOYt_KKa1MyzUop-YD7rdv5jav2819ZeL6d6CWGh-PTHV9rv8UCgmlkgnY0gmlwhKwS5aWKbXVsdGlhZGRyc5YACASsEuWlBk3lAAoErBLlpQZN5t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDs7B1sUrLOqtAXwgp9Apjg9RsDXuSzppAf9HEcwxuRi2DdGNwgk3lg3VkcIJN54V3YWt1MgE"}'
2026-02-14 04:36:32.368 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:36:32.375 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:36:32.375 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-14_04-36-31__f6ce89f5-87f8-4d0c-acbb-ce8a034bf3d2__wakuorg_nwaku:latest.log
2026-02-14 04:36:32.375 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:36:32.375 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:36:32.377 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:36:32.377 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.247.149
2026-02-14 04:36:32.377 DEBUG [src.node.docker_mananger] Generated ports ['42148', '42149', '42150', '42151', '42152']
2026-02-14 04:36:32.377 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:36:32.377 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:36:32.377 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:36:32.378 DEBUG [src.node.docker_mananger] docker run -i -t -p 42148:42148 -p 42149:42149 -p 42150:42150 -p 42151:42151 -p 42152:42152 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42150 --rest-port=42148 --tcp-port=42149 --discv5-udp-port=42151 --rest-address=0.0.0.0 --nat=extip:172.18.247.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=40ba07bfa5f743fd5cdb227b0acb2272d21af23bfe22c5a74ca8c94bce3a01d5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42152 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QAiG7KJteoB9Sgalss7cZ40FsfjhS0GeszLcMBOYt_KKa1MyzUop-YD7rdv5jav2819ZeL6d6CWGh-PTHV9rv8UCgmlkgnY0gmlwhKwS5aWKbXVsdGlhZGRyc5YACASsEuWlBk3lAAoErBLlpQZN5t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDs7B1sUrLOqtAXwgp9Apjg9RsDXuSzppAf9HEcwxuRi2DdGNwgk3lg3VkcIJN54V3YWt1MgE
2026-02-14 04:36:32.583 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.247.149 waku 4c652740c70aeb53b4c270a6865b24da447b1fd26ab20d3e63fc4e9e7d5f01a6
2026-02-14 04:36:32.631 DEBUG [src.node.docker_mananger] Container started with ID 4c652740c70a. Setting up logs at ./log/docker/node2_2026-02-14_04-36-31__f6ce89f5-87f8-4d0c-acbb-ce8a034bf3d2__wakuorg_nwaku:latest.log
2026-02-14 04:36:32.631 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42148
2026-02-14 04:36:32.632 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:36:33.633 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42148/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:36:33.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:36:33.652 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:36:33.652 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42148/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:36:33.657 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.149/tcp/42149/p2p/16Uiu2HAm5QAd48658Twv7ETeRFzo66mzcUZwJSmjLmLxbQcnoVVz","/ip4/172.18.247.149/tcp/42150/ws/p2p/16Uiu2HAm5QAd48658Twv7ETeRFzo66mzcUZwJSmjLmLxbQcnoVVz"],"enrUri":"enr:-L24QAqnqBqTvjcMI_-W6ZumOw5vJzoektDrToWWbxaQavS6Hoba25zfKKxUqzfLK1TLFmW4x4TtbJAdkBVJnIcraGMCgmlkgnY0gmlwhKwS95WKbXVsdGlhZGRyc5YACASsEveVBqSlAAoErBL3lQakpt0DgnJzhQADAQAAiXNlY3AyNTZrMaEClDIX_91XqvG9v-r8yUfl0oqMOVc8bzTPm-pSdukj7CGDdGNwgqSlg3VkcIKkp4V3YWt1MgE"}'
2026-02-14 04:36:33.658 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:36:33.659 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42148/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.229.165/tcp/19941/p2p/16Uiu2HAmQkRPbbtHKnuPi1e7WCA77ue47cMBqtE8kBTTAu2p497i"]'
2026-02-14 04:36:33.662 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:36:33.662 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-14 04:36:33.662 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19940/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-14 04:36:33.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:36:33.666 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42148/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-14 04:36:33.671 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:36:33.673 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:36:33.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:36:33.680 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-14 04:36:33.781 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-14 04:36:33.781 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:36:33.784 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1771043793673266176,"ephemeral":false,"proof":""}]'
2026-02-14 04:36:33.785 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-14 04:36:33.785 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42148/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:36:33.788 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1771043793673266176,"ephemeral":false,"proof":""}]'
2026-02-14 04:36:33.789 INFO [src.steps.relay] WARM UP successful!!
2026-02-14 04:36:33.790 DEBUG [tests.relay.test_publish] Running test with timestamp Timestamp as string number
2026-02-14 04:36:33.790 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:36:33.793 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-14 04:36:33.794 DEBUG [tests.relay.test_publish] Running test with timestamp Invalid large number
2026-02-14 04:36:33.794 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:36:33.797 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-14 04:36:33.798 DEBUG [tests.relay.test_publish] Running test with timestamp Float number
2026-02-14 04:36:33.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:36:33.801 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-14 04:36:33.801 DEBUG [tests.relay.test_publish] Running test with timestamp Array instead of timestamp
2026-02-14 04:36:33.802 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:36:33.804 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-14 04:36:33.805 DEBUG [tests.relay.test_publish] Running test with timestamp Object instead of timestamp
2026-02-14 04:36:33.806 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:36:33.808 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-14 04:36:33.809 DEBUG [tests.relay.test_publish] Running test with timestamp ISO 8601 timestamp
2026-02-14 04:36:33.809 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:36:33.811 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-14 04:36:33.812 DEBUG [tests.relay.test_publish] Running test with timestamp Missing
2026-02-14 04:36:33.812 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-14 04:36:33.815 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19940/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-14 04:36:33.817 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-14 04:36:33.818 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-14 04:36:33.818 DEBUG [src.node.waku_node] Stopping container with id 27cc4840dc95
2026-02-14 04:36:34.072 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:36:34.073 DEBUG [src.node.waku_node] Stopping container with id 4c652740c70a
2026-02-14 04:36:34.334 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:36:34.336 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-14 04:36:34.348 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:36:34.353 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
