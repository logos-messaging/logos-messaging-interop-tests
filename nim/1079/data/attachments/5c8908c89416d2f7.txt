2026-02-14 04:32:57.746 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-14 04:32:57.750 DEBUG [tests.conftest] Running test: test_filter_get_message_with_version with id: 2026-02-14_04-32-57__e430dcf5-1159-435a-9cb5-8f69a3e9a7ce
2026-02-14 04:32:57.750 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-14 04:32:57.751 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-14 04:32:57.752 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-14 04:32:57.760 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:32:57.761 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-14_04-32-57__e430dcf5-1159-435a-9cb5-8f69a3e9a7ce__wakuorg_nwaku:latest.log
2026-02-14 04:32:57.761 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:32:57.761 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:32:57.764 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:32:57.764 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.249.191
2026-02-14 04:32:57.764 DEBUG [src.node.docker_mananger] Generated ports ['49969', '49970', '49971', '49972', '49973']
2026-02-14 04:32:57.766 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:32:57.766 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:32:57.767 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:32:57.768 DEBUG [src.node.docker_mananger] docker run -i -t -p 49969:49969 -p 49970:49970 -p 49971:49971 -p 49972:49972 -p 49973:49973 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49971 --rest-port=49969 --tcp-port=49970 --discv5-udp-port=49972 --rest-address=0.0.0.0 --nat=extip:172.18.249.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7db9ee72b05b14df7d7d95cd321ecbc45aacbc46defae16c426fc0807f2cdb4e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49973 --metrics-logging=true --relay=true --filter=true
2026-02-14 04:32:57.961 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.249.191 waku 63a59e2820a0315bd0bbcbbdd5f61690b0cc92b9e41c1708ae2d6b20844b3fa7
2026-02-14 04:32:58.009 DEBUG [src.node.docker_mananger] Container started with ID 63a59e2820a0. Setting up logs at ./log/docker/node1_2026-02-14_04-32-57__e430dcf5-1159-435a-9cb5-8f69a3e9a7ce__wakuorg_nwaku:latest.log
2026-02-14 04:32:58.009 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49969
2026-02-14 04:32:58.009 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:32:58.283 ERROR [src.node.docker_mananger] Max retries reached for container 05dfdb432d5a. Exiting log stream.
2026-02-14 04:32:58.603 ERROR [src.node.docker_mananger] Max retries reached for container a0c4a9fa2eec. Exiting log stream.
2026-02-14 04:32:59.010 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49969/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:32:59.013 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:32:59.013 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:32:59.013 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49969/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:32:59.015 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.191/tcp/49970/p2p/16Uiu2HAm6tuSBb6uahCgVR4tqsPCs7XZv23i5EFQeD77sRt3pdSJ","/ip4/172.18.249.191/tcp/49971/ws/p2p/16Uiu2HAm6tuSBb6uahCgVR4tqsPCs7XZv23i5EFQeD77sRt3pdSJ"],"enrUri":"enr:-L24QBIFNc_gZsmj6mOGHGAwGSfAdWhrAtUmnc30B3Hd3K1LATI5s7QWhptdRn7MIPyKHcFklP6-ID5P4YOgwksdIlUCgmlkgnY0gmlwhKwS-b-KbXVsdGlhZGRyc5YACASsEvm_BsMyAAoErBL5vwbDM90DgnJzhQADAQAAiXNlY3AyNTZrMaECqmpzn0Sji6xgrNhi91jOXs89YzjgCrDG_ZF2ljaMQiODdGNwgsMyg3VkcILDNIV3YWt1MgU"}'
2026-02-14 04:32:59.016 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:32:59.016 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-14 04:32:59.023 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:32:59.023 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-14_04-32-57__e430dcf5-1159-435a-9cb5-8f69a3e9a7ce__wakuorg_nwaku:latest.log
2026-02-14 04:32:59.023 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:32:59.023 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:32:59.025 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:32:59.025 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.239.112
2026-02-14 04:32:59.025 DEBUG [src.node.docker_mananger] Generated ports ['53713', '53714', '53715', '53716', '53717']
2026-02-14 04:32:59.025 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:32:59.025 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:32:59.026 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:32:59.026 DEBUG [src.node.docker_mananger] docker run -i -t -p 53713:53713 -p 53714:53714 -p 53715:53715 -p 53716:53716 -p 53717:53717 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53715 --rest-port=53713 --tcp-port=53714 --discv5-udp-port=53716 --rest-address=0.0.0.0 --nat=extip:172.18.239.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b81df1ab3e4a10ccddb8ecddb6a67dde6f22952b24cafbf0e4cb61f4d270a32f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53717 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBIFNc_gZsmj6mOGHGAwGSfAdWhrAtUmnc30B3Hd3K1LATI5s7QWhptdRn7MIPyKHcFklP6-ID5P4YOgwksdIlUCgmlkgnY0gmlwhKwS-b-KbXVsdGlhZGRyc5YACASsEvm_BsMyAAoErBL5vwbDM90DgnJzhQADAQAAiXNlY3AyNTZrMaECqmpzn0Sji6xgrNhi91jOXs89YzjgCrDG_ZF2ljaMQiODdGNwgsMyg3VkcILDNIV3YWt1MgU --filternode=/ip4/172.18.249.191/tcp/49970/p2p/16Uiu2HAm6tuSBb6uahCgVR4tqsPCs7XZv23i5EFQeD77sRt3pdSJ
2026-02-14 04:32:59.218 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.239.112 waku 42e7459738c0160b33f1595dbbd07d82533d37866ee10ec6626bdf1fb8e64935
2026-02-14 04:32:59.263 DEBUG [src.node.docker_mananger] Container started with ID 42e7459738c0. Setting up logs at ./log/docker/node2_2026-02-14_04-32-57__e430dcf5-1159-435a-9cb5-8f69a3e9a7ce__wakuorg_nwaku:latest.log
2026-02-14 04:32:59.264 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53713
2026-02-14 04:32:59.264 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:33:00.264 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53713/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:00.267 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:33:00.267 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:33:00.268 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53713/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:00.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.112/tcp/53714/p2p/16Uiu2HAm8hV9cg2inD4n4Es6Rww3J9uvL8MQ3mGvRpN2QRedkZUZ","/ip4/172.18.239.112/tcp/53715/ws/p2p/16Uiu2HAm8hV9cg2inD4n4Es6Rww3J9uvL8MQ3mGvRpN2QRedkZUZ"],"enrUri":"enr:-L24QHsAtD_-2R7k0QI_znCKI-4Dtve5GXyWSFStyDv2gXTDDSg2Wr5zLLBWSJCx0UZ3cMPF-zNZ2FjZmyZe2ZRKSVUCgmlkgnY0gmlwhKwS73CKbXVsdGlhZGRyc5YACASsEu9wBtHSAAoErBLvcAbR090DgnJzhQADAQAAiXNlY3AyNTZrMaECxTT6CzkyIkAXVxoY4791aimlYAxJTzJcu0WA-1ac3FaDdGNwgtHSg3VkcILR1IV3YWt1MgA"}'
2026-02-14 04:33:00.270 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:33:00.270 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53713/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.249.191/tcp/49970/p2p/16Uiu2HAm6tuSBb6uahCgVR4tqsPCs7XZv23i5EFQeD77sRt3pdSJ"]'
2026-02-14 04:33:00.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:00.307 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-14 04:33:00.308 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49969/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-14 04:33:00.327 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:00.329 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53713/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9a102cff-7f2d-4fc3-b1d4-fc388a757427", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-14 04:33:00.342 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"9a102cff-7f2d-4fc3-b1d4-fc388a757427","statusDesc":"OK"}'
2026-02-14 04:33:00.344 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49969/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "version": 10}'
2026-02-14 04:33:00.351 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:33:00.351 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-14 04:33:00.451 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-14 04:33:00.452 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53713/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:33:00.454 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":10,"timestamp":1771043580343878671,"ephemeral":false}]'
2026-02-14 04:33:00.458 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-14 04:33:00.458 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-14 04:33:00.459 DEBUG [src.node.waku_node] Stopping container with id 63a59e2820a0
2026-02-14 04:33:00.703 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:33:00.704 DEBUG [src.node.waku_node] Stopping container with id 42e7459738c0
2026-02-14 04:33:00.982 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:33:00.984 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-14 04:33:00.993 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:33:01.002 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
