2026-02-14 04:31:54.671 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-14 04:31:54.672 DEBUG [tests.conftest] Running test: test_lightpush with id: 2026-02-14_04-31-54__dc577aba-d40a-42eb-8da1-8d7328ee2755
2026-02-14 04:31:54.673 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-14 04:31:54.673 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-14 04:31:54.673 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-14 04:31:54.673 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-14 04:31:54.674 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-14 04:31:54.680 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:31:54.680 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-14_04-31-54__dc577aba-d40a-42eb-8da1-8d7328ee2755__wakuorg_nwaku:latest.log
2026-02-14 04:31:54.681 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:31:54.681 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:31:54.682 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:31:54.682 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.156.45
2026-02-14 04:31:54.683 DEBUG [src.node.docker_mananger] Generated ports ['20321', '20322', '20323', '20324', '20325']
2026-02-14 04:31:54.683 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:31:54.683 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:31:54.683 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:31:54.683 DEBUG [src.node.docker_mananger] docker run -i -t -p 20321:20321 -p 20322:20322 -p 20323:20323 -p 20324:20324 -p 20325:20325 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20323 --rest-port=20321 --tcp-port=20322 --discv5-udp-port=20324 --rest-address=0.0.0.0 --nat=extip:172.18.156.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbbc5caedc2e3a4767dd3decdacbbca94eb4cc33b99de2ad7ce2f76e9d8b09e1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20325 --metrics-logging=true --lightpush=true --relay=true
2026-02-14 04:31:54.879 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.156.45 waku bd118e0231d5e241b16c377022874d49800b6e6d372967a28f76f10e06481d55
2026-02-14 04:31:54.925 DEBUG [src.node.docker_mananger] Container started with ID bd118e0231d5. Setting up logs at ./log/docker/node1_2026-02-14_04-31-54__dc577aba-d40a-42eb-8da1-8d7328ee2755__wakuorg_nwaku:latest.log
2026-02-14 04:31:54.925 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20321
2026-02-14 04:31:54.925 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:31:55.220 ERROR [src.node.docker_mananger] Max retries reached for container ea09ea9892b7. Exiting log stream.
2026-02-14 04:31:55.481 ERROR [src.node.docker_mananger] Max retries reached for container 1df9bdf9a0a5. Exiting log stream.
2026-02-14 04:31:55.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20321/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:31:55.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:31:55.929 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:31:55.929 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20321/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:31:55.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.45/tcp/20322/p2p/16Uiu2HAmGcEaxXAUhfxgRPDVK8efkyUBX1C1X3ptV89KSYavXBW5","/ip4/172.18.156.45/tcp/20323/ws/p2p/16Uiu2HAmGcEaxXAUhfxgRPDVK8efkyUBX1C1X3ptV89KSYavXBW5"],"enrUri":"enr:-L24QEk9MEd_zZDMiBNDb_XnPdarpSPGO_-R5d01eyv_VSpZL41Qg_KBQ-ow0UYFVyK3pPRGr1RZdNmRa4p9VqRzJgECgmlkgnY0gmlwhKwSnC2KbXVsdGlhZGRyc5YACASsEpwtBk9iAAoErBKcLQZPY90DgnJzhQADAQAAiXNlY3AyNTZrMaEDOroaAbH3VZPQJanJASQemh6HGKK5EWsHTAkPmg417t6DdGNwgk9ig3VkcIJPZIV3YWt1Mgk"}'
2026-02-14 04:31:55.932 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:31:55.939 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:31:55.939 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-14_04-31-54__dc577aba-d40a-42eb-8da1-8d7328ee2755__wakuorg_nwaku:latest.log
2026-02-14 04:31:55.939 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:31:55.939 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:31:55.941 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:31:55.941 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.142.162
2026-02-14 04:31:55.941 DEBUG [src.node.docker_mananger] Generated ports ['43171', '43172', '43173', '43174', '43175']
2026-02-14 04:31:55.941 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:31:55.941 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:31:55.941 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:31:55.941 DEBUG [src.node.docker_mananger] docker run -i -t -p 43171:43171 -p 43172:43172 -p 43173:43173 -p 43174:43174 -p 43175:43175 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43173 --rest-port=43171 --tcp-port=43172 --discv5-udp-port=43174 --rest-address=0.0.0.0 --nat=extip:172.18.142.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=43dedd4d65c2cfb2dc30a74905e5efdfccdaa6e2967eaabf44f7b9d42e2aaa08 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43175 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QEk9MEd_zZDMiBNDb_XnPdarpSPGO_-R5d01eyv_VSpZL41Qg_KBQ-ow0UYFVyK3pPRGr1RZdNmRa4p9VqRzJgECgmlkgnY0gmlwhKwSnC2KbXVsdGlhZGRyc5YACASsEpwtBk9iAAoErBKcLQZPY90DgnJzhQADAQAAiXNlY3AyNTZrMaEDOroaAbH3VZPQJanJASQemh6HGKK5EWsHTAkPmg417t6DdGNwgk9ig3VkcIJPZIV3YWt1Mgk
2026-02-14 04:31:56.135 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.142.162 waku 02990913ec02873f02baf9dd39389860843fe652209718e2a60089ce0ebcf58c
2026-02-14 04:31:56.183 DEBUG [src.node.docker_mananger] Container started with ID 02990913ec02. Setting up logs at ./log/docker/node1_2026-02-14_04-31-54__dc577aba-d40a-42eb-8da1-8d7328ee2755__wakuorg_nwaku:latest.log
2026-02-14 04:31:56.183 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43171
2026-02-14 04:31:56.184 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:31:57.184 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43171/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:31:57.200 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:31:57.201 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:31:57.202 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43171/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:31:57.209 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.162/tcp/43172/p2p/16Uiu2HAmNsiWedp1yLSvmfCaCnUFJsHZuMZSui15shSemoRgANfA","/ip4/172.18.142.162/tcp/43173/ws/p2p/16Uiu2HAmNsiWedp1yLSvmfCaCnUFJsHZuMZSui15shSemoRgANfA"],"enrUri":"enr:-L24QF8VYyUnsrWzzdeABGPvSjG3hVDADovMQZGm1GmsKsocYFww7fZYxp38Nz9NvGuDEPiu9bxWSG1khomp-jgXzTQCgmlkgnY0gmlwhKwSjqKKbXVsdGlhZGRyc5YACASsEo6iBqikAAoErBKOogaopd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDl9eC0GVCH6OSuBD3wgfnlwf66YV1Di3MD0OkP2oPmPGDdGNwgqikg3VkcIKopoV3YWt1MgE"}'
2026-02-14 04:31:57.211 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:31:57.218 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-14 04:31:57.218 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-14_04-31-54__dc577aba-d40a-42eb-8da1-8d7328ee2755__wakuorg_nwaku:latest.log
2026-02-14 04:31:57.218 DEBUG [src.node.waku_node] Starting Node...
2026-02-14 04:31:57.218 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-14 04:31:57.220 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-14 04:31:57.220 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.205.109
2026-02-14 04:31:57.220 DEBUG [src.node.docker_mananger] Generated ports ['26378', '26379', '26380', '26381', '26382']
2026-02-14 04:31:57.220 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-14 04:31:57.220 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-14 04:31:57.220 DEBUG [src.node.waku_node] Using volumes []
2026-02-14 04:31:57.220 DEBUG [src.node.docker_mananger] docker run -i -t -p 26378:26378 -p 26379:26379 -p 26380:26380 -p 26381:26381 -p 26382:26382 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26380 --rest-port=26378 --tcp-port=26379 --discv5-udp-port=26381 --rest-address=0.0.0.0 --nat=extip:172.18.205.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aebbcbc6117bd2f4efc69decabacbd4d6ba12c175d8ee69bf8d77e4f88eacbdb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26382 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-L24QEk9MEd_zZDMiBNDb_XnPdarpSPGO_-R5d01eyv_VSpZL41Qg_KBQ-ow0UYFVyK3pPRGr1RZdNmRa4p9VqRzJgECgmlkgnY0gmlwhKwSnC2KbXVsdGlhZGRyc5YACASsEpwtBk9iAAoErBKcLQZPY90DgnJzhQADAQAAiXNlY3AyNTZrMaEDOroaAbH3VZPQJanJASQemh6HGKK5EWsHTAkPmg417t6DdGNwgk9ig3VkcIJPZIV3YWt1Mgk --lightpushnode=/ip4/172.18.156.45/tcp/20322/p2p/16Uiu2HAmGcEaxXAUhfxgRPDVK8efkyUBX1C1X3ptV89KSYavXBW5
2026-02-14 04:31:57.416 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.205.109 waku 54ea1d8f0c0cda9ae889ec9ecfaa09cf787bd5221520c7af240c446437bbb7a6
2026-02-14 04:31:57.466 DEBUG [src.node.docker_mananger] Container started with ID 54ea1d8f0c0c. Setting up logs at ./log/docker/node1_2026-02-14_04-31-54__dc577aba-d40a-42eb-8da1-8d7328ee2755__wakuorg_nwaku:latest.log
2026-02-14 04:31:57.467 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26378
2026-02-14 04:31:57.467 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-14 04:31:58.467 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26378/health" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:31:58.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","connectionStatus":"Disconnected","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"},{"Rln Relay":"NOT_MOUNTED"}]}'
2026-02-14 04:31:58.471 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-14 04:31:58.471 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26378/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:31:58.473 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.109/tcp/26379/p2p/16Uiu2HAky8N4EUKvrK7T5iVRCGMdPCfBfHn7Ta36p3r2fpPyeRjF","/ip4/172.18.205.109/tcp/26380/ws/p2p/16Uiu2HAky8N4EUKvrK7T5iVRCGMdPCfBfHn7Ta36p3r2fpPyeRjF"],"enrUri":"enr:-L24QJ_WygvhUuSFZ1hozrrwiGh0sF5pVELgcq3SXwjwBY2OQBi71nkwaP4ddQCccRZPFfPGvk38YvKDxIDfTG9jpxsCgmlkgnY0gmlwhKwSzW2KbXVsdGlhZGRyc5YACASsEs1tBmcLAAoErBLNbQZnDN0DgnJzhQADAQAAiXNlY3AyNTZrMaECNv-bmxLtK8EpD2b0swWprWDe7aSPCS6C17p8tSmho7qDdGNwgmcLg3VkcIJnDYV3YWt1Mgk"}'
2026-02-14 04:31:58.473 INFO [src.node.waku_node] REST service is ready !!
2026-02-14 04:31:58.474 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20321/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-14 04:31:58.478 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:31:58.478 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43171/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-14 04:31:58.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:31:58.486 DEBUG [src.steps.light_push] Lightpushing message
2026-02-14 04:31:58.489 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26378/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1771043518486581808}}'
2026-02-14 04:31:58.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-14 04:31:58.539 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-14 04:31:58.640 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2026-02-14 04:31:58.640 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20321/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:31:58.643 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1771043518486581808,"ephemeral":false,"proof":""}]'
2026-02-14 04:31:58.645 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2026-02-14 04:31:58.645 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43171/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-14 04:31:58.647 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1771043518486581808,"ephemeral":false,"proof":""}]'
2026-02-14 04:31:58.650 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-14 04:31:58.651 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-14 04:31:58.651 DEBUG [src.node.waku_node] Stopping container with id bd118e0231d5
2026-02-14 04:31:58.913 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:31:58.914 DEBUG [src.node.waku_node] Stopping container with id 02990913ec02
2026-02-14 04:31:59.173 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:31:59.174 DEBUG [src.node.waku_node] Stopping container with id 54ea1d8f0c0c
2026-02-14 04:31:59.412 DEBUG [src.node.waku_node] Container stopped.
2026-02-14 04:31:59.413 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-14 04:31:59.428 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:31:59.437 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-14 04:31:59.450 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
