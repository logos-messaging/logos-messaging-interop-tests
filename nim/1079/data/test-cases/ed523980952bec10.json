{"uid":"ed523980952bec10","name":"test_cant_publish_on_not_subscribed_shard","fullName":"tests.sharding.test_relay_static_sharding.TestRelayStaticSharding#test_cant_publish_on_not_subscribed_shard","historyId":"ffca3b8c620bebd3c2fd29550d6e4bc2","time":{"start":1771044011751,"stop":1771044014349,"duration":2598},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1771043540045,"stop":1771043540045,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1771044011746,"stop":1771044011746,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1771044011746,"stop":1771044011747,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1771044011746,"stop":1771044011746,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1771044011747,"stop":1771044011748,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1771044011748,"stop":1771044011748,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1771044011748,"stop":1771044011749,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1771044011749,"stop":1771044011749,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sharding_setup","time":{"start":1771044011749,"stop":1771044011749,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"setup_main_relay_nodes","time":{"start":1771044011751,"stop":1771044014339,"duration":2588},"status":"passed","steps":[{"name":"setup_first_relay_node_with_filter","time":{"start":1771044011752,"stop":1771044013039,"duration":1287},"status":"passed","steps":[{"name":"setup_first_relay_node","time":{"start":1771044011752,"stop":1771044013039,"duration":1287},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"filter","value":"'true'"},{"name":"pubsub_topic","value":"'/waku/2/rs/2/0'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"'/waku/2/rs/2/0'"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_second_relay_node","time":{"start":1771044013039,"stop":1771044014339,"duration":1300},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1771044014335,"stop":1771044014339,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.sharding.test_relay_static_sharding.TestRelayStaticSharding object at 0x7ff755b62f60>, <src.node.waku_node.WakuNode object at 0x7ff755997c20>, ['/ip4/172.18.225.187/tcp/5455/p2p/16Uiu2HAkztfVHv5q1LJ787ffEH11zcJoEyqDRUCGM81Rtnhk7LVN'])"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"'/waku/2/rs/2/0'"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"'/waku/2/rs/2/0'"}],"stepsCount":4,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1771044014339,"stop":1771044014345,"duration":6},"status":"passed","steps":[{"name":"subscribe_relay_node","time":{"start":1771044014339,"stop":1771044014342,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7ff75557ac00>"},{"name":"content_topics","value":"None"},{"name":"pubsub_topics","value":"['/waku/2/rs/2/0']"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_relay_node","time":{"start":1771044014342,"stop":1771044014345,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7ff755997c20>"},{"name":"content_topics","value":"None"},{"name":"pubsub_topics","value":"['/waku/2/rs/2/0']"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topics","value":"None"},{"name":"pubsub_topics","value":"['/waku/2/rs/2/0']"}],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_publish_fails_on_not_subscribed_pubsub_topic","time":{"start":1771044014345,"stop":1771044014349,"duration":4},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1771044014345,"stop":1771044014349,"duration":4},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:5454/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1 with response: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/steps/sharding.py\", line 155, in check_published_message_reaches_relay_peer\n    self.relay_message(sender, message, pubsub_topic)\n  File \"/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/steps/sharding.py\", line 134, in relay_message\n    node.send_relay_message(message, pubsub_topic)\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/node/waku_node.py\", line 348, in send_relay_message\n    return self._api.send_relay_message(message, pubsub_topic)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/node/api_clients/rest.py\", line 51, in send_relay_message\n    return self.rest_call(\"post\", f\"relay/v1/messages/{quote(pubsub_topic, safe='')}\", json.dumps(message))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_message","time":{"start":1771044014345,"stop":1771044014345,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_message","time":{"start":1771044014345,"stop":1771044014348,"duration":3},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:5454/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1 with response: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/steps/sharding.py\", line 134, in relay_message\n    node.send_relay_message(message, pubsub_topic)\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/node/waku_node.py\", line 348, in send_relay_message\n    return self._api.send_relay_message(message, pubsub_topic)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/node/api_clients/rest.py\", line 51, in send_relay_message\n    return self.rest_call(\"post\", f\"relay/v1/messages/{quote(pubsub_topic, safe='')}\", json.dumps(message))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/logos-messaging-interop-tests/logos-messaging-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7ff75557ac00>"},{"name":"message","value":"{'payload': 'U2hhcmRpbmcgd29ya3MhIQ==', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1771044014345160226}"},{"name":"pubsub_topic","value":"'/waku/2/rs/2/1'"}],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topic","value":"None"},{"name":"pubsub_topic","value":"'/waku/2/rs/2/1'"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"'/waku/2/rs/2/1'"}],"stepsCount":3,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"817010304231a639","name":"log","source":"817010304231a639.txt","type":"text/plain","size":13090},{"uid":"484ce8faa29dc73f","name":"stderr","source":"484ce8faa29dc73f.txt","type":"text/plain","size":12749}],"parameters":[],"stepsCount":12,"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1771044014350,"stop":1771044014351,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1771044014352,"stop":1771044014911,"duration":559},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1771044014912,"stop":1771044014925,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1771044014926,"stop":1771044014926,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1771044143125,"stop":1771044143125,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.sharding"},{"name":"suite","value":"test_relay_static_sharding"},{"name":"subSuite","value":"TestRelayStaticSharding"},{"name":"host","value":"runnervmjduv7"},{"name":"thread","value":"2702-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.sharding.test_relay_static_sharding"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":19,"unknown":0,"total":19},"items":[{"uid":"97ce2385f990b159","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1078/#testresult/97ce2385f990b159","status":"passed","time":{"start":1770957885871,"stop":1770957888442,"duration":2571}},{"uid":"15d65b41d5a2eb60","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1077/#testresult/15d65b41d5a2eb60","status":"passed","time":{"start":1770871601104,"stop":1770871603614,"duration":2510}},{"uid":"d8f4adc68c592aad","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1076/#testresult/d8f4adc68c592aad","status":"passed","time":{"start":1770785454643,"stop":1770785457175,"duration":2532}},{"uid":"c05f39c014ee4ba4","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1075/#testresult/c05f39c014ee4ba4","status":"passed","time":{"start":1770699066670,"stop":1770699069166,"duration":2496}},{"uid":"bef34464aac990d8","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1074/#testresult/bef34464aac990d8","status":"passed","time":{"start":1770612573503,"stop":1770612576017,"duration":2514}},{"uid":"b62607e62c0bbc68","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1073/#testresult/b62607e62c0bbc68","status":"passed","time":{"start":1770526295378,"stop":1770526297866,"duration":2488}},{"uid":"6d9d630ebc8a3cd5","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1072/#testresult/6d9d630ebc8a3cd5","status":"passed","time":{"start":1770439029247,"stop":1770439031663,"duration":2416}},{"uid":"549b7552535bbd4c","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1071/#testresult/549b7552535bbd4c","status":"passed","time":{"start":1770352847791,"stop":1770352850288,"duration":2497}},{"uid":"bfa063054c67dc0","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1070/#testresult/bfa063054c67dc0","status":"passed","time":{"start":1770266416994,"stop":1770266419501,"duration":2507}},{"uid":"ea65691930c39fff","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1069/#testresult/ea65691930c39fff","status":"passed","time":{"start":1770225398496,"stop":1770225400984,"duration":2488}},{"uid":"9532717e2290a2b","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1068/#testresult/9532717e2290a2b","status":"passed","time":{"start":1770206467282,"stop":1770206469692,"duration":2410}},{"uid":"477fbed67706c4ae","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1067/#testresult/477fbed67706c4ae","status":"passed","time":{"start":1770179939210,"stop":1770179941722,"duration":2512}},{"uid":"fcce31abf0b85ec7","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1066/#testresult/fcce31abf0b85ec7","status":"passed","time":{"start":1770093706119,"stop":1770093708550,"duration":2431}},{"uid":"8476b0bef28bd5b5","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1065/#testresult/8476b0bef28bd5b5","status":"passed","time":{"start":1770007671915,"stop":1770007674417,"duration":2502}},{"uid":"11200aba6333bb7e","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1064/#testresult/11200aba6333bb7e","status":"passed","time":{"start":1769921411529,"stop":1769921414045,"duration":2516}},{"uid":"6741ad5afbfd04ee","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1063/#testresult/6741ad5afbfd04ee","status":"passed","time":{"start":1769834231702,"stop":1769834234191,"duration":2489}},{"uid":"2459c0bcbf8a16a9","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1062/#testresult/2459c0bcbf8a16a9","status":"passed","time":{"start":1769747904532,"stop":1769747907021,"duration":2489}},{"uid":"443069bda5326f31","reportUrl":"https://logos-messaging.github.io/logos-messaging-interop-tests/nim/1061/#testresult/443069bda5326f31","status":"passed","time":{"start":1769663096301,"stop":1769663098785,"duration":2484}}]},"tags":[]},"source":"ed523980952bec10.json","parameterValues":[]}