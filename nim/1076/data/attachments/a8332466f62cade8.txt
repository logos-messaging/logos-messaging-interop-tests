2026-02-11 04:45:26.353 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-11 04:45:26.353 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_multiple_overlapping_content_topics with id: 2026-02-11_04-45-26__8bbff17d-6e11-43dd-bb24-9505987896aa
2026-02-11 04:45:26.354 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-11 04:45:26.354 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-11 04:45:26.354 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-11 04:45:26.360 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:45:26.360 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-11_04-45-26__8bbff17d-6e11-43dd-bb24-9505987896aa__wakuorg_nwaku:latest.log
2026-02-11 04:45:26.361 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:45:26.361 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:45:26.362 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:45:26.362 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.156.72
2026-02-11 04:45:26.362 DEBUG [src.node.docker_mananger] Generated ports ['55404', '55405', '55406', '55407', '55408']
2026-02-11 04:45:26.362 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:45:26.362 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:45:26.363 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:45:26.363 DEBUG [src.node.docker_mananger] docker run -i -t -p 55404:55404 -p 55405:55405 -p 55406:55406 -p 55407:55407 -p 55408:55408 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55406 --rest-port=55404 --tcp-port=55405 --discv5-udp-port=55407 --rest-address=0.0.0.0 --nat=extip:172.18.156.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=67d938e5dac3577af7d4eb2cc46fbf1ee3efd2631b5eff51401dcb6f6d8e6207 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55408 --metrics-logging=true --relay=true --filter=true
2026-02-11 04:45:26.549 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.156.72 waku 08bb69b65c9f2ab625f9a20099ef130cae4a9acf6d8e4b702c4ce4c4ce864c24
2026-02-11 04:45:26.579 DEBUG [src.node.docker_mananger] Container started with ID 08bb69b65c9f. Setting up logs at ./log/docker/node1_2026-02-11_04-45-26__8bbff17d-6e11-43dd-bb24-9505987896aa__wakuorg_nwaku:latest.log
2026-02-11 04:45:26.580 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55404
2026-02-11 04:45:26.580 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:45:26.626 ERROR [src.node.docker_mananger] Max retries reached for container 5a0ad1824b02. Exiting log stream.
2026-02-11 04:45:27.150 ERROR [src.node.docker_mananger] Max retries reached for container 2229ec1a27a9. Exiting log stream.
2026-02-11 04:45:27.580 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55404/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:27.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:45:27.584 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:45:27.584 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55404/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:27.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.72/tcp/55405/p2p/16Uiu2HAmVYdhPncQV1W41dYkdq4z6hz9DsmWRJ3ieSrXR7t7iERV","/ip4/172.18.156.72/tcp/55406/ws/p2p/16Uiu2HAmVYdhPncQV1W41dYkdq4z6hz9DsmWRJ3ieSrXR7t7iERV"],"enrUri":"enr:-L24QAjrPhd0EU-QUVj0ybaIeP8CdCs9RD8U4qd6I452k-EladURRIFTwO5os_NmXdWVaNKIhycRuHS3MJi9DjuMfTACgmlkgnY0gmlwhKwSnEiKbXVsdGlhZGRyc5YACASsEpxIBthtAAoErBKcSAbYbt0DgnJzhQADAQAAiXNlY3AyNTZrMaED-vXXDNIpuEgxC0r22bTccxevH7mV4jNRqBrSmWKRc4iDdGNwgthtg3VkcILYb4V3YWt1MgU"}'
2026-02-11 04:45:27.586 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:45:27.587 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-11 04:45:27.593 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:45:27.593 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-11_04-45-26__8bbff17d-6e11-43dd-bb24-9505987896aa__wakuorg_nwaku:latest.log
2026-02-11 04:45:27.593 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:45:27.594 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:45:27.595 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:45:27.595 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.154.50
2026-02-11 04:45:27.595 DEBUG [src.node.docker_mananger] Generated ports ['35640', '35641', '35642', '35643', '35644']
2026-02-11 04:45:27.595 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:45:27.596 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:45:27.596 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:45:27.596 DEBUG [src.node.docker_mananger] docker run -i -t -p 35640:35640 -p 35641:35641 -p 35642:35642 -p 35643:35643 -p 35644:35644 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35642 --rest-port=35640 --tcp-port=35641 --discv5-udp-port=35643 --rest-address=0.0.0.0 --nat=extip:172.18.154.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c4b60d407a5e0e15fbb115e3a9959542cc3d2ddeda8fea691c41aad10aefec1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35644 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QAjrPhd0EU-QUVj0ybaIeP8CdCs9RD8U4qd6I452k-EladURRIFTwO5os_NmXdWVaNKIhycRuHS3MJi9DjuMfTACgmlkgnY0gmlwhKwSnEiKbXVsdGlhZGRyc5YACASsEpxIBthtAAoErBKcSAbYbt0DgnJzhQADAQAAiXNlY3AyNTZrMaED-vXXDNIpuEgxC0r22bTccxevH7mV4jNRqBrSmWKRc4iDdGNwgthtg3VkcILYb4V3YWt1MgU --filternode=/ip4/172.18.156.72/tcp/55405/p2p/16Uiu2HAmVYdhPncQV1W41dYkdq4z6hz9DsmWRJ3ieSrXR7t7iERV
2026-02-11 04:45:27.783 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.154.50 waku 19285cdd43bd53ef6457a1a9f744eca8ed0465cbacf46d1ddef7b6c22db18950
2026-02-11 04:45:27.814 DEBUG [src.node.docker_mananger] Container started with ID 19285cdd43bd. Setting up logs at ./log/docker/node2_2026-02-11_04-45-26__8bbff17d-6e11-43dd-bb24-9505987896aa__wakuorg_nwaku:latest.log
2026-02-11 04:45:27.814 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35640
2026-02-11 04:45:27.814 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:45:28.815 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35640/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:28.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-11 04:45:28.819 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:45:28.819 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35640/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:28.822 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.50/tcp/35641/p2p/16Uiu2HAmBm2HVttW46YX1Es8z1ZG7aBGgHUkbz2L6mZySbij9uRv","/ip4/172.18.154.50/tcp/35642/ws/p2p/16Uiu2HAmBm2HVttW46YX1Es8z1ZG7aBGgHUkbz2L6mZySbij9uRv"],"enrUri":"enr:-L24QISElA6jH4Y1WGWKfYa2dteDu6DD1Bzp5U_lykFg8MU9BPiY42hWbbrvtd5qUI9CU5Iv63-8Znm1iQMc5g58K9YCgmlkgnY0gmlwhKwSmjKKbXVsdGlhZGRyc5YACASsEpoyBos5AAoErBKaMgaLOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8q_8RU9eR4uRMfKZLFqGQB32WaqKzL_iva_6DRGIuHWDdGNwgos5g3VkcIKLO4V3YWt1MgA"}'
2026-02-11 04:45:28.822 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:45:28.822 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35640/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.156.72/tcp/55405/p2p/16Uiu2HAmVYdhPncQV1W41dYkdq4z6hz9DsmWRJ3ieSrXR7t7iERV"]'
2026-02-11 04:45:28.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:28.856 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55404/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-11 04:45:28.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:28.868 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35640/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5eb5d07a-279f-4c21-ae95-c4bead6e18d8", "contentFilters": ["Hello World!", "1234567890", "{\"key\": \"value\"}"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-11 04:45:28.882 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"5eb5d07a-279f-4c21-ae95-c4bead6e18d8","statusDesc":"OK"}'
2026-02-11 04:45:28.883 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55404/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-11 04:45:28.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:28.886 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35640/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e157381a-b0a0-4a6a-900d-e115e8572d81", "contentFilters": ["1234567890", "{\"key\": \"value\"}", "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-11 04:45:28.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e157381a-b0a0-4a6a-900d-e115e8572d81","statusDesc":"OK"}'
2026-02-11 04:45:28.896 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55404/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:45:28.904 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:28.904 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-11 04:45:29.005 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-11 04:45:29.005 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35640/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:29.008 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"Hello World!","version":0,"timestamp":1770785128896355199,"ephemeral":false}]'
2026-02-11 04:45:29.010 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55404/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:45:29.014 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:29.015 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-11 04:45:29.115 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-11 04:45:29.115 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35640/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:29.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1770785129009905982,"ephemeral":false}]'
2026-02-11 04:45:29.120 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55404/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "{\"key\": \"value\"}", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:45:29.125 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:29.125 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-11 04:45:29.225 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-11 04:45:29.226 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35640/filter/v2/messages/%7B%22key%22%3A%20%22value%22%7D" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:29.229 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"{\\"key\\": \\"value\\"}","version":0,"timestamp":1770785129120117753,"ephemeral":false}]'
2026-02-11 04:45:29.230 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55404/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:45:29.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:29.236 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-11 04:45:29.336 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-11 04:45:29.337 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35640/filter/v2/messages/%E8%BF%99%E6%98%AF%E4%B8%80%E4%BA%9B%E4%B8%AD%E6%96%87" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:29.340 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xba\x9b\xe4\xb8\xad\xe6\x96\x87","version":0,"timestamp":1770785129230781217,"ephemeral":false}]'
2026-02-11 04:45:29.343 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-11 04:45:29.343 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-11 04:45:29.344 DEBUG [src.node.waku_node] Stopping container with id 08bb69b65c9f
2026-02-11 04:45:29.866 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:45:29.866 DEBUG [src.node.waku_node] Stopping container with id 19285cdd43bd
2026-02-11 04:45:30.397 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:45:30.399 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-11 04:45:30.406 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:45:30.412 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
