2026-02-11 04:45:22.492 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-11 04:45:22.492 DEBUG [tests.conftest] Running test: test_time_filter_matches_multiple_messages with id: 2026-02-11_04-45-22__4a3c11a6-5cc5-49b7-9a84-b30fadebd48c
2026-02-11 04:45:22.493 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-11 04:45:22.494 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-11 04:45:22.494 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-11 04:45:22.502 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:45:22.502 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-11_04-45-22__4a3c11a6-5cc5-49b7-9a84-b30fadebd48c__wakuorg_nwaku:latest.log
2026-02-11 04:45:22.503 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:45:22.503 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:45:22.505 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:45:22.506 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.129.217
2026-02-11 04:45:22.506 DEBUG [src.node.docker_mananger] Generated ports ['46842', '46843', '46844', '46845', '46846']
2026-02-11 04:45:22.506 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:45:22.507 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:45:22.507 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:45:22.507 DEBUG [src.node.docker_mananger] docker run -i -t -p 46842:46842 -p 46843:46843 -p 46844:46844 -p 46845:46845 -p 46846:46846 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46844 --rest-port=46842 --tcp-port=46843 --discv5-udp-port=46845 --rest-address=0.0.0.0 --nat=extip:172.18.129.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=64955d543ae4f3bb0c6ba2ed88c5faeda23acf9c1a07699c5002a6e7080b16fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46846 --metrics-logging=true --store=true --relay=true
2026-02-11 04:45:22.680 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.129.217 waku b7ed69d9212c13f36f2e8a071af00b624f11e711df858205bf43bab9a76c16fd
2026-02-11 04:45:22.713 DEBUG [src.node.docker_mananger] Container started with ID b7ed69d9212c. Setting up logs at ./log/docker/publishing_node1_2026-02-11_04-45-22__4a3c11a6-5cc5-49b7-9a84-b30fadebd48c__wakuorg_nwaku:latest.log
2026-02-11 04:45:22.713 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46842
2026-02-11 04:45:22.715 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:45:22.750 ERROR [src.node.docker_mananger] Max retries reached for container e8cd2264c8a1. Exiting log stream.
2026-02-11 04:45:23.325 ERROR [src.node.docker_mananger] Max retries reached for container ea9dcfbe2484. Exiting log stream.
2026-02-11 04:45:23.716 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46842/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:23.720 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:45:23.720 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:45:23.720 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46842/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:23.722 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.217/tcp/46843/p2p/16Uiu2HAmAP7QpFbZRFgiNa3o17iEzKFAaadWVUec3TjTikhrqopy","/ip4/172.18.129.217/tcp/46844/ws/p2p/16Uiu2HAmAP7QpFbZRFgiNa3o17iEzKFAaadWVUec3TjTikhrqopy"],"enrUri":"enr:-L24QDiXuEAToRmI4u91UeVTXoTZnLM89u_5R4_kJ6B0JXiLQIrAf2pJKwe_kcAHsH77l4Y0BzOe_UBFXsTEkz-o0rMCgmlkgnY0gmlwhKwSgdmKbXVsdGlhZGRyc5YACASsEoHZBrb7AAoErBKB2Qa2_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3jdRHauJv5JVsd2B848W8rlN8dU8XzxjjRGhQhUq8SaDdGNwgrb7g3VkcIK2_YV3YWt1MgM"}'
2026-02-11 04:45:23.723 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:45:23.730 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:45:23.730 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-11_04-45-22__4a3c11a6-5cc5-49b7-9a84-b30fadebd48c__wakuorg_nwaku:latest.log
2026-02-11 04:45:23.730 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:45:23.730 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:45:23.731 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:45:23.731 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.87.87
2026-02-11 04:45:23.731 DEBUG [src.node.docker_mananger] Generated ports ['35460', '35461', '35462', '35463', '35464']
2026-02-11 04:45:23.732 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:45:23.732 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:45:23.732 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:45:23.732 DEBUG [src.node.docker_mananger] docker run -i -t -p 35460:35460 -p 35461:35461 -p 35462:35462 -p 35463:35463 -p 35464:35464 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35462 --rest-port=35460 --tcp-port=35461 --discv5-udp-port=35463 --rest-address=0.0.0.0 --nat=extip:172.18.87.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8f27ee192fe81ffdcb0be80695ecbfa5c6ee2cf3af064c27ad114be3e4634dcd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35464 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDiXuEAToRmI4u91UeVTXoTZnLM89u_5R4_kJ6B0JXiLQIrAf2pJKwe_kcAHsH77l4Y0BzOe_UBFXsTEkz-o0rMCgmlkgnY0gmlwhKwSgdmKbXVsdGlhZGRyc5YACASsEoHZBrb7AAoErBKB2Qa2_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3jdRHauJv5JVsd2B848W8rlN8dU8XzxjjRGhQhUq8SaDdGNwgrb7g3VkcIK2_YV3YWt1MgM --storenode=/ip4/172.18.129.217/tcp/46843/p2p/16Uiu2HAmAP7QpFbZRFgiNa3o17iEzKFAaadWVUec3TjTikhrqopy --store=true --relay=true
2026-02-11 04:45:23.913 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.87.87 waku dbf47d572745f136cce01525eafa1e445361c5e46d43e6efa38ac2f2a29d3384
2026-02-11 04:45:23.946 DEBUG [src.node.docker_mananger] Container started with ID dbf47d572745. Setting up logs at ./log/docker/store_node1_2026-02-11_04-45-22__4a3c11a6-5cc5-49b7-9a84-b30fadebd48c__wakuorg_nwaku:latest.log
2026-02-11 04:45:23.947 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35460
2026-02-11 04:45:23.948 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:45:24.948 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35460/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:24.952 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:45:24.952 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:45:24.953 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35460/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:24.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.87/tcp/35461/p2p/16Uiu2HAmLUdx6yv2QcDaejNtJy4U26aNzuhR8oV9Mt9oRSEwc6t8","/ip4/172.18.87.87/tcp/35462/ws/p2p/16Uiu2HAmLUdx6yv2QcDaejNtJy4U26aNzuhR8oV9Mt9oRSEwc6t8"],"enrUri":"enr:-L24QABSu9DzWI1Fa1OrsqbQaKn5EqHfplDUab7ysL0dheK3bX8ewXJYwdt5JXmzV4VYNx6b7OGsblpOxCXd-G0w-u8CgmlkgnY0gmlwhKwSV1eKbXVsdGlhZGRyc5YACASsEldXBoqFAAoErBJXVwaKht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdDafCaIoGgS2OCcq-Li5hk8jgmFDPT89L6r_EAbE_YGDdGNwgoqFg3VkcIKKh4V3YWt1MgM"}'
2026-02-11 04:45:24.955 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:45:24.955 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35460/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.129.217/tcp/46843/p2p/16Uiu2HAmAP7QpFbZRFgiNa3o17iEzKFAaadWVUec3TjTikhrqopy"]'
2026-02-11 04:45:24.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:24.958 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46842/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-11 04:45:24.961 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:24.961 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35460/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-11 04:45:24.963 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:24.964 DEBUG [src.steps.store] Relaying message
2026-02-11 04:45:24.964 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46842/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:45:24.969 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:24.969 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:45:25.170 DEBUG [src.steps.store] Relaying message
2026-02-11 04:45:25.170 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46842/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:45:25.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:25.176 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:45:25.376 DEBUG [src.steps.store] Relaying message
2026-02-11 04:45:25.377 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46842/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:45:25.382 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:25.382 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:45:25.583 DEBUG [src.steps.store] Relaying message
2026-02-11 04:45:25.583 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46842/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:45:25.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:25.590 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:45:25.790 DEBUG [src.steps.store] Relaying message
2026-02-11 04:45:25.791 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46842/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:45:25.796 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:25.796 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:45:25.997 DEBUG [src.steps.store] Relaying message
2026-02-11 04:45:25.997 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46842/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:45:26.003 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:45:26.003 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:45:26.204 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46842/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1770785121964302944&endTime=1770785126964516000&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:26.208 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4d82f13b856b64415c4fcd56ec692599c93bacfdca09114fbc771f6230ad1503"},{"messageHash":"0x72500d802fcd0884fc824a1555f3be2ffa18be96d893894dfc6d560061672c0e"},{"messageHash":"0x35e9427396dd6332f9a31e24b07d6867051795a9f17c272d1713de8680cd0366"},{"messageHash":"0xaba59deb9c0013285997a3b52e2eb41e48e7c28a30afdb14248fe472e4fb9e1e"},{"messageHash":"0xfcb7d09323e9c10d24152625852d6abdd4a1c39044c26a392840eea8386cb754"}]}'
2026-02-11 04:45:26.208 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35460/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1770785121964302944&endTime=1770785126964516000&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:45:26.211 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4d82f13b856b64415c4fcd56ec692599c93bacfdca09114fbc771f6230ad1503"},{"messageHash":"0x72500d802fcd0884fc824a1555f3be2ffa18be96d893894dfc6d560061672c0e"},{"messageHash":"0x35e9427396dd6332f9a31e24b07d6867051795a9f17c272d1713de8680cd0366"},{"messageHash":"0xaba59deb9c0013285997a3b52e2eb41e48e7c28a30afdb14248fe472e4fb9e1e"},{"messageHash":"0xfcb7d09323e9c10d24152625852d6abdd4a1c39044c26a392840eea8386cb754"}]}'
2026-02-11 04:45:26.213 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-11 04:45:26.214 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-11 04:45:26.214 DEBUG [src.node.waku_node] Stopping container with id b7ed69d9212c
2026-02-11 04:45:26.747 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:45:26.747 DEBUG [src.node.waku_node] Stopping container with id dbf47d572745
2026-02-11 04:45:27.299 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:45:27.300 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-11 04:45:27.313 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:45:27.319 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
