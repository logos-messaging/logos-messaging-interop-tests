2026-02-11 04:46:45.676 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-11 04:46:45.677 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2026-02-11_04-46-45__ec0b896d-5704-412c-b6d2-1e907f115143
2026-02-11 04:46:45.677 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-11 04:46:45.677 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-11 04:46:45.683 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:46:45.683 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-11_04-46-45__ec0b896d-5704-412c-b6d2-1e907f115143__wakuorg_nwaku:latest.log
2026-02-11 04:46:45.683 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:46:45.683 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:46:45.684 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:46:45.684 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.167.198
2026-02-11 04:46:45.684 DEBUG [src.node.docker_mananger] Generated ports ['17305', '17306', '17307', '17308', '17309']
2026-02-11 04:46:45.684 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:46:45.685 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:46:45.685 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:46:45.685 DEBUG [src.node.docker_mananger] docker run -i -t -p 17305:17305 -p 17306:17306 -p 17307:17307 -p 17308:17308 -p 17309:17309 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17307 --rest-port=17305 --tcp-port=17306 --discv5-udp-port=17308 --rest-address=0.0.0.0 --nat=extip:172.18.167.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=120cfeafbff06b983ae3caa282dc4d1dedcfd8c997fe040f8a1c6e6fc7c9a61a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17309 --metrics-logging=true --lightpush=true --relay=true
2026-02-11 04:46:45.825 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.167.198 waku b7b7bf3859bf270f6b2e6719a5c440ba6cb977f869a6d21731abfc72f469ef49
2026-02-11 04:46:45.847 DEBUG [src.node.docker_mananger] Container started with ID b7b7bf3859bf. Setting up logs at ./log/docker/receiving_node1_2026-02-11_04-46-45__ec0b896d-5704-412c-b6d2-1e907f115143__wakuorg_nwaku:latest.log
2026-02-11 04:46:45.848 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17305
2026-02-11 04:46:45.848 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:46:46.020 ERROR [src.node.docker_mananger] Max retries reached for container bae6be83d215. Exiting log stream.
2026-02-11 04:46:46.466 ERROR [src.node.docker_mananger] Max retries reached for container ccc59ea2934a. Exiting log stream.
2026-02-11 04:46:46.849 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17305/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:46.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:46:46.852 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:46:46.853 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17305/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:46.855 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.198/tcp/17306/p2p/16Uiu2HAmR9S6JquD93HdnmspTNQ2bhCiFSQe1wmwHpY7Q22fKGmV","/ip4/172.18.167.198/tcp/17307/ws/p2p/16Uiu2HAmR9S6JquD93HdnmspTNQ2bhCiFSQe1wmwHpY7Q22fKGmV"],"enrUri":"enr:-L24QG0ToloqrTn9sqx9MJ1MYpL-hcSCDHAfYc7JSZTtVmf6Et3LqZj7tNF8laB2_AUlOpbmkJVY1A2V91RKXLPVyooCgmlkgnY0gmlwhKwSp8aKbXVsdGlhZGRyc5YACASsEqfGBkOaAAoErBKnxgZDm90DgnJzhQADAQAAiXNlY3AyNTZrMaEDuZWcrDlA8Vd_sHEzY-3S5Y-Iw9BvLlxiZfXVX9geS8CDdGNwgkOag3VkcIJDnIV3YWt1Mgk"}'
2026-02-11 04:46:46.855 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:46:46.861 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:46:46.861 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-11_04-46-45__ec0b896d-5704-412c-b6d2-1e907f115143__wakuorg_nwaku:latest.log
2026-02-11 04:46:46.861 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:46:46.861 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:46:46.863 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:46:46.863 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.47.65
2026-02-11 04:46:46.863 DEBUG [src.node.docker_mananger] Generated ports ['4735', '4736', '4737', '4738', '4739']
2026-02-11 04:46:46.863 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:46:46.863 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:46:46.863 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:46:46.863 DEBUG [src.node.docker_mananger] docker run -i -t -p 4735:4735 -p 4736:4736 -p 4737:4737 -p 4738:4738 -p 4739:4739 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4737 --rest-port=4735 --tcp-port=4736 --discv5-udp-port=4738 --rest-address=0.0.0.0 --nat=extip:172.18.47.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=befba0ce18f31013aaa72f14e22dffdcf0ebf5cbe924eeb86bbef6663e5a7dbc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4739 --metrics-logging=true --lightpush=false --relay=true
2026-02-11 04:46:47.013 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.47.65 waku f38e0f5ee745f3dcc054b13ef1e5d8bc1df5598151223a50295680b6c6c39318
2026-02-11 04:46:47.036 DEBUG [src.node.docker_mananger] Container started with ID f38e0f5ee745. Setting up logs at ./log/docker/receiving_node2_2026-02-11_04-46-45__ec0b896d-5704-412c-b6d2-1e907f115143__wakuorg_nwaku:latest.log
2026-02-11 04:46:47.036 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4735
2026-02-11 04:46:47.037 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:46:48.037 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4735/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:48.040 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:46:48.040 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:46:48.041 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4735/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:48.043 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.65/tcp/4736/p2p/16Uiu2HAmNSfixVmdL65WtwzQb6KsTgBaWro8xQFzfmcRBjkobTyK","/ip4/172.18.47.65/tcp/4737/ws/p2p/16Uiu2HAmNSfixVmdL65WtwzQb6KsTgBaWro8xQFzfmcRBjkobTyK"],"enrUri":"enr:-L24QBADB6JlSDx3ZA7gj5L4vy7xoNHz2I-ky5xfAXbytV2xHrbffmYrVfpgvm75tSjVD79xojvspV13oRqTOeMHMlkCgmlkgnY0gmlwhKwSL0GKbXVsdGlhZGRyc5YACASsEi9BBhKAAAoErBIvQQYSgd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkWzWrkkh406vDpYTOPuSlJmaDyFfuTGC_f-w6gTuG_qDdGNwghKAg3VkcIISgoV3YWt1MgE"}'
2026-02-11 04:46:48.043 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:46:48.043 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4735/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.167.198/tcp/17306/p2p/16Uiu2HAmR9S6JquD93HdnmspTNQ2bhCiFSQe1wmwHpY7Q22fKGmV"]'
2026-02-11 04:46:48.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:48.080 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:46:48.082 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-11_04-46-45__ec0b896d-5704-412c-b6d2-1e907f115143__wakuorg_nwaku:latest.log
2026-02-11 04:46:48.082 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:46:48.082 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:46:48.086 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:46:48.087 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.171
2026-02-11 04:46:48.087 DEBUG [src.node.docker_mananger] Generated ports ['9792', '9793', '9794', '9795', '9796']
2026-02-11 04:46:48.087 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:46:48.087 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:46:48.087 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:46:48.088 DEBUG [src.node.docker_mananger] docker run -i -t -p 9792:9792 -p 9793:9793 -p 9794:9794 -p 9795:9795 -p 9796:9796 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9794 --rest-port=9792 --tcp-port=9793 --discv5-udp-port=9795 --rest-address=0.0.0.0 --nat=extip:172.18.97.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ee673a4cb9adf5b037c81e2dfee4a86a10beeb58aeee68079ad2e90ff6e9dd0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9796 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QG0ToloqrTn9sqx9MJ1MYpL-hcSCDHAfYc7JSZTtVmf6Et3LqZj7tNF8laB2_AUlOpbmkJVY1A2V91RKXLPVyooCgmlkgnY0gmlwhKwSp8aKbXVsdGlhZGRyc5YACASsEqfGBkOaAAoErBKnxgZDm90DgnJzhQADAQAAiXNlY3AyNTZrMaEDuZWcrDlA8Vd_sHEzY-3S5Y-Iw9BvLlxiZfXVX9geS8CDdGNwgkOag3VkcIJDnIV3YWt1Mgk --lightpushnode=/ip4/172.18.167.198/tcp/17306/p2p/16Uiu2HAmR9S6JquD93HdnmspTNQ2bhCiFSQe1wmwHpY7Q22fKGmV --lightpush=true --relay=true
2026-02-11 04:46:48.238 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.171 waku f792f428b2224adf67b9d828017bf790b7efe070f333066fb392ff2c869a7003
2026-02-11 04:46:48.261 DEBUG [src.node.docker_mananger] Container started with ID f792f428b222. Setting up logs at ./log/docker/lightpush_node1_2026-02-11_04-46-45__ec0b896d-5704-412c-b6d2-1e907f115143__wakuorg_nwaku:latest.log
2026-02-11 04:46:48.261 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9792
2026-02-11 04:46:48.261 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:46:49.262 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9792/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:49.265 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:46:49.266 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:46:49.266 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9792/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:49.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.171/tcp/9793/p2p/16Uiu2HAmJgPd51ekobx8YCNwZRy1tq7vDVPcWvLVAmGsYPaENJdh","/ip4/172.18.97.171/tcp/9794/ws/p2p/16Uiu2HAmJgPd51ekobx8YCNwZRy1tq7vDVPcWvLVAmGsYPaENJdh"],"enrUri":"enr:-L24QHPy_NgTwLDmsiwfTGyYErBBDAQaLBpF8XbuGHciUspiQQNolFzeVFvmhInE07nVJuO_zT0ChhItfgqNP9YGsMQCgmlkgnY0gmlwhKwSYauKbXVsdGlhZGRyc5YACASsEmGrBiZBAAoErBJhqwYmQt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDWYIEJHbF7wsv1_nZ44rm5one3cqb-rvVBR6sYOjgn2yDdGNwgiZBg3VkcIImQ4V3YWt1Mgk"}'
2026-02-11 04:46:49.268 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:46:49.269 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9792/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.167.198/tcp/17306/p2p/16Uiu2HAmR9S6JquD93HdnmspTNQ2bhCiFSQe1wmwHpY7Q22fKGmV"]'
2026-02-11 04:46:49.295 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:49.295 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9792/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.47.65/tcp/4736/p2p/16Uiu2HAmNSfixVmdL65WtwzQb6KsTgBaWro8xQFzfmcRBjkobTyK"]'
2026-02-11 04:46:49.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:49.317 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17305/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-11 04:46:49.326 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:49.326 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4735/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-11 04:46:49.329 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:49.330 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9792/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-11 04:46:49.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:49.334 DEBUG [src.steps.light_push] Lightpushing message
2026-02-11 04:46:49.334 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9792/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770785209334302582, "version": 2.1}}'
2026-02-11 04:46:49.337 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9792/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-11 04:46:49.338 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-11 04:46:49.339 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-11 04:46:49.339 DEBUG [src.node.waku_node] Stopping container with id b7b7bf3859bf
2026-02-11 04:46:49.801 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:46:49.801 DEBUG [src.node.waku_node] Stopping container with id f38e0f5ee745
2026-02-11 04:46:50.267 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:46:50.267 DEBUG [src.node.waku_node] Stopping container with id f792f428b222
2026-02-11 04:46:50.613 ERROR [src.node.docker_mananger] Max retries reached for container b7b7bf3859bf. Exiting log stream.
2026-02-11 04:46:50.703 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:46:50.704 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-11 04:46:50.712 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:46:50.719 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:46:50.726 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
