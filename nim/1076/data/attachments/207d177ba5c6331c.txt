2026-02-11 04:46:13.197 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-11 04:46:13.197 DEBUG [tests.conftest] Running test: test_single_pubsub_topic[/waku/2/rs/5/0] with id: 2026-02-11_04-46-13__b7ca8f66-f9a4-46da-bb7d-752cc3d1d26e
2026-02-11 04:46:13.198 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-11 04:46:13.198 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-11 04:46:13.198 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-11 04:46:13.206 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:46:13.206 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-11_04-46-13__b7ca8f66-f9a4-46da-bb7d-752cc3d1d26e__wakuorg_nwaku:latest.log
2026-02-11 04:46:13.206 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:46:13.206 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:46:13.207 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:46:13.207 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.114.0
2026-02-11 04:46:13.208 DEBUG [src.node.docker_mananger] Generated ports ['2881', '2882', '2883', '2884', '2885']
2026-02-11 04:46:13.208 DEBUG [src.node.waku_node] Cluster id was resolved to: 5
2026-02-11 04:46:13.208 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-11 04:46:13.208 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:46:13.208 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:46:13.208 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:46:13.208 DEBUG [src.node.docker_mananger] docker run -i -t -p 2881:2881 -p 2882:2882 -p 2883:2883 -p 2884:2884 -p 2885:2885 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2883 --rest-port=2881 --tcp-port=2882 --discv5-udp-port=2884 --rest-address=0.0.0.0 --nat=extip:172.18.114.0 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=1bc869f9c5cb3a1bb8c896dced2608efc89fb3d351222e2bfd8d62d7bdb8559d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2885 --metrics-logging=true --relay=true --filter=true
2026-02-11 04:46:13.398 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.114.0 waku 352bd799196a001e5b8ca114b7209e7a1eb9308116fad59217294ce58e0ba8ae
2026-02-11 04:46:13.427 DEBUG [src.node.docker_mananger] Container started with ID 352bd799196a. Setting up logs at ./log/docker/node1_2026-02-11_04-46-13__b7ca8f66-f9a4-46da-bb7d-752cc3d1d26e__wakuorg_nwaku:latest.log
2026-02-11 04:46:13.429 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2881
2026-02-11 04:46:13.429 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:46:13.458 ERROR [src.node.docker_mananger] Max retries reached for container c656addfb58a. Exiting log stream.
2026-02-11 04:46:13.985 ERROR [src.node.docker_mananger] Max retries reached for container 8178d104fcd1. Exiting log stream.
2026-02-11 04:46:14.429 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2881/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:14.433 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:46:14.433 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:46:14.433 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2881/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:14.435 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.0/tcp/2882/p2p/16Uiu2HAkxcJZYnFVjGf4fT2Ht5Qghh2WwYUC6K6r6eNByQ3vXa1q","/ip4/172.18.114.0/tcp/2883/ws/p2p/16Uiu2HAkxcJZYnFVjGf4fT2Ht5Qghh2WwYUC6K6r6eNByQ3vXa1q"],"enrUri":"enr:-L24QDRBIT_x5PQB9ddssd6D8UyG3zMMwBdrW6Y9DQ03QVm-IFOF2K3HJkXNRqRguv097Up0hVDjBEwC8i9Cs-YzvYgCgmlkgnY0gmlwhKwScgCKbXVsdGlhZGRyc5YACASsEnIABgtCAAoErBJyAAYLQ90DgnJzhQAFAQAAiXNlY3AyNTZrMaECL0w7dQG3ICnmDWwvkqrawaszaO3JrcJZvbm4JjZO9dSDdGNwggtCg3VkcIILRIV3YWt1MgU"}'
2026-02-11 04:46:14.436 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:46:14.442 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:46:14.442 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-11_04-46-13__b7ca8f66-f9a4-46da-bb7d-752cc3d1d26e__wakuorg_nwaku:latest.log
2026-02-11 04:46:14.443 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:46:14.443 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:46:14.444 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:46:14.444 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.141
2026-02-11 04:46:14.444 DEBUG [src.node.docker_mananger] Generated ports ['30518', '30519', '30520', '30521', '30522']
2026-02-11 04:46:14.444 DEBUG [src.node.waku_node] Cluster id was resolved to: 5
2026-02-11 04:46:14.445 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-11 04:46:14.445 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:46:14.445 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:46:14.445 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:46:14.445 DEBUG [src.node.docker_mananger] docker run -i -t -p 30518:30518 -p 30519:30519 -p 30520:30520 -p 30521:30521 -p 30522:30522 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30520 --rest-port=30518 --tcp-port=30519 --discv5-udp-port=30521 --rest-address=0.0.0.0 --nat=extip:172.18.229.141 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=c7000dae5607fdbebfe7e5acba3792c38bc8fa6d307e0deb68bdcfa1cf02e2e7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30522 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QDRBIT_x5PQB9ddssd6D8UyG3zMMwBdrW6Y9DQ03QVm-IFOF2K3HJkXNRqRguv097Up0hVDjBEwC8i9Cs-YzvYgCgmlkgnY0gmlwhKwScgCKbXVsdGlhZGRyc5YACASsEnIABgtCAAoErBJyAAYLQ90DgnJzhQAFAQAAiXNlY3AyNTZrMaECL0w7dQG3ICnmDWwvkqrawaszaO3JrcJZvbm4JjZO9dSDdGNwggtCg3VkcIILRIV3YWt1MgU
2026-02-11 04:46:14.627 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.141 waku 463f8267deecc5f53e7cc74a3b8bca8c52f43210880c4f7e4169f35a3c976a62
2026-02-11 04:46:14.659 DEBUG [src.node.docker_mananger] Container started with ID 463f8267deec. Setting up logs at ./log/docker/node2_2026-02-11_04-46-13__b7ca8f66-f9a4-46da-bb7d-752cc3d1d26e__wakuorg_nwaku:latest.log
2026-02-11 04:46:14.659 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30518
2026-02-11 04:46:14.659 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:46:15.660 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30518/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:15.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-11 04:46:15.671 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:46:15.672 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30518/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:15.675 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.141/tcp/30519/p2p/16Uiu2HAkvyYoS2UBBn9r1n2H8V4BESYDo8ym1rA9MQieBPRd1Go7","/ip4/172.18.229.141/tcp/30520/ws/p2p/16Uiu2HAkvyYoS2UBBn9r1n2H8V4BESYDo8ym1rA9MQieBPRd1Go7"],"enrUri":"enr:-L24QElqq3ji-x4R0O8nZaFvivT7qX60QvOL3xLBVuJmc8hDeVk49UAe_FHPNzjRWoC7MnTlWEroldvxuCi-X38prKoCgmlkgnY0gmlwhKwS5Y2KbXVsdGlhZGRyc5YACASsEuWNBnc3AAoErBLljQZ3ON0DgnJzhQAFAQAAiXNlY3AyNTZrMaECFwYn6Rg6WG3os2GBvD1sYyAjNsGfU_ZmSy-NtxlxKk6DdGNwgnc3g3VkcIJ3OYV3YWt1MgE"}'
2026-02-11 04:46:15.675 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:46:15.676 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30518/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.114.0/tcp/2882/p2p/16Uiu2HAkxcJZYnFVjGf4fT2Ht5Qghh2WwYUC6K6r6eNByQ3vXa1q"]'
2026-02-11 04:46:15.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:15.679 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2881/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
2026-02-11 04:46:15.681 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:15.682 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30518/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/0"]'
2026-02-11 04:46:15.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:15.685 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2881/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:46:15.689 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:15.689 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-11 04:46:15.790 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-11 04:46:15.790 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2881/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:15.792 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770785175684846904,"ephemeral":false,"proof":""}]'
2026-02-11 04:46:15.794 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-11 04:46:15.794 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30518/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:15.796 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770785175684846904,"ephemeral":false,"proof":""}]'
2026-02-11 04:46:15.799 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-11 04:46:15.800 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-11 04:46:15.800 DEBUG [src.node.waku_node] Stopping container with id 352bd799196a
2026-02-11 04:46:16.299 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:46:16.300 DEBUG [src.node.waku_node] Stopping container with id 463f8267deec
2026-02-11 04:46:16.830 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:46:16.830 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-11 04:46:16.841 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:46:16.846 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
