2026-02-11 04:44:47.462 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-11 04:44:47.462 DEBUG [tests.conftest] Running test: test_publish_with_invalid_content_topics with id: 2026-02-11_04-44-47__2c28944d-94a9-448b-b9df-8174bbcd2872
2026-02-11 04:44:47.462 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-11 04:44:47.463 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-11 04:44:47.463 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-11 04:44:47.470 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:44:47.470 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-11_04-44-47__2c28944d-94a9-448b-b9df-8174bbcd2872__wakuorg_nwaku:latest.log
2026-02-11 04:44:47.470 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:44:47.470 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:44:47.472 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:44:47.472 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.88.169
2026-02-11 04:44:47.472 DEBUG [src.node.docker_mananger] Generated ports ['49422', '49423', '49424', '49425', '49426']
2026-02-11 04:44:47.472 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:44:47.472 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:44:47.472 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:44:47.472 DEBUG [src.node.docker_mananger] docker run -i -t -p 49422:49422 -p 49423:49423 -p 49424:49424 -p 49425:49425 -p 49426:49426 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49424 --rest-port=49422 --tcp-port=49423 --discv5-udp-port=49425 --rest-address=0.0.0.0 --nat=extip:172.18.88.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3a8f457adeaaa0de34cdb5a15bef0fdf049ef3ab6b8f6eebcdcffeeb2d8e7fe5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49426 --metrics-logging=true --relay=true
2026-02-11 04:44:47.660 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.88.169 waku d0a663ba929695a35a2586344de2ed2d0de37007096547cbde44a8421598bcb2
2026-02-11 04:44:47.692 DEBUG [src.node.docker_mananger] Container started with ID d0a663ba9296. Setting up logs at ./log/docker/node1_2026-02-11_04-44-47__2c28944d-94a9-448b-b9df-8174bbcd2872__wakuorg_nwaku:latest.log
2026-02-11 04:44:47.693 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49422
2026-02-11 04:44:47.693 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:44:47.704 ERROR [src.node.docker_mananger] Max retries reached for container 8883b8e35286. Exiting log stream.
2026-02-11 04:44:48.246 ERROR [src.node.docker_mananger] Max retries reached for container 8ac10af8efbf. Exiting log stream.
2026-02-11 04:44:48.693 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49422/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:48.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:44:48.697 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:44:48.697 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49422/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:48.699 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.169/tcp/49423/p2p/16Uiu2HAm2DhfEsEhbqjbESwYoFEAAA17uQvBumn44bATZaGxVSSK","/ip4/172.18.88.169/tcp/49424/ws/p2p/16Uiu2HAm2DhfEsEhbqjbESwYoFEAAA17uQvBumn44bATZaGxVSSK"],"enrUri":"enr:-L24QA8A7UtF2sZJ_8sQ5fsbTUIQICzTbGB8SiWsv43RZBdAPOkimvQI__1RbkIQreBKSBhEc-ffIPt-kR0MKzLYEZgCgmlkgnY0gmlwhKwSWKmKbXVsdGlhZGRyc5YACASsElipBsEPAAoErBJYqQbBEN0DgnJzhQADAQAAiXNlY3AyNTZrMaECZPC9DSUAWpFEP9UJ8Xpkf2s5WqfAasF-UJqGgEYXb7CDdGNwgsEPg3VkcILBEYV3YWt1MgE"}'
2026-02-11 04:44:48.699 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:44:48.706 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:44:48.706 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-11_04-44-47__2c28944d-94a9-448b-b9df-8174bbcd2872__wakuorg_nwaku:latest.log
2026-02-11 04:44:48.706 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:44:48.706 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:44:48.707 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:44:48.708 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.65.205
2026-02-11 04:44:48.708 DEBUG [src.node.docker_mananger] Generated ports ['50788', '50789', '50790', '50791', '50792']
2026-02-11 04:44:48.708 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:44:48.708 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:44:48.708 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:44:48.708 DEBUG [src.node.docker_mananger] docker run -i -t -p 50788:50788 -p 50789:50789 -p 50790:50790 -p 50791:50791 -p 50792:50792 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50790 --rest-port=50788 --tcp-port=50789 --discv5-udp-port=50791 --rest-address=0.0.0.0 --nat=extip:172.18.65.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5cf29c9d78a98dbda82ef80fe6e9a0e9f56eaa0b718aacf1e70f91ec09f8a2ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50792 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QA8A7UtF2sZJ_8sQ5fsbTUIQICzTbGB8SiWsv43RZBdAPOkimvQI__1RbkIQreBKSBhEc-ffIPt-kR0MKzLYEZgCgmlkgnY0gmlwhKwSWKmKbXVsdGlhZGRyc5YACASsElipBsEPAAoErBJYqQbBEN0DgnJzhQADAQAAiXNlY3AyNTZrMaECZPC9DSUAWpFEP9UJ8Xpkf2s5WqfAasF-UJqGgEYXb7CDdGNwgsEPg3VkcILBEYV3YWt1MgE
2026-02-11 04:44:48.888 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.65.205 waku db739c29ae6fab188d182d1a934206ad0b113c11349245089ef09f31b6edcd39
2026-02-11 04:44:48.919 DEBUG [src.node.docker_mananger] Container started with ID db739c29ae6f. Setting up logs at ./log/docker/node2_2026-02-11_04-44-47__2c28944d-94a9-448b-b9df-8174bbcd2872__wakuorg_nwaku:latest.log
2026-02-11 04:44:48.919 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50788
2026-02-11 04:44:48.920 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:44:49.920 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50788/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:49.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:44:49.934 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:44:49.935 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50788/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:49.938 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.65.205/tcp/50789/p2p/16Uiu2HAkz3Zk986JBAStu5DphhNFn2FRGVBuK6xPG5JbiUhEVMkv","/ip4/172.18.65.205/tcp/50790/ws/p2p/16Uiu2HAkz3Zk986JBAStu5DphhNFn2FRGVBuK6xPG5JbiUhEVMkv"],"enrUri":"enr:-L24QLzuWqHxzz88UK9W7Pssn8dz8XfTrMBO87oJBQnBErhmQ69___eu6ZNeRuzVegpXqxwQdCehZMcIaMoBhMTp8bICgmlkgnY0gmlwhKwSQc2KbXVsdGlhZGRyc5YACASsEkHNBsZlAAoErBJBzQbGZt0DgnJzhQADAQAAiXNlY3AyNTZrMaECRKCbQIbZdchWiRpY6DMaR3HFtyfhGYr7WauMJeGjUzODdGNwgsZlg3VkcILGZ4V3YWt1MgE"}'
2026-02-11 04:44:49.941 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:44:49.942 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50788/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.88.169/tcp/49423/p2p/16Uiu2HAm2DhfEsEhbqjbESwYoFEAAA17uQvBumn44bATZaGxVSSK"]'
2026-02-11 04:44:49.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:44:49.945 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-11 04:44:49.945 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49422/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-11 04:44:49.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:44:49.949 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50788/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-11 04:44:49.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:44:49.954 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:44:49.959 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:44:49.960 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-11 04:44:50.060 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-11 04:44:50.060 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:50.063 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770785089954631424,"ephemeral":false,"proof":""}]'
2026-02-11 04:44:50.064 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-11 04:44:50.064 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50788/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:50.066 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770785089954631424,"ephemeral":false,"proof":""}]'
2026-02-11 04:44:50.068 INFO [src.steps.relay] WARM UP successful!!
2026-02-11 04:44:50.069 DEBUG [tests.relay.test_publish] Running test with contetn topic Empty string
2026-02-11 04:44:50.069 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:44:50.071 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-11 04:44:50.071 DEBUG [tests.relay.test_publish] Running test with contetn topic A dictionary
2026-02-11 04:44:50.072 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": {"key": "YWFh"}, "timestamp": '$(date +%s%N)'}'
2026-02-11 04:44:50.074 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-11 04:44:50.074 DEBUG [tests.relay.test_publish] Running test with contetn topic An integer
2026-02-11 04:44:50.074 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": 1234567890, "timestamp": '$(date +%s%N)'}'
2026-02-11 04:44:50.077 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-11 04:44:50.077 DEBUG [tests.relay.test_publish] Running test with contetn topic A list
2026-02-11 04:44:50.077 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": ["YWFh"], "timestamp": '$(date +%s%N)'}'
2026-02-11 04:44:50.079 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-11 04:44:50.079 DEBUG [tests.relay.test_publish] Running test with contetn topic A bool
2026-02-11 04:44:50.080 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": true, "timestamp": '$(date +%s%N)'}'
2026-02-11 04:44:50.082 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49422/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-11 04:44:50.084 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-11 04:44:50.085 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-11 04:44:50.085 DEBUG [src.node.waku_node] Stopping container with id d0a663ba9296
2026-02-11 04:44:50.620 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:44:50.621 DEBUG [src.node.waku_node] Stopping container with id db739c29ae6f
2026-02-11 04:44:51.123 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:44:51.125 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-11 04:44:51.131 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:44:51.136 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
