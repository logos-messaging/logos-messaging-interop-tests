2026-02-11 04:47:43.690 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-11 04:47:43.691 DEBUG [tests.conftest] Running test: test_publish_with_invalid_version with id: 2026-02-11_04-47-43__e6daf39c-a00b-4162-b99a-615ee0f2f99e
2026-02-11 04:47:43.691 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-11 04:47:43.691 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-11 04:47:43.691 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-11 04:47:43.697 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:47:43.698 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-11_04-47-43__e6daf39c-a00b-4162-b99a-615ee0f2f99e__wakuorg_nwaku:latest.log
2026-02-11 04:47:43.698 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:47:43.698 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:47:43.699 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:47:43.699 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.204.10
2026-02-11 04:47:43.699 DEBUG [src.node.docker_mananger] Generated ports ['18263', '18264', '18265', '18266', '18267']
2026-02-11 04:47:43.699 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:47:43.699 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:47:43.700 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:47:43.700 DEBUG [src.node.docker_mananger] docker run -i -t -p 18263:18263 -p 18264:18264 -p 18265:18265 -p 18266:18266 -p 18267:18267 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18265 --rest-port=18263 --tcp-port=18264 --discv5-udp-port=18266 --rest-address=0.0.0.0 --nat=extip:172.18.204.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7717ad7bb13c2de40fc53978470feacaeacaabfe9a159fc2a7b3cc20d8baf9af --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18267 --metrics-logging=true --relay=true
2026-02-11 04:47:43.855 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.204.10 waku 1db4cf23eca885052aae8695b8e5ab2c1f07966b182ae27f61339a0ae41362d9
2026-02-11 04:47:43.881 DEBUG [src.node.docker_mananger] Container started with ID 1db4cf23eca8. Setting up logs at ./log/docker/node1_2026-02-11_04-47-43__e6daf39c-a00b-4162-b99a-615ee0f2f99e__wakuorg_nwaku:latest.log
2026-02-11 04:47:43.882 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18263
2026-02-11 04:47:43.883 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:47:43.951 ERROR [src.node.docker_mananger] Max retries reached for container fe8159a6c568. Exiting log stream.
2026-02-11 04:47:44.520 ERROR [src.node.docker_mananger] Max retries reached for container 5f8b13b16a0b. Exiting log stream.
2026-02-11 04:47:44.883 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18263/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:47:44.887 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:47:44.887 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:47:44.887 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18263/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:47:44.889 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.10/tcp/18264/p2p/16Uiu2HAm6MFuAC3T1bM3kCyxjFU6h8EwJqsKuKdjSMErd8PcFEDd","/ip4/172.18.204.10/tcp/18265/ws/p2p/16Uiu2HAm6MFuAC3T1bM3kCyxjFU6h8EwJqsKuKdjSMErd8PcFEDd"],"enrUri":"enr:-L24QBTCP5_yX1ZW_tKxTtwWdEzRI8UNig0D2YueSBlL7MOKQKdbidwHq-ComR0UT12Q2wusfymTo4xiCAaQi4X1-IwCgmlkgnY0gmlwhKwSzAqKbXVsdGlhZGRyc5YACASsEswKBkdYAAoErBLMCgZHWd0DgnJzhQADAQAAiXNlY3AyNTZrMaECok8Bdw806NWvb5oJt7vvjgGu5UGzPSQ14-toE4K6AZCDdGNwgkdYg3VkcIJHWoV3YWt1MgE"}'
2026-02-11 04:47:44.890 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:47:44.896 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:47:44.896 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-11_04-47-43__e6daf39c-a00b-4162-b99a-615ee0f2f99e__wakuorg_nwaku:latest.log
2026-02-11 04:47:44.896 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:47:44.896 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:47:44.897 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:47:44.898 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.232.254
2026-02-11 04:47:44.898 DEBUG [src.node.docker_mananger] Generated ports ['50343', '50344', '50345', '50346', '50347']
2026-02-11 04:47:44.898 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:47:44.898 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:47:44.898 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:47:44.898 DEBUG [src.node.docker_mananger] docker run -i -t -p 50343:50343 -p 50344:50344 -p 50345:50345 -p 50346:50346 -p 50347:50347 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50345 --rest-port=50343 --tcp-port=50344 --discv5-udp-port=50346 --rest-address=0.0.0.0 --nat=extip:172.18.232.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be846a99408fe8164fc1d42293eedde14adf4aa7c41d9e4dcfab0dfeca1496d6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50347 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBTCP5_yX1ZW_tKxTtwWdEzRI8UNig0D2YueSBlL7MOKQKdbidwHq-ComR0UT12Q2wusfymTo4xiCAaQi4X1-IwCgmlkgnY0gmlwhKwSzAqKbXVsdGlhZGRyc5YACASsEswKBkdYAAoErBLMCgZHWd0DgnJzhQADAQAAiXNlY3AyNTZrMaECok8Bdw806NWvb5oJt7vvjgGu5UGzPSQ14-toE4K6AZCDdGNwgkdYg3VkcIJHWoV3YWt1MgE
2026-02-11 04:47:45.056 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.232.254 waku 004c4d158ff6f1675d9e40c1fd9d161539f3526ab8d4cc8d52706650d3345c94
2026-02-11 04:47:45.081 DEBUG [src.node.docker_mananger] Container started with ID 004c4d158ff6. Setting up logs at ./log/docker/node2_2026-02-11_04-47-43__e6daf39c-a00b-4162-b99a-615ee0f2f99e__wakuorg_nwaku:latest.log
2026-02-11 04:47:45.081 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50343
2026-02-11 04:47:45.081 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:47:46.082 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50343/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:47:46.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:47:46.105 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:47:46.105 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50343/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:47:46.109 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.254/tcp/50344/p2p/16Uiu2HAkvMYUiLpHrkRh1FaeDqmNzWCpZJ2fSZF347N8iKJN5kgB","/ip4/172.18.232.254/tcp/50345/ws/p2p/16Uiu2HAkvMYUiLpHrkRh1FaeDqmNzWCpZJ2fSZF347N8iKJN5kgB"],"enrUri":"enr:-L24QOTqZGhG-xn9UuWDLnfXdcjv8XGTdZGHw7DhOg4q3IuRVdEyPNV5R8DtpttTJvU5MO8ZkuMjUHyX1424Ow-WGEcCgmlkgnY0gmlwhKwS6P6KbXVsdGlhZGRyc5YACASsEuj-BsSoAAoErBLo_gbEqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECDczhwUGjaKb0ZX3KFy1w-XIqhT_ANbm_iMa3IifwAHyDdGNwgsSog3VkcILEqoV3YWt1MgE"}'
2026-02-11 04:47:46.110 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:47:46.111 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50343/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.204.10/tcp/18264/p2p/16Uiu2HAm6MFuAC3T1bM3kCyxjFU6h8EwJqsKuKdjSMErd8PcFEDd"]'
2026-02-11 04:47:46.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:47:46.114 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-11 04:47:46.114 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18263/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-11 04:47:46.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:47:46.118 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50343/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-11 04:47:46.122 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:47:46.123 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18263/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:47:46.127 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:47:46.127 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-11 04:47:46.228 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-11 04:47:46.228 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18263/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:47:46.231 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770785266123018752,"ephemeral":false,"proof":""}]'
2026-02-11 04:47:46.233 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-11 04:47:46.233 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50343/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:47:46.235 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770785266123018752,"ephemeral":false,"proof":""}]'
2026-02-11 04:47:46.237 INFO [src.steps.relay] WARM UP successful!!
2026-02-11 04:47:46.238 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18263/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)', "version": 2.1}'
2026-02-11 04:47:46.241 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:18263/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-11 04:47:46.243 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-11 04:47:46.244 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-11 04:47:46.244 DEBUG [src.node.waku_node] Stopping container with id 1db4cf23eca8
2026-02-11 04:47:46.724 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:47:46.725 DEBUG [src.node.waku_node] Stopping container with id 004c4d158ff6
2026-02-11 04:47:47.232 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:47:47.233 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-11 04:47:47.241 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:47:47.246 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
