2026-02-11 04:46:13.011 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-11 04:46:13.012 DEBUG [tests.conftest] Running test: test_store_with_long_string_pubsub_topic with id: 2026-02-11_04-46-13__107b310e-7fd3-40a3-a5c8-3fdff748e45b
2026-02-11 04:46:13.012 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-11 04:46:13.012 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-11 04:46:13.012 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-11 04:46:13.019 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:46:13.019 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-11_04-46-13__107b310e-7fd3-40a3-a5c8-3fdff748e45b__wakuorg_nwaku:latest.log
2026-02-11 04:46:13.019 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:46:13.019 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:46:13.020 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:46:13.021 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.46.58
2026-02-11 04:46:13.021 DEBUG [src.node.docker_mananger] Generated ports ['55230', '55231', '55232', '55233', '55234']
2026-02-11 04:46:13.021 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:46:13.021 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:46:13.021 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:46:13.021 DEBUG [src.node.docker_mananger] docker run -i -t -p 55230:55230 -p 55231:55231 -p 55232:55232 -p 55233:55233 -p 55234:55234 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55232 --rest-port=55230 --tcp-port=55231 --discv5-udp-port=55233 --rest-address=0.0.0.0 --nat=extip:172.18.46.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a8fcad881b23a0661219daa35e9b67cda01d69687cdaddc0e686c36bdfe5b96a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55234 --metrics-logging=true --store=true --relay=true
2026-02-11 04:46:13.219 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.46.58 waku 9c6486038d18fa0d59a4dbf78a0b40eae692166aa9c443f46c40c205ae7eee08
2026-02-11 04:46:13.250 DEBUG [src.node.docker_mananger] Container started with ID 9c6486038d18. Setting up logs at ./log/docker/publishing_node1_2026-02-11_04-46-13__107b310e-7fd3-40a3-a5c8-3fdff748e45b__wakuorg_nwaku:latest.log
2026-02-11 04:46:13.250 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55230
2026-02-11 04:46:13.251 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:46:13.290 ERROR [src.node.docker_mananger] Max retries reached for container 9cd86d0e680b. Exiting log stream.
2026-02-11 04:46:13.819 ERROR [src.node.docker_mananger] Max retries reached for container d54e2a8a92c7. Exiting log stream.
2026-02-11 04:46:14.252 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55230/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:14.255 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:46:14.255 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:46:14.255 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55230/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:14.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.58/tcp/55231/p2p/16Uiu2HAmErdw66T3HhespREDyYTgNhJf5uA8SmB7LZjGy7dVxKkZ","/ip4/172.18.46.58/tcp/55232/ws/p2p/16Uiu2HAmErdw66T3HhespREDyYTgNhJf5uA8SmB7LZjGy7dVxKkZ"],"enrUri":"enr:-L24QAWFjD37YxRKRlnJ8PyXINTdXTQiCYnk8PFSB4zi0ujBXLJQ6jjV3t7cZlme-f2VaVsW-iczh10mIxgVai41Yg4CgmlkgnY0gmlwhKwSLjqKbXVsdGlhZGRyc5YACASsEi46Bte_AAoErBIuOgbXwN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDILNB9-pm6WSbjsX6ybwaauwu9HWJW6hAOgQBJqeiab6DdGNwgte_g3VkcILXwYV3YWt1MgM"}'
2026-02-11 04:46:14.258 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:46:14.265 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:46:14.265 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-11_04-46-13__107b310e-7fd3-40a3-a5c8-3fdff748e45b__wakuorg_nwaku:latest.log
2026-02-11 04:46:14.265 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:46:14.265 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:46:14.267 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:46:14.267 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.126.181
2026-02-11 04:46:14.267 DEBUG [src.node.docker_mananger] Generated ports ['61752', '61753', '61754', '61755', '61756']
2026-02-11 04:46:14.267 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:46:14.267 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:46:14.267 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:46:14.267 DEBUG [src.node.docker_mananger] docker run -i -t -p 61752:61752 -p 61753:61753 -p 61754:61754 -p 61755:61755 -p 61756:61756 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61754 --rest-port=61752 --tcp-port=61753 --discv5-udp-port=61755 --rest-address=0.0.0.0 --nat=extip:172.18.126.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=69e2b852db6aaab8848434cffad5e315a00b1ab0b1dbef972a483ebe23cc3645 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61756 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAWFjD37YxRKRlnJ8PyXINTdXTQiCYnk8PFSB4zi0ujBXLJQ6jjV3t7cZlme-f2VaVsW-iczh10mIxgVai41Yg4CgmlkgnY0gmlwhKwSLjqKbXVsdGlhZGRyc5YACASsEi46Bte_AAoErBIuOgbXwN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDILNB9-pm6WSbjsX6ybwaauwu9HWJW6hAOgQBJqeiab6DdGNwgte_g3VkcILXwYV3YWt1MgM --storenode=/ip4/172.18.46.58/tcp/55231/p2p/16Uiu2HAmErdw66T3HhespREDyYTgNhJf5uA8SmB7LZjGy7dVxKkZ --store=true --relay=true
2026-02-11 04:46:14.460 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.126.181 waku 90a0b83514f783290b6f942c898f4e9d619e54c89c873a3cda011a5ad40851e1
2026-02-11 04:46:14.494 DEBUG [src.node.docker_mananger] Container started with ID 90a0b83514f7. Setting up logs at ./log/docker/store_node1_2026-02-11_04-46-13__107b310e-7fd3-40a3-a5c8-3fdff748e45b__wakuorg_nwaku:latest.log
2026-02-11 04:46:14.494 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61752
2026-02-11 04:46:14.495 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:46:15.496 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61752/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:15.500 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:46:15.500 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:46:15.500 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61752/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:15.502 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.181/tcp/61753/p2p/16Uiu2HAmHfGubzjJ2mGY4xsu3ovAwarDHYjdcVAtgsqmas1TzyfS","/ip4/172.18.126.181/tcp/61754/ws/p2p/16Uiu2HAmHfGubzjJ2mGY4xsu3ovAwarDHYjdcVAtgsqmas1TzyfS"],"enrUri":"enr:-L24QN_wIvpdCAWKHI6-inzqvoBmwARK8D_cFKXeIDh6pDCFR8EeDBvkmjap8jlfatpUxT6el1GehTFZAhNIgzjNMJYCgmlkgnY0gmlwhKwSfrWKbXVsdGlhZGRyc5YACASsEn61BvE5AAoErBJ-tQbxOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSl0n5gCtCcvfCFZzisNR2HPMSCjLDlrrCQ8Qwqtgnh2DdGNwgvE5g3VkcILxO4V3YWt1MgM"}'
2026-02-11 04:46:15.503 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:46:15.503 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61752/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.46.58/tcp/55231/p2p/16Uiu2HAmErdw66T3HhespREDyYTgNhJf5uA8SmB7LZjGy7dVxKkZ"]'
2026-02-11 04:46:15.506 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:15.506 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55230/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-11 04:46:15.508 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:15.509 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61752/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-11 04:46:15.511 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:15.511 DEBUG [src.steps.store] Relaying message
2026-02-11 04:46:15.512 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:46:15.516 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:15.517 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:46:15.718 DEBUG [src.steps.store] Relaying message
2026-02-11 04:46:15.718 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:46:15.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:15.724 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:46:15.925 DEBUG [src.steps.store] Relaying message
2026-02-11 04:46:15.925 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:46:15.930 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:15.931 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:46:16.132 DEBUG [src.steps.store] Relaying message
2026-02-11 04:46:16.132 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:46:16.138 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:16.139 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:46:16.339 DEBUG [src.steps.store] Relaying message
2026-02-11 04:46:16.340 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:46:16.345 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:16.345 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:46:16.546 DEBUG [src.steps.store] Relaying message
2026-02-11 04:46:16.546 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:46:16.552 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:16.552 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:46:16.753 DEBUG [src.steps.store] Relaying message
2026-02-11 04:46:16.753 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:46:16.759 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:16.759 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:46:16.960 DEBUG [src.steps.store] Relaying message
2026-02-11 04:46:16.960 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:46:16.967 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:16.967 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:46:17.293 DEBUG [tests.store.test_topics] Trying to get stored msg with url topic size million 
2026-02-11 04:46:17.293 DEBUG [src.steps.store] Relaying message
2026-02-11 04:46:17.293 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:46:17.299 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:46:17.301 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:46:17.503 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-11 04:46:17.720 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-02-11 04:46:22.640 ERROR [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-02-11 04:46:22.644 ERROR [tests.store.test_topics] store request with very long pubsub topic wasn't accepted 
2026-02-11 04:46:22.647 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-11 04:46:22.649 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-11 04:46:22.649 DEBUG [src.node.waku_node] Stopping container with id 9c6486038d18
2026-02-11 04:46:23.181 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:46:23.181 DEBUG [src.node.waku_node] Stopping container with id 90a0b83514f7
2026-02-11 04:46:23.716 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:46:23.717 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-11 04:46:23.725 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:46:23.733 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
