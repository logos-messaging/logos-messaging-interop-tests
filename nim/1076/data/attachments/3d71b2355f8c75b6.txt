2026-02-11 04:48:34.163 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-11 04:48:34.164 DEBUG [tests.conftest] Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2026-02-11_04-48-34__5ec6ee1d-6059-4b9c-8f6e-b58e511de1d6
2026-02-11 04:48:34.164 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-11 04:48:34.164 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-11 04:48:34.171 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:48:34.171 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-11_04-48-34__5ec6ee1d-6059-4b9c-8f6e-b58e511de1d6__wakuorg_nwaku:latest.log
2026-02-11 04:48:34.171 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:48:34.171 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:48:34.173 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:48:34.173 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.34.170
2026-02-11 04:48:34.173 DEBUG [src.node.docker_mananger] Generated ports ['26908', '26909', '26910', '26911', '26912']
2026-02-11 04:48:34.173 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:48:34.173 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:48:34.173 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:48:34.173 DEBUG [src.node.docker_mananger] docker run -i -t -p 26908:26908 -p 26909:26909 -p 26910:26910 -p 26911:26911 -p 26912:26912 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26910 --rest-port=26908 --tcp-port=26909 --discv5-udp-port=26911 --rest-address=0.0.0.0 --nat=extip:172.18.34.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2680ebaee0afc0ef94c6ea22527a62ad14b4a4c1f1abd12c877ee0fb0ab7cf38 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26912 --metrics-logging=true --store=true --relay=true
2026-02-11 04:48:34.354 ERROR [src.node.docker_mananger] Max retries reached for container d524d6c749ba. Exiting log stream.
2026-02-11 04:48:34.360 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.34.170 waku 4686e192d250ffd5e666ed52dd4c076e67c3ff281ab6f0c24f21d59042ba02b9
2026-02-11 04:48:34.391 DEBUG [src.node.docker_mananger] Container started with ID 4686e192d250. Setting up logs at ./log/docker/publishing_node1_2026-02-11_04-48-34__5ec6ee1d-6059-4b9c-8f6e-b58e511de1d6__wakuorg_nwaku:latest.log
2026-02-11 04:48:34.392 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26908
2026-02-11 04:48:34.393 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:48:34.876 ERROR [src.node.docker_mananger] Max retries reached for container 984a7c28a246. Exiting log stream.
2026-02-11 04:48:35.394 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26908/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:48:35.397 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:48:35.398 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:48:35.398 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26908/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:48:35.400 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.170/tcp/26909/p2p/16Uiu2HAmHTx47sLCMRSwY9bhZAaREUHwCwTt5NQa1PQBucieFXxi","/ip4/172.18.34.170/tcp/26910/ws/p2p/16Uiu2HAmHTx47sLCMRSwY9bhZAaREUHwCwTt5NQa1PQBucieFXxi"],"enrUri":"enr:-L24QHFvIH8ANmeE7_kUS0Fv_spRnOLnlIpQgKro8xUbhEc4KAaKUtaPIHtzXr2djnhtYFTP2EtNGVEN0-6GXAxRNzECgmlkgnY0gmlwhKwSIqqKbXVsdGlhZGRyc5YACASsEiKqBmkdAAoErBIiqgZpHt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDR3ZzF_1dVjcu_xO14LB1DF7L1cFKj2Oz32XrCES9w7eDdGNwgmkdg3VkcIJpH4V3YWt1MgM"}'
2026-02-11 04:48:35.400 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:48:35.407 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:48:35.407 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-11_04-48-34__5ec6ee1d-6059-4b9c-8f6e-b58e511de1d6__wakuorg_nwaku:latest.log
2026-02-11 04:48:35.408 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:48:35.408 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:48:35.409 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:48:35.409 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.250.86
2026-02-11 04:48:35.409 DEBUG [src.node.docker_mananger] Generated ports ['63675', '63676', '63677', '63678', '63679']
2026-02-11 04:48:35.409 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:48:35.409 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:48:35.409 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:48:35.410 DEBUG [src.node.docker_mananger] docker run -i -t -p 63675:63675 -p 63676:63676 -p 63677:63677 -p 63678:63678 -p 63679:63679 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63677 --rest-port=63675 --tcp-port=63676 --discv5-udp-port=63678 --rest-address=0.0.0.0 --nat=extip:172.18.250.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4fcff6132bee8991ebbe6f0bff1af1bdfcdbe702db70d0f1d7ced31a3f8b32ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63679 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHFvIH8ANmeE7_kUS0Fv_spRnOLnlIpQgKro8xUbhEc4KAaKUtaPIHtzXr2djnhtYFTP2EtNGVEN0-6GXAxRNzECgmlkgnY0gmlwhKwSIqqKbXVsdGlhZGRyc5YACASsEiKqBmkdAAoErBIiqgZpHt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDR3ZzF_1dVjcu_xO14LB1DF7L1cFKj2Oz32XrCES9w7eDdGNwgmkdg3VkcIJpH4V3YWt1MgM --storenode=/ip4/172.18.34.170/tcp/26909/p2p/16Uiu2HAmHTx47sLCMRSwY9bhZAaREUHwCwTt5NQa1PQBucieFXxi --store=false --relay=false
2026-02-11 04:48:35.597 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.250.86 waku b31e3870f3551292714ce56d95bfa384bb077601b1368e5ff13352a445f4128d
2026-02-11 04:48:35.629 DEBUG [src.node.docker_mananger] Container started with ID b31e3870f355. Setting up logs at ./log/docker/store_node1_2026-02-11_04-48-34__5ec6ee1d-6059-4b9c-8f6e-b58e511de1d6__wakuorg_nwaku:latest.log
2026-02-11 04:48:35.629 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63675
2026-02-11 04:48:35.630 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:48:36.630 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63675/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:48:36.634 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:48:36.634 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:48:36.634 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63675/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:48:36.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.86/tcp/63676/p2p/16Uiu2HAm9LaaLpmLn2ke1wmn4o5Dc9RjrZz1jKDZNen8bVzcru4v","/ip4/172.18.250.86/tcp/63677/ws/p2p/16Uiu2HAm9LaaLpmLn2ke1wmn4o5Dc9RjrZz1jKDZNen8bVzcru4v"],"enrUri":"enr:-L24QA9EVLevPweJqC_iUj0wK9s8WkKzjNGUwV4_z2bsX21NcSoxPWJkffm46cag0n0uOSh_psiU0Wh6twyHC5p2WTQCgmlkgnY0gmlwhKwS-laKbXVsdGlhZGRyc5YACASsEvpWBvi8AAoErBL6Vgb4vd0DgnJzhQADAQAAiXNlY3AyNTZrMaECzrWaK-kL0E8U4JnG0Lqfdv4A4OvTyDKaYmYSaKvr0KuDdGNwgvi8g3VkcIL4voV3YWt1MgA"}'
2026-02-11 04:48:36.636 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:48:36.637 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63675/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.170/tcp/26909/p2p/16Uiu2HAmHTx47sLCMRSwY9bhZAaREUHwCwTt5NQa1PQBucieFXxi"]'
2026-02-11 04:48:36.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:48:36.666 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26908/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-11 04:48:36.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:48:36.681 DEBUG [src.steps.store] Relaying message
2026-02-11 04:48:36.681 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26908/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:48:36.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:48:36.688 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-11 04:48:36.889 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-11 04:48:36.889 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26908/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:48:36.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xaed341ca599954c076cd0af9e21dcdd4efbdd6c0741c1b5bfa74eceee67142c8"}]}'
2026-02-11 04:48:36.892 DEBUG [src.steps.store] messages length is 1
2026-02-11 04:48:36.893 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-11 04:48:36.893 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63675/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:48:36.900 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"25e80583b3350631e798","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xaed341ca599954c076cd0af9e21dcdd4efbdd6c0741c1b5bfa74eceee67142c8"}]}'
2026-02-11 04:48:36.901 DEBUG [src.steps.store] messages length is 1
2026-02-11 04:48:36.902 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-11 04:48:36.903 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-11 04:48:36.904 DEBUG [src.node.waku_node] Stopping container with id 4686e192d250
2026-02-11 04:48:37.416 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:48:37.416 DEBUG [src.node.waku_node] Stopping container with id b31e3870f355
2026-02-11 04:48:37.935 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:48:37.936 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-11 04:48:37.941 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:48:37.946 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
