2026-02-11 04:44:36.423 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-11 04:44:36.424 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_pubsub_topic_from_another_cluster_id with id: 2026-02-11_04-44-36__ff134a01-3045-4328-a77d-413bdc1f1daa
2026-02-11 04:44:36.424 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-11 04:44:36.424 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-11 04:44:36.424 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-11 04:44:36.430 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:44:36.431 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-11_04-44-36__ff134a01-3045-4328-a77d-413bdc1f1daa__wakuorg_nwaku:latest.log
2026-02-11 04:44:36.431 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:44:36.431 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:44:36.432 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:44:36.432 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.78.255
2026-02-11 04:44:36.432 DEBUG [src.node.docker_mananger] Generated ports ['26294', '26295', '26296', '26297', '26298']
2026-02-11 04:44:36.433 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:44:36.433 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:44:36.433 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:44:36.433 DEBUG [src.node.docker_mananger] docker run -i -t -p 26294:26294 -p 26295:26295 -p 26296:26296 -p 26297:26297 -p 26298:26298 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26296 --rest-port=26294 --tcp-port=26295 --discv5-udp-port=26297 --rest-address=0.0.0.0 --nat=extip:172.18.78.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a87055b4be0a9436a9c8dd8cec7fff84a7fa92df0fa5065f43f7b8652b646ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26298 --metrics-logging=true --relay=true --filter=true
2026-02-11 04:44:36.617 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.78.255 waku b2ac2c47dde7b150e99434560939f4b76a2b2b2cd60e6f6ececb2bff428c32eb
2026-02-11 04:44:36.647 DEBUG [src.node.docker_mananger] Container started with ID b2ac2c47dde7. Setting up logs at ./log/docker/node1_2026-02-11_04-44-36__ff134a01-3045-4328-a77d-413bdc1f1daa__wakuorg_nwaku:latest.log
2026-02-11 04:44:36.648 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26294
2026-02-11 04:44:36.648 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:44:37.028 ERROR [src.node.docker_mananger] Max retries reached for container 41af224c67f9. Exiting log stream.
2026-02-11 04:44:37.649 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26294/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:37.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:44:37.652 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:44:37.652 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26294/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:37.654 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.255/tcp/26295/p2p/16Uiu2HAmRUsRheH5toX451GkS29MhCZw1CPoWE7cHvEZAGSuuRje","/ip4/172.18.78.255/tcp/26296/ws/p2p/16Uiu2HAmRUsRheH5toX451GkS29MhCZw1CPoWE7cHvEZAGSuuRje"],"enrUri":"enr:-L24QGjlUdjlfA4jcEQ6RL5CWKpKLr7bRZQbuyptZ4kNXWkUJuPF8LcacNeY6Of56XDXr8nZvwCrjUaKSi0qHHPY-UECgmlkgnY0gmlwhKwSTv-KbXVsdGlhZGRyc5YACASsEk7_Bma3AAoErBJO_wZmuN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvpBLBCD1XmfzvCJWCTYu4qtRs5ebIncl-neeLAz0K0mDdGNwgma3g3VkcIJmuYV3YWt1MgU"}'
2026-02-11 04:44:37.655 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:44:37.655 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-11 04:44:37.661 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:44:37.661 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-11_04-44-36__ff134a01-3045-4328-a77d-413bdc1f1daa__wakuorg_nwaku:latest.log
2026-02-11 04:44:37.661 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:44:37.662 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:44:37.663 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:44:37.663 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.50.21
2026-02-11 04:44:37.663 DEBUG [src.node.docker_mananger] Generated ports ['29690', '29691', '29692', '29693', '29694']
2026-02-11 04:44:37.663 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:44:37.663 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:44:37.663 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:44:37.664 DEBUG [src.node.docker_mananger] docker run -i -t -p 29690:29690 -p 29691:29691 -p 29692:29692 -p 29693:29693 -p 29694:29694 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29692 --rest-port=29690 --tcp-port=29691 --discv5-udp-port=29693 --rest-address=0.0.0.0 --nat=extip:172.18.50.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cc0c8b80f7a6ef2ef41f337f3a1e78e9388d2f23bba0afdef99edb04a123c2e3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29694 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGjlUdjlfA4jcEQ6RL5CWKpKLr7bRZQbuyptZ4kNXWkUJuPF8LcacNeY6Of56XDXr8nZvwCrjUaKSi0qHHPY-UECgmlkgnY0gmlwhKwSTv-KbXVsdGlhZGRyc5YACASsEk7_Bma3AAoErBJO_wZmuN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvpBLBCD1XmfzvCJWCTYu4qtRs5ebIncl-neeLAz0K0mDdGNwgma3g3VkcIJmuYV3YWt1MgU --filternode=/ip4/172.18.78.255/tcp/26295/p2p/16Uiu2HAmRUsRheH5toX451GkS29MhCZw1CPoWE7cHvEZAGSuuRje
2026-02-11 04:44:37.858 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.50.21 waku 0a7bd57b7b1ae805679921d686a4f653b28e6600aabbccec1a0e2c676ed1223e
2026-02-11 04:44:37.886 DEBUG [src.node.docker_mananger] Container started with ID 0a7bd57b7b1a. Setting up logs at ./log/docker/node2_2026-02-11_04-44-36__ff134a01-3045-4328-a77d-413bdc1f1daa__wakuorg_nwaku:latest.log
2026-02-11 04:44:37.887 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29690
2026-02-11 04:44:37.887 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:44:38.888 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29690/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:38.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-11 04:44:38.892 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:44:38.892 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29690/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:38.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.21/tcp/29691/p2p/16Uiu2HAmR66vApBA5Bro3dNnjRX9ihZhV63PW8aCetprh1N1dJLw","/ip4/172.18.50.21/tcp/29692/ws/p2p/16Uiu2HAmR66vApBA5Bro3dNnjRX9ihZhV63PW8aCetprh1N1dJLw"],"enrUri":"enr:-L24QK3oq26Aj_7j_x23F_u-dzHU3wFdVECKTP7z5lgB_mB5DW-4UlFDBPVV8vOscW9t5lR2HMr0H-UAjntOppHmISgCgmlkgnY0gmlwhKwSMhWKbXVsdGlhZGRyc5YACASsEjIVBnP7AAoErBIyFQZz_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuLswRW0vzJZmnlYTvWCIl8of7GNeXAA6BIdd2pTdVqiDdGNwgnP7g3VkcIJz_YV3YWt1MgA"}'
2026-02-11 04:44:38.895 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:44:38.895 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29690/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.255/tcp/26295/p2p/16Uiu2HAmRUsRheH5toX451GkS29MhCZw1CPoWE7cHvEZAGSuuRje"]'
2026-02-11 04:44:38.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:44:38.931 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26294/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2026-02-11 04:44:38.938 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:44:38.939 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29690/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0f1cb941-428b-4f6e-a525-bc98b1b4eda7", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
2026-02-11 04:44:38.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"0f1cb941-428b-4f6e-a525-bc98b1b4eda7","statusDesc":"OK"}'
2026-02-11 04:44:38.952 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26294/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-11 04:44:38.959 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:44:38.960 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-11 04:44:39.060 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-11 04:44:39.060 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29690/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:44:39.063 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770785078952319571,"ephemeral":false}]'
2026-02-11 04:44:39.066 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-11 04:44:39.067 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-11 04:44:39.067 DEBUG [src.node.waku_node] Stopping container with id b2ac2c47dde7
2026-02-11 04:44:39.554 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:44:39.556 DEBUG [src.node.waku_node] Stopping container with id 0a7bd57b7b1a
2026-02-11 04:44:40.026 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:44:40.028 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-11 04:44:40.033 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:44:40.038 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
