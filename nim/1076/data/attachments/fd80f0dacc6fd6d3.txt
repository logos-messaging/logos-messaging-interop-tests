2026-02-11 04:46:58.578 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-11 04:46:58.579 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_invalid_content_topic_format with id: 2026-02-11_04-46-58__65f544b9-b0c5-4132-9b0c-c24f12bc2537
2026-02-11 04:46:58.579 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-11 04:46:58.579 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-11 04:46:58.580 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-11 04:46:58.587 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:46:58.588 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-11_04-46-58__65f544b9-b0c5-4132-9b0c-c24f12bc2537__wakuorg_nwaku:latest.log
2026-02-11 04:46:58.588 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:46:58.588 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:46:58.589 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:46:58.590 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.77.213
2026-02-11 04:46:58.590 DEBUG [src.node.docker_mananger] Generated ports ['65144', '65145', '65146', '65147', '65148']
2026-02-11 04:46:58.590 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:46:58.590 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:46:58.590 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:46:58.590 DEBUG [src.node.docker_mananger] docker run -i -t -p 65144:65144 -p 65145:65145 -p 65146:65146 -p 65147:65147 -p 65148:65148 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65146 --rest-port=65144 --tcp-port=65145 --discv5-udp-port=65147 --rest-address=0.0.0.0 --nat=extip:172.18.77.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=166fe81753abda985a028789173946fbb4e4f3c04ee558fcbc4b546591fa7213 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65148 --metrics-logging=true --relay=true --filter=true
2026-02-11 04:46:58.746 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.77.213 waku 2c91928f99609eb4f9b6986122a1fa030f2e89a1623bb5f8c4742b6617fe8592
2026-02-11 04:46:58.771 DEBUG [src.node.docker_mananger] Container started with ID 2c91928f9960. Setting up logs at ./log/docker/node1_2026-02-11_04-46-58__65f544b9-b0c5-4132-9b0c-c24f12bc2537__wakuorg_nwaku:latest.log
2026-02-11 04:46:58.771 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65144
2026-02-11 04:46:58.771 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:46:58.893 ERROR [src.node.docker_mananger] Max retries reached for container 78c826138f84. Exiting log stream.
2026-02-11 04:46:59.397 ERROR [src.node.docker_mananger] Max retries reached for container 371d8b97f978. Exiting log stream.
2026-02-11 04:46:59.772 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65144/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:59.775 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-11 04:46:59.775 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:46:59.775 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65144/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:46:59.777 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.77.213/tcp/65145/p2p/16Uiu2HAmMMJQfLA4kZenGNUCAQ1xtgRPMsqSzDGWmbTV8GMYZi1H","/ip4/172.18.77.213/tcp/65146/ws/p2p/16Uiu2HAmMMJQfLA4kZenGNUCAQ1xtgRPMsqSzDGWmbTV8GMYZi1H"],"enrUri":"enr:-L24QG9IGedrVJPDbvi14GRwokINLQJr923dwoEZeBddARdFAtCQDFGvOcouKnEm_c5pZVDrfcVXSZusUnhZHeTzUMkCgmlkgnY0gmlwhKwSTdWKbXVsdGlhZGRyc5YACASsEk3VBv55AAoErBJN1Qb-et0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgTEla4J30cFfsDnjEqekzfpqWIuao1iXFtWy5UnfxISDdGNwgv55g3VkcIL-e4V3YWt1MgU"}'
2026-02-11 04:46:59.777 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:46:59.778 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-11 04:46:59.784 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-11 04:46:59.784 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-11_04-46-58__65f544b9-b0c5-4132-9b0c-c24f12bc2537__wakuorg_nwaku:latest.log
2026-02-11 04:46:59.784 DEBUG [src.node.waku_node] Starting Node...
2026-02-11 04:46:59.784 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-11 04:46:59.786 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-11 04:46:59.786 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.249.143
2026-02-11 04:46:59.786 DEBUG [src.node.docker_mananger] Generated ports ['42241', '42242', '42243', '42244', '42245']
2026-02-11 04:46:59.786 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-11 04:46:59.786 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-11 04:46:59.786 DEBUG [src.node.waku_node] Using volumes []
2026-02-11 04:46:59.787 DEBUG [src.node.docker_mananger] docker run -i -t -p 42241:42241 -p 42242:42242 -p 42243:42243 -p 42244:42244 -p 42245:42245 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42243 --rest-port=42241 --tcp-port=42242 --discv5-udp-port=42244 --rest-address=0.0.0.0 --nat=extip:172.18.249.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afcce74cc3bda71accafbdad0fa320473521cf0a4b9bd1bf021fdb1106e3a7d9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42245 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QG9IGedrVJPDbvi14GRwokINLQJr923dwoEZeBddARdFAtCQDFGvOcouKnEm_c5pZVDrfcVXSZusUnhZHeTzUMkCgmlkgnY0gmlwhKwSTdWKbXVsdGlhZGRyc5YACASsEk3VBv55AAoErBJN1Qb-et0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgTEla4J30cFfsDnjEqekzfpqWIuao1iXFtWy5UnfxISDdGNwgv55g3VkcIL-e4V3YWt1MgU --filternode=/ip4/172.18.77.213/tcp/65145/p2p/16Uiu2HAmMMJQfLA4kZenGNUCAQ1xtgRPMsqSzDGWmbTV8GMYZi1H
2026-02-11 04:46:59.942 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.249.143 waku 396140b8947982ce09778de887cf5019a33c1a8c97371f5af07036a8a762244d
2026-02-11 04:46:59.967 DEBUG [src.node.docker_mananger] Container started with ID 396140b89479. Setting up logs at ./log/docker/node2_2026-02-11_04-46-58__65f544b9-b0c5-4132-9b0c-c24f12bc2537__wakuorg_nwaku:latest.log
2026-02-11 04:46:59.967 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42241
2026-02-11 04:46:59.967 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-11 04:47:00.968 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42241/health" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:47:00.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-11 04:47:00.971 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-11 04:47:00.971 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42241/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-11 04:47:00.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.143/tcp/42242/p2p/16Uiu2HAmLQhGJXpmgDjzJ9PE5BMmhRBiWzmpiV6s7JhpwXVfJuJu","/ip4/172.18.249.143/tcp/42243/ws/p2p/16Uiu2HAmLQhGJXpmgDjzJ9PE5BMmhRBiWzmpiV6s7JhpwXVfJuJu"],"enrUri":"enr:-L24QHsSTVHrRYuqG40Z_oL0ZOgdJ4pdkFTMH0QYTV9obISYaKbqjBFrYe4QlJB2xx0TzKSpha6iWlxb6seKvrSC3U0CgmlkgnY0gmlwhKwS-Y-KbXVsdGlhZGRyc5YACASsEvmPBqUCAAoErBL5jwalA90DgnJzhQADAQAAiXNlY3AyNTZrMaEDczQLfu1HH6QF7PGipHMWyHl-LvC5ueQtSC3lA79af2aDdGNwgqUCg3VkcIKlBIV3YWt1MgA"}'
2026-02-11 04:47:00.974 INFO [src.node.waku_node] REST service is ready !!
2026-02-11 04:47:00.974 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42241/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.77.213/tcp/65145/p2p/16Uiu2HAmMMJQfLA4kZenGNUCAQ1xtgRPMsqSzDGWmbTV8GMYZi1H"]'
2026-02-11 04:47:01.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:47:01.001 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-11 04:47:01.001 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65144/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-11 04:47:01.013 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-11 04:47:01.014 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42241/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5a4e3854-3d05-4394-98f1-8364f857707e", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-11 04:47:01.026 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"5a4e3854-3d05-4394-98f1-8364f857707e","statusDesc":"OK"}'
2026-02-11 04:47:01.027 DEBUG [tests.filter.test_subscribe_update] Running test with contetn topic Empty string
2026-02-11 04:47:01.027 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:42241/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "Empty string", "value": ""}], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-11 04:47:01.030 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42241/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-11 04:47:01.031 DEBUG [tests.filter.test_subscribe_update] Running test with contetn topic A dictionary
2026-02-11 04:47:01.031 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:42241/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A dictionary", "value": {"key": "YWFh"}}], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-11 04:47:01.033 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42241/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-11 04:47:01.035 DEBUG [tests.filter.test_subscribe_update] Running test with contetn topic An integer
2026-02-11 04:47:01.035 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:42241/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "An integer", "value": 1234567890}], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-11 04:47:01.037 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42241/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-11 04:47:01.038 DEBUG [tests.filter.test_subscribe_update] Running test with contetn topic A list
2026-02-11 04:47:01.038 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:42241/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A list", "value": ["YWFh"]}], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-11 04:47:01.041 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42241/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-11 04:47:01.041 DEBUG [tests.filter.test_subscribe_update] Running test with contetn topic A bool
2026-02-11 04:47:01.041 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:42241/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A bool", "value": true}], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-11 04:47:01.044 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42241/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-11 04:47:01.046 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-11 04:47:01.046 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-11 04:47:01.046 DEBUG [src.node.waku_node] Stopping container with id 2c91928f9960
2026-02-11 04:47:01.527 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:47:01.528 DEBUG [src.node.waku_node] Stopping container with id 396140b89479
2026-02-11 04:47:02.022 DEBUG [src.node.waku_node] Container stopped.
2026-02-11 04:47:02.023 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-11 04:47:02.028 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-11 04:47:02.033 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
