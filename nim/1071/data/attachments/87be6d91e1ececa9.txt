2026-02-06 04:33:40.631 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-06 04:33:40.631 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2026-02-06_04-33-40__a7e02c3c-1bb7-4838-a2be-23b434a0f4fa
2026-02-06 04:33:40.632 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-06 04:33:40.632 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-06 04:33:40.639 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:33:40.639 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-06_04-33-40__a7e02c3c-1bb7-4838-a2be-23b434a0f4fa__wakuorg_nwaku:latest.log
2026-02-06 04:33:40.639 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:33:40.639 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:33:40.641 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:33:40.641 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.184
2026-02-06 04:33:40.641 DEBUG [src.node.docker_mananger] Generated ports ['27819', '27820', '27821', '27822', '27823']
2026-02-06 04:33:40.641 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:33:40.641 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:33:40.641 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:33:40.642 DEBUG [src.node.docker_mananger] docker run -i -t -p 27819:27819 -p 27820:27820 -p 27821:27821 -p 27822:27822 -p 27823:27823 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27821 --rest-port=27819 --tcp-port=27820 --discv5-udp-port=27822 --rest-address=0.0.0.0 --nat=extip:172.18.109.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f790216bc4c9bdee36bb63f7fb5bd8bad007edefe85f81e5e3a24ed36b1e0e6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27823 --metrics-logging=true --lightpush=true --relay=true
2026-02-06 04:33:40.834 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.184 waku fd52f2941ab71f4088f9d3364f17b87db049466c5160132a116650f06b57becf
2026-02-06 04:33:40.863 DEBUG [src.node.docker_mananger] Container started with ID fd52f2941ab7. Setting up logs at ./log/docker/receiving_node1_2026-02-06_04-33-40__a7e02c3c-1bb7-4838-a2be-23b434a0f4fa__wakuorg_nwaku:latest.log
2026-02-06 04:33:40.866 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27819
2026-02-06 04:33:40.866 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:33:40.873 ERROR [src.node.docker_mananger] Max retries reached for container 7174eb71bcf6. Exiting log stream.
2026-02-06 04:33:41.416 ERROR [src.node.docker_mananger] Max retries reached for container 36a8b4c42f5f. Exiting log stream.
2026-02-06 04:33:41.866 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27819/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:41.870 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:33:41.870 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:33:41.870 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27819/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:41.872 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.184/tcp/27820/p2p/16Uiu2HAmNeC8Gtt6VdzfLr3tEYsLEEZJvTGELfdQGtq4Lsyj48u2","/ip4/172.18.109.184/tcp/27821/ws/p2p/16Uiu2HAmNeC8Gtt6VdzfLr3tEYsLEEZJvTGELfdQGtq4Lsyj48u2"],"enrUri":"enr:-L24QJpnu2TlYBOWunTJJIrM_vnKInt5K9bmCEVdScJno8tVJN9j2LV6aUNAhc5CyaVx0m_VHxZ0VLBRZBl15R-pk2ICgmlkgnY0gmlwhKwSbbiKbXVsdGlhZGRyc5YACASsEm24BmysAAoErBJtuAZsrd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlGCaaXC-qJ61hkWrgmCVFufVvbBO5SorpCin7uS2TN2DdGNwgmysg3VkcIJsroV3YWt1Mgk"}'
2026-02-06 04:33:41.872 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:33:41.879 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:33:41.880 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-06_04-33-40__a7e02c3c-1bb7-4838-a2be-23b434a0f4fa__wakuorg_nwaku:latest.log
2026-02-06 04:33:41.880 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:33:41.880 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:33:41.881 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:33:41.881 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.27.217
2026-02-06 04:33:41.882 DEBUG [src.node.docker_mananger] Generated ports ['29549', '29550', '29551', '29552', '29553']
2026-02-06 04:33:41.882 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:33:41.882 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:33:41.882 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:33:41.882 DEBUG [src.node.docker_mananger] docker run -i -t -p 29549:29549 -p 29550:29550 -p 29551:29551 -p 29552:29552 -p 29553:29553 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29551 --rest-port=29549 --tcp-port=29550 --discv5-udp-port=29552 --rest-address=0.0.0.0 --nat=extip:172.18.27.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1d13d599c839d2b7b4449ff63d89b652a666d23f188dd1e1f9b0cab2e2e26fe2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29553 --metrics-logging=true --lightpush=false --relay=true
2026-02-06 04:33:42.073 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.27.217 waku b7aa60585895e7e4d8d2345c30d941398b93a29784bede0cc8247c4256925ba2
2026-02-06 04:33:42.104 DEBUG [src.node.docker_mananger] Container started with ID b7aa60585895. Setting up logs at ./log/docker/receiving_node2_2026-02-06_04-33-40__a7e02c3c-1bb7-4838-a2be-23b434a0f4fa__wakuorg_nwaku:latest.log
2026-02-06 04:33:42.104 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29549
2026-02-06 04:33:42.104 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:33:43.105 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29549/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:43.108 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:33:43.109 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:33:43.109 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29549/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:43.111 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.217/tcp/29550/p2p/16Uiu2HAkwNULzokz7tW7gKk2F9uiFtuGUycYCFKm54eFtCiPiuWy","/ip4/172.18.27.217/tcp/29551/ws/p2p/16Uiu2HAkwNULzokz7tW7gKk2F9uiFtuGUycYCFKm54eFtCiPiuWy"],"enrUri":"enr:-L24QBC5cAeTVrlFCq2Ehlfh0L43mv1zKFZqdeVkGcAGVJJFWdJsx1u-dTOlq5njCV1XMvFDWye55s8QEXNlbp5YtlICgmlkgnY0gmlwhKwSG9mKbXVsdGlhZGRyc5YACASsEhvZBnNuAAoErBIb2QZzb90DgnJzhQADAQAAiXNlY3AyNTZrMaECHOV58iREKdSxtaaREf4L2jdLJnRkE_FF6kVbbUsi0MKDdGNwgnNug3VkcIJzcIV3YWt1MgE"}'
2026-02-06 04:33:43.111 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:33:43.112 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29549/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.184/tcp/27820/p2p/16Uiu2HAmNeC8Gtt6VdzfLr3tEYsLEEZJvTGELfdQGtq4Lsyj48u2"]'
2026-02-06 04:33:43.144 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:43.158 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:33:43.158 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-06_04-33-40__a7e02c3c-1bb7-4838-a2be-23b434a0f4fa__wakuorg_nwaku:latest.log
2026-02-06 04:33:43.159 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:33:43.159 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:33:43.163 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:33:43.163 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.9.106
2026-02-06 04:33:43.163 DEBUG [src.node.docker_mananger] Generated ports ['31900', '31901', '31902', '31903', '31904']
2026-02-06 04:33:43.163 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:33:43.164 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:33:43.164 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:33:43.165 DEBUG [src.node.docker_mananger] docker run -i -t -p 31900:31900 -p 31901:31901 -p 31902:31902 -p 31903:31903 -p 31904:31904 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31902 --rest-port=31900 --tcp-port=31901 --discv5-udp-port=31903 --rest-address=0.0.0.0 --nat=extip:172.18.9.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab5d8f576a0991dad1c5fb019ca614c11d211b0b4bc121bd8ff3abfcf3c9bdbc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31904 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJpnu2TlYBOWunTJJIrM_vnKInt5K9bmCEVdScJno8tVJN9j2LV6aUNAhc5CyaVx0m_VHxZ0VLBRZBl15R-pk2ICgmlkgnY0gmlwhKwSbbiKbXVsdGlhZGRyc5YACASsEm24BmysAAoErBJtuAZsrd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlGCaaXC-qJ61hkWrgmCVFufVvbBO5SorpCin7uS2TN2DdGNwgmysg3VkcIJsroV3YWt1Mgk --lightpushnode=/ip4/172.18.109.184/tcp/27820/p2p/16Uiu2HAmNeC8Gtt6VdzfLr3tEYsLEEZJvTGELfdQGtq4Lsyj48u2 --lightpush=true --relay=true
2026-02-06 04:33:43.356 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.9.106 waku 14dca3368ae236a2f39f8b0fbf2eedc43a64ce8f96f8326d0192e29d82211d60
2026-02-06 04:33:43.387 DEBUG [src.node.docker_mananger] Container started with ID 14dca3368ae2. Setting up logs at ./log/docker/lightpush_node1_2026-02-06_04-33-40__a7e02c3c-1bb7-4838-a2be-23b434a0f4fa__wakuorg_nwaku:latest.log
2026-02-06 04:33:43.387 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31900
2026-02-06 04:33:43.387 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:33:44.388 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31900/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:44.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:33:44.404 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:33:44.404 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31900/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:44.409 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.106/tcp/31901/p2p/16Uiu2HAmNVrkfeqtfNPxTcHiZuTjFgRHco83sFYAZJmXXGHinVe3","/ip4/172.18.9.106/tcp/31902/ws/p2p/16Uiu2HAmNVrkfeqtfNPxTcHiZuTjFgRHco83sFYAZJmXXGHinVe3"],"enrUri":"enr:-L24QL9mSm71OGVYFfDkeDmZYWf5I-WUzwTkXZjonOaBo_obV7V1lUrzvflZ-4dAdNymPuGmpSxjJ_738HCUkOUKKLsCgmlkgnY0gmlwhKwSCWqKbXVsdGlhZGRyc5YACASsEglqBnydAAoErBIJagZ8nt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkj4NVeiMxDUzCcEEKoww2lwwDrR0Hm_DcGssXXZ75ayDdGNwgnydg3VkcIJ8n4V3YWt1Mgk"}'
2026-02-06 04:33:44.409 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:33:44.410 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31900/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.184/tcp/27820/p2p/16Uiu2HAmNeC8Gtt6VdzfLr3tEYsLEEZJvTGELfdQGtq4Lsyj48u2"]'
2026-02-06 04:33:44.413 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:44.413 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31900/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.27.217/tcp/29550/p2p/16Uiu2HAkwNULzokz7tW7gKk2F9uiFtuGUycYCFKm54eFtCiPiuWy"]'
2026-02-06 04:33:44.440 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:44.441 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27819/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-06 04:33:44.445 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:44.445 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29549/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-06 04:33:44.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:44.449 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31900/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-06 04:33:44.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:44.453 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31900/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1770352424452913152}}'
2026-02-06 04:33:44.455 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31900/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-06 04:33:44.457 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-06 04:33:44.458 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-06 04:33:44.458 DEBUG [src.node.waku_node] Stopping container with id fd52f2941ab7
2026-02-06 04:33:45.030 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:33:45.032 DEBUG [src.node.waku_node] Stopping container with id b7aa60585895
2026-02-06 04:33:45.586 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:33:45.587 DEBUG [src.node.waku_node] Stopping container with id 14dca3368ae2
2026-02-06 04:33:45.883 ERROR [src.node.docker_mananger] Max retries reached for container fd52f2941ab7. Exiting log stream.
2026-02-06 04:33:46.120 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:33:46.122 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-06 04:33:46.136 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:33:46.144 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:33:46.152 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
