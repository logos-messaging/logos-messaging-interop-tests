2026-02-06 04:40:35.044 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-06 04:40:35.044 DEBUG [tests.conftest] Running test: test_relay_subscribe_with_invalid_pubsub_topic_format with id: 2026-02-06_04-40-35__ce2eefd2-764c-46b3-b307-ad775fa23456
2026-02-06 04:40:35.044 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-06 04:40:35.045 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-06 04:40:35.045 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-06 04:40:35.051 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:40:35.051 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-06_04-40-35__ce2eefd2-764c-46b3-b307-ad775fa23456__wakuorg_nwaku:latest.log
2026-02-06 04:40:35.052 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:40:35.052 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:40:35.053 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:40:35.053 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.246.79
2026-02-06 04:40:35.053 DEBUG [src.node.docker_mananger] Generated ports ['31650', '31651', '31652', '31653', '31654']
2026-02-06 04:40:35.054 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:40:35.054 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:40:35.054 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:40:35.054 DEBUG [src.node.docker_mananger] docker run -i -t -p 31650:31650 -p 31651:31651 -p 31652:31652 -p 31653:31653 -p 31654:31654 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31652 --rest-port=31650 --tcp-port=31651 --discv5-udp-port=31653 --rest-address=0.0.0.0 --nat=extip:172.18.246.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c2f65c6d8151b032b4d1e64bf15aa43d3e5d6e4fbd3dcbcd31443f4adddf4ef1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31654 --metrics-logging=true --relay=true
2026-02-06 04:40:35.238 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.246.79 waku 5eeba5c1dabb606f2f8856f4300fd3526efd75edf68c86a76f2d85378c197261
2026-02-06 04:40:35.270 DEBUG [src.node.docker_mananger] Container started with ID 5eeba5c1dabb. Setting up logs at ./log/docker/node1_2026-02-06_04-40-35__ce2eefd2-764c-46b3-b307-ad775fa23456__wakuorg_nwaku:latest.log
2026-02-06 04:40:35.271 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31650
2026-02-06 04:40:35.272 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:40:35.295 ERROR [src.node.docker_mananger] Max retries reached for container 614947b5080d. Exiting log stream.
2026-02-06 04:40:35.821 ERROR [src.node.docker_mananger] Max retries reached for container 6213c14fb0d3. Exiting log stream.
2026-02-06 04:40:36.273 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31650/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:40:36.277 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:40:36.277 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:40:36.277 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31650/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:40:36.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.79/tcp/31651/p2p/16Uiu2HAmEh76Um7yD3YMBTLwaFgY7WJvSYXKQbpjixcg6Q4XtWyq","/ip4/172.18.246.79/tcp/31652/ws/p2p/16Uiu2HAmEh76Um7yD3YMBTLwaFgY7WJvSYXKQbpjixcg6Q4XtWyq"],"enrUri":"enr:-L24QNjTg-rxgz-l_fFM90d6NZzpcjU7EvgGqHN0NW9thbxWXkgAjZLlwu6J-mkx08zmsmUdL7c9SJ5ZdX22HFkPcOYCgmlkgnY0gmlwhKwS9k-KbXVsdGlhZGRyc5YACASsEvZPBnujAAoErBL2TwZ7pN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHkIpYxpyLiCox4Oz5eVpr89ktN3HQn34FgB_LUi15eyDdGNwgnujg3VkcIJ7pYV3YWt1MgE"}'
2026-02-06 04:40:36.279 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:40:36.286 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:40:36.286 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-06_04-40-35__ce2eefd2-764c-46b3-b307-ad775fa23456__wakuorg_nwaku:latest.log
2026-02-06 04:40:36.286 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:40:36.286 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:40:36.288 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:40:36.288 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.195.189
2026-02-06 04:40:36.288 DEBUG [src.node.docker_mananger] Generated ports ['11548', '11549', '11550', '11551', '11552']
2026-02-06 04:40:36.288 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:40:36.288 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:40:36.288 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:40:36.288 DEBUG [src.node.docker_mananger] docker run -i -t -p 11548:11548 -p 11549:11549 -p 11550:11550 -p 11551:11551 -p 11552:11552 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11550 --rest-port=11548 --tcp-port=11549 --discv5-udp-port=11551 --rest-address=0.0.0.0 --nat=extip:172.18.195.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f4efef0d9b8b7db9cca61fdeebdbda8b138cc11d08ed08a9b090dfbd7bb6c982 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11552 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNjTg-rxgz-l_fFM90d6NZzpcjU7EvgGqHN0NW9thbxWXkgAjZLlwu6J-mkx08zmsmUdL7c9SJ5ZdX22HFkPcOYCgmlkgnY0gmlwhKwS9k-KbXVsdGlhZGRyc5YACASsEvZPBnujAAoErBL2TwZ7pN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHkIpYxpyLiCox4Oz5eVpr89ktN3HQn34FgB_LUi15eyDdGNwgnujg3VkcIJ7pYV3YWt1MgE
2026-02-06 04:40:36.479 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.195.189 waku d02bc9bf1259ec6e7a682d053d452a1957bfee291bd8be360120743e11a6b85b
2026-02-06 04:40:36.510 DEBUG [src.node.docker_mananger] Container started with ID d02bc9bf1259. Setting up logs at ./log/docker/node2_2026-02-06_04-40-35__ce2eefd2-764c-46b3-b307-ad775fa23456__wakuorg_nwaku:latest.log
2026-02-06 04:40:36.510 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11548
2026-02-06 04:40:36.510 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:40:37.511 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11548/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:40:37.524 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:40:37.524 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:40:37.524 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11548/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:40:37.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.189/tcp/11549/p2p/16Uiu2HAmTg7J46PoUvE3cozToEu7N1nUDyXxfcU4GtyD64cQnLDH","/ip4/172.18.195.189/tcp/11550/ws/p2p/16Uiu2HAmTg7J46PoUvE3cozToEu7N1nUDyXxfcU4GtyD64cQnLDH"],"enrUri":"enr:-L24QJ-1etsAzUylF6EERsYagRMYIzfD7neZPAK1CzJXgepVXY28OvNG8ZGlxet-_4SsEfnAxobtUqVIZGNbQjlZH4sCgmlkgnY0gmlwhKwSw72KbXVsdGlhZGRyc5YACASsEsO9Bi0dAAoErBLDvQYtHt0DgnJzhQADAQAAiXNlY3AyNTZrMaED3yi8jn-GonQS1Gjp-6gy80itAu6my73TiDG0SCfdrgyDdGNwgi0dg3VkcIItH4V3YWt1MgE"}'
2026-02-06 04:40:37.531 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:40:37.532 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11548/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.246.79/tcp/31651/p2p/16Uiu2HAmEh76Um7yD3YMBTLwaFgY7WJvSYXKQbpjixcg6Q4XtWyq"]'
2026-02-06 04:40:37.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:40:37.536 DEBUG [tests.relay.test_subscribe] Running test with payload /test/2/rs/0/1
2026-02-06 04:40:37.536 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31650/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/test/2/rs/0/1"'
2026-02-06 04:40:37.538 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31650/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-06 04:40:37.539 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/3/rs/0/1
2026-02-06 04:40:37.539 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31650/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/3/rs/0/1"'
2026-02-06 04:40:37.541 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31650/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-06 04:40:37.542 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/test/0/1
2026-02-06 04:40:37.542 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31650/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/test/0/1"'
2026-02-06 04:40:37.545 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31650/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-06 04:40:37.545 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/3/b
2026-02-06 04:40:37.546 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31650/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/3/b"'
2026-02-06 04:40:37.548 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31650/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-06 04:40:37.549 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/0
2026-02-06 04:40:37.549 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31650/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/0"'
2026-02-06 04:40:37.551 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31650/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-06 04:40:37.553 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-06 04:40:37.554 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-06 04:40:37.554 DEBUG [src.node.waku_node] Stopping container with id 5eeba5c1dabb
2026-02-06 04:40:38.082 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:40:38.083 DEBUG [src.node.waku_node] Stopping container with id d02bc9bf1259
2026-02-06 04:40:38.588 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:40:38.591 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-06 04:40:38.595 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:40:38.600 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
