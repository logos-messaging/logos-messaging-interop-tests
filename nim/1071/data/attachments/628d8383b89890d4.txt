2026-02-06 04:33:45.215 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-06 04:33:45.215 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_content_topic with id: 2026-02-06_04-33-45__cea72355-6557-49d6-b562-29de4b36f379
2026-02-06 04:33:45.216 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-06 04:33:45.216 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-06 04:33:45.216 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-06 04:33:45.225 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:33:45.226 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-06_04-33-45__cea72355-6557-49d6-b562-29de4b36f379__wakuorg_nwaku:latest.log
2026-02-06 04:33:45.226 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:33:45.226 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:33:45.229 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:33:45.230 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.97
2026-02-06 04:33:45.231 DEBUG [src.node.docker_mananger] Generated ports ['8722', '8723', '8724', '8725', '8726']
2026-02-06 04:33:45.231 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:33:45.231 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:33:45.232 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:33:45.232 DEBUG [src.node.docker_mananger] docker run -i -t -p 8722:8722 -p 8723:8723 -p 8724:8724 -p 8725:8725 -p 8726:8726 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8724 --rest-port=8722 --tcp-port=8723 --discv5-udp-port=8725 --rest-address=0.0.0.0 --nat=extip:172.18.109.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db0cb3d95c5ba82ddccfe575e5dd7efd6b81d2be7cb6c893aedfbde8f5cf9aec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8726 --metrics-logging=true --relay=true --filter=true
2026-02-06 04:33:45.413 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.97 waku 4b14b8400e13d2d2a0ea75c44c62a335a15b67d0bf0b9c5bcc156527916f92e5
2026-02-06 04:33:45.443 DEBUG [src.node.docker_mananger] Container started with ID 4b14b8400e13. Setting up logs at ./log/docker/node1_2026-02-06_04-33-45__cea72355-6557-49d6-b562-29de4b36f379__wakuorg_nwaku:latest.log
2026-02-06 04:33:45.445 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8722
2026-02-06 04:33:45.445 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:33:45.463 ERROR [src.node.docker_mananger] Max retries reached for container 278399f73d47. Exiting log stream.
2026-02-06 04:33:46.045 ERROR [src.node.docker_mananger] Max retries reached for container f835888ae4c5. Exiting log stream.
2026-02-06 04:33:46.447 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8722/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:46.450 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:33:46.450 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:33:46.450 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8722/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:46.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.97/tcp/8723/p2p/16Uiu2HAkuiPBAHNR2Z5DVJZzfxVnAvyJdpn9xpzBzLhAVLkZyLp2","/ip4/172.18.109.97/tcp/8724/ws/p2p/16Uiu2HAkuiPBAHNR2Z5DVJZzfxVnAvyJdpn9xpzBzLhAVLkZyLp2"],"enrUri":"enr:-L24QN-XAERSfzOwxej93RbBb9dc6TfY-QEnxWW5Bq3qVEdXIwABABmkx8N9lah7-lfYw5n5dTX79S7qdQ0h2Syo6VkCgmlkgnY0gmlwhKwSbWGKbXVsdGlhZGRyc5YACASsEm1hBiITAAoErBJtYQYiFN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBEfflwLC9VuxwaS0pLZgpCs3Tok6MvpwFKmTfi0PKrODdGNwgiITg3VkcIIiFYV3YWt1MgU"}'
2026-02-06 04:33:46.453 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:33:46.453 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-06 04:33:46.459 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:33:46.460 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-06_04-33-45__cea72355-6557-49d6-b562-29de4b36f379__wakuorg_nwaku:latest.log
2026-02-06 04:33:46.460 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:33:46.460 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:33:46.461 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:33:46.461 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.59.216
2026-02-06 04:33:46.461 DEBUG [src.node.docker_mananger] Generated ports ['34045', '34046', '34047', '34048', '34049']
2026-02-06 04:33:46.462 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:33:46.462 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:33:46.462 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:33:46.462 DEBUG [src.node.docker_mananger] docker run -i -t -p 34045:34045 -p 34046:34046 -p 34047:34047 -p 34048:34048 -p 34049:34049 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34047 --rest-port=34045 --tcp-port=34046 --discv5-udp-port=34048 --rest-address=0.0.0.0 --nat=extip:172.18.59.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=517a5f7facbfd01d965e356c5fb3fc461ca567e4f0ce8ce47f2ff91701f3ecfc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34049 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QN-XAERSfzOwxej93RbBb9dc6TfY-QEnxWW5Bq3qVEdXIwABABmkx8N9lah7-lfYw5n5dTX79S7qdQ0h2Syo6VkCgmlkgnY0gmlwhKwSbWGKbXVsdGlhZGRyc5YACASsEm1hBiITAAoErBJtYQYiFN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBEfflwLC9VuxwaS0pLZgpCs3Tok6MvpwFKmTfi0PKrODdGNwgiITg3VkcIIiFYV3YWt1MgU --filternode=/ip4/172.18.109.97/tcp/8723/p2p/16Uiu2HAkuiPBAHNR2Z5DVJZzfxVnAvyJdpn9xpzBzLhAVLkZyLp2
2026-02-06 04:33:46.650 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.59.216 waku 052b08f2d0ff4bbc720aaa794af51f155f197d4a3ca5ffd7208bc5c92c435f3b
2026-02-06 04:33:46.680 DEBUG [src.node.docker_mananger] Container started with ID 052b08f2d0ff. Setting up logs at ./log/docker/node2_2026-02-06_04-33-45__cea72355-6557-49d6-b562-29de4b36f379__wakuorg_nwaku:latest.log
2026-02-06 04:33:46.681 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34045
2026-02-06 04:33:46.681 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:33:47.681 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34045/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:47.686 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-06 04:33:47.687 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:33:47.687 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34045/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:47.689 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.216/tcp/34046/p2p/16Uiu2HAm5pZGkWiKUBKC3QfaquDqqozBMkkB1kfUoYc6wNW6GX8a","/ip4/172.18.59.216/tcp/34047/ws/p2p/16Uiu2HAm5pZGkWiKUBKC3QfaquDqqozBMkkB1kfUoYc6wNW6GX8a"],"enrUri":"enr:-L24QEUL8a6hIyPESMO8TAITNIFj8QeGwILPWyXrTeFJs-9Sb0NXPgQAm8hEMhG1gsXnVHlskVOZOsz4ZogJXp5KkeYCgmlkgnY0gmlwhKwSO9iKbXVsdGlhZGRyc5YACASsEjvYBoT-AAoErBI72AaE_90DgnJzhQADAQAAiXNlY3AyNTZrMaECmnGkvoB0TRld4yJC5hefQWLkyVt2JGLw2DzRPfc40feDdGNwgoT-g3VkcIKFAIV3YWt1MgA"}'
2026-02-06 04:33:47.689 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:33:47.690 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34045/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.97/tcp/8723/p2p/16Uiu2HAkuiPBAHNR2Z5DVJZzfxVnAvyJdpn9xpzBzLhAVLkZyLp2"]'
2026-02-06 04:33:47.716 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:47.717 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-06 04:33:47.717 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8722/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-06 04:33:47.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:47.731 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34045/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f0d4564f-a1c4-4554-bd5c-7090f5563d7a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-06 04:33:47.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f0d4564f-a1c4-4554-bd5c-7090f5563d7a","statusDesc":"OK"}'
2026-02-06 04:33:47.743 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:34045/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/2/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-06 04:33:47.750 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:34045/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2026-02-06 04:33:47.752 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8722/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:33:47.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:47.760 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-06 04:33:47.861 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-06 04:33:47.861 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34045/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:47.864 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770352427752559865,"ephemeral":false}]'
2026-02-06 04:33:47.867 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-06 04:33:47.868 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-06 04:33:47.868 DEBUG [src.node.waku_node] Stopping container with id 4b14b8400e13
2026-02-06 04:33:48.404 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:33:48.404 DEBUG [src.node.waku_node] Stopping container with id 052b08f2d0ff
2026-02-06 04:33:48.946 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:33:48.949 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-06 04:33:48.954 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:33:48.959 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
