2026-02-06 04:38:59.555 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-06 04:38:59.556 DEBUG [tests.conftest] Running test: test_cant_retrieve_messages_on_not_subscribed_content_topic with id: 2026-02-06_04-38-59__1210f4c9-f03c-47b7-aed1-6916c2546252
2026-02-06 04:38:59.556 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-06 04:38:59.556 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-06 04:38:59.556 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-06 04:38:59.564 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:38:59.565 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-06_04-38-59__1210f4c9-f03c-47b7-aed1-6916c2546252__wakuorg_nwaku:latest.log
2026-02-06 04:38:59.565 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:38:59.565 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:38:59.567 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:38:59.567 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.170.147
2026-02-06 04:38:59.567 DEBUG [src.node.docker_mananger] Generated ports ['52567', '52568', '52569', '52570', '52571']
2026-02-06 04:38:59.567 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:38:59.567 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:38:59.567 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:38:59.567 DEBUG [src.node.docker_mananger] docker run -i -t -p 52567:52567 -p 52568:52568 -p 52569:52569 -p 52570:52570 -p 52571:52571 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52569 --rest-port=52567 --tcp-port=52568 --discv5-udp-port=52570 --rest-address=0.0.0.0 --nat=extip:172.18.170.147 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d9add3e4fc5d053285e1ecade38bd5296f36b0b1f8dfe2c190bf9e24a2cccc5e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52571 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-02-06 04:38:59.752 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.170.147 waku e1f47e7e7ba19bc4fa57677f175e9ee38d35217cbaf91a4585e1993f09045a2c
2026-02-06 04:38:59.784 DEBUG [src.node.docker_mananger] Container started with ID e1f47e7e7ba1. Setting up logs at ./log/docker/node1_2026-02-06_04-38-59__1210f4c9-f03c-47b7-aed1-6916c2546252__wakuorg_nwaku:latest.log
2026-02-06 04:38:59.785 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52567
2026-02-06 04:38:59.786 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:39:00.363 ERROR [src.node.docker_mananger] Max retries reached for container 724cee84b1f8. Exiting log stream.
2026-02-06 04:39:00.786 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52567/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:00.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:39:00.790 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:39:00.790 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52567/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:00.792 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.147/tcp/52568/p2p/16Uiu2HAmBM1ELQysinjzCrkrNwkn4iQuooo3zqsFqMoq4aRodTRJ","/ip4/172.18.170.147/tcp/52569/ws/p2p/16Uiu2HAmBM1ELQysinjzCrkrNwkn4iQuooo3zqsFqMoq4aRodTRJ"],"enrUri":"enr:-L24QNXndyPIxxYxtTMAW2bPPiBJNNDpxR2KlDDd7oUSF-KAEFL_dTo5sY-9WnE_5G5Kv6hKblg5f_KJlyfp5LRqn_cCgmlkgnY0gmlwhKwSqpOKbXVsdGlhZGRyc5YACASsEqqTBs1YAAoErBKqkwbNWd0DgnJzhQACAQAAiXNlY3AyNTZrMaEC7IjaiCHl6HQcgsx9Ti7cxOvCBQuRWRaSeZym7_4uommDdGNwgs1Yg3VkcILNWoV3YWt1MgU"}'
2026-02-06 04:39:00.792 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:39:00.799 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:39:00.800 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-06_04-38-59__1210f4c9-f03c-47b7-aed1-6916c2546252__wakuorg_nwaku:latest.log
2026-02-06 04:39:00.800 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:39:00.800 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:39:00.801 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:39:00.801 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.14.76
2026-02-06 04:39:00.802 DEBUG [src.node.docker_mananger] Generated ports ['47571', '47572', '47573', '47574', '47575']
2026-02-06 04:39:00.802 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:39:00.802 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:39:00.802 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:39:00.802 DEBUG [src.node.docker_mananger] docker run -i -t -p 47571:47571 -p 47572:47572 -p 47573:47573 -p 47574:47574 -p 47575:47575 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47573 --rest-port=47571 --tcp-port=47572 --discv5-udp-port=47574 --rest-address=0.0.0.0 --nat=extip:172.18.14.76 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=1ece4bf88570fc4f58f8a17804cfd4247fffeceb5c4dd210a0f0f20b2ad052b8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47575 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNXndyPIxxYxtTMAW2bPPiBJNNDpxR2KlDDd7oUSF-KAEFL_dTo5sY-9WnE_5G5Kv6hKblg5f_KJlyfp5LRqn_cCgmlkgnY0gmlwhKwSqpOKbXVsdGlhZGRyc5YACASsEqqTBs1YAAoErBKqkwbNWd0DgnJzhQACAQAAiXNlY3AyNTZrMaEC7IjaiCHl6HQcgsx9Ti7cxOvCBQuRWRaSeZym7_4uommDdGNwgs1Yg3VkcILNWoV3YWt1MgU --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-02-06 04:39:00.988 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.14.76 waku 2e7ea8a9c25d984cd14e51f5957e23cc472181758c73aab1f94b20e39bebb100
2026-02-06 04:39:01.020 DEBUG [src.node.docker_mananger] Container started with ID 2e7ea8a9c25d. Setting up logs at ./log/docker/node2_2026-02-06_04-38-59__1210f4c9-f03c-47b7-aed1-6916c2546252__wakuorg_nwaku:latest.log
2026-02-06 04:39:01.020 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47571
2026-02-06 04:39:01.020 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:39:02.021 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47571/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:02.037 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-06 04:39:02.041 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:39:02.042 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47571/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:02.046 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.76/tcp/47572/p2p/16Uiu2HAmFrzEcxatVxsrfvkfqfEakepCYP5eMFmmsyTPvymMHxwx","/ip4/172.18.14.76/tcp/47573/ws/p2p/16Uiu2HAmFrzEcxatVxsrfvkfqfEakepCYP5eMFmmsyTPvymMHxwx"],"enrUri":"enr:-L24QMFsxaebZkL02K3AbnleMsiScTSiUGWj3qB16Uy2V6oyB6oz0X8UkHdVzQQRwWRfAYqv21oaQXGenRnFP_idBXMCgmlkgnY0gmlwhKwSDkyKbXVsdGlhZGRyc5YACASsEg5MBrnUAAoErBIOTAa51d0DgnJzhQACAQAAiXNlY3AyNTZrMaEDL6XmhYSQ_UZ6w4pvcZK1hsx1prDezG0Jyc4JPbsxku-DdGNwgrnUg3VkcIK51oV3YWt1MgE"}'
2026-02-06 04:39:02.046 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:39:02.047 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47571/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.170.147/tcp/52568/p2p/16Uiu2HAmBM1ELQysinjzCrkrNwkn4iQuooo3zqsFqMoq4aRodTRJ"]'
2026-02-06 04:39:02.049 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:39:02.050 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52567/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-06 04:39:02.052 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:39:02.053 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47571/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-06 04:39:02.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:39:02.055 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52567/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:39:02.058 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:39:02.058 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-06 04:39:02.159 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-06 04:39:02.159 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52567/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:02.162 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:52567/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
2026-02-06 04:39:02.165 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-06 04:39:02.166 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-06 04:39:02.166 DEBUG [src.node.waku_node] Stopping container with id e1f47e7e7ba1
2026-02-06 04:39:02.719 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:39:02.719 DEBUG [src.node.waku_node] Stopping container with id 2e7ea8a9c25d
2026-02-06 04:39:03.248 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:39:03.250 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-06 04:39:03.254 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:39:03.260 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
