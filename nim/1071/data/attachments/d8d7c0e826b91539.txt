2026-02-06 04:35:47.834 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-06 04:35:47.834 DEBUG [tests.conftest] Running test: test_filter_ping_on_unsubscribed_peer with id: 2026-02-06_04-35-47__ad624528-082a-495b-bda9-2d7a7c2d9631
2026-02-06 04:35:47.834 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-06 04:35:47.835 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-06 04:35:47.835 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-06 04:35:47.841 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:35:47.841 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-06_04-35-47__ad624528-082a-495b-bda9-2d7a7c2d9631__wakuorg_nwaku:latest.log
2026-02-06 04:35:47.841 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:35:47.841 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:35:47.843 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:35:47.843 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.246.90
2026-02-06 04:35:47.843 DEBUG [src.node.docker_mananger] Generated ports ['48157', '48158', '48159', '48160', '48161']
2026-02-06 04:35:47.843 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:35:47.843 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:35:47.844 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:35:47.844 DEBUG [src.node.docker_mananger] docker run -i -t -p 48157:48157 -p 48158:48158 -p 48159:48159 -p 48160:48160 -p 48161:48161 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48159 --rest-port=48157 --tcp-port=48158 --discv5-udp-port=48160 --rest-address=0.0.0.0 --nat=extip:172.18.246.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e6fb6806b1fecc3d8fafb753c5bdc0feae2e3bea98eca1b1c4b6c580031951f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48161 --metrics-logging=true --relay=true --filter=true
2026-02-06 04:35:48.026 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.246.90 waku 81915508c9786447cb083747127f2f2e570aaf00750dd7a2bb86a67b0a454be1
2026-02-06 04:35:48.062 DEBUG [src.node.docker_mananger] Container started with ID 81915508c978. Setting up logs at ./log/docker/node1_2026-02-06_04-35-47__ad624528-082a-495b-bda9-2d7a7c2d9631__wakuorg_nwaku:latest.log
2026-02-06 04:35:48.063 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48157
2026-02-06 04:35:48.063 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:35:48.107 ERROR [src.node.docker_mananger] Max retries reached for container 68669fcef7d4. Exiting log stream.
2026-02-06 04:35:48.617 ERROR [src.node.docker_mananger] Max retries reached for container 2732c2621f1f. Exiting log stream.
2026-02-06 04:35:49.065 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48157/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:35:49.068 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:35:49.068 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:35:49.068 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48157/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:35:49.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.90/tcp/48158/p2p/16Uiu2HAm6RNA6rpMytPLGcYnL98ptLL6847q98G3ZGUnyAFcstRb","/ip4/172.18.246.90/tcp/48159/ws/p2p/16Uiu2HAm6RNA6rpMytPLGcYnL98ptLL6847q98G3ZGUnyAFcstRb"],"enrUri":"enr:-L24QJVp6NQ2x4AxDyBIUCHAndrPxd9Sjc0PJLpdyWbmXqnrbR9MahYp180VQi9b9KrfjGiZ74R1k3Ogbm_skqrvvWwCgmlkgnY0gmlwhKwS9lqKbXVsdGlhZGRyc5YACASsEvZaBrweAAoErBL2Wga8H90DgnJzhQADAQAAiXNlY3AyNTZrMaECo1xnjEsSi98tPOzvjsIxDuKClqyWIwXqtckkN7qZwr6DdGNwgrweg3VkcIK8IIV3YWt1MgU"}'
2026-02-06 04:35:49.071 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:35:49.071 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-06 04:35:49.078 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:35:49.078 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-06_04-35-47__ad624528-082a-495b-bda9-2d7a7c2d9631__wakuorg_nwaku:latest.log
2026-02-06 04:35:49.078 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:35:49.078 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:35:49.080 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:35:49.080 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.96.44
2026-02-06 04:35:49.080 DEBUG [src.node.docker_mananger] Generated ports ['17627', '17628', '17629', '17630', '17631']
2026-02-06 04:35:49.080 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:35:49.080 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:35:49.081 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:35:49.081 DEBUG [src.node.docker_mananger] docker run -i -t -p 17627:17627 -p 17628:17628 -p 17629:17629 -p 17630:17630 -p 17631:17631 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17629 --rest-port=17627 --tcp-port=17628 --discv5-udp-port=17630 --rest-address=0.0.0.0 --nat=extip:172.18.96.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6bceb4dc3110387cb8254ce24d865bccf92cf9da53d2adfcf5cbbabcec20dbc1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17631 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QJVp6NQ2x4AxDyBIUCHAndrPxd9Sjc0PJLpdyWbmXqnrbR9MahYp180VQi9b9KrfjGiZ74R1k3Ogbm_skqrvvWwCgmlkgnY0gmlwhKwS9lqKbXVsdGlhZGRyc5YACASsEvZaBrweAAoErBL2Wga8H90DgnJzhQADAQAAiXNlY3AyNTZrMaECo1xnjEsSi98tPOzvjsIxDuKClqyWIwXqtckkN7qZwr6DdGNwgrweg3VkcIK8IIV3YWt1MgU --filternode=/ip4/172.18.246.90/tcp/48158/p2p/16Uiu2HAm6RNA6rpMytPLGcYnL98ptLL6847q98G3ZGUnyAFcstRb
2026-02-06 04:35:49.266 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.96.44 waku 924be7dd89dcd76c1647988f13e7fd0267da5b7c40145bfe36eda4f5846cc73b
2026-02-06 04:35:49.299 DEBUG [src.node.docker_mananger] Container started with ID 924be7dd89dc. Setting up logs at ./log/docker/node2_2026-02-06_04-35-47__ad624528-082a-495b-bda9-2d7a7c2d9631__wakuorg_nwaku:latest.log
2026-02-06 04:35:49.300 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17627
2026-02-06 04:35:49.301 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:35:50.302 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17627/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:35:50.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-06 04:35:50.306 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:35:50.307 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17627/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:35:50.309 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.44/tcp/17628/p2p/16Uiu2HAmB21Vr49RsMXFSKKcLMBDFWq96snnQcQGLoYyF5Yp3N87","/ip4/172.18.96.44/tcp/17629/ws/p2p/16Uiu2HAmB21Vr49RsMXFSKKcLMBDFWq96snnQcQGLoYyF5Yp3N87"],"enrUri":"enr:-L24QJZegbOzubVtibxgiA--zn-o9dHLTsqfGkzWmw2dgaTlQToHgjbdzrYmkp4XtUIDe17CVpEr_ex75ttg41GKOqkCgmlkgnY0gmlwhKwSYCyKbXVsdGlhZGRyc5YACASsEmAsBkTcAAoErBJgLAZE3d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC56se4yUYaxjhfbqdfJojIsycYsy33EMGAzk5nkPsODCDdGNwgkTcg3VkcIJE3oV3YWt1MgA"}'
2026-02-06 04:35:50.309 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:35:50.309 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17627/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.246.90/tcp/48158/p2p/16Uiu2HAm6RNA6rpMytPLGcYnL98ptLL6847q98G3ZGUnyAFcstRb"]'
2026-02-06 04:35:50.339 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:35:50.341 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-06 04:35:50.342 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48157/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-06 04:35:50.352 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:35:50.354 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17627/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5bc1d685-5277-49de-88cc-f85c90ba608b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-06 04:35:50.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"5bc1d685-5277-49de-88cc-f85c90ba608b","statusDesc":"OK"}'
2026-02-06 04:35:50.366 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17627/filter/v2/subscriptions/5cbf7f74-1881-49d1-9a8c-59c76ca0d840" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:35:50.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"5cbf7f74-1881-49d1-9a8c-59c76ca0d840","statusDesc":"OK"}'
2026-02-06 04:35:50.374 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:17627/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-06 04:35:50.381 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
2026-02-06 04:35:50.382 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17627/filter/v2/subscriptions/708e5863-0b3d-4e21-b045-ac671f02a9fb" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:35:50.389 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:17627/filter/v2/subscriptions/708e5863-0b3d-4e21-b045-ac671f02a9fb. Response content: b'{"requestId":"708e5863-0b3d-4e21-b045-ac671f02a9fb","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2026-02-06 04:35:50.393 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-06 04:35:50.394 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-06 04:35:50.394 DEBUG [src.node.waku_node] Stopping container with id 81915508c978
2026-02-06 04:35:50.920 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:35:50.920 DEBUG [src.node.waku_node] Stopping container with id 924be7dd89dc
2026-02-06 04:35:51.449 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:35:51.450 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-06 04:35:51.456 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:35:51.462 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
