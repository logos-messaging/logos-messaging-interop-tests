2026-02-06 04:36:45.023 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-06 04:36:45.023 DEBUG [tests.conftest] Running test: test_store_with_long_string_pubsub_topic with id: 2026-02-06_04-36-45__b9fb2ef0-3bb4-4e95-890f-b6814c6dc996
2026-02-06 04:36:45.024 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-06 04:36:45.024 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-06 04:36:45.024 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-06 04:36:45.031 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:36:45.031 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-06_04-36-45__b9fb2ef0-3bb4-4e95-890f-b6814c6dc996__wakuorg_nwaku:latest.log
2026-02-06 04:36:45.032 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:36:45.032 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:36:45.033 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:36:45.033 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.178.250
2026-02-06 04:36:45.033 DEBUG [src.node.docker_mananger] Generated ports ['31283', '31284', '31285', '31286', '31287']
2026-02-06 04:36:45.033 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:36:45.034 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:36:45.034 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:36:45.034 DEBUG [src.node.docker_mananger] docker run -i -t -p 31283:31283 -p 31284:31284 -p 31285:31285 -p 31286:31286 -p 31287:31287 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31285 --rest-port=31283 --tcp-port=31284 --discv5-udp-port=31286 --rest-address=0.0.0.0 --nat=extip:172.18.178.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f4a47448a401e25de1c9ab0f5a745f882b52affa58d7edf3c422fdaca7e96ede --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31287 --metrics-logging=true --store=true --relay=true
2026-02-06 04:36:45.220 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.178.250 waku 47758b970d6148508e97163c2ef644db975dfd83b4e86bcea945c90139f88858
2026-02-06 04:36:45.244 ERROR [src.node.docker_mananger] Max retries reached for container 7126fda4dd3f. Exiting log stream.
2026-02-06 04:36:45.252 DEBUG [src.node.docker_mananger] Container started with ID 47758b970d61. Setting up logs at ./log/docker/publishing_node1_2026-02-06_04-36-45__b9fb2ef0-3bb4-4e95-890f-b6814c6dc996__wakuorg_nwaku:latest.log
2026-02-06 04:36:45.253 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31283
2026-02-06 04:36:45.254 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:36:45.824 ERROR [src.node.docker_mananger] Max retries reached for container bb47bfc60248. Exiting log stream.
2026-02-06 04:36:46.255 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31283/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:36:46.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:36:46.258 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:36:46.258 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31283/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:36:46.261 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.250/tcp/31284/p2p/16Uiu2HAmUqH1KY6XemUY9XtfWfBnMpF7KU9LemKeaZe5Ud1FWeNV","/ip4/172.18.178.250/tcp/31285/ws/p2p/16Uiu2HAmUqH1KY6XemUY9XtfWfBnMpF7KU9LemKeaZe5Ud1FWeNV"],"enrUri":"enr:-L24QCsVDEvjWy--EpP2VdjHHHienXmrEfGtILuPwhrozalRNXMhfwR5__O_DTs0VdRNfX-O79H_nmskJ2lNibvw73gCgmlkgnY0gmlwhKwSsvqKbXVsdGlhZGRyc5YACASsErL6Bno0AAoErBKy-gZ6Nd0DgnJzhQADAQAAiXNlY3AyNTZrMaED8F2hrqORij8IY1CTUX2lqsK52YpuQLdGlcCgNUG-8vqDdGNwgno0g3VkcIJ6NoV3YWt1MgM"}'
2026-02-06 04:36:46.261 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:36:46.269 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:36:46.269 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-06_04-36-45__b9fb2ef0-3bb4-4e95-890f-b6814c6dc996__wakuorg_nwaku:latest.log
2026-02-06 04:36:46.269 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:36:46.269 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:36:46.271 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:36:46.271 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.167.128
2026-02-06 04:36:46.271 DEBUG [src.node.docker_mananger] Generated ports ['1953', '1954', '1955', '1956', '1957']
2026-02-06 04:36:46.271 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:36:46.271 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:36:46.271 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:36:46.271 DEBUG [src.node.docker_mananger] docker run -i -t -p 1953:1953 -p 1954:1954 -p 1955:1955 -p 1956:1956 -p 1957:1957 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1955 --rest-port=1953 --tcp-port=1954 --discv5-udp-port=1956 --rest-address=0.0.0.0 --nat=extip:172.18.167.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4a308cbc7418d579af5f86aafe85c29edcecb6d561fb1d62a098d563ae7eb99a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1957 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCsVDEvjWy--EpP2VdjHHHienXmrEfGtILuPwhrozalRNXMhfwR5__O_DTs0VdRNfX-O79H_nmskJ2lNibvw73gCgmlkgnY0gmlwhKwSsvqKbXVsdGlhZGRyc5YACASsErL6Bno0AAoErBKy-gZ6Nd0DgnJzhQADAQAAiXNlY3AyNTZrMaED8F2hrqORij8IY1CTUX2lqsK52YpuQLdGlcCgNUG-8vqDdGNwgno0g3VkcIJ6NoV3YWt1MgM --storenode=/ip4/172.18.178.250/tcp/31284/p2p/16Uiu2HAmUqH1KY6XemUY9XtfWfBnMpF7KU9LemKeaZe5Ud1FWeNV --store=true --relay=true
2026-02-06 04:36:46.459 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.167.128 waku 2f01a5beed906ed0edeecec1e4995a90b760df7264cb7f1f8ed1d07ab9b65c37
2026-02-06 04:36:46.498 DEBUG [src.node.docker_mananger] Container started with ID 2f01a5beed90. Setting up logs at ./log/docker/store_node1_2026-02-06_04-36-45__b9fb2ef0-3bb4-4e95-890f-b6814c6dc996__wakuorg_nwaku:latest.log
2026-02-06 04:36:46.498 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1953
2026-02-06 04:36:46.498 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:36:47.500 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1953/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:36:47.504 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:36:47.504 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:36:47.505 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1953/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:36:47.507 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.128/tcp/1954/p2p/16Uiu2HAmEvjVKvxnzBjyr7XjoyX2YJWoWboGTLqhqGp98ARBBYeo","/ip4/172.18.167.128/tcp/1955/ws/p2p/16Uiu2HAmEvjVKvxnzBjyr7XjoyX2YJWoWboGTLqhqGp98ARBBYeo"],"enrUri":"enr:-L24QHVSljZNSurtR-Kx0ZMo-LQNdGKEa27jpyuAYyBsnXBSPExuJVk2LoFYH7KUtC6SYjhbiuDp4jHnMcld1Lcpk_QCgmlkgnY0gmlwhKwSp4CKbXVsdGlhZGRyc5YACASsEqeABgeiAAoErBKngAYHo90DgnJzhQADAQAAiXNlY3AyNTZrMaEDIb_c6QVw_E0aBOng-coGnHgxOBCtZ50HT5lfESQb-tyDdGNwggeig3VkcIIHpIV3YWt1MgM"}'
2026-02-06 04:36:47.507 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:36:47.508 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1953/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.250/tcp/31284/p2p/16Uiu2HAmUqH1KY6XemUY9XtfWfBnMpF7KU9LemKeaZe5Ud1FWeNV"]'
2026-02-06 04:36:47.510 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:47.511 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31283/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-06 04:36:47.513 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:47.513 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1953/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-06 04:36:47.515 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:47.516 DEBUG [src.steps.store] Relaying message
2026-02-06 04:36:47.516 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:36:47.521 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:47.522 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-06 04:36:47.722 DEBUG [src.steps.store] Relaying message
2026-02-06 04:36:47.723 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:36:47.728 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:47.728 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-06 04:36:47.929 DEBUG [src.steps.store] Relaying message
2026-02-06 04:36:47.929 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:36:47.935 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:47.935 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-06 04:36:48.136 DEBUG [src.steps.store] Relaying message
2026-02-06 04:36:48.136 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:36:48.142 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:48.142 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-06 04:36:48.343 DEBUG [src.steps.store] Relaying message
2026-02-06 04:36:48.343 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:36:48.348 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:48.348 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-06 04:36:48.550 DEBUG [src.steps.store] Relaying message
2026-02-06 04:36:48.550 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:36:48.555 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:48.556 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-06 04:36:48.756 DEBUG [src.steps.store] Relaying message
2026-02-06 04:36:48.757 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:36:48.762 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:48.762 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-06 04:36:48.963 DEBUG [src.steps.store] Relaying message
2026-02-06 04:36:48.963 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:36:48.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:48.969 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-06 04:36:49.293 DEBUG [tests.store.test_topics] Trying to get stored msg with url topic size million 
2026-02-06 04:36:49.294 DEBUG [src.steps.store] Relaying message
2026-02-06 04:36:49.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:36:49.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:36:49.300 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-06 04:36:49.502 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-06 04:36:49.740 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-02-06 04:36:54.435 ERROR [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-02-06 04:36:54.438 ERROR [tests.store.test_topics] store request with very long pubsub topic wasn't accepted 
2026-02-06 04:36:54.442 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-06 04:36:54.443 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-06 04:36:54.443 DEBUG [src.node.waku_node] Stopping container with id 47758b970d61
2026-02-06 04:36:55.037 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:36:55.037 DEBUG [src.node.waku_node] Stopping container with id 2f01a5beed90
2026-02-06 04:36:55.624 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:36:55.624 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-06 04:36:55.639 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:36:55.647 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
