2026-02-06 04:39:07.220 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-06 04:39:07.220 DEBUG [tests.conftest] Running test: test_publish_with_invalid_version with id: 2026-02-06_04-39-07__8b2fc6d3-981f-49f3-b437-31a656ae668e
2026-02-06 04:39:07.220 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-06 04:39:07.221 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-06 04:39:07.221 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-06 04:39:07.227 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:39:07.227 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-06_04-39-07__8b2fc6d3-981f-49f3-b437-31a656ae668e__wakuorg_nwaku:latest.log
2026-02-06 04:39:07.227 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:39:07.227 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:39:07.229 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:39:07.229 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.193.53
2026-02-06 04:39:07.229 DEBUG [src.node.docker_mananger] Generated ports ['43439', '43440', '43441', '43442', '43443']
2026-02-06 04:39:07.229 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:39:07.229 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:39:07.229 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:39:07.229 DEBUG [src.node.docker_mananger] docker run -i -t -p 43439:43439 -p 43440:43440 -p 43441:43441 -p 43442:43442 -p 43443:43443 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43441 --rest-port=43439 --tcp-port=43440 --discv5-udp-port=43442 --rest-address=0.0.0.0 --nat=extip:172.18.193.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddaddf64c04e26b6e87a5dda54e21e83b2d5a4bdcfa8ccac09011676a526edba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43443 --metrics-logging=true --relay=true
2026-02-06 04:39:07.420 ERROR [src.node.docker_mananger] Max retries reached for container 686891c7d062. Exiting log stream.
2026-02-06 04:39:07.425 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.193.53 waku b35357966c1dad4408195a83a11f4e099c0982d66c8bb3d3128ab3f9dbadeb83
2026-02-06 04:39:07.457 DEBUG [src.node.docker_mananger] Container started with ID b35357966c1d. Setting up logs at ./log/docker/node1_2026-02-06_04-39-07__8b2fc6d3-981f-49f3-b437-31a656ae668e__wakuorg_nwaku:latest.log
2026-02-06 04:39:07.457 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43439
2026-02-06 04:39:07.457 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:39:07.989 ERROR [src.node.docker_mananger] Max retries reached for container 52401fe9549a. Exiting log stream.
2026-02-06 04:39:08.458 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43439/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:08.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:39:08.461 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:39:08.461 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43439/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:08.464 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.53/tcp/43440/p2p/16Uiu2HAmDrDXS1qMcpQY77fgWRSSJAJskp7LKyXk21vapz9Nc6uJ","/ip4/172.18.193.53/tcp/43441/ws/p2p/16Uiu2HAmDrDXS1qMcpQY77fgWRSSJAJskp7LKyXk21vapz9Nc6uJ"],"enrUri":"enr:-L24QMom1hNHZlOt0yV3X0gWjtYTpYMX88uydD-1F6q7SvrCL_WBiUekvX-8Pek6Ath4tpz2Zec4oyVmdhOVVV6mEW8CgmlkgnY0gmlwhKwSwTWKbXVsdGlhZGRyc5YACASsEsE1BqmwAAoErBLBNQapsd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEbv5AoKazamWXqmbiTFwI2XkFL9pdOrPgc0vCa_3zRWDdGNwgqmwg3VkcIKpsoV3YWt1MgE"}'
2026-02-06 04:39:08.464 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:39:08.470 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:39:08.470 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-06_04-39-07__8b2fc6d3-981f-49f3-b437-31a656ae668e__wakuorg_nwaku:latest.log
2026-02-06 04:39:08.471 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:39:08.471 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:39:08.472 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:39:08.472 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.145.2
2026-02-06 04:39:08.472 DEBUG [src.node.docker_mananger] Generated ports ['38715', '38716', '38717', '38718', '38719']
2026-02-06 04:39:08.472 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:39:08.473 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:39:08.473 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:39:08.473 DEBUG [src.node.docker_mananger] docker run -i -t -p 38715:38715 -p 38716:38716 -p 38717:38717 -p 38718:38718 -p 38719:38719 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38717 --rest-port=38715 --tcp-port=38716 --discv5-udp-port=38718 --rest-address=0.0.0.0 --nat=extip:172.18.145.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2cabb89fff91db15dfa0db85b3b661b81bbe8f416f7eee97362ffeeb03edc89c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38719 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMom1hNHZlOt0yV3X0gWjtYTpYMX88uydD-1F6q7SvrCL_WBiUekvX-8Pek6Ath4tpz2Zec4oyVmdhOVVV6mEW8CgmlkgnY0gmlwhKwSwTWKbXVsdGlhZGRyc5YACASsEsE1BqmwAAoErBLBNQapsd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEbv5AoKazamWXqmbiTFwI2XkFL9pdOrPgc0vCa_3zRWDdGNwgqmwg3VkcIKpsoV3YWt1MgE
2026-02-06 04:39:08.663 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.145.2 waku 1acb5ae98eb594b9fb3620760381e439d949e904694f9c47a8d25d19af77a2e0
2026-02-06 04:39:08.698 DEBUG [src.node.docker_mananger] Container started with ID 1acb5ae98eb5. Setting up logs at ./log/docker/node2_2026-02-06_04-39-07__8b2fc6d3-981f-49f3-b437-31a656ae668e__wakuorg_nwaku:latest.log
2026-02-06 04:39:08.699 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38715
2026-02-06 04:39:08.699 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:39:09.700 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38715/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:09.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:39:09.708 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:39:09.708 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38715/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:09.711 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.2/tcp/38716/p2p/16Uiu2HAm82uF6sDbW6wxJA1wJi4Mz5XASCJtuh6CSgwYHNWpYHe1","/ip4/172.18.145.2/tcp/38717/ws/p2p/16Uiu2HAm82uF6sDbW6wxJA1wJi4Mz5XASCJtuh6CSgwYHNWpYHe1"],"enrUri":"enr:-L24QLx49Mtv_5Oip0a0wT-QY-_DkEFaLP3dvG8bgJoeqAcxF5VCMkEzkkkQqM5osLfAd10D6bawbzoHCRqoy7Aqke0CgmlkgnY0gmlwhKwSkQKKbXVsdGlhZGRyc5YACASsEpECBpc8AAoErBKRAgaXPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECu1KRqxhLbrU4Xa9t5VOWCKSRwIE8jIfDn6FtgO8AuMqDdGNwgpc8g3VkcIKXPoV3YWt1MgE"}'
2026-02-06 04:39:09.711 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:39:09.711 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38715/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.193.53/tcp/43440/p2p/16Uiu2HAmDrDXS1qMcpQY77fgWRSSJAJskp7LKyXk21vapz9Nc6uJ"]'
2026-02-06 04:39:09.713 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:39:09.714 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-06 04:39:09.714 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43439/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-06 04:39:09.717 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:39:09.718 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38715/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-06 04:39:09.723 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:39:09.724 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:39:09.729 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:39:09.730 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-06 04:39:09.830 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-06 04:39:09.830 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:09.833 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770352749723892736,"ephemeral":false,"proof":""}]'
2026-02-06 04:39:09.834 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-06 04:39:09.835 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38715/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:39:09.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770352749723892736,"ephemeral":false,"proof":""}]'
2026-02-06 04:39:09.838 INFO [src.steps.relay] WARM UP successful!!
2026-02-06 04:39:09.839 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)', "version": 2.1}'
2026-02-06 04:39:09.841 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-06 04:39:09.844 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-06 04:39:09.846 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-06 04:39:09.846 DEBUG [src.node.waku_node] Stopping container with id b35357966c1d
2026-02-06 04:39:10.360 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:39:10.360 DEBUG [src.node.waku_node] Stopping container with id 1acb5ae98eb5
2026-02-06 04:39:10.880 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:39:10.882 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-06 04:39:10.887 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:39:10.892 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
