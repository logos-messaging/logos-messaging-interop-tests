2026-02-06 04:34:27.366 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-06 04:34:27.367 DEBUG [tests.conftest] Running test: test_relay_subscribe_to_single_pubsub_topic with id: 2026-02-06_04-34-27__1fbcbc4d-a2a6-4cc5-81b5-2d7e315f3cff
2026-02-06 04:34:27.367 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-06 04:34:27.367 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-06 04:34:27.367 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-06 04:34:27.374 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:34:27.375 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-06_04-34-27__1fbcbc4d-a2a6-4cc5-81b5-2d7e315f3cff__wakuorg_nwaku:latest.log
2026-02-06 04:34:27.375 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:34:27.375 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:34:27.376 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:34:27.377 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.120.118
2026-02-06 04:34:27.377 DEBUG [src.node.docker_mananger] Generated ports ['42711', '42712', '42713', '42714', '42715']
2026-02-06 04:34:27.377 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:34:27.377 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:34:27.377 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:34:27.377 DEBUG [src.node.docker_mananger] docker run -i -t -p 42711:42711 -p 42712:42712 -p 42713:42713 -p 42714:42714 -p 42715:42715 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42713 --rest-port=42711 --tcp-port=42712 --discv5-udp-port=42714 --rest-address=0.0.0.0 --nat=extip:172.18.120.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=75dcb89cb59aaa6bfe23d1c743a5ece5ebd1fcd4a54e60368d655629ea75457c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42715 --metrics-logging=true --relay=true
2026-02-06 04:34:27.568 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.120.118 waku f7c55a420bd6fa9d3f3cf17dff25e410a468a962fa5345adea198b3db03306ad
2026-02-06 04:34:27.603 DEBUG [src.node.docker_mananger] Container started with ID f7c55a420bd6. Setting up logs at ./log/docker/node1_2026-02-06_04-34-27__1fbcbc4d-a2a6-4cc5-81b5-2d7e315f3cff__wakuorg_nwaku:latest.log
2026-02-06 04:34:27.603 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42711
2026-02-06 04:34:27.604 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:34:27.658 ERROR [src.node.docker_mananger] Max retries reached for container c8ea3f997f21. Exiting log stream.
2026-02-06 04:34:28.168 ERROR [src.node.docker_mananger] Max retries reached for container c5bd9c7c0d29. Exiting log stream.
2026-02-06 04:34:28.605 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42711/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:34:28.608 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:34:28.609 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:34:28.609 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42711/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:34:28.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.118/tcp/42712/p2p/16Uiu2HAm7EKRz845f2WGzjqzMD31vkhxjCwmXUfXUMFYE2N2ozor","/ip4/172.18.120.118/tcp/42713/ws/p2p/16Uiu2HAm7EKRz845f2WGzjqzMD31vkhxjCwmXUfXUMFYE2N2ozor"],"enrUri":"enr:-L24QG7PnBLi-pG68SAt-pL5uiEDJ5Qp7X1MGmWC5zWrxOomJP-0EqqJi2DQwYTDcVrkB_gqzKs1Lf77DQz6Se7-cZsCgmlkgnY0gmlwhKwSeHaKbXVsdGlhZGRyc5YACASsEnh2BqbYAAoErBJ4dgam2d0DgnJzhQADAQAAiXNlY3AyNTZrMaECr2Oeu9m1xXnDZeC1N7t8L4NLcdGmGkwattv-Gh7aX8GDdGNwgqbYg3VkcIKm2oV3YWt1MgE"}'
2026-02-06 04:34:28.611 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:34:28.618 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:34:28.618 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-06_04-34-27__1fbcbc4d-a2a6-4cc5-81b5-2d7e315f3cff__wakuorg_nwaku:latest.log
2026-02-06 04:34:28.618 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:34:28.618 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:34:28.619 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:34:28.619 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.14.58
2026-02-06 04:34:28.620 DEBUG [src.node.docker_mananger] Generated ports ['34328', '34329', '34330', '34331', '34332']
2026-02-06 04:34:28.620 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:34:28.620 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:34:28.620 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:34:28.620 DEBUG [src.node.docker_mananger] docker run -i -t -p 34328:34328 -p 34329:34329 -p 34330:34330 -p 34331:34331 -p 34332:34332 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34330 --rest-port=34328 --tcp-port=34329 --discv5-udp-port=34331 --rest-address=0.0.0.0 --nat=extip:172.18.14.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c89b3b0fe36ed1cfc1b1a3f81ea41b95af22c7787add8fefcbbafe50581f2985 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34332 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QG7PnBLi-pG68SAt-pL5uiEDJ5Qp7X1MGmWC5zWrxOomJP-0EqqJi2DQwYTDcVrkB_gqzKs1Lf77DQz6Se7-cZsCgmlkgnY0gmlwhKwSeHaKbXVsdGlhZGRyc5YACASsEnh2BqbYAAoErBJ4dgam2d0DgnJzhQADAQAAiXNlY3AyNTZrMaECr2Oeu9m1xXnDZeC1N7t8L4NLcdGmGkwattv-Gh7aX8GDdGNwgqbYg3VkcIKm2oV3YWt1MgE
2026-02-06 04:34:28.824 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.14.58 waku 792da9e0136c9247cce8b5e2f2aee1bb88175178c23c11de2dcee3a566e3db3d
2026-02-06 04:34:28.860 DEBUG [src.node.docker_mananger] Container started with ID 792da9e0136c. Setting up logs at ./log/docker/node2_2026-02-06_04-34-27__1fbcbc4d-a2a6-4cc5-81b5-2d7e315f3cff__wakuorg_nwaku:latest.log
2026-02-06 04:34:28.860 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34328
2026-02-06 04:34:28.860 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:34:29.862 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34328/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:34:29.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:34:29.870 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:34:29.870 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34328/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:34:29.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.58/tcp/34329/p2p/16Uiu2HAmNGGJ7kUpZoEEJGFhdogCsptc4jDjUB8QeFPbZyyqj2ej","/ip4/172.18.14.58/tcp/34330/ws/p2p/16Uiu2HAmNGGJ7kUpZoEEJGFhdogCsptc4jDjUB8QeFPbZyyqj2ej"],"enrUri":"enr:-L24QPVBORwcDSoTe9HZIp82s6WxpUEnVnD2tQpKmpKu0sU4LMEfhEhyFezobDAjnp9eFvc4mR787cWSOrboT7GZDaICgmlkgnY0gmlwhKwSDjqKbXVsdGlhZGRyc5YACASsEg46BoYZAAoErBIOOgaGGt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjsKKQXUgYwWXb0fB8J6ny1O3sScMwcAojj4P6HaEakCDdGNwgoYZg3VkcIKGG4V3YWt1MgE"}'
2026-02-06 04:34:29.874 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:34:29.875 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34328/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.120.118/tcp/42712/p2p/16Uiu2HAm7EKRz845f2WGzjqzMD31vkhxjCwmXUfXUMFYE2N2ozor"]'
2026-02-06 04:34:29.878 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:34:29.879 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42711/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-06 04:34:29.883 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:34:29.884 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34328/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-06 04:34:29.887 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:34:29.888 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:34:29.894 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:34:29.895 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-06 04:34:29.995 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-06 04:34:29.996 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:34:29.999 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770352469888208384,"ephemeral":false,"proof":""}]'
2026-02-06 04:34:30.001 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-06 04:34:30.001 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34328/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:34:30.003 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770352469888208384,"ephemeral":false,"proof":""}]'
2026-02-06 04:34:30.006 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-06 04:34:30.007 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-06 04:34:30.007 DEBUG [src.node.waku_node] Stopping container with id f7c55a420bd6
2026-02-06 04:34:30.572 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:34:30.572 DEBUG [src.node.waku_node] Stopping container with id 792da9e0136c
2026-02-06 04:34:31.101 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:34:31.104 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-06 04:34:31.109 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:34:31.114 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
