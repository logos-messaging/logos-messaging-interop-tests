2026-02-06 04:33:30.249 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-06 04:33:30.249 DEBUG [tests.conftest] Running test: test_filter_get_message_after_node_pauses_and_pauses with id: 2026-02-06_04-33-30__964eea9d-0ae6-4bd8-8709-5dbbcdcfd883
2026-02-06 04:33:30.249 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-06 04:33:30.250 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-06 04:33:30.250 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-06 04:33:30.256 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:33:30.256 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-06_04-33-30__964eea9d-0ae6-4bd8-8709-5dbbcdcfd883__wakuorg_nwaku:latest.log
2026-02-06 04:33:30.256 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:33:30.256 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:33:30.258 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:33:30.258 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.146
2026-02-06 04:33:30.258 DEBUG [src.node.docker_mananger] Generated ports ['47219', '47220', '47221', '47222', '47223']
2026-02-06 04:33:30.258 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:33:30.258 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:33:30.258 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:33:30.258 DEBUG [src.node.docker_mananger] docker run -i -t -p 47219:47219 -p 47220:47220 -p 47221:47221 -p 47222:47222 -p 47223:47223 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47221 --rest-port=47219 --tcp-port=47220 --discv5-udp-port=47222 --rest-address=0.0.0.0 --nat=extip:172.18.64.146 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=81c65299a9e9c60c4fdffd93cfefd356e64ba1e1fdea9aa4f819b3f6ba9cd3a3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47223 --metrics-logging=true --relay=true --filter=true
2026-02-06 04:33:30.434 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.146 waku 0576bf13820f8fcafcf4c9a19c2f43e28e6a40a7e8818039c9e0e57ba3c7f19a
2026-02-06 04:33:30.467 DEBUG [src.node.docker_mananger] Container started with ID 0576bf13820f. Setting up logs at ./log/docker/node1_2026-02-06_04-33-30__964eea9d-0ae6-4bd8-8709-5dbbcdcfd883__wakuorg_nwaku:latest.log
2026-02-06 04:33:30.467 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47219
2026-02-06 04:33:30.467 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:33:30.496 ERROR [src.node.docker_mananger] Max retries reached for container a363f364eb45. Exiting log stream.
2026-02-06 04:33:31.041 ERROR [src.node.docker_mananger] Max retries reached for container b1d4a05fda8a. Exiting log stream.
2026-02-06 04:33:31.468 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47219/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:31.471 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:33:31.471 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:33:31.471 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47219/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:31.474 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.146/tcp/47220/p2p/16Uiu2HAmSunfx9a8dqZuX6hC2C4Mmo5i81EmpWKzSniMuDuykGd5","/ip4/172.18.64.146/tcp/47221/ws/p2p/16Uiu2HAmSunfx9a8dqZuX6hC2C4Mmo5i81EmpWKzSniMuDuykGd5"],"enrUri":"enr:-L24QLjQ7u9l4FIRPqkfAi0tqk1sJ5Y0lkgUzvhoFa-GbsUHD5n_7NTFORxbz_Re_0-Ta0C3O8wJHA8Pych3sk3fWAECgmlkgnY0gmlwhKwSQJKKbXVsdGlhZGRyc5YACASsEkCSBrh0AAoErBJAkga4dd0DgnJzhQADAQAAiXNlY3AyNTZrMaED084f3VIbjEBs_PWAzdT7g_Qpb5sL8gV_RPXIPBZtaQCDdGNwgrh0g3VkcIK4doV3YWt1MgU"}'
2026-02-06 04:33:31.474 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:33:31.474 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-06 04:33:31.480 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:33:31.481 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-06_04-33-30__964eea9d-0ae6-4bd8-8709-5dbbcdcfd883__wakuorg_nwaku:latest.log
2026-02-06 04:33:31.481 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:33:31.481 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:33:31.482 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:33:31.482 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.94.30
2026-02-06 04:33:31.482 DEBUG [src.node.docker_mananger] Generated ports ['30717', '30718', '30719', '30720', '30721']
2026-02-06 04:33:31.483 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:33:31.483 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:33:31.483 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:33:31.483 DEBUG [src.node.docker_mananger] docker run -i -t -p 30717:30717 -p 30718:30718 -p 30719:30719 -p 30720:30720 -p 30721:30721 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30719 --rest-port=30717 --tcp-port=30718 --discv5-udp-port=30720 --rest-address=0.0.0.0 --nat=extip:172.18.94.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d46ea50e584eaf1fd15fedf5b3a31b16ec65fbf8b1a6a9fcc2c253a6e745df4b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30721 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QLjQ7u9l4FIRPqkfAi0tqk1sJ5Y0lkgUzvhoFa-GbsUHD5n_7NTFORxbz_Re_0-Ta0C3O8wJHA8Pych3sk3fWAECgmlkgnY0gmlwhKwSQJKKbXVsdGlhZGRyc5YACASsEkCSBrh0AAoErBJAkga4dd0DgnJzhQADAQAAiXNlY3AyNTZrMaED084f3VIbjEBs_PWAzdT7g_Qpb5sL8gV_RPXIPBZtaQCDdGNwgrh0g3VkcIK4doV3YWt1MgU --filternode=/ip4/172.18.64.146/tcp/47220/p2p/16Uiu2HAmSunfx9a8dqZuX6hC2C4Mmo5i81EmpWKzSniMuDuykGd5
2026-02-06 04:33:31.661 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.94.30 waku 6abd995900fe4bdb8d58b8580cfd4fa4eed6a790cb361177d38201b6e8ccb039
2026-02-06 04:33:31.695 DEBUG [src.node.docker_mananger] Container started with ID 6abd995900fe. Setting up logs at ./log/docker/node2_2026-02-06_04-33-30__964eea9d-0ae6-4bd8-8709-5dbbcdcfd883__wakuorg_nwaku:latest.log
2026-02-06 04:33:31.696 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30717
2026-02-06 04:33:31.696 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:33:32.696 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30717/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:32.700 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-06 04:33:32.700 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:33:32.701 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30717/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:32.703 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.30/tcp/30718/p2p/16Uiu2HAmDHYzbN5NqHhxKKErttYcSbC8ihaYi4iSSntERmmX8zEN","/ip4/172.18.94.30/tcp/30719/ws/p2p/16Uiu2HAmDHYzbN5NqHhxKKErttYcSbC8ihaYi4iSSntERmmX8zEN"],"enrUri":"enr:-L24QJHxZb-sz6C4ZhjrK1VYqQOHV1T4zN8tu6NrbA5xmJJ0a_VSddIznN5mcT-g9Kq9qB8R4NTcECeUeS0H8RWHXB0CgmlkgnY0gmlwhKwSXh6KbXVsdGlhZGRyc5YACASsEl4eBnf-AAoErBJeHgZ3_90DgnJzhQADAQAAiXNlY3AyNTZrMaEDCV3RoVSsMKAa39sVSVn23ra5c2T9cLByEzeQw_I2fIODdGNwgnf-g3VkcIJ4AIV3YWt1MgA"}'
2026-02-06 04:33:32.703 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:33:32.703 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30717/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.64.146/tcp/47220/p2p/16Uiu2HAmSunfx9a8dqZuX6hC2C4Mmo5i81EmpWKzSniMuDuykGd5"]'
2026-02-06 04:33:32.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:32.732 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-06 04:33:32.732 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47219/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-06 04:33:32.745 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:32.746 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30717/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ec1c97a6-d5ea-4c82-93cc-1af39369c0e9", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-06 04:33:32.757 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ec1c97a6-d5ea-4c82-93cc-1af39369c0e9","statusDesc":"OK"}'
2026-02-06 04:33:32.759 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47219/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:33:32.765 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:32.765 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-06 04:33:32.866 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-06 04:33:32.866 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30717/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:32.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770352412759155704,"ephemeral":false}]'
2026-02-06 04:33:32.871 DEBUG [src.node.waku_node] Pausing container with id 0576bf13820f
2026-02-06 04:33:32.880 DEBUG [src.node.waku_node] Unpause container with id 0576bf13820f
2026-02-06 04:33:32.888 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47219/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:33:32.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:32.892 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-06 04:33:32.993 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-06 04:33:32.993 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30717/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:32.996 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770352412888190685,"ephemeral":false}]'
2026-02-06 04:33:32.998 DEBUG [src.node.waku_node] Pausing container with id 6abd995900fe
2026-02-06 04:33:33.006 DEBUG [src.node.waku_node] Unpause container with id 6abd995900fe
2026-02-06 04:33:33.014 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47219/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTI=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-06 04:33:33.019 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:33.019 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-06 04:33:33.119 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-06 04:33:33.120 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30717/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:33.122 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTI=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770352413014642984,"ephemeral":false}]'
2026-02-06 04:33:33.125 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-06 04:33:33.126 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-06 04:33:33.126 DEBUG [src.node.waku_node] Stopping container with id 0576bf13820f
2026-02-06 04:33:33.658 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:33:33.658 DEBUG [src.node.waku_node] Stopping container with id 6abd995900fe
2026-02-06 04:33:34.180 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:33:34.181 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-06 04:33:34.186 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:33:34.192 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
