2026-02-06 04:33:52.710 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-06 04:33:52.711 DEBUG [tests.conftest] Running test: test_light_push_with_extra_field with id: 2026-02-06_04-33-52__95c54cb6-3ba2-491d-83ce-f3c68c12c401
2026-02-06 04:33:52.711 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-06 04:33:52.711 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-06 04:33:52.718 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:33:52.718 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-06_04-33-52__95c54cb6-3ba2-491d-83ce-f3c68c12c401__wakuorg_nwaku:latest.log
2026-02-06 04:33:52.719 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:33:52.719 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:33:52.720 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:33:52.720 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.200.117
2026-02-06 04:33:52.720 DEBUG [src.node.docker_mananger] Generated ports ['62114', '62115', '62116', '62117', '62118']
2026-02-06 04:33:52.720 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:33:52.721 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:33:52.721 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:33:52.721 DEBUG [src.node.docker_mananger] docker run -i -t -p 62114:62114 -p 62115:62115 -p 62116:62116 -p 62117:62117 -p 62118:62118 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62116 --rest-port=62114 --tcp-port=62115 --discv5-udp-port=62117 --rest-address=0.0.0.0 --nat=extip:172.18.200.117 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c982b6cd0125de6ebbf1d881cca6ff1bf5affb4fbe2be4ef43afee3adf2ba9f8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62118 --metrics-logging=true --lightpush=true --relay=true
2026-02-06 04:33:52.906 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.200.117 waku 8abe6fee522014ca32eb684a9a18fd126a653be41e05159f41439b61380da7dd
2026-02-06 04:33:52.937 DEBUG [src.node.docker_mananger] Container started with ID 8abe6fee5220. Setting up logs at ./log/docker/receiving_node1_2026-02-06_04-33-52__95c54cb6-3ba2-491d-83ce-f3c68c12c401__wakuorg_nwaku:latest.log
2026-02-06 04:33:52.937 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62114
2026-02-06 04:33:52.937 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:33:52.970 ERROR [src.node.docker_mananger] Max retries reached for container 117ed9331ad6. Exiting log stream.
2026-02-06 04:33:53.504 ERROR [src.node.docker_mananger] Max retries reached for container 9c036308e814. Exiting log stream.
2026-02-06 04:33:53.938 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62114/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:53.941 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:33:53.941 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:33:53.942 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62114/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:53.944 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.117/tcp/62115/p2p/16Uiu2HAmMMdKpAYuPkdm4gSAHKrhXsLWCkwAsP5TYLw7i2D7ZdVb","/ip4/172.18.200.117/tcp/62116/ws/p2p/16Uiu2HAmMMdKpAYuPkdm4gSAHKrhXsLWCkwAsP5TYLw7i2D7ZdVb"],"enrUri":"enr:-L24QEovs3wzTE9JOi2B6wnputxu5ncvqvU2tLAfVtQnjKgiaXavnREVF19sQH47fnIIU4wCr9Z_cvLwiGaCPtofbIACgmlkgnY0gmlwhKwSyHWKbXVsdGlhZGRyc5YACASsEsh1BvKjAAoErBLIdQbypN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgUaI-BBpUTF5xZvgdFee6xH7U9PjRB4vB6twKIhrUSqDdGNwgvKjg3VkcILypYV3YWt1Mgk"}'
2026-02-06 04:33:53.944 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:33:53.951 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:33:53.951 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-06_04-33-52__95c54cb6-3ba2-491d-83ce-f3c68c12c401__wakuorg_nwaku:latest.log
2026-02-06 04:33:53.952 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:33:53.952 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:33:53.953 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:33:53.953 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.125.102
2026-02-06 04:33:53.953 DEBUG [src.node.docker_mananger] Generated ports ['23418', '23419', '23420', '23421', '23422']
2026-02-06 04:33:53.953 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:33:53.954 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:33:53.954 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:33:53.954 DEBUG [src.node.docker_mananger] docker run -i -t -p 23418:23418 -p 23419:23419 -p 23420:23420 -p 23421:23421 -p 23422:23422 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23420 --rest-port=23418 --tcp-port=23419 --discv5-udp-port=23421 --rest-address=0.0.0.0 --nat=extip:172.18.125.102 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c739ee85cc6d432ccf5ed6c37976e335bf0e8f373afbbbeb55e0fdeaa6da1ee8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23422 --metrics-logging=true --lightpush=false --relay=true
2026-02-06 04:33:54.142 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.125.102 waku 0298c496714729ca116ea0c2e39accb79b9947e4537160360b2924fe4f28668b
2026-02-06 04:33:54.180 DEBUG [src.node.docker_mananger] Container started with ID 0298c4967147. Setting up logs at ./log/docker/receiving_node2_2026-02-06_04-33-52__95c54cb6-3ba2-491d-83ce-f3c68c12c401__wakuorg_nwaku:latest.log
2026-02-06 04:33:54.181 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23418
2026-02-06 04:33:54.181 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:33:55.181 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23418/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:55.185 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:33:55.185 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:33:55.185 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23418/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:55.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.102/tcp/23419/p2p/16Uiu2HAkvRCmmatQS8tYHx5qwtFUDRtbEQvrizLBXSYfRfvZKfZa","/ip4/172.18.125.102/tcp/23420/ws/p2p/16Uiu2HAkvRCmmatQS8tYHx5qwtFUDRtbEQvrizLBXSYfRfvZKfZa"],"enrUri":"enr:-L24QGukR5uBZVytgL_cCHczBI2KxfQErMXKcdFJsybf4xKZedBLa6z53yyoxkWJyJIiC8ZJ9uAmf_Vpupdk5mZI-v0CgmlkgnY0gmlwhKwSfWaKbXVsdGlhZGRyc5YACASsEn1mBlt7AAoErBJ9ZgZbfN0DgnJzhQADAQAAiXNlY3AyNTZrMaECDrzsa_XC_k2DtRtl-FEgOW5FlU2KGsLi3bQcTtEwlymDdGNwglt7g3VkcIJbfYV3YWt1MgE"}'
2026-02-06 04:33:55.187 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:33:55.188 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23418/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.200.117/tcp/62115/p2p/16Uiu2HAmMMdKpAYuPkdm4gSAHKrhXsLWCkwAsP5TYLw7i2D7ZdVb"]'
2026-02-06 04:33:55.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:55.229 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-06 04:33:55.229 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-06_04-33-52__95c54cb6-3ba2-491d-83ce-f3c68c12c401__wakuorg_nwaku:latest.log
2026-02-06 04:33:55.229 DEBUG [src.node.waku_node] Starting Node...
2026-02-06 04:33:55.230 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-06 04:33:55.233 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-06 04:33:55.234 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.74.251
2026-02-06 04:33:55.234 DEBUG [src.node.docker_mananger] Generated ports ['62792', '62793', '62794', '62795', '62796']
2026-02-06 04:33:55.234 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-06 04:33:55.234 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-06 04:33:55.236 DEBUG [src.node.waku_node] Using volumes []
2026-02-06 04:33:55.236 DEBUG [src.node.docker_mananger] docker run -i -t -p 62792:62792 -p 62793:62793 -p 62794:62794 -p 62795:62795 -p 62796:62796 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62794 --rest-port=62792 --tcp-port=62793 --discv5-udp-port=62795 --rest-address=0.0.0.0 --nat=extip:172.18.74.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcf39000cecda1dcb4018eefa2ba3fdcf4ebddd7af3fa00e5ab2c58e38ea1b57 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62796 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEovs3wzTE9JOi2B6wnputxu5ncvqvU2tLAfVtQnjKgiaXavnREVF19sQH47fnIIU4wCr9Z_cvLwiGaCPtofbIACgmlkgnY0gmlwhKwSyHWKbXVsdGlhZGRyc5YACASsEsh1BvKjAAoErBLIdQbypN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgUaI-BBpUTF5xZvgdFee6xH7U9PjRB4vB6twKIhrUSqDdGNwgvKjg3VkcILypYV3YWt1Mgk --lightpushnode=/ip4/172.18.200.117/tcp/62115/p2p/16Uiu2HAmMMdKpAYuPkdm4gSAHKrhXsLWCkwAsP5TYLw7i2D7ZdVb --lightpush=true --relay=true
2026-02-06 04:33:55.414 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.74.251 waku c0bc8d74f6b56f0f55cc29ba91bdb8fc9292777f532110c07dc55c2b3ebf0f6c
2026-02-06 04:33:55.449 DEBUG [src.node.docker_mananger] Container started with ID c0bc8d74f6b5. Setting up logs at ./log/docker/lightpush_node1_2026-02-06_04-33-52__95c54cb6-3ba2-491d-83ce-f3c68c12c401__wakuorg_nwaku:latest.log
2026-02-06 04:33:55.450 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62792
2026-02-06 04:33:55.451 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-06 04:33:56.453 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62792/health" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:56.464 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-06 04:33:56.464 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-06 04:33:56.465 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62792/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-06 04:33:56.479 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.251/tcp/62793/p2p/16Uiu2HAmNmfZgcaCnzByGShHJSnGtzFofywEYaBTN7D9khSijfJF","/ip4/172.18.74.251/tcp/62794/ws/p2p/16Uiu2HAmNmfZgcaCnzByGShHJSnGtzFofywEYaBTN7D9khSijfJF"],"enrUri":"enr:-L24QKpbuPmmrACw9J24Nkuruf2UnCyFp9qorwMHWscVZpKcCc_tQ-WmqWvuHn8ErdbjOOUNyV3ah2VY1NeA2PJ0ugYCgmlkgnY0gmlwhKwSSvuKbXVsdGlhZGRyc5YACASsEkr7BvVJAAoErBJK-wb1St0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlkqxdAlpoPmiMRLvJTeYrvMGRtCC4BhDYb2-O_a5E4CDdGNwgvVJg3VkcIL1S4V3YWt1Mgk"}'
2026-02-06 04:33:56.480 INFO [src.node.waku_node] REST service is ready !!
2026-02-06 04:33:56.482 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62792/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.200.117/tcp/62115/p2p/16Uiu2HAmMMdKpAYuPkdm4gSAHKrhXsLWCkwAsP5TYLw7i2D7ZdVb"]'
2026-02-06 04:33:56.486 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:56.486 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62792/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.125.102/tcp/23419/p2p/16Uiu2HAkvRCmmatQS8tYHx5qwtFUDRtbEQvrizLBXSYfRfvZKfZa"]'
2026-02-06 04:33:56.509 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:56.512 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62114/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-06 04:33:56.518 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:56.520 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23418/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-06 04:33:56.524 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:56.524 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62792/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-06 04:33:56.526 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-06 04:33:56.528 DEBUG [src.steps.light_push] Lightpushing message
2026-02-06 04:33:56.528 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62792/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770352436527946389, "extraField": "extraValue"}}'
2026-02-06 04:33:56.530 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:62792/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-06 04:33:56.533 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-06 04:33:56.534 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-06 04:33:56.534 DEBUG [src.node.waku_node] Stopping container with id 8abe6fee5220
2026-02-06 04:33:57.107 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:33:57.107 DEBUG [src.node.waku_node] Stopping container with id 0298c4967147
2026-02-06 04:33:57.637 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:33:57.637 DEBUG [src.node.waku_node] Stopping container with id c0bc8d74f6b5
2026-02-06 04:33:57.954 ERROR [src.node.docker_mananger] Max retries reached for container 8abe6fee5220. Exiting log stream.
2026-02-06 04:33:58.163 DEBUG [src.node.waku_node] Container stopped.
2026-02-06 04:33:58.164 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-06 04:33:58.179 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:33:58.193 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-06 04:33:58.200 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
