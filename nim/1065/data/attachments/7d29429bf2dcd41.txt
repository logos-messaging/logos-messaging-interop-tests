2026-02-02 04:41:24.176 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:41:24.177 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_invalid_pubsub_topic_format with id: 2026-02-02_04-41-24__d99e9e7c-cd71-40db-b194-3570125e4bb8
2026-02-02 04:41:24.177 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:41:24.177 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-02 04:41:24.177 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-02 04:41:24.183 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:41:24.183 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-41-24__d99e9e7c-cd71-40db-b194-3570125e4bb8__wakuorg_nwaku:latest.log
2026-02-02 04:41:24.184 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:41:24.184 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:41:24.185 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:41:24.185 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.133.66
2026-02-02 04:41:24.185 DEBUG [src.node.docker_mananger] Generated ports ['26641', '26642', '26643', '26644', '26645']
2026-02-02 04:41:24.185 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:41:24.186 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:41:24.186 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:41:24.186 DEBUG [src.node.docker_mananger] docker run -i -t -p 26641:26641 -p 26642:26642 -p 26643:26643 -p 26644:26644 -p 26645:26645 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26643 --rest-port=26641 --tcp-port=26642 --discv5-udp-port=26644 --rest-address=0.0.0.0 --nat=extip:172.18.133.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=597d55d60e4027ba8d99e3ce9d0d3da3ceddfcf19d32169f022bcfbece0f4bb8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26645 --metrics-logging=true --relay=true --filter=true
2026-02-02 04:41:24.369 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.133.66 waku cbffc179a4bf3ca885566a1cacd670ce4d6de5c302ec3e5a8af05499c0a8a076
2026-02-02 04:41:24.401 DEBUG [src.node.docker_mananger] Container started with ID cbffc179a4bf. Setting up logs at ./log/docker/node1_2026-02-02_04-41-24__d99e9e7c-cd71-40db-b194-3570125e4bb8__wakuorg_nwaku:latest.log
2026-02-02 04:41:24.402 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26641
2026-02-02 04:41:24.402 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:41:24.468 ERROR [src.node.docker_mananger] Max retries reached for container be5b81abeb5f. Exiting log stream.
2026-02-02 04:41:24.979 ERROR [src.node.docker_mananger] Max retries reached for container 263b12ab199f. Exiting log stream.
2026-02-02 04:41:25.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26641/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:25.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:41:25.406 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:41:25.406 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26641/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:25.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.66/tcp/26642/p2p/16Uiu2HAmMY5585LcaJQbYXtKw2ETf1Hvi8wb2tpzxpV2LL1DG1Tc","/ip4/172.18.133.66/tcp/26643/ws/p2p/16Uiu2HAmMY5585LcaJQbYXtKw2ETf1Hvi8wb2tpzxpV2LL1DG1Tc"],"enrUri":"enr:-L24QCwVxfetb13LKzK2_K_j4vr5Iryr72_OxzuObi31MQMTKZik_8hvudwGcrxibTdwl_OLZ2Mqnh6b7UoJcJKzgr0CgmlkgnY0gmlwhKwShUKKbXVsdGlhZGRyc5YACASsEoVCBmgSAAoErBKFQgZoE90DgnJzhQADAQAAiXNlY3AyNTZrMaEDg_N0e_FoDJkJzpriiSTpwyDrQ64MGmRs3l-npF2lJl-DdGNwgmgSg3VkcIJoFIV3YWt1MgU"}'
2026-02-02 04:41:25.408 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:41:25.408 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-02 04:41:25.415 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:41:25.415 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-41-24__d99e9e7c-cd71-40db-b194-3570125e4bb8__wakuorg_nwaku:latest.log
2026-02-02 04:41:25.415 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:41:25.415 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:41:25.416 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:41:25.416 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.151.36
2026-02-02 04:41:25.416 DEBUG [src.node.docker_mananger] Generated ports ['34152', '34153', '34154', '34155', '34156']
2026-02-02 04:41:25.417 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:41:25.417 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:41:25.417 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:41:25.417 DEBUG [src.node.docker_mananger] docker run -i -t -p 34152:34152 -p 34153:34153 -p 34154:34154 -p 34155:34155 -p 34156:34156 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34154 --rest-port=34152 --tcp-port=34153 --discv5-udp-port=34155 --rest-address=0.0.0.0 --nat=extip:172.18.151.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=884fdcd8eee09f81191bb9ee0ecca17fed7e4be0cd91fc14881daba8fdd0fee1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34156 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QCwVxfetb13LKzK2_K_j4vr5Iryr72_OxzuObi31MQMTKZik_8hvudwGcrxibTdwl_OLZ2Mqnh6b7UoJcJKzgr0CgmlkgnY0gmlwhKwShUKKbXVsdGlhZGRyc5YACASsEoVCBmgSAAoErBKFQgZoE90DgnJzhQADAQAAiXNlY3AyNTZrMaEDg_N0e_FoDJkJzpriiSTpwyDrQ64MGmRs3l-npF2lJl-DdGNwgmgSg3VkcIJoFIV3YWt1MgU --filternode=/ip4/172.18.133.66/tcp/26642/p2p/16Uiu2HAmMY5585LcaJQbYXtKw2ETf1Hvi8wb2tpzxpV2LL1DG1Tc
2026-02-02 04:41:25.590 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.151.36 waku 1d8d314fe6a89aeb3790f99fc566f964fce79f0ad04d83e5f3dabc382e97865c
2026-02-02 04:41:25.622 DEBUG [src.node.docker_mananger] Container started with ID 1d8d314fe6a8. Setting up logs at ./log/docker/node2_2026-02-02_04-41-24__d99e9e7c-cd71-40db-b194-3570125e4bb8__wakuorg_nwaku:latest.log
2026-02-02 04:41:25.623 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34152
2026-02-02 04:41:25.623 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:41:26.624 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34152/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:26.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-02 04:41:26.628 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:41:26.628 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34152/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:26.630 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.151.36/tcp/34153/p2p/16Uiu2HAkxjaNukieCFB2nu8JbNmvNAhwpM9T2AoyxhMC9LyCYneL","/ip4/172.18.151.36/tcp/34154/ws/p2p/16Uiu2HAkxjaNukieCFB2nu8JbNmvNAhwpM9T2AoyxhMC9LyCYneL"],"enrUri":"enr:-L24QDXcILNjolDF9HaKfdDGMBtW1BVG51JiRDhnCoGNZ-OFKE_gidQ7y9nWZf-uC9MsNop_Ws3v4uzfZT-sET5c49kCgmlkgnY0gmlwhKwSlySKbXVsdGlhZGRyc5YACASsEpckBoVpAAoErBKXJAaFat0DgnJzhQADAQAAiXNlY3AyNTZrMaECMSkuiTXOYI0npR2iGFI41Tunn2_oJoVJqQKc647ooxGDdGNwgoVpg3VkcIKFa4V3YWt1MgA"}'
2026-02-02 04:41:26.630 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:41:26.631 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34152/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.66/tcp/26642/p2p/16Uiu2HAmMY5585LcaJQbYXtKw2ETf1Hvi8wb2tpzxpV2LL1DG1Tc"]'
2026-02-02 04:41:26.659 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:26.661 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-02 04:41:26.661 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26641/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:41:26.674 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:26.676 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34152/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d2a2d001-039e-4f93-999e-8f8bd0d9e098", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:41:26.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d2a2d001-039e-4f93-999e-8f8bd0d9e098","statusDesc":"OK"}'
2026-02-02 04:41:26.690 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34152/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
2026-02-02 04:41:26.692 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:34152/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-02 04:41:26.695 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:41:26.696 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:41:26.696 DEBUG [src.node.waku_node] Stopping container with id cbffc179a4bf
2026-02-02 04:41:27.257 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:41:27.257 DEBUG [src.node.waku_node] Stopping container with id 1d8d314fe6a8
2026-02-02 04:41:27.771 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:41:27.773 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:41:27.778 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:41:27.782 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
