2026-02-02 04:44:30.372 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:44:30.372 DEBUG [tests.conftest] Running test: test_filter_update_subscription_add_101_new_content_topics with id: 2026-02-02_04-44-30__06d8d299-485a-4a0c-bca2-3520ecf1b546
2026-02-02 04:44:30.373 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:44:30.373 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-02 04:44:30.373 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-02 04:44:30.378 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:44:30.378 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-44-30__06d8d299-485a-4a0c-bca2-3520ecf1b546__wakuorg_nwaku:latest.log
2026-02-02 04:44:30.379 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:44:30.379 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:44:30.380 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:44:30.380 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.136.37
2026-02-02 04:44:30.380 DEBUG [src.node.docker_mananger] Generated ports ['14863', '14864', '14865', '14866', '14867']
2026-02-02 04:44:30.380 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:44:30.380 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:44:30.380 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:44:30.380 DEBUG [src.node.docker_mananger] docker run -i -t -p 14863:14863 -p 14864:14864 -p 14865:14865 -p 14866:14866 -p 14867:14867 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14865 --rest-port=14863 --tcp-port=14864 --discv5-udp-port=14866 --rest-address=0.0.0.0 --nat=extip:172.18.136.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee803f1186b26e30aaefe3bc772eb374fa4693478e155b9f74fc19b5973176df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14867 --metrics-logging=true --relay=true --filter=true
2026-02-02 04:44:30.521 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.136.37 waku f69d08b2cd263d84eff4f6cb9bee8b00ca00a5230e8197db3f87f81ef42a4aae
2026-02-02 04:44:30.546 DEBUG [src.node.docker_mananger] Container started with ID f69d08b2cd26. Setting up logs at ./log/docker/node1_2026-02-02_04-44-30__06d8d299-485a-4a0c-bca2-3520ecf1b546__wakuorg_nwaku:latest.log
2026-02-02 04:44:30.547 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14863
2026-02-02 04:44:30.547 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:44:30.691 ERROR [src.node.docker_mananger] Max retries reached for container bb56f9e650eb. Exiting log stream.
2026-02-02 04:44:31.178 ERROR [src.node.docker_mananger] Max retries reached for container 0c1552056d33. Exiting log stream.
2026-02-02 04:44:31.547 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14863/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:44:31.550 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:44:31.551 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:44:31.551 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14863/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:44:31.553 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.37/tcp/14864/p2p/16Uiu2HAm29pxvLhuxnMeMzrbF67CXhePFgappwz6D3WJLd5Z45s8","/ip4/172.18.136.37/tcp/14865/ws/p2p/16Uiu2HAm29pxvLhuxnMeMzrbF67CXhePFgappwz6D3WJLd5Z45s8"],"enrUri":"enr:-L24QHsdZOqjBpkYmI3eiebyQ21vMtY7OM7JeIfE50gOsomtAqBPT2mJFfuQCChSfUas0gAu_x7-QYyPY57Jwjp8200CgmlkgnY0gmlwhKwSiCWKbXVsdGlhZGRyc5YACASsEoglBjoQAAoErBKIJQY6Ed0DgnJzhQADAQAAiXNlY3AyNTZrMaECY_KswxS5g3jKjQKm2tdxt9MWW_pTEEpwnDoOa83JSmODdGNwgjoQg3VkcII6EoV3YWt1MgU"}'
2026-02-02 04:44:31.553 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:44:31.554 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-02 04:44:31.560 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:44:31.560 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-44-30__06d8d299-485a-4a0c-bca2-3520ecf1b546__wakuorg_nwaku:latest.log
2026-02-02 04:44:31.560 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:44:31.560 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:44:31.562 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:44:31.562 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.52.1
2026-02-02 04:44:31.562 DEBUG [src.node.docker_mananger] Generated ports ['23968', '23969', '23970', '23971', '23972']
2026-02-02 04:44:31.562 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:44:31.562 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:44:31.562 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:44:31.562 DEBUG [src.node.docker_mananger] docker run -i -t -p 23968:23968 -p 23969:23969 -p 23970:23970 -p 23971:23971 -p 23972:23972 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23970 --rest-port=23968 --tcp-port=23969 --discv5-udp-port=23971 --rest-address=0.0.0.0 --nat=extip:172.18.52.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e97abafad8eadec8aad3bb3446baebcb952fc7ac3afa30dd433f13daefce69bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23972 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHsdZOqjBpkYmI3eiebyQ21vMtY7OM7JeIfE50gOsomtAqBPT2mJFfuQCChSfUas0gAu_x7-QYyPY57Jwjp8200CgmlkgnY0gmlwhKwSiCWKbXVsdGlhZGRyc5YACASsEoglBjoQAAoErBKIJQY6Ed0DgnJzhQADAQAAiXNlY3AyNTZrMaECY_KswxS5g3jKjQKm2tdxt9MWW_pTEEpwnDoOa83JSmODdGNwgjoQg3VkcII6EoV3YWt1MgU --filternode=/ip4/172.18.136.37/tcp/14864/p2p/16Uiu2HAm29pxvLhuxnMeMzrbF67CXhePFgappwz6D3WJLd5Z45s8
2026-02-02 04:44:31.714 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.52.1 waku c233fd6f918add5e0ca2fdd250b7b50070dbad88479a27e7efc04631a161f2d7
2026-02-02 04:44:31.736 DEBUG [src.node.docker_mananger] Container started with ID c233fd6f918a. Setting up logs at ./log/docker/node2_2026-02-02_04-44-30__06d8d299-485a-4a0c-bca2-3520ecf1b546__wakuorg_nwaku:latest.log
2026-02-02 04:44:31.736 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23968
2026-02-02 04:44:31.737 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:44:32.738 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23968/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:44:32.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-02 04:44:32.742 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:44:32.742 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23968/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:44:32.744 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.1/tcp/23969/p2p/16Uiu2HAmLVNimqHRnmZ9ct4uLRi4CQoJoL4AJP6b7mW3bFcCyprU","/ip4/172.18.52.1/tcp/23970/ws/p2p/16Uiu2HAmLVNimqHRnmZ9ct4uLRi4CQoJoL4AJP6b7mW3bFcCyprU"],"enrUri":"enr:-L24QJLvSAv4ZDfCqi7mvkQrPwcsAk6le1qJQyhArkNgw3a6MGokTmgX_ZsIUfG8I_iqUQuXAiHTBJq_ZT93wCrRfccCgmlkgnY0gmlwhKwSNAGKbXVsdGlhZGRyc5YACASsEjQBBl2hAAoErBI0AQZdot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdGb7S9XfCUXCNMlyRZvLLN2Q_sYbnaaDhMmPvUyjIqGDdGNwgl2hg3VkcIJdo4V3YWt1MgA"}'
2026-02-02 04:44:32.745 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:44:32.745 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23968/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.37/tcp/14864/p2p/16Uiu2HAm29pxvLhuxnMeMzrbF67CXhePFgappwz6D3WJLd5Z45s8"]'
2026-02-02 04:44:32.771 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:44:32.771 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-02 04:44:32.773 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14863/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:44:32.784 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:44:32.785 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23968/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d0a0bda6-446c-4c42-ba6b-c5c9b69b2e48", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:44:32.794 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d0a0bda6-446c-4c42-ba6b-c5c9b69b2e48","statusDesc":"OK"}'
2026-02-02 04:44:32.795 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:23968/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "100"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:44:32.802 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23968/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"BAD_REQUEST: exceeds maximum content topics: 100"}'
2026-02-02 04:44:32.804 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:44:32.805 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:44:32.805 DEBUG [src.node.waku_node] Stopping container with id f69d08b2cd26
2026-02-02 04:44:33.275 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:44:33.275 DEBUG [src.node.waku_node] Stopping container with id c233fd6f918a
2026-02-02 04:44:33.740 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:44:33.741 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:44:33.748 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:44:33.752 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
