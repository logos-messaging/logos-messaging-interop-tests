2026-02-02 04:41:20.425 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:41:20.426 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_pubsub_topic_from_another_cluster_id with id: 2026-02-02_04-41-20__be68b3a7-aef8-4936-915e-6339a8d97bf6
2026-02-02 04:41:20.427 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:41:20.427 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-02 04:41:20.427 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-02 04:41:20.437 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:41:20.437 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-41-20__be68b3a7-aef8-4936-915e-6339a8d97bf6__wakuorg_nwaku:latest.log
2026-02-02 04:41:20.437 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:41:20.437 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:41:20.439 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:41:20.439 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.9.226
2026-02-02 04:41:20.440 DEBUG [src.node.docker_mananger] Generated ports ['64204', '64205', '64206', '64207', '64208']
2026-02-02 04:41:20.440 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:41:20.440 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:41:20.440 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:41:20.440 DEBUG [src.node.docker_mananger] docker run -i -t -p 64204:64204 -p 64205:64205 -p 64206:64206 -p 64207:64207 -p 64208:64208 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64206 --rest-port=64204 --tcp-port=64205 --discv5-udp-port=64207 --rest-address=0.0.0.0 --nat=extip:172.18.9.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6363d9c4edf2acc82fddf17079dcbc7398dbe37f6dd1d934dbefce8494b7b933 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64208 --metrics-logging=true --relay=true --filter=true
2026-02-02 04:41:20.563 ERROR [src.node.docker_mananger] Max retries reached for container d7c397a77855. Exiting log stream.
2026-02-02 04:41:20.669 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.9.226 waku be5b81abeb5f5e5c73db0f9cc4ffee802b9aa6790a079dba167d5acd2c15a006
2026-02-02 04:41:20.707 DEBUG [src.node.docker_mananger] Container started with ID be5b81abeb5f. Setting up logs at ./log/docker/node1_2026-02-02_04-41-20__be68b3a7-aef8-4936-915e-6339a8d97bf6__wakuorg_nwaku:latest.log
2026-02-02 04:41:20.708 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64204
2026-02-02 04:41:20.708 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:41:21.613 ERROR [src.node.docker_mananger] Max retries reached for container 842c12824b71. Exiting log stream.
2026-02-02 04:41:21.710 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64204/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:21.713 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:41:21.713 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:41:21.713 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64204/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:21.715 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.226/tcp/64205/p2p/16Uiu2HAmUxswuzNcd5Vj9mtsp88CtkD268s5ks6PgZdWHATkmUHS","/ip4/172.18.9.226/tcp/64206/ws/p2p/16Uiu2HAmUxswuzNcd5Vj9mtsp88CtkD268s5ks6PgZdWHATkmUHS"],"enrUri":"enr:-L24QOM8qVEs95MabUUvTkExIa_sAD6Oa2NG1zgESv30_VNkQZkvSW_8MMilK2-bq3IAqU3Z_4XgmdHBnmgfBQLQcPECgmlkgnY0gmlwhKwSCeKKbXVsdGlhZGRyc5YACASsEgniBvrNAAoErBIJ4gb6zt0DgnJzhQADAQAAiXNlY3AyNTZrMaED8lA0mR-lm29cT5X3rF5OG3jcGaX6daS1ESXbRyfbZpWDdGNwgvrNg3VkcIL6z4V3YWt1MgU"}'
2026-02-02 04:41:21.715 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:41:21.716 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-02 04:41:21.722 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:41:21.722 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-41-20__be68b3a7-aef8-4936-915e-6339a8d97bf6__wakuorg_nwaku:latest.log
2026-02-02 04:41:21.722 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:41:21.722 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:41:21.723 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:41:21.724 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.143.84
2026-02-02 04:41:21.724 DEBUG [src.node.docker_mananger] Generated ports ['44068', '44069', '44070', '44071', '44072']
2026-02-02 04:41:21.724 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:41:21.724 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:41:21.724 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:41:21.724 DEBUG [src.node.docker_mananger] docker run -i -t -p 44068:44068 -p 44069:44069 -p 44070:44070 -p 44071:44071 -p 44072:44072 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44070 --rest-port=44068 --tcp-port=44069 --discv5-udp-port=44071 --rest-address=0.0.0.0 --nat=extip:172.18.143.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf319df2a9c1c014b98d4ef983b031c4e5dab9fbdcc1e0d1f8e3db3a93c6ceed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44072 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QOM8qVEs95MabUUvTkExIa_sAD6Oa2NG1zgESv30_VNkQZkvSW_8MMilK2-bq3IAqU3Z_4XgmdHBnmgfBQLQcPECgmlkgnY0gmlwhKwSCeKKbXVsdGlhZGRyc5YACASsEgniBvrNAAoErBIJ4gb6zt0DgnJzhQADAQAAiXNlY3AyNTZrMaED8lA0mR-lm29cT5X3rF5OG3jcGaX6daS1ESXbRyfbZpWDdGNwgvrNg3VkcIL6z4V3YWt1MgU --filternode=/ip4/172.18.9.226/tcp/64205/p2p/16Uiu2HAmUxswuzNcd5Vj9mtsp88CtkD268s5ks6PgZdWHATkmUHS
2026-02-02 04:41:21.909 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.143.84 waku 263b12ab199f5405900e492ebda5f936365a23ec643aa998512c863b59dabeee
2026-02-02 04:41:21.937 DEBUG [src.node.docker_mananger] Container started with ID 263b12ab199f. Setting up logs at ./log/docker/node2_2026-02-02_04-41-20__be68b3a7-aef8-4936-915e-6339a8d97bf6__wakuorg_nwaku:latest.log
2026-02-02 04:41:21.938 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44068
2026-02-02 04:41:21.938 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:41:22.938 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44068/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:22.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-02 04:41:22.942 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:41:22.943 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44068/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:22.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.143.84/tcp/44069/p2p/16Uiu2HAmPKQM3PbdLnU2D6ow55ascpuBxVyyJk9PfUZK1oxfAYDb","/ip4/172.18.143.84/tcp/44070/ws/p2p/16Uiu2HAmPKQM3PbdLnU2D6ow55ascpuBxVyyJk9PfUZK1oxfAYDb"],"enrUri":"enr:-L24QCLiC1GkNjfJb53FUFKv9f8XCUwUtiH8VOkS3Xlu_m4yOp0GbMZzJizE6x7G3Cn4OHaqadTlMuRX7bPnXoTsj2kCgmlkgnY0gmlwhKwSj1SKbXVsdGlhZGRyc5YACASsEo9UBqwlAAoErBKPVAasJt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnmwScra80io2mZ4FatRn6Tw43I_WJuU25oTCEPPN6N6DdGNwgqwlg3VkcIKsJ4V3YWt1MgA"}'
2026-02-02 04:41:22.945 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:41:22.945 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44068/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.226/tcp/64205/p2p/16Uiu2HAmUxswuzNcd5Vj9mtsp88CtkD268s5ks6PgZdWHATkmUHS"]'
2026-02-02 04:41:22.976 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:22.982 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64204/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2026-02-02 04:41:22.989 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:22.989 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44068/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "4e14bd4a-005f-432c-a0cb-93b33d6c432a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
2026-02-02 04:41:23.001 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"4e14bd4a-005f-432c-a0cb-93b33d6c432a","statusDesc":"OK"}'
2026-02-02 04:41:23.003 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64204/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:41:23.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:23.010 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:41:23.110 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:41:23.111 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44068/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:23.113 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770007283003008232,"ephemeral":false}]'
2026-02-02 04:41:23.116 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:41:23.117 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:41:23.117 DEBUG [src.node.waku_node] Stopping container with id be5b81abeb5f
2026-02-02 04:41:23.632 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:41:23.632 DEBUG [src.node.waku_node] Stopping container with id 263b12ab199f
2026-02-02 04:41:24.156 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:41:24.157 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:41:24.168 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:41:24.173 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
