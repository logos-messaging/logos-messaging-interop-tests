2026-02-02 04:41:36.248 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:41:36.248 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_no_request_id with id: 2026-02-02_04-41-36__511b1d77-6ee4-4c0a-8115-fb5ac31c26cc
2026-02-02 04:41:36.249 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:41:36.249 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-02 04:41:36.249 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-02 04:41:36.256 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:41:36.256 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-41-36__511b1d77-6ee4-4c0a-8115-fb5ac31c26cc__wakuorg_nwaku:latest.log
2026-02-02 04:41:36.256 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:41:36.256 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:41:36.257 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:41:36.258 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.153.11
2026-02-02 04:41:36.258 DEBUG [src.node.docker_mananger] Generated ports ['25456', '25457', '25458', '25459', '25460']
2026-02-02 04:41:36.258 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:41:36.258 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:41:36.258 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:41:36.258 DEBUG [src.node.docker_mananger] docker run -i -t -p 25456:25456 -p 25457:25457 -p 25458:25458 -p 25459:25459 -p 25460:25460 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25458 --rest-port=25456 --tcp-port=25457 --discv5-udp-port=25459 --rest-address=0.0.0.0 --nat=extip:172.18.153.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad1d4d4f711823abc5e7aec745bca66ff332a8eac383b4a968f80fddcd9e3bde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25460 --metrics-logging=true --relay=true --filter=true
2026-02-02 04:41:36.436 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.153.11 waku 678d2d3579afea4bf8affedaca983a9104ed70cd12de98176f498582b5f9f057
2026-02-02 04:41:36.470 DEBUG [src.node.docker_mananger] Container started with ID 678d2d3579af. Setting up logs at ./log/docker/node1_2026-02-02_04-41-36__511b1d77-6ee4-4c0a-8115-fb5ac31c26cc__wakuorg_nwaku:latest.log
2026-02-02 04:41:36.472 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25456
2026-02-02 04:41:36.472 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:41:36.550 ERROR [src.node.docker_mananger] Max retries reached for container d4b61072663a. Exiting log stream.
2026-02-02 04:41:37.046 ERROR [src.node.docker_mananger] Max retries reached for container 1c7cc1583a04. Exiting log stream.
2026-02-02 04:41:37.472 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25456/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:37.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:41:37.476 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:41:37.476 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25456/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:37.478 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.153.11/tcp/25457/p2p/16Uiu2HAmDV6XZxN6i9oMGvkUoqTM73nGdv7vY8mzL4eeQrjJWBc1","/ip4/172.18.153.11/tcp/25458/ws/p2p/16Uiu2HAmDV6XZxN6i9oMGvkUoqTM73nGdv7vY8mzL4eeQrjJWBc1"],"enrUri":"enr:-L24QErundHmw4AjXxxw3bccIYlyCzAXU5-g_kHm8qG02djgWxYo3kvqL9BNDpW2RbHFr7_uHgF-kAAenycH7GOsAyECgmlkgnY0gmlwhKwSmQuKbXVsdGlhZGRyc5YACASsEpkLBmNxAAoErBKZCwZjct0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDFLdCuahqcTTVpBlOLF67nhMNU_2rcCTwPY5CLEP6u6DdGNwgmNxg3VkcIJjc4V3YWt1MgU"}'
2026-02-02 04:41:37.478 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:41:37.479 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-02 04:41:37.485 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:41:37.485 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-41-36__511b1d77-6ee4-4c0a-8115-fb5ac31c26cc__wakuorg_nwaku:latest.log
2026-02-02 04:41:37.485 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:41:37.486 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:41:37.487 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:41:37.487 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.160.48
2026-02-02 04:41:37.487 DEBUG [src.node.docker_mananger] Generated ports ['34802', '34803', '34804', '34805', '34806']
2026-02-02 04:41:37.487 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:41:37.488 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:41:37.488 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:41:37.488 DEBUG [src.node.docker_mananger] docker run -i -t -p 34802:34802 -p 34803:34803 -p 34804:34804 -p 34805:34805 -p 34806:34806 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34804 --rest-port=34802 --tcp-port=34803 --discv5-udp-port=34805 --rest-address=0.0.0.0 --nat=extip:172.18.160.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7f037d8f1b62ef4c01292139300c3b41bebeedf7064f17a56d3e8e6a2dde4fe8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34806 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QErundHmw4AjXxxw3bccIYlyCzAXU5-g_kHm8qG02djgWxYo3kvqL9BNDpW2RbHFr7_uHgF-kAAenycH7GOsAyECgmlkgnY0gmlwhKwSmQuKbXVsdGlhZGRyc5YACASsEpkLBmNxAAoErBKZCwZjct0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDFLdCuahqcTTVpBlOLF67nhMNU_2rcCTwPY5CLEP6u6DdGNwgmNxg3VkcIJjc4V3YWt1MgU --filternode=/ip4/172.18.153.11/tcp/25457/p2p/16Uiu2HAmDV6XZxN6i9oMGvkUoqTM73nGdv7vY8mzL4eeQrjJWBc1
2026-02-02 04:41:37.669 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.160.48 waku 78dfa32b047b9eb35d8fe03700bed50910fce79ffaccad3b1db0b34f56ccb658
2026-02-02 04:41:37.699 DEBUG [src.node.docker_mananger] Container started with ID 78dfa32b047b. Setting up logs at ./log/docker/node2_2026-02-02_04-41-36__511b1d77-6ee4-4c0a-8115-fb5ac31c26cc__wakuorg_nwaku:latest.log
2026-02-02 04:41:37.699 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34802
2026-02-02 04:41:37.700 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:41:38.701 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34802/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:38.705 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-02 04:41:38.705 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:41:38.705 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34802/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:38.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.48/tcp/34803/p2p/16Uiu2HAmB1wcSnahBBryrTrjpjDwmJi9QPaZoot9Qq31cX1od4UU","/ip4/172.18.160.48/tcp/34804/ws/p2p/16Uiu2HAmB1wcSnahBBryrTrjpjDwmJi9QPaZoot9Qq31cX1od4UU"],"enrUri":"enr:-L24QKWAVHZtD-YScBvdVlMklx6bTyT9PoOuFG3ExYipoA-CeFqXk2JsojZbIu7WbwVO5h02W7KMdojCvA2wgL5q3-8CgmlkgnY0gmlwhKwSoDCKbXVsdGlhZGRyc5YACASsEqAwBofzAAoErBKgMAaH9N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC56a5-r8OTgFAtOBWel1vZvpd71jsLzrYyqa9eWaGayWDdGNwgofzg3VkcIKH9YV3YWt1MgA"}'
2026-02-02 04:41:38.708 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:41:38.708 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34802/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.153.11/tcp/25457/p2p/16Uiu2HAmDV6XZxN6i9oMGvkUoqTM73nGdv7vY8mzL4eeQrjJWBc1"]'
2026-02-02 04:41:38.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:38.739 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-02 04:41:38.740 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25456/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:41:38.752 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:38.753 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34802/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8a5b6961-989e-43fc-8e8f-dccafb91bad1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:41:38.764 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"8a5b6961-989e-43fc-8e8f-dccafb91bad1","statusDesc":"OK"}'
2026-02-02 04:41:38.766 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:34802/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:41:38.768 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:34802/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-02 04:41:38.771 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:41:38.772 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:41:38.772 DEBUG [src.node.waku_node] Stopping container with id 678d2d3579af
2026-02-02 04:41:39.340 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:41:39.341 DEBUG [src.node.waku_node] Stopping container with id 78dfa32b047b
2026-02-02 04:41:39.860 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:41:39.862 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:41:39.867 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:41:39.871 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
