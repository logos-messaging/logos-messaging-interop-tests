2026-02-02 04:39:29.071 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:39:29.072 DEBUG [tests.conftest] Running test: test_lightpush with id: 2026-02-02_04-39-29__307f641a-2bb6-4927-81ea-0e345402d621
2026-02-02 04:39:29.072 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:39:29.072 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-02 04:39:29.073 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-02 04:39:29.073 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-02 04:39:29.073 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-02 04:39:29.080 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:39:29.080 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-39-29__307f641a-2bb6-4927-81ea-0e345402d621__wakuorg_nwaku:latest.log
2026-02-02 04:39:29.080 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:39:29.081 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:39:29.083 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:39:29.083 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.115.199
2026-02-02 04:39:29.083 DEBUG [src.node.docker_mananger] Generated ports ['21623', '21624', '21625', '21626', '21627']
2026-02-02 04:39:29.083 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:39:29.083 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:39:29.083 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:39:29.084 DEBUG [src.node.docker_mananger] docker run -i -t -p 21623:21623 -p 21624:21624 -p 21625:21625 -p 21626:21626 -p 21627:21627 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21625 --rest-port=21623 --tcp-port=21624 --discv5-udp-port=21626 --rest-address=0.0.0.0 --nat=extip:172.18.115.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b005d0ba4649af4c13f081bd0ac98bbac688700987bc5adbf51bcacfedaf059 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21627 --metrics-logging=true --lightpush=true --relay=true
2026-02-02 04:39:29.264 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.115.199 waku ad42faa17c4e69564accb8efe029b00a84dbf9849c4cd6adbc7cc1a979dcb7cb
2026-02-02 04:39:29.296 DEBUG [src.node.docker_mananger] Container started with ID ad42faa17c4e. Setting up logs at ./log/docker/node1_2026-02-02_04-39-29__307f641a-2bb6-4927-81ea-0e345402d621__wakuorg_nwaku:latest.log
2026-02-02 04:39:29.297 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21623
2026-02-02 04:39:29.297 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:39:29.398 ERROR [src.node.docker_mananger] Max retries reached for container 297a127680ab. Exiting log stream.
2026-02-02 04:39:29.879 ERROR [src.node.docker_mananger] Max retries reached for container c3180f9b3fda. Exiting log stream.
2026-02-02 04:39:30.297 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21623/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:30.301 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:39:30.301 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:39:30.301 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21623/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:30.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.199/tcp/21624/p2p/16Uiu2HAmPUwaLEVLXiVGtxJRvbod2hLsg8wJobBDJQmJD1qGwzwu","/ip4/172.18.115.199/tcp/21625/ws/p2p/16Uiu2HAmPUwaLEVLXiVGtxJRvbod2hLsg8wJobBDJQmJD1qGwzwu"],"enrUri":"enr:-L24QPZMrL_9Z4ACo46xfh7jVBrGHOZjDbi6p-fVcJ2tqTdFRgRqCCyPH05-RMSmqAHxyz9TXSZHQTlwGOCbuGdv2ZYCgmlkgnY0gmlwhKwSc8eKbXVsdGlhZGRyc5YACASsEnPHBlR4AAoErBJzxwZUed0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoN2cOWrP_9oziSAUnlPN5lXUgrkfKrbrfqT3085getSDdGNwglR4g3VkcIJUeoV3YWt1Mgk"}'
2026-02-02 04:39:30.303 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:39:30.309 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:39:30.310 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-39-29__307f641a-2bb6-4927-81ea-0e345402d621__wakuorg_nwaku:latest.log
2026-02-02 04:39:30.310 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:39:30.310 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:39:30.311 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:39:30.311 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.14.18
2026-02-02 04:39:30.311 DEBUG [src.node.docker_mananger] Generated ports ['38103', '38104', '38105', '38106', '38107']
2026-02-02 04:39:30.312 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:39:30.312 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:39:30.312 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:39:30.312 DEBUG [src.node.docker_mananger] docker run -i -t -p 38103:38103 -p 38104:38104 -p 38105:38105 -p 38106:38106 -p 38107:38107 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38105 --rest-port=38103 --tcp-port=38104 --discv5-udp-port=38106 --rest-address=0.0.0.0 --nat=extip:172.18.14.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=febab48d328ebcaaedfc329afd2fc8d99ffc5f4a827cf962bb5b20fe9ade1f95 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38107 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QPZMrL_9Z4ACo46xfh7jVBrGHOZjDbi6p-fVcJ2tqTdFRgRqCCyPH05-RMSmqAHxyz9TXSZHQTlwGOCbuGdv2ZYCgmlkgnY0gmlwhKwSc8eKbXVsdGlhZGRyc5YACASsEnPHBlR4AAoErBJzxwZUed0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoN2cOWrP_9oziSAUnlPN5lXUgrkfKrbrfqT3085getSDdGNwglR4g3VkcIJUeoV3YWt1Mgk
2026-02-02 04:39:30.492 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.14.18 waku a113f68a922e6142e9777b55a8a63e9a7bed53ea75e72230b9b8021ab0799e6b
2026-02-02 04:39:30.527 DEBUG [src.node.docker_mananger] Container started with ID a113f68a922e. Setting up logs at ./log/docker/node1_2026-02-02_04-39-29__307f641a-2bb6-4927-81ea-0e345402d621__wakuorg_nwaku:latest.log
2026-02-02 04:39:30.527 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38103
2026-02-02 04:39:30.527 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:39:31.528 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38103/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:31.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:39:31.538 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:39:31.540 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38103/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:31.546 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.18/tcp/38104/p2p/16Uiu2HAmVKLjPeexfhwBVShBs3QtmBe4wP8qB9M94rj95kc8BVc1","/ip4/172.18.14.18/tcp/38105/ws/p2p/16Uiu2HAmVKLjPeexfhwBVShBs3QtmBe4wP8qB9M94rj95kc8BVc1"],"enrUri":"enr:-L24QN7vQZwayX8ALkgUW-eUbGKFGx97O1sSW_nigIN0v7ArHv1h1dCi28Kk2PofaA6EVueRifQS3GzGbO8deBOelBACgmlkgnY0gmlwhKwSDhKKbXVsdGlhZGRyc5YACASsEg4SBpTYAAoErBIOEgaU2d0DgnJzhQADAQAAiXNlY3AyNTZrMaED944bQ9U_9azVoeDxjehoFfMzCY8xS94AV2vhtcVKTH6DdGNwgpTYg3VkcIKU2oV3YWt1MgE"}'
2026-02-02 04:39:31.547 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:39:31.553 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:39:31.553 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-39-29__307f641a-2bb6-4927-81ea-0e345402d621__wakuorg_nwaku:latest.log
2026-02-02 04:39:31.553 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:39:31.554 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:39:31.555 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:39:31.555 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.92.192
2026-02-02 04:39:31.555 DEBUG [src.node.docker_mananger] Generated ports ['14613', '14614', '14615', '14616', '14617']
2026-02-02 04:39:31.555 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:39:31.555 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:39:31.556 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:39:31.556 DEBUG [src.node.docker_mananger] docker run -i -t -p 14613:14613 -p 14614:14614 -p 14615:14615 -p 14616:14616 -p 14617:14617 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14615 --rest-port=14613 --tcp-port=14614 --discv5-udp-port=14616 --rest-address=0.0.0.0 --nat=extip:172.18.92.192 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc8f995db327cbd9bc33daea7f63ed1e55737c5f7dcbfa380683007e2e558d14 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14617 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-L24QPZMrL_9Z4ACo46xfh7jVBrGHOZjDbi6p-fVcJ2tqTdFRgRqCCyPH05-RMSmqAHxyz9TXSZHQTlwGOCbuGdv2ZYCgmlkgnY0gmlwhKwSc8eKbXVsdGlhZGRyc5YACASsEnPHBlR4AAoErBJzxwZUed0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoN2cOWrP_9oziSAUnlPN5lXUgrkfKrbrfqT3085getSDdGNwglR4g3VkcIJUeoV3YWt1Mgk --lightpushnode=/ip4/172.18.115.199/tcp/21624/p2p/16Uiu2HAmPUwaLEVLXiVGtxJRvbod2hLsg8wJobBDJQmJD1qGwzwu
2026-02-02 04:39:31.737 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.92.192 waku 14171f6bc7eb0f8363fa74237adf9282b8c2db244249577c60a77b02a70cffcd
2026-02-02 04:39:31.767 DEBUG [src.node.docker_mananger] Container started with ID 14171f6bc7eb. Setting up logs at ./log/docker/node1_2026-02-02_04-39-29__307f641a-2bb6-4927-81ea-0e345402d621__wakuorg_nwaku:latest.log
2026-02-02 04:39:31.767 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14613
2026-02-02 04:39:31.767 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:39:32.768 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14613/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:32.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:39:32.773 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:39:32.773 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14613/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:32.775 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.192/tcp/14614/p2p/16Uiu2HAkz21L6pqUEkzEAVRNXzjzEzTFBoe4qPsWH6PbfYU6G5ZY","/ip4/172.18.92.192/tcp/14615/ws/p2p/16Uiu2HAkz21L6pqUEkzEAVRNXzjzEzTFBoe4qPsWH6PbfYU6G5ZY"],"enrUri":"enr:-L24QOcXy8UHb564nftqnOXU4Ipuc2kLhTEU3il5HvtQBgESFHDCna-gwoY0XtkRxygmJYM6nM3u1CbPyEPVyJAYY0cCgmlkgnY0gmlwhKwSXMCKbXVsdGlhZGRyc5YACASsElzABjkWAAoErBJcwAY5F90DgnJzhQADAQAAiXNlY3AyNTZrMaECRDpf3eCowPCn66-YD4aAWnuNISdbadVBW3pz51igADeDdGNwgjkWg3VkcII5GIV3YWt1Mgk"}'
2026-02-02 04:39:32.775 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:39:32.776 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21623/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:39:32.779 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:39:32.779 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38103/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:39:32.784 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:39:32.790 DEBUG [src.steps.light_push] Lightpushing message
2026-02-02 04:39:32.794 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14613/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1770007172790461203}}'
2026-02-02 04:39:32.824 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:39:32.824 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:39:32.925 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2026-02-02 04:39:32.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21623/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:32.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770007172790461203,"ephemeral":false,"proof":""}]'
2026-02-02 04:39:32.930 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2026-02-02 04:39:32.930 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38103/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:32.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770007172790461203,"ephemeral":false,"proof":""}]'
2026-02-02 04:39:32.935 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:39:32.936 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:39:32.936 DEBUG [src.node.waku_node] Stopping container with id ad42faa17c4e
2026-02-02 04:39:33.501 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:39:33.501 DEBUG [src.node.waku_node] Stopping container with id a113f68a922e
2026-02-02 04:39:33.991 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:39:33.991 DEBUG [src.node.waku_node] Stopping container with id 14171f6bc7eb
2026-02-02 04:39:34.314 ERROR [src.node.docker_mananger] Max retries reached for container ad42faa17c4e. Exiting log stream.
2026-02-02 04:39:34.495 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:39:34.497 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:39:34.505 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:39:34.513 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:39:34.521 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
