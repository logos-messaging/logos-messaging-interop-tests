2026-02-02 04:42:02.096 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:42:02.097 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_single_content_topic with id: 2026-02-02_04-42-02__93b8a582-4f20-4399-8f52-f9fb881b489c
2026-02-02 04:42:02.097 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:42:02.097 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-02 04:42:02.098 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-02 04:42:02.104 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:42:02.105 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-42-02__93b8a582-4f20-4399-8f52-f9fb881b489c__wakuorg_nwaku:latest.log
2026-02-02 04:42:02.105 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:42:02.105 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:42:02.106 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:42:02.106 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.232.164
2026-02-02 04:42:02.107 DEBUG [src.node.docker_mananger] Generated ports ['48556', '48557', '48558', '48559', '48560']
2026-02-02 04:42:02.107 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:42:02.107 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:42:02.107 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:42:02.107 DEBUG [src.node.docker_mananger] docker run -i -t -p 48556:48556 -p 48557:48557 -p 48558:48558 -p 48559:48559 -p 48560:48560 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48558 --rest-port=48556 --tcp-port=48557 --discv5-udp-port=48559 --rest-address=0.0.0.0 --nat=extip:172.18.232.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bed59ddcd24bfeccc39f3dccceaaeff4bfcbecfb046bfca8eeaae721c94dbedf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48560 --metrics-logging=true --relay=true --filter=true
2026-02-02 04:42:02.280 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.232.164 waku 14cf4fd5048b85a80e3cd3086163a37ab416a17caf94649ac75bfc41d0808e29
2026-02-02 04:42:02.312 DEBUG [src.node.docker_mananger] Container started with ID 14cf4fd5048b. Setting up logs at ./log/docker/node1_2026-02-02_04-42-02__93b8a582-4f20-4399-8f52-f9fb881b489c__wakuorg_nwaku:latest.log
2026-02-02 04:42:02.313 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48556
2026-02-02 04:42:02.313 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:42:02.396 ERROR [src.node.docker_mananger] Max retries reached for container 422c6f5b5863. Exiting log stream.
2026-02-02 04:42:02.896 ERROR [src.node.docker_mananger] Max retries reached for container 4c40eef9f846. Exiting log stream.
2026-02-02 04:42:03.313 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48556/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:03.317 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:42:03.317 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:42:03.317 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48556/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:03.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.164/tcp/48557/p2p/16Uiu2HAm2muKz3cwHvk6ToNzFg7ax8VzcoBgXXAFwZbuzkpwFrFH","/ip4/172.18.232.164/tcp/48558/ws/p2p/16Uiu2HAm2muKz3cwHvk6ToNzFg7ax8VzcoBgXXAFwZbuzkpwFrFH"],"enrUri":"enr:-L24QKlb2Vnu-wTiBqVmPlmORF3auO6tuvfoLcvDUdhVj3Y_L4EOKnztykSHifEcH0lG4wj3pG1UlK_u_M0OeCArECACgmlkgnY0gmlwhKwS6KSKbXVsdGlhZGRyc5YACASsEuikBr2tAAoErBLopAa9rt0DgnJzhQADAQAAiXNlY3AyNTZrMaECbTCEdlsN3LPuBbgQiamO2XbJKP0d3gDqlVLGLwJEylCDdGNwgr2tg3VkcIK9r4V3YWt1MgU"}'
2026-02-02 04:42:03.319 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:42:03.320 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-02 04:42:03.326 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:42:03.326 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-42-02__93b8a582-4f20-4399-8f52-f9fb881b489c__wakuorg_nwaku:latest.log
2026-02-02 04:42:03.326 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:42:03.326 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:42:03.328 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:42:03.328 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.215.177
2026-02-02 04:42:03.328 DEBUG [src.node.docker_mananger] Generated ports ['20255', '20256', '20257', '20258', '20259']
2026-02-02 04:42:03.328 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:42:03.328 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:42:03.328 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:42:03.329 DEBUG [src.node.docker_mananger] docker run -i -t -p 20255:20255 -p 20256:20256 -p 20257:20257 -p 20258:20258 -p 20259:20259 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20257 --rest-port=20255 --tcp-port=20256 --discv5-udp-port=20258 --rest-address=0.0.0.0 --nat=extip:172.18.215.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3a63cdf5c8814a54b0e7da3b042eed8cba079fadcf911c7edfefbce6e833491 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20259 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKlb2Vnu-wTiBqVmPlmORF3auO6tuvfoLcvDUdhVj3Y_L4EOKnztykSHifEcH0lG4wj3pG1UlK_u_M0OeCArECACgmlkgnY0gmlwhKwS6KSKbXVsdGlhZGRyc5YACASsEuikBr2tAAoErBLopAa9rt0DgnJzhQADAQAAiXNlY3AyNTZrMaECbTCEdlsN3LPuBbgQiamO2XbJKP0d3gDqlVLGLwJEylCDdGNwgr2tg3VkcIK9r4V3YWt1MgU --filternode=/ip4/172.18.232.164/tcp/48557/p2p/16Uiu2HAm2muKz3cwHvk6ToNzFg7ax8VzcoBgXXAFwZbuzkpwFrFH
2026-02-02 04:42:03.514 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.215.177 waku c208f2932511d1fe3049b2786efb1a84606b38acb07bda0f16edb40223d87fb3
2026-02-02 04:42:03.544 DEBUG [src.node.docker_mananger] Container started with ID c208f2932511. Setting up logs at ./log/docker/node2_2026-02-02_04-42-02__93b8a582-4f20-4399-8f52-f9fb881b489c__wakuorg_nwaku:latest.log
2026-02-02 04:42:03.544 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20255
2026-02-02 04:42:03.544 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:42:04.545 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20255/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:04.548 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-02 04:42:04.549 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:42:04.549 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20255/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:04.551 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.177/tcp/20256/p2p/16Uiu2HAmFzP6dq88mgHdLK5pB15vJHkettJSZ8hZVcogUezd8PW5","/ip4/172.18.215.177/tcp/20257/ws/p2p/16Uiu2HAmFzP6dq88mgHdLK5pB15vJHkettJSZ8hZVcogUezd8PW5"],"enrUri":"enr:-L24QA-YOFDbomlZi1DKYhU3jZPDFvDWDoqdEhP14uhIhAfseOb_AHMLb1JEnbd6jK9F5grlZHMYDno3iJSnfsjnI1kCgmlkgnY0gmlwhKwS17GKbXVsdGlhZGRyc5YACASsEtexBk8gAAoErBLXsQZPId0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMYrREE2cLOSPzaiEtCe-hdR-hwQqEpBuVL1wCiVUx2aDdGNwgk8gg3VkcIJPIoV3YWt1MgA"}'
2026-02-02 04:42:04.551 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:42:04.552 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20255/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.232.164/tcp/48557/p2p/16Uiu2HAm2muKz3cwHvk6ToNzFg7ax8VzcoBgXXAFwZbuzkpwFrFH"]'
2026-02-02 04:42:04.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:04.583 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-02 04:42:04.584 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48556/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:42:04.595 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:04.596 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d9866d5f-f3f2-4aac-9580-f8bcaf9ac60e", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:42:04.609 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d9866d5f-f3f2-4aac-9580-f8bcaf9ac60e","statusDesc":"OK"}'
2026-02-02 04:42:04.610 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48556/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:42:04.617 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:04.617 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:42:04.717 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:42:04.718 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20255/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:04.721 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770007324610119961,"ephemeral":false}]'
2026-02-02 04:42:04.722 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:20255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:42:04.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2026-02-02 04:42:04.731 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48556/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:42:04.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:04.735 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:42:04.835 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:42:04.835 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20255/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:04.838 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20255/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
2026-02-02 04:42:04.841 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:42:04.842 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:42:04.842 DEBUG [src.node.waku_node] Stopping container with id 14cf4fd5048b
2026-02-02 04:42:05.344 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:42:05.344 DEBUG [src.node.waku_node] Stopping container with id c208f2932511
2026-02-02 04:42:05.845 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:42:05.848 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:42:05.853 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:42:05.858 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
