2026-02-02 04:43:42.894 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:43:42.894 DEBUG [tests.conftest] Running test: test_content_topic_not_in_docker_flags with id: 2026-02-02_04-43-42__f6dd6d92-2b14-469e-a017-e7df5f35bb92
2026-02-02 04:43:42.894 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:43:42.895 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-02 04:43:42.895 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-02 04:43:42.902 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:43:42.902 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-43-42__f6dd6d92-2b14-469e-a017-e7df5f35bb92__wakuorg_nwaku:latest.log
2026-02-02 04:43:42.902 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:43:42.902 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:43:42.904 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:43:42.904 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.227.244
2026-02-02 04:43:42.904 DEBUG [src.node.docker_mananger] Generated ports ['56918', '56919', '56920', '56921', '56922']
2026-02-02 04:43:42.904 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-02 04:43:42.904 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:43:42.904 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:43:42.905 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:43:42.905 DEBUG [src.node.docker_mananger] docker run -i -t -p 56918:56918 -p 56919:56919 -p 56920:56920 -p 56921:56921 -p 56922:56922 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56920 --rest-port=56918 --tcp-port=56919 --discv5-udp-port=56921 --rest-address=0.0.0.0 --nat=extip:172.18.227.244 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d5d3d2b154be1e0733787d5b51fdac1dd1aea0858ba569d1d5e4c3f334a8bded --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56922 --metrics-logging=true --relay=true --filter=true
2026-02-02 04:43:43.080 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.227.244 waku a4d277442ee9bb774c7a4aceaa352807b428dfa417d4c1816bcd72e026039215
2026-02-02 04:43:43.116 DEBUG [src.node.docker_mananger] Container started with ID a4d277442ee9. Setting up logs at ./log/docker/node1_2026-02-02_04-43-42__f6dd6d92-2b14-469e-a017-e7df5f35bb92__wakuorg_nwaku:latest.log
2026-02-02 04:43:43.117 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56918
2026-02-02 04:43:43.117 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:43:43.156 ERROR [src.node.docker_mananger] Max retries reached for container 8ffdd8ceabec. Exiting log stream.
2026-02-02 04:43:43.702 ERROR [src.node.docker_mananger] Max retries reached for container 4e9eaff2f2c6. Exiting log stream.
2026-02-02 04:43:44.118 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56918/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:43:44.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:43:44.121 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:43:44.121 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56918/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:43:44.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.244/tcp/56919/p2p/16Uiu2HAmUFQRHqu4AyXTfU3Ae8rLtR2btUqCBwDgh7miVhPtY8zP","/ip4/172.18.227.244/tcp/56920/ws/p2p/16Uiu2HAmUFQRHqu4AyXTfU3Ae8rLtR2btUqCBwDgh7miVhPtY8zP"],"enrUri":"enr:-L24QC9BZW95PS6c2q8VHBV4ffQxfE2ogwH3BCNRT1lOzLqZCCblFUTwWbSpETFpoEpO9VVXftCvzuvTFbg7MXuDgjACgmlkgnY0gmlwhKwS4_SKbXVsdGlhZGRyc5YACASsEuP0Bt5XAAoErBLj9AbeWN0DgnJzhQACAQAAiXNlY3AyNTZrMaED57BEK_lk0Z0yI7V-YAyWkc-tNkziqbMS8FBuB8r7ssSDdGNwgt5Xg3VkcILeWYV3YWt1MgU"}'
2026-02-02 04:43:44.123 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:43:44.130 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:43:44.130 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-43-42__f6dd6d92-2b14-469e-a017-e7df5f35bb92__wakuorg_nwaku:latest.log
2026-02-02 04:43:44.130 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:43:44.130 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:43:44.132 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:43:44.132 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.105.125
2026-02-02 04:43:44.132 DEBUG [src.node.docker_mananger] Generated ports ['37021', '37022', '37023', '37024', '37025']
2026-02-02 04:43:44.132 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-02 04:43:44.132 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:43:44.133 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:43:44.133 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:43:44.133 DEBUG [src.node.docker_mananger] docker run -i -t -p 37021:37021 -p 37022:37022 -p 37023:37023 -p 37024:37024 -p 37025:37025 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37023 --rest-port=37021 --tcp-port=37022 --discv5-udp-port=37024 --rest-address=0.0.0.0 --nat=extip:172.18.105.125 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ca2a615a16cd9b09f17fc18fc998a021cdf3e84af5378187524fdeb990d68d30 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37025 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QC9BZW95PS6c2q8VHBV4ffQxfE2ogwH3BCNRT1lOzLqZCCblFUTwWbSpETFpoEpO9VVXftCvzuvTFbg7MXuDgjACgmlkgnY0gmlwhKwS4_SKbXVsdGlhZGRyc5YACASsEuP0Bt5XAAoErBLj9AbeWN0DgnJzhQACAQAAiXNlY3AyNTZrMaED57BEK_lk0Z0yI7V-YAyWkc-tNkziqbMS8FBuB8r7ssSDdGNwgt5Xg3VkcILeWYV3YWt1MgU
2026-02-02 04:43:44.314 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.105.125 waku dd159576075f8d75da2c7a0bdd08644fe92504ec2882aad78027dc4e69a87a6a
2026-02-02 04:43:44.344 DEBUG [src.node.docker_mananger] Container started with ID dd159576075f. Setting up logs at ./log/docker/node2_2026-02-02_04-43-42__f6dd6d92-2b14-469e-a017-e7df5f35bb92__wakuorg_nwaku:latest.log
2026-02-02 04:43:44.344 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37021
2026-02-02 04:43:44.344 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:43:45.345 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37021/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:43:45.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-02 04:43:45.356 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:43:45.356 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37021/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:43:45.361 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.105.125/tcp/37022/p2p/16Uiu2HAkvX7j9xnmYWyini43g54U2cEN9bvbQQDBTGXtD6FiHsV2","/ip4/172.18.105.125/tcp/37023/ws/p2p/16Uiu2HAkvX7j9xnmYWyini43g54U2cEN9bvbQQDBTGXtD6FiHsV2"],"enrUri":"enr:-L24QIxRcelMkGiRP78ddlA_hu46Vu81xhQEDosIjjIhWhOrXHyevP_LjXm-2FBOCJ1kYgmZzdmbNk1SZAei7z7Zp0wCgmlkgnY0gmlwhKwSaX2KbXVsdGlhZGRyc5YACASsEml9BpCeAAoErBJpfQaQn90DgnJzhQACAQAAiXNlY3AyNTZrMaECEEC0MoEw65sovK6fBtUzhCPXOsAy8z2hUG5YVez6CHGDdGNwgpCeg3VkcIKQoIV3YWt1MgE"}'
2026-02-02 04:43:45.362 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:43:45.362 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37021/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.227.244/tcp/56919/p2p/16Uiu2HAmUFQRHqu4AyXTfU3Ae8rLtR2btUqCBwDgh7miVhPtY8zP"]'
2026-02-02 04:43:45.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:43:45.368 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56918/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-02 04:43:45.370 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:43:45.370 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37021/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-02 04:43:45.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:43:45.373 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56918/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:43:45.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:43:45.378 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:43:45.478 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-02 04:43:45.478 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56918/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:43:45.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770007425373772283,"ephemeral":false,"proof":""}]'
2026-02-02 04:43:45.483 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:43:45.483 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37021/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:43:45.485 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770007425373772283,"ephemeral":false,"proof":""}]'
2026-02-02 04:43:45.488 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:43:45.489 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:43:45.489 DEBUG [src.node.waku_node] Stopping container with id a4d277442ee9
2026-02-02 04:43:46.002 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:43:46.002 DEBUG [src.node.waku_node] Stopping container with id dd159576075f
2026-02-02 04:43:46.521 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:43:46.523 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:43:46.528 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:43:46.532 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
