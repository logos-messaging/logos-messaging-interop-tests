[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_request_id with id: 2026-02-02_04-46-47__b8313f39-d447-41fc-819d-cd927ce531bc
[35mDEBUG   [0m src.steps.common:common.py:19 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:86 WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-46-47__b8313f39-d447-41fc-819d-cd927ce531bc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:90 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.225.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26349', '26350', '26351', '26352', '26353']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:176 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26349:26349 -p 26350:26350 -p 26351:26351 -p 26352:26352 -p 26353:26353 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26351 --rest-port=26349 --tcp-port=26350 --discv5-udp-port=26352 --rest-address=0.0.0.0 --nat=extip:172.18.225.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc2efee9323eeadb9f8cc85f49a20dcdafc6642adca9ad0f200bf3a0c5f91fff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26353 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.225.50 waku 86ac161f60a26b8a8d104f408da4fa7a2e39d8dc45d641a52beee2f3298680ac
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 86ac161f60a2. Setting up logs at ./log/docker/node1_2026-02-02_04-46-47__b8313f39-d447-41fc-819d-cd927ce531bc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:190 Started container from image wakuorg/nwaku:latest. REST: 26349
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cc46e499644d. Exiting log stream.
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 60137cba44cd. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26349/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26349/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.50/tcp/26350/p2p/16Uiu2HAmGJKiHbac7hrzMy5phi6WQE52Ax8bgiKsaS2Sx6JVKhDu","/ip4/172.18.225.50/tcp/26351/ws/p2p/16Uiu2HAmGJKiHbac7hrzMy5phi6WQE52Ax8bgiKsaS2Sx6JVKhDu"],"enrUri":"enr:-L24QCUo5rvdbrPGnpeLyyjIfvIl3SWs4o8K3nO0r7GurszZAy_UuSranz18koBExEWecUJRzMEnLXtj9xNDz2ewBXQCgmlkgnY0gmlwhKwS4TKKbXVsdGlhZGRyc5YACASsEuEyBmbuAAoErBLhMgZm790DgnJzhQADAQAAiXNlY3AyNTZrMaEDNiNxg-pJJdQwPm69mD_nwJ4-3h3KqMBKyXNJrmjmBHyDdGNwgmbug3VkcIJm8IV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:292 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:86 WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-46-47__b8313f39-d447-41fc-819d-cd927ce531bc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:90 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.217.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25168', '25169', '25170', '25171', '25172']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:176 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25168:25168 -p 25169:25169 -p 25170:25170 -p 25171:25171 -p 25172:25172 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25170 --rest-port=25168 --tcp-port=25169 --discv5-udp-port=25171 --rest-address=0.0.0.0 --nat=extip:172.18.217.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da0f726b6ceba23f0c63c8fb4fb0e0cacf2cdaeedd88caffe7aa564d3456bf97 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25172 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QCUo5rvdbrPGnpeLyyjIfvIl3SWs4o8K3nO0r7GurszZAy_UuSranz18koBExEWecUJRzMEnLXtj9xNDz2ewBXQCgmlkgnY0gmlwhKwS4TKKbXVsdGlhZGRyc5YACASsEuEyBmbuAAoErBLhMgZm790DgnJzhQADAQAAiXNlY3AyNTZrMaEDNiNxg-pJJdQwPm69mD_nwJ4-3h3KqMBKyXNJrmjmBHyDdGNwgmbug3VkcIJm8IV3YWt1MgU --filternode=/ip4/172.18.225.50/tcp/26350/p2p/16Uiu2HAmGJKiHbac7hrzMy5phi6WQE52Ax8bgiKsaS2Sx6JVKhDu
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.217.97 waku 5664daf52d10d3f54bfc465b026704e399f229a4ce8816671bfe9982c5ad190d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5664daf52d10. Setting up logs at ./log/docker/node2_2026-02-02_04-46-47__b8313f39-d447-41fc-819d-cd927ce531bc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:190 Started container from image wakuorg/nwaku:latest. REST: 25168
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25168/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25168/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.97/tcp/25169/p2p/16Uiu2HAmJzYRz4L4W5ptns8rctvjr9wKy5JSyDbEy98h3SzB36t5","/ip4/172.18.217.97/tcp/25170/ws/p2p/16Uiu2HAmJzYRz4L4W5ptns8rctvjr9wKy5JSyDbEy98h3SzB36t5"],"enrUri":"enr:-L24QG0dhOj5ESTd9pKJaBFVRvCuu8gwc9JBz3viU-EOIpR6ELaOK7An9jriIQ8vPo80-49gPM0HBxxeitpB2qCgb8gCgmlkgnY0gmlwhKwS2WGKbXVsdGlhZGRyc5YACASsEtlhBmJRAAoErBLZYQZiUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXihuU_Cwp4EQvLeXNlLBPALu7ioXiQ_NTD3OnR4udBaDdGNwgmJRg3VkcIJiU4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:292 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25168/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.50/tcp/26350/p2p/16Uiu2HAmGJKiHbac7hrzMy5phi6WQE52Ax8bgiKsaS2Sx6JVKhDu"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26349/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25168/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "35d40101-9449-48ae-ad4d-e4d168e3ee12", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"35d40101-9449-48ae-ad4d-e4d168e3ee12","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25168/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25168/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:234 Stopping container with id 86ac161f60a2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:241 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:234 Stopping container with id 5664daf52d10
[35mDEBUG   [0m src.node.waku_node:waku_node.py:241 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.