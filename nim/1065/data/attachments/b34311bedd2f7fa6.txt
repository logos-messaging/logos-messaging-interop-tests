2026-02-02 04:49:23.026 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:49:23.026 DEBUG [tests.conftest] Running test: test_content_topic_also_in_docker_flags[/aaaaa/3/bbbbb/proto] with id: 2026-02-02_04-49-23__bca014ec-7876-4ff3-a66a-6ad9a65dd4d5
2026-02-02 04:49:23.026 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:49:23.027 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-02 04:49:23.027 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-02 04:49:23.035 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:49:23.035 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-49-23__bca014ec-7876-4ff3-a66a-6ad9a65dd4d5__wakuorg_nwaku:latest.log
2026-02-02 04:49:23.035 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:49:23.035 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:49:23.037 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:49:23.037 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.144.113
2026-02-02 04:49:23.037 DEBUG [src.node.docker_mananger] Generated ports ['28573', '28574', '28575', '28576', '28577']
2026-02-02 04:49:23.038 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-02-02 04:49:23.038 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-02 04:49:23.038 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:49:23.038 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:49:23.038 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:49:23.038 DEBUG [src.node.docker_mananger] docker run -i -t -p 28573:28573 -p 28574:28574 -p 28575:28575 -p 28576:28576 -p 28577:28577 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28575 --rest-port=28573 --tcp-port=28574 --discv5-udp-port=28576 --rest-address=0.0.0.0 --nat=extip:172.18.144.113 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=caa3a6bb0b0b66ca356a45be5edf5efee065f9823218d1fdf25bf51089dfdc2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28577 --metrics-logging=true --relay=true --filter=true --content-topic=/aaaaa/3/bbbbb/proto
2026-02-02 04:49:23.230 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.144.113 waku 79178f17d00d603600635cd34508171cd0a6aba437fe17116599ea2d4656c700
2026-02-02 04:49:23.263 DEBUG [src.node.docker_mananger] Container started with ID 79178f17d00d. Setting up logs at ./log/docker/node1_2026-02-02_04-49-23__bca014ec-7876-4ff3-a66a-6ad9a65dd4d5__wakuorg_nwaku:latest.log
2026-02-02 04:49:23.264 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28573
2026-02-02 04:49:23.265 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:49:23.275 ERROR [src.node.docker_mananger] Max retries reached for container 138f2de393ad. Exiting log stream.
2026-02-02 04:49:23.818 ERROR [src.node.docker_mananger] Max retries reached for container a0a655a44dbb. Exiting log stream.
2026-02-02 04:49:24.266 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28573/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:49:24.269 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:49:24.269 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:49:24.269 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28573/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:49:24.271 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.144.113/tcp/28574/p2p/16Uiu2HAmHsMoJCoX1vwwhwJornQQDLQtUw4Q6SSxnevfpN4xb2WT","/ip4/172.18.144.113/tcp/28575/ws/p2p/16Uiu2HAmHsMoJCoX1vwwhwJornQQDLQtUw4Q6SSxnevfpN4xb2WT"],"enrUri":"enr:-L24QHdhZGheWD1Fb36h77JlwcAgHsYcQaVzGxQNmJV6v_MhFVfCiHnpIlOMCk7yvR4dprfWZ1nhUmrkIEK5GGgl6U8CgmlkgnY0gmlwhKwSkHGKbXVsdGlhZGRyc5YACASsEpBxBm-eAAoErBKQcQZvn90DgnJzhQACAQAAiXNlY3AyNTZrMaEDTXWn-C7eGj4e3nhKMshx_eYhF9WfrFbV2QcM33NBQTCDdGNwgm-eg3VkcIJvoIV3YWt1MgU"}'
2026-02-02 04:49:24.272 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:49:24.279 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:49:24.279 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-49-23__bca014ec-7876-4ff3-a66a-6ad9a65dd4d5__wakuorg_nwaku:latest.log
2026-02-02 04:49:24.279 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:49:24.279 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:49:24.281 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:49:24.281 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.110.198
2026-02-02 04:49:24.281 DEBUG [src.node.docker_mananger] Generated ports ['5434', '5435', '5436', '5437', '5438']
2026-02-02 04:49:24.281 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-02-02 04:49:24.281 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-02 04:49:24.281 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:49:24.281 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:49:24.282 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:49:24.282 DEBUG [src.node.docker_mananger] docker run -i -t -p 5434:5434 -p 5435:5435 -p 5436:5436 -p 5437:5437 -p 5438:5438 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5436 --rest-port=5434 --tcp-port=5435 --discv5-udp-port=5437 --rest-address=0.0.0.0 --nat=extip:172.18.110.198 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=71d46ea83e1ed0e48f7e2e5903d2a8ed98fb4bedddcd22dfce18038a77cead1e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5438 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QHdhZGheWD1Fb36h77JlwcAgHsYcQaVzGxQNmJV6v_MhFVfCiHnpIlOMCk7yvR4dprfWZ1nhUmrkIEK5GGgl6U8CgmlkgnY0gmlwhKwSkHGKbXVsdGlhZGRyc5YACASsEpBxBm-eAAoErBKQcQZvn90DgnJzhQACAQAAiXNlY3AyNTZrMaEDTXWn-C7eGj4e3nhKMshx_eYhF9WfrFbV2QcM33NBQTCDdGNwgm-eg3VkcIJvoIV3YWt1MgU --content-topic=/aaaaa/3/bbbbb/proto
2026-02-02 04:49:24.476 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.110.198 waku 6eae571560da6174818a8c4b32d66d6963ae59247c2f3a164bc470093017ad75
2026-02-02 04:49:24.511 DEBUG [src.node.docker_mananger] Container started with ID 6eae571560da. Setting up logs at ./log/docker/node2_2026-02-02_04-49-23__bca014ec-7876-4ff3-a66a-6ad9a65dd4d5__wakuorg_nwaku:latest.log
2026-02-02 04:49:24.512 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5434
2026-02-02 04:49:24.512 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:49:25.512 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5434/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:49:25.519 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-02 04:49:25.521 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:49:25.521 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5434/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:49:25.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.198/tcp/5435/p2p/16Uiu2HAmG4joAK7KiMt2H6KoQE2RJbDR87tbx1xmcakRKZDz758m","/ip4/172.18.110.198/tcp/5436/ws/p2p/16Uiu2HAmG4joAK7KiMt2H6KoQE2RJbDR87tbx1xmcakRKZDz758m"],"enrUri":"enr:-L24QCIlWNsTWZa6FFY1lD2U130r7wLNrVFdBKZIuAbzH5kpAOFnSmMdydZHqAZEpxi4f_CjYCm4TLCTwQNY4oyqHYQCgmlkgnY0gmlwhKwSbsaKbXVsdGlhZGRyc5YACASsEm7GBhU7AAoErBJuxgYVPN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDMqiLQ-Uo8BwG4gnA7TjJ5hDm8IY8zr41kz0JjqVvtlKDdGNwghU7g3VkcIIVPYV3YWt1MgE"}'
2026-02-02 04:49:25.525 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:49:25.526 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5434/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.144.113/tcp/28574/p2p/16Uiu2HAmHsMoJCoX1vwwhwJornQQDLQtUw4Q6SSxnevfpN4xb2WT"]'
2026-02-02 04:49:25.531 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:49:25.531 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28573/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-02 04:49:25.534 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:49:25.534 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5434/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-02 04:49:25.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:49:25.537 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28573/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:49:25.542 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:49:25.542 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:49:25.643 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-02 04:49:25.644 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28573/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:49:25.647 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770007765537626529,"ephemeral":false,"proof":""}]'
2026-02-02 04:49:25.648 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:49:25.649 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:49:25.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770007765537626529,"ephemeral":false,"proof":""}]'
2026-02-02 04:49:25.654 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:49:25.655 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:49:25.655 DEBUG [src.node.waku_node] Stopping container with id 79178f17d00d
2026-02-02 04:49:26.198 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:49:26.198 DEBUG [src.node.waku_node] Stopping container with id 6eae571560da
2026-02-02 04:49:26.719 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:49:26.722 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:49:26.726 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:49:26.732 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
