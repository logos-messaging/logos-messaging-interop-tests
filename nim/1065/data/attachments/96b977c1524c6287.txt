2026-02-02 04:39:22.967 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:39:22.968 DEBUG [tests.conftest] Running test: test_filter with id: 2026-02-02_04-39-22__e7178a9e-655e-43d3-b3e4-7399804c4974
2026-02-02 04:39:22.968 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:39:22.968 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-02 04:39:22.968 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-02 04:39:22.969 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-02 04:39:22.969 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-02 04:39:22.979 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:39:22.979 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-39-22__e7178a9e-655e-43d3-b3e4-7399804c4974__wakuorg_nwaku:latest.log
2026-02-02 04:39:22.979 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:39:22.979 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:39:23.021 DEBUG [src.node.docker_mananger] Network waku created
2026-02-02 04:39:23.021 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.22.222
2026-02-02 04:39:23.021 DEBUG [src.node.docker_mananger] Generated ports ['53335', '53336', '53337', '53338', '53339']
2026-02-02 04:39:23.021 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:39:23.022 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:39:23.022 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:39:23.022 DEBUG [src.node.docker_mananger] docker run -i -t -p 53335:53335 -p 53336:53336 -p 53337:53337 -p 53338:53338 -p 53339:53339 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53337 --rest-port=53335 --tcp-port=53336 --discv5-udp-port=53338 --rest-address=0.0.0.0 --nat=extip:172.18.22.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0107debdaa1f5554a6154e2caead7b5d4abc1b740f4040eb8ecda7ec11be58ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53339 --metrics-logging=true --relay=true --filter=true
2026-02-02 04:39:25.609 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.22.222 waku 297a127680aba2a02e74e0c434c2ff87c984aff6c9daa8cde084c16206168188
2026-02-02 04:39:25.639 DEBUG [src.node.docker_mananger] Container started with ID 297a127680ab. Setting up logs at ./log/docker/node1_2026-02-02_04-39-22__e7178a9e-655e-43d3-b3e4-7399804c4974__wakuorg_nwaku:latest.log
2026-02-02 04:39:25.640 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53335
2026-02-02 04:39:25.640 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:39:26.640 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53335/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:26.644 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:39:26.644 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:39:26.644 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53335/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:26.647 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.222/tcp/53336/p2p/16Uiu2HAmR8fmvt8C3ZyGqYF6BUCsgs5MWZSu5J1oV2cCcRbYpkGZ","/ip4/172.18.22.222/tcp/53337/ws/p2p/16Uiu2HAmR8fmvt8C3ZyGqYF6BUCsgs5MWZSu5J1oV2cCcRbYpkGZ"],"enrUri":"enr:-L24QF_EYyPQ5yQYLH8Z7dAZ9BrZTvvezer9KCR22j2RKDEkbB1nc7Ix92R8OrQCPBMbLyR3ipr-RAVONL2Hq2q2UtYCgmlkgnY0gmlwhKwSFt6KbXVsdGlhZGRyc5YACASsEhbeBtBYAAoErBIW3gbQWd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuWOAtIYW1arHYiWpAfLIZzOzU-wlmLQm1px4Q-WH3JqDdGNwgtBYg3VkcILQWoV3YWt1MgU"}'
2026-02-02 04:39:26.647 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:39:26.653 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:39:26.653 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-39-22__e7178a9e-655e-43d3-b3e4-7399804c4974__wakuorg_nwaku:latest.log
2026-02-02 04:39:26.654 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:39:26.654 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:39:26.655 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:39:26.655 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.166.167
2026-02-02 04:39:26.655 DEBUG [src.node.docker_mananger] Generated ports ['27176', '27177', '27178', '27179', '27180']
2026-02-02 04:39:26.656 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:39:26.656 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:39:26.656 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:39:26.656 DEBUG [src.node.docker_mananger] docker run -i -t -p 27176:27176 -p 27177:27177 -p 27178:27178 -p 27179:27179 -p 27180:27180 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27178 --rest-port=27176 --tcp-port=27177 --discv5-udp-port=27179 --rest-address=0.0.0.0 --nat=extip:172.18.166.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6eaf7a82bf77bebebeeb08adf5aeaf0d9e4cee861a7772b074d930e3a8f308b4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27180 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QF_EYyPQ5yQYLH8Z7dAZ9BrZTvvezer9KCR22j2RKDEkbB1nc7Ix92R8OrQCPBMbLyR3ipr-RAVONL2Hq2q2UtYCgmlkgnY0gmlwhKwSFt6KbXVsdGlhZGRyc5YACASsEhbeBtBYAAoErBIW3gbQWd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuWOAtIYW1arHYiWpAfLIZzOzU-wlmLQm1px4Q-WH3JqDdGNwgtBYg3VkcILQWoV3YWt1MgU --filternode=/ip4/172.18.22.222/tcp/53336/p2p/16Uiu2HAmR8fmvt8C3ZyGqYF6BUCsgs5MWZSu5J1oV2cCcRbYpkGZ
2026-02-02 04:39:26.836 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.166.167 waku c3180f9b3fda2f413e696ac26c50f8a8566f03453d6a441cd06556f9e5864d54
2026-02-02 04:39:26.869 DEBUG [src.node.docker_mananger] Container started with ID c3180f9b3fda. Setting up logs at ./log/docker/node1_2026-02-02_04-39-22__e7178a9e-655e-43d3-b3e4-7399804c4974__wakuorg_nwaku:latest.log
2026-02-02 04:39:26.869 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27176
2026-02-02 04:39:26.870 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:39:27.870 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27176/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:27.875 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-02 04:39:27.875 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:39:27.875 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27176/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:27.877 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.166.167/tcp/27177/p2p/16Uiu2HAkvBM4KbjYfkHxTLtj5Cyuv6tAe5oY51EFBwf5AnLZxGPq","/ip4/172.18.166.167/tcp/27178/ws/p2p/16Uiu2HAkvBM4KbjYfkHxTLtj5Cyuv6tAe5oY51EFBwf5AnLZxGPq"],"enrUri":"enr:-L24QM_UJ13UnP8XU4nn1P0_wfZ41M9dIeZ1ELKqVOi-MyD2MyUQklhWLa1nHmjnVIdts6dzDa1UA9Og746xrFzjGBYCgmlkgnY0gmlwhKwSpqeKbXVsdGlhZGRyc5YACASsEqanBmopAAoErBKmpwZqKt0DgnJzhQADAQAAiXNlY3AyNTZrMaECCzApFrq7W7tnN9NdB9oA_xOfQgJZ9lj38VYIbVcLpYCDdGNwgmopg3VkcIJqK4V3YWt1MgA"}'
2026-02-02 04:39:27.878 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:39:27.878 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53335/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:39:27.889 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:39:27.890 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27176/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d41e265f-29fa-445b-9686-6e21a5aa1db1", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:39:27.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d41e265f-29fa-445b-9686-6e21a5aa1db1","statusDesc":"OK"}'
2026-02-02 04:39:27.926 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53335/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:39:27.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:39:27.939 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:39:28.040 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:39:28.041 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27176/filter/v2/messages/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:39:28.043 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770007167925954097,"ephemeral":false}]'
2026-02-02 04:39:28.047 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:39:28.048 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:39:28.048 DEBUG [src.node.waku_node] Stopping container with id 297a127680ab
2026-02-02 04:39:28.585 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:39:28.585 DEBUG [src.node.waku_node] Stopping container with id c3180f9b3fda
2026-02-02 04:39:29.054 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:39:29.057 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:39:29.062 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:39:29.067 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
