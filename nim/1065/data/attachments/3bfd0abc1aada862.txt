2026-02-02 04:41:23.094 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:41:23.094 DEBUG [tests.conftest] Running test: test_message_published_on_different_pubsub_topic_is_not_retrieved with id: 2026-02-02_04-41-23__aebe7ca6-c323-4813-94c4-52966550e017
2026-02-02 04:41:23.095 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:41:23.095 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-02 04:41:23.095 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-02 04:41:23.102 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:41:23.102 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-41-23__aebe7ca6-c323-4813-94c4-52966550e017__wakuorg_nwaku:latest.log
2026-02-02 04:41:23.102 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:41:23.103 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:41:23.104 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:41:23.104 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.68.10
2026-02-02 04:41:23.105 DEBUG [src.node.docker_mananger] Generated ports ['20777', '20778', '20779', '20780', '20781']
2026-02-02 04:41:23.105 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:41:23.105 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:41:23.105 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:41:23.105 DEBUG [src.node.docker_mananger] docker run -i -t -p 20777:20777 -p 20778:20778 -p 20779:20779 -p 20780:20780 -p 20781:20781 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20779 --rest-port=20777 --tcp-port=20778 --discv5-udp-port=20780 --rest-address=0.0.0.0 --nat=extip:172.18.68.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=850d9a5f4ad5674abc9e6dbbc0496ecce41fc47aceaaaa31b21fe8f9f0fd52cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20781 --metrics-logging=true --relay=true
2026-02-02 04:41:23.297 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.68.10 waku 2c463c2bcb086e818a5cb791b35d4c119c61bde561bab645ff66d14b5ba613d4
2026-02-02 04:41:23.334 DEBUG [src.node.docker_mananger] Container started with ID 2c463c2bcb08. Setting up logs at ./log/docker/node1_2026-02-02_04-41-23__aebe7ca6-c323-4813-94c4-52966550e017__wakuorg_nwaku:latest.log
2026-02-02 04:41:23.334 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20777
2026-02-02 04:41:23.335 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:41:23.369 ERROR [src.node.docker_mananger] Max retries reached for container b0e5eaca2519. Exiting log stream.
2026-02-02 04:41:23.898 ERROR [src.node.docker_mananger] Max retries reached for container 69798642316a. Exiting log stream.
2026-02-02 04:41:24.335 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20777/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:24.339 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:41:24.339 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:41:24.339 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20777/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:24.341 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.10/tcp/20778/p2p/16Uiu2HAmS9LN9xp1znDxRQVwUbmDF3zZjrxKMS2jBEqtUhBreMqC","/ip4/172.18.68.10/tcp/20779/ws/p2p/16Uiu2HAmS9LN9xp1znDxRQVwUbmDF3zZjrxKMS2jBEqtUhBreMqC"],"enrUri":"enr:-L24QBoX9V23eBEh_P9WEweX9h0F_cr-AcB-u8AcFmo8KG7rElSKj_Rc7yN2zP5POQCTmasU-COvKyIir03-gVUjeZcCgmlkgnY0gmlwhKwSRAqKbXVsdGlhZGRyc5YACASsEkQKBlEqAAoErBJECgZRK90DgnJzhQADAQAAiXNlY3AyNTZrMaEDyGrS2iCm0euEtQoyn8iP1DQk-hOUyGN1s5swx8ncvlODdGNwglEqg3VkcIJRLIV3YWt1MgE"}'
2026-02-02 04:41:24.342 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:41:24.348 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:41:24.349 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-41-23__aebe7ca6-c323-4813-94c4-52966550e017__wakuorg_nwaku:latest.log
2026-02-02 04:41:24.349 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:41:24.349 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:41:24.350 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:41:24.351 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.111.237
2026-02-02 04:41:24.351 DEBUG [src.node.docker_mananger] Generated ports ['34394', '34395', '34396', '34397', '34398']
2026-02-02 04:41:24.351 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:41:24.351 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:41:24.351 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:41:24.351 DEBUG [src.node.docker_mananger] docker run -i -t -p 34394:34394 -p 34395:34395 -p 34396:34396 -p 34397:34397 -p 34398:34398 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34396 --rest-port=34394 --tcp-port=34395 --discv5-udp-port=34397 --rest-address=0.0.0.0 --nat=extip:172.18.111.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3c2bc119dbccfdbd1ed6afc036e29739b0f9a94b12d5aa4ff8cea757fcb7f89a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34398 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBoX9V23eBEh_P9WEweX9h0F_cr-AcB-u8AcFmo8KG7rElSKj_Rc7yN2zP5POQCTmasU-COvKyIir03-gVUjeZcCgmlkgnY0gmlwhKwSRAqKbXVsdGlhZGRyc5YACASsEkQKBlEqAAoErBJECgZRK90DgnJzhQADAQAAiXNlY3AyNTZrMaEDyGrS2iCm0euEtQoyn8iP1DQk-hOUyGN1s5swx8ncvlODdGNwglEqg3VkcIJRLIV3YWt1MgE
2026-02-02 04:41:24.544 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.111.237 waku 2febda22267a7a1186c8ca76db1febfbc25df8e95550fe84712b20293da53da4
2026-02-02 04:41:24.578 DEBUG [src.node.docker_mananger] Container started with ID 2febda22267a. Setting up logs at ./log/docker/node2_2026-02-02_04-41-23__aebe7ca6-c323-4813-94c4-52966550e017__wakuorg_nwaku:latest.log
2026-02-02 04:41:24.579 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34394
2026-02-02 04:41:24.580 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:41:25.581 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34394/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:25.594 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:41:25.597 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:41:25.597 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34394/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:25.603 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.111.237/tcp/34395/p2p/16Uiu2HAkvs3HbVqgAM7FqsmNResxghxNGjzc6AWt2ogU9xr3kEB1","/ip4/172.18.111.237/tcp/34396/ws/p2p/16Uiu2HAkvs3HbVqgAM7FqsmNResxghxNGjzc6AWt2ogU9xr3kEB1"],"enrUri":"enr:-L24QElStvjvkuISP00wzjz1HfSSu2Ce2KsXhKCMSnPwR5-rW5tEofWpV93sifyuqBC4XYGWye7XDCfhzBu-Vq49e8MCgmlkgnY0gmlwhKwSb-2KbXVsdGlhZGRyc5YACASsEm_tBoZbAAoErBJv7QaGXN0DgnJzhQADAQAAiXNlY3AyNTZrMaECFVtMidrY7evaxB8hpsP5UbNahkre37wJkrYVHuk4HFCDdGNwgoZbg3VkcIKGXYV3YWt1MgE"}'
2026-02-02 04:41:25.603 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:41:25.603 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34394/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.10/tcp/20778/p2p/16Uiu2HAmS9LN9xp1znDxRQVwUbmDF3zZjrxKMS2jBEqtUhBreMqC"]'
2026-02-02 04:41:25.606 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:25.607 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-02 04:41:25.607 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20777/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:41:25.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:25.611 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34394/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:41:25.615 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:25.616 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20777/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:41:25.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:25.623 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:41:25.724 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-02 04:41:25.724 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20777/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:25.727 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770007285616832000,"ephemeral":false,"proof":""}]'
2026-02-02 04:41:25.729 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:41:25.729 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34394/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:25.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770007285616832000,"ephemeral":false,"proof":""}]'
2026-02-02 04:41:25.733 INFO [src.steps.relay] WARM UP successful!!
2026-02-02 04:41:25.734 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20777/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2026-02-02 04:41:25.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:25.739 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34394/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2026-02-02 04:41:25.747 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:25.749 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20777/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:41:25.757 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:41:25.758 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:41:25.858 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34394/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:41:25.861 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2026-02-02 04:41:25.863 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:41:25.864 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:41:25.864 DEBUG [src.node.waku_node] Stopping container with id 2c463c2bcb08
2026-02-02 04:41:26.411 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:41:26.411 DEBUG [src.node.waku_node] Stopping container with id 2febda22267a
2026-02-02 04:41:26.958 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:41:26.959 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:41:26.967 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:41:26.974 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
