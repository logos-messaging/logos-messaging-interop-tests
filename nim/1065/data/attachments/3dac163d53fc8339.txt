2026-02-02 04:42:30.015 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:42:30.016 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_multiple_overlapping_content_topics with id: 2026-02-02_04-42-30__056abee5-d80d-4bff-b4d8-aa62be84f178
2026-02-02 04:42:30.016 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:42:30.016 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-02 04:42:30.017 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-02 04:42:30.023 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:42:30.023 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-42-30__056abee5-d80d-4bff-b4d8-aa62be84f178__wakuorg_nwaku:latest.log
2026-02-02 04:42:30.024 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:42:30.024 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:42:30.025 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:42:30.025 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.236.131
2026-02-02 04:42:30.025 DEBUG [src.node.docker_mananger] Generated ports ['14932', '14933', '14934', '14935', '14936']
2026-02-02 04:42:30.025 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:42:30.026 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:42:30.026 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:42:30.026 DEBUG [src.node.docker_mananger] docker run -i -t -p 14932:14932 -p 14933:14933 -p 14934:14934 -p 14935:14935 -p 14936:14936 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14934 --rest-port=14932 --tcp-port=14933 --discv5-udp-port=14935 --rest-address=0.0.0.0 --nat=extip:172.18.236.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfecd1227f50453e2a29f2843bfa5f5cad193b8f8c5fe5eff070bbd8facb0d8c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14936 --metrics-logging=true --relay=true --filter=true
2026-02-02 04:42:30.210 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.236.131 waku 8bf0f16d5abcc42e5d0818a739e8f9674a172f0b583d584e56c18a007ee882e5
2026-02-02 04:42:30.239 DEBUG [src.node.docker_mananger] Container started with ID 8bf0f16d5abc. Setting up logs at ./log/docker/node1_2026-02-02_04-42-30__056abee5-d80d-4bff-b4d8-aa62be84f178__wakuorg_nwaku:latest.log
2026-02-02 04:42:30.240 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14932
2026-02-02 04:42:30.240 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:42:30.301 ERROR [src.node.docker_mananger] Max retries reached for container 2489852d7ced. Exiting log stream.
2026-02-02 04:42:30.819 ERROR [src.node.docker_mananger] Max retries reached for container 71e8a74f877f. Exiting log stream.
2026-02-02 04:42:31.241 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14932/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:31.244 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:42:31.244 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:42:31.244 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14932/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:31.247 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.236.131/tcp/14933/p2p/16Uiu2HAmQmPDD6hnzxnCrywTcvA9BmxJHKUvrvGqMHH8zs2kH4r8","/ip4/172.18.236.131/tcp/14934/ws/p2p/16Uiu2HAmQmPDD6hnzxnCrywTcvA9BmxJHKUvrvGqMHH8zs2kH4r8"],"enrUri":"enr:-L24QCOib3fdyLOuX4HtEz7k2nKqZp3cZwvfwY8JBIugH7r2Fb1g4I49A0ax3BblSq2Kaw_UnBypvY2B1PdAPLCI3tgCgmlkgnY0gmlwhKwS7IOKbXVsdGlhZGRyc5YACASsEuyDBjpVAAoErBLsgwY6Vt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDs--Tnb7yb1qk6hOdI_Q6GxjBlFuozLUX6A_PuadZEl2DdGNwgjpVg3VkcII6V4V3YWt1MgU"}'
2026-02-02 04:42:31.247 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:42:31.247 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-02 04:42:31.254 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:42:31.254 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-42-30__056abee5-d80d-4bff-b4d8-aa62be84f178__wakuorg_nwaku:latest.log
2026-02-02 04:42:31.254 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:42:31.254 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:42:31.256 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:42:31.256 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.28.92
2026-02-02 04:42:31.256 DEBUG [src.node.docker_mananger] Generated ports ['28363', '28364', '28365', '28366', '28367']
2026-02-02 04:42:31.256 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:42:31.256 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:42:31.256 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:42:31.256 DEBUG [src.node.docker_mananger] docker run -i -t -p 28363:28363 -p 28364:28364 -p 28365:28365 -p 28366:28366 -p 28367:28367 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28365 --rest-port=28363 --tcp-port=28364 --discv5-udp-port=28366 --rest-address=0.0.0.0 --nat=extip:172.18.28.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8bf454a09c0ed83b45dbc2f40b4fd6659da0b19d6fcbabb7da46ddeb4bf8bbcd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28367 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QCOib3fdyLOuX4HtEz7k2nKqZp3cZwvfwY8JBIugH7r2Fb1g4I49A0ax3BblSq2Kaw_UnBypvY2B1PdAPLCI3tgCgmlkgnY0gmlwhKwS7IOKbXVsdGlhZGRyc5YACASsEuyDBjpVAAoErBLsgwY6Vt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDs--Tnb7yb1qk6hOdI_Q6GxjBlFuozLUX6A_PuadZEl2DdGNwgjpVg3VkcII6V4V3YWt1MgU --filternode=/ip4/172.18.236.131/tcp/14933/p2p/16Uiu2HAmQmPDD6hnzxnCrywTcvA9BmxJHKUvrvGqMHH8zs2kH4r8
2026-02-02 04:42:31.457 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.28.92 waku 839faea50f53af58b3e2f05d381c0d8ce34ba09722f502af31fb669a1ef89b22
2026-02-02 04:42:31.487 DEBUG [src.node.docker_mananger] Container started with ID 839faea50f53. Setting up logs at ./log/docker/node2_2026-02-02_04-42-30__056abee5-d80d-4bff-b4d8-aa62be84f178__wakuorg_nwaku:latest.log
2026-02-02 04:42:31.488 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28363
2026-02-02 04:42:31.488 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:42:32.489 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28363/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:32.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-02 04:42:32.493 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:42:32.493 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28363/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:32.495 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.92/tcp/28364/p2p/16Uiu2HAm4r8jjsEpRNUAE9zB4XdPAtcShss96gBMXwwAnsHV62BJ","/ip4/172.18.28.92/tcp/28365/ws/p2p/16Uiu2HAm4r8jjsEpRNUAE9zB4XdPAtcShss96gBMXwwAnsHV62BJ"],"enrUri":"enr:-L24QMmZX-Ka5P6G0KZAgRk97joj6BT20U6ZikFSf8ucy-TiH5ETl3X-NN9FzOaypQFYapoBfoppMDtS10qg8QBm7R0CgmlkgnY0gmlwhKwSHFyKbXVsdGlhZGRyc5YACASsEhxcBm7MAAoErBIcXAZuzd0DgnJzhQADAQAAiXNlY3AyNTZrMaECi_1gdIvuRrIwCwW2TSKKQXCxNlvgSkDwh6Kmqh3NGAGDdGNwgm7Mg3VkcIJuzoV3YWt1MgA"}'
2026-02-02 04:42:32.495 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:42:32.495 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28363/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.236.131/tcp/14933/p2p/16Uiu2HAmQmPDD6hnzxnCrywTcvA9BmxJHKUvrvGqMHH8zs2kH4r8"]'
2026-02-02 04:42:32.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:32.531 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14932/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:42:32.543 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:32.547 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28363/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "221a2b19-5514-421c-938b-e460c8a4b1a9", "contentFilters": ["Hello World!", "1234567890", "{\"key\": \"value\"}"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:42:32.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"221a2b19-5514-421c-938b-e460c8a4b1a9","statusDesc":"OK"}'
2026-02-02 04:42:32.559 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14932/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:42:32.561 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:32.562 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28363/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d555016b-66aa-4766-a896-23e91f13ff4b", "contentFilters": ["1234567890", "{\"key\": \"value\"}", "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:42:32.571 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d555016b-66aa-4766-a896-23e91f13ff4b","statusDesc":"OK"}'
2026-02-02 04:42:32.572 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14932/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:42:32.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:32.581 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:42:32.681 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:42:32.682 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28363/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:32.685 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"Hello World!","version":0,"timestamp":1770007352572569238,"ephemeral":false}]'
2026-02-02 04:42:32.686 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14932/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:42:32.691 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:32.691 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:42:32.792 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:42:32.792 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28363/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:32.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1770007352686784766,"ephemeral":false}]'
2026-02-02 04:42:32.797 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14932/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "{\"key\": \"value\"}", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:42:32.802 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:32.802 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:42:32.902 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:42:32.903 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28363/filter/v2/messages/%7B%22key%22%3A%20%22value%22%7D" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:32.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"{\\"key\\": \\"value\\"}","version":0,"timestamp":1770007352796978176,"ephemeral":false}]'
2026-02-02 04:42:32.908 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14932/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587", "timestamp": '$(date +%s%N)'}'
2026-02-02 04:42:32.913 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:42:32.913 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-02 04:42:33.014 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-02 04:42:33.014 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28363/filter/v2/messages/%E8%BF%99%E6%98%AF%E4%B8%80%E4%BA%9B%E4%B8%AD%E6%96%87" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:42:33.017 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xba\x9b\xe4\xb8\xad\xe6\x96\x87","version":0,"timestamp":1770007352907981087,"ephemeral":false}]'
2026-02-02 04:42:33.020 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:42:33.021 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:42:33.021 DEBUG [src.node.waku_node] Stopping container with id 8bf0f16d5abc
2026-02-02 04:42:33.586 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:42:33.586 DEBUG [src.node.waku_node] Stopping container with id 839faea50f53
2026-02-02 04:42:34.131 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:42:34.132 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:42:34.139 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:42:34.145 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
