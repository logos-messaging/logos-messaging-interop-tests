2026-02-02 04:46:47.702 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-02 04:46:47.702 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_invalid_request_id with id: 2026-02-02_04-46-47__b8313f39-d447-41fc-819d-cd927ce531bc
2026-02-02 04:46:47.702 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-02 04:46:47.703 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-02 04:46:47.703 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-02 04:46:47.709 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:46:47.709 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-02_04-46-47__b8313f39-d447-41fc-819d-cd927ce531bc__wakuorg_nwaku:latest.log
2026-02-02 04:46:47.709 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:46:47.709 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:46:47.711 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:46:47.711 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.225.50
2026-02-02 04:46:47.711 DEBUG [src.node.docker_mananger] Generated ports ['26349', '26350', '26351', '26352', '26353']
2026-02-02 04:46:47.711 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:46:47.711 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:46:47.711 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:46:47.712 DEBUG [src.node.docker_mananger] docker run -i -t -p 26349:26349 -p 26350:26350 -p 26351:26351 -p 26352:26352 -p 26353:26353 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26351 --rest-port=26349 --tcp-port=26350 --discv5-udp-port=26352 --rest-address=0.0.0.0 --nat=extip:172.18.225.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc2efee9323eeadb9f8cc85f49a20dcdafc6642adca9ad0f200bf3a0c5f91fff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26353 --metrics-logging=true --relay=true --filter=true
2026-02-02 04:46:47.895 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.225.50 waku 86ac161f60a26b8a8d104f408da4fa7a2e39d8dc45d641a52beee2f3298680ac
2026-02-02 04:46:47.926 DEBUG [src.node.docker_mananger] Container started with ID 86ac161f60a2. Setting up logs at ./log/docker/node1_2026-02-02_04-46-47__b8313f39-d447-41fc-819d-cd927ce531bc__wakuorg_nwaku:latest.log
2026-02-02 04:46:47.926 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26349
2026-02-02 04:46:47.927 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:46:47.959 ERROR [src.node.docker_mananger] Max retries reached for container cc46e499644d. Exiting log stream.
2026-02-02 04:46:48.505 ERROR [src.node.docker_mananger] Max retries reached for container 60137cba44cd. Exiting log stream.
2026-02-02 04:46:48.928 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26349/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:46:48.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-02 04:46:48.932 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:46:48.932 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26349/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:46:48.934 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.50/tcp/26350/p2p/16Uiu2HAmGJKiHbac7hrzMy5phi6WQE52Ax8bgiKsaS2Sx6JVKhDu","/ip4/172.18.225.50/tcp/26351/ws/p2p/16Uiu2HAmGJKiHbac7hrzMy5phi6WQE52Ax8bgiKsaS2Sx6JVKhDu"],"enrUri":"enr:-L24QCUo5rvdbrPGnpeLyyjIfvIl3SWs4o8K3nO0r7GurszZAy_UuSranz18koBExEWecUJRzMEnLXtj9xNDz2ewBXQCgmlkgnY0gmlwhKwS4TKKbXVsdGlhZGRyc5YACASsEuEyBmbuAAoErBLhMgZm790DgnJzhQADAQAAiXNlY3AyNTZrMaEDNiNxg-pJJdQwPm69mD_nwJ4-3h3KqMBKyXNJrmjmBHyDdGNwgmbug3VkcIJm8IV3YWt1MgU"}'
2026-02-02 04:46:48.934 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:46:48.934 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-02 04:46:48.941 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-02 04:46:48.941 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-02_04-46-47__b8313f39-d447-41fc-819d-cd927ce531bc__wakuorg_nwaku:latest.log
2026-02-02 04:46:48.941 DEBUG [src.node.waku_node] Starting Node...
2026-02-02 04:46:48.941 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-02 04:46:48.943 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-02 04:46:48.943 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.217.97
2026-02-02 04:46:48.943 DEBUG [src.node.docker_mananger] Generated ports ['25168', '25169', '25170', '25171', '25172']
2026-02-02 04:46:48.943 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-02 04:46:48.943 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-02 04:46:48.943 DEBUG [src.node.waku_node] Using volumes []
2026-02-02 04:46:48.944 DEBUG [src.node.docker_mananger] docker run -i -t -p 25168:25168 -p 25169:25169 -p 25170:25170 -p 25171:25171 -p 25172:25172 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25170 --rest-port=25168 --tcp-port=25169 --discv5-udp-port=25171 --rest-address=0.0.0.0 --nat=extip:172.18.217.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da0f726b6ceba23f0c63c8fb4fb0e0cacf2cdaeedd88caffe7aa564d3456bf97 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25172 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QCUo5rvdbrPGnpeLyyjIfvIl3SWs4o8K3nO0r7GurszZAy_UuSranz18koBExEWecUJRzMEnLXtj9xNDz2ewBXQCgmlkgnY0gmlwhKwS4TKKbXVsdGlhZGRyc5YACASsEuEyBmbuAAoErBLhMgZm790DgnJzhQADAQAAiXNlY3AyNTZrMaEDNiNxg-pJJdQwPm69mD_nwJ4-3h3KqMBKyXNJrmjmBHyDdGNwgmbug3VkcIJm8IV3YWt1MgU --filternode=/ip4/172.18.225.50/tcp/26350/p2p/16Uiu2HAmGJKiHbac7hrzMy5phi6WQE52Ax8bgiKsaS2Sx6JVKhDu
2026-02-02 04:46:49.125 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.217.97 waku 5664daf52d10d3f54bfc465b026704e399f229a4ce8816671bfe9982c5ad190d
2026-02-02 04:46:49.156 DEBUG [src.node.docker_mananger] Container started with ID 5664daf52d10. Setting up logs at ./log/docker/node2_2026-02-02_04-46-47__b8313f39-d447-41fc-819d-cd927ce531bc__wakuorg_nwaku:latest.log
2026-02-02 04:46:49.157 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25168
2026-02-02 04:46:49.158 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-02 04:46:50.158 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25168/health" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:46:50.162 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-02 04:46:50.163 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-02 04:46:50.163 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25168/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-02 04:46:50.165 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.97/tcp/25169/p2p/16Uiu2HAmJzYRz4L4W5ptns8rctvjr9wKy5JSyDbEy98h3SzB36t5","/ip4/172.18.217.97/tcp/25170/ws/p2p/16Uiu2HAmJzYRz4L4W5ptns8rctvjr9wKy5JSyDbEy98h3SzB36t5"],"enrUri":"enr:-L24QG0dhOj5ESTd9pKJaBFVRvCuu8gwc9JBz3viU-EOIpR6ELaOK7An9jriIQ8vPo80-49gPM0HBxxeitpB2qCgb8gCgmlkgnY0gmlwhKwS2WGKbXVsdGlhZGRyc5YACASsEtlhBmJRAAoErBLZYQZiUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXihuU_Cwp4EQvLeXNlLBPALu7ioXiQ_NTD3OnR4udBaDdGNwgmJRg3VkcIJiU4V3YWt1MgA"}'
2026-02-02 04:46:50.166 INFO [src.node.waku_node] REST service is ready !!
2026-02-02 04:46:50.166 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25168/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.50/tcp/26350/p2p/16Uiu2HAmGJKiHbac7hrzMy5phi6WQE52Ax8bgiKsaS2Sx6JVKhDu"]'
2026-02-02 04:46:50.200 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:46:50.200 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-02 04:46:50.201 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26349/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-02 04:46:50.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-02 04:46:50.211 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25168/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "35d40101-9449-48ae-ad4d-e4d168e3ee12", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:46:50.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"35d40101-9449-48ae-ad4d-e4d168e3ee12","statusDesc":"OK"}'
2026-02-02 04:46:50.225 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25168/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-02 04:46:50.228 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25168/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-02 04:46:50.231 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-02 04:46:50.232 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-02 04:46:50.232 DEBUG [src.node.waku_node] Stopping container with id 86ac161f60a2
2026-02-02 04:46:50.782 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:46:50.782 DEBUG [src.node.waku_node] Stopping container with id 5664daf52d10
2026-02-02 04:46:51.299 DEBUG [src.node.waku_node] Container stopped.
2026-02-02 04:46:51.300 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-02 04:46:51.306 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-02 04:46:51.310 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
