2026-02-08 04:49:10.834 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:49:10.834 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2026-02-08_04-49-10__d0f5a258-76dc-4c1c-a913-fb66a574ce45
2026-02-08 04:49:10.834 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:49:10.834 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-08 04:49:10.841 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:49:10.841 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-08_04-49-10__d0f5a258-76dc-4c1c-a913-fb66a574ce45__wakuorg_nwaku:latest.log
2026-02-08 04:49:10.841 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:49:10.841 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:49:10.843 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:49:10.843 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.11.93
2026-02-08 04:49:10.843 DEBUG [src.node.docker_mananger] Generated ports ['2471', '2472', '2473', '2474', '2475']
2026-02-08 04:49:10.843 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:49:10.843 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:49:10.843 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:49:10.844 DEBUG [src.node.docker_mananger] docker run -i -t -p 2471:2471 -p 2472:2472 -p 2473:2473 -p 2474:2474 -p 2475:2475 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2473 --rest-port=2471 --tcp-port=2472 --discv5-udp-port=2474 --rest-address=0.0.0.0 --nat=extip:172.18.11.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b1accbbae0a8f8b9d5f61b280ebccee64dd400ec1c01bdb22a1feacf7b2b1958 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2475 --metrics-logging=true --lightpush=true --relay=true
2026-02-08 04:49:11.016 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.11.93 waku 9f924e38f58b52334d4ca2df655a6b5aae5b0c4f1cd21434c2bb5d8833c77fcf
2026-02-08 04:49:11.051 DEBUG [src.node.docker_mananger] Container started with ID 9f924e38f58b. Setting up logs at ./log/docker/receiving_node1_2026-02-08_04-49-10__d0f5a258-76dc-4c1c-a913-fb66a574ce45__wakuorg_nwaku:latest.log
2026-02-08 04:49:11.052 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2471
2026-02-08 04:49:11.052 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:49:11.101 ERROR [src.node.docker_mananger] Max retries reached for container 4fcb033ac820. Exiting log stream.
2026-02-08 04:49:11.635 ERROR [src.node.docker_mananger] Max retries reached for container 6c86eec33303. Exiting log stream.
2026-02-08 04:49:12.052 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2471/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:49:12.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:49:12.055 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:49:12.056 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2471/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:49:12.058 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.93/tcp/2472/p2p/16Uiu2HAmD9bK2A7Esa6rb8CicXuhkmmTqs4DF12aSasvAzpUNZ5F","/ip4/172.18.11.93/tcp/2473/ws/p2p/16Uiu2HAmD9bK2A7Esa6rb8CicXuhkmmTqs4DF12aSasvAzpUNZ5F"],"enrUri":"enr:-L24QFlGA0LDUsABCnmelKieGMBgPmHInJb5_4oW5-XOZlbndehziYd8VnsuPJ5A0oiwdHXw7hD_7monOfXBxxmjO9MCgmlkgnY0gmlwhKwSC12KbXVsdGlhZGRyc5YACASsEgtdBgmoAAoErBILXQYJqd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDB1PLBPHY0EGTcf8OIwu5Y4OsMdABzgotw58JI25Tq46DdGNwggmog3VkcIIJqoV3YWt1Mgk"}'
2026-02-08 04:49:12.058 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:49:12.065 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:49:12.065 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-08_04-49-10__d0f5a258-76dc-4c1c-a913-fb66a574ce45__wakuorg_nwaku:latest.log
2026-02-08 04:49:12.065 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:49:12.065 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:49:12.067 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:49:12.067 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.125
2026-02-08 04:49:12.067 DEBUG [src.node.docker_mananger] Generated ports ['2436', '2437', '2438', '2439', '2440']
2026-02-08 04:49:12.067 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:49:12.067 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:49:12.067 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:49:12.067 DEBUG [src.node.docker_mananger] docker run -i -t -p 2436:2436 -p 2437:2437 -p 2438:2438 -p 2439:2439 -p 2440:2440 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2438 --rest-port=2436 --tcp-port=2437 --discv5-udp-port=2439 --rest-address=0.0.0.0 --nat=extip:172.18.106.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0df8ac5debbaf0eae7a15cc0bfc35cd9fde8ba2fc851af29e529ffdfae750eab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2440 --metrics-logging=true --lightpush=false --relay=true
2026-02-08 04:49:12.248 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.125 waku 6a2562b37234449d90784608d80f209ddea400eb345dcd03c8b97ebd53f3ddfd
2026-02-08 04:49:12.279 DEBUG [src.node.docker_mananger] Container started with ID 6a2562b37234. Setting up logs at ./log/docker/receiving_node2_2026-02-08_04-49-10__d0f5a258-76dc-4c1c-a913-fb66a574ce45__wakuorg_nwaku:latest.log
2026-02-08 04:49:12.280 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2436
2026-02-08 04:49:12.280 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:49:13.281 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2436/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:49:13.284 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:49:13.284 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:49:13.284 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2436/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:49:13.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.125/tcp/2437/p2p/16Uiu2HAmMyjLkrUQPfB96JLVSLzBaveXrUJ5UgMyPouqNzxFSUYB","/ip4/172.18.106.125/tcp/2438/ws/p2p/16Uiu2HAmMyjLkrUQPfB96JLVSLzBaveXrUJ5UgMyPouqNzxFSUYB"],"enrUri":"enr:-L24QDeBtySW1KsyE5OA-OpiysITaJRBqwpP4QmcL9xno5sTVQbTx1oD1bk4q-hScSthI95L02n-4zSyBweVewMhR-gCgmlkgnY0gmlwhKwSan2KbXVsdGlhZGRyc5YACASsEmp9BgmFAAoErBJqfQYJht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDioY_LAIMc7JyGf9n13vOgjR9Mj8ED9KnkKK7l9bfdMSDdGNwggmFg3VkcIIJh4V3YWt1MgE"}'
2026-02-08 04:49:13.287 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:49:13.287 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2436/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.11.93/tcp/2472/p2p/16Uiu2HAmD9bK2A7Esa6rb8CicXuhkmmTqs4DF12aSasvAzpUNZ5F"]'
2026-02-08 04:49:13.318 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:49:13.328 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:49:13.328 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-08_04-49-10__d0f5a258-76dc-4c1c-a913-fb66a574ce45__wakuorg_nwaku:latest.log
2026-02-08 04:49:13.328 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:49:13.330 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:49:13.334 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:49:13.335 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.3
2026-02-08 04:49:13.335 DEBUG [src.node.docker_mananger] Generated ports ['41951', '41952', '41953', '41954', '41955']
2026-02-08 04:49:13.335 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:49:13.336 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:49:13.336 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:49:13.337 DEBUG [src.node.docker_mananger] docker run -i -t -p 41951:41951 -p 41952:41952 -p 41953:41953 -p 41954:41954 -p 41955:41955 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41953 --rest-port=41951 --tcp-port=41952 --discv5-udp-port=41954 --rest-address=0.0.0.0 --nat=extip:172.18.39.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=838fc4a8e16115ba3ebff57fc0d71da2d97dddbe3b4d2dfe313ffe5b709bffcc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41955 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFlGA0LDUsABCnmelKieGMBgPmHInJb5_4oW5-XOZlbndehziYd8VnsuPJ5A0oiwdHXw7hD_7monOfXBxxmjO9MCgmlkgnY0gmlwhKwSC12KbXVsdGlhZGRyc5YACASsEgtdBgmoAAoErBILXQYJqd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDB1PLBPHY0EGTcf8OIwu5Y4OsMdABzgotw58JI25Tq46DdGNwggmog3VkcIIJqoV3YWt1Mgk --lightpushnode=/ip4/172.18.11.93/tcp/2472/p2p/16Uiu2HAmD9bK2A7Esa6rb8CicXuhkmmTqs4DF12aSasvAzpUNZ5F --lightpush=true --relay=true
2026-02-08 04:49:13.514 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.3 waku e79c2b13a17521c1cc42dd0139e4757de9642ecb6e175cd569cffb2a22ad3cde
2026-02-08 04:49:13.547 DEBUG [src.node.docker_mananger] Container started with ID e79c2b13a175. Setting up logs at ./log/docker/lightpush_node1_2026-02-08_04-49-10__d0f5a258-76dc-4c1c-a913-fb66a574ce45__wakuorg_nwaku:latest.log
2026-02-08 04:49:13.547 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41951
2026-02-08 04:49:13.547 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:49:14.548 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41951/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:49:14.561 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:49:14.566 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:49:14.566 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41951/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:49:14.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.3/tcp/41952/p2p/16Uiu2HAkvFSB5HUYuv7FSiroKNWaqi4whnEaHEX1Mh5tzharbqM9","/ip4/172.18.39.3/tcp/41953/ws/p2p/16Uiu2HAkvFSB5HUYuv7FSiroKNWaqi4whnEaHEX1Mh5tzharbqM9"],"enrUri":"enr:-L24QAWsfSMqY70SCp1jdXvBseoiUSeGI9BDkjaC_3x87IXhYiioZ1qENCWdY18llKvPe3XK80y10LxfKIVC80p1UtMCgmlkgnY0gmlwhKwSJwOKbXVsdGlhZGRyc5YACASsEicDBqPgAAoErBInAwaj4d0DgnJzhQADAQAAiXNlY3AyNTZrMaECDDxE10uxxCNRXWSMGWWrv1AUYQ2Mh04DfEg6WURIadCDdGNwgqPgg3VkcIKj4oV3YWt1Mgk"}'
2026-02-08 04:49:14.581 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:49:14.582 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41951/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.11.93/tcp/2472/p2p/16Uiu2HAmD9bK2A7Esa6rb8CicXuhkmmTqs4DF12aSasvAzpUNZ5F"]'
2026-02-08 04:49:14.585 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:49:14.586 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41951/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.106.125/tcp/2437/p2p/16Uiu2HAmMyjLkrUQPfB96JLVSLzBaveXrUJ5UgMyPouqNzxFSUYB"]'
2026-02-08 04:49:14.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:49:14.610 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2471/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:49:14.615 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:49:14.615 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2436/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:49:14.619 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:49:14.619 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41951/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:49:14.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:49:14.626 DEBUG [src.steps.light_push] Lightpushing message
2026-02-08 04:49:14.627 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41951/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770526154626589144, "version": 2.1}}'
2026-02-08 04:49:14.631 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41951/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-08 04:49:14.634 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:49:14.635 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:49:14.635 DEBUG [src.node.waku_node] Stopping container with id 9f924e38f58b
2026-02-08 04:49:15.210 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:49:15.211 DEBUG [src.node.waku_node] Stopping container with id 6a2562b37234
2026-02-08 04:49:15.715 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:49:15.716 DEBUG [src.node.waku_node] Stopping container with id e79c2b13a175
2026-02-08 04:49:16.023 ERROR [src.node.docker_mananger] Max retries reached for container 9f924e38f58b. Exiting log stream.
2026-02-08 04:49:16.187 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:49:16.189 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:49:16.196 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:49:16.203 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:49:16.210 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
