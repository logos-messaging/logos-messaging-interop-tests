2026-02-08 04:45:48.683 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:45:48.685 DEBUG [tests.conftest] Running test: test_main_node_only_relay__peer_relay_and_store with id: 2026-02-08_04-45-48__eeb649f4-c273-4e6c-abdf-89e62372b78f
2026-02-08 04:45:48.686 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:45:48.687 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-08 04:45:48.698 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:45:48.700 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-08_04-45-48__eeb649f4-c273-4e6c-abdf-89e62372b78f__wakuorg_nwaku:latest.log
2026-02-08 04:45:48.700 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:45:48.701 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:45:48.705 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:45:48.705 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.169.34
2026-02-08 04:45:48.706 DEBUG [src.node.docker_mananger] Generated ports ['62279', '62280', '62281', '62282', '62283']
2026-02-08 04:45:48.706 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:45:48.706 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:45:48.706 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:45:48.707 DEBUG [src.node.docker_mananger] docker run -i -t -p 62279:62279 -p 62280:62280 -p 62281:62281 -p 62282:62282 -p 62283:62283 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62281 --rest-port=62279 --tcp-port=62280 --discv5-udp-port=62282 --rest-address=0.0.0.0 --nat=extip:172.18.169.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1acad3cfea6905ffcf73bcae05bb4e2b80baef6b7c1cb67aa8645ddc4816cf6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62283 --metrics-logging=true --store=false --relay=true
2026-02-08 04:45:48.898 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.169.34 waku 64a2be0c963aea227060798137e6f6b62d6caf7250a5c4fb08f9e8f7019bbe9a
2026-02-08 04:45:48.910 ERROR [src.node.docker_mananger] Max retries reached for container 0b8099d7897f. Exiting log stream.
2026-02-08 04:45:48.940 DEBUG [src.node.docker_mananger] Container started with ID 64a2be0c963a. Setting up logs at ./log/docker/publishing_node1_2026-02-08_04-45-48__eeb649f4-c273-4e6c-abdf-89e62372b78f__wakuorg_nwaku:latest.log
2026-02-08 04:45:48.941 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62279
2026-02-08 04:45:48.941 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:45:49.524 ERROR [src.node.docker_mananger] Max retries reached for container 3571d6e19092. Exiting log stream.
2026-02-08 04:45:49.942 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62279/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:49.946 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:45:49.946 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:45:49.946 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62279/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:49.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.34/tcp/62280/p2p/16Uiu2HAmAf2G1PwPK4WML2jUBD3v9AESDE6oKAF1k1f5eYF92Lx8","/ip4/172.18.169.34/tcp/62281/ws/p2p/16Uiu2HAmAf2G1PwPK4WML2jUBD3v9AESDE6oKAF1k1f5eYF92Lx8"],"enrUri":"enr:-L24QHhKfgDgUXoT58BZYEfYEE-zKZyThpUftTSk2eahbZjuWzox0xOSzTxfxP8JkDbcl7LaEJ9TTNalW8RDNCxjCqUCgmlkgnY0gmlwhKwSqSKKbXVsdGlhZGRyc5YACASsEqkiBvNIAAoErBKpIgbzSd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4krI2hctSBLnLi_7GASzwHGKYCTEFjQdhOf-b4Th9dGDdGNwgvNIg3VkcILzSoV3YWt1MgE"}'
2026-02-08 04:45:49.949 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:45:49.957 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:45:49.957 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-08_04-45-48__eeb649f4-c273-4e6c-abdf-89e62372b78f__wakuorg_nwaku:latest.log
2026-02-08 04:45:49.957 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:45:49.957 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:45:49.959 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:45:49.959 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.203.138
2026-02-08 04:45:49.959 DEBUG [src.node.docker_mananger] Generated ports ['60721', '60722', '60723', '60724', '60725']
2026-02-08 04:45:49.959 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:45:49.959 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:45:49.959 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:45:49.959 DEBUG [src.node.docker_mananger] docker run -i -t -p 60721:60721 -p 60722:60722 -p 60723:60723 -p 60724:60724 -p 60725:60725 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60723 --rest-port=60721 --tcp-port=60722 --discv5-udp-port=60724 --rest-address=0.0.0.0 --nat=extip:172.18.203.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f4f1f5d6ed7cba2f1d8abba9fc2ace9cde3fedacec51dffd607c280de9fdac8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60725 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHhKfgDgUXoT58BZYEfYEE-zKZyThpUftTSk2eahbZjuWzox0xOSzTxfxP8JkDbcl7LaEJ9TTNalW8RDNCxjCqUCgmlkgnY0gmlwhKwSqSKKbXVsdGlhZGRyc5YACASsEqkiBvNIAAoErBKpIgbzSd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4krI2hctSBLnLi_7GASzwHGKYCTEFjQdhOf-b4Th9dGDdGNwgvNIg3VkcILzSoV3YWt1MgE --storenode=/ip4/172.18.169.34/tcp/62280/p2p/16Uiu2HAmAf2G1PwPK4WML2jUBD3v9AESDE6oKAF1k1f5eYF92Lx8 --store=true --relay=true
2026-02-08 04:45:50.153 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.203.138 waku 8ad775a85e85c9891b5bdc83660e3b863df38bdc02a8e2bff9d9c144a2acb59c
2026-02-08 04:45:50.186 DEBUG [src.node.docker_mananger] Container started with ID 8ad775a85e85. Setting up logs at ./log/docker/store_node1_2026-02-08_04-45-48__eeb649f4-c273-4e6c-abdf-89e62372b78f__wakuorg_nwaku:latest.log
2026-02-08 04:45:50.186 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60721
2026-02-08 04:45:50.187 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:45:51.187 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60721/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:51.191 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:45:51.192 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:45:51.192 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60721/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:51.194 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.138/tcp/60722/p2p/16Uiu2HAmK4hF6YWVyGwHJEhTrPm7ztV31DcCL7t4TSxm1SfRi5sL","/ip4/172.18.203.138/tcp/60723/ws/p2p/16Uiu2HAmK4hF6YWVyGwHJEhTrPm7ztV31DcCL7t4TSxm1SfRi5sL"],"enrUri":"enr:-L24QJoKY3qVarNTNzgSmgiygVdzvUr9IqwsLP5qimh5JPpme-EzgG44TDxyoUCN4U9yutGnROXP_HRDRlr7rO2echsCgmlkgnY0gmlwhKwSy4qKbXVsdGlhZGRyc5YACASsEsuKBu0yAAoErBLLigbtM90DgnJzhQADAQAAiXNlY3AyNTZrMaEDXzi34MJTeiLmBIxnt015J24Ul730XxqFJi_rsFp7Qd-DdGNwgu0yg3VkcILtNIV3YWt1MgM"}'
2026-02-08 04:45:51.194 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:45:51.195 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60721/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.169.34/tcp/62280/p2p/16Uiu2HAmAf2G1PwPK4WML2jUBD3v9AESDE6oKAF1k1f5eYF92Lx8"]'
2026-02-08 04:45:51.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:51.198 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62279/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:45:51.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:51.201 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60721/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:45:51.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:51.204 DEBUG [src.steps.store] Relaying message
2026-02-08 04:45:51.204 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62279/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:45:51.208 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:51.209 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-08 04:45:51.410 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-08 04:45:51.410 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60721/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:51.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc11417b93a008ebd51002db4e6b728fb5cbd725d44ec333d50d910b78ad22912"}]}'
2026-02-08 04:45:51.414 DEBUG [src.steps.store] messages length is 1
2026-02-08 04:45:51.416 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:45:51.417 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:45:51.417 DEBUG [src.node.waku_node] Stopping container with id 64a2be0c963a
2026-02-08 04:45:51.981 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:45:51.982 DEBUG [src.node.waku_node] Stopping container with id 8ad775a85e85
2026-02-08 04:45:52.558 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:45:52.559 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:45:52.565 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:45:52.574 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
