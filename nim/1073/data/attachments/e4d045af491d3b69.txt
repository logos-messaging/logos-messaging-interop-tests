2026-02-08 04:50:41.028 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:50:41.028 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_pubsub_topic with id: 2026-02-08_04-50-41__b18c762e-d2a5-4f90-8346-ade6929c0361
2026-02-08 04:50:41.029 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:50:41.029 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-08 04:50:41.029 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-08 04:50:41.036 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:50:41.036 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-08_04-50-41__b18c762e-d2a5-4f90-8346-ade6929c0361__wakuorg_nwaku:latest.log
2026-02-08 04:50:41.036 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:50:41.036 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:50:41.037 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:50:41.038 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.178.8
2026-02-08 04:50:41.038 DEBUG [src.node.docker_mananger] Generated ports ['10322', '10323', '10324', '10325', '10326']
2026-02-08 04:50:41.038 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:50:41.038 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:50:41.038 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:50:41.038 DEBUG [src.node.docker_mananger] docker run -i -t -p 10322:10322 -p 10323:10323 -p 10324:10324 -p 10325:10325 -p 10326:10326 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10324 --rest-port=10322 --tcp-port=10323 --discv5-udp-port=10325 --rest-address=0.0.0.0 --nat=extip:172.18.178.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=71ce9df94dbb0d9bc7f67a4a1b1f2f51c4275bb4bf549f8da30c9ac3571aa63f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10326 --metrics-logging=true --relay=true --filter=true
2026-02-08 04:50:41.219 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.178.8 waku f5d69a4d96153144884f2b7c568612376450ab2374e444ee7d828c8686d4e46a
2026-02-08 04:50:41.255 DEBUG [src.node.docker_mananger] Container started with ID f5d69a4d9615. Setting up logs at ./log/docker/node1_2026-02-08_04-50-41__b18c762e-d2a5-4f90-8346-ade6929c0361__wakuorg_nwaku:latest.log
2026-02-08 04:50:41.257 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10322
2026-02-08 04:50:41.257 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:50:41.343 ERROR [src.node.docker_mananger] Max retries reached for container 90b1cf97d849. Exiting log stream.
2026-02-08 04:50:41.833 ERROR [src.node.docker_mananger] Max retries reached for container 0cef0bc2b05f. Exiting log stream.
2026-02-08 04:50:42.258 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10322/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:42.261 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:50:42.261 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:50:42.261 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10322/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:42.263 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.8/tcp/10323/p2p/16Uiu2HAm7jwLkzah3foCTbCq2wr8rkmz68RPHk9FZ7KnksTNCmuE","/ip4/172.18.178.8/tcp/10324/ws/p2p/16Uiu2HAm7jwLkzah3foCTbCq2wr8rkmz68RPHk9FZ7KnksTNCmuE"],"enrUri":"enr:-L24QHgZuyDS8TuA3uysD4ZDEy62zRzjbMa7XXzQYUhPoIvmGWWQw57P3ey73RC7z47iGYgw0aoIKVlo1_UINoZla60CgmlkgnY0gmlwhKwSsgiKbXVsdGlhZGRyc5YACASsErIIBihTAAoErBKyCAYoVN0DgnJzhQADAQAAiXNlY3AyNTZrMaECtvoRJEJaIe-9B5-gNGIwdEpoGZJltEk9EqtIL1JBJ02DdGNwgihTg3VkcIIoVYV3YWt1MgU"}'
2026-02-08 04:50:42.264 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:50:42.264 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-08 04:50:42.270 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:50:42.271 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-08_04-50-41__b18c762e-d2a5-4f90-8346-ade6929c0361__wakuorg_nwaku:latest.log
2026-02-08 04:50:42.271 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:50:42.271 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:50:42.272 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:50:42.272 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.237
2026-02-08 04:50:42.272 DEBUG [src.node.docker_mananger] Generated ports ['59068', '59069', '59070', '59071', '59072']
2026-02-08 04:50:42.273 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:50:42.273 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:50:42.273 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:50:42.273 DEBUG [src.node.docker_mananger] docker run -i -t -p 59068:59068 -p 59069:59069 -p 59070:59070 -p 59071:59071 -p 59072:59072 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59070 --rest-port=59068 --tcp-port=59069 --discv5-udp-port=59071 --rest-address=0.0.0.0 --nat=extip:172.18.107.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbaaf761d7feeacab1bf7edcd6af76df9ee6dbdbd77dab5bb33d2ccbef45fa8b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59072 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHgZuyDS8TuA3uysD4ZDEy62zRzjbMa7XXzQYUhPoIvmGWWQw57P3ey73RC7z47iGYgw0aoIKVlo1_UINoZla60CgmlkgnY0gmlwhKwSsgiKbXVsdGlhZGRyc5YACASsErIIBihTAAoErBKyCAYoVN0DgnJzhQADAQAAiXNlY3AyNTZrMaECtvoRJEJaIe-9B5-gNGIwdEpoGZJltEk9EqtIL1JBJ02DdGNwgihTg3VkcIIoVYV3YWt1MgU --filternode=/ip4/172.18.178.8/tcp/10323/p2p/16Uiu2HAm7jwLkzah3foCTbCq2wr8rkmz68RPHk9FZ7KnksTNCmuE
2026-02-08 04:50:42.451 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.237 waku e4c053a4f3f9f6f9871f61fc8d38b06254212484ce0ab60932db65e8f841d3a5
2026-02-08 04:50:42.482 DEBUG [src.node.docker_mananger] Container started with ID e4c053a4f3f9. Setting up logs at ./log/docker/node2_2026-02-08_04-50-41__b18c762e-d2a5-4f90-8346-ade6929c0361__wakuorg_nwaku:latest.log
2026-02-08 04:50:42.484 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59068
2026-02-08 04:50:42.484 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:50:43.484 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59068/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:43.488 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-08 04:50:43.489 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:50:43.489 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59068/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:43.491 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.237/tcp/59069/p2p/16Uiu2HAm9bY2ESVfVttFtHdsnWrnykHB6JhYweNj7mKq5XMDnMPe","/ip4/172.18.107.237/tcp/59070/ws/p2p/16Uiu2HAm9bY2ESVfVttFtHdsnWrnykHB6JhYweNj7mKq5XMDnMPe"],"enrUri":"enr:-L24QKRTaByuSPhxX4bZzsZbRKcSJJqYJ4IoblGiukGBBSZRJoEPAUPPFGks87h7x8GO9GMu8pc3oa7j-5s-0DGEzMgCgmlkgnY0gmlwhKwSa-2KbXVsdGlhZGRyc5YACASsEmvtBua9AAoErBJr7Qbmvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC0optToIb2hHQbTs54RM2KYm_8MOCPNoQysZ7vY2AW7mDdGNwgua9g3VkcILmv4V3YWt1MgA"}'
2026-02-08 04:50:43.492 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:50:43.492 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59068/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.8/tcp/10323/p2p/16Uiu2HAm7jwLkzah3foCTbCq2wr8rkmz68RPHk9FZ7KnksTNCmuE"]'
2026-02-08 04:50:43.521 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:50:43.522 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-08 04:50:43.527 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10322/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-08 04:50:43.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:50:43.536 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59068/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "14ccd130-923c-4c23-a68c-da7d32dec8a1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-08 04:50:43.548 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"14ccd130-923c-4c23-a68c-da7d32dec8a1","statusDesc":"OK"}'
2026-02-08 04:50:43.550 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:59068/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/9"}'
2026-02-08 04:50:43.556 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:59068/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2026-02-08 04:50:43.558 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10322/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:50:43.566 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:50:43.566 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-08 04:50:43.667 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-08 04:50:43.667 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59068/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:43.669 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770526243558931308,"ephemeral":false}]'
2026-02-08 04:50:43.672 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:50:43.673 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:50:43.673 DEBUG [src.node.waku_node] Stopping container with id f5d69a4d9615
2026-02-08 04:50:44.194 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:50:44.194 DEBUG [src.node.waku_node] Stopping container with id e4c053a4f3f9
2026-02-08 04:50:44.718 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:50:44.722 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:50:44.727 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:50:44.733 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
