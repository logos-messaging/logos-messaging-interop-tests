2026-02-08 04:50:37.438 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:50:37.439 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_invalid_request_id with id: 2026-02-08_04-50-37__859c8e12-2ba5-4a42-9c4a-360cb10c38f3
2026-02-08 04:50:37.439 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:50:37.439 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-08 04:50:37.439 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-08 04:50:37.446 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:50:37.446 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-08_04-50-37__859c8e12-2ba5-4a42-9c4a-360cb10c38f3__wakuorg_nwaku:latest.log
2026-02-08 04:50:37.446 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:50:37.446 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:50:37.448 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:50:37.448 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.147.152
2026-02-08 04:50:37.448 DEBUG [src.node.docker_mananger] Generated ports ['7104', '7105', '7106', '7107', '7108']
2026-02-08 04:50:37.448 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:50:37.448 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:50:37.449 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:50:37.449 DEBUG [src.node.docker_mananger] docker run -i -t -p 7104:7104 -p 7105:7105 -p 7106:7106 -p 7107:7107 -p 7108:7108 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7106 --rest-port=7104 --tcp-port=7105 --discv5-udp-port=7107 --rest-address=0.0.0.0 --nat=extip:172.18.147.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f16c6c0aeddfbad51a370f79a149c5387c03ccce62a02e7ef29156fc85a296eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7108 --metrics-logging=true --relay=true --filter=true
2026-02-08 04:50:37.635 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.147.152 waku 90b1cf97d8497d5ad723abac5743ef41564029c363c3f25301434b1fe6d5d474
2026-02-08 04:50:37.671 DEBUG [src.node.docker_mananger] Container started with ID 90b1cf97d849. Setting up logs at ./log/docker/node1_2026-02-08_04-50-37__859c8e12-2ba5-4a42-9c4a-360cb10c38f3__wakuorg_nwaku:latest.log
2026-02-08 04:50:37.673 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7104
2026-02-08 04:50:37.673 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:50:37.679 ERROR [src.node.docker_mananger] Max retries reached for container 8627d447c87e. Exiting log stream.
2026-02-08 04:50:38.213 ERROR [src.node.docker_mananger] Max retries reached for container 0685b1aac012. Exiting log stream.
2026-02-08 04:50:38.673 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7104/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:38.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:50:38.677 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:50:38.677 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7104/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:38.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.152/tcp/7105/p2p/16Uiu2HAm12mveHaE2k3UoG8WaLLfagvqrNga8dvws2bRrAj8JFsa","/ip4/172.18.147.152/tcp/7106/ws/p2p/16Uiu2HAm12mveHaE2k3UoG8WaLLfagvqrNga8dvws2bRrAj8JFsa"],"enrUri":"enr:-L24QBZiaYi2TePEjPrm-4xhFlbVojprdgqG3yh2OoUMRaxgNcdUjH8O9PC1XxEeQzq-hF8pJA8PFhfYU29rUkVboJcCgmlkgnY0gmlwhKwSk5iKbXVsdGlhZGRyc5YACASsEpOYBhvBAAoErBKTmAYbwt0DgnJzhQADAQAAiXNlY3AyNTZrMaECU0h8Wxs9xwNBw51uOslHBlE8TRdMkBf7OqB7nREsooWDdGNwghvBg3VkcIIbw4V3YWt1MgU"}'
2026-02-08 04:50:38.680 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:50:38.680 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-08 04:50:38.686 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:50:38.687 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-08_04-50-37__859c8e12-2ba5-4a42-9c4a-360cb10c38f3__wakuorg_nwaku:latest.log
2026-02-08 04:50:38.687 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:50:38.687 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:50:38.688 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:50:38.688 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.74.96
2026-02-08 04:50:38.689 DEBUG [src.node.docker_mananger] Generated ports ['49046', '49047', '49048', '49049', '49050']
2026-02-08 04:50:38.689 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:50:38.689 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:50:38.689 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:50:38.689 DEBUG [src.node.docker_mananger] docker run -i -t -p 49046:49046 -p 49047:49047 -p 49048:49048 -p 49049:49049 -p 49050:49050 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49048 --rest-port=49046 --tcp-port=49047 --discv5-udp-port=49049 --rest-address=0.0.0.0 --nat=extip:172.18.74.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2293e5daa68ef7dc07529ee5a6c36accedbd86b11fa3acce3cfdfc5efa9e7ff7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49050 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBZiaYi2TePEjPrm-4xhFlbVojprdgqG3yh2OoUMRaxgNcdUjH8O9PC1XxEeQzq-hF8pJA8PFhfYU29rUkVboJcCgmlkgnY0gmlwhKwSk5iKbXVsdGlhZGRyc5YACASsEpOYBhvBAAoErBKTmAYbwt0DgnJzhQADAQAAiXNlY3AyNTZrMaECU0h8Wxs9xwNBw51uOslHBlE8TRdMkBf7OqB7nREsooWDdGNwghvBg3VkcIIbw4V3YWt1MgU --filternode=/ip4/172.18.147.152/tcp/7105/p2p/16Uiu2HAm12mveHaE2k3UoG8WaLLfagvqrNga8dvws2bRrAj8JFsa
2026-02-08 04:50:38.870 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.74.96 waku 0cef0bc2b05fcc36489e90ee43a29d0f0a3c979a7b91268127074da5063aa5f4
2026-02-08 04:50:38.902 DEBUG [src.node.docker_mananger] Container started with ID 0cef0bc2b05f. Setting up logs at ./log/docker/node2_2026-02-08_04-50-37__859c8e12-2ba5-4a42-9c4a-360cb10c38f3__wakuorg_nwaku:latest.log
2026-02-08 04:50:38.902 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49046
2026-02-08 04:50:38.902 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:50:39.904 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49046/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:39.907 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-08 04:50:39.908 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:50:39.908 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49046/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:39.910 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.96/tcp/49047/p2p/16Uiu2HAmMYhJf4QnVTyNnPpzz5TqvccNbb4C5nadba2RREECrNKq","/ip4/172.18.74.96/tcp/49048/ws/p2p/16Uiu2HAmMYhJf4QnVTyNnPpzz5TqvccNbb4C5nadba2RREECrNKq"],"enrUri":"enr:-L24QPkY-RHPkAA7iFpvExtcmUsYqZpWqaqVy_A4Sch92ItKJq8zy2L1CEXx5tc4KlrtxAZWDwK9mchsaSyEGoQIsMsCgmlkgnY0gmlwhKwSSmCKbXVsdGlhZGRyc5YACASsEkpgBr-XAAoErBJKYAa_mN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhBxsl_gJnIetW5eCKIm85k2wmvtqnsCG-HPohdlzNfCDdGNwgr-Xg3VkcIK_mYV3YWt1MgA"}'
2026-02-08 04:50:39.910 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:50:39.911 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49046/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.152/tcp/7105/p2p/16Uiu2HAm12mveHaE2k3UoG8WaLLfagvqrNga8dvws2bRrAj8JFsa"]'
2026-02-08 04:50:39.941 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:50:39.942 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-08 04:50:39.943 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7104/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-08 04:50:39.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:50:39.957 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49046/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fd60b9fc-1cf4-41b3-a07e-29f0bd3e3298", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-08 04:50:39.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"fd60b9fc-1cf4-41b3-a07e-29f0bd3e3298","statusDesc":"OK"}'
2026-02-08 04:50:39.970 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:49046/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-08 04:50:39.972 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49046/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-08 04:50:39.974 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:50:39.975 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:50:39.976 DEBUG [src.node.waku_node] Stopping container with id 90b1cf97d849
2026-02-08 04:50:40.509 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:50:40.509 DEBUG [src.node.waku_node] Stopping container with id 0cef0bc2b05f
2026-02-08 04:50:41.010 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:50:41.012 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:50:41.021 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:50:41.025 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
