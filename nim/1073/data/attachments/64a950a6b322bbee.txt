2026-02-08 04:44:30.934 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:44:30.934 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2026-02-08_04-44-30__d3262e2c-61a1-499c-bf71-96176edde83a
2026-02-08 04:44:30.934 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:44:30.934 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-08 04:44:30.941 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:44:30.941 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-08_04-44-30__d3262e2c-61a1-499c-bf71-96176edde83a__wakuorg_nwaku:latest.log
2026-02-08 04:44:30.941 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:44:30.941 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:44:30.942 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:44:30.942 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.63.94
2026-02-08 04:44:30.943 DEBUG [src.node.docker_mananger] Generated ports ['36338', '36339', '36340', '36341', '36342']
2026-02-08 04:44:30.943 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:44:30.943 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:44:30.943 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:44:30.943 DEBUG [src.node.docker_mananger] docker run -i -t -p 36338:36338 -p 36339:36339 -p 36340:36340 -p 36341:36341 -p 36342:36342 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36340 --rest-port=36338 --tcp-port=36339 --discv5-udp-port=36341 --rest-address=0.0.0.0 --nat=extip:172.18.63.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=88feadc953d7aaf07c17cd5cd0be0bc1fe267aea83a5ccce3a606e5c1d3f596e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36342 --metrics-logging=true --lightpush=true --relay=true
2026-02-08 04:44:31.123 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.63.94 waku 4500482e1cde8607ca5a7501fe84084456b79d7725bc2146b2a4f7b3b9d01a5f
2026-02-08 04:44:31.153 DEBUG [src.node.docker_mananger] Container started with ID 4500482e1cde. Setting up logs at ./log/docker/receiving_node1_2026-02-08_04-44-30__d3262e2c-61a1-499c-bf71-96176edde83a__wakuorg_nwaku:latest.log
2026-02-08 04:44:31.153 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36338
2026-02-08 04:44:31.153 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:44:31.223 ERROR [src.node.docker_mananger] Max retries reached for container dfbea2a26a37. Exiting log stream.
2026-02-08 04:44:31.717 ERROR [src.node.docker_mananger] Max retries reached for container 177485690ae8. Exiting log stream.
2026-02-08 04:44:32.153 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36338/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:44:32.157 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:44:32.157 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:44:32.157 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36338/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:44:32.159 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.94/tcp/36339/p2p/16Uiu2HAmQYAi7jtnZ6eGQoqrYmPTvrNkb15TLSZpmhzfnru6KdQC","/ip4/172.18.63.94/tcp/36340/ws/p2p/16Uiu2HAmQYAi7jtnZ6eGQoqrYmPTvrNkb15TLSZpmhzfnru6KdQC"],"enrUri":"enr:-L24QJyD9VjvmBqJS1spWT3m16uG7PXZAUM659AwW8R0X-VMWZpfhJVeL01nBeBeOWyXi-8IcXuYRhom_E3uHJwAoTMCgmlkgnY0gmlwhKwSP16KbXVsdGlhZGRyc5YACASsEj9eBo3zAAoErBI_XgaN9N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsIzj-JBVL7VYpq5v4L8Ed8L2J7Zg6iaBRjewPrTSRbGDdGNwgo3zg3VkcIKN9YV3YWt1Mgk"}'
2026-02-08 04:44:32.159 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:44:32.166 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:44:32.166 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-08_04-44-30__d3262e2c-61a1-499c-bf71-96176edde83a__wakuorg_nwaku:latest.log
2026-02-08 04:44:32.166 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:44:32.166 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:44:32.168 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:44:32.168 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.62.251
2026-02-08 04:44:32.168 DEBUG [src.node.docker_mananger] Generated ports ['41302', '41303', '41304', '41305', '41306']
2026-02-08 04:44:32.168 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:44:32.168 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:44:32.168 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:44:32.169 DEBUG [src.node.docker_mananger] docker run -i -t -p 41302:41302 -p 41303:41303 -p 41304:41304 -p 41305:41305 -p 41306:41306 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41304 --rest-port=41302 --tcp-port=41303 --discv5-udp-port=41305 --rest-address=0.0.0.0 --nat=extip:172.18.62.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2675c3ac0aad8e6f6d7e2eb4260069ed0af16fb16cd10f94da59045f6cbe277 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41306 --metrics-logging=true --lightpush=false --relay=true
2026-02-08 04:44:32.346 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.62.251 waku 242a4a7b627b417495eb39ce236f9b14bfc75ccf951d003858c628a6db8ae139
2026-02-08 04:44:32.374 DEBUG [src.node.docker_mananger] Container started with ID 242a4a7b627b. Setting up logs at ./log/docker/receiving_node2_2026-02-08_04-44-30__d3262e2c-61a1-499c-bf71-96176edde83a__wakuorg_nwaku:latest.log
2026-02-08 04:44:32.374 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41302
2026-02-08 04:44:32.374 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:44:33.375 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41302/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:44:33.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:44:33.378 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:44:33.378 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41302/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:44:33.380 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.251/tcp/41303/p2p/16Uiu2HAm6qQpcVqBAG2YgqdxPQUK6eWKQNH5A9WE7TJAzqhuuqoD","/ip4/172.18.62.251/tcp/41304/ws/p2p/16Uiu2HAm6qQpcVqBAG2YgqdxPQUK6eWKQNH5A9WE7TJAzqhuuqoD"],"enrUri":"enr:-L24QM_v6vSieOmjx4LyZnmu4me4AkRb8X4NQq8i1ZO6IDDcacADN5q1gnh3kyYoN8xU1yprG3Fn7dl8aA6Wkuxk6x0CgmlkgnY0gmlwhKwSPvuKbXVsdGlhZGRyc5YACASsEj77BqFXAAoErBI--wahWN0DgnJzhQADAQAAiXNlY3AyNTZrMaECqYVbJ-B43ms7hSCHQ_WO9uiBB6P7ngOZRh95QfXqxxiDdGNwgqFXg3VkcIKhWYV3YWt1MgE"}'
2026-02-08 04:44:33.381 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:44:33.381 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41302/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.94/tcp/36339/p2p/16Uiu2HAmQYAi7jtnZ6eGQoqrYmPTvrNkb15TLSZpmhzfnru6KdQC"]'
2026-02-08 04:44:33.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:44:33.425 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:44:33.425 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-08_04-44-30__d3262e2c-61a1-499c-bf71-96176edde83a__wakuorg_nwaku:latest.log
2026-02-08 04:44:33.425 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:44:33.425 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:44:33.427 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:44:33.427 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.28.15
2026-02-08 04:44:33.428 DEBUG [src.node.docker_mananger] Generated ports ['62982', '62983', '62984', '62985', '62986']
2026-02-08 04:44:33.428 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:44:33.432 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:44:33.432 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:44:33.432 DEBUG [src.node.docker_mananger] docker run -i -t -p 62982:62982 -p 62983:62983 -p 62984:62984 -p 62985:62985 -p 62986:62986 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62984 --rest-port=62982 --tcp-port=62983 --discv5-udp-port=62985 --rest-address=0.0.0.0 --nat=extip:172.18.28.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=358ac38defd41fc0fab53fa2ba7cdee3f073caf550f515aee88fefd4cc40cddd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62986 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJyD9VjvmBqJS1spWT3m16uG7PXZAUM659AwW8R0X-VMWZpfhJVeL01nBeBeOWyXi-8IcXuYRhom_E3uHJwAoTMCgmlkgnY0gmlwhKwSP16KbXVsdGlhZGRyc5YACASsEj9eBo3zAAoErBI_XgaN9N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsIzj-JBVL7VYpq5v4L8Ed8L2J7Zg6iaBRjewPrTSRbGDdGNwgo3zg3VkcIKN9YV3YWt1Mgk --lightpushnode=/ip4/172.18.63.94/tcp/36339/p2p/16Uiu2HAmQYAi7jtnZ6eGQoqrYmPTvrNkb15TLSZpmhzfnru6KdQC --lightpush=true --relay=true
2026-02-08 04:44:33.612 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.28.15 waku cf46217863f5f1a935791255d3f686e682bd215204ae3cebf9da73a475b59c2c
2026-02-08 04:44:33.645 DEBUG [src.node.docker_mananger] Container started with ID cf46217863f5. Setting up logs at ./log/docker/lightpush_node1_2026-02-08_04-44-30__d3262e2c-61a1-499c-bf71-96176edde83a__wakuorg_nwaku:latest.log
2026-02-08 04:44:33.645 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62982
2026-02-08 04:44:33.646 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:44:34.647 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62982/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:44:34.656 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:44:34.658 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:44:34.658 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62982/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:44:34.662 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.15/tcp/62983/p2p/16Uiu2HAmPLPTbj2Zyt1ZDJzBw5cL7z77ocLiGwchbmWPw8p4Z8df","/ip4/172.18.28.15/tcp/62984/ws/p2p/16Uiu2HAmPLPTbj2Zyt1ZDJzBw5cL7z77ocLiGwchbmWPw8p4Z8df"],"enrUri":"enr:-L24QL4BOTId0PYCbwa7p3nv1BHQAW691EzuOtkI31Ce3Q3BRWrKFFQTRVfjd0x-K3aiy7o0KHs48tYZqUDuel5F458CgmlkgnY0gmlwhKwSHA-KbXVsdGlhZGRyc5YACASsEhwPBvYHAAoErBIcDwb2CN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnqymZszOhaq2hvJEiwQvi3zG2SJg4Ie9BMmOLWCUE5qDdGNwgvYHg3VkcIL2CYV3YWt1Mgk"}'
2026-02-08 04:44:34.662 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:44:34.663 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62982/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.94/tcp/36339/p2p/16Uiu2HAmQYAi7jtnZ6eGQoqrYmPTvrNkb15TLSZpmhzfnru6KdQC"]'
2026-02-08 04:44:34.667 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:44:34.667 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62982/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.62.251/tcp/41303/p2p/16Uiu2HAm6qQpcVqBAG2YgqdxPQUK6eWKQNH5A9WE7TJAzqhuuqoD"]'
2026-02-08 04:44:34.687 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:44:34.689 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36338/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:44:34.699 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:44:34.699 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41302/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:44:34.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:44:34.707 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62982/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:44:34.709 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:44:34.710 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62982/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1770525874710676992}}'
2026-02-08 04:44:34.713 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:62982/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-08 04:44:34.715 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:44:34.716 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:44:34.716 DEBUG [src.node.waku_node] Stopping container with id 4500482e1cde
2026-02-08 04:44:35.254 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:44:35.254 DEBUG [src.node.waku_node] Stopping container with id 242a4a7b627b
2026-02-08 04:44:35.797 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:44:35.797 DEBUG [src.node.waku_node] Stopping container with id cf46217863f5
2026-02-08 04:44:36.109 ERROR [src.node.docker_mananger] Max retries reached for container 4500482e1cde. Exiting log stream.
2026-02-08 04:44:36.310 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:44:36.312 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:44:36.326 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:44:36.333 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:44:36.340 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
