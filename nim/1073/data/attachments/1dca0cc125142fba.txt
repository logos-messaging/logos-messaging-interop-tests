2026-02-08 04:45:38.165 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:45:38.165 DEBUG [tests.conftest] Running test: test_store_with_duplicate_hashes with id: 2026-02-08_04-45-38__95fe71c7-3efa-4f0f-92cd-f987e9fe2675
2026-02-08 04:45:38.165 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:45:38.166 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-08 04:45:38.166 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-08 04:45:38.173 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:45:38.173 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-08_04-45-38__95fe71c7-3efa-4f0f-92cd-f987e9fe2675__wakuorg_nwaku:latest.log
2026-02-08 04:45:38.173 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:45:38.173 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:45:38.175 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:45:38.175 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.87.108
2026-02-08 04:45:38.175 DEBUG [src.node.docker_mananger] Generated ports ['33135', '33136', '33137', '33138', '33139']
2026-02-08 04:45:38.175 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:45:38.175 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:45:38.175 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:45:38.176 DEBUG [src.node.docker_mananger] docker run -i -t -p 33135:33135 -p 33136:33136 -p 33137:33137 -p 33138:33138 -p 33139:33139 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33137 --rest-port=33135 --tcp-port=33136 --discv5-udp-port=33138 --rest-address=0.0.0.0 --nat=extip:172.18.87.108 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbc9bb3b0c2f0f90b63fa914bd71b7ce789efc858bdee7553ca28458fc3bfbb1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33139 --metrics-logging=true --store=true --relay=true
2026-02-08 04:45:38.360 ERROR [src.node.docker_mananger] Max retries reached for container d3a404cad667. Exiting log stream.
2026-02-08 04:45:38.378 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.87.108 waku 432d775c9ff3e9d4e5e3b5472a8644ef8426b17038010449233a3a026002bb4b
2026-02-08 04:45:38.410 DEBUG [src.node.docker_mananger] Container started with ID 432d775c9ff3. Setting up logs at ./log/docker/publishing_node1_2026-02-08_04-45-38__95fe71c7-3efa-4f0f-92cd-f987e9fe2675__wakuorg_nwaku:latest.log
2026-02-08 04:45:38.410 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33135
2026-02-08 04:45:38.411 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:45:38.950 ERROR [src.node.docker_mananger] Max retries reached for container 9ef6250c0512. Exiting log stream.
2026-02-08 04:45:39.411 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33135/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:39.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:45:39.415 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:45:39.415 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33135/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:39.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.108/tcp/33136/p2p/16Uiu2HAmDwfQK9CJuMiK3jbXmKUqx81QqFhG2F2sDdSrCsW2hGv4","/ip4/172.18.87.108/tcp/33137/ws/p2p/16Uiu2HAmDwfQK9CJuMiK3jbXmKUqx81QqFhG2F2sDdSrCsW2hGv4"],"enrUri":"enr:-L24QD0gPcrek1iBDV-zkCU-Gyja3qbfYpm4y-TjJREBIwKnFt5WacLNC9apI8JF9tp0ODMQi78OWORmBV4u2hE7ZvwCgmlkgnY0gmlwhKwSV2yKbXVsdGlhZGRyc5YACASsEldsBoFwAAoErBJXbAaBcd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEyEi4eLha-1HpP7A0F2oc6GmjPvahru0vhHF-hW53pGDdGNwgoFwg3VkcIKBcoV3YWt1MgM"}'
2026-02-08 04:45:39.417 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:45:39.424 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:45:39.425 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-08_04-45-38__95fe71c7-3efa-4f0f-92cd-f987e9fe2675__wakuorg_nwaku:latest.log
2026-02-08 04:45:39.425 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:45:39.425 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:45:39.426 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:45:39.427 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.137.9
2026-02-08 04:45:39.427 DEBUG [src.node.docker_mananger] Generated ports ['23163', '23164', '23165', '23166', '23167']
2026-02-08 04:45:39.427 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:45:39.427 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:45:39.427 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:45:39.427 DEBUG [src.node.docker_mananger] docker run -i -t -p 23163:23163 -p 23164:23164 -p 23165:23165 -p 23166:23166 -p 23167:23167 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23165 --rest-port=23163 --tcp-port=23164 --discv5-udp-port=23166 --rest-address=0.0.0.0 --nat=extip:172.18.137.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d2a39e1647ffa5ba6c7ff7ebbbad1dd21cbef4d8e66df1ebcfd5c2daff44ba22 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23167 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QD0gPcrek1iBDV-zkCU-Gyja3qbfYpm4y-TjJREBIwKnFt5WacLNC9apI8JF9tp0ODMQi78OWORmBV4u2hE7ZvwCgmlkgnY0gmlwhKwSV2yKbXVsdGlhZGRyc5YACASsEldsBoFwAAoErBJXbAaBcd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEyEi4eLha-1HpP7A0F2oc6GmjPvahru0vhHF-hW53pGDdGNwgoFwg3VkcIKBcoV3YWt1MgM --storenode=/ip4/172.18.87.108/tcp/33136/p2p/16Uiu2HAmDwfQK9CJuMiK3jbXmKUqx81QqFhG2F2sDdSrCsW2hGv4 --store=true --relay=true
2026-02-08 04:45:39.628 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.137.9 waku 0caecc7d32d648abe01379c2d34dfceabaa8fa1f8e32a13a54fcb281a533919f
2026-02-08 04:45:39.660 DEBUG [src.node.docker_mananger] Container started with ID 0caecc7d32d6. Setting up logs at ./log/docker/store_node1_2026-02-08_04-45-38__95fe71c7-3efa-4f0f-92cd-f987e9fe2675__wakuorg_nwaku:latest.log
2026-02-08 04:45:39.661 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23163
2026-02-08 04:45:39.662 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:45:40.662 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23163/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:40.667 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:45:40.667 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:45:40.667 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23163/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:40.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.9/tcp/23164/p2p/16Uiu2HAmGC6voFW7QBT4UCVZuCHG5Eb26DCf5znAZ8wmD32oPJAj","/ip4/172.18.137.9/tcp/23165/ws/p2p/16Uiu2HAmGC6voFW7QBT4UCVZuCHG5Eb26DCf5znAZ8wmD32oPJAj"],"enrUri":"enr:-L24QIP_6wzx_XL3WkvPwX-sgh_hNkdBN8p3XVZABPQPnwWvfIzbEnJkpeMJFRnWD5uBgFwA8eqbhMCbDjA5LR_IRh4CgmlkgnY0gmlwhKwSiQmKbXVsdGlhZGRyc5YACASsEokJBlp8AAoErBKJCQZafd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNIuA2dJN2SX5NRWdmzrBubNuqYR1NShsckQ_UyI7zgiDdGNwglp8g3VkcIJafoV3YWt1MgM"}'
2026-02-08 04:45:40.671 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:45:40.671 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23163/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.87.108/tcp/33136/p2p/16Uiu2HAmDwfQK9CJuMiK3jbXmKUqx81QqFhG2F2sDdSrCsW2hGv4"]'
2026-02-08 04:45:40.674 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:40.674 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33135/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:45:40.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:40.677 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23163/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:45:40.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:40.680 DEBUG [src.steps.store] Relaying message
2026-02-08 04:45:40.680 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33135/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:45:40.686 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:40.686 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-08 04:45:40.887 DEBUG [src.steps.store] Relaying message
2026-02-08 04:45:40.887 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33135/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:45:40.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:40.893 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-08 04:45:41.094 DEBUG [src.steps.store] Relaying message
2026-02-08 04:45:41.094 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33135/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:45:41.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:41.100 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-08 04:45:41.301 DEBUG [src.steps.store] Relaying message
2026-02-08 04:45:41.302 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33135/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:45:41.308 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:41.308 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-08 04:45:41.509 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33135/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0xb4c5c512804616bb42b94e84c2bd6f1126bdbe00df11c575cedc19a3eee9f886%2C0xb4c5c512804616bb42b94e84c2bd6f1126bdbe00df11c575cedc19a3eee9f886&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:41.513 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb4c5c512804616bb42b94e84c2bd6f1126bdbe00df11c575cedc19a3eee9f886"}]}'
2026-02-08 04:45:41.514 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23163/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0xb4c5c512804616bb42b94e84c2bd6f1126bdbe00df11c575cedc19a3eee9f886%2C0xb4c5c512804616bb42b94e84c2bd6f1126bdbe00df11c575cedc19a3eee9f886&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:41.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb4c5c512804616bb42b94e84c2bd6f1126bdbe00df11c575cedc19a3eee9f886"}]}'
2026-02-08 04:45:41.519 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:45:41.520 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:45:41.520 DEBUG [src.node.waku_node] Stopping container with id 432d775c9ff3
2026-02-08 04:45:42.080 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:45:42.080 DEBUG [src.node.waku_node] Stopping container with id 0caecc7d32d6
2026-02-08 04:45:42.667 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:45:42.668 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:45:42.675 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:45:42.682 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
