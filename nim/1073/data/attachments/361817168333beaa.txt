2026-02-08 04:46:24.598 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:46:24.598 DEBUG [tests.conftest] Running test: test_publish_with_missing_content_topic with id: 2026-02-08_04-46-24__7d28defa-6bc2-4607-ac1b-dcbea323fabd
2026-02-08 04:46:24.598 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:46:24.598 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-08 04:46:24.599 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-08 04:46:24.605 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:46:24.605 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-08_04-46-24__7d28defa-6bc2-4607-ac1b-dcbea323fabd__wakuorg_nwaku:latest.log
2026-02-08 04:46:24.605 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:46:24.605 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:46:24.607 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:46:24.607 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.184.171
2026-02-08 04:46:24.607 DEBUG [src.node.docker_mananger] Generated ports ['15496', '15497', '15498', '15499', '15500']
2026-02-08 04:46:24.607 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:46:24.607 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:46:24.607 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:46:24.607 DEBUG [src.node.docker_mananger] docker run -i -t -p 15496:15496 -p 15497:15497 -p 15498:15498 -p 15499:15499 -p 15500:15500 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15498 --rest-port=15496 --tcp-port=15497 --discv5-udp-port=15499 --rest-address=0.0.0.0 --nat=extip:172.18.184.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1fd3667acc2c9828c2aa5bbc921bf406e6bf69adbbd14fdb6cca3a93750f8fb2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15500 --metrics-logging=true --relay=true
2026-02-08 04:46:24.765 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.184.171 waku 12dc44264ef7bc0d974fe181c7fa00b704d3096f7e498583007fb691a686a587
2026-02-08 04:46:24.791 DEBUG [src.node.docker_mananger] Container started with ID 12dc44264ef7. Setting up logs at ./log/docker/node1_2026-02-08_04-46-24__7d28defa-6bc2-4607-ac1b-dcbea323fabd__wakuorg_nwaku:latest.log
2026-02-08 04:46:24.792 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15496
2026-02-08 04:46:24.792 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:46:24.892 ERROR [src.node.docker_mananger] Max retries reached for container 8a2d880a9131. Exiting log stream.
2026-02-08 04:46:25.398 ERROR [src.node.docker_mananger] Max retries reached for container 1e0db19f7de9. Exiting log stream.
2026-02-08 04:46:25.792 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15496/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:46:25.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:46:25.796 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:46:25.796 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15496/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:46:25.798 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.171/tcp/15497/p2p/16Uiu2HAkvhnEeGoFThJ7CbbQM1KEf4PoJM1HcCoa4xbgtdUot3zt","/ip4/172.18.184.171/tcp/15498/ws/p2p/16Uiu2HAkvhnEeGoFThJ7CbbQM1KEf4PoJM1HcCoa4xbgtdUot3zt"],"enrUri":"enr:-L24QCgfdXa9plPNoEDKSSG9PS-TZCxUtU6yEuGPpnIBKJQcV9U3Pz3kcKq7H99yqZQhN4Jz_AAyzGCt-nKdBehyUVwCgmlkgnY0gmlwhKwSuKuKbXVsdGlhZGRyc5YACASsErirBjyJAAoErBK4qwY8it0DgnJzhQADAQAAiXNlY3AyNTZrMaECEvwNuCFt3urneJQuKZPLfuCRvadMF8SyAib3cAR5lZ2DdGNwgjyJg3VkcII8i4V3YWt1MgE"}'
2026-02-08 04:46:25.798 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:46:25.804 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:46:25.804 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-08_04-46-24__7d28defa-6bc2-4607-ac1b-dcbea323fabd__wakuorg_nwaku:latest.log
2026-02-08 04:46:25.804 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:46:25.804 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:46:25.806 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:46:25.806 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.26
2026-02-08 04:46:25.806 DEBUG [src.node.docker_mananger] Generated ports ['49947', '49948', '49949', '49950', '49951']
2026-02-08 04:46:25.806 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:46:25.806 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:46:25.806 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:46:25.807 DEBUG [src.node.docker_mananger] docker run -i -t -p 49947:49947 -p 49948:49948 -p 49949:49949 -p 49950:49950 -p 49951:49951 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49949 --rest-port=49947 --tcp-port=49948 --discv5-udp-port=49950 --rest-address=0.0.0.0 --nat=extip:172.18.104.26 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=429fc24dcde1e131bccfba85c5cf1afcdeff7dccad4fdccc4ffdc611c2fce574 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49951 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCgfdXa9plPNoEDKSSG9PS-TZCxUtU6yEuGPpnIBKJQcV9U3Pz3kcKq7H99yqZQhN4Jz_AAyzGCt-nKdBehyUVwCgmlkgnY0gmlwhKwSuKuKbXVsdGlhZGRyc5YACASsErirBjyJAAoErBK4qwY8it0DgnJzhQADAQAAiXNlY3AyNTZrMaECEvwNuCFt3urneJQuKZPLfuCRvadMF8SyAib3cAR5lZ2DdGNwgjyJg3VkcII8i4V3YWt1MgE
2026-02-08 04:46:25.970 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.26 waku 8b0196875070b7190058498dc80bc5fa0454ac242e7da83a51ae3d71c96fa3ed
2026-02-08 04:46:25.995 DEBUG [src.node.docker_mananger] Container started with ID 8b0196875070. Setting up logs at ./log/docker/node2_2026-02-08_04-46-24__7d28defa-6bc2-4607-ac1b-dcbea323fabd__wakuorg_nwaku:latest.log
2026-02-08 04:46:25.995 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49947
2026-02-08 04:46:25.996 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:46:26.996 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49947/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:46:27.015 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:46:27.018 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:46:27.018 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49947/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:46:27.022 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.26/tcp/49948/p2p/16Uiu2HAmKnr99Hg6DyfzAS5hJzqLqJWwvDbGjpGKatUNS5XaeA1T","/ip4/172.18.104.26/tcp/49949/ws/p2p/16Uiu2HAmKnr99Hg6DyfzAS5hJzqLqJWwvDbGjpGKatUNS5XaeA1T"],"enrUri":"enr:-L24QJQRjWVYImR3i6p5YLUY7TjcRAACEg-37qN7CNyRJas5G4i4GB4HVxvZv0hlF5UtR0sts2vqjc4b6E6T_BsQva4CgmlkgnY0gmlwhKwSaBqKbXVsdGlhZGRyc5YACASsEmgaBsMcAAoErBJoGgbDHd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDagUsK5PsOmVXDPR7_LK5G_C_JyhrYzwQ6kvuqVvpnHaDdGNwgsMcg3VkcILDHoV3YWt1MgE"}'
2026-02-08 04:46:27.022 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:46:27.023 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49947/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.171/tcp/15497/p2p/16Uiu2HAkvhnEeGoFThJ7CbbQM1KEf4PoJM1HcCoa4xbgtdUot3zt"]'
2026-02-08 04:46:27.025 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:46:27.026 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-08 04:46:27.026 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15496/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-08 04:46:27.029 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:46:27.029 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49947/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-08 04:46:27.034 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:46:27.034 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15496/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:46:27.039 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:46:27.040 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-08 04:46:27.140 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-08 04:46:27.140 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15496/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:46:27.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770525987034775296,"ephemeral":false,"proof":""}]'
2026-02-08 04:46:27.145 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-08 04:46:27.145 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:46:27.147 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770525987034775296,"ephemeral":false,"proof":""}]'
2026-02-08 04:46:27.148 INFO [src.steps.relay] WARM UP successful!!
2026-02-08 04:46:27.149 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15496/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:46:27.152 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:15496/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-08 04:46:27.153 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:46:27.154 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:46:27.155 DEBUG [src.node.waku_node] Stopping container with id 12dc44264ef7
2026-02-08 04:46:27.677 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:46:27.678 DEBUG [src.node.waku_node] Stopping container with id 8b0196875070
2026-02-08 04:46:28.175 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:46:28.178 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:46:28.183 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:46:28.187 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
