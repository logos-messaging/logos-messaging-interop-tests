2026-02-08 04:45:37.016 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:45:37.016 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_some_of_the_subscribed_content_topics with id: 2026-02-08_04-45-37__bff8b5e4-fadf-42eb-b97a-32504bd257b9
2026-02-08 04:45:37.016 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:45:37.016 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-08 04:45:37.017 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-08 04:45:37.022 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:45:37.023 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-08_04-45-37__bff8b5e4-fadf-42eb-b97a-32504bd257b9__wakuorg_nwaku:latest.log
2026-02-08 04:45:37.023 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:45:37.023 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:45:37.024 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:45:37.024 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.241.188
2026-02-08 04:45:37.024 DEBUG [src.node.docker_mananger] Generated ports ['58309', '58310', '58311', '58312', '58313']
2026-02-08 04:45:37.025 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:45:37.025 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:45:37.025 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:45:37.025 DEBUG [src.node.docker_mananger] docker run -i -t -p 58309:58309 -p 58310:58310 -p 58311:58311 -p 58312:58312 -p 58313:58313 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58311 --rest-port=58309 --tcp-port=58310 --discv5-udp-port=58312 --rest-address=0.0.0.0 --nat=extip:172.18.241.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab048a45fcc085a041f49dfbc78bf975bd50342b5fcbfa4b2edbbaf89d7dd5ef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58313 --metrics-logging=true --relay=true --filter=true
2026-02-08 04:45:37.200 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.241.188 waku dfaa67be659f8e99d534a24db95f98524144587c3d16b89d13e9f64c165512bf
2026-02-08 04:45:37.230 DEBUG [src.node.docker_mananger] Container started with ID dfaa67be659f. Setting up logs at ./log/docker/node1_2026-02-08_04-45-37__bff8b5e4-fadf-42eb-b97a-32504bd257b9__wakuorg_nwaku:latest.log
2026-02-08 04:45:37.230 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58309
2026-02-08 04:45:37.230 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:45:37.260 ERROR [src.node.docker_mananger] Max retries reached for container 1a80ba95eccb. Exiting log stream.
2026-02-08 04:45:37.825 ERROR [src.node.docker_mananger] Max retries reached for container 226b7e510fae. Exiting log stream.
2026-02-08 04:45:38.231 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58309/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:38.234 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:45:38.234 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:45:38.234 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58309/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:38.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.188/tcp/58310/p2p/16Uiu2HAm2MpCzobQU2YD5tvznUcsbET3TKk4fo93SNEK86rGvTNt","/ip4/172.18.241.188/tcp/58311/ws/p2p/16Uiu2HAm2MpCzobQU2YD5tvznUcsbET3TKk4fo93SNEK86rGvTNt"],"enrUri":"enr:-L24QEP67LgyZJ3IZGI7B2BpDF1Ko4UOkiw1xoIwFjeVTuuNR9ryFys6B-YGTLEWEJzvhSQZSSonQktzN-ekKojJDWcCgmlkgnY0gmlwhKwS8byKbXVsdGlhZGRyc5YACASsEvG8BuPGAAoErBLxvAbjx90DgnJzhQADAQAAiXNlY3AyNTZrMaECZwTJzRg3V5ovCVr0VtYtnDX7eI8CyRwMZTX_0NJddTWDdGNwguPGg3VkcILjyIV3YWt1MgU"}'
2026-02-08 04:45:38.237 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:45:38.237 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-08 04:45:38.243 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:45:38.243 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-08_04-45-37__bff8b5e4-fadf-42eb-b97a-32504bd257b9__wakuorg_nwaku:latest.log
2026-02-08 04:45:38.243 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:45:38.243 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:45:38.244 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:45:38.245 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.188.157
2026-02-08 04:45:38.245 DEBUG [src.node.docker_mananger] Generated ports ['50656', '50657', '50658', '50659', '50660']
2026-02-08 04:45:38.245 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:45:38.245 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:45:38.245 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:45:38.245 DEBUG [src.node.docker_mananger] docker run -i -t -p 50656:50656 -p 50657:50657 -p 50658:50658 -p 50659:50659 -p 50660:50660 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50658 --rest-port=50656 --tcp-port=50657 --discv5-udp-port=50659 --rest-address=0.0.0.0 --nat=extip:172.18.188.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d1ee0a5de2d97e2ae6e520a3ca83d0a10cdfabf3b344803c2d291a3ee3d2cf1a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50660 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QEP67LgyZJ3IZGI7B2BpDF1Ko4UOkiw1xoIwFjeVTuuNR9ryFys6B-YGTLEWEJzvhSQZSSonQktzN-ekKojJDWcCgmlkgnY0gmlwhKwS8byKbXVsdGlhZGRyc5YACASsEvG8BuPGAAoErBLxvAbjx90DgnJzhQADAQAAiXNlY3AyNTZrMaECZwTJzRg3V5ovCVr0VtYtnDX7eI8CyRwMZTX_0NJddTWDdGNwguPGg3VkcILjyIV3YWt1MgU --filternode=/ip4/172.18.241.188/tcp/58310/p2p/16Uiu2HAm2MpCzobQU2YD5tvznUcsbET3TKk4fo93SNEK86rGvTNt
2026-02-08 04:45:38.421 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.188.157 waku 7859153c45260b402291a1a4270234c9eb3c9e71608c0bc2f43b6c766f329885
2026-02-08 04:45:38.455 DEBUG [src.node.docker_mananger] Container started with ID 7859153c4526. Setting up logs at ./log/docker/node2_2026-02-08_04-45-37__bff8b5e4-fadf-42eb-b97a-32504bd257b9__wakuorg_nwaku:latest.log
2026-02-08 04:45:38.455 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50656
2026-02-08 04:45:38.455 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:45:39.456 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50656/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:39.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-08 04:45:39.460 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:45:39.460 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50656/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:39.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.157/tcp/50657/p2p/16Uiu2HAkwH5mdAqD8HqwYSHRwVMfCrsguhYhDYvksPHakHqWHwr5","/ip4/172.18.188.157/tcp/50658/ws/p2p/16Uiu2HAkwH5mdAqD8HqwYSHRwVMfCrsguhYhDYvksPHakHqWHwr5"],"enrUri":"enr:-L24QAKwfFYjo6IQAIpwbjvZfBuQnzgwGggCOBg64FfR_bEcLQbSXr-ZzSq-Kd6y1R-xi8mWvy34PHB3LQcXKBL4RRICgmlkgnY0gmlwhKwSvJ2KbXVsdGlhZGRyc5YACASsErydBsXhAAoErBK8nQbF4t0DgnJzhQADAQAAiXNlY3AyNTZrMaECG4QL1TzxzPY_Mhrnb7QHDjErnldvL5ijhC86DkPq_IaDdGNwgsXhg3VkcILF44V3YWt1MgA"}'
2026-02-08 04:45:39.463 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:45:39.463 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50656/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.188/tcp/58310/p2p/16Uiu2HAm2MpCzobQU2YD5tvznUcsbET3TKk4fo93SNEK86rGvTNt"]'
2026-02-08 04:45:39.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:39.492 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-08 04:45:39.494 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58309/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-08 04:45:39.505 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:39.506 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50656/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "57410930-b783-44ae-903a-0a87fa4c0a6e", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-08 04:45:39.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"57410930-b783-44ae-903a-0a87fa4c0a6e","statusDesc":"OK"}'
2026-02-08 04:45:39.518 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58309/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-08 04:45:39.520 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:39.521 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50656/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7fdc410d-e58a-4a20-9863-8ace60377096", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-08 04:45:39.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"7fdc410d-e58a-4a20-9863-8ace60377096","statusDesc":"OK"}'
2026-02-08 04:45:39.530 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58309/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:45:39.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:39.538 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-08 04:45:39.638 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-08 04:45:39.638 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50656/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:39.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1770525939530815086,"ephemeral":false}]'
2026-02-08 04:45:39.642 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:50656/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-08 04:45:39.650 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2026-02-08 04:45:39.651 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58309/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:45:39.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:39.655 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-08 04:45:39.755 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-08 04:45:39.756 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50656/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:39.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1770525939650897302,"ephemeral":false}]'
2026-02-08 04:45:39.760 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58309/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:45:39.763 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:45:39.763 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-08 04:45:39.863 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-08 04:45:39.864 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50656/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:45:39.866 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:50656/filter/v2/messages/Hello%20World%21. Response content: b'Not subscribed to topic: Hello World!'
2026-02-08 04:45:39.869 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:45:39.870 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:45:39.870 DEBUG [src.node.waku_node] Stopping container with id dfaa67be659f
2026-02-08 04:45:40.412 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:45:40.412 DEBUG [src.node.waku_node] Stopping container with id 7859153c4526
2026-02-08 04:45:40.896 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:45:40.897 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:45:40.905 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:45:40.912 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
