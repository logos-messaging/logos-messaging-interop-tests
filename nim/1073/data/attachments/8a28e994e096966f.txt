2026-02-08 04:50:44.740 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:50:44.741 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_extra_field with id: 2026-02-08_04-50-44__01de3f2f-e911-47a4-af03-10c9671b2ee6
2026-02-08 04:50:44.742 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:50:44.742 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-08 04:50:44.742 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-08 04:50:44.752 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:50:44.752 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-08_04-50-44__01de3f2f-e911-47a4-af03-10c9671b2ee6__wakuorg_nwaku:latest.log
2026-02-08 04:50:44.752 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:50:44.752 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:50:44.755 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:50:44.755 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.40.244
2026-02-08 04:50:44.755 DEBUG [src.node.docker_mananger] Generated ports ['37548', '37549', '37550', '37551', '37552']
2026-02-08 04:50:44.755 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:50:44.756 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:50:44.756 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:50:44.756 DEBUG [src.node.docker_mananger] docker run -i -t -p 37548:37548 -p 37549:37549 -p 37550:37550 -p 37551:37551 -p 37552:37552 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37550 --rest-port=37548 --tcp-port=37549 --discv5-udp-port=37551 --rest-address=0.0.0.0 --nat=extip:172.18.40.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba48cf7abc858b1a6a48bb6a502e10cecdc3bde4eff9d8d8c0de51a961d5ce1b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37552 --metrics-logging=true --relay=true --filter=true
2026-02-08 04:50:44.935 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.40.244 waku 8034531d828933e7272e0f6c73aea394ade3fa9ff0437f1fce392178be3ec97f
2026-02-08 04:50:44.968 DEBUG [src.node.docker_mananger] Container started with ID 8034531d8289. Setting up logs at ./log/docker/node1_2026-02-08_04-50-44__01de3f2f-e911-47a4-af03-10c9671b2ee6__wakuorg_nwaku:latest.log
2026-02-08 04:50:44.968 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37548
2026-02-08 04:50:44.968 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:50:45.009 ERROR [src.node.docker_mananger] Max retries reached for container f5d69a4d9615. Exiting log stream.
2026-02-08 04:50:45.568 ERROR [src.node.docker_mananger] Max retries reached for container e4c053a4f3f9. Exiting log stream.
2026-02-08 04:50:45.969 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37548/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:45.973 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:50:45.973 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:50:45.973 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37548/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:45.975 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.244/tcp/37549/p2p/16Uiu2HAmCfoYp98cNmdnCqaez5DPfGAc8sEJAc8QZKSLGzb76Hn2","/ip4/172.18.40.244/tcp/37550/ws/p2p/16Uiu2HAmCfoYp98cNmdnCqaez5DPfGAc8sEJAc8QZKSLGzb76Hn2"],"enrUri":"enr:-L24QOqVeUi4Vvk7FY8pQoa1mxmoHn2ihj-JeTLseA1_yqzuawO5io3FU6a9MQB8WoZSY9SvjQFlB6SMXXAAWMTMcBICgmlkgnY0gmlwhKwSKPSKbXVsdGlhZGRyc5YACASsEij0BpKtAAoErBIo9AaSrt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDADVeIxOmGGBgNTnLi0nRUIaOqhpoEzvWPR3jG8Rr45uDdGNwgpKtg3VkcIKSr4V3YWt1MgU"}'
2026-02-08 04:50:45.975 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:50:45.976 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-08 04:50:45.982 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:50:45.982 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-08_04-50-44__01de3f2f-e911-47a4-af03-10c9671b2ee6__wakuorg_nwaku:latest.log
2026-02-08 04:50:45.983 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:50:45.983 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:50:45.984 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:50:45.984 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.226.202
2026-02-08 04:50:45.984 DEBUG [src.node.docker_mananger] Generated ports ['49981', '49982', '49983', '49984', '49985']
2026-02-08 04:50:45.985 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:50:45.985 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:50:45.985 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:50:45.985 DEBUG [src.node.docker_mananger] docker run -i -t -p 49981:49981 -p 49982:49982 -p 49983:49983 -p 49984:49984 -p 49985:49985 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49983 --rest-port=49981 --tcp-port=49982 --discv5-udp-port=49984 --rest-address=0.0.0.0 --nat=extip:172.18.226.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7ad2c51d11f4de99adc45b5a1ee1a8bd071ecc6c5a6cb4b0f4adb0d8adc0cdcf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49985 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QOqVeUi4Vvk7FY8pQoa1mxmoHn2ihj-JeTLseA1_yqzuawO5io3FU6a9MQB8WoZSY9SvjQFlB6SMXXAAWMTMcBICgmlkgnY0gmlwhKwSKPSKbXVsdGlhZGRyc5YACASsEij0BpKtAAoErBIo9AaSrt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDADVeIxOmGGBgNTnLi0nRUIaOqhpoEzvWPR3jG8Rr45uDdGNwgpKtg3VkcIKSr4V3YWt1MgU --filternode=/ip4/172.18.40.244/tcp/37549/p2p/16Uiu2HAmCfoYp98cNmdnCqaez5DPfGAc8sEJAc8QZKSLGzb76Hn2
2026-02-08 04:50:46.163 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.226.202 waku cb983c18f79d58dbd1f8c760a3ee1a59d18b6fcd7ec27f0625aeb92e02f641b9
2026-02-08 04:50:46.192 DEBUG [src.node.docker_mananger] Container started with ID cb983c18f79d. Setting up logs at ./log/docker/node2_2026-02-08_04-50-44__01de3f2f-e911-47a4-af03-10c9671b2ee6__wakuorg_nwaku:latest.log
2026-02-08 04:50:46.192 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49981
2026-02-08 04:50:46.193 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:50:47.194 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49981/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:47.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-08 04:50:47.198 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:50:47.198 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49981/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:47.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.202/tcp/49982/p2p/16Uiu2HAmKiisFBhNMg1UELEu62v3gfzNBjrGRGgRuxUZFXDpsjEG","/ip4/172.18.226.202/tcp/49983/ws/p2p/16Uiu2HAmKiisFBhNMg1UELEu62v3gfzNBjrGRGgRuxUZFXDpsjEG"],"enrUri":"enr:-L24QKsD9M_1BInpcvCk57nvOUq4uLXY_aII8mzDWv_Mu33RWgKc0rs7rw4PHiHEJnpkNlOThfdOhdHUWNrrOq1hbpkCgmlkgnY0gmlwhKwS4sqKbXVsdGlhZGRyc5YACASsEuLKBsM-AAoErBLiygbDP90DgnJzhQADAQAAiXNlY3AyNTZrMaEDaPaf23JtWgOZYfU79b4mnQIojssY15bPMxgZfBjsGKmDdGNwgsM-g3VkcILDQIV3YWt1MgA"}'
2026-02-08 04:50:47.201 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:50:47.202 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49981/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.40.244/tcp/37549/p2p/16Uiu2HAmCfoYp98cNmdnCqaez5DPfGAc8sEJAc8QZKSLGzb76Hn2"]'
2026-02-08 04:50:47.232 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:50:47.233 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-08 04:50:47.236 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37548/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-08 04:50:47.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:50:47.246 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49981/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f16faad6-eb0e-4396-8800-4413694a9f13", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-08 04:50:47.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f16faad6-eb0e-4396-8800-4413694a9f13","statusDesc":"OK"}'
2026-02-08 04:50:47.261 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:49981/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
2026-02-08 04:50:47.264 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49981/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-08 04:50:47.266 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:50:47.267 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:50:47.267 DEBUG [src.node.waku_node] Stopping container with id 8034531d8289
2026-02-08 04:50:47.815 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:50:47.815 DEBUG [src.node.waku_node] Stopping container with id cb983c18f79d
2026-02-08 04:50:48.322 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:50:48.324 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:50:48.330 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:50:48.335 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
