2026-02-08 04:50:24.473 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:50:24.473 DEBUG [tests.conftest] Running test: test_filter_get_message_with_extra_field with id: 2026-02-08_04-50-24__029e72a7-c36f-43da-b082-742f17b6d4e3
2026-02-08 04:50:24.474 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:50:24.474 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-08 04:50:24.474 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-08 04:50:24.481 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:50:24.481 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-08_04-50-24__029e72a7-c36f-43da-b082-742f17b6d4e3__wakuorg_nwaku:latest.log
2026-02-08 04:50:24.481 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:50:24.481 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:50:24.483 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:50:24.483 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.103.241
2026-02-08 04:50:24.483 DEBUG [src.node.docker_mananger] Generated ports ['29836', '29837', '29838', '29839', '29840']
2026-02-08 04:50:24.483 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:50:24.483 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:50:24.483 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:50:24.483 DEBUG [src.node.docker_mananger] docker run -i -t -p 29836:29836 -p 29837:29837 -p 29838:29838 -p 29839:29839 -p 29840:29840 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29838 --rest-port=29836 --tcp-port=29837 --discv5-udp-port=29839 --rest-address=0.0.0.0 --nat=extip:172.18.103.241 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1de735c39e5034b84b6cbf99940ab0d9bbaf7c849cec5a6c21b9f64cc1bf1c57 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29840 --metrics-logging=true --relay=true --filter=true
2026-02-08 04:50:24.632 ERROR [src.node.docker_mananger] Max retries reached for container dfac833e00dc. Exiting log stream.
2026-02-08 04:50:24.668 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.103.241 waku b1677b3d7a53daa84e05025e45a34d6e51b121a1bd722f792ffd1771039a2fea
2026-02-08 04:50:24.702 DEBUG [src.node.docker_mananger] Container started with ID b1677b3d7a53. Setting up logs at ./log/docker/node1_2026-02-08_04-50-24__029e72a7-c36f-43da-b082-742f17b6d4e3__wakuorg_nwaku:latest.log
2026-02-08 04:50:24.703 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29836
2026-02-08 04:50:24.704 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:50:25.086 ERROR [src.node.docker_mananger] Max retries reached for container c2bf301c9c2a. Exiting log stream.
2026-02-08 04:50:25.704 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29836/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:25.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:50:25.708 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:50:25.708 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29836/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:25.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.103.241/tcp/29837/p2p/16Uiu2HAkydYjamNmBcNmDmia1FQQS6x1HmkmvgdUPkczrTTetwrP","/ip4/172.18.103.241/tcp/29838/ws/p2p/16Uiu2HAkydYjamNmBcNmDmia1FQQS6x1HmkmvgdUPkczrTTetwrP"],"enrUri":"enr:-L24QKR7PeEgaUmss4jzehClN2vYLBVqvbGDVE__l76hg_hOJJ0JbNi3GVLXA59m6ju9fMeL2_5o-ad0-ZYqMIX17o4CgmlkgnY0gmlwhKwSZ_GKbXVsdGlhZGRyc5YACASsEmfxBnSNAAoErBJn8QZ0jt0DgnJzhQADAQAAiXNlY3AyNTZrMaECPnmGhEpS5ZVYJS1KhzDUvVMjOWLqdEKpKI0RQbJXlFCDdGNwgnSNg3VkcIJ0j4V3YWt1MgU"}'
2026-02-08 04:50:25.710 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:50:25.710 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-08 04:50:25.717 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:50:25.717 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-08_04-50-24__029e72a7-c36f-43da-b082-742f17b6d4e3__wakuorg_nwaku:latest.log
2026-02-08 04:50:25.717 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:50:25.717 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:50:25.719 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:50:25.719 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.131.224
2026-02-08 04:50:25.719 DEBUG [src.node.docker_mananger] Generated ports ['44880', '44881', '44882', '44883', '44884']
2026-02-08 04:50:25.719 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:50:25.719 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:50:25.719 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:50:25.719 DEBUG [src.node.docker_mananger] docker run -i -t -p 44880:44880 -p 44881:44881 -p 44882:44882 -p 44883:44883 -p 44884:44884 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44882 --rest-port=44880 --tcp-port=44881 --discv5-udp-port=44883 --rest-address=0.0.0.0 --nat=extip:172.18.131.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e95fc97b4bec159ad9cd7fdfce49ddc0e04dafebfeccefccf9b6260efae0e95e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44884 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKR7PeEgaUmss4jzehClN2vYLBVqvbGDVE__l76hg_hOJJ0JbNi3GVLXA59m6ju9fMeL2_5o-ad0-ZYqMIX17o4CgmlkgnY0gmlwhKwSZ_GKbXVsdGlhZGRyc5YACASsEmfxBnSNAAoErBJn8QZ0jt0DgnJzhQADAQAAiXNlY3AyNTZrMaECPnmGhEpS5ZVYJS1KhzDUvVMjOWLqdEKpKI0RQbJXlFCDdGNwgnSNg3VkcIJ0j4V3YWt1MgU --filternode=/ip4/172.18.103.241/tcp/29837/p2p/16Uiu2HAkydYjamNmBcNmDmia1FQQS6x1HmkmvgdUPkczrTTetwrP
2026-02-08 04:50:25.907 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.131.224 waku 246c8a0c023ca4ce2417685b4d56c6a8495892d79f2be5971b31f078bb75564b
2026-02-08 04:50:25.936 DEBUG [src.node.docker_mananger] Container started with ID 246c8a0c023c. Setting up logs at ./log/docker/node2_2026-02-08_04-50-24__029e72a7-c36f-43da-b082-742f17b6d4e3__wakuorg_nwaku:latest.log
2026-02-08 04:50:25.937 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44880
2026-02-08 04:50:25.938 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:50:26.938 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44880/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:26.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-08 04:50:26.942 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:50:26.943 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44880/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:50:26.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.224/tcp/44881/p2p/16Uiu2HAmFwfctdTk77Hh6UVRFkg4itTaHeHdiVAkd1UEYqyqrZPt","/ip4/172.18.131.224/tcp/44882/ws/p2p/16Uiu2HAmFwfctdTk77Hh6UVRFkg4itTaHeHdiVAkd1UEYqyqrZPt"],"enrUri":"enr:-L24QF_b2INvv4KaO4i1lBVs0t-WMncJRCupsd6k957TnW_hES42RXnSnCe_jrpUoOjY-h9pZGWCfOGlgv4hPUWfCQkCgmlkgnY0gmlwhKwSg-CKbXVsdGlhZGRyc5YACASsEoPgBq9RAAoErBKD4AavUt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMNjBW8HtEGvOX73uxxGpczSPYVYTtAMLzVTOusMgBdeDdGNwgq9Rg3VkcIKvU4V3YWt1MgA"}'
2026-02-08 04:50:26.945 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:50:26.945 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44880/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.103.241/tcp/29837/p2p/16Uiu2HAkydYjamNmBcNmDmia1FQQS6x1HmkmvgdUPkczrTTetwrP"]'
2026-02-08 04:50:26.976 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:50:26.977 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-08 04:50:26.978 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29836/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-08 04:50:26.993 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:50:26.994 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44880/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "76720b1c-8780-480a-97fb-97c9ed89bd09", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-08 04:50:27.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"76720b1c-8780-480a-97fb-97c9ed89bd09","statusDesc":"OK"}'
2026-02-08 04:50:27.007 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29836/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
2026-02-08 04:50:27.010 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29836/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-08 04:50:27.013 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:50:27.013 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:50:27.014 DEBUG [src.node.waku_node] Stopping container with id b1677b3d7a53
2026-02-08 04:50:27.554 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:50:27.555 DEBUG [src.node.waku_node] Stopping container with id 246c8a0c023c
2026-02-08 04:50:28.073 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:50:28.075 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:50:28.080 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:50:28.084 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
