2026-02-08 04:47:18.045 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:47:18.045 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2026-02-08_04-47-18__d41a686f-52cb-425c-9f4d-d4ed4399c488
2026-02-08 04:47:18.045 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:47:18.046 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-08 04:47:18.052 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:47:18.052 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-08_04-47-18__d41a686f-52cb-425c-9f4d-d4ed4399c488__wakuorg_nwaku:latest.log
2026-02-08 04:47:18.053 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:47:18.053 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:47:18.054 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:47:18.054 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.237.228
2026-02-08 04:47:18.054 DEBUG [src.node.docker_mananger] Generated ports ['29916', '29917', '29918', '29919', '29920']
2026-02-08 04:47:18.055 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:47:18.055 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:47:18.055 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:47:18.055 DEBUG [src.node.docker_mananger] docker run -i -t -p 29916:29916 -p 29917:29917 -p 29918:29918 -p 29919:29919 -p 29920:29920 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29918 --rest-port=29916 --tcp-port=29917 --discv5-udp-port=29919 --rest-address=0.0.0.0 --nat=extip:172.18.237.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d7ee780acafaa6b6a8dada52c3c1a668c1e937c0b7cacd055919a024abc63a6d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29920 --metrics-logging=true --lightpush=true --relay=true
2026-02-08 04:47:18.227 ERROR [src.node.docker_mananger] Max retries reached for container d857be800cf2. Exiting log stream.
2026-02-08 04:47:18.240 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.237.228 waku c16c0fa7669b380dbaa4cbd312d83ac9f62e989653a276d78062420a81d79a39
2026-02-08 04:47:18.273 DEBUG [src.node.docker_mananger] Container started with ID c16c0fa7669b. Setting up logs at ./log/docker/receiving_node1_2026-02-08_04-47-18__d41a686f-52cb-425c-9f4d-d4ed4399c488__wakuorg_nwaku:latest.log
2026-02-08 04:47:18.273 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29916
2026-02-08 04:47:18.274 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:47:18.694 ERROR [src.node.docker_mananger] Max retries reached for container c804529ef822. Exiting log stream.
2026-02-08 04:47:19.275 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29916/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:47:19.278 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:47:19.278 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:47:19.278 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29916/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:47:19.281 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.228/tcp/29917/p2p/16Uiu2HAkwuq9AsBXBvY5jN4EKQ2k5bkASi9hE7zfseJLPFngVe7V","/ip4/172.18.237.228/tcp/29918/ws/p2p/16Uiu2HAkwuq9AsBXBvY5jN4EKQ2k5bkASi9hE7zfseJLPFngVe7V"],"enrUri":"enr:-L24QMTEdiOe-veQyHrxiwZfNUuKyoKrPDLw_pVgQHiu5558QiUx9Usn-XvFzYp20kwwwKdsIsxkPGwg-hZpu2LU5YQCgmlkgnY0gmlwhKwS7eSKbXVsdGlhZGRyc5YACASsEu3kBnTdAAoErBLt5AZ03t0DgnJzhQADAQAAiXNlY3AyNTZrMaECJO3-4vIHwm45VsB0xRrmbIA7Ly8kimHiCxm7y2nSXhyDdGNwgnTdg3VkcIJ034V3YWt1Mgk"}'
2026-02-08 04:47:19.281 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:47:19.287 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:47:19.287 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-08_04-47-18__d41a686f-52cb-425c-9f4d-d4ed4399c488__wakuorg_nwaku:latest.log
2026-02-08 04:47:19.288 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:47:19.288 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:47:19.289 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:47:19.289 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.161.65
2026-02-08 04:47:19.289 DEBUG [src.node.docker_mananger] Generated ports ['31126', '31127', '31128', '31129', '31130']
2026-02-08 04:47:19.289 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:47:19.290 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:47:19.290 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:47:19.290 DEBUG [src.node.docker_mananger] docker run -i -t -p 31126:31126 -p 31127:31127 -p 31128:31128 -p 31129:31129 -p 31130:31130 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31128 --rest-port=31126 --tcp-port=31127 --discv5-udp-port=31129 --rest-address=0.0.0.0 --nat=extip:172.18.161.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1edac78285dec6eddf91bbe2cf6b7bfe5b981e5bf9dd57eba92ed1c8fa2dbb09 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31130 --metrics-logging=true --lightpush=false --relay=true
2026-02-08 04:47:19.471 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.161.65 waku a872ddc629e76711a5ef43e3ea7c999faabd4be279ac770d70ca9fc78ac70143
2026-02-08 04:47:19.503 DEBUG [src.node.docker_mananger] Container started with ID a872ddc629e7. Setting up logs at ./log/docker/receiving_node2_2026-02-08_04-47-18__d41a686f-52cb-425c-9f4d-d4ed4399c488__wakuorg_nwaku:latest.log
2026-02-08 04:47:19.504 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31126
2026-02-08 04:47:19.504 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:47:20.505 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31126/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:47:20.508 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:47:20.508 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:47:20.508 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31126/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:47:20.511 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.65/tcp/31127/p2p/16Uiu2HAkvcFrZzxqSyg7ejiQP4RBuPzHjT8sqKZUd2361g6wbnpe","/ip4/172.18.161.65/tcp/31128/ws/p2p/16Uiu2HAkvcFrZzxqSyg7ejiQP4RBuPzHjT8sqKZUd2361g6wbnpe"],"enrUri":"enr:-L24QKUfZw0vGIT7d99wT9LLsxSZdpR_Y5vHi83O9tDKDi7OEgLEQwyFTfyAeEAcwWbUQz1sV6JP-m5ClGvlvUdXVs8CgmlkgnY0gmlwhKwSoUGKbXVsdGlhZGRyc5YACASsEqFBBnmXAAoErBKhQQZ5mN0DgnJzhQADAQAAiXNlY3AyNTZrMaECEZHMUSsOYNH4WHZNsDHzAW0c4GvNFEHf3KYYkgkWga-DdGNwgnmXg3VkcIJ5mYV3YWt1MgE"}'
2026-02-08 04:47:20.511 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:47:20.511 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31126/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.237.228/tcp/29917/p2p/16Uiu2HAkwuq9AsBXBvY5jN4EKQ2k5bkASi9hE7zfseJLPFngVe7V"]'
2026-02-08 04:47:20.541 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:47:20.551 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:47:20.551 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-08_04-47-18__d41a686f-52cb-425c-9f4d-d4ed4399c488__wakuorg_nwaku:latest.log
2026-02-08 04:47:20.551 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:47:20.551 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:47:20.553 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:47:20.553 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.20.180
2026-02-08 04:47:20.553 DEBUG [src.node.docker_mananger] Generated ports ['41935', '41936', '41937', '41938', '41939']
2026-02-08 04:47:20.554 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:47:20.555 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:47:20.555 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:47:20.555 DEBUG [src.node.docker_mananger] docker run -i -t -p 41935:41935 -p 41936:41936 -p 41937:41937 -p 41938:41938 -p 41939:41939 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41937 --rest-port=41935 --tcp-port=41936 --discv5-udp-port=41938 --rest-address=0.0.0.0 --nat=extip:172.18.20.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcd03e4b1ece0582ef567d31fe1ca281b990bd2085bca7b0ec4558daa25af814 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41939 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMTEdiOe-veQyHrxiwZfNUuKyoKrPDLw_pVgQHiu5558QiUx9Usn-XvFzYp20kwwwKdsIsxkPGwg-hZpu2LU5YQCgmlkgnY0gmlwhKwS7eSKbXVsdGlhZGRyc5YACASsEu3kBnTdAAoErBLt5AZ03t0DgnJzhQADAQAAiXNlY3AyNTZrMaECJO3-4vIHwm45VsB0xRrmbIA7Ly8kimHiCxm7y2nSXhyDdGNwgnTdg3VkcIJ034V3YWt1Mgk --lightpushnode=/ip4/172.18.237.228/tcp/29917/p2p/16Uiu2HAkwuq9AsBXBvY5jN4EKQ2k5bkASi9hE7zfseJLPFngVe7V --lightpush=true --relay=true
2026-02-08 04:47:20.761 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.20.180 waku f9a43363210a27411bb2264f19e4a36f0fa1f9caec3076221ef3391d301f62bc
2026-02-08 04:47:20.792 DEBUG [src.node.docker_mananger] Container started with ID f9a43363210a. Setting up logs at ./log/docker/lightpush_node1_2026-02-08_04-47-18__d41a686f-52cb-425c-9f4d-d4ed4399c488__wakuorg_nwaku:latest.log
2026-02-08 04:47:20.793 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41935
2026-02-08 04:47:20.793 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:47:21.794 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41935/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:47:21.811 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:47:21.812 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:47:21.814 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41935/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:47:21.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.180/tcp/41936/p2p/16Uiu2HAkzkLw6SQMuC1Nb2AJ5UVpscrM717vvJZwv9dSsFwDPz3t","/ip4/172.18.20.180/tcp/41937/ws/p2p/16Uiu2HAkzkLw6SQMuC1Nb2AJ5UVpscrM717vvJZwv9dSsFwDPz3t"],"enrUri":"enr:-L24QMiLx4k_EmKXZ8qLI6lB97BhEzzS6kymwLeqIyizL_J5T1n9KJe1DrupGhLjjo8vkrajaL0GMJCL3SGg8wMhUesCgmlkgnY0gmlwhKwSFLSKbXVsdGlhZGRyc5YACASsEhS0BqPQAAoErBIUtAaj0d0DgnJzhQADAQAAiXNlY3AyNTZrMaECTxLvG_Exkl50-CljoqzHK1DxKp2pZO3Yd7-DxHX9pxuDdGNwgqPQg3VkcIKj0oV3YWt1Mgk"}'
2026-02-08 04:47:21.819 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:47:21.819 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41935/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.237.228/tcp/29917/p2p/16Uiu2HAkwuq9AsBXBvY5jN4EKQ2k5bkASi9hE7zfseJLPFngVe7V"]'
2026-02-08 04:47:21.822 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:47:21.822 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41935/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.161.65/tcp/31127/p2p/16Uiu2HAkvcFrZzxqSyg7ejiQP4RBuPzHjT8sqKZUd2361g6wbnpe"]'
2026-02-08 04:47:21.848 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:47:21.849 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29916/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:47:21.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:47:21.858 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31126/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:47:21.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:47:21.860 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41935/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-08 04:47:21.863 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:47:21.864 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41935/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770526041863996460}}'
2026-02-08 04:47:21.876 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:47:21.879 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:47:21.880 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:47:21.881 DEBUG [src.node.waku_node] Stopping container with id c16c0fa7669b
2026-02-08 04:47:22.468 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:47:22.468 DEBUG [src.node.waku_node] Stopping container with id a872ddc629e7
2026-02-08 04:47:22.983 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:47:22.984 DEBUG [src.node.waku_node] Stopping container with id f9a43363210a
2026-02-08 04:47:23.283 ERROR [src.node.docker_mananger] Max retries reached for container c16c0fa7669b. Exiting log stream.
2026-02-08 04:47:23.528 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:47:23.529 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:47:23.538 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:47:23.547 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:47:23.555 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
