[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_while_store_node_is_stopped_without_removing with id: 2026-02-08_04-48-58__29c97166-b1b1-475a-b3e4-f2d570a88239
[35mDEBUG   [0m src.steps.common:common.py:19 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:86 WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-08_04-48-58__29c97166-b1b1-475a-b3e4-f2d570a88239__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:90 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.200.108
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37841', '37842', '37843', '37844', '37845']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:176 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37841:37841 -p 37842:37842 -p 37843:37843 -p 37844:37844 -p 37845:37845 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37843 --rest-port=37841 --tcp-port=37842 --discv5-udp-port=37844 --rest-address=0.0.0.0 --nat=extip:172.18.200.108 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e57180ab6eec11e3e4665f12f1b572d485cc3c9bf1c55e39fbbe703bdc6cc0d7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37845 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.200.108 waku 3352229360f13ae30ea4eb4bcbd138183b71702eb36f88007b6e9b3de79e3f7d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3352229360f1. Setting up logs at ./log/docker/publishing_node1_2026-02-08_04-48-58__29c97166-b1b1-475a-b3e4-f2d570a88239__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:190 Started container from image wakuorg/nwaku:latest. REST: 37841
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9ce211b9cca7. Exiting log stream.
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e7ebcf05a3c4. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37841/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37841/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.108/tcp/37842/p2p/16Uiu2HAmFAgKGnvEbEND5JAi62ntZ32BZiaZdiGuJy3ktnPmmKBN","/ip4/172.18.200.108/tcp/37843/ws/p2p/16Uiu2HAmFAgKGnvEbEND5JAi62ntZ32BZiaZdiGuJy3ktnPmmKBN"],"enrUri":"enr:-L24QEOfsdL47V4R6svAbl-EkHUprLF_KaSA3qTvhVHW6GM3bYjHy4oEJs7WPhqKoF5DC35O6OWFDRX3tEfzAGtuiGMCgmlkgnY0gmlwhKwSyGyKbXVsdGlhZGRyc5YACASsEshsBpPSAAoErBLIbAaT090DgnJzhQADAQAAiXNlY3AyNTZrMaEDJVJn-PyitCSxZrrzw2qhXWsIQv7z8PQ2pDJI4KeeYAGDdGNwgpPSg3VkcIKT1IV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:292 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:86 WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-08_04-48-58__29c97166-b1b1-475a-b3e4-f2d570a88239__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:90 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.94.157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55199', '55200', '55201', '55202', '55203']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:176 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55199:55199 -p 55200:55200 -p 55201:55201 -p 55202:55202 -p 55203:55203 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55201 --rest-port=55199 --tcp-port=55200 --discv5-udp-port=55202 --rest-address=0.0.0.0 --nat=extip:172.18.94.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=398d25ba0d879e79cc85a17d9b1efdee30c3e3d2e4eb89a7c7b7f5fd86fd031b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55203 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEOfsdL47V4R6svAbl-EkHUprLF_KaSA3qTvhVHW6GM3bYjHy4oEJs7WPhqKoF5DC35O6OWFDRX3tEfzAGtuiGMCgmlkgnY0gmlwhKwSyGyKbXVsdGlhZGRyc5YACASsEshsBpPSAAoErBLIbAaT090DgnJzhQADAQAAiXNlY3AyNTZrMaEDJVJn-PyitCSxZrrzw2qhXWsIQv7z8PQ2pDJI4KeeYAGDdGNwgpPSg3VkcIKT1IV3YWt1MgM --storenode=/ip4/172.18.200.108/tcp/37842/p2p/16Uiu2HAmFAgKGnvEbEND5JAi62ntZ32BZiaZdiGuJy3ktnPmmKBN --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.94.157 waku 3bbcc754b9234afce072ecb129d08aeb5b8d4532dc9138e2f727bed49bc2632b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3bbcc754b923. Setting up logs at ./log/docker/store_node1_2026-02-08_04-48-58__29c97166-b1b1-475a-b3e4-f2d570a88239__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:190 Started container from image wakuorg/nwaku:latest. REST: 55199
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55199/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55199/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.157/tcp/55200/p2p/16Uiu2HAmTXGMQWj479ggyAaET6neWLXqka5XAp3hb1LE3mh3UkXD","/ip4/172.18.94.157/tcp/55201/ws/p2p/16Uiu2HAmTXGMQWj479ggyAaET6neWLXqka5XAp3hb1LE3mh3UkXD"],"enrUri":"enr:-L24QGuK7yNQmA1-tprvRoC5h5my6iOVVT-v7bvV3lBymqJXPekyILo9Yt8zdE6DhBOHRHjbmIHXMqX0pLQ3dTGbI1ICgmlkgnY0gmlwhKwSXp2KbXVsdGlhZGRyc5YACASsEl6dBtegAAoErBJenQbXod0DgnJzhQADAQAAiXNlY3AyNTZrMaED3OTAPiOhouP6LL1Ej9bEj968-Sy21V3rf6_ucE5yzDyDdGNwgtegg3VkcILXooV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:292 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55199/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.200.108/tcp/37842/p2p/16Uiu2HAmFAgKGnvEbEND5JAi62ntZ32BZiaZdiGuJy3ktnPmmKBN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37841/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37841/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:211 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37841/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xee7dfb72de8994e2a5f2bf3ced46c6cdf01e25f973973ebdbe6b387f1ab8d128"}]}'
[35mDEBUG   [0m src.steps.store:store.py:228 messages length is 1
[35mDEBUG   [0m src.steps.store:store.py:211 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55199/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"72ce16a77ccbce8986e1","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xee7dfb72de8994e2a5f2bf3ced46c6cdf01e25f973973ebdbe6b387f1ab8d128"}]}'
[35mDEBUG   [0m src.steps.store:store.py:228 messages length is 1
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37841/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55199/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55199/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55199/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.157/tcp/55200/p2p/16Uiu2HAmTXGMQWj479ggyAaET6neWLXqka5XAp3hb1LE3mh3UkXD","/ip4/172.18.94.157/tcp/55201/ws/p2p/16Uiu2HAmTXGMQWj479ggyAaET6neWLXqka5XAp3hb1LE3mh3UkXD"],"enrUri":"enr:-L24QGuK7yNQmA1-tprvRoC5h5my6iOVVT-v7bvV3lBymqJXPekyILo9Yt8zdE6DhBOHRHjbmIHXMqX0pLQ3dTGbI1ICgmlkgnY0gmlwhKwSXp2KbXVsdGlhZGRyc5YACASsEl6dBtegAAoErBJenQbXod0DgnJzhQADAQAAiXNlY3AyNTZrMaED3OTAPiOhouP6LL1Ej9bEj968-Sy21V3rf6_ucE5yzDyDdGNwgtegg3VkcILXooV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:292 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37841/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xee7dfb72de8994e2a5f2bf3ced46c6cdf01e25f973973ebdbe6b387f1ab8d128"},{"messageHash":"0xc0cf48a222a566860c2e68b0cb15d507ef9cc819d45696a24d2d1008abc0d422"}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55199/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"f710255892c4a764ed49","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xee7dfb72de8994e2a5f2bf3ced46c6cdf01e25f973973ebdbe6b387f1ab8d128"},{"messageHash":"0xc0cf48a222a566860c2e68b0cb15d507ef9cc819d45696a24d2d1008abc0d422"}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:234 Stopping container with id 3352229360f1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:241 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:234 Stopping container with id 3bbcc754b923
[35mDEBUG   [0m src.node.waku_node:waku_node.py:241 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.