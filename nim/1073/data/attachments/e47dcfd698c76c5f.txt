2026-02-08 04:53:57.857 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-08 04:53:57.857 DEBUG [tests.conftest] Running test: test_content_topic_also_in_docker_flags[/aaaaa/3/bbbbb/proto] with id: 2026-02-08_04-53-57__053b5057-02f7-4afe-aa7a-6b946ee09dfb
2026-02-08 04:53:57.858 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-08 04:53:57.858 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-08 04:53:57.858 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-08 04:53:57.865 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:53:57.865 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-08_04-53-57__053b5057-02f7-4afe-aa7a-6b946ee09dfb__wakuorg_nwaku:latest.log
2026-02-08 04:53:57.866 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:53:57.866 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:53:57.867 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:53:57.867 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.59.129
2026-02-08 04:53:57.867 DEBUG [src.node.docker_mananger] Generated ports ['61010', '61011', '61012', '61013', '61014']
2026-02-08 04:53:57.868 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-02-08 04:53:57.868 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-08 04:53:57.868 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:53:57.868 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:53:57.868 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:53:57.868 DEBUG [src.node.docker_mananger] docker run -i -t -p 61010:61010 -p 61011:61011 -p 61012:61012 -p 61013:61013 -p 61014:61014 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61012 --rest-port=61010 --tcp-port=61011 --discv5-udp-port=61013 --rest-address=0.0.0.0 --nat=extip:172.18.59.129 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b99ddb4841f9f0c35c32cbb88b70ace8ac5e4eee6f2b05dab8fa0c0efff1fbf9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61014 --metrics-logging=true --relay=true --filter=true --content-topic=/aaaaa/3/bbbbb/proto
2026-02-08 04:53:58.065 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.59.129 waku b59c590424a833f2ab16750352cf019145b0e709c6e2075b2f130433b48c57ae
2026-02-08 04:53:58.095 DEBUG [src.node.docker_mananger] Container started with ID b59c590424a8. Setting up logs at ./log/docker/node1_2026-02-08_04-53-57__053b5057-02f7-4afe-aa7a-6b946ee09dfb__wakuorg_nwaku:latest.log
2026-02-08 04:53:58.098 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61010
2026-02-08 04:53:58.098 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:53:58.102 ERROR [src.node.docker_mananger] Max retries reached for container ff853a073509. Exiting log stream.
2026-02-08 04:53:58.661 ERROR [src.node.docker_mananger] Max retries reached for container a815ec05311d. Exiting log stream.
2026-02-08 04:53:59.101 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61010/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:53:59.104 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-08 04:53:59.104 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:53:59.104 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61010/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:53:59.106 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.129/tcp/61011/p2p/16Uiu2HAm9MeJNm8wsXw54K9r8YPsK2XEpz98NXCSap81m5bFmpFm","/ip4/172.18.59.129/tcp/61012/ws/p2p/16Uiu2HAm9MeJNm8wsXw54K9r8YPsK2XEpz98NXCSap81m5bFmpFm"],"enrUri":"enr:-L24QKTIYRLyV35U9NWy-63bJr3cy9ojHbzNmjj0h8ldOQpuXHWmz3Pj0r85gIepNuJ_srYPuzpDxngbUk9Au0o_K8kCgmlkgnY0gmlwhKwSO4GKbXVsdGlhZGRyc5YACASsEjuBBu5TAAoErBI7gQbuVN0DgnJzhQACAQAAiXNlY3AyNTZrMaECzvtlA8jB8-WQ1vglwyU2R-2Dl_L12M4GLdYexJoV8vSDdGNwgu5Tg3VkcILuVYV3YWt1MgU"}'
2026-02-08 04:53:59.107 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:53:59.113 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-08 04:53:59.113 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-08_04-53-57__053b5057-02f7-4afe-aa7a-6b946ee09dfb__wakuorg_nwaku:latest.log
2026-02-08 04:53:59.113 DEBUG [src.node.waku_node] Starting Node...
2026-02-08 04:53:59.113 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-08 04:53:59.115 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-08 04:53:59.115 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.90.51
2026-02-08 04:53:59.115 DEBUG [src.node.docker_mananger] Generated ports ['2818', '2819', '2820', '2821', '2822']
2026-02-08 04:53:59.115 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2026-02-08 04:53:59.115 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-08 04:53:59.115 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-08 04:53:59.116 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-08 04:53:59.116 DEBUG [src.node.waku_node] Using volumes []
2026-02-08 04:53:59.116 DEBUG [src.node.docker_mananger] docker run -i -t -p 2818:2818 -p 2819:2819 -p 2820:2820 -p 2821:2821 -p 2822:2822 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2820 --rest-port=2818 --tcp-port=2819 --discv5-udp-port=2821 --rest-address=0.0.0.0 --nat=extip:172.18.90.51 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c22b5f3f8fee68a29cbedb605215dab4fac5ec4ee4ff9f6f3ba945450c488eaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2822 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKTIYRLyV35U9NWy-63bJr3cy9ojHbzNmjj0h8ldOQpuXHWmz3Pj0r85gIepNuJ_srYPuzpDxngbUk9Au0o_K8kCgmlkgnY0gmlwhKwSO4GKbXVsdGlhZGRyc5YACASsEjuBBu5TAAoErBI7gQbuVN0DgnJzhQACAQAAiXNlY3AyNTZrMaECzvtlA8jB8-WQ1vglwyU2R-2Dl_L12M4GLdYexJoV8vSDdGNwgu5Tg3VkcILuVYV3YWt1MgU --content-topic=/aaaaa/3/bbbbb/proto
2026-02-08 04:53:59.304 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.90.51 waku 8753ea63a472d9773349dd020d0f01c95a6e92e8933e9a335092998962f6e2ff
2026-02-08 04:53:59.335 DEBUG [src.node.docker_mananger] Container started with ID 8753ea63a472. Setting up logs at ./log/docker/node2_2026-02-08_04-53-57__053b5057-02f7-4afe-aa7a-6b946ee09dfb__wakuorg_nwaku:latest.log
2026-02-08 04:53:59.335 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2818
2026-02-08 04:53:59.335 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-08 04:54:00.336 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2818/health" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:54:00.351 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-08 04:54:00.353 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-08 04:54:00.354 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2818/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:54:00.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.90.51/tcp/2819/p2p/16Uiu2HAm7nxfhe9en3yUEBP6yt7Z17giizURwUbdkhe3yLEhgTU5","/ip4/172.18.90.51/tcp/2820/ws/p2p/16Uiu2HAm7nxfhe9en3yUEBP6yt7Z17giizURwUbdkhe3yLEhgTU5"],"enrUri":"enr:-L24QMpvHHQIqa0X8ZXb4iqvXMUOvQOT0kEAtmX7qClrhacnboU4EBT-XEdGTAWhNaDdo8lGpphF-0GgIpQhLS9fv98CgmlkgnY0gmlwhKwSWjOKbXVsdGlhZGRyc5YACASsElozBgsDAAoErBJaMwYLBN0DgnJzhQACAQAAiXNlY3AyNTZrMaECt8BPMqSCSUEzV22axJbYCLzcE085OOBjph8dM6bL2kKDdGNwggsDg3VkcIILBYV3YWt1MgE"}'
2026-02-08 04:54:00.359 INFO [src.node.waku_node] REST service is ready !!
2026-02-08 04:54:00.359 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2818/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.129/tcp/61011/p2p/16Uiu2HAm9MeJNm8wsXw54K9r8YPsK2XEpz98NXCSap81m5bFmpFm"]'
2026-02-08 04:54:00.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:54:00.363 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61010/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-08 04:54:00.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:54:00.365 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2818/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2026-02-08 04:54:00.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:54:00.368 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61010/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-08 04:54:00.372 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-08 04:54:00.373 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-08 04:54:00.473 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-08 04:54:00.474 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61010/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:54:00.476 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770526440368462429,"ephemeral":false,"proof":""}]'
2026-02-08 04:54:00.478 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-08 04:54:00.478 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2818/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-08 04:54:00.480 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770526440368462429,"ephemeral":false,"proof":""}]'
2026-02-08 04:54:00.483 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-08 04:54:00.484 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-08 04:54:00.484 DEBUG [src.node.waku_node] Stopping container with id b59c590424a8
2026-02-08 04:54:01.048 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:54:01.048 DEBUG [src.node.waku_node] Stopping container with id 8753ea63a472
2026-02-08 04:54:01.583 DEBUG [src.node.waku_node] Container stopped.
2026-02-08 04:54:01.585 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-08 04:54:01.590 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-08 04:54:01.594 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
