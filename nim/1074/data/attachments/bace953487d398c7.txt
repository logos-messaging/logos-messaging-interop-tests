2026-02-09 04:49:20.265 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:49:20.266 DEBUG [tests.conftest] Running test: test_relay_subscribe_with_invalid_pubsub_topic_format with id: 2026-02-09_04-49-20__dba96bfd-b874-4379-a922-c5c9716a8690
2026-02-09 04:49:20.266 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:49:20.266 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-09 04:49:20.267 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-09 04:49:20.274 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:49:20.274 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-09_04-49-20__dba96bfd-b874-4379-a922-c5c9716a8690__wakuorg_nwaku:latest.log
2026-02-09 04:49:20.274 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:49:20.274 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:49:20.276 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:49:20.276 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.82.225
2026-02-09 04:49:20.276 DEBUG [src.node.docker_mananger] Generated ports ['24051', '24052', '24053', '24054', '24055']
2026-02-09 04:49:20.276 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:49:20.276 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:49:20.276 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:49:20.277 DEBUG [src.node.docker_mananger] docker run -i -t -p 24051:24051 -p 24052:24052 -p 24053:24053 -p 24054:24054 -p 24055:24055 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24053 --rest-port=24051 --tcp-port=24052 --discv5-udp-port=24054 --rest-address=0.0.0.0 --nat=extip:172.18.82.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=37f121ffce7fef88babeed0205189ededdbb62aacdebdd9e57428dd6a2fc9ec6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24055 --metrics-logging=true --relay=true
2026-02-09 04:49:20.472 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.82.225 waku bffa4b12a287f98986cb303f69f3e50a3fb437eab5a39eb972174218f4a59f09
2026-02-09 04:49:20.505 DEBUG [src.node.docker_mananger] Container started with ID bffa4b12a287. Setting up logs at ./log/docker/node1_2026-02-09_04-49-20__dba96bfd-b874-4379-a922-c5c9716a8690__wakuorg_nwaku:latest.log
2026-02-09 04:49:20.505 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24051
2026-02-09 04:49:20.505 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:49:20.520 ERROR [src.node.docker_mananger] Max retries reached for container 1bc30f583919. Exiting log stream.
2026-02-09 04:49:21.027 ERROR [src.node.docker_mananger] Max retries reached for container 59626d72c968. Exiting log stream.
2026-02-09 04:49:21.506 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24051/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:49:21.509 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:49:21.509 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:49:21.510 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24051/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:49:21.512 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.82.225/tcp/24052/p2p/16Uiu2HAmLkfHYrNK9jVwXqYMxwNMwYQLH7grAu9WPVWGujWNKAwF","/ip4/172.18.82.225/tcp/24053/ws/p2p/16Uiu2HAmLkfHYrNK9jVwXqYMxwNMwYQLH7grAu9WPVWGujWNKAwF"],"enrUri":"enr:-L24QHDUHtF-4H1cSNkxF6DTugFhxHMOwVyvCEzDhM6dqLC4d0a8ZrQqmOQMi3wgONH_lpkrM-F17ltLnrNVbAMQChACgmlkgnY0gmlwhKwSUuGKbXVsdGlhZGRyc5YACASsElLhBl30AAoErBJS4QZd9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeFFsincMfUyPEFSMNQEU6TjoamOOmWPypEga8OPXOE6DdGNwgl30g3VkcIJd9oV3YWt1MgE"}'
2026-02-09 04:49:21.512 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:49:21.520 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:49:21.520 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-09_04-49-20__dba96bfd-b874-4379-a922-c5c9716a8690__wakuorg_nwaku:latest.log
2026-02-09 04:49:21.520 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:49:21.520 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:49:21.522 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:49:21.522 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.123.153
2026-02-09 04:49:21.522 DEBUG [src.node.docker_mananger] Generated ports ['42149', '42150', '42151', '42152', '42153']
2026-02-09 04:49:21.522 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:49:21.522 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:49:21.522 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:49:21.523 DEBUG [src.node.docker_mananger] docker run -i -t -p 42149:42149 -p 42150:42150 -p 42151:42151 -p 42152:42152 -p 42153:42153 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42151 --rest-port=42149 --tcp-port=42150 --discv5-udp-port=42152 --rest-address=0.0.0.0 --nat=extip:172.18.123.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0e79bf582dcf7ada0e7cdbccdf3ddb71bdfbb97d1e9b36abcbcb3dc6a5feedb2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42153 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QHDUHtF-4H1cSNkxF6DTugFhxHMOwVyvCEzDhM6dqLC4d0a8ZrQqmOQMi3wgONH_lpkrM-F17ltLnrNVbAMQChACgmlkgnY0gmlwhKwSUuGKbXVsdGlhZGRyc5YACASsElLhBl30AAoErBJS4QZd9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeFFsincMfUyPEFSMNQEU6TjoamOOmWPypEga8OPXOE6DdGNwgl30g3VkcIJd9oV3YWt1MgE
2026-02-09 04:49:21.731 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.123.153 waku b4ff32d6d9993c122401c690e0ae5596aff812ab7a084dec5094db4e1c33229b
2026-02-09 04:49:21.769 DEBUG [src.node.docker_mananger] Container started with ID b4ff32d6d999. Setting up logs at ./log/docker/node2_2026-02-09_04-49-20__dba96bfd-b874-4379-a922-c5c9716a8690__wakuorg_nwaku:latest.log
2026-02-09 04:49:21.769 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42149
2026-02-09 04:49:21.770 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:49:22.771 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42149/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:49:22.781 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:49:22.782 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:49:22.782 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42149/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:49:22.786 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.123.153/tcp/42150/p2p/16Uiu2HAkzp8vFNSkQSLSjYNrdCpXDse1bmFGqU3P3Q237bEdtSrr","/ip4/172.18.123.153/tcp/42151/ws/p2p/16Uiu2HAkzp8vFNSkQSLSjYNrdCpXDse1bmFGqU3P3Q237bEdtSrr"],"enrUri":"enr:-L24QIP3K3OTRCrQWojJ6PCu0hDs0N3VayeuIsaTMm16nUW5ScJ7KM-kEzQFcse8nxdd26_b7wE55J-evOFTMckkzDUCgmlkgnY0gmlwhKwSe5mKbXVsdGlhZGRyc5YACASsEnuZBqSmAAoErBJ7mQakp90DgnJzhQADAQAAiXNlY3AyNTZrMaECUAusHTB5b3ElG5Q3EW-SYGUBlo7DuK73JMV4wNCedKeDdGNwgqSmg3VkcIKkqIV3YWt1MgE"}'
2026-02-09 04:49:22.786 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:49:22.786 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42149/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.82.225/tcp/24052/p2p/16Uiu2HAmLkfHYrNK9jVwXqYMxwNMwYQLH7grAu9WPVWGujWNKAwF"]'
2026-02-09 04:49:22.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:49:22.790 DEBUG [tests.relay.test_subscribe] Running test with payload /test/2/rs/0/1
2026-02-09 04:49:22.791 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/test/2/rs/0/1"'
2026-02-09 04:49:22.793 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24051/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-09 04:49:22.794 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/3/rs/0/1
2026-02-09 04:49:22.794 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/3/rs/0/1"'
2026-02-09 04:49:22.797 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24051/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-09 04:49:22.798 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/test/0/1
2026-02-09 04:49:22.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/test/0/1"'
2026-02-09 04:49:22.801 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24051/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-09 04:49:22.801 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/3/b
2026-02-09 04:49:22.802 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/3/b"'
2026-02-09 04:49:22.804 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24051/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-09 04:49:22.805 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/0
2026-02-09 04:49:22.805 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/0"'
2026-02-09 04:49:22.807 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24051/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-09 04:49:22.809 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:49:22.810 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:49:22.811 DEBUG [src.node.waku_node] Stopping container with id bffa4b12a287
2026-02-09 04:49:23.401 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:49:23.401 DEBUG [src.node.waku_node] Stopping container with id b4ff32d6d999
2026-02-09 04:49:23.985 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:49:23.988 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:49:23.992 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:49:23.996 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
