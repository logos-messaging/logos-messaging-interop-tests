2026-02-09 04:44:03.985 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:44:03.986 DEBUG [tests.conftest] Running test: test_store_without_pubsub_topic_and_content_topic with id: 2026-02-09_04-44-03__f33217b0-4d1a-4e44-950a-17e36c90b6ce
2026-02-09 04:44:03.986 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:44:03.986 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-09 04:44:03.986 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-09 04:44:03.993 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:44:03.993 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-09_04-44-03__f33217b0-4d1a-4e44-950a-17e36c90b6ce__wakuorg_nwaku:latest.log
2026-02-09 04:44:03.994 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:44:03.994 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:44:03.995 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:44:03.995 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.105.11
2026-02-09 04:44:03.995 DEBUG [src.node.docker_mananger] Generated ports ['36541', '36542', '36543', '36544', '36545']
2026-02-09 04:44:03.996 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:44:03.996 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:44:03.996 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:44:03.996 DEBUG [src.node.docker_mananger] docker run -i -t -p 36541:36541 -p 36542:36542 -p 36543:36543 -p 36544:36544 -p 36545:36545 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36543 --rest-port=36541 --tcp-port=36542 --discv5-udp-port=36544 --rest-address=0.0.0.0 --nat=extip:172.18.105.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5b0b0c7dd3ef24383c6849eb85fa748aa51b1bb63c3cda61d2bfd2e26ec0bd7e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36545 --metrics-logging=true --store=true --relay=true
2026-02-09 04:44:04.180 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.105.11 waku dde0c415b3ecb20b60fe9f57c5b0b1f10f07e1ed31b87686d51fa6e169b6845e
2026-02-09 04:44:04.215 ERROR [src.node.docker_mananger] Max retries reached for container 106753f8ab1d. Exiting log stream.
2026-02-09 04:44:04.216 DEBUG [src.node.docker_mananger] Container started with ID dde0c415b3ec. Setting up logs at ./log/docker/publishing_node1_2026-02-09_04-44-03__f33217b0-4d1a-4e44-950a-17e36c90b6ce__wakuorg_nwaku:latest.log
2026-02-09 04:44:04.218 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36541
2026-02-09 04:44:04.218 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:44:04.773 ERROR [src.node.docker_mananger] Max retries reached for container 831eb0cb0f42. Exiting log stream.
2026-02-09 04:44:05.218 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36541/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:05.221 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:44:05.222 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:44:05.222 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36541/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:05.224 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.105.11/tcp/36542/p2p/16Uiu2HAmKk7jhHRrsRkRgT3MmRXctQKmXdTdsNts2cB7zse6qtP4","/ip4/172.18.105.11/tcp/36543/ws/p2p/16Uiu2HAmKk7jhHRrsRkRgT3MmRXctQKmXdTdsNts2cB7zse6qtP4"],"enrUri":"enr:-L24QF0-RqyWiNkH0uozR9sB4D3kqBL48mz3THL_avZiXMqcMZ4o6k0CCxq_J5znLu0cVNWzVmdyvJYttbjybTmYtw8CgmlkgnY0gmlwhKwSaQuKbXVsdGlhZGRyc5YACASsEmkLBo6-AAoErBJpCwaOv90DgnJzhQADAQAAiXNlY3AyNTZrMaEDaVIQcoTdPGwLn_fvGY60wycFXMIPQ28wAPZQ6ZjEeRuDdGNwgo6-g3VkcIKOwIV3YWt1MgM"}'
2026-02-09 04:44:05.225 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:44:05.232 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:44:05.232 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-09_04-44-03__f33217b0-4d1a-4e44-950a-17e36c90b6ce__wakuorg_nwaku:latest.log
2026-02-09 04:44:05.232 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:44:05.232 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:44:05.233 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:44:05.234 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.251.183
2026-02-09 04:44:05.234 DEBUG [src.node.docker_mananger] Generated ports ['38415', '38416', '38417', '38418', '38419']
2026-02-09 04:44:05.234 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:44:05.234 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:44:05.234 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:44:05.234 DEBUG [src.node.docker_mananger] docker run -i -t -p 38415:38415 -p 38416:38416 -p 38417:38417 -p 38418:38418 -p 38419:38419 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38417 --rest-port=38415 --tcp-port=38416 --discv5-udp-port=38418 --rest-address=0.0.0.0 --nat=extip:172.18.251.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9fb8eb0bc512bcc0fbfbfbb4e5cdfe16e307c3b57becdfc2deda03e4c90d3ead --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38419 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QF0-RqyWiNkH0uozR9sB4D3kqBL48mz3THL_avZiXMqcMZ4o6k0CCxq_J5znLu0cVNWzVmdyvJYttbjybTmYtw8CgmlkgnY0gmlwhKwSaQuKbXVsdGlhZGRyc5YACASsEmkLBo6-AAoErBJpCwaOv90DgnJzhQADAQAAiXNlY3AyNTZrMaEDaVIQcoTdPGwLn_fvGY60wycFXMIPQ28wAPZQ6ZjEeRuDdGNwgo6-g3VkcIKOwIV3YWt1MgM --storenode=/ip4/172.18.105.11/tcp/36542/p2p/16Uiu2HAmKk7jhHRrsRkRgT3MmRXctQKmXdTdsNts2cB7zse6qtP4 --store=true --relay=true
2026-02-09 04:44:05.426 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.251.183 waku 33262b96dee67573f62b314def977a0104dcf4891c91e7ba9be2268c9e0d67d3
2026-02-09 04:44:05.459 DEBUG [src.node.docker_mananger] Container started with ID 33262b96dee6. Setting up logs at ./log/docker/store_node1_2026-02-09_04-44-03__f33217b0-4d1a-4e44-950a-17e36c90b6ce__wakuorg_nwaku:latest.log
2026-02-09 04:44:05.459 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38415
2026-02-09 04:44:05.460 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:44:06.461 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38415/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:06.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:44:06.465 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:44:06.466 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38415/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:06.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.183/tcp/38416/p2p/16Uiu2HAmETjynX5UUvdZt4uzAxeAiC59Pn1ufdWTa96WR2s5bAk4","/ip4/172.18.251.183/tcp/38417/ws/p2p/16Uiu2HAmETjynX5UUvdZt4uzAxeAiC59Pn1ufdWTa96WR2s5bAk4"],"enrUri":"enr:-L24QGgW_8z4DZ5tBJVquow16U_xCXwpAdXJWl_sktxVFiDmWvOV77hgqnCSvXfmXkjGx2Vuq2K_UfUbG0vNePwTRFECgmlkgnY0gmlwhKwS-7eKbXVsdGlhZGRyc5YACASsEvu3BpYQAAoErBL7twaWEd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGtW8YpX24RaNOijMPDx58a7ngrXbAgOUzkZxGZJJsBWDdGNwgpYQg3VkcIKWEoV3YWt1MgM"}'
2026-02-09 04:44:06.469 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:44:06.469 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38415/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.105.11/tcp/36542/p2p/16Uiu2HAmKk7jhHRrsRkRgT3MmRXctQKmXdTdsNts2cB7zse6qtP4"]'
2026-02-09 04:44:06.472 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:06.473 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36541/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:44:06.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:06.475 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38415/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:44:06.477 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:06.478 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:06.478 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:06.482 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:06.483 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:06.684 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:06.684 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:06.689 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:06.690 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:06.891 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:06.892 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:06.897 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:06.898 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:07.099 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:07.099 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:07.104 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:07.104 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:07.305 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:07.305 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:07.311 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:07.311 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:07.512 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:07.512 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:07.518 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:07.519 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:07.720 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:07.720 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:07.725 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:07.726 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:07.927 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:07.927 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36541/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:07.933 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:07.933 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:08.135 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36541/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:08.138 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4d9f9f4d352e790ccc392537ae3e82b6e2275ea612645fce46b7b81fbe083d94"},{"messageHash":"0xadf0a43f2c085962fde29696edc86b3d8a92f9bf4a20e69d1ad69cd06e0accbb"},{"messageHash":"0xbd63241d27600f6d2ec6a17b21f80804dc75fe18281a7b79f53ef36d7d299746"},{"messageHash":"0x16c79bb7469d6556bb62fb9af4d2c3e41c0b58b5d6d305dc17896682260e2f97"},{"messageHash":"0xb6282b24ceda932c3d503de2ed3538e4aa2f7c396878a0f9b22a3100feb300d2"},{"messageHash":"0x859cea99d9f14c6d881bb33ab0bc343f82ad2a8ef76ea5848ac7e48abd0c87b0"},{"messageHash":"0x83432040de0617a03c5e900106f6fab48915068cd9c3bf1ff26cc25292089f9c"},{"messageHash":"0xbcff92dee5e1f236d433d00813adc172973fbe13cd2685b8725aa5337c2c058f"}]}'
2026-02-09 04:44:08.138 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38415/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:08.141 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4d9f9f4d352e790ccc392537ae3e82b6e2275ea612645fce46b7b81fbe083d94"},{"messageHash":"0xadf0a43f2c085962fde29696edc86b3d8a92f9bf4a20e69d1ad69cd06e0accbb"},{"messageHash":"0xbd63241d27600f6d2ec6a17b21f80804dc75fe18281a7b79f53ef36d7d299746"},{"messageHash":"0x16c79bb7469d6556bb62fb9af4d2c3e41c0b58b5d6d305dc17896682260e2f97"},{"messageHash":"0xb6282b24ceda932c3d503de2ed3538e4aa2f7c396878a0f9b22a3100feb300d2"},{"messageHash":"0x859cea99d9f14c6d881bb33ab0bc343f82ad2a8ef76ea5848ac7e48abd0c87b0"},{"messageHash":"0x83432040de0617a03c5e900106f6fab48915068cd9c3bf1ff26cc25292089f9c"},{"messageHash":"0xbcff92dee5e1f236d433d00813adc172973fbe13cd2685b8725aa5337c2c058f"}]}'
2026-02-09 04:44:08.144 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:44:08.145 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:44:08.145 DEBUG [src.node.waku_node] Stopping container with id dde0c415b3ec
2026-02-09 04:44:08.697 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:44:08.698 DEBUG [src.node.waku_node] Stopping container with id 33262b96dee6
2026-02-09 04:44:09.264 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:44:09.266 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:44:09.274 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:44:09.282 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
