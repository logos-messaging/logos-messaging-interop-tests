2026-02-09 04:46:30.254 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:46:30.254 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2026-02-09_04-46-30__7fc56689-4fcf-4861-86fa-d2baf6dce22b
2026-02-09 04:46:30.254 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:46:30.255 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-09 04:46:30.262 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:46:30.262 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-09_04-46-30__7fc56689-4fcf-4861-86fa-d2baf6dce22b__wakuorg_nwaku:latest.log
2026-02-09 04:46:30.262 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:46:30.262 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:46:30.264 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:46:30.264 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.133.210
2026-02-09 04:46:30.264 DEBUG [src.node.docker_mananger] Generated ports ['27394', '27395', '27396', '27397', '27398']
2026-02-09 04:46:30.264 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:46:30.264 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:46:30.265 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:46:30.265 DEBUG [src.node.docker_mananger] docker run -i -t -p 27394:27394 -p 27395:27395 -p 27396:27396 -p 27397:27397 -p 27398:27398 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27396 --rest-port=27394 --tcp-port=27395 --discv5-udp-port=27397 --rest-address=0.0.0.0 --nat=extip:172.18.133.210 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8d3eeedf1ff219d9abc2cd5cd4d0f4f66a0d6ef1d8c70bfaacfbcaf8d0873e0b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27398 --metrics-logging=true --lightpush=true --relay=true
2026-02-09 04:46:30.454 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.133.210 waku 02378c5bc61efae38d53ab2f928c8d89f86e6074f72e366f3b72a20aae5529d5
2026-02-09 04:46:30.483 DEBUG [src.node.docker_mananger] Container started with ID 02378c5bc61e. Setting up logs at ./log/docker/receiving_node1_2026-02-09_04-46-30__7fc56689-4fcf-4861-86fa-d2baf6dce22b__wakuorg_nwaku:latest.log
2026-02-09 04:46:30.485 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27394
2026-02-09 04:46:30.485 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:46:30.521 ERROR [src.node.docker_mananger] Max retries reached for container f56e933cb834. Exiting log stream.
2026-02-09 04:46:31.038 ERROR [src.node.docker_mananger] Max retries reached for container dd937c324753. Exiting log stream.
2026-02-09 04:46:31.487 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27394/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:46:31.490 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:46:31.490 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:46:31.490 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27394/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:46:31.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.210/tcp/27395/p2p/16Uiu2HAmTJ1skBohD16LnJZbPTX3rHdSgBwCMKxTTwqFrbJSqAF9","/ip4/172.18.133.210/tcp/27396/ws/p2p/16Uiu2HAmTJ1skBohD16LnJZbPTX3rHdSgBwCMKxTTwqFrbJSqAF9"],"enrUri":"enr:-L24QIFEql3Yc1Bi7aMkH1mhfHLFB6DlXNL7-pcJBRvgYYaVGw04sNXE7ussvITBnAReMneOBD5Z6agCHjwPvImWnRsCgmlkgnY0gmlwhKwShdKKbXVsdGlhZGRyc5YACASsEoXSBmsDAAoErBKF0gZrBN0DgnJzhQADAQAAiXNlY3AyNTZrMaED2X_U0mgEgB6-kQLnpzqTC0ehi7iN1nq0o1qDJc4xZCiDdGNwgmsDg3VkcIJrBYV3YWt1Mgk"}'
2026-02-09 04:46:31.493 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:46:31.499 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:46:31.499 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-09_04-46-30__7fc56689-4fcf-4861-86fa-d2baf6dce22b__wakuorg_nwaku:latest.log
2026-02-09 04:46:31.500 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:46:31.500 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:46:31.501 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:46:31.501 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.202.71
2026-02-09 04:46:31.501 DEBUG [src.node.docker_mananger] Generated ports ['17414', '17415', '17416', '17417', '17418']
2026-02-09 04:46:31.501 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:46:31.502 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:46:31.502 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:46:31.502 DEBUG [src.node.docker_mananger] docker run -i -t -p 17414:17414 -p 17415:17415 -p 17416:17416 -p 17417:17417 -p 17418:17418 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17416 --rest-port=17414 --tcp-port=17415 --discv5-udp-port=17417 --rest-address=0.0.0.0 --nat=extip:172.18.202.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=781e76ccb90dab9c95bccb5db02a9cddbab70eb0f2d41af6e7c2b58ad48dbe34 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17418 --metrics-logging=true --lightpush=false --relay=true
2026-02-09 04:46:31.703 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.202.71 waku 3d69aabb8fba0032d79b5b08a18a60385c50fa2f3d70dbb0decebec0d6938a7f
2026-02-09 04:46:31.733 DEBUG [src.node.docker_mananger] Container started with ID 3d69aabb8fba. Setting up logs at ./log/docker/receiving_node2_2026-02-09_04-46-30__7fc56689-4fcf-4861-86fa-d2baf6dce22b__wakuorg_nwaku:latest.log
2026-02-09 04:46:31.733 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17414
2026-02-09 04:46:31.733 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:46:32.734 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17414/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:46:32.737 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:46:32.737 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:46:32.738 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17414/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:46:32.740 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.71/tcp/17415/p2p/16Uiu2HAmJSFbXoRNZ3eCfLrqgmdU6BiA9V4ttdJeQTUy4MxwuD7A","/ip4/172.18.202.71/tcp/17416/ws/p2p/16Uiu2HAmJSFbXoRNZ3eCfLrqgmdU6BiA9V4ttdJeQTUy4MxwuD7A"],"enrUri":"enr:-L24QFKJ752qh3Mx2ZQRUB3FuM7a34COo9QTKnZqUor2MGM_bUPmXQWyloNw-GFoZh1dtFoFXQG3qFT6yUgyVJZ7baICgmlkgnY0gmlwhKwSykeKbXVsdGlhZGRyc5YACASsEspHBkQHAAoErBLKRwZECN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVeLPKls3fcNId8GImJvXTMomZzIWTsX8j9DH5OhXOHWDdGNwgkQHg3VkcIJECYV3YWt1MgE"}'
2026-02-09 04:46:32.740 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:46:32.741 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17414/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.210/tcp/27395/p2p/16Uiu2HAmTJ1skBohD16LnJZbPTX3rHdSgBwCMKxTTwqFrbJSqAF9"]'
2026-02-09 04:46:32.774 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:46:32.782 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:46:32.782 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-09_04-46-30__7fc56689-4fcf-4861-86fa-d2baf6dce22b__wakuorg_nwaku:latest.log
2026-02-09 04:46:32.783 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:46:32.783 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:46:32.788 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:46:32.790 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.49
2026-02-09 04:46:32.790 DEBUG [src.node.docker_mananger] Generated ports ['46428', '46429', '46430', '46431', '46432']
2026-02-09 04:46:32.791 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:46:32.791 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:46:32.791 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:46:32.791 DEBUG [src.node.docker_mananger] docker run -i -t -p 46428:46428 -p 46429:46429 -p 46430:46430 -p 46431:46431 -p 46432:46432 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46430 --rest-port=46428 --tcp-port=46429 --discv5-udp-port=46431 --rest-address=0.0.0.0 --nat=extip:172.18.104.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=59758b55d69dff7b7d21bd4d0c8ac4ad5ecfe0f4a9f16ea6a83a1bc3d52aa43e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46432 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIFEql3Yc1Bi7aMkH1mhfHLFB6DlXNL7-pcJBRvgYYaVGw04sNXE7ussvITBnAReMneOBD5Z6agCHjwPvImWnRsCgmlkgnY0gmlwhKwShdKKbXVsdGlhZGRyc5YACASsEoXSBmsDAAoErBKF0gZrBN0DgnJzhQADAQAAiXNlY3AyNTZrMaED2X_U0mgEgB6-kQLnpzqTC0ehi7iN1nq0o1qDJc4xZCiDdGNwgmsDg3VkcIJrBYV3YWt1Mgk --lightpushnode=/ip4/172.18.133.210/tcp/27395/p2p/16Uiu2HAmTJ1skBohD16LnJZbPTX3rHdSgBwCMKxTTwqFrbJSqAF9 --lightpush=true --relay=true
2026-02-09 04:46:32.975 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.49 waku 2ccc1bdbfc61e29a1c9571bffb552f30d6f641b816fa671149a53b1e2055746d
2026-02-09 04:46:33.008 DEBUG [src.node.docker_mananger] Container started with ID 2ccc1bdbfc61. Setting up logs at ./log/docker/lightpush_node1_2026-02-09_04-46-30__7fc56689-4fcf-4861-86fa-d2baf6dce22b__wakuorg_nwaku:latest.log
2026-02-09 04:46:33.008 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46428
2026-02-09 04:46:33.009 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:46:34.010 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46428/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:46:34.014 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:46:34.015 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:46:34.015 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46428/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:46:34.017 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.49/tcp/46429/p2p/16Uiu2HAmPa3sine2aRX6gShGzDzsHEsEK3UyWc7jPzEq6Ni9NfiD","/ip4/172.18.104.49/tcp/46430/ws/p2p/16Uiu2HAmPa3sine2aRX6gShGzDzsHEsEK3UyWc7jPzEq6Ni9NfiD"],"enrUri":"enr:-L24QD779Js2meGiwFX_Gxp9jkxjCM4UsOudD79AXdwNxBd_DcfMWcpSlg0sBJG4XCIEtSv4GAo1khpgFxVgckm75rECgmlkgnY0gmlwhKwSaDGKbXVsdGlhZGRyc5YACASsEmgxBrVdAAoErBJoMQa1Xt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoiyjM_9usbqqTZMjbyRN5kYEUU73OUzj1h8fAzfm7taDdGNwgrVdg3VkcIK1X4V3YWt1Mgk"}'
2026-02-09 04:46:34.017 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:46:34.018 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46428/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.210/tcp/27395/p2p/16Uiu2HAmTJ1skBohD16LnJZbPTX3rHdSgBwCMKxTTwqFrbJSqAF9"]'
2026-02-09 04:46:34.046 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:46:34.051 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46428/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.202.71/tcp/17415/p2p/16Uiu2HAmJSFbXoRNZ3eCfLrqgmdU6BiA9V4ttdJeQTUy4MxwuD7A"]'
2026-02-09 04:46:34.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:46:34.074 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27394/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:46:34.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:46:34.085 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17414/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:46:34.094 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:46:34.095 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46428/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:46:34.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:46:34.098 DEBUG [src.steps.light_push] Lightpushing message
2026-02-09 04:46:34.098 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46428/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770612394098348327, "version": 2.1}}'
2026-02-09 04:46:34.101 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46428/lightpush/v1/message. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-09 04:46:34.103 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:46:34.104 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:46:34.104 DEBUG [src.node.waku_node] Stopping container with id 02378c5bc61e
2026-02-09 04:46:34.670 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:46:34.673 DEBUG [src.node.waku_node] Stopping container with id 3d69aabb8fba
2026-02-09 04:46:35.210 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:46:35.210 DEBUG [src.node.waku_node] Stopping container with id 2ccc1bdbfc61
2026-02-09 04:46:35.483 ERROR [src.node.docker_mananger] Max retries reached for container 02378c5bc61e. Exiting log stream.
2026-02-09 04:46:35.752 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:46:35.753 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:46:35.760 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:46:35.768 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:46:35.775 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
