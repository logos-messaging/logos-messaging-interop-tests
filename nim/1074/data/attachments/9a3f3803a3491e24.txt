2026-02-09 04:44:22.101 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:44:22.102 DEBUG [tests.conftest] Running test: test_store_with_long_string_pubsub_topic with id: 2026-02-09_04-44-22__30fc0e06-ce61-4bf8-8067-855edd9f2ff6
2026-02-09 04:44:22.102 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:44:22.102 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-09 04:44:22.102 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-09 04:44:22.111 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:44:22.111 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-09_04-44-22__30fc0e06-ce61-4bf8-8067-855edd9f2ff6__wakuorg_nwaku:latest.log
2026-02-09 04:44:22.111 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:44:22.112 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:44:22.113 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:44:22.113 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.77
2026-02-09 04:44:22.113 DEBUG [src.node.docker_mananger] Generated ports ['7033', '7034', '7035', '7036', '7037']
2026-02-09 04:44:22.114 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:44:22.114 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:44:22.114 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:44:22.114 DEBUG [src.node.docker_mananger] docker run -i -t -p 7033:7033 -p 7034:7034 -p 7035:7035 -p 7036:7036 -p 7037:7037 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7035 --rest-port=7033 --tcp-port=7034 --discv5-udp-port=7036 --rest-address=0.0.0.0 --nat=extip:172.18.80.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7adc76fb4abdaf120a6e1ac917191cfa490b67da65befbc8b826d4f6e7b6fe29 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7037 --metrics-logging=true --store=true --relay=true
2026-02-09 04:44:22.316 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.77 waku 7acf063b3ce1610f6496651e87959a87d770dfc1b264b9584d246182168dba61
2026-02-09 04:44:22.324 ERROR [src.node.docker_mananger] Max retries reached for container 6cae1fedaecc. Exiting log stream.
2026-02-09 04:44:22.361 DEBUG [src.node.docker_mananger] Container started with ID 7acf063b3ce1. Setting up logs at ./log/docker/publishing_node1_2026-02-09_04-44-22__30fc0e06-ce61-4bf8-8067-855edd9f2ff6__wakuorg_nwaku:latest.log
2026-02-09 04:44:22.362 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7033
2026-02-09 04:44:22.362 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:44:22.891 ERROR [src.node.docker_mananger] Max retries reached for container c2b309754a65. Exiting log stream.
2026-02-09 04:44:23.363 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7033/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:23.366 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:44:23.366 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:44:23.366 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7033/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:23.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.77/tcp/7034/p2p/16Uiu2HAm7ditwZCTvwx1YCKV1mhTq7P27JWbxruKx8nnfMjv7zCp","/ip4/172.18.80.77/tcp/7035/ws/p2p/16Uiu2HAm7ditwZCTvwx1YCKV1mhTq7P27JWbxruKx8nnfMjv7zCp"],"enrUri":"enr:-L24QJSDAQv_XwliHJSocbT26yZbT_bm_RwaXVui8heG65JiXs39otFI-NKWt_XoDE3XWCh1olhwejjiguFEJAAEoEwCgmlkgnY0gmlwhKwSUE2KbXVsdGlhZGRyc5YACASsElBNBht6AAoErBJQTQYbe90DgnJzhQADAQAAiXNlY3AyNTZrMaECtWKCpfZsJZVOqTMDLUv6dc-IfYcMGfqXmF72xAct7DGDdGNwght6g3VkcIIbfIV3YWt1MgM"}'
2026-02-09 04:44:23.369 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:44:23.376 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:44:23.376 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-09_04-44-22__30fc0e06-ce61-4bf8-8067-855edd9f2ff6__wakuorg_nwaku:latest.log
2026-02-09 04:44:23.376 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:44:23.376 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:44:23.378 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:44:23.378 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.54.50
2026-02-09 04:44:23.378 DEBUG [src.node.docker_mananger] Generated ports ['40886', '40887', '40888', '40889', '40890']
2026-02-09 04:44:23.378 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:44:23.378 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:44:23.378 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:44:23.378 DEBUG [src.node.docker_mananger] docker run -i -t -p 40886:40886 -p 40887:40887 -p 40888:40888 -p 40889:40889 -p 40890:40890 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40888 --rest-port=40886 --tcp-port=40887 --discv5-udp-port=40889 --rest-address=0.0.0.0 --nat=extip:172.18.54.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ceba49bd1ec8fec7101c0a49ad7d3ea64c227aaddcdf50b26cfa34572035527d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40890 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJSDAQv_XwliHJSocbT26yZbT_bm_RwaXVui8heG65JiXs39otFI-NKWt_XoDE3XWCh1olhwejjiguFEJAAEoEwCgmlkgnY0gmlwhKwSUE2KbXVsdGlhZGRyc5YACASsElBNBht6AAoErBJQTQYbe90DgnJzhQADAQAAiXNlY3AyNTZrMaECtWKCpfZsJZVOqTMDLUv6dc-IfYcMGfqXmF72xAct7DGDdGNwght6g3VkcIIbfIV3YWt1MgM --storenode=/ip4/172.18.80.77/tcp/7034/p2p/16Uiu2HAm7ditwZCTvwx1YCKV1mhTq7P27JWbxruKx8nnfMjv7zCp --store=true --relay=true
2026-02-09 04:44:23.573 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.54.50 waku da01a07399faa312c97e0b028406bc346132c35b2f9dda1f112e2838c0d2f446
2026-02-09 04:44:23.608 DEBUG [src.node.docker_mananger] Container started with ID da01a07399fa. Setting up logs at ./log/docker/store_node1_2026-02-09_04-44-22__30fc0e06-ce61-4bf8-8067-855edd9f2ff6__wakuorg_nwaku:latest.log
2026-02-09 04:44:23.608 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40886
2026-02-09 04:44:23.608 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:44:24.609 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40886/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:24.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:44:24.614 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:44:24.614 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40886/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:24.617 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.50/tcp/40887/p2p/16Uiu2HAmLdgpezaqrHKZ5x1UMwgyrBjL5UTcjEfzNafdMtuXEd8G","/ip4/172.18.54.50/tcp/40888/ws/p2p/16Uiu2HAmLdgpezaqrHKZ5x1UMwgyrBjL5UTcjEfzNafdMtuXEd8G"],"enrUri":"enr:-L24QOZOdXwHPtZ3qtkX5k5I3ROLQuNtDMueGk1DxG5geITXcb5rlCMutOioiQ5EYQCMO2pV_nbKY_CY7ckbWvnApZ8CgmlkgnY0gmlwhKwSNjKKbXVsdGlhZGRyc5YACASsEjYyBp-3AAoErBI2MgafuN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdogYblloOd1bGMUmz9qeqUYYoaguiB2vFydke7ePZ92DdGNwgp-3g3VkcIKfuYV3YWt1MgM"}'
2026-02-09 04:44:24.617 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:44:24.617 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40886/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.80.77/tcp/7034/p2p/16Uiu2HAm7ditwZCTvwx1YCKV1mhTq7P27JWbxruKx8nnfMjv7zCp"]'
2026-02-09 04:44:24.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:24.620 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7033/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:44:24.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:24.623 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40886/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:44:24.625 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:24.625 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:24.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7033/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:24.630 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:24.631 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:24.832 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:24.832 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7033/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:24.838 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:24.838 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:25.040 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:25.040 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7033/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:25.046 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:25.046 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:25.247 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:25.248 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7033/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:25.254 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:25.254 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:25.455 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:25.455 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7033/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:25.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:25.462 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:25.663 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:25.663 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7033/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:25.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:25.669 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:25.870 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:25.870 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7033/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:25.876 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:25.878 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:26.078 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:26.079 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7033/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:26.085 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:26.086 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:26.416 DEBUG [tests.store.test_topics] Trying to get stored msg with url topic size million 
2026-02-09 04:44:26.417 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:26.417 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7033/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:26.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:26.424 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:26.626 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-09 04:44:26.845 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-02-09 04:44:31.954 ERROR [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2026-02-09 04:44:31.958 ERROR [tests.store.test_topics] store request with very long pubsub topic wasn't accepted 
2026-02-09 04:44:31.961 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:44:31.963 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:44:31.963 DEBUG [src.node.waku_node] Stopping container with id 7acf063b3ce1
2026-02-09 04:44:32.538 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:44:32.538 DEBUG [src.node.waku_node] Stopping container with id da01a07399fa
2026-02-09 04:44:33.119 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:44:33.122 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:44:33.130 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:44:33.137 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
