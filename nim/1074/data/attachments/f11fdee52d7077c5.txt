2026-02-09 04:41:14.436 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:41:14.436 DEBUG [tests.conftest] Running test: test_lightpush with id: 2026-02-09_04-41-14__f7faf11a-c36c-42ac-9f63-2616e75f392f
2026-02-09 04:41:14.436 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:41:14.437 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-09 04:41:14.437 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-09 04:41:14.437 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-09 04:41:14.437 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-09 04:41:14.445 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:41:14.446 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-09_04-41-14__f7faf11a-c36c-42ac-9f63-2616e75f392f__wakuorg_nwaku:latest.log
2026-02-09 04:41:14.446 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:41:14.446 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:41:14.448 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:41:14.448 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.47.18
2026-02-09 04:41:14.448 DEBUG [src.node.docker_mananger] Generated ports ['58178', '58179', '58180', '58181', '58182']
2026-02-09 04:41:14.448 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:41:14.448 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:41:14.449 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:41:14.449 DEBUG [src.node.docker_mananger] docker run -i -t -p 58178:58178 -p 58179:58179 -p 58180:58180 -p 58181:58181 -p 58182:58182 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58180 --rest-port=58178 --tcp-port=58179 --discv5-udp-port=58181 --rest-address=0.0.0.0 --nat=extip:172.18.47.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2edfd2a16dd6d9d9ec19a12b78938af1d1ef58efb4a3d22fe9ce6012da1daa1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58182 --metrics-logging=true --lightpush=true --relay=true
2026-02-09 04:41:14.641 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.47.18 waku c4a3b6e80c6a9e9204dfbda5109c7166336723457b4d0f670ff10caaef9bfe5f
2026-02-09 04:41:14.672 DEBUG [src.node.docker_mananger] Container started with ID c4a3b6e80c6a. Setting up logs at ./log/docker/node1_2026-02-09_04-41-14__f7faf11a-c36c-42ac-9f63-2616e75f392f__wakuorg_nwaku:latest.log
2026-02-09 04:41:14.673 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58178
2026-02-09 04:41:14.673 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:41:14.683 ERROR [src.node.docker_mananger] Max retries reached for container 5a6b359ecb82. Exiting log stream.
2026-02-09 04:41:15.236 ERROR [src.node.docker_mananger] Max retries reached for container 58d077d8f772. Exiting log stream.
2026-02-09 04:41:15.674 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58178/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:15.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:41:15.677 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:41:15.678 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58178/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:15.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.18/tcp/58179/p2p/16Uiu2HAkywvq7cEtGSUviQy4iswVsZ365wMCNCVnYXGUBMUxcy8H","/ip4/172.18.47.18/tcp/58180/ws/p2p/16Uiu2HAkywvq7cEtGSUviQy4iswVsZ365wMCNCVnYXGUBMUxcy8H"],"enrUri":"enr:-L24QAXxUqp4A_DOC925YgXLTZZbIyeEfN7Ywaf_Xrzq9r-zevITUPasPTZBZAbih_TckwFkFnyTYo0uQMIpycbRS2cCgmlkgnY0gmlwhKwSLxKKbXVsdGlhZGRyc5YACASsEi8SBuNDAAoErBIvEgbjRN0DgnJzhQADAQAAiXNlY3AyNTZrMaECQy72nXIivmP6VYK9z3zBU7b8iLug52RJK60Y4DBpUk6DdGNwguNDg3VkcILjRYV3YWt1Mgk"}'
2026-02-09 04:41:15.680 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:41:15.687 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:41:15.687 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-09_04-41-14__f7faf11a-c36c-42ac-9f63-2616e75f392f__wakuorg_nwaku:latest.log
2026-02-09 04:41:15.687 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:41:15.687 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:41:15.689 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:41:15.689 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.250.86
2026-02-09 04:41:15.689 DEBUG [src.node.docker_mananger] Generated ports ['7429', '7430', '7431', '7432', '7433']
2026-02-09 04:41:15.689 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:41:15.689 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:41:15.690 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:41:15.690 DEBUG [src.node.docker_mananger] docker run -i -t -p 7429:7429 -p 7430:7430 -p 7431:7431 -p 7432:7432 -p 7433:7433 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7431 --rest-port=7429 --tcp-port=7430 --discv5-udp-port=7432 --rest-address=0.0.0.0 --nat=extip:172.18.250.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcb22e4ea7da376db52e3ffa8ab29edffca1cab9674fbe73ccd4aafa8a657305 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7433 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QAXxUqp4A_DOC925YgXLTZZbIyeEfN7Ywaf_Xrzq9r-zevITUPasPTZBZAbih_TckwFkFnyTYo0uQMIpycbRS2cCgmlkgnY0gmlwhKwSLxKKbXVsdGlhZGRyc5YACASsEi8SBuNDAAoErBIvEgbjRN0DgnJzhQADAQAAiXNlY3AyNTZrMaECQy72nXIivmP6VYK9z3zBU7b8iLug52RJK60Y4DBpUk6DdGNwguNDg3VkcILjRYV3YWt1Mgk
2026-02-09 04:41:15.876 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.250.86 waku e5f6eaa7806fc4397b4b94a63b4c9af4269bd76aaff02d0afdd4764a4e411a62
2026-02-09 04:41:15.910 DEBUG [src.node.docker_mananger] Container started with ID e5f6eaa7806f. Setting up logs at ./log/docker/node1_2026-02-09_04-41-14__f7faf11a-c36c-42ac-9f63-2616e75f392f__wakuorg_nwaku:latest.log
2026-02-09 04:41:15.910 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7429
2026-02-09 04:41:15.911 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:41:16.912 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7429/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:16.919 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:41:16.920 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:41:16.920 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7429/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:16.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.86/tcp/7430/p2p/16Uiu2HAmNkbB5rx87mJ1bxPoWk46SKc5Edcr2hYCecJmP3eRWwqZ","/ip4/172.18.250.86/tcp/7431/ws/p2p/16Uiu2HAmNkbB5rx87mJ1bxPoWk46SKc5Edcr2hYCecJmP3eRWwqZ"],"enrUri":"enr:-L24QH_KDMQXqVt4QJ-Cu-jHx5ED8Vc76fBWNy84lqEvt8oVSZPMvDGIMUR4frhyL_zbQaVTaWwJjkMzOzTWuaCkkXUCgmlkgnY0gmlwhKwS-laKbXVsdGlhZGRyc5YACASsEvpWBh0GAAoErBL6VgYdB90DgnJzhQADAQAAiXNlY3AyNTZrMaEDlgQmI-BM8I3CeQTcObeGc9NO3_4RagrIXSx4V5IinkCDdGNwgh0Gg3VkcIIdCIV3YWt1MgE"}'
2026-02-09 04:41:16.929 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:41:16.937 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:41:16.938 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-09_04-41-14__f7faf11a-c36c-42ac-9f63-2616e75f392f__wakuorg_nwaku:latest.log
2026-02-09 04:41:16.938 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:41:16.938 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:41:16.939 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:41:16.940 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.131.85
2026-02-09 04:41:16.940 DEBUG [src.node.docker_mananger] Generated ports ['15376', '15377', '15378', '15379', '15380']
2026-02-09 04:41:16.940 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:41:16.940 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:41:16.940 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:41:16.940 DEBUG [src.node.docker_mananger] docker run -i -t -p 15376:15376 -p 15377:15377 -p 15378:15378 -p 15379:15379 -p 15380:15380 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15378 --rest-port=15376 --tcp-port=15377 --discv5-udp-port=15379 --rest-address=0.0.0.0 --nat=extip:172.18.131.85 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=85c8e10ee0c57d418bf15b16f2ebc4aa9ffc09ddcb302bafaa8da21f3fcfbbea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15380 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-L24QAXxUqp4A_DOC925YgXLTZZbIyeEfN7Ywaf_Xrzq9r-zevITUPasPTZBZAbih_TckwFkFnyTYo0uQMIpycbRS2cCgmlkgnY0gmlwhKwSLxKKbXVsdGlhZGRyc5YACASsEi8SBuNDAAoErBIvEgbjRN0DgnJzhQADAQAAiXNlY3AyNTZrMaECQy72nXIivmP6VYK9z3zBU7b8iLug52RJK60Y4DBpUk6DdGNwguNDg3VkcILjRYV3YWt1Mgk --lightpushnode=/ip4/172.18.47.18/tcp/58179/p2p/16Uiu2HAkywvq7cEtGSUviQy4iswVsZ365wMCNCVnYXGUBMUxcy8H
2026-02-09 04:41:17.134 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.131.85 waku 699ae7d09995588a96b5adc01af902044be442f26284bcf2e64cb87d225c280c
2026-02-09 04:41:17.166 DEBUG [src.node.docker_mananger] Container started with ID 699ae7d09995. Setting up logs at ./log/docker/node1_2026-02-09_04-41-14__f7faf11a-c36c-42ac-9f63-2616e75f392f__wakuorg_nwaku:latest.log
2026-02-09 04:41:17.167 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15376
2026-02-09 04:41:17.167 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:41:18.167 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15376/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:18.172 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:41:18.172 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:41:18.172 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15376/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:18.174 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.85/tcp/15377/p2p/16Uiu2HAmAhVZfYpjekvr51Vm2Qn6QooX5sYufv1NevgRVKpqcX1V","/ip4/172.18.131.85/tcp/15378/ws/p2p/16Uiu2HAmAhVZfYpjekvr51Vm2Qn6QooX5sYufv1NevgRVKpqcX1V"],"enrUri":"enr:-L24QHGFFOQvWw5l7r7AmRhJSWkuFG-35Wg0GkAZiJL_JyQWfKvtmFDNStYNPk56GxNG6N0Lsbep-5X8NmnAr7yGIUACgmlkgnY0gmlwhKwSg1WKbXVsdGlhZGRyc5YACASsEoNVBjwRAAoErBKDVQY8Et0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4uzRxjDvsRpYx0PCsQkk4mk4Mjlc3cMoFgpw3flmWayDdGNwgjwRg3VkcII8E4V3YWt1Mgk"}'
2026-02-09 04:41:18.175 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:41:18.175 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58178/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-09 04:41:18.178 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:41:18.179 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7429/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-09 04:41:18.184 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:41:18.185 DEBUG [src.steps.light_push] Lightpushing message
2026-02-09 04:41:18.186 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15376/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1770612078185741922}}'
2026-02-09 04:41:18.231 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:41:18.232 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-09 04:41:18.333 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2026-02-09 04:41:18.333 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58178/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:18.336 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770612078185741922,"ephemeral":false,"proof":""}]'
2026-02-09 04:41:18.338 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2026-02-09 04:41:18.338 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7429/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:18.341 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770612078185741922,"ephemeral":false,"proof":""}]'
2026-02-09 04:41:18.344 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:41:18.345 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:41:18.345 DEBUG [src.node.waku_node] Stopping container with id c4a3b6e80c6a
2026-02-09 04:41:18.904 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:41:18.904 DEBUG [src.node.waku_node] Stopping container with id e5f6eaa7806f
2026-02-09 04:41:19.517 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:41:19.517 DEBUG [src.node.waku_node] Stopping container with id 699ae7d09995
2026-02-09 04:41:19.725 ERROR [src.node.docker_mananger] Max retries reached for container c4a3b6e80c6a. Exiting log stream.
2026-02-09 04:41:20.062 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:41:20.065 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:41:20.073 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:41:20.081 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:41:20.088 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
