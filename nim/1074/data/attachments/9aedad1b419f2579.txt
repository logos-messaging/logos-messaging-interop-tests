2026-02-09 04:44:33.852 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:44:33.853 DEBUG [tests.conftest] Running test: test_messages_with_timestamps_far_from_now with id: 2026-02-09_04-44-33__e3e5ebec-ea8d-421d-95e9-4637e1a01e7e
2026-02-09 04:44:33.853 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:44:33.853 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-09 04:44:33.853 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-09 04:44:33.860 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:44:33.860 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-09_04-44-33__e3e5ebec-ea8d-421d-95e9-4637e1a01e7e__wakuorg_nwaku:latest.log
2026-02-09 04:44:33.860 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:44:33.860 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:44:33.861 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:44:33.862 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.211.87
2026-02-09 04:44:33.862 DEBUG [src.node.docker_mananger] Generated ports ['54555', '54556', '54557', '54558', '54559']
2026-02-09 04:44:33.862 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:44:33.862 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:44:33.862 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:44:33.862 DEBUG [src.node.docker_mananger] docker run -i -t -p 54555:54555 -p 54556:54556 -p 54557:54557 -p 54558:54558 -p 54559:54559 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54557 --rest-port=54555 --tcp-port=54556 --discv5-udp-port=54558 --rest-address=0.0.0.0 --nat=extip:172.18.211.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b1fff88933ec2afdf9b95d1bd0fd1ffbf2e3d422bb1a7b0f83c2bd7d89bb1ecf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54559 --metrics-logging=true --store=true --relay=true
2026-02-09 04:44:34.045 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.211.87 waku 229b5125a7f236802cbc78afe519139a05da8901c6677d3f00c6220e96c8c64a
2026-02-09 04:44:34.076 DEBUG [src.node.docker_mananger] Container started with ID 229b5125a7f2. Setting up logs at ./log/docker/publishing_node1_2026-02-09_04-44-33__e3e5ebec-ea8d-421d-95e9-4637e1a01e7e__wakuorg_nwaku:latest.log
2026-02-09 04:44:34.077 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54555
2026-02-09 04:44:34.077 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:44:34.097 ERROR [src.node.docker_mananger] Max retries reached for container e992d5f82e14. Exiting log stream.
2026-02-09 04:44:34.652 ERROR [src.node.docker_mananger] Max retries reached for container 52bf8aa98b5b. Exiting log stream.
2026-02-09 04:44:35.077 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54555/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:35.080 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:44:35.080 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:44:35.081 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54555/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:35.083 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.87/tcp/54556/p2p/16Uiu2HAm8hvBfMnPYqRc7D7Tz8H3mkGvwiBwC4iuCXazJ6RqnzZG","/ip4/172.18.211.87/tcp/54557/ws/p2p/16Uiu2HAm8hvBfMnPYqRc7D7Tz8H3mkGvwiBwC4iuCXazJ6RqnzZG"],"enrUri":"enr:-L24QDuDhz7Bw7zSfMDH0bahCEDqOmcYYjHaf7Qrxp-HXmoUMpt4wpZ1ZFmzAj3Lv5AcJweHhSc0rVsGhxp5y-i4H8wCgmlkgnY0gmlwhKwS01eKbXVsdGlhZGRyc5YACASsEtNXBtUcAAoErBLTVwbVHd0DgnJzhQADAQAAiXNlY3AyNTZrMaECxVFIwmWtadtbL-RDV9n3MVHxEZs4nLJxsbyMqp4gHBuDdGNwgtUcg3VkcILVHoV3YWt1MgM"}'
2026-02-09 04:44:35.083 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:44:35.090 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:44:35.090 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-09_04-44-33__e3e5ebec-ea8d-421d-95e9-4637e1a01e7e__wakuorg_nwaku:latest.log
2026-02-09 04:44:35.090 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:44:35.090 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:44:35.091 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:44:35.091 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.10.208
2026-02-09 04:44:35.091 DEBUG [src.node.docker_mananger] Generated ports ['29835', '29836', '29837', '29838', '29839']
2026-02-09 04:44:35.092 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:44:35.092 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:44:35.092 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:44:35.092 DEBUG [src.node.docker_mananger] docker run -i -t -p 29835:29835 -p 29836:29836 -p 29837:29837 -p 29838:29838 -p 29839:29839 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29837 --rest-port=29835 --tcp-port=29836 --discv5-udp-port=29838 --rest-address=0.0.0.0 --nat=extip:172.18.10.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdf8ce71eee365eeb6a79bedb6183b29f46d1a5d785aedc3f95eaf42a94ddeb5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29839 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDuDhz7Bw7zSfMDH0bahCEDqOmcYYjHaf7Qrxp-HXmoUMpt4wpZ1ZFmzAj3Lv5AcJweHhSc0rVsGhxp5y-i4H8wCgmlkgnY0gmlwhKwS01eKbXVsdGlhZGRyc5YACASsEtNXBtUcAAoErBLTVwbVHd0DgnJzhQADAQAAiXNlY3AyNTZrMaECxVFIwmWtadtbL-RDV9n3MVHxEZs4nLJxsbyMqp4gHBuDdGNwgtUcg3VkcILVHoV3YWt1MgM --storenode=/ip4/172.18.211.87/tcp/54556/p2p/16Uiu2HAm8hvBfMnPYqRc7D7Tz8H3mkGvwiBwC4iuCXazJ6RqnzZG --store=true --relay=true
2026-02-09 04:44:35.280 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.10.208 waku 7a6b6cf89d2383a082f0262ff7e22b0485be5aac6b07e947e398c6cc28403b52
2026-02-09 04:44:35.311 DEBUG [src.node.docker_mananger] Container started with ID 7a6b6cf89d23. Setting up logs at ./log/docker/store_node1_2026-02-09_04-44-33__e3e5ebec-ea8d-421d-95e9-4637e1a01e7e__wakuorg_nwaku:latest.log
2026-02-09 04:44:35.311 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29835
2026-02-09 04:44:35.311 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:44:36.313 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29835/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:36.317 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:44:36.317 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:44:36.317 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29835/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:36.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.208/tcp/29836/p2p/16Uiu2HAm5WKFgdqHpSSpF3LwLTLofqfDj4VFt5MzDmYEVvVLyxNe","/ip4/172.18.10.208/tcp/29837/ws/p2p/16Uiu2HAm5WKFgdqHpSSpF3LwLTLofqfDj4VFt5MzDmYEVvVLyxNe"],"enrUri":"enr:-L24QP8p9CjEbbKzuiq7krGJtcAAvcJUZJMxBF4kfK8KKnmOKeXyJ7EUy6UCg9o20VTWNcTjghppcsbapI9tpx3JNf8CgmlkgnY0gmlwhKwSCtCKbXVsdGlhZGRyc5YACASsEgrQBnSMAAoErBIK0AZ0jd0DgnJzhQADAQAAiXNlY3AyNTZrMaEClcVWnCIoMIhKGSooVqc4rc_6cRef1NtG9QVwH36BalODdGNwgnSMg3VkcIJ0joV3YWt1MgM"}'
2026-02-09 04:44:36.319 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:44:36.320 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29835/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.211.87/tcp/54556/p2p/16Uiu2HAm8hvBfMnPYqRc7D7Tz8H3mkGvwiBwC4iuCXazJ6RqnzZG"]'
2026-02-09 04:44:36.322 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:36.323 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54555/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:44:36.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:36.325 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29835/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:44:36.327 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:36.328 DEBUG [tests.store.test_time_filter] Running test with payload 20 sec Past
2026-02-09 04:44:36.329 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:36.329 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54555/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:36.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:36.333 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:36.534 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-09 04:44:36.534 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54555/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:36.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-02-09 04:44:36.537 DEBUG [src.steps.store] messages length is 0
2026-02-09 04:44:36.538 DEBUG [tests.store.test_time_filter] Running test with payload 40 sec Future
2026-02-09 04:44:36.538 DEBUG [src.steps.store] Relaying message
2026-02-09 04:44:36.538 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54555/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:44:36.542 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:44:36.543 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:44:36.744 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-09 04:44:36.744 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54555/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:44:36.747 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-02-09 04:44:36.747 DEBUG [src.steps.store] messages length is 0
2026-02-09 04:44:36.749 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:44:36.750 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:44:36.750 DEBUG [src.node.waku_node] Stopping container with id 229b5125a7f2
2026-02-09 04:44:37.309 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:44:37.312 DEBUG [src.node.waku_node] Stopping container with id 7a6b6cf89d23
2026-02-09 04:44:37.855 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:44:37.859 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:44:37.864 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:44:37.870 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
