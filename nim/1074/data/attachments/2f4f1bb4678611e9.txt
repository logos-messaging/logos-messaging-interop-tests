2026-02-09 04:50:20.020 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:50:20.020 DEBUG [tests.conftest] Running test: test_publish_with_extra_field with id: 2026-02-09_04-50-20__a31db00a-2184-4e64-afa7-bfed1bd98bc5
2026-02-09 04:50:20.021 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:50:20.021 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-09 04:50:20.022 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-09 04:50:20.031 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:50:20.031 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-09_04-50-20__a31db00a-2184-4e64-afa7-bfed1bd98bc5__wakuorg_nwaku:latest.log
2026-02-09 04:50:20.032 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:50:20.032 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:50:20.034 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:50:20.035 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.152.24
2026-02-09 04:50:20.035 DEBUG [src.node.docker_mananger] Generated ports ['9939', '9940', '9941', '9942', '9943']
2026-02-09 04:50:20.035 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:50:20.036 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:50:20.036 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:50:20.037 DEBUG [src.node.docker_mananger] docker run -i -t -p 9939:9939 -p 9940:9940 -p 9941:9941 -p 9942:9942 -p 9943:9943 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9941 --rest-port=9939 --tcp-port=9940 --discv5-udp-port=9942 --rest-address=0.0.0.0 --nat=extip:172.18.152.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8efab0ed76e3ae2b9fdd0b942cd00a83bc601895a4c4fcee6c3159cdd5bbced2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9943 --metrics-logging=true --relay=true
2026-02-09 04:50:20.228 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.152.24 waku 8644728ad71c5b7a373f193e1c7f13415d4d5fa34b0b27d0643b607530d8ff2d
2026-02-09 04:50:20.237 ERROR [src.node.docker_mananger] Max retries reached for container b34e485290ee. Exiting log stream.
2026-02-09 04:50:20.264 DEBUG [src.node.docker_mananger] Container started with ID 8644728ad71c. Setting up logs at ./log/docker/node1_2026-02-09_04-50-20__a31db00a-2184-4e64-afa7-bfed1bd98bc5__wakuorg_nwaku:latest.log
2026-02-09 04:50:20.264 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9939
2026-02-09 04:50:20.264 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:50:20.858 ERROR [src.node.docker_mananger] Max retries reached for container b609e47a85a6. Exiting log stream.
2026-02-09 04:50:21.265 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9939/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:50:21.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:50:21.268 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:50:21.269 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9939/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:50:21.271 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.24/tcp/9940/p2p/16Uiu2HAm6DeNrHUP2j9csoVPe8NjtjayzGqknXA9en34GaL1VPmR","/ip4/172.18.152.24/tcp/9941/ws/p2p/16Uiu2HAm6DeNrHUP2j9csoVPe8NjtjayzGqknXA9en34GaL1VPmR"],"enrUri":"enr:-L24QC5QDIL6MUYENzAR1ShXLMvGhuHyZF0w2lPSm-lINfMqPl91fQCGxcjwrcQBv8IWI_zh79FisFfG1DDc2KfDYfYCgmlkgnY0gmlwhKwSmBiKbXVsdGlhZGRyc5YACASsEpgYBibUAAoErBKYGAYm1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECoFvGShTscqGp15Wz7BbIL3-hGB104aT1F2ZOPVEaASiDdGNwgibUg3VkcIIm1oV3YWt1MgE"}'
2026-02-09 04:50:21.271 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:50:21.277 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:50:21.277 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-09_04-50-20__a31db00a-2184-4e64-afa7-bfed1bd98bc5__wakuorg_nwaku:latest.log
2026-02-09 04:50:21.278 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:50:21.278 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:50:21.279 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:50:21.279 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.120.146
2026-02-09 04:50:21.279 DEBUG [src.node.docker_mananger] Generated ports ['27879', '27880', '27881', '27882', '27883']
2026-02-09 04:50:21.279 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:50:21.280 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:50:21.280 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:50:21.280 DEBUG [src.node.docker_mananger] docker run -i -t -p 27879:27879 -p 27880:27880 -p 27881:27881 -p 27882:27882 -p 27883:27883 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27881 --rest-port=27879 --tcp-port=27880 --discv5-udp-port=27882 --rest-address=0.0.0.0 --nat=extip:172.18.120.146 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=64bc37ede5cdf52fcfb179fcef80baec540320313feebcd2dc0df2b9b34ac3dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27883 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QC5QDIL6MUYENzAR1ShXLMvGhuHyZF0w2lPSm-lINfMqPl91fQCGxcjwrcQBv8IWI_zh79FisFfG1DDc2KfDYfYCgmlkgnY0gmlwhKwSmBiKbXVsdGlhZGRyc5YACASsEpgYBibUAAoErBKYGAYm1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECoFvGShTscqGp15Wz7BbIL3-hGB104aT1F2ZOPVEaASiDdGNwgibUg3VkcIIm1oV3YWt1MgE
2026-02-09 04:50:21.465 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.120.146 waku 1e9c240463feb13ab9ef5a578621f992579e6fa4645a1ea89aa08517fcb7f716
2026-02-09 04:50:21.496 DEBUG [src.node.docker_mananger] Container started with ID 1e9c240463fe. Setting up logs at ./log/docker/node2_2026-02-09_04-50-20__a31db00a-2184-4e64-afa7-bfed1bd98bc5__wakuorg_nwaku:latest.log
2026-02-09 04:50:21.496 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27879
2026-02-09 04:50:21.497 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:50:22.499 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27879/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:50:22.508 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:50:22.509 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:50:22.510 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27879/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:50:22.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.146/tcp/27880/p2p/16Uiu2HAkupjGTWBfcZJFDF2aGYnJ9EgZh86NtghDBALD4veGMYwC","/ip4/172.18.120.146/tcp/27881/ws/p2p/16Uiu2HAkupjGTWBfcZJFDF2aGYnJ9EgZh86NtghDBALD4veGMYwC"],"enrUri":"enr:-L24QB5QbLy7YchWXEJJrVLUhDmCFQvI_Lr1KHeXEB0RsFXtYubcQ3B5E95XtEpa4y8uP5Rpa2fcr2x1_Lvv1J7UzBECgmlkgnY0gmlwhKwSeJKKbXVsdGlhZGRyc5YACASsEniSBmzoAAoErBJ4kgZs6d0DgnJzhQADAQAAiXNlY3AyNTZrMaECBegTWa_r0UtfE3mrnLO2jOKrA32IijYc72S2i4Sy65ODdGNwgmzog3VkcIJs6oV3YWt1MgE"}'
2026-02-09 04:50:22.517 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:50:22.518 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27879/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.152.24/tcp/9940/p2p/16Uiu2HAm6DeNrHUP2j9csoVPe8NjtjayzGqknXA9en34GaL1VPmR"]'
2026-02-09 04:50:22.521 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:50:22.521 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-09 04:50:22.521 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9939/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-09 04:50:22.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:50:22.525 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27879/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-09 04:50:22.529 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:50:22.531 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9939/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:50:22.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:50:22.537 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-09 04:50:22.637 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-09 04:50:22.638 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9939/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:50:22.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770612622531275520,"ephemeral":false,"proof":""}]'
2026-02-09 04:50:22.642 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-09 04:50:22.643 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27879/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:50:22.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770612622531275520,"ephemeral":false,"proof":""}]'
2026-02-09 04:50:22.646 INFO [src.steps.relay] WARM UP successful!!
2026-02-09 04:50:22.647 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9939/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
2026-02-09 04:50:22.650 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9939/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-09 04:50:22.652 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:50:22.653 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:50:22.654 DEBUG [src.node.waku_node] Stopping container with id 8644728ad71c
2026-02-09 04:50:23.235 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:50:23.235 DEBUG [src.node.waku_node] Stopping container with id 1e9c240463fe
2026-02-09 04:50:23.818 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:50:23.821 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:50:23.826 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:50:23.831 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
