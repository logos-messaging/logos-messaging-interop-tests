2026-02-09 04:43:34.458 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:43:34.459 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2026-02-09_04-43-34__9192a414-c59b-46d1-9379-7e9bd3fc9248
2026-02-09 04:43:34.459 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:43:34.459 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-09 04:43:34.459 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-09 04:43:34.466 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:43:34.466 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-09_04-43-34__9192a414-c59b-46d1-9379-7e9bd3fc9248__wakuorg_nwaku:latest.log
2026-02-09 04:43:34.466 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:43:34.466 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:43:34.467 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:43:34.468 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.91.239
2026-02-09 04:43:34.468 DEBUG [src.node.docker_mananger] Generated ports ['28871', '28872', '28873', '28874', '28875']
2026-02-09 04:43:34.468 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:43:34.468 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:43:34.468 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:43:34.468 DEBUG [src.node.docker_mananger] docker run -i -t -p 28871:28871 -p 28872:28872 -p 28873:28873 -p 28874:28874 -p 28875:28875 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28873 --rest-port=28871 --tcp-port=28872 --discv5-udp-port=28874 --rest-address=0.0.0.0 --nat=extip:172.18.91.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ebcb1edfafda14fec8485eec241f2c9daa626ef81bd8869165d6794e4a2cbd5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28875 --metrics-logging=true --relay=true --filter=true
2026-02-09 04:43:34.646 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.91.239 waku 9d2e75da122729e17b1ba685620b06bd6ee16e0f8f9043ace26762e1c9f21b33
2026-02-09 04:43:34.677 DEBUG [src.node.docker_mananger] Container started with ID 9d2e75da1227. Setting up logs at ./log/docker/node1_2026-02-09_04-43-34__9192a414-c59b-46d1-9379-7e9bd3fc9248__wakuorg_nwaku:latest.log
2026-02-09 04:43:34.677 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28871
2026-02-09 04:43:34.677 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:43:34.710 ERROR [src.node.docker_mananger] Max retries reached for container 794cccd96dad. Exiting log stream.
2026-02-09 04:43:35.257 ERROR [src.node.docker_mananger] Max retries reached for container 521a4710d576. Exiting log stream.
2026-02-09 04:43:35.678 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28871/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:35.681 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:43:35.681 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:43:35.682 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28871/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:35.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.239/tcp/28872/p2p/16Uiu2HAmEGs6gY4ZboQ8mk2tyKv9PUgmkzTa2fTw6sxRRZG1xheL","/ip4/172.18.91.239/tcp/28873/ws/p2p/16Uiu2HAmEGs6gY4ZboQ8mk2tyKv9PUgmkzTa2fTw6sxRRZG1xheL"],"enrUri":"enr:-L24QHcvDegqGCmcrhmM-NISwhBIVpMdhaQ8hhkxbxt7RoTCRU4VAlzV0i2NVrtFwsFFokAUqLiUVo-ZJU8kHeCAVNICgmlkgnY0gmlwhKwSW--KbXVsdGlhZGRyc5YACASsElvvBnDIAAoErBJb7wZwyd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGAxld7aOg1Kx8URWF6SDhQGREqJI__gCjizkK9eeew2DdGNwgnDIg3VkcIJwyoV3YWt1MgU"}'
2026-02-09 04:43:35.684 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:43:35.684 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-09 04:43:35.691 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:43:35.691 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-09_04-43-34__9192a414-c59b-46d1-9379-7e9bd3fc9248__wakuorg_nwaku:latest.log
2026-02-09 04:43:35.691 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:43:35.691 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:43:35.693 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:43:35.693 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.92.242
2026-02-09 04:43:35.693 DEBUG [src.node.docker_mananger] Generated ports ['21529', '21530', '21531', '21532', '21533']
2026-02-09 04:43:35.693 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:43:35.693 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:43:35.694 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:43:35.694 DEBUG [src.node.docker_mananger] docker run -i -t -p 21529:21529 -p 21530:21530 -p 21531:21531 -p 21532:21532 -p 21533:21533 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21531 --rest-port=21529 --tcp-port=21530 --discv5-udp-port=21532 --rest-address=0.0.0.0 --nat=extip:172.18.92.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6fcbb1f1b31cb8da9cf45ef3de5afbba9317dfa36a3dd4fbeb9be850cb43a83f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21533 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHcvDegqGCmcrhmM-NISwhBIVpMdhaQ8hhkxbxt7RoTCRU4VAlzV0i2NVrtFwsFFokAUqLiUVo-ZJU8kHeCAVNICgmlkgnY0gmlwhKwSW--KbXVsdGlhZGRyc5YACASsElvvBnDIAAoErBJb7wZwyd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGAxld7aOg1Kx8URWF6SDhQGREqJI__gCjizkK9eeew2DdGNwgnDIg3VkcIJwyoV3YWt1MgU --filternode=/ip4/172.18.91.239/tcp/28872/p2p/16Uiu2HAmEGs6gY4ZboQ8mk2tyKv9PUgmkzTa2fTw6sxRRZG1xheL
2026-02-09 04:43:35.874 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.92.242 waku 36c667ad0047044540199e0e134f1025d6366f6124e915f6ff66813b54a3e3c8
2026-02-09 04:43:35.905 DEBUG [src.node.docker_mananger] Container started with ID 36c667ad0047. Setting up logs at ./log/docker/node2_2026-02-09_04-43-34__9192a414-c59b-46d1-9379-7e9bd3fc9248__wakuorg_nwaku:latest.log
2026-02-09 04:43:35.905 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21529
2026-02-09 04:43:35.906 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:43:36.906 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21529/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:36.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-09 04:43:36.911 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:43:36.911 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21529/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:36.913 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.242/tcp/21530/p2p/16Uiu2HAmV6VHKMxrmeN8iegoL94PLKRrFfQsvUaiZrSeuhLuShTf","/ip4/172.18.92.242/tcp/21531/ws/p2p/16Uiu2HAmV6VHKMxrmeN8iegoL94PLKRrFfQsvUaiZrSeuhLuShTf"],"enrUri":"enr:-L24QB97fzI9aZjch_Dj3a6dEkNx9DRrEcSPTn8UOPAiA0jDFo59X-pMOy-gjgenb8cLiz48zj7kEuNIndtt2Oyb5X0CgmlkgnY0gmlwhKwSXPKKbXVsdGlhZGRyc5YACASsElzyBlQaAAoErBJc8gZUG90DgnJzhQADAQAAiXNlY3AyNTZrMaED9EM5WLb3ojgu2KtyUn4GR-WWetWiTj4WdC3s2MaOQrKDdGNwglQag3VkcIJUHIV3YWt1MgA"}'
2026-02-09 04:43:36.913 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:43:36.914 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21529/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.91.239/tcp/28872/p2p/16Uiu2HAmEGs6gY4ZboQ8mk2tyKv9PUgmkzTa2fTw6sxRRZG1xheL"]'
2026-02-09 04:43:36.947 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:36.949 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/1
2026-02-09 04:43:36.949 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28871/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-09 04:43:36.959 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:36.960 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21529/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "49e33fde-a18f-457b-b06b-a1204f9f6c9f", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-09 04:43:36.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"49e33fde-a18f-457b-b06b-a1204f9f6c9f","statusDesc":"OK"}'
2026-02-09 04:43:36.972 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28871/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:43:36.979 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:36.979 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-09 04:43:37.079 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-09 04:43:37.080 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21529/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:37.082 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1770612216971877737,"ephemeral":false}]'
2026-02-09 04:43:37.084 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/2/2
2026-02-09 04:43:37.085 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28871/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2026-02-09 04:43:37.087 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:37.088 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21529/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8df42ae1-30b6-491f-b70b-cf69c8e9b1cc", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
2026-02-09 04:43:37.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"8df42ae1-30b6-491f-b70b-cf69c8e9b1cc","statusDesc":"OK"}'
2026-02-09 04:43:37.097 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28871/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:43:37.101 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:37.102 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-09 04:43:37.202 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-09 04:43:37.202 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21529/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:37.205 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1770612217097576766,"ephemeral":false}]'
2026-02-09 04:43:37.207 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/9
2026-02-09 04:43:37.207 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28871/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
2026-02-09 04:43:37.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:37.210 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21529/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fc9b050e-234d-4b76-931e-08682e2896e5", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
2026-02-09 04:43:37.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"fc9b050e-234d-4b76-931e-08682e2896e5","statusDesc":"OK"}'
2026-02-09 04:43:37.219 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28871/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:43:37.224 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:37.224 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-09 04:43:37.324 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-09 04:43:37.325 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21529/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:37.327 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1770612217219221525,"ephemeral":false}]'
2026-02-09 04:43:37.330 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:43:37.331 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:43:37.332 DEBUG [src.node.waku_node] Stopping container with id 9d2e75da1227
2026-02-09 04:43:37.870 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:43:37.870 DEBUG [src.node.waku_node] Stopping container with id 36c667ad0047
2026-02-09 04:43:38.388 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:43:38.389 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:43:38.396 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:43:38.402 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
