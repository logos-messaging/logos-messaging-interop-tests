2026-02-09 04:45:11.421 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:45:11.422 DEBUG [tests.conftest] Running test: test_cursor_pointing_to_deleted_message with id: 2026-02-09_04-45-11__ca2fa5f1-01b5-4fd0-b9ab-c0a69664cb12
2026-02-09 04:45:11.423 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:45:11.423 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-09 04:45:11.423 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-09 04:45:11.431 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:45:11.432 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-09_04-45-11__ca2fa5f1-01b5-4fd0-b9ab-c0a69664cb12__wakuorg_nwaku:latest.log
2026-02-09 04:45:11.432 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:45:11.432 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:45:11.434 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:45:11.434 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.182.205
2026-02-09 04:45:11.435 DEBUG [src.node.docker_mananger] Generated ports ['51614', '51615', '51616', '51617', '51618']
2026-02-09 04:45:11.435 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:45:11.435 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:45:11.436 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:45:11.436 DEBUG [src.node.docker_mananger] docker run -i -t -p 51614:51614 -p 51615:51615 -p 51616:51616 -p 51617:51617 -p 51618:51618 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51616 --rest-port=51614 --tcp-port=51615 --discv5-udp-port=51617 --rest-address=0.0.0.0 --nat=extip:172.18.182.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed2a30fbda17c1c3fada9e1c295ccafb122bab6d2afef4b9cd3a5b8ff8c6ceab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51618 --metrics-logging=true --store=true --relay=true
2026-02-09 04:45:11.620 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.182.205 waku a99dd3afd70201ac0321bed72bd685c7aee3c4711122e0c92b81884c6c7f298b
2026-02-09 04:45:11.654 DEBUG [src.node.docker_mananger] Container started with ID a99dd3afd702. Setting up logs at ./log/docker/publishing_node1_2026-02-09_04-45-11__ca2fa5f1-01b5-4fd0-b9ab-c0a69664cb12__wakuorg_nwaku:latest.log
2026-02-09 04:45:11.655 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51614
2026-02-09 04:45:11.656 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:45:11.716 ERROR [src.node.docker_mananger] Max retries reached for container 255cb85b65dd. Exiting log stream.
2026-02-09 04:45:12.251 ERROR [src.node.docker_mananger] Max retries reached for container 739e721e360f. Exiting log stream.
2026-02-09 04:45:12.656 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51614/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:45:12.659 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:45:12.659 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:45:12.660 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51614/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:45:12.662 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.182.205/tcp/51615/p2p/16Uiu2HAm1tdA98kLgYsYFMyy5B468VK1LHpZxaDqwkBrh4pzNHBt","/ip4/172.18.182.205/tcp/51616/ws/p2p/16Uiu2HAm1tdA98kLgYsYFMyy5B468VK1LHpZxaDqwkBrh4pzNHBt"],"enrUri":"enr:-L24QPuO2SC2CkNpiOQSIYJ4h8FlY2hfZ6ti2LAzM4kOa73fKQs2LJ9Fhdq3RgdDne8JVgkdZ-x19oQVvy1siTT_KEICgmlkgnY0gmlwhKwSts2KbXVsdGlhZGRyc5YACASsErbNBsmfAAoErBK2zQbJoN0DgnJzhQADAQAAiXNlY3AyNTZrMaECYA2c7qOxHNsjNCTa5pKInxCIDCI5Ysk7OXKK9pZaoq-DdGNwgsmfg3VkcILJoYV3YWt1MgM"}'
2026-02-09 04:45:12.662 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:45:12.669 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:45:12.669 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-09_04-45-11__ca2fa5f1-01b5-4fd0-b9ab-c0a69664cb12__wakuorg_nwaku:latest.log
2026-02-09 04:45:12.669 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:45:12.669 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:45:12.671 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:45:12.671 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.246.37
2026-02-09 04:45:12.671 DEBUG [src.node.docker_mananger] Generated ports ['36855', '36856', '36857', '36858', '36859']
2026-02-09 04:45:12.671 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:45:12.671 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:45:12.671 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:45:12.671 DEBUG [src.node.docker_mananger] docker run -i -t -p 36855:36855 -p 36856:36856 -p 36857:36857 -p 36858:36858 -p 36859:36859 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36857 --rest-port=36855 --tcp-port=36856 --discv5-udp-port=36858 --rest-address=0.0.0.0 --nat=extip:172.18.246.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b09cbae5f314755dc07e9ada0c96cb1ce43fed04cceee5ce2c85f12ac1de0ec6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36859 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPuO2SC2CkNpiOQSIYJ4h8FlY2hfZ6ti2LAzM4kOa73fKQs2LJ9Fhdq3RgdDne8JVgkdZ-x19oQVvy1siTT_KEICgmlkgnY0gmlwhKwSts2KbXVsdGlhZGRyc5YACASsErbNBsmfAAoErBK2zQbJoN0DgnJzhQADAQAAiXNlY3AyNTZrMaECYA2c7qOxHNsjNCTa5pKInxCIDCI5Ysk7OXKK9pZaoq-DdGNwgsmfg3VkcILJoYV3YWt1MgM --storenode=/ip4/172.18.182.205/tcp/51615/p2p/16Uiu2HAm1tdA98kLgYsYFMyy5B468VK1LHpZxaDqwkBrh4pzNHBt --store=true --relay=true
2026-02-09 04:45:12.854 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.246.37 waku 1c1ac6ca1aa54d9780c924b18eee87cf13adff48601c1e59983aa33306a65ad6
2026-02-09 04:45:12.889 DEBUG [src.node.docker_mananger] Container started with ID 1c1ac6ca1aa5. Setting up logs at ./log/docker/store_node1_2026-02-09_04-45-11__ca2fa5f1-01b5-4fd0-b9ab-c0a69664cb12__wakuorg_nwaku:latest.log
2026-02-09 04:45:12.889 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36855
2026-02-09 04:45:12.891 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:45:13.891 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36855/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:45:13.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:45:13.895 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:45:13.895 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36855/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:45:13.897 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.37/tcp/36856/p2p/16Uiu2HAmMuo5HnuGnPA9YnjdH1VpwF1JPDKxPw62tmAjALcgGPkf","/ip4/172.18.246.37/tcp/36857/ws/p2p/16Uiu2HAmMuo5HnuGnPA9YnjdH1VpwF1JPDKxPw62tmAjALcgGPkf"],"enrUri":"enr:-L24QKuy4O93Y-vO9u1CGM4VPy2mznR2ANhwp_zKkV4MWAWQIRD31NegSaDDUi8KBx6OxZAaWTywJF7-RYQo66VrN30CgmlkgnY0gmlwhKwS9iWKbXVsdGlhZGRyc5YACASsEvYlBo_4AAoErBL2JQaP-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDiYQlEzGvgnVMdLUoOkCuQXYyI7eBXjExhIE4r3zR5uSDdGNwgo_4g3VkcIKP-oV3YWt1MgM"}'
2026-02-09 04:45:13.898 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:45:13.898 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36855/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.182.205/tcp/51615/p2p/16Uiu2HAm1tdA98kLgYsYFMyy5B468VK1LHpZxaDqwkBrh4pzNHBt"]'
2026-02-09 04:45:13.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:13.901 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:45:13.903 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:13.904 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36855/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:45:13.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:13.907 DEBUG [src.steps.store] Relaying message
2026-02-09 04:45:13.907 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:45:13.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:13.912 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:45:14.112 DEBUG [src.steps.store] Relaying message
2026-02-09 04:45:14.113 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:45:14.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:14.118 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:45:14.319 DEBUG [src.steps.store] Relaying message
2026-02-09 04:45:14.319 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:45:14.324 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:14.324 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:45:14.525 DEBUG [src.steps.store] Relaying message
2026-02-09 04:45:14.525 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:45:14.529 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:14.530 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:45:14.730 DEBUG [src.steps.store] Relaying message
2026-02-09 04:45:14.730 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:45:14.735 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:14.735 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:45:14.936 DEBUG [src.steps.store] Relaying message
2026-02-09 04:45:14.936 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:45:14.941 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:14.941 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:45:15.142 DEBUG [src.steps.store] Relaying message
2026-02-09 04:45:15.142 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:45:15.147 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:15.148 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:45:15.348 DEBUG [src.steps.store] Relaying message
2026-02-09 04:45:15.348 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:45:15.354 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:15.354 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:45:15.555 DEBUG [src.steps.store] Relaying message
2026-02-09 04:45:15.555 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:45:15.559 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:15.560 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:45:15.760 DEBUG [src.steps.store] Relaying message
2026-02-09 04:45:15.761 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:45:15.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:45:15.766 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:45:15.967 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51614/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x12e2e0af2b0dfb3540f020b5f2f5609f24a356ce3b4ed4c8ea99d75be0f41ce0&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:45:15.970 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:51614/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x12e2e0af2b0dfb3540f020b5f2f5609f24a356ce3b4ed4c8ea99d75be0f41ce0&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-09 04:45:15.970 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36855/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x12e2e0af2b0dfb3540f020b5f2f5609f24a356ce3b4ed4c8ea99d75be0f41ce0&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:45:15.973 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:36855/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x12e2e0af2b0dfb3540f020b5f2f5609f24a356ce3b4ed4c8ea99d75be0f41ce0&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-09 04:45:15.974 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:45:15.975 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:45:15.975 DEBUG [src.node.waku_node] Stopping container with id a99dd3afd702
2026-02-09 04:45:16.503 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:45:16.503 DEBUG [src.node.waku_node] Stopping container with id 1c1ac6ca1aa5
2026-02-09 04:45:17.058 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:45:17.059 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:45:17.067 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:45:17.075 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
