2026-02-09 04:43:30.830 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:43:30.830 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_content_topic_string_instead_of_list with id: 2026-02-09_04-43-30__d6a7be29-fea5-42e5-8327-81a8bcaa929e
2026-02-09 04:43:30.831 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:43:30.831 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-09 04:43:30.831 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-09 04:43:30.838 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:43:30.838 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-09_04-43-30__d6a7be29-fea5-42e5-8327-81a8bcaa929e__wakuorg_nwaku:latest.log
2026-02-09 04:43:30.838 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:43:30.838 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:43:30.840 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:43:30.840 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.156.150
2026-02-09 04:43:30.840 DEBUG [src.node.docker_mananger] Generated ports ['4329', '4330', '4331', '4332', '4333']
2026-02-09 04:43:30.840 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:43:30.840 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:43:30.841 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:43:30.841 DEBUG [src.node.docker_mananger] docker run -i -t -p 4329:4329 -p 4330:4330 -p 4331:4331 -p 4332:4332 -p 4333:4333 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4331 --rest-port=4329 --tcp-port=4330 --discv5-udp-port=4332 --rest-address=0.0.0.0 --nat=extip:172.18.156.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2b2fce05a9f9cb6f643e30afbea4d525e7b3118919eaea4a3efeba01d3a8aaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4333 --metrics-logging=true --relay=true --filter=true
2026-02-09 04:43:31.019 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.156.150 waku a5ea6546c6ff0b6dba8fbc5a28b7ecdb2c84aff97267a403408b525d6ecfd50e
2026-02-09 04:43:31.052 DEBUG [src.node.docker_mananger] Container started with ID a5ea6546c6ff. Setting up logs at ./log/docker/node1_2026-02-09_04-43-30__d6a7be29-fea5-42e5-8327-81a8bcaa929e__wakuorg_nwaku:latest.log
2026-02-09 04:43:31.052 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4329
2026-02-09 04:43:31.052 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:43:31.099 ERROR [src.node.docker_mananger] Max retries reached for container a5f5c7a9e38c. Exiting log stream.
2026-02-09 04:43:31.630 ERROR [src.node.docker_mananger] Max retries reached for container 5b074376ffb9. Exiting log stream.
2026-02-09 04:43:32.054 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4329/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:32.057 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:43:32.058 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:43:32.058 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4329/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:32.060 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.150/tcp/4330/p2p/16Uiu2HAm3hieWiZfDXdLGMQEQQ5fxfB6z8Lz1WZrNV3nm4Tc1CEx","/ip4/172.18.156.150/tcp/4331/ws/p2p/16Uiu2HAm3hieWiZfDXdLGMQEQQ5fxfB6z8Lz1WZrNV3nm4Tc1CEx"],"enrUri":"enr:-L24QCqo0RMx5nVDQEeccncIqunYvAxemBuMbLppQYAxP3SBDWFaUCFxvcN703AgCFZ9AKmE_HN9lB0LCcUFqJc-YOYCgmlkgnY0gmlwhKwSnJaKbXVsdGlhZGRyc5YACASsEpyWBhDqAAoErBKclgYQ690DgnJzhQADAQAAiXNlY3AyNTZrMaECevnN-iz0f_2C1jW3mlLRTOd8f0c6u9ZGtF8qunptOOWDdGNwghDqg3VkcIIQ7IV3YWt1MgU"}'
2026-02-09 04:43:32.060 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:43:32.061 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-09 04:43:32.067 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:43:32.067 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-09_04-43-30__d6a7be29-fea5-42e5-8327-81a8bcaa929e__wakuorg_nwaku:latest.log
2026-02-09 04:43:32.068 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:43:32.068 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:43:32.069 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:43:32.069 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.33.125
2026-02-09 04:43:32.069 DEBUG [src.node.docker_mananger] Generated ports ['20810', '20811', '20812', '20813', '20814']
2026-02-09 04:43:32.070 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:43:32.070 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:43:32.070 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:43:32.070 DEBUG [src.node.docker_mananger] docker run -i -t -p 20810:20810 -p 20811:20811 -p 20812:20812 -p 20813:20813 -p 20814:20814 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20812 --rest-port=20810 --tcp-port=20811 --discv5-udp-port=20813 --rest-address=0.0.0.0 --nat=extip:172.18.33.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db204143e31f84adb4214ccfc3d8da0343f79eac34d0e9bebd4defee0e53eba6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20814 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QCqo0RMx5nVDQEeccncIqunYvAxemBuMbLppQYAxP3SBDWFaUCFxvcN703AgCFZ9AKmE_HN9lB0LCcUFqJc-YOYCgmlkgnY0gmlwhKwSnJaKbXVsdGlhZGRyc5YACASsEpyWBhDqAAoErBKclgYQ690DgnJzhQADAQAAiXNlY3AyNTZrMaECevnN-iz0f_2C1jW3mlLRTOd8f0c6u9ZGtF8qunptOOWDdGNwghDqg3VkcIIQ7IV3YWt1MgU --filternode=/ip4/172.18.156.150/tcp/4330/p2p/16Uiu2HAm3hieWiZfDXdLGMQEQQ5fxfB6z8Lz1WZrNV3nm4Tc1CEx
2026-02-09 04:43:32.252 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.33.125 waku a4509afbf9ebc2ac730d8cf0185579f38b7c16c603fb4261733fb32b22ca6a05
2026-02-09 04:43:32.286 DEBUG [src.node.docker_mananger] Container started with ID a4509afbf9eb. Setting up logs at ./log/docker/node2_2026-02-09_04-43-30__d6a7be29-fea5-42e5-8327-81a8bcaa929e__wakuorg_nwaku:latest.log
2026-02-09 04:43:32.286 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20810
2026-02-09 04:43:32.287 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:43:33.287 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20810/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:33.291 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-09 04:43:33.291 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:43:33.291 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20810/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:33.294 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.125/tcp/20811/p2p/16Uiu2HAkywWapfxRGiUHUaoamipvieCGS5nhCGsjqmrnBXhMR3Yf","/ip4/172.18.33.125/tcp/20812/ws/p2p/16Uiu2HAkywWapfxRGiUHUaoamipvieCGS5nhCGsjqmrnBXhMR3Yf"],"enrUri":"enr:-L24QC3HyD4J2LwkoROBePBPOcuxX4CRIyQq6aDUv_v1uv2pPuH9V-7VP9O9dJYDUcDnjutCPpAvYlJvcqN04K6iQVACgmlkgnY0gmlwhKwSIX2KbXVsdGlhZGRyc5YACASsEiF9BlFLAAoErBIhfQZRTN0DgnJzhQADAQAAiXNlY3AyNTZrMaECQxOMPr_UKrFM3Dt89ZPlg7uLSLJR0P8v7LqQa49LFvSDdGNwglFLg3VkcIJRTYV3YWt1MgA"}'
2026-02-09 04:43:33.294 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:43:33.295 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20810/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.156.150/tcp/4330/p2p/16Uiu2HAm3hieWiZfDXdLGMQEQQ5fxfB6z8Lz1WZrNV3nm4Tc1CEx"]'
2026-02-09 04:43:33.324 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:33.324 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-09 04:43:33.325 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4329/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-09 04:43:33.339 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:33.340 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20810/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ce21337d-530e-4017-9863-cc0a37b577d1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-09 04:43:33.354 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ce21337d-530e-4017-9863-cc0a37b577d1","statusDesc":"OK"}'
2026-02-09 04:43:33.355 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:20810/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto", "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-09 04:43:33.358 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20810/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-09 04:43:33.360 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:43:33.361 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:43:33.361 DEBUG [src.node.waku_node] Stopping container with id a5ea6546c6ff
2026-02-09 04:43:33.916 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:43:33.917 DEBUG [src.node.waku_node] Stopping container with id a4509afbf9eb
2026-02-09 04:43:34.451 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:43:34.452 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:43:34.457 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:43:34.462 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
