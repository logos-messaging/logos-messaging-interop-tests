2026-02-09 04:41:20.092 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:41:20.093 DEBUG [tests.conftest] Running test: test_filter_get_message_after_node_pauses_and_pauses with id: 2026-02-09_04-41-20__e8d8c10b-586a-4e94-addc-591de12aabd2
2026-02-09 04:41:20.093 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:41:20.093 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-09 04:41:20.094 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-09 04:41:20.101 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:41:20.101 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-09_04-41-20__e8d8c10b-586a-4e94-addc-591de12aabd2__wakuorg_nwaku:latest.log
2026-02-09 04:41:20.101 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:41:20.102 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:41:20.103 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:41:20.103 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.75
2026-02-09 04:41:20.103 DEBUG [src.node.docker_mananger] Generated ports ['39487', '39488', '39489', '39490', '39491']
2026-02-09 04:41:20.104 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:41:20.104 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:41:20.104 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:41:20.104 DEBUG [src.node.docker_mananger] docker run -i -t -p 39487:39487 -p 39488:39488 -p 39489:39489 -p 39490:39490 -p 39491:39491 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39489 --rest-port=39487 --tcp-port=39488 --discv5-udp-port=39490 --rest-address=0.0.0.0 --nat=extip:172.18.39.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaafd7dea50effd8cfdb51cdcdf7f56bb2c60f3d3fa847cc42e8bd1be4f10a6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39491 --metrics-logging=true --relay=true --filter=true
2026-02-09 04:41:20.309 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.75 waku 8fa950f4bec672bb675520884906a6ec92a3c6b59b4580ee65fa44ec90f59c41
2026-02-09 04:41:20.335 ERROR [src.node.docker_mananger] Max retries reached for container e5f6eaa7806f. Exiting log stream.
2026-02-09 04:41:20.340 DEBUG [src.node.docker_mananger] Container started with ID 8fa950f4bec6. Setting up logs at ./log/docker/node1_2026-02-09_04-41-20__e8d8c10b-586a-4e94-addc-591de12aabd2__wakuorg_nwaku:latest.log
2026-02-09 04:41:20.341 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39487
2026-02-09 04:41:20.342 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:41:20.885 ERROR [src.node.docker_mananger] Max retries reached for container 699ae7d09995. Exiting log stream.
2026-02-09 04:41:21.342 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39487/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:21.346 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:41:21.346 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:41:21.346 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39487/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:21.349 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.75/tcp/39488/p2p/16Uiu2HAmCoA9aHnSqDvjX2mC9JpykoWJY6PemHGX74SaZoRDFn4n","/ip4/172.18.39.75/tcp/39489/ws/p2p/16Uiu2HAmCoA9aHnSqDvjX2mC9JpykoWJY6PemHGX74SaZoRDFn4n"],"enrUri":"enr:-L24QOriXUR7uDUoh5b_Ny82hDt0zjLevlLH1R5GwMO6JLAQBURhC5QfD2rQKx6aKz3pL2yVEtAAndjrsjlOd_j8-xYCgmlkgnY0gmlwhKwSJ0uKbXVsdGlhZGRyc5YACASsEidLBppAAAoErBInSwaaQd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAhe5oblxMUTNgS_Y-1AQqM8hOlfmLY3pL12pW3hBGJ-DdGNwgppAg3VkcIKaQoV3YWt1MgU"}'
2026-02-09 04:41:21.349 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:41:21.349 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-09 04:41:21.356 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:41:21.356 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-09_04-41-20__e8d8c10b-586a-4e94-addc-591de12aabd2__wakuorg_nwaku:latest.log
2026-02-09 04:41:21.357 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:41:21.357 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:41:21.358 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:41:21.358 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.134.69
2026-02-09 04:41:21.359 DEBUG [src.node.docker_mananger] Generated ports ['62268', '62269', '62270', '62271', '62272']
2026-02-09 04:41:21.359 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:41:21.359 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:41:21.359 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:41:21.359 DEBUG [src.node.docker_mananger] docker run -i -t -p 62268:62268 -p 62269:62269 -p 62270:62270 -p 62271:62271 -p 62272:62272 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62270 --rest-port=62268 --tcp-port=62269 --discv5-udp-port=62271 --rest-address=0.0.0.0 --nat=extip:172.18.134.69 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aab1bbf2721f612a3f3522aace5ce034ba99cd35809d66efd6bfe890f068eced --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62272 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QOriXUR7uDUoh5b_Ny82hDt0zjLevlLH1R5GwMO6JLAQBURhC5QfD2rQKx6aKz3pL2yVEtAAndjrsjlOd_j8-xYCgmlkgnY0gmlwhKwSJ0uKbXVsdGlhZGRyc5YACASsEidLBppAAAoErBInSwaaQd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAhe5oblxMUTNgS_Y-1AQqM8hOlfmLY3pL12pW3hBGJ-DdGNwgppAg3VkcIKaQoV3YWt1MgU --filternode=/ip4/172.18.39.75/tcp/39488/p2p/16Uiu2HAmCoA9aHnSqDvjX2mC9JpykoWJY6PemHGX74SaZoRDFn4n
2026-02-09 04:41:21.552 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.134.69 waku 771314e72fd047ed05ba308aa716907b4b7a2619252ca9a8df8dd212330ce192
2026-02-09 04:41:21.582 DEBUG [src.node.docker_mananger] Container started with ID 771314e72fd0. Setting up logs at ./log/docker/node2_2026-02-09_04-41-20__e8d8c10b-586a-4e94-addc-591de12aabd2__wakuorg_nwaku:latest.log
2026-02-09 04:41:21.582 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62268
2026-02-09 04:41:21.583 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:41:22.584 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62268/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:22.588 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-09 04:41:22.588 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:41:22.589 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62268/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:22.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.134.69/tcp/62269/p2p/16Uiu2HAkvmZxJr8NGiCaCBy2ED5yR1cvBkfvZ8YcTpLDKYWU3gEL","/ip4/172.18.134.69/tcp/62270/ws/p2p/16Uiu2HAkvmZxJr8NGiCaCBy2ED5yR1cvBkfvZ8YcTpLDKYWU3gEL"],"enrUri":"enr:-L24QB-fNgniABAUAxii0AzIMbdb_BeMyxP4dXvEMu-tuvP4OCpDGMyf66OoNULXslWNLrLoVotPeHPIWW3VNehDbQ8CgmlkgnY0gmlwhKwShkWKbXVsdGlhZGRyc5YACASsEoZFBvM9AAoErBKGRQbzPt0DgnJzhQADAQAAiXNlY3AyNTZrMaECE_R9bHmBohVp1FFjtqdLR7nK9vcNKBoWWo_2bQxeAGGDdGNwgvM9g3VkcILzP4V3YWt1MgA"}'
2026-02-09 04:41:22.591 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:41:22.592 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62268/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.75/tcp/39488/p2p/16Uiu2HAmCoA9aHnSqDvjX2mC9JpykoWJY6PemHGX74SaZoRDFn4n"]'
2026-02-09 04:41:22.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:41:22.623 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-09 04:41:22.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39487/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-09 04:41:22.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:41:22.638 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62268/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d393ee77-a517-419f-89bc-459e02defc9f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-09 04:41:22.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d393ee77-a517-419f-89bc-459e02defc9f","statusDesc":"OK"}'
2026-02-09 04:41:22.653 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:41:22.661 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:41:22.662 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-09 04:41:22.762 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-09 04:41:22.763 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62268/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:22.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770612082653788804,"ephemeral":false}]'
2026-02-09 04:41:22.767 DEBUG [src.node.waku_node] Pausing container with id 8fa950f4bec6
2026-02-09 04:41:22.778 DEBUG [src.node.waku_node] Unpause container with id 8fa950f4bec6
2026-02-09 04:41:22.788 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:41:22.794 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:41:22.794 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-09 04:41:22.894 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-09 04:41:22.895 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62268/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:22.898 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770612082788366145,"ephemeral":false}]'
2026-02-09 04:41:22.900 DEBUG [src.node.waku_node] Pausing container with id 771314e72fd0
2026-02-09 04:41:22.909 DEBUG [src.node.waku_node] Unpause container with id 771314e72fd0
2026-02-09 04:41:22.919 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTI=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:41:22.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:41:22.925 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-09 04:41:23.025 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-09 04:41:23.026 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62268/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:41:23.029 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTI=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1770612082919588736,"ephemeral":false}]'
2026-02-09 04:41:23.032 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:41:23.033 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:41:23.033 DEBUG [src.node.waku_node] Stopping container with id 8fa950f4bec6
2026-02-09 04:41:23.558 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:41:23.558 DEBUG [src.node.waku_node] Stopping container with id 771314e72fd0
2026-02-09 04:41:24.103 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:41:24.104 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:41:24.111 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:41:24.116 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
