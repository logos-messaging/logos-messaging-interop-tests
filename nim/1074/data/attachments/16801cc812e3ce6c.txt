2026-02-09 04:43:13.024 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:43:13.025 DEBUG [tests.conftest] Running test: test_lightpush_with_a_single_receiving_node with id: 2026-02-09_04-43-13__741cc34c-7e51-4e0e-873e-3f8d60824b94
2026-02-09 04:43:13.025 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:43:13.025 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-09 04:43:13.032 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:43:13.032 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-09_04-43-13__741cc34c-7e51-4e0e-873e-3f8d60824b94__wakuorg_nwaku:latest.log
2026-02-09 04:43:13.032 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:43:13.032 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:43:13.033 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:43:13.034 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.70.81
2026-02-09 04:43:13.034 DEBUG [src.node.docker_mananger] Generated ports ['51953', '51954', '51955', '51956', '51957']
2026-02-09 04:43:13.034 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:43:13.034 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:43:13.034 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:43:13.034 DEBUG [src.node.docker_mananger] docker run -i -t -p 51953:51953 -p 51954:51954 -p 51955:51955 -p 51956:51956 -p 51957:51957 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51955 --rest-port=51953 --tcp-port=51954 --discv5-udp-port=51956 --rest-address=0.0.0.0 --nat=extip:172.18.70.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0aa7a7fb24bc674e5a573f9baebfde6dab0a2bba19a3e3aa1ec7debc9c06ec5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51957 --metrics-logging=true --lightpush=true --relay=true
2026-02-09 04:43:13.231 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.70.81 waku 91d977fd7392424a354b7b90ec2df47aeb5c1136da91acc4412931275351d44c
2026-02-09 04:43:13.259 DEBUG [src.node.docker_mananger] Container started with ID 91d977fd7392. Setting up logs at ./log/docker/receiving_node1_2026-02-09_04-43-13__741cc34c-7e51-4e0e-873e-3f8d60824b94__wakuorg_nwaku:latest.log
2026-02-09 04:43:13.260 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51953
2026-02-09 04:43:13.260 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:43:13.268 ERROR [src.node.docker_mananger] Max retries reached for container bb12a66505c1. Exiting log stream.
2026-02-09 04:43:13.813 ERROR [src.node.docker_mananger] Max retries reached for container 9821919eea03. Exiting log stream.
2026-02-09 04:43:14.260 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51953/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:14.263 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:43:14.263 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:43:14.264 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51953/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:14.266 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.81/tcp/51954/p2p/16Uiu2HAky47ghyuT53m8C9neZ8uFcY6axkAevZgyQP7H5sienMRy","/ip4/172.18.70.81/tcp/51955/ws/p2p/16Uiu2HAky47ghyuT53m8C9neZ8uFcY6axkAevZgyQP7H5sienMRy"],"enrUri":"enr:-L24QPhajJZVDVIWohWJkr80FJZHifunTODf8c3SG4it_IgXeHxYzcFhFFFfJjI5WwvikUWGZMgPzMYjYcrtz6tv4vgCgmlkgnY0gmlwhKwSRlGKbXVsdGlhZGRyc5YACASsEkZRBsryAAoErBJGUQbK890DgnJzhQADAQAAiXNlY3AyNTZrMaECNekI_MotuxmflIh71vz6EGaJ8Zr9bFsJb5LcRNXpvfCDdGNwgsryg3VkcILK9IV3YWt1Mgk"}'
2026-02-09 04:43:14.266 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:43:14.272 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:43:14.273 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-09_04-43-13__741cc34c-7e51-4e0e-873e-3f8d60824b94__wakuorg_nwaku:latest.log
2026-02-09 04:43:14.273 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:43:14.273 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:43:14.274 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:43:14.274 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.239
2026-02-09 04:43:14.274 DEBUG [src.node.docker_mananger] Generated ports ['62224', '62225', '62226', '62227', '62228']
2026-02-09 04:43:14.275 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:43:14.275 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:43:14.275 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:43:14.275 DEBUG [src.node.docker_mananger] docker run -i -t -p 62224:62224 -p 62225:62225 -p 62226:62226 -p 62227:62227 -p 62228:62228 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62226 --rest-port=62224 --tcp-port=62225 --discv5-udp-port=62227 --rest-address=0.0.0.0 --nat=extip:172.18.97.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=34dfb4a5431933c78af008eed74e5dbd05564dfa2fd2bdad32b26b50e88f0dd7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62228 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPhajJZVDVIWohWJkr80FJZHifunTODf8c3SG4it_IgXeHxYzcFhFFFfJjI5WwvikUWGZMgPzMYjYcrtz6tv4vgCgmlkgnY0gmlwhKwSRlGKbXVsdGlhZGRyc5YACASsEkZRBsryAAoErBJGUQbK890DgnJzhQADAQAAiXNlY3AyNTZrMaECNekI_MotuxmflIh71vz6EGaJ8Zr9bFsJb5LcRNXpvfCDdGNwgsryg3VkcILK9IV3YWt1Mgk --lightpushnode=/ip4/172.18.70.81/tcp/51954/p2p/16Uiu2HAky47ghyuT53m8C9neZ8uFcY6axkAevZgyQP7H5sienMRy --lightpush=true --relay=true
2026-02-09 04:43:14.451 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.239 waku 58908aa65ebc90b030af131dca8132c1c2aab4cf6a83c732efbb5dc1989675e8
2026-02-09 04:43:14.487 DEBUG [src.node.docker_mananger] Container started with ID 58908aa65ebc. Setting up logs at ./log/docker/lightpush_node1_2026-02-09_04-43-13__741cc34c-7e51-4e0e-873e-3f8d60824b94__wakuorg_nwaku:latest.log
2026-02-09 04:43:14.487 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62224
2026-02-09 04:43:14.488 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:43:15.488 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62224/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:15.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:43:15.492 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:43:15.492 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62224/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:15.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.239/tcp/62225/p2p/16Uiu2HAm2h16Z8j2AP2pzc1pkt8ELCXMVzrtzgmBC8jxHoSTsQ8G","/ip4/172.18.97.239/tcp/62226/ws/p2p/16Uiu2HAm2h16Z8j2AP2pzc1pkt8ELCXMVzrtzgmBC8jxHoSTsQ8G"],"enrUri":"enr:-L24QGHU39p9WMnAeyAdoMnL0otB1riyrmcz7GVHUw75amzAaKjzE3ORVgFTTfawFnYR0KXnPr6LpMxZqYClxpY0ePkCgmlkgnY0gmlwhKwSYe-KbXVsdGlhZGRyc5YACASsEmHvBvMRAAoErBJh7wbzEt0DgnJzhQADAQAAiXNlY3AyNTZrMaECa-8iw85gyMTAvutRI9Et-YKmZt7Urqji4wqubLlXknGDdGNwgvMRg3VkcILzE4V3YWt1Mgk"}'
2026-02-09 04:43:15.495 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:43:15.495 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62224/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.70.81/tcp/51954/p2p/16Uiu2HAky47ghyuT53m8C9neZ8uFcY6axkAevZgyQP7H5sienMRy"]'
2026-02-09 04:43:15.534 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:15.535 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51953/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:43:15.549 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:15.550 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62224/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:43:15.553 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:15.553 DEBUG [src.steps.light_push] Lightpushing message
2026-02-09 04:43:15.554 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62224/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1770612195553782855}}'
2026-02-09 04:43:15.564 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:43:15.565 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-09 04:43:15.665 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2026-02-09 04:43:15.665 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51953/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:15.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770612195553782855,"ephemeral":false,"proof":""}]'
2026-02-09 04:43:15.670 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2026-02-09 04:43:15.670 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62224/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:43:15.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770612195553782855,"ephemeral":false,"proof":""}]'
2026-02-09 04:43:15.674 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:43:15.675 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:43:15.675 DEBUG [src.node.waku_node] Stopping container with id 91d977fd7392
2026-02-09 04:43:16.223 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:43:16.224 DEBUG [src.node.waku_node] Stopping container with id 58908aa65ebc
2026-02-09 04:43:16.704 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:43:16.705 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:43:16.712 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:43:16.717 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
