2026-02-09 04:49:32.408 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-09 04:49:32.408 DEBUG [tests.conftest] Running test: test_main_node_only_relay__peer_only_store with id: 2026-02-09_04-49-32__704469c9-b561-4549-9880-cbd4a309c9d2
2026-02-09 04:49:32.409 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-09 04:49:32.409 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-09 04:49:32.416 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:49:32.416 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-09_04-49-32__704469c9-b561-4549-9880-cbd4a309c9d2__wakuorg_nwaku:latest.log
2026-02-09 04:49:32.416 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:49:32.417 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:49:32.418 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:49:32.418 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.50.77
2026-02-09 04:49:32.418 DEBUG [src.node.docker_mananger] Generated ports ['53185', '53186', '53187', '53188', '53189']
2026-02-09 04:49:32.418 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:49:32.418 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:49:32.419 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:49:32.419 DEBUG [src.node.docker_mananger] docker run -i -t -p 53185:53185 -p 53186:53186 -p 53187:53187 -p 53188:53188 -p 53189:53189 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53187 --rest-port=53185 --tcp-port=53186 --discv5-udp-port=53188 --rest-address=0.0.0.0 --nat=extip:172.18.50.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5a06ffa70fa7a38633fef268eab9509bf941bbf899cfe4c07fdc75a279b6cf2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53189 --metrics-logging=true --store=false --relay=true
2026-02-09 04:49:32.608 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.50.77 waku 774679eb6224e33fc6a3388bab35a1ae4ceeba384e5375e02e9c16487623fd49
2026-02-09 04:49:32.628 ERROR [src.node.docker_mananger] Max retries reached for container 2de9f393ff72. Exiting log stream.
2026-02-09 04:49:32.639 DEBUG [src.node.docker_mananger] Container started with ID 774679eb6224. Setting up logs at ./log/docker/publishing_node1_2026-02-09_04-49-32__704469c9-b561-4549-9880-cbd4a309c9d2__wakuorg_nwaku:latest.log
2026-02-09 04:49:32.639 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53185
2026-02-09 04:49:32.640 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:49:33.216 ERROR [src.node.docker_mananger] Max retries reached for container fc5902719d9a. Exiting log stream.
2026-02-09 04:49:33.641 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53185/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:49:33.644 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:49:33.644 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:49:33.644 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53185/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:49:33.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.77/tcp/53186/p2p/16Uiu2HAm3xkzxEjQuYLdciYhDKTMGBuh1NJffRrLyDkqtbxyqo2c","/ip4/172.18.50.77/tcp/53187/ws/p2p/16Uiu2HAm3xkzxEjQuYLdciYhDKTMGBuh1NJffRrLyDkqtbxyqo2c"],"enrUri":"enr:-L24QDSdKVKMtLRTTCsmu3iu4vq39JEr4zu287Z9pOcjbVnddpfrsXMbAEC0VfQnOPMrTXXyaXLJALt4XbWx4m6LsNsCgmlkgnY0gmlwhKwSMk2KbXVsdGlhZGRyc5YACASsEjJNBs_CAAoErBIyTQbPw90DgnJzhQADAQAAiXNlY3AyNTZrMaECftQtNs7gXrhSYbtZAPlg2RjrMa-U3yMz_kxK25ngnzWDdGNwgs_Cg3VkcILPxIV3YWt1MgE"}'
2026-02-09 04:49:33.647 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:49:33.654 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-09 04:49:33.654 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-09_04-49-32__704469c9-b561-4549-9880-cbd4a309c9d2__wakuorg_nwaku:latest.log
2026-02-09 04:49:33.654 DEBUG [src.node.waku_node] Starting Node...
2026-02-09 04:49:33.654 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-09 04:49:33.656 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-09 04:49:33.656 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.99.6
2026-02-09 04:49:33.656 DEBUG [src.node.docker_mananger] Generated ports ['6774', '6775', '6776', '6777', '6778']
2026-02-09 04:49:33.656 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-09 04:49:33.656 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-09 04:49:33.657 DEBUG [src.node.waku_node] Using volumes []
2026-02-09 04:49:33.657 DEBUG [src.node.docker_mananger] docker run -i -t -p 6774:6774 -p 6775:6775 -p 6776:6776 -p 6777:6777 -p 6778:6778 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6776 --rest-port=6774 --tcp-port=6775 --discv5-udp-port=6777 --rest-address=0.0.0.0 --nat=extip:172.18.99.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=69eafe9aa4f0bf97d7cc6ddd73010fd0cc43fb306c59cfc07679aedcf7e9ec9a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6778 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDSdKVKMtLRTTCsmu3iu4vq39JEr4zu287Z9pOcjbVnddpfrsXMbAEC0VfQnOPMrTXXyaXLJALt4XbWx4m6LsNsCgmlkgnY0gmlwhKwSMk2KbXVsdGlhZGRyc5YACASsEjJNBs_CAAoErBIyTQbPw90DgnJzhQADAQAAiXNlY3AyNTZrMaECftQtNs7gXrhSYbtZAPlg2RjrMa-U3yMz_kxK25ngnzWDdGNwgs_Cg3VkcILPxIV3YWt1MgE --storenode=/ip4/172.18.50.77/tcp/53186/p2p/16Uiu2HAm3xkzxEjQuYLdciYhDKTMGBuh1NJffRrLyDkqtbxyqo2c --store=true --relay=false
2026-02-09 04:49:33.852 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.99.6 waku 01dd17f85e917cc43e281669e70fde4535beea5ea37577cb9086a9b1dd40605d
2026-02-09 04:49:33.888 DEBUG [src.node.docker_mananger] Container started with ID 01dd17f85e91. Setting up logs at ./log/docker/store_node1_2026-02-09_04-49-32__704469c9-b561-4549-9880-cbd4a309c9d2__wakuorg_nwaku:latest.log
2026-02-09 04:49:33.889 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6774
2026-02-09 04:49:33.889 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-09 04:49:34.889 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6774/health" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:49:34.893 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-09 04:49:34.893 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-09 04:49:34.893 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6774/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:49:34.896 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.6/tcp/6775/p2p/16Uiu2HAmFW2kwnZY6MsHG1eVpr6hziSquR7ns7MXTADdN2LdTYgn","/ip4/172.18.99.6/tcp/6776/ws/p2p/16Uiu2HAmFW2kwnZY6MsHG1eVpr6hziSquR7ns7MXTADdN2LdTYgn"],"enrUri":"enr:-L24QFwUaN2gMRgFW0Z3PUuJ6v2XVxSLS7BgjTCWnzmS8ei8FrQWS7c7dheohzXDXxE2nUHdtW7OxIrz7bCLqhBiEKsCgmlkgnY0gmlwhKwSYwaKbXVsdGlhZGRyc5YACASsEmMGBhp3AAoErBJjBgYaeN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDKkeOWly0ZRUje8TjEMYymHcdlNZQoHsL8aTAkjHzjE-DdGNwghp3g3VkcIIaeYV3YWt1MgI"}'
2026-02-09 04:49:34.896 INFO [src.node.waku_node] REST service is ready !!
2026-02-09 04:49:34.896 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6774/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.77/tcp/53186/p2p/16Uiu2HAm3xkzxEjQuYLdciYhDKTMGBuh1NJffRrLyDkqtbxyqo2c"]'
2026-02-09 04:49:34.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:49:34.926 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53185/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-09 04:49:34.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:49:34.939 DEBUG [src.steps.store] Relaying message
2026-02-09 04:49:34.939 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53185/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-09 04:49:34.944 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-09 04:49:34.945 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-09 04:49:35.146 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-09 04:49:35.146 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6774/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2026-02-09 04:49:35.149 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-02-09 04:49:35.149 DEBUG [src.steps.store] messages length is 0
2026-02-09 04:49:35.151 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-09 04:49:35.152 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-09 04:49:35.152 DEBUG [src.node.waku_node] Stopping container with id 774679eb6224
2026-02-09 04:49:35.730 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:49:35.730 DEBUG [src.node.waku_node] Stopping container with id 01dd17f85e91
2026-02-09 04:49:36.298 DEBUG [src.node.waku_node] Container stopped.
2026-02-09 04:49:36.299 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-09 04:49:36.308 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-09 04:49:36.313 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
