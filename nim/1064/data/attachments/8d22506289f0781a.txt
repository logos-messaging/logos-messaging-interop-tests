2026-02-01 04:44:18.468 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:44:18.469 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_some_of_the_subscribed_content_topics with id: 2026-02-01_04-44-18__19355255-c641-4b44-b839-cb440f9fe899
2026-02-01 04:44:18.469 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:44:18.469 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-01 04:44:18.469 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-01 04:44:18.475 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:44:18.476 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-01_04-44-18__19355255-c641-4b44-b839-cb440f9fe899__wakuorg_nwaku:latest.log
2026-02-01 04:44:18.476 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:44:18.476 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:44:18.477 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:44:18.477 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.14
2026-02-01 04:44:18.477 DEBUG [src.node.docker_mananger] Generated ports ['57173', '57174', '57175', '57176', '57177']
2026-02-01 04:44:18.478 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:44:18.478 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:44:18.478 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:44:18.478 DEBUG [src.node.docker_mananger] docker run -i -t -p 57173:57173 -p 57174:57174 -p 57175:57175 -p 57176:57176 -p 57177:57177 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57175 --rest-port=57173 --tcp-port=57174 --discv5-udp-port=57176 --rest-address=0.0.0.0 --nat=extip:172.18.212.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4413feda7a049b42791fa278ce0d04c15f38ba6fe2bbdbd9e9efefc81c01dabc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57177 --metrics-logging=true --relay=true --filter=true
2026-02-01 04:44:18.675 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.14 waku ad181dd3b9ff1e7015556a5ee8c9f68ee32dc071f0e7d954d93a555814a9b232
2026-02-01 04:44:18.703 DEBUG [src.node.docker_mananger] Container started with ID ad181dd3b9ff. Setting up logs at ./log/docker/node1_2026-02-01_04-44-18__19355255-c641-4b44-b839-cb440f9fe899__wakuorg_nwaku:latest.log
2026-02-01 04:44:18.703 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57173
2026-02-01 04:44:18.704 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:44:18.753 ERROR [src.node.docker_mananger] Max retries reached for container 87a270d33e3c. Exiting log stream.
2026-02-01 04:44:19.271 ERROR [src.node.docker_mananger] Max retries reached for container 5280523991ac. Exiting log stream.
2026-02-01 04:44:19.705 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57173/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:19.708 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:44:19.709 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:44:19.709 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57173/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:19.711 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.14/tcp/57174/p2p/16Uiu2HAmCWpQpnWpiCxvBg3bLfLb9t9M49XBq7mnqgu8XC4dn9S2","/ip4/172.18.212.14/tcp/57175/ws/p2p/16Uiu2HAmCWpQpnWpiCxvBg3bLfLb9t9M49XBq7mnqgu8XC4dn9S2"],"enrUri":"enr:-L24QBIlP0eCL_H7kGY-1_n3s8NJ8o_igAwOZw2TYxzAK-mOFORbOtvtqi3YFfjtI4xlxg9JM8ZG5iXHOlRNYPa0OZYCgmlkgnY0gmlwhKwS1A6KbXVsdGlhZGRyc5YACASsEtQOBt9WAAoErBLUDgbfV90DgnJzhQADAQAAiXNlY3AyNTZrMaEC_egdiv9OKFjI0-vfEXlquOqexVYd-3SSMQSwkardebODdGNwgt9Wg3VkcILfWIV3YWt1MgU"}'
2026-02-01 04:44:19.711 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:44:19.712 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-01 04:44:19.718 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:44:19.718 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-01_04-44-18__19355255-c641-4b44-b839-cb440f9fe899__wakuorg_nwaku:latest.log
2026-02-01 04:44:19.718 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:44:19.718 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:44:19.720 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:44:19.720 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.195.7
2026-02-01 04:44:19.720 DEBUG [src.node.docker_mananger] Generated ports ['51007', '51008', '51009', '51010', '51011']
2026-02-01 04:44:19.720 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:44:19.720 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:44:19.720 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:44:19.721 DEBUG [src.node.docker_mananger] docker run -i -t -p 51007:51007 -p 51008:51008 -p 51009:51009 -p 51010:51010 -p 51011:51011 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51009 --rest-port=51007 --tcp-port=51008 --discv5-udp-port=51010 --rest-address=0.0.0.0 --nat=extip:172.18.195.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ece8df24ab9d5f11c2b7a069c2953e6a3bee586b3eb70a6a315fe21df48ba282 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51011 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBIlP0eCL_H7kGY-1_n3s8NJ8o_igAwOZw2TYxzAK-mOFORbOtvtqi3YFfjtI4xlxg9JM8ZG5iXHOlRNYPa0OZYCgmlkgnY0gmlwhKwS1A6KbXVsdGlhZGRyc5YACASsEtQOBt9WAAoErBLUDgbfV90DgnJzhQADAQAAiXNlY3AyNTZrMaEC_egdiv9OKFjI0-vfEXlquOqexVYd-3SSMQSwkardebODdGNwgt9Wg3VkcILfWIV3YWt1MgU --filternode=/ip4/172.18.212.14/tcp/57174/p2p/16Uiu2HAmCWpQpnWpiCxvBg3bLfLb9t9M49XBq7mnqgu8XC4dn9S2
2026-02-01 04:44:19.908 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.195.7 waku 100682b7f22b9abea72e3c949a21c042a365be2d15e7e77b876bce9c335b7e10
2026-02-01 04:44:19.940 DEBUG [src.node.docker_mananger] Container started with ID 100682b7f22b. Setting up logs at ./log/docker/node2_2026-02-01_04-44-18__19355255-c641-4b44-b839-cb440f9fe899__wakuorg_nwaku:latest.log
2026-02-01 04:44:19.941 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51007
2026-02-01 04:44:19.942 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:44:20.942 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51007/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:20.947 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-01 04:44:20.947 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:44:20.947 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51007/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:20.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.7/tcp/51008/p2p/16Uiu2HAkuWYdCjHWCMaFjmNzCmYkHKiXdYVKwN99BZ9wcuNWZ59C","/ip4/172.18.195.7/tcp/51009/ws/p2p/16Uiu2HAkuWYdCjHWCMaFjmNzCmYkHKiXdYVKwN99BZ9wcuNWZ59C"],"enrUri":"enr:-L24QObfOs61wiNSkn66Hj4iGsv4bugtqrZm0tLuE05wrXLCA9ldR0GGW1KQRiEqztzz1nLs8xNLOQbuNBHt9xV_NUkCgmlkgnY0gmlwhKwSwweKbXVsdGlhZGRyc5YACASsEsMHBsdAAAoErBLDBwbHQd0DgnJzhQADAQAAiXNlY3AyNTZrMaECAT-WdDveL33L2svMuGp3HfA17MvfuAyGTCTuckpVJtuDdGNwgsdAg3VkcILHQoV3YWt1MgA"}'
2026-02-01 04:44:20.950 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:44:20.950 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51007/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.212.14/tcp/57174/p2p/16Uiu2HAmCWpQpnWpiCxvBg3bLfLb9t9M49XBq7mnqgu8XC4dn9S2"]'
2026-02-01 04:44:20.980 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:20.981 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-01 04:44:20.982 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57173/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-01 04:44:20.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:20.996 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51007/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fd5d579e-2248-4a79-a9b6-4c3977448dfe", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-01 04:44:21.008 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"fd5d579e-2248-4a79-a9b6-4c3977448dfe","statusDesc":"OK"}'
2026-02-01 04:44:21.009 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57173/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-01 04:44:21.012 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:21.012 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51007/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e1add091-79c5-4265-ac01-ff51cd39a562", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-01 04:44:21.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e1add091-79c5-4265-ac01-ff51cd39a562","statusDesc":"OK"}'
2026-02-01 04:44:21.021 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57173/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:44:21.028 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:21.029 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-01 04:44:21.129 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-01 04:44:21.129 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51007/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:21.132 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1769921061021307915,"ephemeral":false}]'
2026-02-01 04:44:21.133 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:51007/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-01 04:44:21.141 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2026-02-01 04:44:21.142 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57173/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:44:21.146 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:21.146 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-01 04:44:21.246 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-01 04:44:21.247 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51007/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:21.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1769921061142185437,"ephemeral":false}]'
2026-02-01 04:44:21.252 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57173/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:44:21.256 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:21.256 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-01 04:44:21.356 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-01 04:44:21.356 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51007/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:21.359 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51007/filter/v2/messages/Hello%20World%21. Response content: b'Not subscribed to topic: Hello World!'
2026-02-01 04:44:21.362 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:44:21.363 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:44:21.363 DEBUG [src.node.waku_node] Stopping container with id ad181dd3b9ff
2026-02-01 04:44:21.886 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:44:21.887 DEBUG [src.node.waku_node] Stopping container with id 100682b7f22b
2026-02-01 04:44:22.418 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:44:22.419 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:44:22.426 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:44:22.432 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
