2026-02-01 04:44:00.000 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:44:00.000 DEBUG [tests.conftest] Running test: test_publish_with_missing_payload with id: 2026-02-01_04-44-00__364bc76f-5ce3-4642-a176-87f8c2f87625
2026-02-01 04:44:00.001 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:44:00.001 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-01 04:44:00.001 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-01 04:44:00.007 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:44:00.008 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-01_04-44-00__364bc76f-5ce3-4642-a176-87f8c2f87625__wakuorg_nwaku:latest.log
2026-02-01 04:44:00.008 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:44:00.008 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:44:00.009 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:44:00.010 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.79
2026-02-01 04:44:00.010 DEBUG [src.node.docker_mananger] Generated ports ['53625', '53626', '53627', '53628', '53629']
2026-02-01 04:44:00.010 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:44:00.010 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:44:00.010 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:44:00.010 DEBUG [src.node.docker_mananger] docker run -i -t -p 53625:53625 -p 53626:53626 -p 53627:53627 -p 53628:53628 -p 53629:53629 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53627 --rest-port=53625 --tcp-port=53626 --discv5-udp-port=53628 --rest-address=0.0.0.0 --nat=extip:172.18.45.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4d17eebab0fbabb18b87d11accdcaca2f3ff430efab79fbac95b125ec2a5a34f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53629 --metrics-logging=true --relay=true
2026-02-01 04:44:00.184 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.79 waku e544811fd8bf078aa91c3a900c828e8d47d536b87e9f40bb171ad327c02869f7
2026-02-01 04:44:00.211 DEBUG [src.node.docker_mananger] Container started with ID e544811fd8bf. Setting up logs at ./log/docker/node1_2026-02-01_04-44-00__364bc76f-5ce3-4642-a176-87f8c2f87625__wakuorg_nwaku:latest.log
2026-02-01 04:44:00.212 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53625
2026-02-01 04:44:00.212 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:44:00.332 ERROR [src.node.docker_mananger] Max retries reached for container 8c89e78d6695. Exiting log stream.
2026-02-01 04:44:00.799 ERROR [src.node.docker_mananger] Max retries reached for container 30b3e29c4517. Exiting log stream.
2026-02-01 04:44:01.213 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53625/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:01.216 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:44:01.217 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:44:01.217 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53625/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:01.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.79/tcp/53626/p2p/16Uiu2HAmPembkvdhfKfLme4Ck7SFcX7dkH3W554NagW7bKUBdWvz","/ip4/172.18.45.79/tcp/53627/ws/p2p/16Uiu2HAmPembkvdhfKfLme4Ck7SFcX7dkH3W554NagW7bKUBdWvz"],"enrUri":"enr:-L24QB0q6fVzRJ6k7ZaWM4c1iL55byuAp-knVbln7L6T68LWL0cBMDiucQ52chadccvvY_lqMlSU7izmjxVhsAdOt9QCgmlkgnY0gmlwhKwSLU-KbXVsdGlhZGRyc5YACASsEi1PBtF6AAoErBItTwbRe90DgnJzhQADAQAAiXNlY3AyNTZrMaEDo2IjnBImgq7w0jhL0Z1ZFF7uQSE9YSXd1_MYspacYu-DdGNwgtF6g3VkcILRfIV3YWt1MgE"}'
2026-02-01 04:44:01.220 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:44:01.226 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:44:01.226 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-01_04-44-00__364bc76f-5ce3-4642-a176-87f8c2f87625__wakuorg_nwaku:latest.log
2026-02-01 04:44:01.226 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:44:01.226 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:44:01.227 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:44:01.228 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.164.204
2026-02-01 04:44:01.228 DEBUG [src.node.docker_mananger] Generated ports ['40212', '40213', '40214', '40215', '40216']
2026-02-01 04:44:01.228 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:44:01.228 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:44:01.228 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:44:01.228 DEBUG [src.node.docker_mananger] docker run -i -t -p 40212:40212 -p 40213:40213 -p 40214:40214 -p 40215:40215 -p 40216:40216 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40214 --rest-port=40212 --tcp-port=40213 --discv5-udp-port=40215 --rest-address=0.0.0.0 --nat=extip:172.18.164.204 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea62fca669be8e71c313ea9dfe2dce5c3b0744613dc4b3bd5cf1e4182ec48eff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40216 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QB0q6fVzRJ6k7ZaWM4c1iL55byuAp-knVbln7L6T68LWL0cBMDiucQ52chadccvvY_lqMlSU7izmjxVhsAdOt9QCgmlkgnY0gmlwhKwSLU-KbXVsdGlhZGRyc5YACASsEi1PBtF6AAoErBItTwbRe90DgnJzhQADAQAAiXNlY3AyNTZrMaEDo2IjnBImgq7w0jhL0Z1ZFF7uQSE9YSXd1_MYspacYu-DdGNwgtF6g3VkcILRfIV3YWt1MgE
2026-02-01 04:44:01.390 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.164.204 waku e78bdb25bdad0b4cfd05c01af76700e259e886a5434d3532c81c11b7ff28677d
2026-02-01 04:44:01.415 DEBUG [src.node.docker_mananger] Container started with ID e78bdb25bdad. Setting up logs at ./log/docker/node2_2026-02-01_04-44-00__364bc76f-5ce3-4642-a176-87f8c2f87625__wakuorg_nwaku:latest.log
2026-02-01 04:44:01.416 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40212
2026-02-01 04:44:01.417 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:44:02.417 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40212/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:02.437 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:44:02.438 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:44:02.440 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40212/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:02.443 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.204/tcp/40213/p2p/16Uiu2HAky5JzPB7Yn1fMfsNWeKERqGsrDEydYFvygRdZQfSqaGNb","/ip4/172.18.164.204/tcp/40214/ws/p2p/16Uiu2HAky5JzPB7Yn1fMfsNWeKERqGsrDEydYFvygRdZQfSqaGNb"],"enrUri":"enr:-L24QFoGwprvHeRV4yKX-o7Q-vmaQBjlLua5W1Cgqo6hq4vAdPV3-4tn-Y61_0NG8HlSAAL7lcuCQmpPBzQhjb4V3JgCgmlkgnY0gmlwhKwSpMyKbXVsdGlhZGRyc5YACASsEqTMBp0VAAoErBKkzAadFt0DgnJzhQADAQAAiXNlY3AyNTZrMaECNjdl8zvoweT1jMR4DUKT_fOd0vjA3dFJxEOPXkd7F8iDdGNwgp0Vg3VkcIKdF4V3YWt1MgE"}'
2026-02-01 04:44:02.444 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:44:02.444 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40212/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.45.79/tcp/53626/p2p/16Uiu2HAmPembkvdhfKfLme4Ck7SFcX7dkH3W554NagW7bKUBdWvz"]'
2026-02-01 04:44:02.447 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:02.447 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-01 04:44:02.448 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53625/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-01 04:44:02.451 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:02.451 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40212/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-01 04:44:02.455 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:02.456 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53625/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:44:02.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:02.461 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-01 04:44:02.561 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-01 04:44:02.562 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53625/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:02.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769921042455839744,"ephemeral":false,"proof":""}]'
2026-02-01 04:44:02.589 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-01 04:44:02.590 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40212/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:02.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1769921042455839744,"ephemeral":false,"proof":""}]'
2026-02-01 04:44:02.594 INFO [src.steps.relay] WARM UP successful!!
2026-02-01 04:44:02.594 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53625/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:44:02.597 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53625/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode: Unable to deserialize data: '
2026-02-01 04:44:02.599 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:44:02.600 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:44:02.600 DEBUG [src.node.waku_node] Stopping container with id e544811fd8bf
2026-02-01 04:44:03.072 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:44:03.072 DEBUG [src.node.waku_node] Stopping container with id e78bdb25bdad
2026-02-01 04:44:03.544 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:44:03.545 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:44:03.550 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:44:03.556 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
