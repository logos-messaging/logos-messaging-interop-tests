2026-02-01 04:44:27.910 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:44:27.910 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2026-02-01_04-44-27__6070fdb7-0bc3-4132-ba90-d8e6dc889d21
2026-02-01 04:44:27.911 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:44:27.911 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-01 04:44:27.917 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:44:27.917 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2026-02-01_04-44-27__6070fdb7-0bc3-4132-ba90-d8e6dc889d21__wakuorg_nwaku:latest.log
2026-02-01 04:44:27.918 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:44:27.918 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:44:27.919 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:44:27.919 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.148.138
2026-02-01 04:44:27.919 DEBUG [src.node.docker_mananger] Generated ports ['38715', '38716', '38717', '38718', '38719']
2026-02-01 04:44:27.919 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:44:27.920 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:44:27.920 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:44:27.920 DEBUG [src.node.docker_mananger] docker run -i -t -p 38715:38715 -p 38716:38716 -p 38717:38717 -p 38718:38718 -p 38719:38719 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38717 --rest-port=38715 --tcp-port=38716 --discv5-udp-port=38718 --rest-address=0.0.0.0 --nat=extip:172.18.148.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=10abdf646a72a2aba41c8d9cd4b5ec73ca633be6e1f313d77304525a844ab0d5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38719 --metrics-logging=true --lightpush=true --relay=true
2026-02-01 04:44:28.098 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.148.138 waku fbfa98d67f73ce2768e039c403703c6437398255dc6c15d51c36a57c33d6db7d
2026-02-01 04:44:28.128 DEBUG [src.node.docker_mananger] Container started with ID fbfa98d67f73. Setting up logs at ./log/docker/receiving_node1_2026-02-01_04-44-27__6070fdb7-0bc3-4132-ba90-d8e6dc889d21__wakuorg_nwaku:latest.log
2026-02-01 04:44:28.129 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38715
2026-02-01 04:44:28.129 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:44:28.214 ERROR [src.node.docker_mananger] Max retries reached for container 402cd1ef102c. Exiting log stream.
2026-02-01 04:44:28.694 ERROR [src.node.docker_mananger] Max retries reached for container 85e5ec7e9b42. Exiting log stream.
2026-02-01 04:44:29.131 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38715/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:29.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:44:29.135 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:44:29.135 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38715/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:29.137 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.138/tcp/38716/p2p/16Uiu2HAkvspUyKbkYUgqE3Jjp6LcAKxgaq87LHtNiR2akHbwC7R8","/ip4/172.18.148.138/tcp/38717/ws/p2p/16Uiu2HAkvspUyKbkYUgqE3Jjp6LcAKxgaq87LHtNiR2akHbwC7R8"],"enrUri":"enr:-L24QG1lAZVCTevKIKTVxdcAGL--4crYu_2SipFWtpYMY9bCdeeDPxpmIswJ2E6ct8wqvmf0ofR6QQfEfaxWQeTTi7QCgmlkgnY0gmlwhKwSlIqKbXVsdGlhZGRyc5YACASsEpSKBpc8AAoErBKUigaXPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECFY5nBPtlJ0GOflEfYHpcSh-hHxw2TQGQecjxDU-QbyeDdGNwgpc8g3VkcIKXPoV3YWt1Mgk"}'
2026-02-01 04:44:29.137 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:44:29.144 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:44:29.144 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2026-02-01_04-44-27__6070fdb7-0bc3-4132-ba90-d8e6dc889d21__wakuorg_nwaku:latest.log
2026-02-01 04:44:29.144 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:44:29.144 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:44:29.146 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:44:29.146 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.93.11
2026-02-01 04:44:29.146 DEBUG [src.node.docker_mananger] Generated ports ['42561', '42562', '42563', '42564', '42565']
2026-02-01 04:44:29.146 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:44:29.147 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:44:29.147 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:44:29.147 DEBUG [src.node.docker_mananger] docker run -i -t -p 42561:42561 -p 42562:42562 -p 42563:42563 -p 42564:42564 -p 42565:42565 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42563 --rest-port=42561 --tcp-port=42562 --discv5-udp-port=42564 --rest-address=0.0.0.0 --nat=extip:172.18.93.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=65fb6d40162fbc15dfdfd5a2a854cab2ab989a64c8e4de93d3c3caa095f7d21f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42565 --metrics-logging=true --lightpush=false --relay=true
2026-02-01 04:44:29.335 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.93.11 waku 54bb79acc23749e01a0556e33ad70278d8ae29c7817398ee40ef040b97ebfa2f
2026-02-01 04:44:29.366 DEBUG [src.node.docker_mananger] Container started with ID 54bb79acc237. Setting up logs at ./log/docker/receiving_node2_2026-02-01_04-44-27__6070fdb7-0bc3-4132-ba90-d8e6dc889d21__wakuorg_nwaku:latest.log
2026-02-01 04:44:29.366 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42561
2026-02-01 04:44:29.366 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:44:30.368 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42561/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:30.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:44:30.371 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:44:30.371 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42561/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:30.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.11/tcp/42562/p2p/16Uiu2HAmRNJDWWAxgfAgW174t9wxyeaUVdrMz2b3jJv2PwaLhapK","/ip4/172.18.93.11/tcp/42563/ws/p2p/16Uiu2HAmRNJDWWAxgfAgW174t9wxyeaUVdrMz2b3jJv2PwaLhapK"],"enrUri":"enr:-L24QDuqEFe4kSDZ4_fJ9mF1O4IEV9uI2YU_QggR3gjOc1Gdc9oli3eL7XIpBjdV7dPqCMp5PMYECgYSu_yzVzN_YekCgmlkgnY0gmlwhKwSXQuKbXVsdGlhZGRyc5YACASsEl0LBqZCAAoErBJdCwamQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDvOFB3My6BJ2p0XCZsShHQhiSfMuMjvzok67IQFy0w-yDdGNwgqZCg3VkcIKmRIV3YWt1MgE"}'
2026-02-01 04:44:30.374 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:44:30.374 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42561/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.138/tcp/38716/p2p/16Uiu2HAkvspUyKbkYUgqE3Jjp6LcAKxgaq87LHtNiR2akHbwC7R8"]'
2026-02-01 04:44:30.406 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:30.415 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:44:30.415 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2026-02-01_04-44-27__6070fdb7-0bc3-4132-ba90-d8e6dc889d21__wakuorg_nwaku:latest.log
2026-02-01 04:44:30.416 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:44:30.416 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:44:30.419 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:44:30.419 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.14.48
2026-02-01 04:44:30.420 DEBUG [src.node.docker_mananger] Generated ports ['13094', '13095', '13096', '13097', '13098']
2026-02-01 04:44:30.420 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:44:30.421 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:44:30.422 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:44:30.422 DEBUG [src.node.docker_mananger] docker run -i -t -p 13094:13094 -p 13095:13095 -p 13096:13096 -p 13097:13097 -p 13098:13098 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13096 --rest-port=13094 --tcp-port=13095 --discv5-udp-port=13097 --rest-address=0.0.0.0 --nat=extip:172.18.14.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b7eb90d55b7f3af38d7f495d4aaf3feeaabe0cf00bb48feedca43e86f42bd9ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13098 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QG1lAZVCTevKIKTVxdcAGL--4crYu_2SipFWtpYMY9bCdeeDPxpmIswJ2E6ct8wqvmf0ofR6QQfEfaxWQeTTi7QCgmlkgnY0gmlwhKwSlIqKbXVsdGlhZGRyc5YACASsEpSKBpc8AAoErBKUigaXPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECFY5nBPtlJ0GOflEfYHpcSh-hHxw2TQGQecjxDU-QbyeDdGNwgpc8g3VkcIKXPoV3YWt1Mgk --lightpushnode=/ip4/172.18.148.138/tcp/38716/p2p/16Uiu2HAkvspUyKbkYUgqE3Jjp6LcAKxgaq87LHtNiR2akHbwC7R8 --lightpush=true --relay=true
2026-02-01 04:44:30.616 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.14.48 waku b7face04f757ac06461d070e3250f495f5c617fed6621adaaaa4bf4947a5fe4a
2026-02-01 04:44:30.651 DEBUG [src.node.docker_mananger] Container started with ID b7face04f757. Setting up logs at ./log/docker/lightpush_node1_2026-02-01_04-44-27__6070fdb7-0bc3-4132-ba90-d8e6dc889d21__wakuorg_nwaku:latest.log
2026-02-01 04:44:30.651 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13094
2026-02-01 04:44:30.651 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:44:31.652 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13094/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:31.656 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Legacy Lightpush":"NOT_READY","desc":"Node has no relay peers to fullfill push requests"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"READY"},{"Legacy Lightpush Client":"READY"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:44:31.656 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:44:31.656 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13094/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:31.658 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.48/tcp/13095/p2p/16Uiu2HAmApDyhjsCNw7NLvKAD78JKbGnJT235oaFsypGupsbz4ma","/ip4/172.18.14.48/tcp/13096/ws/p2p/16Uiu2HAmApDyhjsCNw7NLvKAD78JKbGnJT235oaFsypGupsbz4ma"],"enrUri":"enr:-L24QNGPHhpTlGsn18YHqTysK9wigUBuBtDmQPNGB-897SDyCdKAau3a2HIYVfrthpCj1MK9-rZe1Zq_8zV3-oaHVY8CgmlkgnY0gmlwhKwSDjCKbXVsdGlhZGRyc5YACASsEg4wBjMnAAoErBIOMAYzKN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC5KZDL-mo3HWUdzJVGQT9bLLKkSJyEHlX74iq24y6ho2DdGNwgjMng3VkcIIzKYV3YWt1Mgk"}'
2026-02-01 04:44:31.659 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:44:31.659 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13094/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.138/tcp/38716/p2p/16Uiu2HAkvspUyKbkYUgqE3Jjp6LcAKxgaq87LHtNiR2akHbwC7R8"]'
2026-02-01 04:44:31.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:31.695 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13094/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.93.11/tcp/42562/p2p/16Uiu2HAmRNJDWWAxgfAgW174t9wxyeaUVdrMz2b3jJv2PwaLhapK"]'
2026-02-01 04:44:31.720 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:31.721 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38715/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:44:31.725 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:31.727 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42561/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:44:31.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:31.733 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13094/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:44:31.738 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:44:31.743 DEBUG [src.steps.light_push] Lightpushing message
2026-02-01 04:44:31.743 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13094/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1769921071743143831, "meta": "Light push works!!"}}'
2026-02-01 04:44:31.747 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13094/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
2026-02-01 04:44:31.751 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:44:31.751 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:44:31.752 DEBUG [src.node.waku_node] Stopping container with id fbfa98d67f73
2026-02-01 04:44:32.308 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:44:32.308 DEBUG [src.node.waku_node] Stopping container with id 54bb79acc237
2026-02-01 04:44:32.846 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:44:32.847 DEBUG [src.node.waku_node] Stopping container with id b7face04f757
2026-02-01 04:44:33.121 ERROR [src.node.docker_mananger] Max retries reached for container fbfa98d67f73. Exiting log stream.
2026-02-01 04:44:33.379 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:44:33.383 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:44:33.390 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:44:33.397 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:44:33.404 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
