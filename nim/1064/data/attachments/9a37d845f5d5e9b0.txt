2026-02-01 04:46:57.345 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:46:57.345 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_with_extra_field with id: 2026-02-01_04-46-57__ea1280cb-bd50-4273-ade0-0d728b173022
2026-02-01 04:46:57.346 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:46:57.346 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-01 04:46:57.346 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-01 04:46:57.352 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:46:57.352 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-01_04-46-57__ea1280cb-bd50-4273-ade0-0d728b173022__wakuorg_nwaku:latest.log
2026-02-01 04:46:57.352 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:46:57.352 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:46:57.353 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:46:57.354 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.219.159
2026-02-01 04:46:57.354 DEBUG [src.node.docker_mananger] Generated ports ['37761', '37762', '37763', '37764', '37765']
2026-02-01 04:46:57.354 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:46:57.354 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:46:57.354 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:46:57.354 DEBUG [src.node.docker_mananger] docker run -i -t -p 37761:37761 -p 37762:37762 -p 37763:37763 -p 37764:37764 -p 37765:37765 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37763 --rest-port=37761 --tcp-port=37762 --discv5-udp-port=37764 --rest-address=0.0.0.0 --nat=extip:172.18.219.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d0a8268d5c1df82eeebb9c1e0c0a2dcfdc008cbd8be35de0e9d5ffbaac75ae2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37765 --metrics-logging=true --relay=true --filter=true
2026-02-01 04:46:57.536 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.219.159 waku 0067cebb9cf73a99165622681554e441b6c3b4735a2de27ed0dd6605e5bb6a51
2026-02-01 04:46:57.569 DEBUG [src.node.docker_mananger] Container started with ID 0067cebb9cf7. Setting up logs at ./log/docker/node1_2026-02-01_04-46-57__ea1280cb-bd50-4273-ade0-0d728b173022__wakuorg_nwaku:latest.log
2026-02-01 04:46:57.570 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37761
2026-02-01 04:46:57.571 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:46:57.660 ERROR [src.node.docker_mananger] Max retries reached for container 6c8fbf2d20b4. Exiting log stream.
2026-02-01 04:46:58.153 ERROR [src.node.docker_mananger] Max retries reached for container 6bdad8176c8c. Exiting log stream.
2026-02-01 04:46:58.571 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37761/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:46:58.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:46:58.575 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:46:58.575 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37761/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:46:58.577 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.159/tcp/37762/p2p/16Uiu2HAkw7HD5gP2kVHwKM1uKTruYM1zAR5Ne9L1JJfCFC2UfuMW","/ip4/172.18.219.159/tcp/37763/ws/p2p/16Uiu2HAkw7HD5gP2kVHwKM1uKTruYM1zAR5Ne9L1JJfCFC2UfuMW"],"enrUri":"enr:-L24QHaLdT0NfsS_hdycAMEEtLcAHBh5cxDRkZYh3PiWyx6GBIKWjqE7n8CX31SYvP2D8v7sZQJ14S_0G49HMzSIYF8CgmlkgnY0gmlwhKwS25-KbXVsdGlhZGRyc5YACASsEtufBpOCAAoErBLbnwaTg90DgnJzhQADAQAAiXNlY3AyNTZrMaECGQEsEkh11Cj9DK-DfiqtkVNfAULonIkkIOPOg4WzMvWDdGNwgpOCg3VkcIKThIV3YWt1MgU"}'
2026-02-01 04:46:58.577 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:46:58.578 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-01 04:46:58.584 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:46:58.584 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-01_04-46-57__ea1280cb-bd50-4273-ade0-0d728b173022__wakuorg_nwaku:latest.log
2026-02-01 04:46:58.584 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:46:58.584 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:46:58.586 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:46:58.586 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.208.238
2026-02-01 04:46:58.586 DEBUG [src.node.docker_mananger] Generated ports ['43453', '43454', '43455', '43456', '43457']
2026-02-01 04:46:58.586 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:46:58.586 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:46:58.586 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:46:58.587 DEBUG [src.node.docker_mananger] docker run -i -t -p 43453:43453 -p 43454:43454 -p 43455:43455 -p 43456:43456 -p 43457:43457 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43455 --rest-port=43453 --tcp-port=43454 --discv5-udp-port=43456 --rest-address=0.0.0.0 --nat=extip:172.18.208.238 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd1fea2fa9b2f1df2c9bfc6cb162ecd09fdfd9d6ff77cbff9d36dd84f1dac3ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43457 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHaLdT0NfsS_hdycAMEEtLcAHBh5cxDRkZYh3PiWyx6GBIKWjqE7n8CX31SYvP2D8v7sZQJ14S_0G49HMzSIYF8CgmlkgnY0gmlwhKwS25-KbXVsdGlhZGRyc5YACASsEtufBpOCAAoErBLbnwaTg90DgnJzhQADAQAAiXNlY3AyNTZrMaECGQEsEkh11Cj9DK-DfiqtkVNfAULonIkkIOPOg4WzMvWDdGNwgpOCg3VkcIKThIV3YWt1MgU --filternode=/ip4/172.18.219.159/tcp/37762/p2p/16Uiu2HAkw7HD5gP2kVHwKM1uKTruYM1zAR5Ne9L1JJfCFC2UfuMW
2026-02-01 04:46:58.769 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.208.238 waku fa3361b73338d796ae41e3e672d096865f330b580eaf7c7f3765e5181485196c
2026-02-01 04:46:58.802 DEBUG [src.node.docker_mananger] Container started with ID fa3361b73338. Setting up logs at ./log/docker/node2_2026-02-01_04-46-57__ea1280cb-bd50-4273-ade0-0d728b173022__wakuorg_nwaku:latest.log
2026-02-01 04:46:58.802 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43453
2026-02-01 04:46:58.802 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:46:59.803 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43453/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:46:59.807 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-01 04:46:59.807 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:46:59.807 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43453/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:46:59.809 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.238/tcp/43454/p2p/16Uiu2HAm5mieLrvN1jDzkcUYf3WkuMJKuxF31ikagwhQZnPCksKX","/ip4/172.18.208.238/tcp/43455/ws/p2p/16Uiu2HAm5mieLrvN1jDzkcUYf3WkuMJKuxF31ikagwhQZnPCksKX"],"enrUri":"enr:-L24QLzgevaHon4VGMV1-ITWi4vIvlFwFCYhpQ0DBv-6vn0ZLtA59Ud94SU1vlT2hePFQzfL7K7UjavoHNRAxiTNTIkCgmlkgnY0gmlwhKwS0O6KbXVsdGlhZGRyc5YACASsEtDuBqm-AAoErBLQ7gapv90DgnJzhQADAQAAiXNlY3AyNTZrMaECmbd_lX7ndt3sbEQvoFMpZnsq2iUpFo41wlMdlLf_FaKDdGNwgqm-g3VkcIKpwIV3YWt1MgA"}'
2026-02-01 04:46:59.809 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:46:59.810 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43453/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.219.159/tcp/37762/p2p/16Uiu2HAkw7HD5gP2kVHwKM1uKTruYM1zAR5Ne9L1JJfCFC2UfuMW"]'
2026-02-01 04:46:59.842 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:46:59.843 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-01 04:46:59.843 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37761/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-01 04:46:59.853 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:46:59.853 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43453/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e4b5cd22-ea17-40f8-aa70-0b5581f8544a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-01 04:46:59.865 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e4b5cd22-ea17-40f8-aa70-0b5581f8544a","statusDesc":"OK"}'
2026-02-01 04:46:59.867 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:43453/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1, "extraField": "extraValue"}'
2026-02-01 04:46:59.870 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43453/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-01 04:46:59.872 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:46:59.873 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:46:59.873 DEBUG [src.node.waku_node] Stopping container with id 0067cebb9cf7
2026-02-01 04:47:00.377 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:47:00.377 DEBUG [src.node.waku_node] Stopping container with id fa3361b73338
2026-02-01 04:47:00.899 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:47:00.900 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:47:00.905 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:47:00.910 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
