2026-02-01 04:48:03.492 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:48:03.494 DEBUG [tests.conftest] Running test: test_store_with_wrong_url_content_topic with id: 2026-02-01_04-48-03__f0942b71-3704-44df-ba61-de6a9ae839be
2026-02-01 04:48:03.494 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:48:03.495 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-01 04:48:03.495 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-01 04:48:03.504 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:48:03.505 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-01_04-48-03__f0942b71-3704-44df-ba61-de6a9ae839be__wakuorg_nwaku:latest.log
2026-02-01 04:48:03.505 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:48:03.505 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:48:03.507 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:48:03.508 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.184.213
2026-02-01 04:48:03.508 DEBUG [src.node.docker_mananger] Generated ports ['49264', '49265', '49266', '49267', '49268']
2026-02-01 04:48:03.508 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:48:03.508 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:48:03.509 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:48:03.509 DEBUG [src.node.docker_mananger] docker run -i -t -p 49264:49264 -p 49265:49265 -p 49266:49266 -p 49267:49267 -p 49268:49268 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49266 --rest-port=49264 --tcp-port=49265 --discv5-udp-port=49267 --rest-address=0.0.0.0 --nat=extip:172.18.184.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=41ad408a5fc7f8947efbf50d7f1efee1ee50ec34031c59ce1f0bb3bbc8b14e0c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49268 --metrics-logging=true --store=true --relay=true
2026-02-01 04:48:03.696 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.184.213 waku 0359982fa6862fca3bf99acc416beb4e416a72bb18d182360fb8a67aaa32b6a4
2026-02-01 04:48:03.707 ERROR [src.node.docker_mananger] Max retries reached for container 396d96150538. Exiting log stream.
2026-02-01 04:48:03.728 DEBUG [src.node.docker_mananger] Container started with ID 0359982fa686. Setting up logs at ./log/docker/publishing_node1_2026-02-01_04-48-03__f0942b71-3704-44df-ba61-de6a9ae839be__wakuorg_nwaku:latest.log
2026-02-01 04:48:03.729 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49264
2026-02-01 04:48:03.729 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:48:04.331 ERROR [src.node.docker_mananger] Max retries reached for container e51e5ce341ce. Exiting log stream.
2026-02-01 04:48:04.730 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49264/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:48:04.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:48:04.733 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:48:04.733 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49264/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:48:04.735 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.213/tcp/49265/p2p/16Uiu2HAm8M5G2ZfZG8gVcMPdZcwEDrUQZwzx2UdAhZAbAdqhBAAq","/ip4/172.18.184.213/tcp/49266/ws/p2p/16Uiu2HAm8M5G2ZfZG8gVcMPdZcwEDrUQZwzx2UdAhZAbAdqhBAAq"],"enrUri":"enr:-L24QDtXxI7TeqYbmp6av_ttkrNoDpxvG-jydNf-dNLIUG0HFsb7h8amTl8ixjfL7HvOKOplFy8Y3ugVUn-2O9sBYaoCgmlkgnY0gmlwhKwSuNWKbXVsdGlhZGRyc5YACASsErjVBsBxAAoErBK41QbAct0DgnJzhQADAQAAiXNlY3AyNTZrMaECv_pZQhzFdq6xBDPHD-7liO2aar9RHWQOr8AU6M_Jcg6DdGNwgsBxg3VkcILAc4V3YWt1MgM"}'
2026-02-01 04:48:04.735 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:48:04.742 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:48:04.743 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-01_04-48-03__f0942b71-3704-44df-ba61-de6a9ae839be__wakuorg_nwaku:latest.log
2026-02-01 04:48:04.743 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:48:04.743 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:48:04.744 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:48:04.744 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.31.223
2026-02-01 04:48:04.745 DEBUG [src.node.docker_mananger] Generated ports ['36143', '36144', '36145', '36146', '36147']
2026-02-01 04:48:04.745 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:48:04.745 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:48:04.745 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:48:04.745 DEBUG [src.node.docker_mananger] docker run -i -t -p 36143:36143 -p 36144:36144 -p 36145:36145 -p 36146:36146 -p 36147:36147 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36145 --rest-port=36143 --tcp-port=36144 --discv5-udp-port=36146 --rest-address=0.0.0.0 --nat=extip:172.18.31.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdbc2ff37ac407db87a96feb58fa2a8eb49294bed11d34fdb3e52f0f48f991c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36147 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDtXxI7TeqYbmp6av_ttkrNoDpxvG-jydNf-dNLIUG0HFsb7h8amTl8ixjfL7HvOKOplFy8Y3ugVUn-2O9sBYaoCgmlkgnY0gmlwhKwSuNWKbXVsdGlhZGRyc5YACASsErjVBsBxAAoErBK41QbAct0DgnJzhQADAQAAiXNlY3AyNTZrMaECv_pZQhzFdq6xBDPHD-7liO2aar9RHWQOr8AU6M_Jcg6DdGNwgsBxg3VkcILAc4V3YWt1MgM --storenode=/ip4/172.18.184.213/tcp/49265/p2p/16Uiu2HAm8M5G2ZfZG8gVcMPdZcwEDrUQZwzx2UdAhZAbAdqhBAAq --store=true --relay=true
2026-02-01 04:48:04.935 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.31.223 waku 12af68bc3e4a8199050cd73e3926b5e4ab24846956057f55aa2a222f1a6670ee
2026-02-01 04:48:04.972 DEBUG [src.node.docker_mananger] Container started with ID 12af68bc3e4a. Setting up logs at ./log/docker/store_node1_2026-02-01_04-48-03__f0942b71-3704-44df-ba61-de6a9ae839be__wakuorg_nwaku:latest.log
2026-02-01 04:48:04.973 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36143
2026-02-01 04:48:04.973 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:48:05.974 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36143/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:48:05.978 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:48:05.978 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:48:05.978 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36143/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:48:05.981 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.223/tcp/36144/p2p/16Uiu2HAm8oX7q9aqHBCFqsXoTtsgkeWawqcRDr9ajScVxTbbxiSj","/ip4/172.18.31.223/tcp/36145/ws/p2p/16Uiu2HAm8oX7q9aqHBCFqsXoTtsgkeWawqcRDr9ajScVxTbbxiSj"],"enrUri":"enr:-L24QE8JJn049d5QvdGr5Ph80Z3TC05ZP9IpVkRFn36B_xfyQEAEq89_5yoa-6nmKQsHdYp7_xF435idQGoUAkyLIQ0CgmlkgnY0gmlwhKwSH9-KbXVsdGlhZGRyc5YACASsEh_fBo0wAAoErBIf3waNMd0DgnJzhQADAQAAiXNlY3AyNTZrMaECxsCwLcrlyuXYVWlu422H-NvWf5s1VlKAa4PaxczQrJCDdGNwgo0wg3VkcIKNMoV3YWt1MgM"}'
2026-02-01 04:48:05.981 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:48:05.981 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36143/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.213/tcp/49265/p2p/16Uiu2HAm8M5G2ZfZG8gVcMPdZcwEDrUQZwzx2UdAhZAbAdqhBAAq"]'
2026-02-01 04:48:05.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:05.985 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49264/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:48:05.987 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:05.987 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36143/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:48:05.989 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:05.990 DEBUG [src.steps.store] Relaying message
2026-02-01 04:48:05.990 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49264/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:48:05.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:05.995 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:48:06.196 DEBUG [src.steps.store] Relaying message
2026-02-01 04:48:06.196 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49264/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:48:06.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:06.201 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:48:06.402 DEBUG [src.steps.store] Relaying message
2026-02-01 04:48:06.403 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49264/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:48:06.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:06.408 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:48:06.610 DEBUG [src.steps.store] Relaying message
2026-02-01 04:48:06.610 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49264/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:48:06.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:06.616 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:48:06.817 DEBUG [src.steps.store] Relaying message
2026-02-01 04:48:06.817 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49264/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:48:06.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:06.823 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:48:07.024 DEBUG [src.steps.store] Relaying message
2026-02-01 04:48:07.024 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49264/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:48:07.029 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:07.030 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:48:07.230 DEBUG [src.steps.store] Relaying message
2026-02-01 04:48:07.231 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49264/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:48:07.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:07.237 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:48:07.438 DEBUG [src.steps.store] Relaying message
2026-02-01 04:48:07.438 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49264/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:48:07.443 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:07.444 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:48:07.646 DEBUG [tests.store.test_topics] trying to find stored messages with wrong content_topic =myapp/1/latest/proto
2026-02-01 04:48:07.646 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49264/store/v3/messages?includeData=true&contentTopics=myapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:48:07.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-02-01 04:48:07.649 DEBUG [tests.store.test_topics]  response for wrong url content topic is {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2026-02-01 04:48:07.652 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:48:07.653 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:48:07.653 DEBUG [src.node.waku_node] Stopping container with id 0359982fa686
2026-02-01 04:48:08.224 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:48:08.224 DEBUG [src.node.waku_node] Stopping container with id 12af68bc3e4a
2026-02-01 04:48:08.765 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:48:08.767 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:48:08.774 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:48:08.781 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
