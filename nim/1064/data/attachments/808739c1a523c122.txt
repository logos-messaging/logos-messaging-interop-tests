2026-02-01 04:44:58.171 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:44:58.171 DEBUG [tests.conftest] Running test: test_main_node_only_relay__peer_relay_and_store with id: 2026-02-01_04-44-58__a99429f8-7a4b-49e3-baf0-52a896930f57
2026-02-01 04:44:58.171 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:44:58.172 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-01 04:44:58.178 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:44:58.178 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-01_04-44-58__a99429f8-7a4b-49e3-baf0-52a896930f57__wakuorg_nwaku:latest.log
2026-02-01 04:44:58.179 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:44:58.179 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:44:58.180 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:44:58.180 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.189.35
2026-02-01 04:44:58.180 DEBUG [src.node.docker_mananger] Generated ports ['62903', '62904', '62905', '62906', '62907']
2026-02-01 04:44:58.180 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:44:58.180 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:44:58.181 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:44:58.181 DEBUG [src.node.docker_mananger] docker run -i -t -p 62903:62903 -p 62904:62904 -p 62905:62905 -p 62906:62906 -p 62907:62907 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62905 --rest-port=62903 --tcp-port=62904 --discv5-udp-port=62906 --rest-address=0.0.0.0 --nat=extip:172.18.189.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6eaaa98a13f49ce744ddeedcc880bf1ab7685bfdb84bd442c973f375f4ccd73 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62907 --metrics-logging=true --store=false --relay=true
2026-02-01 04:44:58.339 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.189.35 waku 1b33f4c7438530f4cd4ce3263c04fa342fa0145437a5dee4775a4b8080ce0b0f
2026-02-01 04:44:58.367 DEBUG [src.node.docker_mananger] Container started with ID 1b33f4c74385. Setting up logs at ./log/docker/publishing_node1_2026-02-01_04-44-58__a99429f8-7a4b-49e3-baf0-52a896930f57__wakuorg_nwaku:latest.log
2026-02-01 04:44:58.367 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62903
2026-02-01 04:44:58.367 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:44:58.476 ERROR [src.node.docker_mananger] Max retries reached for container 5a2a68733436. Exiting log stream.
2026-02-01 04:44:58.967 ERROR [src.node.docker_mananger] Max retries reached for container 2ecdbb146f0b. Exiting log stream.
2026-02-01 04:44:59.368 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62903/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:59.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:44:59.371 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:44:59.372 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62903/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:44:59.375 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.35/tcp/62904/p2p/16Uiu2HAmC9GCJCssB6czxXFw9Q6fwNf6fdaurEM4ZxNggi1E9aiF","/ip4/172.18.189.35/tcp/62905/ws/p2p/16Uiu2HAmC9GCJCssB6czxXFw9Q6fwNf6fdaurEM4ZxNggi1E9aiF"],"enrUri":"enr:-L24QNT9K74AQrdr-eWdGIEOt34TeqO1p5WBnef3HP-VEmmoK7AaBe9JKI54hhQjA98NoZGuvKYu4lKjm-Mk9410V7MCgmlkgnY0gmlwhKwSvSOKbXVsdGlhZGRyc5YACASsEr0jBvW4AAoErBK9Iwb1ud0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-GJ93q4elqadWdUAfcrs1furYbE1s3j9sXcL2BrtpMyDdGNwgvW4g3VkcIL1uoV3YWt1MgE"}'
2026-02-01 04:44:59.375 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:44:59.382 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:44:59.382 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-01_04-44-58__a99429f8-7a4b-49e3-baf0-52a896930f57__wakuorg_nwaku:latest.log
2026-02-01 04:44:59.383 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:44:59.383 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:44:59.384 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:44:59.384 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.154.226
2026-02-01 04:44:59.385 DEBUG [src.node.docker_mananger] Generated ports ['56255', '56256', '56257', '56258', '56259']
2026-02-01 04:44:59.385 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:44:59.385 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:44:59.385 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:44:59.385 DEBUG [src.node.docker_mananger] docker run -i -t -p 56255:56255 -p 56256:56256 -p 56257:56257 -p 56258:56258 -p 56259:56259 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56257 --rest-port=56255 --tcp-port=56256 --discv5-udp-port=56258 --rest-address=0.0.0.0 --nat=extip:172.18.154.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab32eedb8c22828b9a82b31caddab2edcb12490a921a60baf0d3ad3effd3aa5f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56259 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNT9K74AQrdr-eWdGIEOt34TeqO1p5WBnef3HP-VEmmoK7AaBe9JKI54hhQjA98NoZGuvKYu4lKjm-Mk9410V7MCgmlkgnY0gmlwhKwSvSOKbXVsdGlhZGRyc5YACASsEr0jBvW4AAoErBK9Iwb1ud0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-GJ93q4elqadWdUAfcrs1furYbE1s3j9sXcL2BrtpMyDdGNwgvW4g3VkcIL1uoV3YWt1MgE --storenode=/ip4/172.18.189.35/tcp/62904/p2p/16Uiu2HAmC9GCJCssB6czxXFw9Q6fwNf6fdaurEM4ZxNggi1E9aiF --store=true --relay=true
2026-02-01 04:44:59.554 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.154.226 waku b1aabd6e072fb64df74964000395b6142f8d90c69d8ee73987816a6983a72198
2026-02-01 04:44:59.579 DEBUG [src.node.docker_mananger] Container started with ID b1aabd6e072f. Setting up logs at ./log/docker/store_node1_2026-02-01_04-44-58__a99429f8-7a4b-49e3-baf0-52a896930f57__wakuorg_nwaku:latest.log
2026-02-01 04:44:59.580 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56255
2026-02-01 04:44:59.580 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:45:00.580 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56255/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:45:00.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:45:00.584 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:45:00.584 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56255/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:45:00.587 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.226/tcp/56256/p2p/16Uiu2HAmSg2cq868nAuU45FuSwTprqDXzAg5xRzTMaqhzmoPTogV","/ip4/172.18.154.226/tcp/56257/ws/p2p/16Uiu2HAmSg2cq868nAuU45FuSwTprqDXzAg5xRzTMaqhzmoPTogV"],"enrUri":"enr:-L24QPfdp-2f8JaL3BInMbG3g6MDznrEuNy6gZH8EgNWXPvof-QmQEBjOtRM9bJWnlQDJ11OefJ7AHAfWdcBflNB-KoCgmlkgnY0gmlwhKwSmuKKbXVsdGlhZGRyc5YACASsEpriBtvAAAoErBKa4gbbwd0DgnJzhQADAQAAiXNlY3AyNTZrMaED0EfDHCRJLcSsgb-L6CGv1gSSXahhuxwsNcDidc_L5RqDdGNwgtvAg3VkcILbwoV3YWt1MgM"}'
2026-02-01 04:45:00.587 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:45:00.588 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56255/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.35/tcp/62904/p2p/16Uiu2HAmC9GCJCssB6czxXFw9Q6fwNf6fdaurEM4ZxNggi1E9aiF"]'
2026-02-01 04:45:00.595 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:45:00.595 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62903/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:45:00.598 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:45:00.598 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56255/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:45:00.600 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:45:00.601 DEBUG [src.steps.store] Relaying message
2026-02-01 04:45:00.601 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62903/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:45:00.605 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:45:00.605 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:45:00.806 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-01 04:45:00.807 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56255/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:45:00.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x8c433142caa74acaecf497a709c5baf147b3f07273286d117a5e571177edf360"}]}'
2026-02-01 04:45:00.810 DEBUG [src.steps.store] messages length is 1
2026-02-01 04:45:00.812 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:45:00.813 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:45:00.813 DEBUG [src.node.waku_node] Stopping container with id 1b33f4c74385
2026-02-01 04:45:01.355 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:45:01.356 DEBUG [src.node.waku_node] Stopping container with id b1aabd6e072f
2026-02-01 04:45:01.863 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:45:01.866 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:45:01.872 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:45:01.878 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
