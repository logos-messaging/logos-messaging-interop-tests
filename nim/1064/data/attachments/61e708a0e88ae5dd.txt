2026-02-01 04:49:13.622 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:49:13.622 DEBUG [tests.conftest] Running test: test_store_with_unknown_pubsub_topic_but_known_content_topic with id: 2026-02-01_04-49-13__ed0f998c-fc9b-4e09-8100-b19b2cf75622
2026-02-01 04:49:13.623 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:49:13.623 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-01 04:49:13.623 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-01 04:49:13.630 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:49:13.630 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-01_04-49-13__ed0f998c-fc9b-4e09-8100-b19b2cf75622__wakuorg_nwaku:latest.log
2026-02-01 04:49:13.631 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:49:13.631 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:49:13.632 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:49:13.632 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.60.234
2026-02-01 04:49:13.632 DEBUG [src.node.docker_mananger] Generated ports ['44661', '44662', '44663', '44664', '44665']
2026-02-01 04:49:13.633 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:49:13.633 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:49:13.633 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:49:13.633 DEBUG [src.node.docker_mananger] docker run -i -t -p 44661:44661 -p 44662:44662 -p 44663:44663 -p 44664:44664 -p 44665:44665 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44663 --rest-port=44661 --tcp-port=44662 --discv5-udp-port=44664 --rest-address=0.0.0.0 --nat=extip:172.18.60.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ff143bea5cdb26daedc9dcae27f818e72a52286cacdcc4d957bcbcd2a6ddaa6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44665 --metrics-logging=true --store=true --relay=true
2026-02-01 04:49:13.819 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.60.234 waku 391f15ccf50d13ac0ef5fef919f036699f48451f525c1bc13aceb1a57a5e091e
2026-02-01 04:49:13.849 ERROR [src.node.docker_mananger] Max retries reached for container 4e443a488828. Exiting log stream.
2026-02-01 04:49:13.853 DEBUG [src.node.docker_mananger] Container started with ID 391f15ccf50d. Setting up logs at ./log/docker/publishing_node1_2026-02-01_04-49-13__ed0f998c-fc9b-4e09-8100-b19b2cf75622__wakuorg_nwaku:latest.log
2026-02-01 04:49:13.854 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44661
2026-02-01 04:49:13.856 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:49:14.431 ERROR [src.node.docker_mananger] Max retries reached for container 859e0a9fb3a5. Exiting log stream.
2026-02-01 04:49:14.856 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44661/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:14.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:49:14.860 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:49:14.860 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44661/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:14.862 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.234/tcp/44662/p2p/16Uiu2HAmEiYDk8C95YtYYvszA3HfZDKCy68dZ5qXp1Sw8BqHKdhE","/ip4/172.18.60.234/tcp/44663/ws/p2p/16Uiu2HAmEiYDk8C95YtYYvszA3HfZDKCy68dZ5qXp1Sw8BqHKdhE"],"enrUri":"enr:-L24QAZohaA_xZZ1BIpCJwrAU7fZX0eLGE3ISvHF7iOghARCc1iricjQijwpFyKjcS1NnkJDiE8ZmX-FtyQHFba9O9cCgmlkgnY0gmlwhKwSPOqKbXVsdGlhZGRyc5YACASsEjzqBq52AAoErBI86gaud90DgnJzhQADAQAAiXNlY3AyNTZrMaEDHqAm1Yic_j9hggNhQHWL2YNsGwOpexJc_zWpCw1Jl_2DdGNwgq52g3VkcIKueIV3YWt1MgM"}'
2026-02-01 04:49:14.862 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:49:14.869 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:49:14.869 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-01_04-49-13__ed0f998c-fc9b-4e09-8100-b19b2cf75622__wakuorg_nwaku:latest.log
2026-02-01 04:49:14.870 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:49:14.870 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:49:14.871 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:49:14.872 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.29.197
2026-02-01 04:49:14.872 DEBUG [src.node.docker_mananger] Generated ports ['26048', '26049', '26050', '26051', '26052']
2026-02-01 04:49:14.872 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:49:14.872 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:49:14.872 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:49:14.872 DEBUG [src.node.docker_mananger] docker run -i -t -p 26048:26048 -p 26049:26049 -p 26050:26050 -p 26051:26051 -p 26052:26052 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26050 --rest-port=26048 --tcp-port=26049 --discv5-udp-port=26051 --rest-address=0.0.0.0 --nat=extip:172.18.29.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bd0fd3f0b39983baddd5ba75e51865c3ff58f2fb303d414bf869b2501f114fce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26052 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAZohaA_xZZ1BIpCJwrAU7fZX0eLGE3ISvHF7iOghARCc1iricjQijwpFyKjcS1NnkJDiE8ZmX-FtyQHFba9O9cCgmlkgnY0gmlwhKwSPOqKbXVsdGlhZGRyc5YACASsEjzqBq52AAoErBI86gaud90DgnJzhQADAQAAiXNlY3AyNTZrMaEDHqAm1Yic_j9hggNhQHWL2YNsGwOpexJc_zWpCw1Jl_2DdGNwgq52g3VkcIKueIV3YWt1MgM --storenode=/ip4/172.18.60.234/tcp/44662/p2p/16Uiu2HAmEiYDk8C95YtYYvszA3HfZDKCy68dZ5qXp1Sw8BqHKdhE --store=true --relay=true
2026-02-01 04:49:15.060 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.29.197 waku ce58849e13b1391fbceae2cac7f04d69286427919e3d593865a19e3864b1db1b
2026-02-01 04:49:15.089 DEBUG [src.node.docker_mananger] Container started with ID ce58849e13b1. Setting up logs at ./log/docker/store_node1_2026-02-01_04-49-13__ed0f998c-fc9b-4e09-8100-b19b2cf75622__wakuorg_nwaku:latest.log
2026-02-01 04:49:15.089 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26048
2026-02-01 04:49:15.090 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:49:16.091 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26048/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:16.095 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:49:16.095 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:49:16.095 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26048/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:16.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.197/tcp/26049/p2p/16Uiu2HAmLH8suDdQcymaoppFcaMVyvr8jg1zL6j3rmFcktiZzNpV","/ip4/172.18.29.197/tcp/26050/ws/p2p/16Uiu2HAmLH8suDdQcymaoppFcaMVyvr8jg1zL6j3rmFcktiZzNpV"],"enrUri":"enr:-L24QEVIGBTvj1AVoWVfxWmvZxHQNtSJFAhXz1i-7C5XDHfwPYr3iomwnBaTTPASnKc9-d3D5GpCWUskWyaPs-wcswECgmlkgnY0gmlwhKwSHcWKbXVsdGlhZGRyc5YACASsEh3FBmXBAAoErBIdxQZlwt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcURcKSXkCrLkdLITJR0cs4wWNWZuqSF0RV9_cxjV836DdGNwgmXBg3VkcIJlw4V3YWt1MgM"}'
2026-02-01 04:49:16.098 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:49:16.098 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26048/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.234/tcp/44662/p2p/16Uiu2HAmEiYDk8C95YtYYvszA3HfZDKCy68dZ5qXp1Sw8BqHKdhE"]'
2026-02-01 04:49:16.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:16.101 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44661/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:49:16.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:16.104 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26048/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:49:16.106 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:16.106 DEBUG [src.steps.store] Relaying message
2026-02-01 04:49:16.106 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44661/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:49:16.111 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:16.111 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:49:16.312 DEBUG [src.steps.store] Relaying message
2026-02-01 04:49:16.313 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44661/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:49:16.318 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:16.319 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:49:16.519 DEBUG [src.steps.store] Relaying message
2026-02-01 04:49:16.520 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44661/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:49:16.526 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:16.526 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:49:16.728 DEBUG [src.steps.store] Relaying message
2026-02-01 04:49:16.728 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44661/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:49:16.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:16.734 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:49:16.935 DEBUG [src.steps.store] Relaying message
2026-02-01 04:49:16.935 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44661/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:49:16.941 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:16.941 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:49:17.142 DEBUG [src.steps.store] Relaying message
2026-02-01 04:49:17.143 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44661/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:49:17.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:17.148 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:49:17.349 DEBUG [src.steps.store] Relaying message
2026-02-01 04:49:17.350 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44661/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:49:17.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:17.356 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:49:17.556 DEBUG [src.steps.store] Relaying message
2026-02-01 04:49:17.557 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44661/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:49:17.562 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:17.562 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:49:17.763 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44661/store/v3/messages?pubsubTopic=test&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:17.767 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-02-01 04:49:17.767 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26048/store/v3/messages?pubsubTopic=test&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:17.769 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2026-02-01 04:49:17.772 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:49:17.773 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:49:17.773 DEBUG [src.node.waku_node] Stopping container with id 391f15ccf50d
2026-02-01 04:49:18.317 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:49:18.317 DEBUG [src.node.waku_node] Stopping container with id ce58849e13b1
2026-02-01 04:49:18.862 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:49:18.863 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:49:18.870 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:49:18.877 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
