2026-02-01 04:49:05.927 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:49:05.927 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_invalid_request_id with id: 2026-02-01_04-49-05__024dc08b-1892-4be7-88fe-c46bf46c1e3d
2026-02-01 04:49:05.927 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:49:05.927 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-01 04:49:05.928 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-01 04:49:05.935 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:49:05.935 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-01_04-49-05__024dc08b-1892-4be7-88fe-c46bf46c1e3d__wakuorg_nwaku:latest.log
2026-02-01 04:49:05.935 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:49:05.936 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:49:05.937 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:49:05.937 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.217.74
2026-02-01 04:49:05.938 DEBUG [src.node.docker_mananger] Generated ports ['46175', '46176', '46177', '46178', '46179']
2026-02-01 04:49:05.938 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:49:05.938 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:49:05.938 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:49:05.938 DEBUG [src.node.docker_mananger] docker run -i -t -p 46175:46175 -p 46176:46176 -p 46177:46177 -p 46178:46178 -p 46179:46179 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46177 --rest-port=46175 --tcp-port=46176 --discv5-udp-port=46178 --rest-address=0.0.0.0 --nat=extip:172.18.217.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcfa9b1d23bf5cfd1ace83b09cbc8ea404a99d903dd8de0f6cd53e2bdcef6ebf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46179 --metrics-logging=true --relay=true --filter=true
2026-02-01 04:49:06.116 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.217.74 waku fd52fb2c3f85199ce9ce722d084c66d6334c0dae17407d6baf4d5bb1d144c127
2026-02-01 04:49:06.147 DEBUG [src.node.docker_mananger] Container started with ID fd52fb2c3f85. Setting up logs at ./log/docker/node1_2026-02-01_04-49-05__024dc08b-1892-4be7-88fe-c46bf46c1e3d__wakuorg_nwaku:latest.log
2026-02-01 04:49:06.147 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46175
2026-02-01 04:49:06.148 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:49:06.181 ERROR [src.node.docker_mananger] Max retries reached for container c56a98abb29b. Exiting log stream.
2026-02-01 04:49:06.727 ERROR [src.node.docker_mananger] Max retries reached for container 0dddfb42d7d1. Exiting log stream.
2026-02-01 04:49:07.148 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46175/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:07.152 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:49:07.152 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:49:07.153 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46175/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:07.155 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.74/tcp/46176/p2p/16Uiu2HAmNvoTe9TVpP3MgeiLaDYEwnvrVmuSmqE6JGsAUi5Xbtuj","/ip4/172.18.217.74/tcp/46177/ws/p2p/16Uiu2HAmNvoTe9TVpP3MgeiLaDYEwnvrVmuSmqE6JGsAUi5Xbtuj"],"enrUri":"enr:-L24QI_19eG0GwajKJFWJBRzu0C9MQbv3kS8lVH0klNNq6ZtemQ2YXvUqZQD5ixY00RKydpUfzs419WFylg_BGU-prMCgmlkgnY0gmlwhKwS2UqKbXVsdGlhZGRyc5YACASsEtlKBrRgAAoErBLZSga0Yd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmKHZKXGNz79VfulMxEvniA15wr_Bp-MWFjcmlJyKTo6DdGNwgrRgg3VkcIK0YoV3YWt1MgU"}'
2026-02-01 04:49:07.155 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:49:07.156 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-01 04:49:07.163 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:49:07.163 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-01_04-49-05__024dc08b-1892-4be7-88fe-c46bf46c1e3d__wakuorg_nwaku:latest.log
2026-02-01 04:49:07.163 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:49:07.163 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:49:07.165 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:49:07.165 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.216
2026-02-01 04:49:07.165 DEBUG [src.node.docker_mananger] Generated ports ['6402', '6403', '6404', '6405', '6406']
2026-02-01 04:49:07.165 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:49:07.166 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:49:07.166 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:49:07.166 DEBUG [src.node.docker_mananger] docker run -i -t -p 6402:6402 -p 6403:6403 -p 6404:6404 -p 6405:6405 -p 6406:6406 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6404 --rest-port=6402 --tcp-port=6403 --discv5-udp-port=6405 --rest-address=0.0.0.0 --nat=extip:172.18.39.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b70547c9f4c0c4e955f9a3d9a08fbbb69bb8be1eaa64d2e8ea4ac3593cd6d86c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6406 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QI_19eG0GwajKJFWJBRzu0C9MQbv3kS8lVH0klNNq6ZtemQ2YXvUqZQD5ixY00RKydpUfzs419WFylg_BGU-prMCgmlkgnY0gmlwhKwS2UqKbXVsdGlhZGRyc5YACASsEtlKBrRgAAoErBLZSga0Yd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmKHZKXGNz79VfulMxEvniA15wr_Bp-MWFjcmlJyKTo6DdGNwgrRgg3VkcIK0YoV3YWt1MgU --filternode=/ip4/172.18.217.74/tcp/46176/p2p/16Uiu2HAmNvoTe9TVpP3MgeiLaDYEwnvrVmuSmqE6JGsAUi5Xbtuj
2026-02-01 04:49:07.360 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.216 waku 72011b886b2b2d967a2bacd20e9ba38fc7201665487074728caf6cd82aa35d7b
2026-02-01 04:49:07.391 DEBUG [src.node.docker_mananger] Container started with ID 72011b886b2b. Setting up logs at ./log/docker/node2_2026-02-01_04-49-05__024dc08b-1892-4be7-88fe-c46bf46c1e3d__wakuorg_nwaku:latest.log
2026-02-01 04:49:07.391 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6402
2026-02-01 04:49:07.391 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:49:08.392 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6402/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:08.397 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-01 04:49:08.397 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:49:08.397 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6402/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:08.400 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.216/tcp/6403/p2p/16Uiu2HAkxjoQGiD8qSdZdN4yhJKgXeGP41eTBynFVoQGDv5Y8gZw","/ip4/172.18.39.216/tcp/6404/ws/p2p/16Uiu2HAkxjoQGiD8qSdZdN4yhJKgXeGP41eTBynFVoQGDv5Y8gZw"],"enrUri":"enr:-L24QFaO-D9FaYALIJzMzQ6w7Wl5eOVnKhOFBzOtBdBNMRibHsFn8eRgm_35CSAbU7wpzhfX5PLV_qPnHDkzXvLX6dkCgmlkgnY0gmlwhKwSJ9iKbXVsdGlhZGRyc5YACASsEifYBhkDAAoErBIn2AYZBN0DgnJzhQADAQAAiXNlY3AyNTZrMaECMTfoT7-rN6YnI31FDyX0moGZhRUSXf-5YN9E4scr0LqDdGNwghkDg3VkcIIZBYV3YWt1MgA"}'
2026-02-01 04:49:08.400 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:49:08.400 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6402/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.217.74/tcp/46176/p2p/16Uiu2HAmNvoTe9TVpP3MgeiLaDYEwnvrVmuSmqE6JGsAUi5Xbtuj"]'
2026-02-01 04:49:08.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:08.433 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-01 04:49:08.434 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46175/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-01 04:49:08.446 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:08.447 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6402/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "4c010035-6e86-49ef-9282-a914ffc5b15a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-01 04:49:08.459 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"4c010035-6e86-49ef-9282-a914ffc5b15a","statusDesc":"OK"}'
2026-02-01 04:49:08.460 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6402/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-01 04:49:08.463 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6402/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-01 04:49:08.466 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:49:08.467 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:49:08.467 DEBUG [src.node.waku_node] Stopping container with id fd52fb2c3f85
2026-02-01 04:49:09.014 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:49:09.014 DEBUG [src.node.waku_node] Stopping container with id 72011b886b2b
2026-02-01 04:49:09.538 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:49:09.539 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:49:09.549 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:49:09.555 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
