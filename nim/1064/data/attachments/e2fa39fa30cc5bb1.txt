2026-02-01 04:47:15.620 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:47:15.620 DEBUG [tests.conftest] Running test: test_cursor_pointing_to_deleted_message with id: 2026-02-01_04-47-15__bbc43358-63a7-43fa-aaba-a7905dc1b12f
2026-02-01 04:47:15.621 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:47:15.621 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-01 04:47:15.621 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-01 04:47:15.627 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:47:15.627 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-01_04-47-15__bbc43358-63a7-43fa-aaba-a7905dc1b12f__wakuorg_nwaku:latest.log
2026-02-01 04:47:15.628 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:47:15.628 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:47:15.629 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:47:15.629 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.170.171
2026-02-01 04:47:15.629 DEBUG [src.node.docker_mananger] Generated ports ['58998', '58999', '59000', '59001', '59002']
2026-02-01 04:47:15.629 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:47:15.630 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:47:15.630 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:47:15.630 DEBUG [src.node.docker_mananger] docker run -i -t -p 58998:58998 -p 58999:58999 -p 59000:59000 -p 59001:59001 -p 59002:59002 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59000 --rest-port=58998 --tcp-port=58999 --discv5-udp-port=59001 --rest-address=0.0.0.0 --nat=extip:172.18.170.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3f51e6eeaf2bc3fe8a5d68ca73ef4cdd2dde8ad7f07dc3aeebefcdab1c6cf23f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59002 --metrics-logging=true --store=true --relay=true
2026-02-01 04:47:15.809 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.170.171 waku 6d9c59185ec88dfe68ed3f6947845bae9e64ac4b8c3e97aaeb04c60eceb4d2c1
2026-02-01 04:47:15.839 DEBUG [src.node.docker_mananger] Container started with ID 6d9c59185ec8. Setting up logs at ./log/docker/publishing_node1_2026-02-01_04-47-15__bbc43358-63a7-43fa-aaba-a7905dc1b12f__wakuorg_nwaku:latest.log
2026-02-01 04:47:15.840 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58998
2026-02-01 04:47:15.840 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:47:15.885 ERROR [src.node.docker_mananger] Max retries reached for container 9757f30a1432. Exiting log stream.
2026-02-01 04:47:16.422 ERROR [src.node.docker_mananger] Max retries reached for container 996a66884c75. Exiting log stream.
2026-02-01 04:47:16.841 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58998/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:47:16.844 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:47:16.844 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:47:16.844 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58998/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:47:16.846 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.171/tcp/58999/p2p/16Uiu2HAmAG7dDdirDQccK1TSgbUA3QvF6hF4wrrkHjc4zp64DVe5","/ip4/172.18.170.171/tcp/59000/ws/p2p/16Uiu2HAmAG7dDdirDQccK1TSgbUA3QvF6hF4wrrkHjc4zp64DVe5"],"enrUri":"enr:-L24QE2ARDY37gf_zw_EAb4dttsIECS16_Kh7s5adSHu_ORZeKe6E9ssFtslmqHv_9dzv6cJu-ZHtxdLpWr3l5IKuiYCgmlkgnY0gmlwhKwSqquKbXVsdGlhZGRyc5YACASsEqqrBuZ3AAoErBKqqwbmeN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3Gx-NMt4DFQHHTN9Z13LJhRiRVRTw8l9ZoJjylJFysaDdGNwguZ3g3VkcILmeYV3YWt1MgM"}'
2026-02-01 04:47:16.847 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:47:16.853 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:47:16.853 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-01_04-47-15__bbc43358-63a7-43fa-aaba-a7905dc1b12f__wakuorg_nwaku:latest.log
2026-02-01 04:47:16.854 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:47:16.854 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:47:16.855 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:47:16.855 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.250.19
2026-02-01 04:47:16.855 DEBUG [src.node.docker_mananger] Generated ports ['25986', '25987', '25988', '25989', '25990']
2026-02-01 04:47:16.855 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:47:16.855 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:47:16.856 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:47:16.856 DEBUG [src.node.docker_mananger] docker run -i -t -p 25986:25986 -p 25987:25987 -p 25988:25988 -p 25989:25989 -p 25990:25990 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25988 --rest-port=25986 --tcp-port=25987 --discv5-udp-port=25989 --rest-address=0.0.0.0 --nat=extip:172.18.250.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3a4df79bc7a0fb98f57d24ff0e09b2669dcbedd8c1f0dbb9873eafd6ac5cad2d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25990 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QE2ARDY37gf_zw_EAb4dttsIECS16_Kh7s5adSHu_ORZeKe6E9ssFtslmqHv_9dzv6cJu-ZHtxdLpWr3l5IKuiYCgmlkgnY0gmlwhKwSqquKbXVsdGlhZGRyc5YACASsEqqrBuZ3AAoErBKqqwbmeN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3Gx-NMt4DFQHHTN9Z13LJhRiRVRTw8l9ZoJjylJFysaDdGNwguZ3g3VkcILmeYV3YWt1MgM --storenode=/ip4/172.18.170.171/tcp/58999/p2p/16Uiu2HAmAG7dDdirDQccK1TSgbUA3QvF6hF4wrrkHjc4zp64DVe5 --store=true --relay=true
2026-02-01 04:47:17.035 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.250.19 waku bf1b56e418ba692aa63a5c81c8b3fac8b1030d6095481d67f562275ad79ba0db
2026-02-01 04:47:17.068 DEBUG [src.node.docker_mananger] Container started with ID bf1b56e418ba. Setting up logs at ./log/docker/store_node1_2026-02-01_04-47-15__bbc43358-63a7-43fa-aaba-a7905dc1b12f__wakuorg_nwaku:latest.log
2026-02-01 04:47:17.069 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25986
2026-02-01 04:47:17.069 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:47:18.070 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25986/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:47:18.074 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:47:18.075 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:47:18.075 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25986/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:47:18.077 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.19/tcp/25987/p2p/16Uiu2HAkwC7BXAa6xNryfqfeVmLJ7u22QqTke8CbjGse3jYWjZKx","/ip4/172.18.250.19/tcp/25988/ws/p2p/16Uiu2HAkwC7BXAa6xNryfqfeVmLJ7u22QqTke8CbjGse3jYWjZKx"],"enrUri":"enr:-L24QFzFZ1NOjkN3tnAdkSmt1ArGnpB9Xp_viDnuJDwtofJxTbaO2OAGdw4Z6aI5BrsbbCjIARy-ZlSguB4gbtRjFBsCgmlkgnY0gmlwhKwS-hOKbXVsdGlhZGRyc5YACASsEvoTBmWDAAoErBL6EwZlhN0DgnJzhQADAQAAiXNlY3AyNTZrMaECGj29Hg5LtDu4h3iLy5xaVXlz7hk-sDquruFQUpnK7QuDdGNwgmWDg3VkcIJlhYV3YWt1MgM"}'
2026-02-01 04:47:18.077 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:47:18.078 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25986/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.170.171/tcp/58999/p2p/16Uiu2HAmAG7dDdirDQccK1TSgbUA3QvF6hF4wrrkHjc4zp64DVe5"]'
2026-02-01 04:47:18.080 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:18.080 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:47:18.083 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:18.083 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25986/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:47:18.085 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:18.086 DEBUG [src.steps.store] Relaying message
2026-02-01 04:47:18.086 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:18.091 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:18.091 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:47:18.292 DEBUG [src.steps.store] Relaying message
2026-02-01 04:47:18.292 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:18.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:18.297 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:47:18.498 DEBUG [src.steps.store] Relaying message
2026-02-01 04:47:18.498 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:18.503 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:18.504 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:47:18.705 DEBUG [src.steps.store] Relaying message
2026-02-01 04:47:18.705 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:18.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:18.711 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:47:18.911 DEBUG [src.steps.store] Relaying message
2026-02-01 04:47:18.912 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:18.917 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:18.917 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:47:19.118 DEBUG [src.steps.store] Relaying message
2026-02-01 04:47:19.118 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:19.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:19.124 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:47:19.324 DEBUG [src.steps.store] Relaying message
2026-02-01 04:47:19.325 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:19.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:19.330 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:47:19.531 DEBUG [src.steps.store] Relaying message
2026-02-01 04:47:19.531 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:19.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:19.539 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:47:19.739 DEBUG [src.steps.store] Relaying message
2026-02-01 04:47:19.740 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:19.745 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:19.745 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:47:19.946 DEBUG [src.steps.store] Relaying message
2026-02-01 04:47:19.946 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:19.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:19.952 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:47:20.153 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58998/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0xeaef67b1d16d0e7dcd95cc87e4c8f358826f7abf12efb5f3491234ce3f472670&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:47:20.156 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:58998/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0xeaef67b1d16d0e7dcd95cc87e4c8f358826f7abf12efb5f3491234ce3f472670&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-01 04:47:20.156 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25986/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0xeaef67b1d16d0e7dcd95cc87e4c8f358826f7abf12efb5f3491234ce3f472670&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:47:20.159 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:25986/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0xeaef67b1d16d0e7dcd95cc87e4c8f358826f7abf12efb5f3491234ce3f472670&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-01 04:47:20.161 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:47:20.162 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:47:20.162 DEBUG [src.node.waku_node] Stopping container with id 6d9c59185ec8
2026-02-01 04:47:20.667 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:47:20.667 DEBUG [src.node.waku_node] Stopping container with id bf1b56e418ba
2026-02-01 04:47:21.181 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:47:21.184 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:47:21.191 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:47:21.199 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
