2026-02-01 04:47:14.990 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:47:14.990 DEBUG [tests.conftest] Running test: test_publish_without_subscribing_via_api_works with id: 2026-02-01_04-47-14__8dfe11a1-0976-49c9-9fc6-f423ba04bd08
2026-02-01 04:47:14.991 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:47:14.991 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-01 04:47:14.991 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-01 04:47:14.999 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:47:14.999 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-01_04-47-14__8dfe11a1-0976-49c9-9fc6-f423ba04bd08__wakuorg_nwaku:latest.log
2026-02-01 04:47:14.999 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:47:14.999 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:47:15.002 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:47:15.002 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.146.135
2026-02-01 04:47:15.003 DEBUG [src.node.docker_mananger] Generated ports ['30593', '30594', '30595', '30596', '30597']
2026-02-01 04:47:15.003 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:47:15.003 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:47:15.003 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:47:15.003 DEBUG [src.node.docker_mananger] docker run -i -t -p 30593:30593 -p 30594:30594 -p 30595:30595 -p 30596:30596 -p 30597:30597 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30595 --rest-port=30593 --tcp-port=30594 --discv5-udp-port=30596 --rest-address=0.0.0.0 --nat=extip:172.18.146.135 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=385acbcd22ab83cf804c6afc5ff96c5559fafd19d25e8a0fd3cd20ff16ddec2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30597 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-02-01 04:47:15.161 ERROR [src.node.docker_mananger] Max retries reached for container be9f1c42be76. Exiting log stream.
2026-02-01 04:47:15.185 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.146.135 waku 24fab4d1ce5421448416e9094bce4217b54613c7ae7bc77d0a94016d56b37d26
2026-02-01 04:47:15.216 DEBUG [src.node.docker_mananger] Container started with ID 24fab4d1ce54. Setting up logs at ./log/docker/node1_2026-02-01_04-47-14__8dfe11a1-0976-49c9-9fc6-f423ba04bd08__wakuorg_nwaku:latest.log
2026-02-01 04:47:15.217 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30593
2026-02-01 04:47:15.217 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:47:15.611 ERROR [src.node.docker_mananger] Max retries reached for container 7d664b6b21eb. Exiting log stream.
2026-02-01 04:47:16.218 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30593/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:47:16.221 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:47:16.221 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:47:16.221 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30593/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:47:16.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.135/tcp/30594/p2p/16Uiu2HAmMovnBePbe7e51KHK87Bfmgos8d5CZXr1SZxPzMwXR3fy","/ip4/172.18.146.135/tcp/30595/ws/p2p/16Uiu2HAmMovnBePbe7e51KHK87Bfmgos8d5CZXr1SZxPzMwXR3fy"],"enrUri":"enr:-L24QEOQcJsyD_k8qYfNy3r5gr3dqmpGRHxWMxOtUR-dOzdeKKw1Eqq57TZncHqOB1qbOCfKns5DmuC3Kpo6QF6PkjcCgmlkgnY0gmlwhKwSkoeKbXVsdGlhZGRyc5YACASsEpKHBneCAAoErBKShwZ3g90DgnJzhQACAQAAiXNlY3AyNTZrMaEDiANfQza9vwPuyPkjRXXNdvb8bkJBsH2vHqcdElsztfyDdGNwgneCg3VkcIJ3hIV3YWt1MgU"}'
2026-02-01 04:47:16.224 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:47:16.230 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:47:16.230 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-01_04-47-14__8dfe11a1-0976-49c9-9fc6-f423ba04bd08__wakuorg_nwaku:latest.log
2026-02-01 04:47:16.231 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:47:16.231 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:47:16.232 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:47:16.232 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.16.249
2026-02-01 04:47:16.232 DEBUG [src.node.docker_mananger] Generated ports ['51305', '51306', '51307', '51308', '51309']
2026-02-01 04:47:16.232 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:47:16.233 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:47:16.233 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:47:16.233 DEBUG [src.node.docker_mananger] docker run -i -t -p 51305:51305 -p 51306:51306 -p 51307:51307 -p 51308:51308 -p 51309:51309 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51307 --rest-port=51305 --tcp-port=51306 --discv5-udp-port=51308 --rest-address=0.0.0.0 --nat=extip:172.18.16.249 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a35e36a3fcb74a1c61a857484a065ccc5ec3ffec7be0c122e96adb3fc2108fcd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51309 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QEOQcJsyD_k8qYfNy3r5gr3dqmpGRHxWMxOtUR-dOzdeKKw1Eqq57TZncHqOB1qbOCfKns5DmuC3Kpo6QF6PkjcCgmlkgnY0gmlwhKwSkoeKbXVsdGlhZGRyc5YACASsEpKHBneCAAoErBKShwZ3g90DgnJzhQACAQAAiXNlY3AyNTZrMaEDiANfQza9vwPuyPkjRXXNdvb8bkJBsH2vHqcdElsztfyDdGNwgneCg3VkcIJ3hIV3YWt1MgU --content-topic=/myapp/1/latest/proto --num-shards-in-network=8
2026-02-01 04:47:16.417 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.16.249 waku 64cc0e61868434cad5dea6a429f88fd264a34bc8d99117736ad71c6e7d894675
2026-02-01 04:47:16.451 DEBUG [src.node.docker_mananger] Container started with ID 64cc0e618684. Setting up logs at ./log/docker/node2_2026-02-01_04-47-14__8dfe11a1-0976-49c9-9fc6-f423ba04bd08__wakuorg_nwaku:latest.log
2026-02-01 04:47:16.452 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51305
2026-02-01 04:47:16.452 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:47:17.453 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51305/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:47:17.464 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-01 04:47:17.465 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:47:17.466 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51305/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:47:17.469 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.249/tcp/51306/p2p/16Uiu2HAm1XV4svyoD2U5a1G9uF3ip3yaJJy7ShsjntgBgDqLBHxJ","/ip4/172.18.16.249/tcp/51307/ws/p2p/16Uiu2HAm1XV4svyoD2U5a1G9uF3ip3yaJJy7ShsjntgBgDqLBHxJ"],"enrUri":"enr:-L24QFZaALk5RJdcszfvJSVT3jcfbM920zw-S_ThwKWJBhyZfgF3oO50_LXwsTe3HNvUL-BT9DOGuYk5F3zzbvOTnF4CgmlkgnY0gmlwhKwSEPmKbXVsdGlhZGRyc5YACASsEhD5BshqAAoErBIQ-QbIa90DgnJzhQACAQAAiXNlY3AyNTZrMaECWqNEj1xHVM-xNLbsdyiFCAtlf-ZVN6lQx737rxaSQweDdGNwgshqg3VkcILIbIV3YWt1MgE"}'
2026-02-01 04:47:17.470 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:47:17.470 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51305/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.146.135/tcp/30594/p2p/16Uiu2HAmMovnBePbe7e51KHK87Bfmgos8d5CZXr1SZxPzMwXR3fy"]'
2026-02-01 04:47:17.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:17.475 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30593/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:17.479 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:17.480 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51305/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:47:17.485 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:47:17.488 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:47:17.489 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:47:17.489 DEBUG [src.node.waku_node] Stopping container with id 24fab4d1ce54
2026-02-01 04:47:18.044 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:47:18.045 DEBUG [src.node.waku_node] Stopping container with id 64cc0e618684
2026-02-01 04:47:18.593 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:47:18.594 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:47:18.599 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:47:18.605 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
