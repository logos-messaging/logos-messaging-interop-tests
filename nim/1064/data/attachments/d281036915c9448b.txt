2026-02-01 04:43:15.843 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:43:15.844 DEBUG [tests.conftest] Running test: test_filter_get_message_with_version with id: 2026-02-01_04-43-15__24ef69b7-72ca-4c59-a997-73bc8e2a8ac5
2026-02-01 04:43:15.844 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:43:15.844 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-01 04:43:15.844 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-01 04:43:15.850 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:43:15.850 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-01_04-43-15__24ef69b7-72ca-4c59-a997-73bc8e2a8ac5__wakuorg_nwaku:latest.log
2026-02-01 04:43:15.850 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:43:15.851 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:43:15.852 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:43:15.852 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.137
2026-02-01 04:43:15.852 DEBUG [src.node.docker_mananger] Generated ports ['48467', '48468', '48469', '48470', '48471']
2026-02-01 04:43:15.852 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:43:15.852 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:43:15.852 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:43:15.853 DEBUG [src.node.docker_mananger] docker run -i -t -p 48467:48467 -p 48468:48468 -p 48469:48469 -p 48470:48470 -p 48471:48471 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48469 --rest-port=48467 --tcp-port=48468 --discv5-udp-port=48470 --rest-address=0.0.0.0 --nat=extip:172.18.121.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9df8aeba7117c0cfa932097e3ef1f6c1a5b578a3b9dce7f1bbaf1cd13ea1bcbd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48471 --metrics-logging=true --relay=true --filter=true
2026-02-01 04:43:16.025 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.137 waku 11c2a2e659ef7ca8886dca5ea4aa3b4e01ad099d4fc8610a17e6f2b7b318927b
2026-02-01 04:43:16.055 DEBUG [src.node.docker_mananger] Container started with ID 11c2a2e659ef. Setting up logs at ./log/docker/node1_2026-02-01_04-43-15__24ef69b7-72ca-4c59-a997-73bc8e2a8ac5__wakuorg_nwaku:latest.log
2026-02-01 04:43:16.055 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48467
2026-02-01 04:43:16.056 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:43:16.160 ERROR [src.node.docker_mananger] Max retries reached for container 98b39081a6b0. Exiting log stream.
2026-02-01 04:43:16.615 ERROR [src.node.docker_mananger] Max retries reached for container 3545eb1bdc93. Exiting log stream.
2026-02-01 04:43:17.058 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48467/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:43:17.061 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:43:17.061 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:43:17.061 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48467/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:43:17.064 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.137/tcp/48468/p2p/16Uiu2HAmENeMe29kberZbLfF6JQvXnEBvdRzLpfWac66qksyCguS","/ip4/172.18.121.137/tcp/48469/ws/p2p/16Uiu2HAmENeMe29kberZbLfF6JQvXnEBvdRzLpfWac66qksyCguS"],"enrUri":"enr:-L24QDhPSVZ5aUZvr-mcRlJDGIjHSCdNDfaL1FJKCOnHWjJ8MU2O54Jnfnh2RsU-SJnLtSJpJuqWwUd0-oCwLXxPTVMCgmlkgnY0gmlwhKwSeYmKbXVsdGlhZGRyc5YACASsEnmJBr1UAAoErBJ5iQa9Vd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGYd5QK_AtmUN2HjCaZ29yJILQDVEz6pIYJe0EMOpcJWDdGNwgr1Ug3VkcIK9VoV3YWt1MgU"}'
2026-02-01 04:43:17.064 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:43:17.064 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-01 04:43:17.070 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:43:17.070 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-01_04-43-15__24ef69b7-72ca-4c59-a997-73bc8e2a8ac5__wakuorg_nwaku:latest.log
2026-02-01 04:43:17.070 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:43:17.070 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:43:17.072 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:43:17.072 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.242.192
2026-02-01 04:43:17.072 DEBUG [src.node.docker_mananger] Generated ports ['33502', '33503', '33504', '33505', '33506']
2026-02-01 04:43:17.072 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:43:17.072 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:43:17.072 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:43:17.072 DEBUG [src.node.docker_mananger] docker run -i -t -p 33502:33502 -p 33503:33503 -p 33504:33504 -p 33505:33505 -p 33506:33506 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33504 --rest-port=33502 --tcp-port=33503 --discv5-udp-port=33505 --rest-address=0.0.0.0 --nat=extip:172.18.242.192 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e93aecf1ed1cc46c56fad4aa85bbdb2d50ee67663db8f59cbb113b0da5197f58 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33506 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QDhPSVZ5aUZvr-mcRlJDGIjHSCdNDfaL1FJKCOnHWjJ8MU2O54Jnfnh2RsU-SJnLtSJpJuqWwUd0-oCwLXxPTVMCgmlkgnY0gmlwhKwSeYmKbXVsdGlhZGRyc5YACASsEnmJBr1UAAoErBJ5iQa9Vd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGYd5QK_AtmUN2HjCaZ29yJILQDVEz6pIYJe0EMOpcJWDdGNwgr1Ug3VkcIK9VoV3YWt1MgU --filternode=/ip4/172.18.121.137/tcp/48468/p2p/16Uiu2HAmENeMe29kberZbLfF6JQvXnEBvdRzLpfWac66qksyCguS
2026-02-01 04:43:17.247 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.242.192 waku 9ef64470c0893a7ddb987da9b3ba26440c62ebd95d89fca6a73b348d2734780e
2026-02-01 04:43:17.276 DEBUG [src.node.docker_mananger] Container started with ID 9ef64470c089. Setting up logs at ./log/docker/node2_2026-02-01_04-43-15__24ef69b7-72ca-4c59-a997-73bc8e2a8ac5__wakuorg_nwaku:latest.log
2026-02-01 04:43:17.277 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33502
2026-02-01 04:43:17.277 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:43:18.278 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33502/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:43:18.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-01 04:43:18.282 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:43:18.282 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33502/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:43:18.284 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.192/tcp/33503/p2p/16Uiu2HAmLkAoB8T4hfB6W4VzgaxWdECDhV4Jr31EPZ9iKAtFjN8G","/ip4/172.18.242.192/tcp/33504/ws/p2p/16Uiu2HAmLkAoB8T4hfB6W4VzgaxWdECDhV4Jr31EPZ9iKAtFjN8G"],"enrUri":"enr:-L24QBO7Bt-f1jU3kmMioerA7drY34vTX3Wyo4KD26zcr8xrRE5EHzB12Z-LKh-9rM1QR18AgnuXaXiupywzENhPiEQCgmlkgnY0gmlwhKwS8sCKbXVsdGlhZGRyc5YACASsEvLABoLfAAoErBLywAaC4N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeDE2DIU9EOJwWrhf5rzA2EXneag_K6JakVWwCSx99CmDdGNwgoLfg3VkcIKC4YV3YWt1MgA"}'
2026-02-01 04:43:18.285 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:43:18.285 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33502/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.121.137/tcp/48468/p2p/16Uiu2HAmENeMe29kberZbLfF6JQvXnEBvdRzLpfWac66qksyCguS"]'
2026-02-01 04:43:18.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:43:18.316 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-01 04:43:18.317 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48467/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-01 04:43:18.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:43:18.332 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33502/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "36b407d0-96c5-447a-9f08-5701111190b0", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-01 04:43:18.342 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"36b407d0-96c5-447a-9f08-5701111190b0","statusDesc":"OK"}'
2026-02-01 04:43:18.344 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48467/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "version": 10}'
2026-02-01 04:43:18.352 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:43:18.352 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-01 04:43:18.453 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-01 04:43:18.453 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33502/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:43:18.456 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":10,"timestamp":1769920998344528853,"ephemeral":false}]'
2026-02-01 04:43:18.459 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:43:18.460 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:43:18.460 DEBUG [src.node.waku_node] Stopping container with id 11c2a2e659ef
2026-02-01 04:43:18.973 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:43:18.973 DEBUG [src.node.waku_node] Stopping container with id 9ef64470c089
2026-02-01 04:43:19.491 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:43:19.493 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:43:19.499 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:43:19.503 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
