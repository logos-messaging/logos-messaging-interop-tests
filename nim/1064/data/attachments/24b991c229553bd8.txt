2026-02-01 04:48:57.504 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:48:57.504 DEBUG [tests.conftest] Running test: test_message_relayed_while_store_node_is_paused with id: 2026-02-01_04-48-57__9dcc64db-d00c-4e96-8b19-d797d82c2edc
2026-02-01 04:48:57.505 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:48:57.505 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-01 04:48:57.505 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-01 04:48:57.511 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:48:57.512 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-01_04-48-57__9dcc64db-d00c-4e96-8b19-d797d82c2edc__wakuorg_nwaku:latest.log
2026-02-01 04:48:57.512 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:48:57.512 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:48:57.513 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:48:57.513 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.213
2026-02-01 04:48:57.513 DEBUG [src.node.docker_mananger] Generated ports ['3789', '3790', '3791', '3792', '3793']
2026-02-01 04:48:57.514 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:48:57.514 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:48:57.514 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:48:57.514 DEBUG [src.node.docker_mananger] docker run -i -t -p 3789:3789 -p 3790:3790 -p 3791:3791 -p 3792:3792 -p 3793:3793 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3791 --rest-port=3789 --tcp-port=3790 --discv5-udp-port=3792 --rest-address=0.0.0.0 --nat=extip:172.18.84.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3c6b98c75def237c64ca4836d6aee8ee2b6fbb9f2b3cafde20e1c1f85a9ce0bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3793 --metrics-logging=true --store=true --relay=true
2026-02-01 04:48:57.694 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.213 waku 28e7bdc012676739faa933c2226557b7a7d5d3e67adb29efc483372ce8356a6e
2026-02-01 04:48:57.699 ERROR [src.node.docker_mananger] Max retries reached for container 9e1bfac26c42. Exiting log stream.
2026-02-01 04:48:57.726 DEBUG [src.node.docker_mananger] Container started with ID 28e7bdc01267. Setting up logs at ./log/docker/publishing_node1_2026-02-01_04-48-57__9dcc64db-d00c-4e96-8b19-d797d82c2edc__wakuorg_nwaku:latest.log
2026-02-01 04:48:57.728 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3789
2026-02-01 04:48:57.728 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:48:58.240 ERROR [src.node.docker_mananger] Max retries reached for container 56271f31b650. Exiting log stream.
2026-02-01 04:48:58.729 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3789/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:48:58.732 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:48:58.732 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:48:58.732 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3789/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:48:58.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.213/tcp/3790/p2p/16Uiu2HAmJoRGK3R4CiQMqfXKLMTjZypLXxJRVhhxVXSu6twxjVGd","/ip4/172.18.84.213/tcp/3791/ws/p2p/16Uiu2HAmJoRGK3R4CiQMqfXKLMTjZypLXxJRVhhxVXSu6twxjVGd"],"enrUri":"enr:-L24QEe3F-x6HjFE-jmhJa-6T2EMBwwrNp5kBI9ozLhZq1jcGqDXwZQe0NhFjzCRoxwx7dTDgQikN_Y0X_G9LGljLZQCgmlkgnY0gmlwhKwSVNWKbXVsdGlhZGRyc5YACASsElTVBg7OAAoErBJU1QYOz90DgnJzhQADAQAAiXNlY3AyNTZrMaEDW07wRnkN2ME8nYUxmJ47qj0dKT0MLMTaybY1wMSHlXqDdGNwgg7Og3VkcIIO0IV3YWt1MgM"}'
2026-02-01 04:48:58.735 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:48:58.742 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:48:58.742 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-01_04-48-57__9dcc64db-d00c-4e96-8b19-d797d82c2edc__wakuorg_nwaku:latest.log
2026-02-01 04:48:58.742 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:48:58.742 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:48:58.743 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:48:58.743 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.92.241
2026-02-01 04:48:58.744 DEBUG [src.node.docker_mananger] Generated ports ['53928', '53929', '53930', '53931', '53932']
2026-02-01 04:48:58.744 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:48:58.744 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:48:58.744 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:48:58.744 DEBUG [src.node.docker_mananger] docker run -i -t -p 53928:53928 -p 53929:53929 -p 53930:53930 -p 53931:53931 -p 53932:53932 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53930 --rest-port=53928 --tcp-port=53929 --discv5-udp-port=53931 --rest-address=0.0.0.0 --nat=extip:172.18.92.241 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c11da8b44e186c061f3da9b9aaf5928980b73b83a90a81d1a7b4fbd12c6ebae7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53932 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEe3F-x6HjFE-jmhJa-6T2EMBwwrNp5kBI9ozLhZq1jcGqDXwZQe0NhFjzCRoxwx7dTDgQikN_Y0X_G9LGljLZQCgmlkgnY0gmlwhKwSVNWKbXVsdGlhZGRyc5YACASsElTVBg7OAAoErBJU1QYOz90DgnJzhQADAQAAiXNlY3AyNTZrMaEDW07wRnkN2ME8nYUxmJ47qj0dKT0MLMTaybY1wMSHlXqDdGNwgg7Og3VkcIIO0IV3YWt1MgM --storenode=/ip4/172.18.84.213/tcp/3790/p2p/16Uiu2HAmJoRGK3R4CiQMqfXKLMTjZypLXxJRVhhxVXSu6twxjVGd --store=true --relay=true
2026-02-01 04:48:58.926 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.92.241 waku 44bfe686883b0be18cfd0c598b21c5ec579c9289d62fe9d992fb0e658a52d98a
2026-02-01 04:48:58.958 DEBUG [src.node.docker_mananger] Container started with ID 44bfe686883b. Setting up logs at ./log/docker/store_node1_2026-02-01_04-48-57__9dcc64db-d00c-4e96-8b19-d797d82c2edc__wakuorg_nwaku:latest.log
2026-02-01 04:48:58.958 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53928
2026-02-01 04:48:58.958 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:48:59.960 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53928/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:48:59.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:48:59.964 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:48:59.964 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53928/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:48:59.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.241/tcp/53929/p2p/16Uiu2HAkvoghCPP56aN9Xnj9tQa9mSaTLQGtJcdHhXZRcfnY4hMc","/ip4/172.18.92.241/tcp/53930/ws/p2p/16Uiu2HAkvoghCPP56aN9Xnj9tQa9mSaTLQGtJcdHhXZRcfnY4hMc"],"enrUri":"enr:-L24QG8nqrOBBkiaPRudZa2XMoua1iMo9bIgWsFc_QWzobWSGssHcMOW6M-NPT3S01X4atmviGL1-qcWc1ID6TAMEbsCgmlkgnY0gmlwhKwSXPGKbXVsdGlhZGRyc5YACASsElzxBtKpAAoErBJc8QbSqt0DgnJzhQADAQAAiXNlY3AyNTZrMaECFH9Fmj1yxsspIRx_je_bxRzQgllZiTY-1BIyOJdk79ODdGNwgtKpg3VkcILSq4V3YWt1MgM"}'
2026-02-01 04:48:59.967 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:48:59.967 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53928/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.213/tcp/3790/p2p/16Uiu2HAmJoRGK3R4CiQMqfXKLMTjZypLXxJRVhhxVXSu6twxjVGd"]'
2026-02-01 04:48:59.970 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:59.970 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3789/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:48:59.973 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:59.973 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53928/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-01 04:48:59.975 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:59.976 DEBUG [src.steps.store] Relaying message
2026-02-01 04:48:59.976 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3789/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:48:59.981 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:48:59.982 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:49:00.182 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-01 04:49:00.183 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3789/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:00.186 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x5b8e9f79ca793cbe2bd6b491216f9becad9ce826f933c7fc6ab50fec3dcdf4e7"}]}'
2026-02-01 04:49:00.186 DEBUG [src.steps.store] messages length is 1
2026-02-01 04:49:00.186 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-01 04:49:00.187 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53928/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:00.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x5b8e9f79ca793cbe2bd6b491216f9becad9ce826f933c7fc6ab50fec3dcdf4e7"}]}'
2026-02-01 04:49:00.189 DEBUG [src.steps.store] messages length is 1
2026-02-01 04:49:00.190 DEBUG [src.node.waku_node] Pausing container with id 44bfe686883b
2026-02-01 04:49:00.199 DEBUG [src.steps.store] Relaying message
2026-02-01 04:49:00.199 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3789/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:49:00.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:00.204 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-01 04:49:00.404 DEBUG [src.node.waku_node] Unpause container with id 44bfe686883b
2026-02-01 04:49:00.413 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53928/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:00.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:49:00.417 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:49:00.417 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53928/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:00.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.241/tcp/53929/p2p/16Uiu2HAkvoghCPP56aN9Xnj9tQa9mSaTLQGtJcdHhXZRcfnY4hMc","/ip4/172.18.92.241/tcp/53930/ws/p2p/16Uiu2HAkvoghCPP56aN9Xnj9tQa9mSaTLQGtJcdHhXZRcfnY4hMc"],"enrUri":"enr:-L24QG8nqrOBBkiaPRudZa2XMoua1iMo9bIgWsFc_QWzobWSGssHcMOW6M-NPT3S01X4atmviGL1-qcWc1ID6TAMEbsCgmlkgnY0gmlwhKwSXPGKbXVsdGlhZGRyc5YACASsElzxBtKpAAoErBJc8QbSqt0DgnJzhQADAQAAiXNlY3AyNTZrMaECFH9Fmj1yxsspIRx_je_bxRzQgllZiTY-1BIyOJdk79ODdGNwgtKpg3VkcILSq4V3YWt1MgM"}'
2026-02-01 04:49:00.419 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:49:00.420 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-01 04:49:00.420 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3789/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:00.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x5b8e9f79ca793cbe2bd6b491216f9becad9ce826f933c7fc6ab50fec3dcdf4e7"},{"messageHash":"0x9435133316170a9aed3c75af16dc4cea8b374511eb99e979584f84686586e541"}]}'
2026-02-01 04:49:00.423 DEBUG [src.steps.store] messages length is 2
2026-02-01 04:49:00.423 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-01 04:49:00.423 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53928/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:00.426 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x5b8e9f79ca793cbe2bd6b491216f9becad9ce826f933c7fc6ab50fec3dcdf4e7"},{"messageHash":"0x9435133316170a9aed3c75af16dc4cea8b374511eb99e979584f84686586e541"}]}'
2026-02-01 04:49:00.426 DEBUG [src.steps.store] messages length is 2
2026-02-01 04:49:00.426 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3789/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:00.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x5b8e9f79ca793cbe2bd6b491216f9becad9ce826f933c7fc6ab50fec3dcdf4e7"},{"messageHash":"0x9435133316170a9aed3c75af16dc4cea8b374511eb99e979584f84686586e541"}]}'
2026-02-01 04:49:00.429 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53928/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:00.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x5b8e9f79ca793cbe2bd6b491216f9becad9ce826f933c7fc6ab50fec3dcdf4e7"},{"messageHash":"0x9435133316170a9aed3c75af16dc4cea8b374511eb99e979584f84686586e541"}]}'
2026-02-01 04:49:00.433 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:49:00.435 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:49:00.435 DEBUG [src.node.waku_node] Stopping container with id 28e7bdc01267
2026-02-01 04:49:00.978 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:49:00.978 DEBUG [src.node.waku_node] Stopping container with id 44bfe686883b
2026-02-01 04:49:01.504 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:49:01.505 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:49:01.511 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:49:01.518 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
