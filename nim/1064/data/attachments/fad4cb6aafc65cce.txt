2026-02-01 04:49:45.091 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-01 04:49:45.092 DEBUG [tests.conftest] Running test: test_single_pubsub_topic[/waku/2/rs/999/999] with id: 2026-02-01_04-49-45__3d589a8f-c60a-4005-a209-7ad97b1ebad3
2026-02-01 04:49:45.092 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-01 04:49:45.092 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-01 04:49:45.092 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-01 04:49:45.100 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:49:45.101 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-01_04-49-45__3d589a8f-c60a-4005-a209-7ad97b1ebad3__wakuorg_nwaku:latest.log
2026-02-01 04:49:45.101 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:49:45.101 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:49:45.102 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:49:45.103 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.94.89
2026-02-01 04:49:45.103 DEBUG [src.node.docker_mananger] Generated ports ['25232', '25233', '25234', '25235', '25236']
2026-02-01 04:49:45.103 DEBUG [src.node.waku_node] Cluster id was resolved to: 999
2026-02-01 04:49:45.103 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-01 04:49:45.103 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:49:45.103 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:49:45.103 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:49:45.104 DEBUG [src.node.docker_mananger] docker run -i -t -p 25232:25232 -p 25233:25233 -p 25234:25234 -p 25235:25235 -p 25236:25236 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25234 --rest-port=25232 --tcp-port=25233 --discv5-udp-port=25235 --rest-address=0.0.0.0 --nat=extip:172.18.94.89 --peer-exchange=true --discv5-discovery=true --cluster-id=999 --nodekey=120802d8f525cfacd65aaa18e2d7a73d8fec5bdf2f7cae75e9b973da154ca72c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25236 --metrics-logging=true --relay=true --filter=true
2026-02-01 04:49:45.289 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.94.89 waku 7123a349de37e38e38b277148bf5afb92d15c84492074fda1f638df1e03aab2b
2026-02-01 04:49:45.324 DEBUG [src.node.docker_mananger] Container started with ID 7123a349de37. Setting up logs at ./log/docker/node1_2026-02-01_04-49-45__3d589a8f-c60a-4005-a209-7ad97b1ebad3__wakuorg_nwaku:latest.log
2026-02-01 04:49:45.324 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25232
2026-02-01 04:49:45.325 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:49:45.338 ERROR [src.node.docker_mananger] Max retries reached for container a2ae052bc2a3. Exiting log stream.
2026-02-01 04:49:45.895 ERROR [src.node.docker_mananger] Max retries reached for container 87b985c2fc01. Exiting log stream.
2026-02-01 04:49:46.326 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25232/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:46.329 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-01 04:49:46.329 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:49:46.329 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25232/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:46.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.89/tcp/25233/p2p/16Uiu2HAkvbQPgDrGSmP2PfdvVVVjrAkMWFRBKrBaFNsa7W64M2QS","/ip4/172.18.94.89/tcp/25234/ws/p2p/16Uiu2HAkvbQPgDrGSmP2PfdvVVVjrAkMWFRBKrBaFNsa7W64M2QS"],"enrUri":"enr:-L24QDCbDC-I24jMEbG475w4AYfBUKayfafAE_vlwNHNJUpcc9rM76sfdBuuyEfslxJYDHhu9-u0ZgpCbpriMJpNaPQCgmlkgnY0gmlwhKwSXlmKbXVsdGlhZGRyc5YACASsEl5ZBmKRAAoErBJeWQZikt0DgnJzhQPnAQAAiXNlY3AyNTZrMaECEVnejsmiN6NCt9ebthTQpRPfaWcK-IUFDJiTJfE9ziODdGNwgmKRg3VkcIJik4V3YWt1MgU"}'
2026-02-01 04:49:46.332 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:49:46.339 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-01 04:49:46.339 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-01_04-49-45__3d589a8f-c60a-4005-a209-7ad97b1ebad3__wakuorg_nwaku:latest.log
2026-02-01 04:49:46.340 DEBUG [src.node.waku_node] Starting Node...
2026-02-01 04:49:46.340 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-01 04:49:46.341 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-01 04:49:46.341 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.125.100
2026-02-01 04:49:46.341 DEBUG [src.node.docker_mananger] Generated ports ['9724', '9725', '9726', '9727', '9728']
2026-02-01 04:49:46.342 DEBUG [src.node.waku_node] Cluster id was resolved to: 999
2026-02-01 04:49:46.342 DEBUG [src.node.waku_node] Removing pubsub-topic from nwaku args
2026-02-01 04:49:46.342 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-01 04:49:46.342 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-01 04:49:46.342 DEBUG [src.node.waku_node] Using volumes []
2026-02-01 04:49:46.342 DEBUG [src.node.docker_mananger] docker run -i -t -p 9724:9724 -p 9725:9725 -p 9726:9726 -p 9727:9727 -p 9728:9728 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9726 --rest-port=9724 --tcp-port=9725 --discv5-udp-port=9727 --rest-address=0.0.0.0 --nat=extip:172.18.125.100 --peer-exchange=true --discv5-discovery=true --cluster-id=999 --nodekey=4943daebdee333c5376da6760f57676bee7da627e8d2861aea521aab4ce5732b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9728 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QDCbDC-I24jMEbG475w4AYfBUKayfafAE_vlwNHNJUpcc9rM76sfdBuuyEfslxJYDHhu9-u0ZgpCbpriMJpNaPQCgmlkgnY0gmlwhKwSXlmKbXVsdGlhZGRyc5YACASsEl5ZBmKRAAoErBJeWQZikt0DgnJzhQPnAQAAiXNlY3AyNTZrMaECEVnejsmiN6NCt9ebthTQpRPfaWcK-IUFDJiTJfE9ziODdGNwgmKRg3VkcIJik4V3YWt1MgU
2026-02-01 04:49:46.532 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.125.100 waku 40ef0190b5521b591ad51589f4863de7e1f0e497e2a6985a8db4c4898efadcd0
2026-02-01 04:49:46.563 DEBUG [src.node.docker_mananger] Container started with ID 40ef0190b552. Setting up logs at ./log/docker/node2_2026-02-01_04-49-45__3d589a8f-c60a-4005-a209-7ad97b1ebad3__wakuorg_nwaku:latest.log
2026-02-01 04:49:46.563 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9724
2026-02-01 04:49:46.563 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-01 04:49:47.564 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9724/health" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:47.577 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-01 04:49:47.581 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-01 04:49:47.581 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9724/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:47.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.100/tcp/9725/p2p/16Uiu2HAmRDthTSb6WGUaEZVkD447jfeXNee2uSbhmb4jdQuyeBaK","/ip4/172.18.125.100/tcp/9726/ws/p2p/16Uiu2HAmRDthTSb6WGUaEZVkD447jfeXNee2uSbhmb4jdQuyeBaK"],"enrUri":"enr:-L24QO5q9el3QQyB_EXXPDw2Wbl_L3C4wzKuHniT-lxmn36bVcP6Mm6K2O19oj0q2iit5gNcUbfmheRBYLpPesp9-yQCgmlkgnY0gmlwhKwSfWSKbXVsdGlhZGRyc5YACASsEn1kBiX9AAoErBJ9ZAYl_t0DgnJzhQPnAQAAiXNlY3AyNTZrMaEDuroEzGkhcZoFPO4R4SWXx3BT5Vo9BT5AfHGm2TaqXHyDdGNwgiX9g3VkcIIl_4V3YWt1MgE"}'
2026-02-01 04:49:47.586 INFO [src.node.waku_node] REST service is ready !!
2026-02-01 04:49:47.586 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9724/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.89/tcp/25233/p2p/16Uiu2HAkvbQPgDrGSmP2PfdvVVVjrAkMWFRBKrBaFNsa7W64M2QS"]'
2026-02-01 04:49:47.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:47.590 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25232/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/999/999"]'
2026-02-01 04:49:47.593 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:47.594 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9724/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/999/999"]'
2026-02-01 04:49:47.599 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:47.600 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25232/relay/v1/messages/%2Fwaku%2F2%2Frs%2F999%2F999" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-01 04:49:47.606 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-01 04:49:47.606 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-01 04:49:47.706 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-01 04:49:47.707 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25232/relay/v1/messages/%2Fwaku%2F2%2Frs%2F999%2F999" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:47.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769921387600113693,"ephemeral":false,"proof":""}]'
2026-02-01 04:49:47.711 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-01 04:49:47.712 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9724/relay/v1/messages/%2Fwaku%2F2%2Frs%2F999%2F999" -H "Content-Type: application/json" -d 'None'
2026-02-01 04:49:47.714 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1769921387600113693,"ephemeral":false,"proof":""}]'
2026-02-01 04:49:47.717 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-01 04:49:47.718 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-01 04:49:47.718 DEBUG [src.node.waku_node] Stopping container with id 7123a349de37
2026-02-01 04:49:48.307 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:49:48.307 DEBUG [src.node.waku_node] Stopping container with id 40ef0190b552
2026-02-01 04:49:48.888 DEBUG [src.node.waku_node] Container stopped.
2026-02-01 04:49:48.889 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-01 04:49:48.895 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-01 04:49:48.901 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
