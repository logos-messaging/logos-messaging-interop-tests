2026-02-03 04:33:34.688 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-03 04:33:34.689 DEBUG [tests.conftest] Running test: test_filter_get_message_with_version with id: 2026-02-03_04-33-34__b9b12b98-7c81-4422-bf20-39d081572496
2026-02-03 04:33:34.689 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-03 04:33:34.690 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-03 04:33:34.690 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-03 04:33:34.699 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:33:34.699 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-03_04-33-34__b9b12b98-7c81-4422-bf20-39d081572496__wakuorg_nwaku:latest.log
2026-02-03 04:33:34.700 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:33:34.700 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:33:34.702 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:33:34.703 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.69.11
2026-02-03 04:33:34.703 DEBUG [src.node.docker_mananger] Generated ports ['17087', '17088', '17089', '17090', '17091']
2026-02-03 04:33:34.704 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:33:34.704 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:33:34.704 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:33:34.704 DEBUG [src.node.docker_mananger] docker run -i -t -p 17087:17087 -p 17088:17088 -p 17089:17089 -p 17090:17090 -p 17091:17091 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17089 --rest-port=17087 --tcp-port=17088 --discv5-udp-port=17090 --rest-address=0.0.0.0 --nat=extip:172.18.69.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2a96c4d8721ef47fa7cfcecedebdcfb7bed39c333a5fe1e36ecc5bd5d18dc7e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17091 --metrics-logging=true --relay=true --filter=true
2026-02-03 04:33:34.887 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.69.11 waku 09a1451a68dd39b5077c445938ccdb3d6cef848f20eae2457767b5a9f4185c3c
2026-02-03 04:33:34.919 DEBUG [src.node.docker_mananger] Container started with ID 09a1451a68dd. Setting up logs at ./log/docker/node1_2026-02-03_04-33-34__b9b12b98-7c81-4422-bf20-39d081572496__wakuorg_nwaku:latest.log
2026-02-03 04:33:34.921 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17087
2026-02-03 04:33:34.921 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:33:34.942 ERROR [src.node.docker_mananger] Max retries reached for container fee7cd9278cf. Exiting log stream.
2026-02-03 04:33:35.548 ERROR [src.node.docker_mananger] Max retries reached for container 3ac150745197. Exiting log stream.
2026-02-03 04:33:35.922 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17087/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:35.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:33:35.925 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:33:35.925 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17087/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:35.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.11/tcp/17088/p2p/16Uiu2HAmSUBNPxk29qXLcnpLVUTzg2sgiYKXBCu7oxFChvBSZWE4","/ip4/172.18.69.11/tcp/17089/ws/p2p/16Uiu2HAmSUBNPxk29qXLcnpLVUTzg2sgiYKXBCu7oxFChvBSZWE4"],"enrUri":"enr:-L24QD4gMnjT8fkaB__-u2m1zPKOvSzp91z2DlW9K7bKa46IfaGkjiGWyVDXPAuTpstgmUeWi9WirXNf1c4Jt9XaYaICgmlkgnY0gmlwhKwSRQuKbXVsdGlhZGRyc5YACASsEkULBkLAAAoErBJFCwZCwd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzT6v-Ik5p_jpbUTeT3rZrwIMAb4RMV-O8pOy-nu19hmDdGNwgkLAg3VkcIJCwoV3YWt1MgU"}'
2026-02-03 04:33:35.928 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:33:35.928 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-03 04:33:35.934 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:33:35.934 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-03_04-33-34__b9b12b98-7c81-4422-bf20-39d081572496__wakuorg_nwaku:latest.log
2026-02-03 04:33:35.935 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:33:35.935 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:33:35.936 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:33:35.936 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.243.16
2026-02-03 04:33:35.936 DEBUG [src.node.docker_mananger] Generated ports ['10232', '10233', '10234', '10235', '10236']
2026-02-03 04:33:35.936 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:33:35.937 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:33:35.937 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:33:35.937 DEBUG [src.node.docker_mananger] docker run -i -t -p 10232:10232 -p 10233:10233 -p 10234:10234 -p 10235:10235 -p 10236:10236 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10234 --rest-port=10232 --tcp-port=10233 --discv5-udp-port=10235 --rest-address=0.0.0.0 --nat=extip:172.18.243.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff3cdfc42bff2bc803eafe53a3aee9c672ad870dbd4fc9f31a42eccb31aaf560 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10236 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QD4gMnjT8fkaB__-u2m1zPKOvSzp91z2DlW9K7bKa46IfaGkjiGWyVDXPAuTpstgmUeWi9WirXNf1c4Jt9XaYaICgmlkgnY0gmlwhKwSRQuKbXVsdGlhZGRyc5YACASsEkULBkLAAAoErBJFCwZCwd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzT6v-Ik5p_jpbUTeT3rZrwIMAb4RMV-O8pOy-nu19hmDdGNwgkLAg3VkcIJCwoV3YWt1MgU --filternode=/ip4/172.18.69.11/tcp/17088/p2p/16Uiu2HAmSUBNPxk29qXLcnpLVUTzg2sgiYKXBCu7oxFChvBSZWE4
2026-02-03 04:33:36.109 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.243.16 waku 439902907f84464a0c978db1f7a421509eb904e0f331b110e080512bcd8c6b22
2026-02-03 04:33:36.141 DEBUG [src.node.docker_mananger] Container started with ID 439902907f84. Setting up logs at ./log/docker/node2_2026-02-03_04-33-34__b9b12b98-7c81-4422-bf20-39d081572496__wakuorg_nwaku:latest.log
2026-02-03 04:33:36.141 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10232
2026-02-03 04:33:36.142 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:33:37.142 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10232/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:37.146 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-03 04:33:37.146 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:33:37.146 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10232/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:37.149 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.243.16/tcp/10233/p2p/16Uiu2HAm7MWwZD2qHYUtvRne519AuHDrEa3fb9JBkfhhJJstkxVK","/ip4/172.18.243.16/tcp/10234/ws/p2p/16Uiu2HAm7MWwZD2qHYUtvRne519AuHDrEa3fb9JBkfhhJJstkxVK"],"enrUri":"enr:-L24QOpvx83fUL2YafD--vOqmfcxCvuK-kr-CaD0hiXgXGpyC3mc4nmk1HkVp_1cRK0kFn0f5xR0qmPw5mpZlzPnWUoCgmlkgnY0gmlwhKwS8xCKbXVsdGlhZGRyc5YACASsEvMQBif5AAoErBLzEAYn-t0DgnJzhQADAQAAiXNlY3AyNTZrMaECsTuzLpZvwRmzm0KpDozjOWMz0NKTR-z2yNN8z_4jNg6DdGNwgif5g3VkcIIn-4V3YWt1MgA"}'
2026-02-03 04:33:37.149 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:33:37.149 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10232/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.69.11/tcp/17088/p2p/16Uiu2HAmSUBNPxk29qXLcnpLVUTzg2sgiYKXBCu7oxFChvBSZWE4"]'
2026-02-03 04:33:37.182 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:37.182 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-03 04:33:37.183 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17087/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-03 04:33:37.194 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:37.194 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10232/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b2fcb4f4-95f2-4aad-8ec0-62435af5d748", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-03 04:33:37.206 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b2fcb4f4-95f2-4aad-8ec0-62435af5d748","statusDesc":"OK"}'
2026-02-03 04:33:37.207 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17087/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "version": 10}'
2026-02-03 04:33:37.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:37.214 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-03 04:33:37.315 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-03 04:33:37.315 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10232/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:37.318 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":10,"timestamp":1770093217207680003,"ephemeral":false}]'
2026-02-03 04:33:37.322 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-03 04:33:37.322 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-03 04:33:37.322 DEBUG [src.node.waku_node] Stopping container with id 09a1451a68dd
2026-02-03 04:33:37.879 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:33:37.880 DEBUG [src.node.waku_node] Stopping container with id 439902907f84
2026-02-03 04:33:38.415 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:33:38.417 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-03 04:33:38.426 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-03 04:33:38.430 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
