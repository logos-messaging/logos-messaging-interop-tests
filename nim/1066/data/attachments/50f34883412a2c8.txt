2026-02-03 04:37:02.479 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-03 04:37:02.479 DEBUG [tests.conftest] Running test: test_cursor_pointing_to_deleted_message with id: 2026-02-03_04-37-02__d335ef80-208e-4e73-8eed-33253fb19872
2026-02-03 04:37:02.479 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-03 04:37:02.479 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-03 04:37:02.480 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-03 04:37:02.486 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:37:02.487 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-03_04-37-02__d335ef80-208e-4e73-8eed-33253fb19872__wakuorg_nwaku:latest.log
2026-02-03 04:37:02.487 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:37:02.487 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:37:02.488 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:37:02.488 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.23.170
2026-02-03 04:37:02.489 DEBUG [src.node.docker_mananger] Generated ports ['55475', '55476', '55477', '55478', '55479']
2026-02-03 04:37:02.489 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:37:02.489 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:37:02.489 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:37:02.489 DEBUG [src.node.docker_mananger] docker run -i -t -p 55475:55475 -p 55476:55476 -p 55477:55477 -p 55478:55478 -p 55479:55479 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55477 --rest-port=55475 --tcp-port=55476 --discv5-udp-port=55478 --rest-address=0.0.0.0 --nat=extip:172.18.23.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3888c7bccbfa3f9aac6af6c0dedcec45eeb6d1ebc38fafb7e4fc8eba86fb9bdd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55479 --metrics-logging=true --store=true --relay=true
2026-02-03 04:37:02.673 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.23.170 waku 6f633733760f40900a65d3f67ab3e8baa49dd0db8f0ae7c8d2153623769159dc
2026-02-03 04:37:02.708 DEBUG [src.node.docker_mananger] Container started with ID 6f633733760f. Setting up logs at ./log/docker/publishing_node1_2026-02-03_04-37-02__d335ef80-208e-4e73-8eed-33253fb19872__wakuorg_nwaku:latest.log
2026-02-03 04:37:02.710 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55475
2026-02-03 04:37:02.710 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:37:02.741 ERROR [src.node.docker_mananger] Max retries reached for container a61914e38e08. Exiting log stream.
2026-02-03 04:37:03.287 ERROR [src.node.docker_mananger] Max retries reached for container 736d49498d86. Exiting log stream.
2026-02-03 04:37:03.712 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55475/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:37:03.715 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:37:03.715 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:37:03.716 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55475/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:37:03.718 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.170/tcp/55476/p2p/16Uiu2HAmHiXZbFCtUnNiEddFdvy1eAfyKaJvtr5tof1DCVqyktQ6","/ip4/172.18.23.170/tcp/55477/ws/p2p/16Uiu2HAmHiXZbFCtUnNiEddFdvy1eAfyKaJvtr5tof1DCVqyktQ6"],"enrUri":"enr:-L24QChi6N4hYBBn-TnCMYTpb2lFPNM9y1BXTyKeAEBYTgBgSiOGaEzLAwpiRVk2G2EsblnSZxuwwuYYcU2sgimybMcCgmlkgnY0gmlwhKwSF6qKbXVsdGlhZGRyc5YACASsEheqBti0AAoErBIXqgbYtd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSzJ3-7Z_KyYVXPw2nPmNtRSMCXnwrgBbUGQrGTW4mB-DdGNwgti0g3VkcILYtoV3YWt1MgM"}'
2026-02-03 04:37:03.718 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:37:03.724 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:37:03.725 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-03_04-37-02__d335ef80-208e-4e73-8eed-33253fb19872__wakuorg_nwaku:latest.log
2026-02-03 04:37:03.725 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:37:03.725 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:37:03.726 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:37:03.726 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.26.149
2026-02-03 04:37:03.727 DEBUG [src.node.docker_mananger] Generated ports ['50876', '50877', '50878', '50879', '50880']
2026-02-03 04:37:03.727 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:37:03.727 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:37:03.727 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:37:03.727 DEBUG [src.node.docker_mananger] docker run -i -t -p 50876:50876 -p 50877:50877 -p 50878:50878 -p 50879:50879 -p 50880:50880 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50878 --rest-port=50876 --tcp-port=50877 --discv5-udp-port=50879 --rest-address=0.0.0.0 --nat=extip:172.18.26.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7a3f292dbae2ee3e1c70ff0dcdb70dbd1c4ad99a5c39e0cfcb9be6cff72da02c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50880 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QChi6N4hYBBn-TnCMYTpb2lFPNM9y1BXTyKeAEBYTgBgSiOGaEzLAwpiRVk2G2EsblnSZxuwwuYYcU2sgimybMcCgmlkgnY0gmlwhKwSF6qKbXVsdGlhZGRyc5YACASsEheqBti0AAoErBIXqgbYtd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSzJ3-7Z_KyYVXPw2nPmNtRSMCXnwrgBbUGQrGTW4mB-DdGNwgti0g3VkcILYtoV3YWt1MgM --storenode=/ip4/172.18.23.170/tcp/55476/p2p/16Uiu2HAmHiXZbFCtUnNiEddFdvy1eAfyKaJvtr5tof1DCVqyktQ6 --store=true --relay=true
2026-02-03 04:37:03.906 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.26.149 waku 74fa97881d1e34be44f1bb031039b140fb721f5119822ca4887ec103beab8dce
2026-02-03 04:37:03.940 DEBUG [src.node.docker_mananger] Container started with ID 74fa97881d1e. Setting up logs at ./log/docker/store_node1_2026-02-03_04-37-02__d335ef80-208e-4e73-8eed-33253fb19872__wakuorg_nwaku:latest.log
2026-02-03 04:37:03.941 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50876
2026-02-03 04:37:03.942 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:37:04.942 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50876/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:37:04.946 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:37:04.947 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:37:04.947 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50876/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:37:04.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.26.149/tcp/50877/p2p/16Uiu2HAmK9GbSxvuzEHBtrFG5oUkYNM5ZbhDFdpJgX3epbZNh8pf","/ip4/172.18.26.149/tcp/50878/ws/p2p/16Uiu2HAmK9GbSxvuzEHBtrFG5oUkYNM5ZbhDFdpJgX3epbZNh8pf"],"enrUri":"enr:-L24QKcxbJf3D2UWSQ9KWuoVFTipU63vsZ-tHpCoNJ3fE7NOLOTpPi2X6B6hSWX5fybrJkUTfWaeKwntxEBJXyuVHhQCgmlkgnY0gmlwhKwSGpWKbXVsdGlhZGRyc5YACASsEhqVBsa9AAoErBIalQbGvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYGTAYapGHQ5I-uuy6sh65-ednc6r-_KV9GFdBDfvvliDdGNwgsa9g3VkcILGv4V3YWt1MgM"}'
2026-02-03 04:37:04.949 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:37:04.950 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50876/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.23.170/tcp/55476/p2p/16Uiu2HAmHiXZbFCtUnNiEddFdvy1eAfyKaJvtr5tof1DCVqyktQ6"]'
2026-02-03 04:37:04.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:04.953 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-03 04:37:04.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:04.956 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50876/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-03 04:37:04.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:04.959 DEBUG [src.steps.store] Relaying message
2026-02-03 04:37:04.959 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:37:04.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:04.965 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:37:05.166 DEBUG [src.steps.store] Relaying message
2026-02-03 04:37:05.166 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:37:05.171 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:05.171 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:37:05.372 DEBUG [src.steps.store] Relaying message
2026-02-03 04:37:05.372 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:37:05.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:05.378 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:37:05.579 DEBUG [src.steps.store] Relaying message
2026-02-03 04:37:05.579 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:37:05.585 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:05.585 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:37:05.787 DEBUG [src.steps.store] Relaying message
2026-02-03 04:37:05.787 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:37:05.792 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:05.793 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:37:05.994 DEBUG [src.steps.store] Relaying message
2026-02-03 04:37:05.994 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:37:06.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:06.001 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:37:06.201 DEBUG [src.steps.store] Relaying message
2026-02-03 04:37:06.201 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:37:06.206 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:06.207 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:37:06.408 DEBUG [src.steps.store] Relaying message
2026-02-03 04:37:06.408 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:37:06.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:06.415 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:37:06.615 DEBUG [src.steps.store] Relaying message
2026-02-03 04:37:06.616 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:37:06.621 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:06.621 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:37:06.822 DEBUG [src.steps.store] Relaying message
2026-02-03 04:37:06.822 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:37:06.827 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:37:06.828 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:37:07.029 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x83f05216ec821134e5247efd97dde5627ae354c159bd47d8d2d1ff2882eff889&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:37:07.032 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:55475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x83f05216ec821134e5247efd97dde5627ae354c159bd47d8d2d1ff2882eff889&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-03 04:37:07.033 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50876/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x83f05216ec821134e5247efd97dde5627ae354c159bd47d8d2d1ff2882eff889&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:37:07.035 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:50876/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=0x83f05216ec821134e5247efd97dde5627ae354c159bd47d8d2d1ff2882eff889&pageSize=100&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: DRIVER_ERROR: cursor not found'
2026-02-03 04:37:07.037 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-03 04:37:07.038 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-03 04:37:07.039 DEBUG [src.node.waku_node] Stopping container with id 6f633733760f
2026-02-03 04:37:07.577 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:37:07.578 DEBUG [src.node.waku_node] Stopping container with id 74fa97881d1e
2026-02-03 04:37:08.100 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:37:08.103 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-03 04:37:08.110 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-03 04:37:08.118 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
