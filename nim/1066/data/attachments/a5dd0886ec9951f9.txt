2026-02-03 04:35:19.935 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-03 04:35:19.935 DEBUG [tests.conftest] Running test: test_2_nodes_different_content_topic_different_shard with id: 2026-02-03_04-35-19__aea43029-cd4e-41e8-951f-c1ee353eda7c
2026-02-03 04:35:19.935 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-03 04:35:19.936 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-03 04:35:19.936 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2026-02-03 04:35:19.943 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:35:19.943 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-03_04-35-19__aea43029-cd4e-41e8-951f-c1ee353eda7c__wakuorg_nwaku:latest.log
2026-02-03 04:35:19.943 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:35:19.943 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:35:19.944 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:35:19.944 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.157.116
2026-02-03 04:35:19.945 DEBUG [src.node.docker_mananger] Generated ports ['57742', '57743', '57744', '57745', '57746']
2026-02-03 04:35:19.945 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:35:19.945 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:35:19.945 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:35:19.945 DEBUG [src.node.docker_mananger] docker run -i -t -p 57742:57742 -p 57743:57743 -p 57744:57744 -p 57745:57745 -p 57746:57746 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57744 --rest-port=57742 --tcp-port=57743 --discv5-udp-port=57745 --rest-address=0.0.0.0 --nat=extip:172.18.157.116 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d4a1f3edb8faaf1ebfafffd7ec1ee6fc3a8ab4ecfa2bd443eea4a4a3ea6b72f8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57746 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2026-02-03 04:35:20.125 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.157.116 waku 6c4e00ad69fef72377c4927549c537b677f1dc9bd20e1ae59e72ad441dcc8a48
2026-02-03 04:35:20.157 DEBUG [src.node.docker_mananger] Container started with ID 6c4e00ad69fe. Setting up logs at ./log/docker/node1_2026-02-03_04-35-19__aea43029-cd4e-41e8-951f-c1ee353eda7c__wakuorg_nwaku:latest.log
2026-02-03 04:35:20.159 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57742
2026-02-03 04:35:20.159 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:35:20.233 ERROR [src.node.docker_mananger] Max retries reached for container e3fde732bed2. Exiting log stream.
2026-02-03 04:35:20.743 ERROR [src.node.docker_mananger] Max retries reached for container 059f7a3ec6f0. Exiting log stream.
2026-02-03 04:35:21.159 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57742/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:21.162 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:35:21.163 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:35:21.163 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57742/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:21.165 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.116/tcp/57743/p2p/16Uiu2HAmJKGXSS5mUSfAzBHnoEqFvgTnm3Sb7o1pxd1zbc3LgrWX","/ip4/172.18.157.116/tcp/57744/ws/p2p/16Uiu2HAmJKGXSS5mUSfAzBHnoEqFvgTnm3Sb7o1pxd1zbc3LgrWX"],"enrUri":"enr:-L24QLXAoSECybY4XkWayf5RJzWQEOOm_FF3UeVn_Bw2uIXCQfclmtkK3v_5exfklr6brwciELTraTGh-_7c1Vq7ldkCgmlkgnY0gmlwhKwSnXSKbXVsdGlhZGRyc5YACASsEp10BuGPAAoErBKddAbhkN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDVBjLZBx3WBKsxfM5k_iu8ygThfU4wBoz2OGnSPjgutyDdGNwguGPg3VkcILhkYV3YWt1MgU"}'
2026-02-03 04:35:21.165 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:35:21.172 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:35:21.172 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-03_04-35-19__aea43029-cd4e-41e8-951f-c1ee353eda7c__wakuorg_nwaku:latest.log
2026-02-03 04:35:21.172 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:35:21.172 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:35:21.173 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:35:21.174 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.102.226
2026-02-03 04:35:21.174 DEBUG [src.node.docker_mananger] Generated ports ['14574', '14575', '14576', '14577', '14578']
2026-02-03 04:35:21.174 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:35:21.174 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:35:21.174 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:35:21.174 DEBUG [src.node.docker_mananger] docker run -i -t -p 14574:14574 -p 14575:14575 -p 14576:14576 -p 14577:14577 -p 14578:14578 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14576 --rest-port=14574 --tcp-port=14575 --discv5-udp-port=14577 --rest-address=0.0.0.0 --nat=extip:172.18.102.226 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=35a60bc9caefcfcfbefda5a9a6d46154a13da16810eb8fdf9f2bdbaaddc2bebb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14578 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLXAoSECybY4XkWayf5RJzWQEOOm_FF3UeVn_Bw2uIXCQfclmtkK3v_5exfklr6brwciELTraTGh-_7c1Vq7ldkCgmlkgnY0gmlwhKwSnXSKbXVsdGlhZGRyc5YACASsEp10BuGPAAoErBKddAbhkN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDVBjLZBx3WBKsxfM5k_iu8ygThfU4wBoz2OGnSPjgutyDdGNwguGPg3VkcILhkYV3YWt1MgU --content-topic=/waku/2/content/test.js
2026-02-03 04:35:21.368 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.102.226 waku 58a80dcd12bfccbbfe5608705d34e98bedbe1f55b7cee51ab264bed7081365bb
2026-02-03 04:35:21.398 DEBUG [src.node.docker_mananger] Container started with ID 58a80dcd12bf. Setting up logs at ./log/docker/node2_2026-02-03_04-35-19__aea43029-cd4e-41e8-951f-c1ee353eda7c__wakuorg_nwaku:latest.log
2026-02-03 04:35:21.398 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14574
2026-02-03 04:35:21.399 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:35:22.399 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14574/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:22.415 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-03 04:35:22.417 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:35:22.419 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14574/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:22.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.226/tcp/14575/p2p/16Uiu2HAmNme6MUXnZcZropQ2YSHGwMtgkVx7uRqqBiBCnkQLWT1J","/ip4/172.18.102.226/tcp/14576/ws/p2p/16Uiu2HAmNme6MUXnZcZropQ2YSHGwMtgkVx7uRqqBiBCnkQLWT1J"],"enrUri":"enr:-L24QEyOazDmLWCLecan-ED2o4Q5Plhopnh93DX4NWdVcbKIex2fyLvZNkKRj3jDUaHjYh4rSUSNq0-_S8vOQwVz2tgCgmlkgnY0gmlwhKwSZuKKbXVsdGlhZGRyc5YACASsEmbiBjjvAAoErBJm4gY48N0DgnJzhQACAQAAiXNlY3AyNTZrMaEDlkkHmP_5Qv_F9JPuRhVl2hSD7GjoGdiLbipGAWWcPhGDdGNwgjjvg3VkcII48YV3YWt1MgE"}'
2026-02-03 04:35:22.421 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:35:22.422 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14574/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.157.116/tcp/57743/p2p/16Uiu2HAmJKGXSS5mUSfAzBHnoEqFvgTnm3Sb7o1pxd1zbc3LgrWX"]'
2026-02-03 04:35:22.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:22.424 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57742/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2026-02-03 04:35:22.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:22.427 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14574/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/content/test.js"]'
2026-02-03 04:35:22.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:22.430 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57742/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:35:22.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:22.436 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-03 04:35:22.536 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-03 04:35:22.537 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57742/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:22.539 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770093322430205786,"ephemeral":false,"proof":""}]'
2026-02-03 04:35:22.541 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-03 04:35:22.541 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14574/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:22.543 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1770093322430205786,"ephemeral":false,"proof":""}]'
2026-02-03 04:35:22.546 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-03 04:35:22.546 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-03 04:35:22.547 DEBUG [src.node.waku_node] Stopping container with id 6c4e00ad69fe
2026-02-03 04:35:23.115 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:35:23.116 DEBUG [src.node.waku_node] Stopping container with id 58a80dcd12bf
2026-02-03 04:35:23.632 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:35:23.633 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-03 04:35:23.642 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-03 04:35:23.647 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
