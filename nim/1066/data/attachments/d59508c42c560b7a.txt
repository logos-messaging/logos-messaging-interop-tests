2026-02-03 04:38:29.619 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-03 04:38:29.619 DEBUG [tests.conftest] Running test: test_store_with_filter with id: 2026-02-03_04-38-29__6366cff0-f2ed-435f-be1c-98b2b1946737
2026-02-03 04:38:29.619 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-03 04:38:29.619 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-03 04:38:29.626 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:38:29.627 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-03_04-38-29__6366cff0-f2ed-435f-be1c-98b2b1946737__wakuorg_nwaku:latest.log
2026-02-03 04:38:29.627 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:38:29.627 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:38:29.628 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:38:29.628 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.225.254
2026-02-03 04:38:29.629 DEBUG [src.node.docker_mananger] Generated ports ['53252', '53253', '53254', '53255', '53256']
2026-02-03 04:38:29.629 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:38:29.629 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:38:29.629 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:38:29.629 DEBUG [src.node.docker_mananger] docker run -i -t -p 53252:53252 -p 53253:53253 -p 53254:53254 -p 53255:53255 -p 53256:53256 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53254 --rest-port=53252 --tcp-port=53253 --discv5-udp-port=53255 --rest-address=0.0.0.0 --nat=extip:172.18.225.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=61ae8a9babed727ead7da26a0beca9aab7de2b79eaea533f7c142cfbceacc70a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53256 --metrics-logging=true --store=true --relay=true --filter=true
2026-02-03 04:38:29.812 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.225.254 waku f7dcb20d12aadb053159c92dc6508a9ea78b8d900eee767bb7c0145bb9bc950b
2026-02-03 04:38:29.842 DEBUG [src.node.docker_mananger] Container started with ID f7dcb20d12aa. Setting up logs at ./log/docker/publishing_node1_2026-02-03_04-38-29__6366cff0-f2ed-435f-be1c-98b2b1946737__wakuorg_nwaku:latest.log
2026-02-03 04:38:29.844 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53252
2026-02-03 04:38:29.845 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:38:29.869 ERROR [src.node.docker_mananger] Max retries reached for container 3052434d378d. Exiting log stream.
2026-02-03 04:38:30.403 ERROR [src.node.docker_mananger] Max retries reached for container 229eaa6f814f. Exiting log stream.
2026-02-03 04:38:30.845 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53252/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:38:30.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:38:30.849 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:38:30.849 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53252/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:38:30.851 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.254/tcp/53253/p2p/16Uiu2HAmGxZ9yrPdaM68u8Ha3cBEuQtKgF7EY218nLLYgw75UZCR","/ip4/172.18.225.254/tcp/53254/ws/p2p/16Uiu2HAmGxZ9yrPdaM68u8Ha3cBEuQtKgF7EY218nLLYgw75UZCR"],"enrUri":"enr:-L24QENo0-JZeSv7u8nAjjrh50aNs7iXmY50PHmcz1BesQFcFzuMSmoPe79ZtP1-CE0ozuGb9r1PMRJoAMozo52H3zwCgmlkgnY0gmlwhKwS4f6KbXVsdGlhZGRyc5YACASsEuH-BtAFAAoErBLh_gbQBt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDP-621rTBjnyWPo6Umu9bX3Fzhv_dP6dzHm1XI_q5-06DdGNwgtAFg3VkcILQB4V3YWt1Mgc"}'
2026-02-03 04:38:30.851 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:38:30.858 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:38:30.858 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-03_04-38-29__6366cff0-f2ed-435f-be1c-98b2b1946737__wakuorg_nwaku:latest.log
2026-02-03 04:38:30.858 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:38:30.858 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:38:30.860 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:38:30.860 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.197.65
2026-02-03 04:38:30.860 DEBUG [src.node.docker_mananger] Generated ports ['36812', '36813', '36814', '36815', '36816']
2026-02-03 04:38:30.860 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:38:30.860 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:38:30.861 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:38:30.861 DEBUG [src.node.docker_mananger] docker run -i -t -p 36812:36812 -p 36813:36813 -p 36814:36814 -p 36815:36815 -p 36816:36816 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36814 --rest-port=36812 --tcp-port=36813 --discv5-udp-port=36815 --rest-address=0.0.0.0 --nat=extip:172.18.197.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a96c64da1c005cb810dba3e7dd2ddb61ecbbcf14becbc491b026b799fdceafdf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36816 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QENo0-JZeSv7u8nAjjrh50aNs7iXmY50PHmcz1BesQFcFzuMSmoPe79ZtP1-CE0ozuGb9r1PMRJoAMozo52H3zwCgmlkgnY0gmlwhKwS4f6KbXVsdGlhZGRyc5YACASsEuH-BtAFAAoErBLh_gbQBt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDP-621rTBjnyWPo6Umu9bX3Fzhv_dP6dzHm1XI_q5-06DdGNwgtAFg3VkcILQB4V3YWt1Mgc --storenode=/ip4/172.18.225.254/tcp/53253/p2p/16Uiu2HAmGxZ9yrPdaM68u8Ha3cBEuQtKgF7EY218nLLYgw75UZCR --store=false --relay=false --filter=true
2026-02-03 04:38:31.048 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.197.65 waku 5b207cabba2981664bea4ccc859e8f5fb5c9ca0c771444bc9f56b63145d1ae99
2026-02-03 04:38:31.078 DEBUG [src.node.docker_mananger] Container started with ID 5b207cabba29. Setting up logs at ./log/docker/store_node1_2026-02-03_04-38-29__6366cff0-f2ed-435f-be1c-98b2b1946737__wakuorg_nwaku:latest.log
2026-02-03 04:38:31.079 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36812
2026-02-03 04:38:31.079 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:38:32.079 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36812/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:38:32.083 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"READY"}]}'
2026-02-03 04:38:32.083 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:38:32.084 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36812/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:38:32.086 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.65/tcp/36813/p2p/16Uiu2HAm4ZfpGWeJ6GLEv1Ah7bjaYoFBU3Z7CWACPhTEKo8Dc9LV","/ip4/172.18.197.65/tcp/36814/ws/p2p/16Uiu2HAm4ZfpGWeJ6GLEv1Ah7bjaYoFBU3Z7CWACPhTEKo8Dc9LV"],"enrUri":"enr:-L24QI8BfdmQdfC0RABl3xQfzxcAy7zstWK-3pyQ7whzXw_tKxUdeYx_RX7sDdsKHF9vHRJQopu6nSSnzizyI6Qg7roCgmlkgnY0gmlwhKwSxUGKbXVsdGlhZGRyc5YACASsEsVBBo_NAAoErBLFQQaPzt0DgnJzhQADAQAAiXNlY3AyNTZrMaECh8WkoztaURoQ5ZteQHEUw1OF32rSlrf3E4kOHID-wqKDdGNwgo_Ng3VkcIKPz4V3YWt1MgQ"}'
2026-02-03 04:38:32.086 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:38:32.086 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36812/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.254/tcp/53253/p2p/16Uiu2HAmGxZ9yrPdaM68u8Ha3cBEuQtKgF7EY218nLLYgw75UZCR"]'
2026-02-03 04:38:32.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:38:32.117 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53252/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-03 04:38:32.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:38:32.129 DEBUG [src.steps.store] Relaying message
2026-02-03 04:38:32.130 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53252/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:38:32.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:38:32.137 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:38:32.337 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-03 04:38:32.338 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53252/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:38:32.341 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x0399a1203945c31a582c48db5c59fbe3d39da4eb54c1beb79d1035469c865459"}]}'
2026-02-03 04:38:32.341 DEBUG [src.steps.store] messages length is 1
2026-02-03 04:38:32.341 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2026-02-03 04:38:32.341 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36812/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:38:32.351 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"2678e952645af5893464","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x0399a1203945c31a582c48db5c59fbe3d39da4eb54c1beb79d1035469c865459"}]}'
2026-02-03 04:38:32.351 DEBUG [src.steps.store] messages length is 1
2026-02-03 04:38:32.353 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-03 04:38:32.354 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-03 04:38:32.354 DEBUG [src.node.waku_node] Stopping container with id f7dcb20d12aa
2026-02-03 04:38:32.882 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:38:32.882 DEBUG [src.node.waku_node] Stopping container with id 5b207cabba29
2026-02-03 04:38:33.421 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:38:33.421 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-03 04:38:33.427 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-03 04:38:33.432 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
