2026-02-03 04:35:50.533 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-03 04:35:50.534 DEBUG [tests.conftest] Running test: test_store_without_pubsub_topic_and_content_topic with id: 2026-02-03_04-35-50__8d1b9982-bc55-4a73-a36f-1298195fc3c1
2026-02-03 04:35:50.534 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-03 04:35:50.534 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-03 04:35:50.534 DEBUG [src.steps.store] Running fixture setup: node_setup
2026-02-03 04:35:50.540 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:35:50.540 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2026-02-03_04-35-50__8d1b9982-bc55-4a73-a36f-1298195fc3c1__wakuorg_nwaku:latest.log
2026-02-03 04:35:50.540 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:35:50.540 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:35:50.542 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:35:50.542 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.231.195
2026-02-03 04:35:50.542 DEBUG [src.node.docker_mananger] Generated ports ['23627', '23628', '23629', '23630', '23631']
2026-02-03 04:35:50.542 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:35:50.542 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:35:50.542 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:35:50.542 DEBUG [src.node.docker_mananger] docker run -i -t -p 23627:23627 -p 23628:23628 -p 23629:23629 -p 23630:23630 -p 23631:23631 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23629 --rest-port=23627 --tcp-port=23628 --discv5-udp-port=23630 --rest-address=0.0.0.0 --nat=extip:172.18.231.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e8a1d9fe3dd12b3aaefa845d408bd12297f9bc9f48dace1cafcad0ccefabbbd2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23631 --metrics-logging=true --store=true --relay=true
2026-02-03 04:35:50.694 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.231.195 waku f20a1c1aaff78b77fc2b6f02cdaf7d3b450d0490871c22402de8fe29d341151b
2026-02-03 04:35:50.725 DEBUG [src.node.docker_mananger] Container started with ID f20a1c1aaff7. Setting up logs at ./log/docker/publishing_node1_2026-02-03_04-35-50__8d1b9982-bc55-4a73-a36f-1298195fc3c1__wakuorg_nwaku:latest.log
2026-02-03 04:35:50.726 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23627
2026-02-03 04:35:50.726 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:35:50.839 ERROR [src.node.docker_mananger] Max retries reached for container 6612484df3ff. Exiting log stream.
2026-02-03 04:35:51.324 ERROR [src.node.docker_mananger] Max retries reached for container 1a459830caa7. Exiting log stream.
2026-02-03 04:35:51.727 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23627/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:51.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:35:51.730 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:35:51.730 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23627/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:51.732 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.195/tcp/23628/p2p/16Uiu2HAkxnjEV2Jdx4udYBn2BgtK8pD2Ax1Y3hTXr4BWUopf7AbK","/ip4/172.18.231.195/tcp/23629/ws/p2p/16Uiu2HAkxnjEV2Jdx4udYBn2BgtK8pD2Ax1Y3hTXr4BWUopf7AbK"],"enrUri":"enr:-L24QLQYB58wvXAi6qTT0srfZzZPh-bp9EHEYDNN8qQdC5WeY0cjPz8Z9DBJx842lVaOoSz36ikAPOqRFHweHoZlUuECgmlkgnY0gmlwhKwS58OKbXVsdGlhZGRyc5YACASsEufDBlxMAAoErBLnwwZcTd0DgnJzhQADAQAAiXNlY3AyNTZrMaECMffvr1RYJpVOxzCK0WLS6xjxvum3LFTEHAJG82nSc7qDdGNwglxMg3VkcIJcToV3YWt1MgM"}'
2026-02-03 04:35:51.732 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:35:51.739 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:35:51.739 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2026-02-03_04-35-50__8d1b9982-bc55-4a73-a36f-1298195fc3c1__wakuorg_nwaku:latest.log
2026-02-03 04:35:51.739 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:35:51.739 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:35:51.740 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:35:51.740 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.244
2026-02-03 04:35:51.740 DEBUG [src.node.docker_mananger] Generated ports ['17776', '17777', '17778', '17779', '17780']
2026-02-03 04:35:51.741 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:35:51.741 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:35:51.741 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:35:51.741 DEBUG [src.node.docker_mananger] docker run -i -t -p 17776:17776 -p 17777:17777 -p 17778:17778 -p 17779:17779 -p 17780:17780 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17778 --rest-port=17776 --tcp-port=17777 --discv5-udp-port=17779 --rest-address=0.0.0.0 --nat=extip:172.18.64.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c548ad2cb8ec6f9740fc4cdff2edc07bd819047318131c3e7a00ee7a247abd2d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17780 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLQYB58wvXAi6qTT0srfZzZPh-bp9EHEYDNN8qQdC5WeY0cjPz8Z9DBJx842lVaOoSz36ikAPOqRFHweHoZlUuECgmlkgnY0gmlwhKwS58OKbXVsdGlhZGRyc5YACASsEufDBlxMAAoErBLnwwZcTd0DgnJzhQADAQAAiXNlY3AyNTZrMaECMffvr1RYJpVOxzCK0WLS6xjxvum3LFTEHAJG82nSc7qDdGNwglxMg3VkcIJcToV3YWt1MgM --storenode=/ip4/172.18.231.195/tcp/23628/p2p/16Uiu2HAkxnjEV2Jdx4udYBn2BgtK8pD2Ax1Y3hTXr4BWUopf7AbK --store=true --relay=true
2026-02-03 04:35:51.899 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.244 waku d9f9f21cfd9f01c57f2f7b73af8fee8df5689d0208561866f704afab056b5de7
2026-02-03 04:35:51.923 DEBUG [src.node.docker_mananger] Container started with ID d9f9f21cfd9f. Setting up logs at ./log/docker/store_node1_2026-02-03_04-35-50__8d1b9982-bc55-4a73-a36f-1298195fc3c1__wakuorg_nwaku:latest.log
2026-02-03 04:35:51.925 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17776
2026-02-03 04:35:51.925 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:35:52.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17776/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:52.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"READY"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"READY"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"READY"},{"Legacy Store Client":"READY"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:35:52.931 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:35:52.931 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17776/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:52.933 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.244/tcp/17777/p2p/16Uiu2HAmJZWpv8M5WE1hHcz3JRMFCeEM8HkAGr15b7Bn67wr1xfi","/ip4/172.18.64.244/tcp/17778/ws/p2p/16Uiu2HAmJZWpv8M5WE1hHcz3JRMFCeEM8HkAGr15b7Bn67wr1xfi"],"enrUri":"enr:-L24QIqHFtXqWD5xgU1mG7Ykll7fw8_kk6cPz-CjAun8fdI6N_ri_HHJkDi7S43yTVl14ZEh65TgsNzeHAkuIjvJ58ICgmlkgnY0gmlwhKwSQPSKbXVsdGlhZGRyc5YACASsEkD0BkVxAAoErBJA9AZFct0DgnJzhQADAQAAiXNlY3AyNTZrMaEDV78YrWBQZuvAjwzN_eNzJfMcmZRY5ZtTgO688_GcvlGDdGNwgkVxg3VkcIJFc4V3YWt1MgM"}'
2026-02-03 04:35:52.933 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:35:52.934 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17776/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.231.195/tcp/23628/p2p/16Uiu2HAkxnjEV2Jdx4udYBn2BgtK8pD2Ax1Y3hTXr4BWUopf7AbK"]'
2026-02-03 04:35:52.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:52.936 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23627/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-03 04:35:52.939 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:52.939 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17776/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2026-02-03 04:35:52.941 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:52.941 DEBUG [src.steps.store] Relaying message
2026-02-03 04:35:52.941 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:35:52.946 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:52.947 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:35:53.148 DEBUG [src.steps.store] Relaying message
2026-02-03 04:35:53.148 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:35:53.152 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:53.153 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:35:53.354 DEBUG [src.steps.store] Relaying message
2026-02-03 04:35:53.354 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:35:53.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:53.359 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:35:53.560 DEBUG [src.steps.store] Relaying message
2026-02-03 04:35:53.560 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:35:53.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:53.565 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:35:53.766 DEBUG [src.steps.store] Relaying message
2026-02-03 04:35:53.767 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:35:53.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:53.772 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:35:53.973 DEBUG [src.steps.store] Relaying message
2026-02-03 04:35:53.973 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:35:53.978 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:53.978 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:35:54.179 DEBUG [src.steps.store] Relaying message
2026-02-03 04:35:54.179 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:35:54.184 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:54.185 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:35:54.385 DEBUG [src.steps.store] Relaying message
2026-02-03 04:35:54.385 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23627/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:35:54.390 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:35:54.391 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2026-02-03 04:35:54.592 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23627/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:54.595 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x0d3ceaa6cb5f54373538ec7fbc2713c66fbc3ff7e437ccc994618a7fc7aaa4c5"},{"messageHash":"0xe82ccb440836b304af11983e5991028d888ec0fc5180b947289b3463d9f09af7"},{"messageHash":"0x07697c3cefc1c69b1e118eb2d7912fd2f49108a41f0532c27fb0017ec95221d1"},{"messageHash":"0x2ce25e521a0a15092f1564e005934fb0e7456a8620bf01c83bf57178b2aa59bb"},{"messageHash":"0x4854429461b4508f9a5ca8b058d0cdf9900b759c23c50f15914f00da39c370d7"},{"messageHash":"0x19807ab89694ac7f766e3a104d258497a0a648225312e9f40abed3ad905495bf"},{"messageHash":"0x85917034fdd69d340a8b108b2cd267fb2078be57b06867ac87780b1a87bb827f"},{"messageHash":"0x256e3c9fe0d1c6492a9dbf4151f868cf26879c65e74b6d3c04c4727bd5d18eec"}]}'
2026-02-03 04:35:54.595 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17776/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:35:54.598 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x0d3ceaa6cb5f54373538ec7fbc2713c66fbc3ff7e437ccc994618a7fc7aaa4c5"},{"messageHash":"0xe82ccb440836b304af11983e5991028d888ec0fc5180b947289b3463d9f09af7"},{"messageHash":"0x07697c3cefc1c69b1e118eb2d7912fd2f49108a41f0532c27fb0017ec95221d1"},{"messageHash":"0x2ce25e521a0a15092f1564e005934fb0e7456a8620bf01c83bf57178b2aa59bb"},{"messageHash":"0x4854429461b4508f9a5ca8b058d0cdf9900b759c23c50f15914f00da39c370d7"},{"messageHash":"0x19807ab89694ac7f766e3a104d258497a0a648225312e9f40abed3ad905495bf"},{"messageHash":"0x85917034fdd69d340a8b108b2cd267fb2078be57b06867ac87780b1a87bb827f"},{"messageHash":"0x256e3c9fe0d1c6492a9dbf4151f868cf26879c65e74b6d3c04c4727bd5d18eec"}]}'
2026-02-03 04:35:54.600 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-03 04:35:54.601 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-03 04:35:54.601 DEBUG [src.node.waku_node] Stopping container with id f20a1c1aaff7
2026-02-03 04:35:55.092 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:35:55.093 DEBUG [src.node.waku_node] Stopping container with id d9f9f21cfd9f
2026-02-03 04:35:55.556 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:35:55.557 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-03 04:35:55.564 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-03 04:35:55.572 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
