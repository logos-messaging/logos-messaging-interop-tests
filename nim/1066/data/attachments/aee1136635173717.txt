2026-02-03 04:34:29.234 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-03 04:34:29.236 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_no_request_id with id: 2026-02-03_04-34-29__b086aa80-047d-4a5c-8c10-1fb73855f703
2026-02-03 04:34:29.236 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-03 04:34:29.237 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-03 04:34:29.238 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2026-02-03 04:34:29.245 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:34:29.246 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-03_04-34-29__b086aa80-047d-4a5c-8c10-1fb73855f703__wakuorg_nwaku:latest.log
2026-02-03 04:34:29.246 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:34:29.246 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:34:29.249 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:34:29.249 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.18
2026-02-03 04:34:29.249 DEBUG [src.node.docker_mananger] Generated ports ['6253', '6254', '6255', '6256', '6257']
2026-02-03 04:34:29.250 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:34:29.250 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:34:29.250 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:34:29.250 DEBUG [src.node.docker_mananger] docker run -i -t -p 6253:6253 -p 6254:6254 -p 6255:6255 -p 6256:6256 -p 6257:6257 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6255 --rest-port=6253 --tcp-port=6254 --discv5-udp-port=6256 --rest-address=0.0.0.0 --nat=extip:172.18.229.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbd6abcaf9ff0e55a767ab0f84ca5a823ee0b2541216eea7795742a6f2c3b015 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6257 --metrics-logging=true --relay=true --filter=true
2026-02-03 04:34:29.428 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.18 waku e280287cbbbe09dd99ed909aa1f1599a80d7e18a9590caa4c9778c1ffa9fd1db
2026-02-03 04:34:29.457 DEBUG [src.node.docker_mananger] Container started with ID e280287cbbbe. Setting up logs at ./log/docker/node1_2026-02-03_04-34-29__b086aa80-047d-4a5c-8c10-1fb73855f703__wakuorg_nwaku:latest.log
2026-02-03 04:34:29.458 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6253
2026-02-03 04:34:29.459 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:34:29.492 ERROR [src.node.docker_mananger] Max retries reached for container 570bf50ca4e8. Exiting log stream.
2026-02-03 04:34:30.059 ERROR [src.node.docker_mananger] Max retries reached for container a82f5a10a503. Exiting log stream.
2026-02-03 04:34:30.459 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6253/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:34:30.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:34:30.462 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:34:30.463 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6253/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:34:30.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.18/tcp/6254/p2p/16Uiu2HAmSwVra72f49xhQiqdr44Hnu4PSY6rnBSpkGEExsuyEMcU","/ip4/172.18.229.18/tcp/6255/ws/p2p/16Uiu2HAmSwVra72f49xhQiqdr44Hnu4PSY6rnBSpkGEExsuyEMcU"],"enrUri":"enr:-L24QCLN4C_djK7jgv_8VJuh6-xWwmhHGwJPXTFyuMCJAsPBNOUuwaiyFhQ0jBYXWrA-2HaR7HjDsDarbmcatLXJCnUCgmlkgnY0gmlwhKwS5RKKbXVsdGlhZGRyc5YACASsEuUSBhhuAAoErBLlEgYYb90DgnJzhQADAQAAiXNlY3AyNTZrMaED1D5FauHeAzj7m9gumeFFPFpE_MyycCjaTaaC2gAN3-GDdGNwghhug3VkcIIYcIV3YWt1MgU"}'
2026-02-03 04:34:30.465 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:34:30.466 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2026-02-03 04:34:30.472 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:34:30.472 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-03_04-34-29__b086aa80-047d-4a5c-8c10-1fb73855f703__wakuorg_nwaku:latest.log
2026-02-03 04:34:30.472 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:34:30.472 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:34:30.474 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:34:30.474 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.147.238
2026-02-03 04:34:30.474 DEBUG [src.node.docker_mananger] Generated ports ['50957', '50958', '50959', '50960', '50961']
2026-02-03 04:34:30.474 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:34:30.474 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:34:30.474 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:34:30.475 DEBUG [src.node.docker_mananger] docker run -i -t -p 50957:50957 -p 50958:50958 -p 50959:50959 -p 50960:50960 -p 50961:50961 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50959 --rest-port=50957 --tcp-port=50958 --discv5-udp-port=50960 --rest-address=0.0.0.0 --nat=extip:172.18.147.238 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8a1fcddafe8a032691dad1c6964dd7347bf1ba354c08136b3ad2525aab5976c9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50961 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QCLN4C_djK7jgv_8VJuh6-xWwmhHGwJPXTFyuMCJAsPBNOUuwaiyFhQ0jBYXWrA-2HaR7HjDsDarbmcatLXJCnUCgmlkgnY0gmlwhKwS5RKKbXVsdGlhZGRyc5YACASsEuUSBhhuAAoErBLlEgYYb90DgnJzhQADAQAAiXNlY3AyNTZrMaED1D5FauHeAzj7m9gumeFFPFpE_MyycCjaTaaC2gAN3-GDdGNwghhug3VkcIIYcIV3YWt1MgU --filternode=/ip4/172.18.229.18/tcp/6254/p2p/16Uiu2HAmSwVra72f49xhQiqdr44Hnu4PSY6rnBSpkGEExsuyEMcU
2026-02-03 04:34:30.657 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.147.238 waku 22dfa023c19a8b7ef668e8dbcbe12b91735074825c0423488fc112548586f2ed
2026-02-03 04:34:30.688 DEBUG [src.node.docker_mananger] Container started with ID 22dfa023c19a. Setting up logs at ./log/docker/node2_2026-02-03_04-34-29__b086aa80-047d-4a5c-8c10-1fb73855f703__wakuorg_nwaku:latest.log
2026-02-03 04:34:30.689 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50957
2026-02-03 04:34:30.689 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:34:31.689 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50957/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:34:31.693 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-03 04:34:31.694 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:34:31.694 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50957/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:34:31.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.238/tcp/50958/p2p/16Uiu2HAm23ucecP3bATbs55M8g1kbGwEifXQpAE8h55AWdn35DpY","/ip4/172.18.147.238/tcp/50959/ws/p2p/16Uiu2HAm23ucecP3bATbs55M8g1kbGwEifXQpAE8h55AWdn35DpY"],"enrUri":"enr:-L24QO0hNjhvZF8hq2URex4I37dX9olmaamrQQZ25Iu-Oo9aOQ0gklVOYw6g5q-6kO8NHtVAZcxzE4BNP_4a0hiWZtwCgmlkgnY0gmlwhKwSk-6KbXVsdGlhZGRyc5YACASsEpPuBscOAAoErBKT7gbHD90DgnJzhQADAQAAiXNlY3AyNTZrMaECYm5yxcgztkdlFFW_RCfI79x4scw9hHluX96nVDnwutWDdGNwgscOg3VkcILHEIV3YWt1MgA"}'
2026-02-03 04:34:31.696 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:34:31.697 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50957/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.229.18/tcp/6254/p2p/16Uiu2HAmSwVra72f49xhQiqdr44Hnu4PSY6rnBSpkGEExsuyEMcU"]'
2026-02-03 04:34:31.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:34:31.725 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2026-02-03 04:34:31.726 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6253/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-03 04:34:31.741 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:34:31.744 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50957/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c49c6586-45a9-4ef4-bcf3-219a48c827a2", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-03 04:34:31.754 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"c49c6586-45a9-4ef4-bcf3-219a48c827a2","statusDesc":"OK"}'
2026-02-03 04:34:31.756 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:50957/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-03 04:34:31.758 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:50957/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data: \\", contentType: \\"text/plain\\"))"}'
2026-02-03 04:34:31.762 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-03 04:34:31.762 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-03 04:34:31.762 DEBUG [src.node.waku_node] Stopping container with id e280287cbbbe
2026-02-03 04:34:32.309 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:34:32.310 DEBUG [src.node.waku_node] Stopping container with id 22dfa023c19a
2026-02-03 04:34:32.832 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:34:32.833 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-03 04:34:32.837 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-03 04:34:32.842 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
