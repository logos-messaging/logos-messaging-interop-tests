2026-02-03 04:33:05.271 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-03 04:33:05.272 DEBUG [tests.conftest] Running test: test_filter with id: 2026-02-03_04-33-05__72fc5bba-a588-4f59-a9ac-1d941ec011fe
2026-02-03 04:33:05.272 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-03 04:33:05.272 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2026-02-03 04:33:05.273 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2026-02-03 04:33:05.273 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-03 04:33:05.273 DEBUG [src.steps.store] Running fixture setup: store_setup
2026-02-03 04:33:05.283 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:33:05.283 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-03_04-33-05__72fc5bba-a588-4f59-a9ac-1d941ec011fe__wakuorg_nwaku:latest.log
2026-02-03 04:33:05.284 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:33:05.284 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:33:05.326 DEBUG [src.node.docker_mananger] Network waku created
2026-02-03 04:33:05.326 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.26.185
2026-02-03 04:33:05.326 DEBUG [src.node.docker_mananger] Generated ports ['49775', '49776', '49777', '49778', '49779']
2026-02-03 04:33:05.326 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:33:05.327 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:33:05.327 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:33:05.327 DEBUG [src.node.docker_mananger] docker run -i -t -p 49775:49775 -p 49776:49776 -p 49777:49777 -p 49778:49778 -p 49779:49779 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49777 --rest-port=49775 --tcp-port=49776 --discv5-udp-port=49778 --rest-address=0.0.0.0 --nat=extip:172.18.26.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a701efa18db3cfedd034a3d8aa6cec6132da5eb44fe6affb5ccae0bcf8583376 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49779 --metrics-logging=true --relay=true --filter=true
2026-02-03 04:33:08.477 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.26.185 waku ba385e4203e21273f3c0bce1fab91d3c779d6e80356ad3f12756df23b31f484f
2026-02-03 04:33:08.509 DEBUG [src.node.docker_mananger] Container started with ID ba385e4203e2. Setting up logs at ./log/docker/node1_2026-02-03_04-33-05__72fc5bba-a588-4f59-a9ac-1d941ec011fe__wakuorg_nwaku:latest.log
2026-02-03 04:33:08.510 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49775
2026-02-03 04:33:08.510 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:33:09.513 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49775/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:09.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_READY","desc":"Relay is not ready, filter will not be able to sort out messages"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:33:09.518 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:33:09.518 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49775/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:09.520 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.26.185/tcp/49776/p2p/16Uiu2HAmTTU1ogPKwZW1w6YzhiEugdiLnKZYbfQjDP1zkLc6F9wy","/ip4/172.18.26.185/tcp/49777/ws/p2p/16Uiu2HAmTTU1ogPKwZW1w6YzhiEugdiLnKZYbfQjDP1zkLc6F9wy"],"enrUri":"enr:-L24QOFBqUqnk4VlH0YockBZWmwTpbrQ5NAgNWg31CXzGBZ7NHcD5iYJ31CkUHAg17fwz3HqLc0hVJFWm6K9EId8M5ECgmlkgnY0gmlwhKwSGrmKbXVsdGlhZGRyc5YACASsEhq5BsJwAAoErBIauQbCcd0DgnJzhQADAQAAiXNlY3AyNTZrMaED2-udMf2MYKcXGFEn230KiTqkHavrtTqTpCvy6BPGpTSDdGNwgsJwg3VkcILCcoV3YWt1MgU"}'
2026-02-03 04:33:09.520 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:33:09.527 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:33:09.527 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-03_04-33-05__72fc5bba-a588-4f59-a9ac-1d941ec011fe__wakuorg_nwaku:latest.log
2026-02-03 04:33:09.527 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:33:09.527 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:33:09.529 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:33:09.529 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.0.227
2026-02-03 04:33:09.529 DEBUG [src.node.docker_mananger] Generated ports ['18976', '18977', '18978', '18979', '18980']
2026-02-03 04:33:09.529 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:33:09.529 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:33:09.529 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:33:09.530 DEBUG [src.node.docker_mananger] docker run -i -t -p 18976:18976 -p 18977:18977 -p 18978:18978 -p 18979:18979 -p 18980:18980 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18978 --rest-port=18976 --tcp-port=18977 --discv5-udp-port=18979 --rest-address=0.0.0.0 --nat=extip:172.18.0.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b646ab55c09ff37af92bfaac326498b18c462f3bae70ee30adcb53012965f64a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18980 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QOFBqUqnk4VlH0YockBZWmwTpbrQ5NAgNWg31CXzGBZ7NHcD5iYJ31CkUHAg17fwz3HqLc0hVJFWm6K9EId8M5ECgmlkgnY0gmlwhKwSGrmKbXVsdGlhZGRyc5YACASsEhq5BsJwAAoErBIauQbCcd0DgnJzhQADAQAAiXNlY3AyNTZrMaED2-udMf2MYKcXGFEn230KiTqkHavrtTqTpCvy6BPGpTSDdGNwgsJwg3VkcILCcoV3YWt1MgU --filternode=/ip4/172.18.26.185/tcp/49776/p2p/16Uiu2HAmTTU1ogPKwZW1w6YzhiEugdiLnKZYbfQjDP1zkLc6F9wy
2026-02-03 04:33:09.708 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.0.227 waku 84e27d306ae67d6e2a7392942b72c9f2f9ffdd5c532b2c9c927b416c7fb2761a
2026-02-03 04:33:09.739 DEBUG [src.node.docker_mananger] Container started with ID 84e27d306ae6. Setting up logs at ./log/docker/node1_2026-02-03_04-33-05__72fc5bba-a588-4f59-a9ac-1d941ec011fe__wakuorg_nwaku:latest.log
2026-02-03 04:33:09.740 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18976
2026-02-03 04:33:09.740 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:33:10.740 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18976/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:10.744 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_MOUNTED"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"READY"}]}'
2026-02-03 04:33:10.745 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:33:10.745 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18976/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:10.747 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.227/tcp/18977/p2p/16Uiu2HAm3gvbLUy9nNoLMCk5D451yXdwkS5JKdNawD7xr1GTymqf","/ip4/172.18.0.227/tcp/18978/ws/p2p/16Uiu2HAm3gvbLUy9nNoLMCk5D451yXdwkS5JKdNawD7xr1GTymqf"],"enrUri":"enr:-L24QO-h8q4va2OjRXsXbb21rmnxEFrF9dRiMe5oWbjq_AysMtm3VpFOtdByqPHuEfXzq6AENWPgVRusZdEAdkgu5U8CgmlkgnY0gmlwhKwSAOOKbXVsdGlhZGRyc5YACASsEgDjBkohAAoErBIA4wZKIt0DgnJzhQADAQAAiXNlY3AyNTZrMaECesW69XncHVdcGGXjrmvTnVyoIyWeHotiKQ6IEMDXI3aDdGNwgkohg3VkcIJKI4V3YWt1MgA"}'
2026-02-03 04:33:10.747 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:33:10.748 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49775/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-03 04:33:10.761 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:10.761 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18976/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "784a267e-7c90-44c9-ae6f-8e80bd073aed", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2026-02-03 04:33:10.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"784a267e-7c90-44c9-ae6f-8e80bd073aed","statusDesc":"OK"}'
2026-02-03 04:33:10.802 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49775/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:33:10.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:10.814 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-03 04:33:10.915 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-03 04:33:10.915 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18976/filter/v2/messages/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:10.917 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770093190802159979,"ephemeral":false}]'
2026-02-03 04:33:10.921 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-03 04:33:10.922 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-03 04:33:10.922 DEBUG [src.node.waku_node] Stopping container with id ba385e4203e2
2026-02-03 04:33:11.440 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:33:11.441 DEBUG [src.node.waku_node] Stopping container with id 84e27d306ae6
2026-02-03 04:33:11.967 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:33:11.970 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-03 04:33:11.975 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-03 04:33:11.980 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
