2026-02-03 04:33:52.036 DEBUG [tests.conftest] Running fixture setup: test_id
2026-02-03 04:33:52.036 DEBUG [tests.conftest] Running test: test_publish_after_node_pauses_and_pauses with id: 2026-02-03_04-33-52__3a7e0c87-e908-4da6-86b6-c1d8bfee7970
2026-02-03 04:33:52.037 DEBUG [src.steps.common] Running fixture setup: common_setup
2026-02-03 04:33:52.037 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2026-02-03 04:33:52.037 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2026-02-03 04:33:52.043 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:33:52.043 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2026-02-03_04-33-52__3a7e0c87-e908-4da6-86b6-c1d8bfee7970__wakuorg_nwaku:latest.log
2026-02-03 04:33:52.043 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:33:52.043 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:33:52.045 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:33:52.045 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.90.236
2026-02-03 04:33:52.045 DEBUG [src.node.docker_mananger] Generated ports ['64175', '64176', '64177', '64178', '64179']
2026-02-03 04:33:52.045 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:33:52.045 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:33:52.045 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:33:52.045 DEBUG [src.node.docker_mananger] docker run -i -t -p 64175:64175 -p 64176:64176 -p 64177:64177 -p 64178:64178 -p 64179:64179 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64177 --rest-port=64175 --tcp-port=64176 --discv5-udp-port=64178 --rest-address=0.0.0.0 --nat=extip:172.18.90.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b1dfdcffc6b7ec4b5fd89decbe5da04ac041e3aac00f4aafb51c81792afc08c0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64179 --metrics-logging=true --relay=true
2026-02-03 04:33:52.225 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.90.236 waku 67307c12a305bcf2889118d4942cc3d447eea7365314053e304a4c590995b803
2026-02-03 04:33:52.255 DEBUG [src.node.docker_mananger] Container started with ID 67307c12a305. Setting up logs at ./log/docker/node1_2026-02-03_04-33-52__3a7e0c87-e908-4da6-86b6-c1d8bfee7970__wakuorg_nwaku:latest.log
2026-02-03 04:33:52.255 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64175
2026-02-03 04:33:52.255 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:33:52.337 ERROR [src.node.docker_mananger] Max retries reached for container ce92bc5248c1. Exiting log stream.
2026-02-03 04:33:52.828 ERROR [src.node.docker_mananger] Max retries reached for container 0e2672da1a93. Exiting log stream.
2026-02-03 04:33:53.256 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64175/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:53.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:33:53.259 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:33:53.259 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64175/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:53.262 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.90.236/tcp/64176/p2p/16Uiu2HAmFHoEC2W8P1qzJoDqt7LoUFJnQ1hFba7gFyodVktbkr7d","/ip4/172.18.90.236/tcp/64177/ws/p2p/16Uiu2HAmFHoEC2W8P1qzJoDqt7LoUFJnQ1hFba7gFyodVktbkr7d"],"enrUri":"enr:-L24QMXjjNNBqRK0TSfATjlF1Q3woVgHvKXGX5ToAjrBIfoyDtLM62NaGl6ohMuoeE-u8lTZwncdoXyXLWWmUuUF_oYCgmlkgnY0gmlwhKwSWuyKbXVsdGlhZGRyc5YACASsElrsBvqwAAoErBJa7Ab6sd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJyVJo8k8cGo-ULylumSopW1FFOiDY54DnKmk4skTV9yDdGNwgvqwg3VkcIL6soV3YWt1MgE"}'
2026-02-03 04:33:53.262 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:33:53.268 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2026-02-03 04:33:53.268 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2026-02-03_04-33-52__3a7e0c87-e908-4da6-86b6-c1d8bfee7970__wakuorg_nwaku:latest.log
2026-02-03 04:33:53.268 DEBUG [src.node.waku_node] Starting Node...
2026-02-03 04:33:53.269 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2026-02-03 04:33:53.270 DEBUG [src.node.docker_mananger] Network waku already exists
2026-02-03 04:33:53.270 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.116.114
2026-02-03 04:33:53.270 DEBUG [src.node.docker_mananger] Generated ports ['60223', '60224', '60225', '60226', '60227']
2026-02-03 04:33:53.270 DEBUG [src.node.waku_node] RLN credentials were not set
2026-02-03 04:33:53.271 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2026-02-03 04:33:53.271 DEBUG [src.node.waku_node] Using volumes []
2026-02-03 04:33:53.271 DEBUG [src.node.docker_mananger] docker run -i -t -p 60223:60223 -p 60224:60224 -p 60225:60225 -p 60226:60226 -p 60227:60227 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60225 --rest-port=60223 --tcp-port=60224 --discv5-udp-port=60226 --rest-address=0.0.0.0 --nat=extip:172.18.116.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8601e6fdd8e5debcae7bbf05fb54a5acbfb663dfee3f045957b07a7bab844cce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60227 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMXjjNNBqRK0TSfATjlF1Q3woVgHvKXGX5ToAjrBIfoyDtLM62NaGl6ohMuoeE-u8lTZwncdoXyXLWWmUuUF_oYCgmlkgnY0gmlwhKwSWuyKbXVsdGlhZGRyc5YACASsElrsBvqwAAoErBJa7Ab6sd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJyVJo8k8cGo-ULylumSopW1FFOiDY54DnKmk4skTV9yDdGNwgvqwg3VkcIL6soV3YWt1MgE
2026-02-03 04:33:53.474 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.116.114 waku 14e59a36f1176e5e3b49188b908eccbb7d251d7a3bd5dfb5e0709cc96b554e0e
2026-02-03 04:33:53.504 DEBUG [src.node.docker_mananger] Container started with ID 14e59a36f117. Setting up logs at ./log/docker/node2_2026-02-03_04-33-52__3a7e0c87-e908-4da6-86b6-c1d8bfee7970__wakuorg_nwaku:latest.log
2026-02-03 04:33:53.504 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60223
2026-02-03 04:33:53.504 DEBUG [src.libs.common] Sleeping for 1 seconds
2026-02-03 04:33:54.505 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60223/health" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:54.515 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"READY","protocolsHealth":[{"Relay":"NOT_READY","desc":"No connected peers"},{"Rln Relay":"NOT_MOUNTED"},{"Lightpush":"NOT_MOUNTED"},{"Legacy Lightpush":"NOT_MOUNTED"},{"Filter":"NOT_MOUNTED"},{"Store":"NOT_MOUNTED"},{"Legacy Store":"NOT_MOUNTED"},{"Peer Exchange":"READY"},{"Rendezvous":"NOT_READY","desc":"No Rendezvous peers are available yet"},{"Mix":"NOT_MOUNTED"},{"Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Legacy Lightpush Client":"NOT_READY","desc":"No Lightpush service peer available yet"},{"Store Client":"NOT_READY","desc":"No Store service peer available yet, neither Store service set up for the node"},{"Legacy Store Client":"NOT_READY","desc":"No Legacy Store service peers are available yet, neither Store service set up for the node"},{"Filter Client":"NOT_READY","desc":"No Filter service peer available yet"}]}'
2026-02-03 04:33:54.516 INFO [src.node.waku_node] Node protocols are initialized !!
2026-02-03 04:33:54.518 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60223/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:54.521 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.114/tcp/60224/p2p/16Uiu2HAky4jFAi2vxDCrGTaJZjgqgvpYsapKM1FEFgjRJNntzNkR","/ip4/172.18.116.114/tcp/60225/ws/p2p/16Uiu2HAky4jFAi2vxDCrGTaJZjgqgvpYsapKM1FEFgjRJNntzNkR"],"enrUri":"enr:-L24QAK7-zb6p4GJRE9Cbf3Cg1F8iHF41zQLSLDcy6XAb_7ta5lMOaUJpFndNvtRe5BSJ3JOfHEhD_TghKANTVgKqcQCgmlkgnY0gmlwhKwSdHKKbXVsdGlhZGRyc5YACASsEnRyButAAAoErBJ0cgbrQd0DgnJzhQADAQAAiXNlY3AyNTZrMaECNhE-F_ZYgi1eK4ZIO6BF5PsjD_WsdIugCJNwR0QIBcKDdGNwgutAg3VkcILrQoV3YWt1MgE"}'
2026-02-03 04:33:54.521 INFO [src.node.waku_node] REST service is ready !!
2026-02-03 04:33:54.522 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60223/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.90.236/tcp/64176/p2p/16Uiu2HAmFHoEC2W8P1qzJoDqt7LoUFJnQ1hFba7gFyodVktbkr7d"]'
2026-02-03 04:33:54.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:54.526 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2026-02-03 04:33:54.526 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64175/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-03 04:33:54.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:54.530 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60223/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2026-02-03 04:33:54.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:54.536 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64175/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:33:54.540 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:54.540 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-03 04:33:54.640 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-03 04:33:54.641 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64175/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:54.643 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770093234536088320,"ephemeral":false,"proof":""}]'
2026-02-03 04:33:54.645 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-03 04:33:54.645 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60223/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:54.647 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770093234536088320,"ephemeral":false,"proof":""}]'
2026-02-03 04:33:54.648 INFO [src.steps.relay] WARM UP successful!!
2026-02-03 04:33:54.649 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64175/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:33:54.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:54.654 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-03 04:33:54.754 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-03 04:33:54.754 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64175/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:54.756 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770093234649655110,"ephemeral":false,"proof":""}]'
2026-02-03 04:33:54.758 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-03 04:33:54.758 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60223/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:54.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770093234649655110,"ephemeral":false,"proof":""}]'
2026-02-03 04:33:54.761 DEBUG [src.node.waku_node] Pausing container with id 67307c12a305
2026-02-03 04:33:54.770 DEBUG [src.node.waku_node] Unpause container with id 67307c12a305
2026-02-03 04:33:54.778 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64175/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTE=", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:33:54.782 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:54.783 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-03 04:33:54.884 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-03 04:33:54.884 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64175/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:54.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTE=","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770093234778840260,"ephemeral":false,"proof":""}]'
2026-02-03 04:33:54.888 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-03 04:33:54.888 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60223/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:54.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTE=","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770093234778840260,"ephemeral":false,"proof":""}]'
2026-02-03 04:33:54.891 DEBUG [src.node.waku_node] Pausing container with id 14e59a36f117
2026-02-03 04:33:54.900 DEBUG [src.node.waku_node] Unpause container with id 14e59a36f117
2026-02-03 04:33:54.907 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64175/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTI=", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2026-02-03 04:33:54.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2026-02-03 04:33:54.912 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2026-02-03 04:33:55.012 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2026-02-03 04:33:55.012 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64175/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:55.014 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTI=","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770093234907591694,"ephemeral":false,"proof":""}]'
2026-02-03 04:33:55.016 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2026-02-03 04:33:55.016 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60223/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2026-02-03 04:33:55.018 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTI=","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1770093234907591694,"ephemeral":false,"proof":""}]'
2026-02-03 04:33:55.021 DEBUG [tests.conftest] Running fixture teardown: test_setup
2026-02-03 04:33:55.022 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2026-02-03 04:33:55.022 DEBUG [src.node.waku_node] Stopping container with id 67307c12a305
2026-02-03 04:33:55.552 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:33:55.552 DEBUG [src.node.waku_node] Stopping container with id 14e59a36f117
2026-02-03 04:33:56.050 DEBUG [src.node.waku_node] Container stopped.
2026-02-03 04:33:56.052 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2026-02-03 04:33:56.058 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2026-02-03 04:33:56.063 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
